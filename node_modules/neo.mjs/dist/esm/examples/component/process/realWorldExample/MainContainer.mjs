import e from"../../../../src/button/Base.mjs";import a from"../../../../src/form/field/CheckBox.mjs";import t from"../../../ConfigurationViewport.mjs";import l from"../../../../src/form/field/ComboBox.mjs";import o from"../../../../src/component/Base.mjs";import n from"../../../../src/container/Base.mjs";import r from"../../../../src/form/field/Display.mjs";import s from"../../../../src/form/Container.mjs";import i from"../../../../src/form/field/Number.mjs";import m from"../../../../src/component/Process.mjs";import u from"../../../../src/form/field/Range.mjs";import d from"../../../../src/form/field/Text.mjs";import c from"../../../../src/component/Toast.mjs";export default Neo.setupClass(class extends t{static config={className:"Neo.examples.component.process.realWorldExample.MainContainer",configItemLabelWidth:110,configItemWidth:250,configPanelMinWidth:250,configPanelFlex:"none",layout:{ntype:"hbox",align:"stretch"}};createConfigurationComponents(){let e=this;return[{module:a,checked:!1,value:5,labelText:"horizontal",listeners:{change:e.onConfigChange.bind(e,"horizontal")}},{module:d,labelText:"arrowColor",listeners:{change:e.onConfigChange.bind(e,"arrowColor")}},{module:d,labelText:"iconColor",listeners:{change:e.onConfigChange.bind(e,"iconColor")}}]}createExampleComponent(){const a=this,t=a.onRangeChange.bind(a);fetch("https://api.open-meteo.com/v1/forecast?latitude=52.51239766781255&longitude=13.35733940978727&current_weather=true").then(async e=>{let t=await e.json(),l=Math.ceil(t.current_weather.temperature);a.down({flag:"temperature"}).value=l});return Neo.create({module:n,maxWidth:450,maxHeight:"100%",style:{overflowY:"auto",margin:"0 auto"},itemDefaults:{horizontal:!1},items:[{module:o,vdom:{cn:[{tag:"img",src:"./RangeHeader.jpg",width:"100%"}]}},{module:m,flag:"start-process",items:[{iconCls:"fa fa-plane-departure",title:"Start Eingabe",text:"Batterie % und Kilometerstand"}]},{module:s,hasFields:!0,layout:{ntype:"vbox",align:"stretch"},items:[{module:i,flag:"max-capacity",labelText:"max. Kapazität kWh",minValue:1,maxValue:500,value:29},{module:u,flag:"start-battery",labelText:"Batterie %",showResultInLabel:!0,minValue:1,maxValue:100,value:100,listeners:{change:t}},{module:i,flag:"start-km",labelText:"Kilometerstand",minValue:0,maxValue:5e5}],listeners:{fieldFocusLeave:t}},{module:m,flag:"end-process",items:[{iconCls:"fa fa-plane-arrival",title:"Ankunft Eingabe",text:"Batterie % und Kilometerstand"}]},{module:s,hasFields:!0,layout:{ntype:"vbox",align:"stretch"},items:[{module:u,flag:"end-battery",labelText:"Batterie %",showResultInLabel:!0,minValue:0,maxValue:99,value:0,listeners:{change:t}},{module:i,flag:"end-km",labelText:"Kilometerstand",minValue:0,maxValue:5e5}],listeners:{fieldFocusLeave:t}},{module:m,flag:"result-process",arrowColor:"rgb(200 155 12)",items:[{iconCls:"fa fa-square-poll-vertical",title:"Ergebnisse",text:"Errechnete Ergebnisse"}]},{module:s,hasFields:!0,layout:{ntype:"vbox",align:"stretch"},listeners:{fieldChange:t},items:[{module:r,flag:"result",labelText:"Rest Kilometer"},{module:r,flag:"remain-kWh",labelText:"Rest kWh"},{module:r,flag:"average-kWh",labelText:"kwH pro 100km"}]},{module:m,arrowColor:"rgb(200 155 12)",items:[{iconCls:"fa fa-magnifying-glass-chart",title:"Zusätzliche Angaben",text:"Für die Langzeitauswertung"}]},{module:s,flag:"additional-information",disabled:!0,layout:{ntype:"vbox",align:"stretch"},itemDefaults:{showResultInLabel:!0,value:20},items:[{module:l,displayField:"name",labelText:"Fahrstil",value:"normal",store:{data:[{style:"sportStyle",name:"sport",code:"sportCode"},{style:"normalStyle",name:"normal",code:"normalCode"},{style:"ecoStyle",name:"eco",code:"ecoCode"}],model:{fields:[{name:"style",type:"String"},{name:"name",type:"String"},{name:"code",type:"String"}]}}},{module:u,flag:"highway",labelText:"Autobahn %",minValue:0,maxValue:100},{module:u,flag:"temperature",labelText:"Außen-Temp.",minValue:-20,maxValue:50},{module:e,text:"Speichern und Auswerten",ui:"secondary",style:{minHeight:"50px",marginBottom:"35px"},handler:a.onSaveClick.bind(a)}],listeners:{fieldChange:t}}]})}onConfigChange(e,a){Neo.find({ntype:"process"}).forEach(t=>{t[e]=a.value})}onRangeChange(e){const a=this,t=a.down({flag:"start-battery"}).value,l=a.down({flag:"end-battery"}),o=l.value,n=a.down({flag:"start-km"}).value,r=a.down({flag:"end-km"}),s=r.value,i=a.down({flag:"additional-information"});if(n){this.down({flag:"start-process"}).arrowColor="#12FE88"}if(s){this.down({flag:"end-process"}).arrowColor="#12FE88"}if((n&&!s||s<=n)&&(r.value=n+5),o>=t&&(l.value=t-1),n&&s){const e=a.down({flag:"result"}),l=a.down({flag:"max-capacity"}),r=a.down({flag:"remain-kWh"}),m=a.down({flag:"average-kWh"}),u=t-o,d=s-n,c=a.down({flag:"max-capacity"}).value*(u/100),f=o*d/u;i.disabled=!1,e.value=Math.ceil(f),r.value=Math.ceil(l.value*(o/100)),m.value=Math.ceil(c/d*100)}else i.disabled=!0}onSaveClick(){const e=this.down({flag:"average-kWh"}).value;let a,t=`Du hast einen durchschnittlichen Verbrauch von ${e} kwh/100km.`,l="fa fa-user-tie",o="results";e>25?(t=`Du bist seeehr sportlich unterwegs mit ${e} kWh auf 100km`,l="fa fa-flag-checkered",a="danger",o="racing"):e<15&&(t=`Du bist sehr umweltbewusst gefahren und hast nur ${e} kwh/100km verbraucht.`,l="fa-brands fa-pagelines",a="success",o="ECO"),Neo.toast({appName:this.appName,ui:a,iconCls:l,title:o,msg:t})}});