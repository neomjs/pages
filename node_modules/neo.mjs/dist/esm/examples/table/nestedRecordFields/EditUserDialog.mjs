import e from"../../../src/form/field/CheckBox.mjs";import t from"../../../src/form/field/Country.mjs";import l from"../../../src/dialog/Base.mjs";import s from"../../../src/form/field/Text.mjs";export default Neo.setupClass(class extends l{static config={className:"Neo.examples.table.nestedRecordFields.EditUserDialog",closeAction:"hide",containerConfig:{style:{padding:"1em"}},modal:!0,record_:null,title:"Edit User",itemDefaults:{flex:"none",labelWidth:110},items:[{module:s,labelText:"Firstname",listeners:{change:"up.onFirstnameFieldChange"},reference:"firstname-field"},{module:s,labelText:"Lastname",listeners:{change:"up.onLastnameFieldChange"},reference:"lastname-field"},{module:t,bind:{store:"stores.countries"},labelText:"Country",listeners:{change:"up.onCountryFieldChange"},reference:"country-field",valueField:"code"},{module:e,labelText:"Selected",listeners:{change:"up.onSelectedFieldChange"},reference:"selected-field",style:{marginTop:"1em"}}]};async afterSetRecord(e,t){if(e){let e=this,{record:t}=e;await e.timeout(20),e.getItem("country-field").value=t.country,e.getItem("firstname-field").value=t["user.firstname"],e.getItem("lastname-field").value=t["user.lastname"],e.getItem("selected-field").checked=t["annotations.selected"]}}onCountryFieldChange(e){this.record.set({country:e.value.code})}onFirstnameFieldChange(e){this.record.set({user:{firstname:e.value}})}onLastnameFieldChange(e){this.record.set({user:{lastname:e.value}})}onSelectedFieldChange(e){let t=this,l=t.getStateProvider().getStore("mainStore");!1===e.value?t.record.set({annotations:{selected:!1}}):l.items.forEach(l=>{l.set({annotations:{selected:l===t.record&&e.value}})})}});