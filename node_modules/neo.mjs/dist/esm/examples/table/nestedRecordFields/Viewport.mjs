import e from"../../../src/container/Viewport.mjs";import t from"../../../src/button/Base.mjs";import r from"../../../src/table/Container.mjs";import o from"./ViewportStateProvider.mjs";export default Neo.setupClass(class extends e{static config={className:"Neo.examples.table.nestedRecordFields.Viewport",stateProvider:o,style:{padding:"1em"},items:[{ntype:"toolbar",flex:"none",reference:"switch-theme-button",style:{marginBottom:"1em"},items:["->",{handler:"up.onSwitchThemeButtonClick",iconCls:"fas fa-sun",text:"Light Theme"}]},{module:r,bind:{store:"stores.mainStore"},columns:[{dataField:"user.firstname",text:"Firstname"},{dataField:"user.lastname",text:"Lastname"},{dataField:"githubId",text:"Github Id"},{dataField:"country",text:"Country",renderer:"up.countryRenderer"},{dataField:"edit",text:"Edit Action",renderer:"up.editRenderer"}],viewConfig:{highlightModifiedCells:!0}}]};dialog=null;countryRenderer({record:e}){let t=this.getStateProvider().getStore("countries");return t.getCount()>0?t.get(e.country).name:""}editButtonHandler(e){let t=this,r=e.component,{appName:o,dialog:i,theme:d,windowId:a}=t,{record:n}=r;i?(i.animateTargetId=r.id,i.record=n,i.show()):import("./EditUserDialog.mjs").then(e=>{t.dialog=Neo.create({module:e.default,animateTargetId:r.id,appName:o,stateProvider:{parent:t.getStateProvider()},record:n,theme:d,windowId:a})})}editRenderer({column:e,record:r,rowIndex:o,tableContainer:i}){let{appName:d,windowId:a}=this,n=`${e.id}-widget-${o}`,m=(e.widgetMap||(e.widgetMap={}))[n]||(e.widgetMap[n]=Neo.create({module:t,appName:d,handler:"up.editButtonHandler",parentId:i.id,record:r,text:"Edit",windowId:a}));return this.view.updateDepth=-1,m.createVdomReference()}onSwitchThemeButtonClick(e){let t=this,r=e.component,o="neo-theme-light"!==t.theme,i=o?"neo-theme-light":"neo-theme-dark";r.set({iconCls:o?"fa fa-moon":"fa fa-sun",text:o?"Dark Theme":"Light Theme"}),t.theme=i,t.dialog&&(t.dialog.theme=i)}});