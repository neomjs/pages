import e from"../../container/Base.mjs";import t from"../../tab/Container.mjs";export default Neo.setupClass(class extends e{static config={className:"Neo.calendar.view.SettingsContainer",baseCls:["neo-calendar-settingscontainer","neo-container"],collapsed:!1,layout:{ntype:"vbox",align:"stretch"},removeInactiveCards:!0};construct(e){super.construct(e);let t=this;t.collapsed&&(t.vdom.removeDom=!0)}collapse(e){let t=this,n=t.style||{};n.marginRight=`-${e}px`,t._style=n,t._vdom.style=n,t.parent.updateDepth=-1,t.parent.promiseUpdate().then((()=>{t.timeout(400).then((()=>{t.collapsed=!0,t.vdom.removeDom=!0,t.update(),t.mounted=!1}))}))}createItems(){let e=this;e.items=[{ntype:"component",cls:["neo-header"],height:48,html:'<i class="fa fa-cog"></i>Settings'},{module:t,removeInactiveCards:e.removeInactiveCards,items:[{module:()=>import("./settings/GeneralContainer.mjs"),flag:"general",header:{text:"General"},style:{padding:"20px"}},{ntype:"component",flag:"day",header:{text:"Day"},html:"Day",style:{padding:"20px"}},{module:()=>import("./settings/WeekContainer.mjs"),flag:"week",header:{text:"Week"},style:{padding:"20px"}},{module:()=>import("./settings/MonthContainer.mjs"),flag:"month",header:{text:"Month"},style:{padding:"20px"}},{module:()=>import("./settings/YearContainer.mjs"),flag:"year",header:{text:"Year"},style:{padding:"20px"}}],listeners:{activeIndexChange:e.onCardIndexChange,scope:e}}],super.createItems()}expand(){let e,t=this;delete t.vdom.removeDom,t.parent.updateDepth=-1,t.parent.promiseUpdate().then((()=>{t.collapsed=!1,t.mounted=!0,t.timeout(50).then((()=>{e=t.style||{},e.marginRight="0px",t.style=e}))}))}getMainContainer(){return this.up("calendar-maincontainer")}onCardIndexChange(e){let t=this,n=e.item,a=t.getMainContainer();a&&(Neo.isFunction(n.createContent)&&n.items.length<1&&("NeoInstance"!==Neo.typeOf(a[`${n.flag}Component`])?a.on("cardLoaded",(()=>{t.timeout(30).then((()=>{n.createContent()}))}),t,{once:!0}):t.timeout(30).then((()=>{n.createContent()}))),"general"!==n.flag&&(a.activeView=n.flag))}});