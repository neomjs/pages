import e from"../../../button/Base.mjs";import o from"./ColorsList.mjs";import t from"../../../form/Container.mjs";import n from"../../../form/field/Text.mjs";export default Neo.setupClass(class extends t{static config={className:"Neo.calendar.view.calendars.EditContainer",baseCls:["neo-calendar-edit-container"],colorsList:null,colorsListConfig:null,nameFieldConfig:null,owner:null,record_:null,unMountTimeoutId:null};construct(e){super.construct(e),this.vdom.tabIndex=-1}afterSetMounted(e,o){super.afterSetMounted(e,o),e&&this.getField("name").then((e=>{e.focus()}))}afterSetRecord(e,o){let t=this;e&&o?(t.reset({name:e.name}),t.colorsList.value=e.color):e&&t.createItems()}beforeSetRecord(e,o){let t=this;return t.unMountTimeoutId&&(clearTimeout(t.unMountTimeoutId),t.unMountTimeoutId=null),e}createItems(){let t=this,{record:r}=t;r&&(t.colorsList=Neo.create({module:o,listeners:{change:t.onColorChange,scope:t},parentId:t.parentId,value:r.color,wrapperStyle:{marginTop:"0.2em"},...t.colorsListConfig}),t.items=[{module:n,clearToOriginalValue:!0,flex:"none",labelPosition:"inline",labelText:"Calendar Name",listeners:{change:t.onNameFieldChange,scope:t},name:"name",required:!0,value:r.name,...t.nameFieldConfig},t.colorsList,{module:e,cls:["neo-red"],handler:t.onDeleteButtonClick.bind(t),iconCls:"fas fa-trash-alt",style:{marginTop:"3em"},text:"Delete"}],super.createItems())}onColorChange(e){this.record.color=e.record.name}onDeleteButtonClick(e){let o=this;o.getStateProvider().getStore("calendars").remove(o.record),o.unmount()}onFocusLeave(e){let o=this;o.unMountTimeoutId=setTimeout((()=>{o.unMountTimeoutId=null,o.mounted&&o.unmount()}),200)}onNameFieldChange(e){Neo.isEmpty(e.value)||(this.record.name=e.value)}});