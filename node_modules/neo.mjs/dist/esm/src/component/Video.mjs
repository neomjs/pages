import e from"../component/Base.mjs";import t from"../util/VDom.mjs";export default Neo.setupClass(class extends e{static config={className:"Neo.component.Video",ntype:"video",baseCls:["neo-video"],autoPlay:!1,playing_:!1,type:"video/mp4",url_:null,_vdom:{cn:[{flag:"ghost",cls:["neo-video-ghost"],cn:[{tag:"i",cls:["fa-solid","fa-circle-play"]}]},{tag:"video",flag:"media",cls:["neo-video-media"],removeDom:!0,autoplay:!0,controls:!0}]}};construct(e){super.construct(e);let t=this;t.handleAutoplay(),t.addDomListeners({click:t.play,delegate:".neo-video-ghost"})}afterSetPlaying(e,o){let{vdom:a}=this,s=t.getFlags(a,"media")[0];t.getFlags(a,"ghost")[0].removeDom=e,s.removeDom=!e,this.update()}afterSetUrl(e,o){if(!e)return;let{vdom:a}=this;t.getFlags(a,"media")[0].cn=[{tag:"source",src:e,type:this.type}],this.update()}handleAutoplay(){if(!this.autoPlay)return;let{vdom:e}=this,o=t.getFlags(e,"media")[0];o.muted=!0,o.playsInline=!0,this.playing=!0}pause(){this.playing=!1}play(){this.playing=!0}});