import t from"../component/Base.mjs";import e from"../util/Array.mjs";import o from"../manager/Toast.mjs";export default Neo.setupClass(class extends t{static positions=["tl","tc","tr","bl","bc","br"];static slideDirections=["down","up","left","right"];static config={className:"Neo.component.Toast",ntype:"toast",baseCls:["neo-toast"],closable_:!1,floating:!0,iconCls_:null,maxWidth:250,minHeight:50,msg_:null,position_:"tr",slideDirection_:"right",title_:null,vdom:{cn:[{cls:"neo-toast-inner",cn:[{cls:["neo-toast-icon"],removeDom:!0},{cls:"neo-toast-text",cn:[{cls:["neo-toast-title"],removeDom:!0},{cls:"neo-toast-msg"}]},{cls:["neo-toast-close","fa","fa-close"],removeDom:!0}]}]}};removeDelay=3e3;running=!1;construct(t){super.construct(t);let e=this;e.addDomListeners([{click:{fn:e.destroy,delegate:".neo-toast-close",scope:e}}]),o.register(e)}afterSetClosable(t,e){this.getVdomInner().cn[2].removeDom=!t}afterSetIconCls(t,o){let s=this.getVdomInner().cn[0],{cls:n}=s;s.removeDom=Neo.isEmpty(t),e[t?"add":"remove"](n,t)}afterSetMsg(t,e){this.getTextRootVdom().cn[1].text=t}afterSetPosition(t,e){t&&this.addCls(`neo-toast-${t}`)}afterSetSlideDirection(t,e){t&&this.addCls(`neo-toast-slide-${t}-in`)}afterSetMounted(t,e){super.afterSetMounted(t,e);let o=this;!o.closable&&t&&o.timeout(o.removeDelay).then(()=>{o.destroy(!0)})}afterSetTitle(t,o){let s=this.getTextRootVdom().cn[0];s.removeDom=Neo.isEmpty(t),s.text=t,e.toggle(s.cls,"neo-toast-has-title",t),this.update()}beforeSetPosition(t,e){return this.beforeSetEnumValue(t,e,"position")}beforeSetSlideDirection(t,e){return this.beforeSetEnumValue(t,e,"slideDirection")}async destroy(...t){let e=this;const s=super.destroy.bind(e);e.addDomListeners({animationend:function(){o.removeToast(e.id),o.unregister(e),s(...t)}}),e.addCls("neo-toast-fade-out")}getTextRootVdom(){return this.getVdomInner().cn[1]}getVdomInner(){return this.vdom.cn[0]}});