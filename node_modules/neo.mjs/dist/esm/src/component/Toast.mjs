import e from"../component/Base.mjs";import t from"../util/Array.mjs";import o from"../manager/Toast.mjs";export default Neo.setupClass(class extends e{static positions=["tl","tc","tr","bl","bc","br"];static slideDirections=["down","up","left","right"];static config={className:"Neo.component.Toast",ntype:"toast",baseCls:["neo-toast"],closable_:!1,floating:!0,iconCls_:null,maxWidth:250,minHeight:50,msg_:null,position_:"tr",slideDirection_:"right",title_:null,vdom:{cn:[{cls:"neo-toast-inner",cn:[{cls:["neo-toast-icon"],removeDom:!0},{cls:"neo-toast-text",cn:[{cls:["neo-toast-title"],removeDom:!0},{cls:"neo-toast-msg"}]},{cls:["neo-toast-close","fa","fa-close"],removeDom:!0}]}]}};removeDelay=3e3;running=!1;construct(e){super.construct(e);let t=this;t.addDomListeners([{click:{fn:t.destroy,delegate:".neo-toast-close",scope:t}}]),o.register(t)}afterSetClosable(e,t){this.getVdomInner().cn[2].removeDom=!e}afterSetIconCls(e,o){let s=this.getVdomInner().cn[0],{cls:n}=s;s.removeDom=Neo.isEmpty(e),t[e?"add":"remove"](n,e)}afterSetMsg(e,t){this.getTextRootVdom().cn[1].html=e}afterSetPosition(e,t){e&&this.addCls(`neo-toast-${e}`)}afterSetSlideDirection(e,t){e&&this.addCls(`neo-toast-slide-${e}-in`)}afterSetMounted(e,t){super.afterSetMounted(e,t);let o=this;!o.closable&&e&&o.timeout(o.removeDelay).then(()=>{o.destroy(!0)})}afterSetTitle(e,o){let s=this.getTextRootVdom().cn[0];s.removeDom=Neo.isEmpty(e),s.html=e,t[e?"add":"remove"](s.cls,"neo-toast-has-title")}beforeSetPosition(e,t){return this.beforeSetEnumValue(e,t,"position")}beforeSetSlideDirection(e,t){return this.beforeSetEnumValue(e,t,"slideDirection")}async destroy(...e){let t=this;const s=super.destroy.bind(t);t.addDomListeners({animationend:function(){o.removeToast(t.id),o.unregister(t),s(...e)}}),t.addCls("neo-toast-fade-out")}getTextRootVdom(){return this.getVdomInner().cn[1]}getVdomInner(){return this.vdom.cn[0]}});