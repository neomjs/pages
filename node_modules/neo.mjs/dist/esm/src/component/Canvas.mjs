import e from"./Base.mjs";export default Neo.setupClass(class extends e{static config={className:"Neo.component.Canvas",ntype:"canvas",monitorSize_:!0,offscreen:!0,offscreenRegistered_:!1,_vdom:{tag:"canvas"}};async afterSetMounted(e,s){super.afterSetMounted(e,s);let o=this,n=o.getCanvasId(),{offscreen:a}=o;if(e){if(await o.timeout(30),o.monitorSize&&o.addDomListeners([{delegate:`#${o.getCanvasId()}`,resize:o.onDomResize,scope:o}]),a){const e=await Neo.main.DomAccess.getOffscreenCanvas({nodeId:n,windowId:o.windowId});if(e.offscreen)await Neo.worker.Canvas.registerCanvas({node:e.offscreen,nodeId:n,windowId:o.windowId},[e.offscreen]),o.offscreenRegistered=!0;else if(e.transferred&&Neo.config.useSharedWorkers){(await Neo.worker.Canvas.retrieveCanvas({nodeId:n,windowId:o.windowId})).hasCanvas&&(o.offscreenRegistered=!0)}}}else a&&(o.offscreenRegistered=!1)}afterSetWindowId(e,s){s&&(this.offscreenRegistered=!1)}getCanvasId(){return this.id}onDomResize(e){this.fire("resize",e)}});