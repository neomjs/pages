import e from"./Base.mjs";export default Neo.setupClass(class extends e{static config={className:"Neo.component.Canvas",ntype:"canvas",monitorSize_:!0,offscreen:!0,offscreenRegistered_:!1,_vdom:{tag:"canvas"}};async afterSetMounted(e,s){super.afterSetMounted(e,s);let o=this,a=o.getCanvasId(),{offscreen:n,windowId:t}=o;if(e){if(await o.timeout(30),o.monitorSize&&o.addDomListeners([{delegate:`#${o.getCanvasId()}`,resize:o.onDomResize,scope:o}]),n){const e=await Neo.main.DomAccess.getOffscreenCanvas({nodeId:a,windowId:t});if(e.offscreen)await Neo.worker.Canvas.registerCanvas({node:e.offscreen,nodeId:a,windowId:t},[e.offscreen]),o.offscreenRegistered=!0;else if(e.transferred&&Neo.config.useSharedWorkers){(await Neo.worker.Canvas.retrieveCanvas({nodeId:a,windowId:t})).hasCanvas&&(o.offscreenRegistered=!0)}}}else n&&(o.offscreenRegistered=!1)}afterSetWindowId(e,s){super.afterSetWindowId(e,s),s&&(this.offscreenRegistered=!1)}getCanvasId(){return this.id}onDomResize(e){this.fire("resize",e)}});