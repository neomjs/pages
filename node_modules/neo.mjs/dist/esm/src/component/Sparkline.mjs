import e from"./Canvas.mjs";export default Neo.setupClass(class extends e{static config={className:"Neo.component.Sparkline",cls:["neo-sparkline-canvas"],domListeners:[{mousemove:{fn:"onMouseMove",local:!0},mouseleave:"onMouseLeave"}],listeners:{resize:"onResize"},ntype:"sparkline",rendererClassName:"Neo.canvas.Sparkline",rendererImportPath:"src/canvas/Sparkline.mjs",usePulse_:!0,useTransition_:!0,values_:null,wrapperCls:["neo-sparkline-wrapper"],_vdom:{cn:[{tag:"canvas"}]}};afterSetUsePulse(e,r){let t=this;t.offscreenRegistered&&void 0!==e&&t.renderer?.updateConfig({canvasId:t.id,usePulse:e})}afterSetUseTransition(e,r){let t=this;t.offscreenRegistered&&void 0!==e&&t.renderer?.updateConfig({canvasId:t.id,useTransition:e})}afterSetTheme(e,r){super.afterSetTheme(e,r);let t=this;if(t.offscreenRegistered&&e){let r=e.includes("dark")?"dark":"light";t.renderer?.updateConfig({canvasId:t.id,theme:r})}}afterSetValues(e,r){let t=this;t.offscreenRegistered&&e&&t.renderer?.updateData({canvasId:t.id,values:e})}destroy(...e){let r=this;r.offscreenRegistered&&r.renderer?.unregister({canvasId:r.id}),super.destroy(...e)}async afterSetMounted(e,r){let t=this;e?await t.ready():t.offscreenRegistered&&t.renderer?.unregister({canvasId:t.id}),super.afterSetMounted(e,r)}async afterSetOffscreenRegistered(e,r){if(e){let e=this,{values:r}=e;await(e.renderer?.register({canvasId:e.id,devicePixelRatio:Neo.config.devicePixelRatio,theme:e.theme?.includes("dark")?"dark":"light",usePulse:e.usePulse,useTransition:e.useTransition,windowId:e.windowId})),r&&e.renderer?.updateData({canvasId:e.id,values:r});let t=await e.getDomRect(e.id);t&&e.renderer?.updateSize({canvasId:e.id,devicePixelRatio:Neo.config.devicePixelRatio,height:t.height,width:t.width})}}get renderer(){return this.rendererClassName?Neo.ns(this.rendererClassName):null}getVdomRoot(){return this.vdom.cn[0]}getVnodeRoot(){return this.vnode.childNodes[0]}async initAsync(){if(await super.initAsync(),this.rendererImportPath){await Neo.worker.Manager.startWorker({name:"canvas"});let e=0;for(;!Neo.ns("Neo.worker.Canvas.loadModule")&&e<40;)await this.timeout(50),e++;Neo.ns("Neo.worker.Canvas.loadModule")?await Neo.worker.Canvas.loadModule({path:this.rendererImportPath}):console.error("Neo.component.Sparkline: Canvas Worker failed to register remote methods.")}}onMouseLeave(e){this.renderer?.onMouseLeave({canvasId:this.id})}onMouseMove(e){this.renderer?.onMouseMove({canvasId:this.id,x:e.offsetX,y:e.offsetY})}onResize(e){this.renderer?.updateSize({canvasId:this.id,devicePixelRatio:Neo.config.devicePixelRatio,height:e.contentRect.height,width:e.contentRect.width})}});