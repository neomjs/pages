import e from"./Base.mjs";class s extends e{static config={className:"Neo.plugin.Responsive",ntype:"plugin-responsive",responsiveConfig:new Map,defaultResponsiveConfig:{landscape:e=>e.width>e.height,portrait:e=>e.width<e.height}};construct(e){super.construct(e);let s=this,{owner:o}=s;o.addCls("neo-responsive"),Neo.first("viewport").addDomListeners([{resize:s.onResize,scope:s}]),Neo.Responsive=Neo.Responsive||{responsiveConfig:new Map,apps:{}},s.addToResponsiveMap(s.defaultResponsiveConfig,s),s.addToResponsiveMap(o.responsiveConfig||{},o),s.handleBodyCls()}addToResponsiveMap(e,s){for(const[o,t]of Object.entries(e)){let e;e=Neo.isObject(t)?function(e){let s=!0;for(const[o,n]of Object.entries(t)){const t=o.startsWith("min"),i=o.substring(3).toLowerCase();if(s=t?e[i]>=n:e[i]<=n,!s)break}return s}:t,e=e.bind(s),Neo.Responsive.responsiveConfig.set(o,e)}}handleBodyCls(){const e=this,{appName:s}=e.owner,o=Neo.Responsive;if(!o[s]?.activeBodyUpdate){const t=Neo.first("viewport");o[s]={appId:t.id,activeBodyUpdate:!0},t.addDomListeners([{resize:e.onResizeBody,scope:e}])}}onResize(e){const s={},o=Neo.Responsive.responsiveConfig,{owner:t}=this,{responsive:n}=t;for(const[t,i]of Object.entries(n)){const n=o.get(t)?.(e.rect);if(n)for(const[e,o]of Object.entries(i))s[e]=o}Object.keys(s).length>0&&t.set(s)}onResizeBody(e){const s=e.contentRect,o=s.width>=s.height,t=o?"neo-landscape":"neo-portrait",n=o?"neo-portrait":"neo-landscape";Neo.applyDeltas(this.appName,{id:"document.body",cls:{add:[t],remove:[n]}})}}export default Neo.setupClass(s);