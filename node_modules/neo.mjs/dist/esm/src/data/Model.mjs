import e from"../core/Base.mjs";import s from"./RecordFactory.mjs";export default Neo.setupClass(class extends e{static config={className:"Neo.data.Model",ntype:"model",fields_:null,keyProperty_:"id",storeId:null,trackModifiedFields:!1};calculatedFieldsMap=new Map;fieldsMap=new Map;hasNestedFields=!1;afterSetFields(e,t){if(e){let t=this;t.updateFieldsMap(e),t.isConstructed&&s.createRecordClass(t,!0)}}getField(e){return this.fieldsMap.get(e)||null}getFieldType(e){return this.getField(e)?.type?.toLowerCase()||null}toJSON(){let e=this;return{...super.toJSON(),fields:e.serializeConfig(e.fields),keyProperty:e.keyProperty,storeId:e.storeId,trackModifiedFields:e.trackModifiedFields}}updateFieldsMap(e,s=!0,t=""){let l,d=this,{calculatedFieldsMap:a,fieldsMap:i}=d;s&&(a.clear(),i.clear(),d.hasNestedFields=!1),e.forEach(e=>{l=t+e.name,e.fields?(d.hasNestedFields=!0,d.updateFieldsMap(e.fields,!1,e.name+".")):(i.set(l,e),e.calculate&&a.set(l,e))})}});