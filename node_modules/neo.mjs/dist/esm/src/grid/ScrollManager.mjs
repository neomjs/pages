import o from"../core/Base.mjs";export default Neo.setupClass(class extends o{static delayable={onBodyScroll:{type:"throttle",timer:16},onBodyScrollEnd:{type:"buffer",timer:150},onContainerScroll:{type:"throttle",timer:16}};static config={className:"Neo.grid.ScrollManager",scrollLeft_:0,scrollTop_:0};gridBody=null;gridContainer=null;lastTouchX=0;lastTouchY=0;touchMoveOwner=null;construct(o){super.construct(o);let l=this;l.gridBody.addDomListeners({touchcancel:l.onTouchCancel,touchend:l.onTouchEnd,scope:l})}onBodyScroll({scrollTop:o,touches:l}){let e,t,c=this,r=c.gridBody;c.scrollTop=o,r.set({isScrolling:!0,scrollTop:o}),c.onBodyScrollEnd(),l&&("container"!==c.touchMoveOwner&&(c.touchMoveOwner="body"),"body"===c.touchMoveOwner&&(t=l.lastTouch.clientX-l.firstTouch.clientX,e=c.lastTouchX-t,0!==e&&Neo.main.DomAccess.scrollTo({direction:"left",id:c.gridContainer.id,value:c.scrollLeft+e,windowId:c.windowId}),c.lastTouchX=t))}onBodyScrollEnd(){this.gridBody.isScrolling=!1}onContainerScroll({scrollLeft:o,target:l,touches:e}){let t,c,r=this,n=r.gridBody;l.id.includes("grid-container")&&(n.isScrolling=!0,r.onBodyScrollEnd(),r.scrollLeft=o,n.scrollLeft=o,r.gridContainer.headerToolbar.scrollLeft=o,e&&!r.gridContainer.headerToolbar.cls.includes("neo-is-dragging")&&("body"!==r.touchMoveOwner&&(r.touchMoveOwner="container"),"container"===r.touchMoveOwner&&(c=e.lastTouch.clientY-e.firstTouch.clientY,t=r.lastTouchY-c,0!==t&&Neo.main.DomAccess.scrollTo({direction:"top",id:n.vdom.id,value:r.scrollTop+t,windowId:r.windowId}),r.lastTouchY=c)))}onTouchCancel(o){this.onTouchEnd(o)}onTouchEnd(o){let l=this;l.touchMoveOwner=null,l.lastTouchX=0,l.lastTouchY=0}toJSON(){return{...super.toJSON(),scrollLeft:this.scrollLeft,scrollTop:this.scrollTop}}});