import r from"../core/Base.mjs";export default Neo.setupClass(class extends r{static delayable={onBodyScrollEnd:{type:"buffer",timer:150},syncGridBody:{type:"throttle",timer:16}};static config={className:"Neo.grid.ScrollManager",dragScroll_:!0,mounted_:!1,scrollLeft_:0,scrollTop_:0};gridBody=null;gridContainer=null;afterSetDragScroll(r,o){let l="neo-mouse-drag-scroll";r?this.gridBody.addCls(l):o&&this.gridBody.removeCls(l),this.mounted&&this.updateDragScrollAddon(r)}afterSetMounted(r,o){r?this.dragScroll&&this.updateDragScrollAddon(!0):o&&this.updateDragScrollAddon(!1)}onBodyScroll({scrollTop:r}){let o=this;o.scrollTop=r,o.gridBody.isScrolling=!0,o.onBodyScrollEnd(),o.syncGridBody()}onBodyScrollEnd(){this.gridBody.isScrolling=!1}onContainerScroll({scrollLeft:r,target:o}){let l=this;o.id.includes("grid-container")&&(l.scrollLeft=r,l.gridBody.isScrolling=!0,l.onBodyScrollEnd(),l.syncGridBody())}syncGridBody(){let r=this,o=r.gridBody;o.skipCreateViewData=!0,o.set({scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}),o.skipCreateViewData=!1,o.createViewData(),r.gridContainer.headerToolbar.scrollLeft=r.scrollLeft}async updateDragScrollAddon(r){let o=this,l=await Neo.currentWorker.getAddon("GridDragScroll",o.windowId);r?l.register({bodyId:o.gridBody.id+"__wrapper",containerId:o.gridContainer.id,id:o.id}):l.unregister({id:o.id})}toJSON(){return{...super.toJSON(),scrollLeft:this.scrollLeft,scrollTop:this.scrollTop}}});