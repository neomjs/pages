import e from"../../toolbar/Base.mjs";export default Neo.setupClass(class extends e{static config={className:"Neo.grid.header.Toolbar",ntype:"grid-header-toolbar",baseCls:["neo-grid-header-toolbar","neo-toolbar"],dragResortable:!0,itemDefaults:{ntype:"grid-header-button"},role:"row",scrollLeft_:0,showHeaderFilters_:!1,sortable_:!0,useTriStateSorting_:!1,_vdom:{"aria-rowindex":1,cn:[{cn:[]}]}};afterSetMounted(e,t){super.afterSetMounted(e,t),e&&this.passSizeToBody()}afterSetShowHeaderFilters(e,t){if(void 0!==t){let t=this;t.items.forEach(t=>{t.setSilent({showHeaderFilter:e})}),t.updateDepth=-1,t.update()}}afterSetScrollLeft(e,t){void 0!==t&&this.sortZone&&(this.sortZone.scrollLeft=e)}afterSetSortable(e,t){if(void 0!==t){let t=this;t.items.forEach(t=>{t.setSilent({sortable:e})}),t.updateDepth=2,t.update()}}afterSetUseTriStateSorting(e,t){if(void 0!==t){let t=this;t.items.forEach(t=>{t.setSilent({useTriStateSorting:e})}),t.updateDepth=2,t.update()}}createItems(){let e=this,{mounted:t}=e;e.itemDefaults.showHeaderFilter=e.showHeaderFilters,e.items.forEach(t=>{Object.hasOwn(t,"sortable")||(t.sortable=e.sortable),Object.hasOwn(t,"useTriStateSorting")||(t.useTriStateSorting=e.useTriStateSorting)}),super.createItems();let o,{items:r}=e;r.forEach((e,t)=>{e.vdom["aria-colindex"]=t+1,o=e.wrapperStyle,e.maxWidth&&(o.maxWidth=e.maxWidth+"px"),e.minWidth&&(o.minWidth=e.minWidth+"px"),e.width&&(o.width=e.width+"px"),e.wrapperStyle=o}),e.promiseUpdate().then(()=>{t&&e.passSizeToBody()})}createSortZone(e){let t=this;Neo.merge(e,{boundaryContainerId:[t.id,t.parent.id],scrollLeft:t.scrollLeft}),super.createSortZone(e)}getColumn(e){for(const t of this.items)if(t.dataField===e)return t;return null}loadSortZoneModule(){return import("../../draggable/grid/header/toolbar/SortZone.mjs")}async passSizeToBody(e=!1){let t=this,{items:o}=t,{body:r}=t.parent,i=await t.getDomRect(o.map(e=>e.id)),a=i[i.length-1],s=i.map((e,t)=>({dataField:o[t].dataField,width:e.width,x:e.x-i[0].x})),d=1,l=s.length,n=!0;for(;d<l;d++)if(0===s[d].x){n=!1;break}n?(r.columnPositions.clear(),r.columnPositions.add(s),r[e?"setSilent":"set"]({availableWidth:a.x+a.width-i[0].x}),!e&&r.updateMountedAndVisibleColumns()):(await t.timeout(100),await t.passSizeToBody(e))}async scrollToIndex(e){await Neo.main.DomAccess.scrollIntoView({delay:125,id:this.items[e].id,windowId:this.windowId})}toJSON(){let e=this;return{...super.toJSON(),scrollLeft:e.scrollLeft,showHeaderFilters:e.showHeaderFilters,sortable:e.sortable,useTriStateSorting:e.useTriStateSorting}}});