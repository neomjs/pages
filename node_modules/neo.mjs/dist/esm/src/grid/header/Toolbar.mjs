import e from"../../toolbar/Base.mjs";export default Neo.setupClass(class extends e{static config={className:"Neo.grid.header.Toolbar",ntype:"grid-header-toolbar",baseCls:["neo-grid-header-toolbar","neo-toolbar"],draggable_:!0,itemDefaults:{ntype:"grid-header-button"},role:"row",scrollLeft_:0,showHeaderFilters_:!1,sortable:!0,_vdom:{"aria-rowindex":1,cn:[{cn:[]}]}};afterSetDraggable(e,t){let a=this;e&&!a.sortZone&&import("../../draggable/grid/header/toolbar/SortZone.mjs").then((e=>{let{appName:t,id:i,scrollLeft:o,windowId:r}=a;a.sortZone=Neo.create({module:e.default,appName:t,boundaryContainerId:[i,a.parent.id],owner:a,scrollLeft:o,windowId:r,...a.sortZoneConfig})}))}afterSetMounted(e,t){super.afterSetMounted(e,t),e&&this.passSizeToView()}afterSetShowHeaderFilters(e,t){if(void 0!==t){let t=this;t.items.forEach((t=>{t.setSilent({showHeaderFilter:e})})),t.updateDepth=-1,t.update()}}afterSetScrollLeft(e,t){void 0!==t&&this.sortZone&&(this.sortZone.scrollLeft=e)}afterSetSortable(e,t){if(void 0!==t){let t=this;t.items.forEach((t=>{t.setSilent({sortable:e})})),t.updateDepth=2,t.update()}}createItems(){let e=this,{mounted:t}=e;e.itemDefaults.showHeaderFilter=e.showHeaderFilters,e.items.forEach((t=>{Object.hasOwn(t,"sortable")||(t.sortable=e.sortable)})),super.createItems();let a,{items:i}=e;i.forEach(((e,t)=>{e.vdom["aria-colindex"]=t+1,a=e.wrapperStyle,e.maxWidth&&(a.maxWidth=e.maxWidth+"px"),e.minWidth&&(a.minWidth=e.minWidth+"px"),e.width&&(a.width=e.width+"px"),e.wrapperStyle=a})),e.promiseUpdate().then((()=>{t&&e.passSizeToView()}))}getColumn(e){for(const t of this.items)if(t.dataField===e)return t;return null}async passSizeToView(e=!1){let t=this,{items:a}=t,{view:i}=t.parent,o=await t.getDomRect(a.map((e=>e.id))),r=o[o.length-1],s=o.map(((e,t)=>({dataField:a[t].dataField,width:e.width,x:e.x-o[0].x}))),d=1,l=s.length,n=!0;for(;d<l;d++)if(0===s[d].x){n=!1;break}n?(i.columnPositions.clear(),i.columnPositions.add(s),i[e?"setSilent":"set"]({availableWidth:r.x+r.width-o[0].x}),!e&&i.updateMountedAndVisibleColumns()):(await t.timeout(100),await t.passSizeToView(e))}async scrollToIndex(e){await Neo.main.DomAccess.scrollIntoView({delay:125,id:this.items[e].id,windowId:this.windowId})}});