import e from"../../button/Base.mjs";import t from"../../util/Array.mjs";import r from"../../form/field/Text.mjs";export default Neo.setupClass(class extends e{static cellAlignValues=["left","center","right"];static config={className:"Neo.grid.header.Button",ntype:"grid-header-button",baseCls:["neo-grid-header-button","neo-button"],cellAlign_:"left",dataField:null,defaultSortDirection:"ASC",editorConfig:null,filterConfig:null,filterField:null,iconCls:"fa fa-arrow-circle-up",iconPosition:"right",isSorted_:null,role:"columnheader",showHeaderFilter_:!1,sortable_:!0};afterSetIsSorted(e,r){let l=this,{cls:i}=l,o=l.up("grid-container");switch(e){case null:t.add(i,"neo-sort-hidden");break;case"ASC":t.remove(i,"neo-sort-desc"),t.remove(i,"neo-sort-hidden"),t.add(i,"neo-sort-asc");break;case"DESC":t.remove(i,"neo-sort-asc"),t.remove(i,"neo-sort-hidden"),t.add(i,"neo-sort-desc")}l.cls=i,o&&o.store&&l.mounted&&l.fire("sort",{direction:e,property:l.dataField})}afterSetShowHeaderFilter(e,t){let l=this;e?l.filterField?delete l.filterField.vdom.removeDom:(l.filterField=Neo.create({module:r,appName:l.appName,flag:"filter-field",hideLabel:!0,parentId:l.id,style:{marginLeft:".5em",marginRight:".5em"},windowId:l.windowId,listeners:{change:l.changeFilterValue,operatorChange:l.changeFilterOperator,scope:l},...l.editorConfig}),l.vdom.cn.push(l.filterField.createVdomReference())):l.filterField&&(l.filterField.vdom.removeDom=!0),l.updateDepth=2,l.update()}afterSetSortable(e,r){let l=this,{cls:i}=l;t.toggle(i,"neo-sort-hidden",!e),l.cls=i,l.update()}beforeSetCellAlign(e,t){return this.beforeSetEnumValue(e,t,"cellAlign","cellAlignValues")}destroy(...e){this.filterField?.destroy(),super.destroy(...e)}onClick(e){let t,r=this;t="DESC"===r.defaultSortDirection?{ASC:null,DESC:"ASC",null:"DESC"}:{ASC:"DESC",DESC:null,null:"ASC"},r.isSorted=t[r.isSorted+""],super.onClick(e)}changeFilterOperator(e){let t,r,l=this,i=l.up("grid-container"),o=i?.store,a=e.value;o&&(t=o.getFilter(l.dataField),t?t.operator=a:(r=o.filters,r.push({property:l.dataField,operator:a,value:null,...l.filterConfig}),o.filters=r))}changeFilterValue(e){let t,r,l,i,o=this,a=o.up("grid-container"),d=a?.store,{value:s}=e;d&&(r=d.getFilter(o.dataField),i=d.model,t=i.getField(o.dataField),s&&"date"===t?.type.toLowerCase()&&(s=new Date(s)),r?r.value=s:(l=d.filters,l.push({property:o.dataField,operator:"like",value:s,...o.filterConfig}),d.filters=l))}removeSortingCss(){let e=this,{cls:r}=e;t.add(r,"neo-sort-hidden"),e.cls=r,e._isSorted=null}});