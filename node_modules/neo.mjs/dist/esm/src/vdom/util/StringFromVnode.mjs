import e from"../../util/String.mjs";import{voidAttributes as t,voidElements as r}from"../domConstants.mjs";const o={createCloseTag:e=>r.has(e.nodeName)?"":"</"+e.nodeName+">",createOpenTag(r){let o,s="<"+r.nodeName,{attributes:a}=r,n=r.className;return r.style&&(o=Neo.createStyles(r.style),""!==o&&(s+=` style="${o}"`)),n&&(Array.isArray(n)&&(n=n.join(" ")),""!==n&&(s+=` class="${n}"`)),r.id&&(Neo.config.useDomIds?s+=` id="${r.id}"`:s+=` data-neo-id="${r.id}"`),Object.entries(a).forEach(([r,o])=>{t.has(r)?"true"===o&&(s+=` ${r}`):"removeDom"!==r&&("value"===r&&(o=e.escapeHtml(o)),s+=` ${r}="${o?.replaceAll?.('"',"&quot;")??o}"`)}),s+">"},create(e,t,r=[]){let o=this,s=e?.id;if(s&&t?.get(s))return"";switch(e.vtype){case"root":return o.create(e.childNodes[0],t,r);case"text":return`\x3c!-- ${e.id} --\x3e${e.textContent}\x3c!-- /neo-vtext --\x3e`;case"vnode":if("fragment"===e.nodeName)return`\x3c!-- ${e.id}-start --\x3e`+o.createTagContent(e,t,r)+`\x3c!-- ${e.id}-end --\x3e`;if(e.scrollTop||e.scrollLeft){let t={id:s};e.scrollLeft&&(t.scrollLeft=e.scrollLeft),e.scrollTop&&(t.scrollTop=e.scrollTop),r.push(t)}return o.createOpenTag(e)+o.createTagContent(e,t,r)+o.createCloseTag(e);default:return""}},createTagContent(e,t,r){const o=e.innerHTML||e.textContent;if(o)return o;let s,a="",n=e.childNodes?e.childNodes.length:0,l=0;for(;l<n;l++)s=e.childNodes[l],a+=this.create(s,t,r);return a}};Neo.ns("Neo.vdom.util",!0).StringFromVnode=o;export default o;