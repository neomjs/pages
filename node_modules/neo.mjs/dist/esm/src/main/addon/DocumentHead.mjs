import e from"./Base.mjs";export default Neo.setupClass(class extends e{static config={className:"Neo.main.addon.DocumentHead",remote:{app:["getCanonical","getDescription","getLdJson","getTag","getTitle","setCanonical","setDescription","setLdJson","setTag","setTitle","update"]}};getCanonical(){let e=document.head.querySelector('link[rel="canonical"]');return e?.href||null}getDescription(){return document.querySelector('meta[name="description"]')?.content||null}getLdJson(){let e=document.head.querySelector('script[type="application/ld+json"]');if(e)try{return JSON.parse(e.textContent)}catch(e){return console.error("Error parsing ld+json content",e),null}return null}getTag(e){let t,{tag:n,...a}=e;if("meta"===n?a.name?t=`meta[name="${a.name}"]`:a.property&&(t=`meta[property="${a.property}"]`):"link"===n&&a.rel&&(t=`link[rel="${a.rel}"]`),t){const e=document.head.querySelector(t);if(e){const t={};for(const n of e.attributes)t[n.name]=n.value;return{tag:n,...t}}}return null}getTitle(){return document.title}setCanonical({url:e}){this.setTag({tag:"link",rel:"canonical",href:e})}setDescription({value:e}){this.setTag({tag:"meta",name:"description",content:e})}setLdJson({value:e}){let t=document.head.querySelector('script[type="application/ld+json"]');t||(t=document.createElement("script"),t.type="application/ld+json",document.head.appendChild(t)),t.textContent=JSON.stringify(e,null,2)}setTag({value:e={}}){let t,n,{tag:a,...r}=e;"meta"===a?r.name?t=`meta[name="${r.name}"]`:r.property&&(t=`meta[property="${r.property}"]`):"link"===a&&r.rel&&(t=`link[rel="${r.rel}"]`),n=t?document.head.querySelector(t):null,n||(n=document.createElement(a));for(const[e,t]of Object.entries(r))n.setAttribute(e,t);n.parentNode||document.head.appendChild(n)}setTitle({value:e}){document.title=e}update({canonicalUrl:e,description:t,ldJson:n,tag:a,title:r}){let l=this;e&&l.setCanonical({url:e}),t&&l.setDescription({value:t}),n&&l.setLdJson({value:n}),a&&l.setTag({value:a}),r&&l.setTitle({value:r})}});