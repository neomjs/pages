import e from"./Base.mjs";export default Neo.setupClass(class extends e{static config={className:"Neo.main.addon.DocumentHead",remote:{app:["getCanonical","getDescription","getLdJson","getTag","getTitle","setCanonical","setDescription","setLdJson","setTag","setTitle","update"]}};getCanonical(e){let t=document.head.querySelector('link[rel="canonical"]');return t?.href||null}getDescription(e){return document.querySelector('meta[name="description"]')?.content||null}getLdJson({name:e}={}){let t=e?`script[type="application/ld+json"][data-schema-name="${e}"]`:'script[type="application/ld+json"]',n=document.head.querySelector(t);if(n)try{return JSON.parse(n.textContent)}catch(e){return console.error("Error parsing ld+json content",e),null}return null}getTag(e){let t,{tag:n,...a}=e;if("meta"===n?a.name?t=`meta[name="${a.name}"]`:a.property&&(t=`meta[property="${a.property}"]`):"link"===n&&a.rel&&(t=`link[rel="${a.rel}"]`),t){const e=document.head.querySelector(t);if(e){const t={};for(const n of e.attributes)t[n.name]=n.value;return{tag:n,...t}}}return null}getTitle(e){return document.title}setCanonical({url:e}){this.setTag({tag:"link",rel:"canonical",href:e})}setDescription({value:e}){this.setTag({tag:"meta",name:"description",content:e})}setLdJson({name:e,value:t}){let n=e?`script[type="application/ld+json"][data-schema-name="${e}"]`:'script[type="application/ld+json"]',a=document.head.querySelector(n);a||(a=document.createElement("script"),a.type="application/ld+json",e&&(a.dataset.schemaName=e),document.head.appendChild(a)),a.textContent=JSON.stringify(t,null,2)}setTag({value:e={}}){let t,n,{tag:a,...l}=e;"meta"===a?l.name?t=`meta[name="${l.name}"]`:l.property&&(t=`meta[property="${l.property}"]`):"link"===a&&l.rel&&(t=`link[rel="${l.rel}"]`),n=t?document.head.querySelector(t):null,n||(n=document.createElement(a));for(const[e,t]of Object.entries(l))n.setAttribute(e,t);n.parentNode||document.head.appendChild(n)}setTitle({value:e}){document.title=e}update({canonicalUrl:e,description:t,ldJson:n,tag:a,title:l}){let r=this;e&&r.setCanonical({url:e}),t&&r.setDescription({value:t}),n&&r.setLdJson({value:n}),a&&r.setTag({value:a}),l&&r.setTitle({value:l})}});