import e from"./Base.mjs";import t from"../util/ClassSystem.mjs";class n extends e{static observable=!0;static config={className:"Neo.controller.Application",ntype:"application",appThemeFolder:null,mainView_:null,mounted:!1,name:"MyApp",parentId:"document.body",vnodeInitialising:!1,vnodeInitialized:!1,windowId:null};construct(e){let t=e.mainView;delete e.mainView,super.construct(e);let n=this;n.windowId=Neo.config.windowId,Neo.apps=Neo.apps||{},Neo.apps[n.name]=n,Neo.currentWorker.registerApp(n.name),t&&(n.mainView=t)}async afterSetMainView(e,t){if(e){let t=this,{config:n}=Neo;await t.timeout(n.hash?200:10),n.useSSR&&n.vnode?(e.onInitVnode(n.vnode,!0),delete n.vnode,e.updateDepth=-1,e.update()):await e.initVnode(!0)}}beforeSetMainView(e,n){if(e){let{config:n}=Neo,o={appName:this.name,parentId:this.parentId,windowId:n.windowId};return n.useSSR&&n.vnode&&(o.autoInitVnode=!1,o.autoMount=!1),t.beforeSetInstance(e,null,o)}return null}destroy(...e){Neo.currentWorker.removeAppFromThemeMap(this.name),super.destroy(...e)}}n=Neo.setupClass(n),Neo.app=e=>Neo.create({module:n,...e});export default n;