import e from"../Neo.mjs";import s from"./Base.mjs";import*as t from"../core/_export.mjs";export default e.setupClass(class extends s{static config={className:"Neo.worker.Task",singleton:!0,workerId:"task"};afterConnect(){let e=this,s=new MessageChannel,{port1:t,port2:o}=s;t.onmessage=e.onMessage.bind(e),e.sendMessage("app",{action:"registerPort",transfer:o},[o]),e.channelPorts.app=t}onRegisterNeoConfig(s){super.onRegisterNeoConfig(s);let t=e.config.appPath;t.endsWith(".mjs")&&(t=t.slice(0,-8)),import(`../../${t}/task.mjs`).then((e=>{e.onStart()}))}});