import e from"./CellModel.mjs";import l from"../../util/Array.mjs";export default Neo.setupClass(class extends e{static config={className:"Neo.selection.table.CellRowModel",ntype:"selection-table-cellrowmodel",cls:"neo-selection-cellrowmodel",selectedRowIds:[]};deselectAllRows(e){let l=this,t=[...l.selectedRowIds],{view:s}=l;t.forEach((e=>{l.deselectRow(e,!0)})),!e&&s.update()}deselectRow(e,t){let s,o=this,{view:d}=o,c=d.getVdomChild(e);c&&(s=c.cls||[],l.remove(s,o.selectedCls),c.cls=s),l.remove(o.selectedRowIds,e),!t&&d.update()}onCellClick(e){let l=this,t=l.view.getRecord(e.data.currentTarget),s=l.view.getRowId(t);s&&(l.deselectAllRows(!0),l.selectRow(s)),super.onCellClick(e)}onNavKeyRow(e){super.onNavKeyRow(e);let l,t=this,{view:s}=t,{store:o}=s,d=o.getCount(),c=t.selectedRowIds[0]||s.getRowId(o.getAt(0)),w=s.getRecord(c),i=(o.indexOf(w)+e)%d;for(;i<0;)i+=d;l=s.getRowId(o.getAt(i)),l&&(t.deselectAllRows(!0),t.selectRow(l))}selectRow(e,t){let s,o=this,{view:d}=o,c=e&&d.getVdomChild(e);c&&(s=c.cls||[],l.add(s,o.selectedCls),c.cls=s,o.selectedRowIds.push(e)),!t&&d.update()}unregister(){this.deselectAllRows(),super.unregister()}});