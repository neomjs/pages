import e from"./CellModel.mjs";import t from"../../util/Array.mjs";export default Neo.setupClass(class extends e{static config={className:"Neo.selection.table.CellRowModel",ntype:"selection-table-cellrowmodel",cls:"neo-selection-cellrowmodel",selectedRowIds:[]};deselectAllRows(e){let t=this,l=[...t.selectedRowIds],{view:s}=t;l.forEach(e=>{t.deselectRow(e,!0)}),!e&&s.update()}deselectRow(e,l){let s,o=this,{view:d}=o,c=d.getVdomChild(e);c&&(s=c.cls||[],t.remove(s,o.selectedCls),c.cls=s),t.remove(o.selectedRowIds,e),!l&&d.update()}onCellClick(e){let t=this,l=t.view.getRecord(e.data.currentTarget),s=t.view.getRowId(l);s&&(t.deselectAllRows(!0),t.selectRow(s)),super.onCellClick(e)}onNavKeyRow(e){super.onNavKeyRow(e);let t,l=this,{view:s}=l,{store:o}=s,d=o.getCount(),c=l.selectedRowIds[0]||s.getRowId(o.getAt(0)),w=s.getRecord(c),r=(o.indexOf(w)+e)%d;for(;r<0;)r+=d;t=s.getRowId(o.getAt(r)),t&&(l.deselectAllRows(!0),l.selectRow(t))}selectRow(e,l){let s,o=this,{view:d}=o,c=e&&d.getVdomChild(e);c&&(s=c.cls||[],t.add(s,o.selectedCls),c.cls=s,o.selectedRowIds.push(e)),!l&&d.update()}toJSON(){return{...super.toJSON(),selectedRowIds:this.selectedRowIds}}unregister(){this.deselectAllRows(),super.unregister()}});