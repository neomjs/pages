import e from"./BaseModel.mjs";export default Neo.setupClass(class extends e{static config={className:"Neo.selection.table.CellModel",ntype:"selection-table-cellmodel",cls:"neo-selection-cellmodel"};addDomListener(){let e=this;e.view.parent.on("cellClick",e.onCellClick,e)}destroy(...e){let t=this;t.view.parent.un("cellClick",t.onCellClick,t),super.destroy(...e)}onCellClick(e){this.toggleSelection(e.data.currentTarget)}onKeyDownDown(e){this.onNavKeyRow(1)}onKeyDownLeft(e){this.onNavKeyColumn(-1)}onKeyDownRight(e){this.onNavKeyColumn(1)}onKeyDownUp(e){this.onNavKeyRow(-1)}onNavKeyColumn(e){let t,o,n,s=this,{dataFields:l,view:i}=s,{store:c}=i;for(s.hasSelection()?(t=i.getDataField(s.items[0]),n=i.getRecord(s.items[0])):(t=l[0],n=c.getAt(0)),o=(l.indexOf(t)+e)%l.length;o<0;)o+=l.length;s.select(i.getCellId(n,l[o]))}onNavKeyRow(e){let t,o,n=this,{view:s}=n,{store:l}=s,i=0;for(n.hasSelection()?(i=l.indexOf(s.getRecord(n.items[0])),t=s.getDataField(n.items[0])):t=n.dataFields[0],o=(i+e)%l.getCount();o<0;)o+=l.getCount();n.select(s.getCellId(l.getAt(o),t))}register(e){super.register(e);let{id:t,view:o}=this,n=t;o.keys?._keys.push({fn:"onKeyDownDown",key:"Down",scope:n},{fn:"onKeyDownLeft",key:"Left",scope:n},{fn:"onKeyDownRight",key:"Right",scope:n},{fn:"onKeyDownUp",key:"Up",scope:n})}unregister(){let{id:e,view:t}=this,o=e;t.keys?.removeKeys([{fn:"onKeyDownDown",key:"Down",scope:o},{fn:"onKeyDownLeft",key:"Left",scope:o},{fn:"onKeyDownRight",key:"Right",scope:o},{fn:"onKeyDownUp",key:"Up",scope:o}]),super.unregister()}});