import e from"../Model.mjs";import t from"../../util/Array.mjs";export default Neo.setupClass(class extends e{static config={className:"Neo.selection.grid.BaseModel",selectedColumns:[],selectedRows:[]};get dataFields(){return this.view.parent.columns.items.map(e=>e.dataField)}deselectAllRows(e=!1){let t=this,s=[...t.selectedRows],{view:l}=t;s.length?(s.forEach(e=>{t.deselectRow(e,!0)}),!e&&s.length>0&&l.update(),t.fire("selectionChange",{records:t.selectedRows.map(e=>l.store.get(e)),selection:t.selectedRows})):e||t.fire("noChange")}deselectRow(e,s=!1){let l=this,{view:o}=l,{store:i}=o,r=i.get(e),d=o.getRowId(i.indexOf(r)),c=o.getVdomChild(d);c&&(c.cls=t.remove(c.cls||[],l.selectedCls),delete c["aria-selected"]),l.selectedRows=[e],!s&&o.update()}getRecord(e){let t,s;for(t of e)if(t.aria.rowindex)return s=parseInt(t.aria.rowindex),s-=2,this.view.store.getAt(s);return null}hasAnnotations(e){return!!Object.getOwnPropertyDescriptor(e.__proto__,this.view.selectedRecordField)}hasEditorFocus({path:e}){for(const t of e)if(t.cls?.includes("neo-grid-editor"))return!0;return!1}isSelectedColumn(e){return this.selectedColumns.includes(e)}isSelectedRow(e){return this.selectedRows.includes(e)}selectRow(e,s=!1){let l=this,{view:o}=l,{store:i}=o,r=i.get(e),d=o.getRowId(i.indexOf(r)),c=o.getVdomChild(d);l.singleSelect&&l.deselectAllRows(!0),c&&(c.cls=t.add(c.cls||[],l.selectedCls),c["aria-selected"]=!0),l.selectedRows=[e],!s&&o.update()}toggleRowSelection(e,t=!1){this[this.isSelectedRow(e)?"deselectRow":"selectRow"](e,t)}unregister(){let e=this,t=e.selectedRows.length;e.selectedRows=[],t>0&&e.view.createViewData(),super.unregister()}});