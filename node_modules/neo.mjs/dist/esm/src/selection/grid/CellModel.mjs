import e from"./BaseModel.mjs";export default Neo.setupClass(class extends e{static config={className:"Neo.selection.grid.CellModel",ntype:"selection-grid-cellmodel",cls:"neo-selection-cellmodel"};addDomListener(){let e=this;e.view.parent.on("cellClick",e.onCellClick,e)}destroy(...e){let o=this;o.view.parent.un("cellClick",o.onCellClick,o),super.destroy(...e)}getRecord(e){let{view:o}=this,{store:t}=o,s=o.getDataField(e),n=e.substring(0,e.length-s.length-2);return t.get(n)}onCellClick(e){let o=this,{view:t}=o,{dataField:s,record:n}=e;n&&s&&o.toggleSelection(t.getLogicalCellId(n,s))}onKeyDownDown(e){!this.hasEditorFocus(e)&&this.onNavKeyRow(1)}onKeyDownLeft(e){!this.hasEditorFocus(e)&&this.onNavKeyColumn(-1)}onKeyDownRight(e){!this.hasEditorFocus(e)&&this.onNavKeyColumn(1)}onKeyDownUp(e){!this.hasEditorFocus(e)&&this.onNavKeyRow(-1)}onNavKeyColumn(e){let o,t,s,n,i=this,{dataFields:l,view:c}=i,{store:r}=c;if(i.hasSelection()?(o=c.getDataField(i.items[0]),n=i.getRecord(i.items[0])):(o=l[0],n=r.getAt(0)),n){for(t=l.indexOf(o),s=(t+e)%l.length;s<0;)s+=l.length;i.select(c.getLogicalCellId(n,l[s])),c.parent.scrollByColumns(t,e)}}onNavKeyRow(e){let o,t,s=this,{view:n}=s,{store:i}=n,l=i.getCount(),c=0;if(s.hasSelection()?(c=i.indexOf(s.getRecord(s.items[0])),o=n.getDataField(s.items[0])):o=s.dataFields[0],!(l<1)){for(t=(c+e)%l;t<0;)t+=l;s.select(n.getLogicalCellId(i.getAt(t),o)),n.scrollByRows(c,e)}}register(e){super.register(e);let{id:o,view:t}=this,s=o;t.keys?._keys.push({fn:"onKeyDownDown",key:"Down",scope:s},{fn:"onKeyDownLeft",key:"Left",scope:s},{fn:"onKeyDownRight",key:"Right",scope:s},{fn:"onKeyDownUp",key:"Up",scope:s})}unregister(){let{id:e,view:o}=this,t=e;o.keys?.removeKeys([{fn:"onKeyDownDown",key:"Down",scope:t},{fn:"onKeyDownLeft",key:"Left",scope:t},{fn:"onKeyDownRight",key:"Right",scope:t},{fn:"onKeyDownUp",key:"Up",scope:t}]),super.unregister()}});