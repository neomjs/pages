import e from"../../core/Base.mjs";import o from"../../manager/Component.mjs";export default Neo.setupClass(class extends e{static config={className:"Neo.util.vdom.TreeBuilder",singleton:!0};#e(e,t,n,r){if("object"!=typeof e||null===e)return e;"cn"!==r||e.id||(e.id=Neo.getId("text"===e.vtype?"vtext":"vnode"));let d={...e};return e[r]&&(d[r]=[],e[r].forEach(e=>{let s,i=e;if(i.componentId){const e=o.get(i.componentId);if(-1!==t&&e?.vnode){const e=n?.has(i.componentId);if(1===t&&!e||n&&!e)return void d[r].push({...i,neoIgnore:!0})}if(t>1||-1===t||n?.has(i.componentId)||!e?.vnode){const o="cn"===r?e?.vdom:e?.vnode;o&&(i=o)}}s=e.componentId?-1===t?-1:Math.max(0,t-1):t,d[r].push(this.#e(i,s,n,r))})),d}getVdomTree(e,o=-1,t=null){return this.#e(e,o,t,"cn")}getVnodeTree(e,o=-1,t=null){return this.#e(e,o,t,"childNodes")}});