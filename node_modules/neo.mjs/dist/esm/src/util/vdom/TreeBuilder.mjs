import e from"../../core/Base.mjs";import o from"../../manager/Component.mjs";export default Neo.setupClass(class extends e{static config={className:"Neo.util.vdom.TreeBuilder",singleton:!0};getVdomTree(e,n=-1,t=null){if(!Neo.isObject(e))return e;let d={...e};return e.cn&&(d.cn=[],e.cn.forEach(e=>{let c,m=e;if(m.componentId){if(1===n&&!t?.has(m.componentId))return void d.cn.push({componentId:"neo-ignore",id:e.id||e.componentId});if(n>1||-1===n||t?.has(m.componentId)){const e=o.get(m.componentId);e?.vdom&&(m=e.vdom)}}c=e.componentId?-1===n?-1:Math.max(0,n-1):n,d.cn.push(this.getVdomTree(m,c,t))})),d}getVnodeTree(e,n=-1,t=null){let d={...e};return e.childNodes&&(d.childNodes=[],e.childNodes.forEach(e=>{let c,m,s=e;if(s.componentId){if(1===n&&!t?.has(s.componentId))return void d.childNodes.push({componentId:"neo-ignore",id:e.id||e.componentId});(n>1||-1===n||t?.has(s.componentId))&&(m=o.get(s.componentId),m?.vnode&&(s=m.vnode))}c=e.componentId?-1===n?-1:Math.max(0,n-1):n,d.childNodes.push(this.getVnodeTree(s,c,t))})),d}});