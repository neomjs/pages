import e from"../../core/Base.mjs";import t from"../../manager/Component.mjs";export default Neo.setupClass(class extends e{static config={className:"Neo.util.vdom.TreeBuilder",singleton:!0};#e(e,o,n,d){if("object"!=typeof e||null===e)return e;"cn"!==d||e.id||(e.id=Neo.getId("text"===e.vtype?"vtext":"vnode"));let r={...e};if(e[d]){r[d]=[];for(let i=0,s=e[d].length;i<s;i++){let s,l=e[d][i],c=l;if(c.componentId){const e=t.get(c.componentId);if(-1!==o&&e?.vnode){const e=n?.has(c.componentId);if(1===o&&!e||n&&!e){r[d].push({...c,neoIgnore:!0});continue}}if(o>1||-1===o||n?.has(c.componentId)||!e?.vnode){const t="cn"===d?e?.vdom:e?.vnode;t&&(c=t)}}s=l.componentId?-1===o?-1:Math.max(0,o-1):o,r[d].push(this.#e(c,s,n,d))}}return r}getVdomTree(e,t=-1,o=null){return this.#e(e,t,o,"cn")}getVnodeTree(e,t=-1,o=null){return this.#e(e,t,o,"childNodes")}});