const e=Symbol("originalMethod"),t=Symbol("sequencedFns");export function bindAppend(e,t){const n=[].slice.call(arguments).slice(2);return function(){return e.apply(t,[].slice.call(arguments).concat(n))}}export function buffer(e,t,n=300){let o;const l=function(...r){clearTimeout(o),l.isPending=!0,o=setTimeout(()=>{o=0,l.isPending=!1,e.apply(t,r)},n)};return l.cancel=()=>{l.isPending=!1,clearTimeout(o)},l}export function createInterceptor(e,t,n,o){let l=e[t];return e[t]=function(t){return l.call(e,n.call(o||e,t))}}export function createSequence(n,o,l,r){let i,c=n[o];if(c&&c[t])i=c,i[t].push({fn:l,scope:r});else{let n=c||Neo.emptyFn;i=function(){n.apply(this,arguments),i[t].forEach(e=>{e.fn.apply(e.scope||this,arguments)})},i[t]=[{fn:l,scope:r}],i[e]=n}return n[o]=i}export function debounce(e,t,n=300){let o;return function(...l){Neo.isNumber(o)?(clearTimeout(o),o=setTimeout(()=>{t?.id&&e.apply(t,l),o=setTimeout(()=>{o=null},n)},n)):(t?.id&&e.apply(t,l),o=setTimeout(()=>{o=null},n))}}export function intercept(e,t,n,o,l=null){let r=e[t];return e[t]=function(){return!1===n.apply(o||e,arguments)?l:r.apply(e,arguments)}}export function resolveCallback(e,t=this){if(Neo.isString(e)){if(!t[e]&&e.startsWith("up."))for(e=e.slice(3);!t[e]&&(t=t.parent););else t=t.getController?.()?.getHandlerScope(e,null)||t;e=t[e]}return{fn:e,scope:t}}export function throttle(e,t,n=300){let o,l,r=0;return function(...i){const c=Date.now();o=i,c-r>=n?(l&&(clearTimeout(l),l=null),t?.id&&e.apply(t,o),r=c):l||(l=setTimeout(()=>{l=null,r=Date.now(),t?.id&&e.apply(t,o)},n-(c-r)))}}export function unSequence(n,o,l,r){let i=n[o];if(!i||!i[t])return;const c=i[t];i[t]=c.filter(e=>!(e.fn===l&&e.scope===r)),0===i[t].length&&(n[o]=i[e])}