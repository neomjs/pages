const e=Symbol("originalMethod"),t=Symbol("sequencedFns");export function bindAppend(e,t){const n=[].slice.call(arguments).slice(2);return function(){return e.apply(t,[].slice.call(arguments).concat(n))}}export function buffer(e,t,n=300){let o;const l=function(...i){clearTimeout(o),l.isPending=!0,o=setTimeout(()=>{o=0,l.isPending=!1,e.apply(t,i)},n)};return l.cancel=()=>{l.isPending=!1,clearTimeout(o)},l}export function createInterceptor(e,t,n,o){let l=e[t];return e[t]=function(t){return l.call(e,n.call(o||e,t))}}export function createSequence(n,o,l,i){let r,c=n[o];if(c&&c[t])r=c,r[t].push({fn:l,scope:i});else{let n=c||Neo.emptyFn;r=function(){n.apply(this,arguments),r[t].forEach(e=>{e.fn.apply(e.scope||this,arguments)})},r[t]=[{fn:l,scope:i}],r[e]=n}return n[o]=r}export function debounce(e,t,n=300){let o;return function(...l){Neo.isNumber(o)?(clearTimeout(o),o=setTimeout(()=>{t?.id&&e.apply(t,l),o=setTimeout(()=>{o=null},n)},n)):(t?.id&&e.apply(t,l),o=setTimeout(()=>{o=null},n))}}export function intercept(e,t,n,o,l=null){let i=e[t];return e[t]=function(){return!1===n.apply(o||e,arguments)?l:i.apply(e,arguments)}}export function resolveCallback(e,t=this){if(Neo.isString(e)){if(!t[e]&&e.startsWith("up."))for(e=e.slice(3);!t[e]&&(t=t.parent););else t=t.getController?.()?.getHandlerScope(e,null)||t;e=t[e]}return{fn:e,scope:t}}export function throttle(e,t,n=300){let o,l;return function(...i){o?(clearTimeout(l),l=setTimeout(function(){Date.now()-o>=n&&(t?.id&&e.apply(t,i),o=Date.now())},n-(Date.now()-o))):(t?.id&&e.apply(t,i),o=Date.now())}}export function unSequence(n,o,l,i){let r=n[o];if(!r||!r[t])return;const c=r[t];r[t]=c.filter(e=>!(e.fn===l&&e.scope===i)),0===r[t].length&&(n[o]=r[e])}