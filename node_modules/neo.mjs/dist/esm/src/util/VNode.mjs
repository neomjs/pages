import e from"../core/Base.mjs";import t from"../manager/Component.mjs";class r extends e{static config={className:"Neo.util.VNode"};static find(e,t,o,n){e=r.getVnode(e),o=o||0,t="string"!=typeof t?t:{id:t};let i,d,s,c=!0,a=[],l=!0,h=0,f=e.childNodes?.length||0;if(i=Object.entries(t),d=i.length,i.forEach(([t,r])=>{if(e.hasOwnProperty(t))switch(t){case"attributes":Neo.isObject(r)&&Neo.isObject(e[t])&&(Object.entries(r).forEach(([r,o])=>{e[t].hasOwnProperty(r)&&e[t][r]===o||(c=!1)}),c&&a.push(!0));break;case"className":if("string"==typeof r&&Neo.isArray(e[t]))e[t].includes(r)&&a.push(!0);else if("string"==typeof r&&"string"==typeof e[t])e[t]===r&&a.push(!0);else if(Neo.isArray(r)&&Neo.isArray(e[t]))throw new Error("find: cls matching not supported for target & source types of Arrays");break;case"style":Neo.isObject(r)&&Neo.isObject(e[t])&&(Object.entries(r).forEach(([r,o])=>{e[t].hasOwnProperty(r)&&e[t][r]===o||(l=!1)}),l&&a.push(!0));break;default:e[t]===r&&a.push(!0)}}),a.length===d)return{index:o,parentNode:n,vnode:e};for(;h<f;h++)if(s=r.find(e.childNodes[h],t,h,e),s)return s;return null}static getById(e,t){let o,n=(e=r.getVnode(e)).childNodes||[],i=0,d=n.length;if(e.id===t)return e;for(;i<d;i++){if(o=r.getVnode(n[i]),o.id===t)return o;if(o=r.getById(o,t),o)return o}return null}static getChildIds(e,t=[]){return e?.childNodes?.forEach(e=>{e.id&&!e.componentId&&t.push(e.id),r.getChildIds(e,t)}),t}static getVnode(e){if(e.componentId){const r=t.get(e.componentId);if(!r)throw new Error(`util.VNode.getVnode: Component not found for id: ${e.componentId}`);e=r.vnode}return e}static removeChildVnode(e,t){let o,n=(e=r.getVnode(e)).childNodes||[],i=0,d=n.length;if(e.id===t)throw new Error("removeChildVnode: target id matches the root vnode id: "+t);for(;i<d;i++){if(o=r.getVnode(n[i]),o.id===t)return n.splice(i,1),!0;if(r.removeChildVnode(o,t))return!0}return!1}static replaceChildVnode(e,t,o){let n,i=(e=r.getVnode(e)).childNodes||[],d=0,s=i.length;if(e.id===t)throw new Error("replaceChildVnode: target id matches the root vnode id: "+t);for(;d<s;d++){if(n=r.getVnode(i[d]),n.id===t)return i[d]=o,!0;if(r.replaceChildVnode(n,t,o))return!0}return!1}}export default Neo.setupClass(r);