import t from"../../../../src/component/Base.mjs";import e from"../../../../src/util/Array.mjs";import a from"../../../../src/util/VDom.mjs";export default Neo.setupClass(class extends t{static config={className:"RealWorld2.view.article.PreviewComponent",author_:null,baseCls:["rw2-preview-component"],createdAt_:null,description_:null,favorited_:!1,favoritesCount_:null,slug_:null,tagList_:null,title_:null,userImage_:null,_vdom:{cn:[{cls:["article-meta"],cn:[{tag:"a",flag:"userImageLink",cn:[{tag:"img"}]},{cls:["info"],cn:[{tag:"a",cls:["author"],flag:"author"},{tag:"span",cls:["date"],flag:"createdAt"}]},{tag:"button",cls:["btn","btn-sm","pull-xs-right"],cn:[{tag:"i",cls:["fa fa-heart"]},{vtype:"text",flag:"favoritesCount"}]}]},{tag:"a",cls:["preview-link"],flag:"preview-link",cn:[{tag:"h1",flag:"title"},{tag:"p",flag:"description"},{tag:"span",text:"Read more..."}]}]}};construct(t){super.construct(t);let e=this;e.addDomListeners({click:{fn:e.onFavoriteButtonClick,delegate:".pull-xs-right",scope:e}})}afterSetAuthor(t,e){a.getByFlag(this.vdom,"author").text=t,this.update()}afterSetCreatedAt(t,e){a.getByFlag(this.vdom,"createdAt").text=new Intl.DateTimeFormat("en-US",{day:"numeric",month:"long",year:"numeric"}).format(new Date(t)),this.update()}afterSetDescription(t,e){a.getByFlag(this.vdom,"description").text=t,this.update()}afterSetFavorited(t,a){let r=this,l=r.vdom.cn[0].cn[2];e.add(l.cls,t?"btn-primary":"btn-outline-primary"),e.remove(l.cls,t?"btn-outline-primary":"btn-primary"),r.update(),Neo.isBoolean(a)&&r.getController().favoriteArticle(r.slug,t)}afterSetFavoritesCount(t,e){a.getByFlag(this.vdom,"favoritesCount").text=" "+t,this.update()}afterSetSlug(t,e){}afterSetTagList(t,e){let a,r=this,l=r.vdom;l.cn[1].cn[3]&&l.cn[1].cn.pop(),Array.isArray(t)&&t.length>0&&(a={tag:"ul",cls:["tag-list"],cn:[]},t.forEach(t=>{a.cn.push({tag:"li",cls:["tag-default","tag-pill","tag-outline"],text:t})}),l.cn[1].cn.push(a),r.update())}afterSetTitle(t,e){a.getByFlag(this.vdom,"title").text=t,this.update()}afterSetUserImage(t,e){a.getByFlag(this.vdom,"userImageLink").cn[0].src=t,this.update()}onFavoriteButtonClick(t){let e=this,a=!e.favorited;e.set({favorited:a,favoritesCount:a?e.favoritesCount+1:e.favoritesCount-1})}});