import e from"../../../src/manager/Component.mjs";import a from"./shared/Canvas.mjs";export default Neo.setupClass(class extends a{static config={className:"Portal.view.HeaderCanvas",activeId_:null,cls:["portal-header-canvas"],hoverId_:null,importMethodName:"importHeaderCanvas",rendererClassName:"Portal.canvas.HeaderCanvas"};navRects=null;afterSetIsCanvasReady(e,a){super.afterSetIsCanvasReady(e,a),e&&this.activeId&&this.renderer.updateActiveId({id:this.activeId})}async afterSetOffscreenRegistered(e,a){await super.afterSetOffscreenRegistered(e,a),e&&await this.updateNavRects()}async afterSetActiveId(e,a){this.isCanvasReady&&await this.renderer.updateActiveId({id:e})}async afterSetHoverId(e,a){this.isCanvasReady&&await this.renderer.updateHoverId({id:e})}async onResize(e){await super.onResize(e),await this.updateNavRects()}async updateNavRects(){let a=this;if(!a.isCanvasReady)return;let t=Neo.get(a.parentId),s=e.down(t,"button",!1).map(e=>e.id);if(s.length>0){let e=await a.getDomRect(s),t=await a.getDomRect(a.id);a.canvasRect=t,e&&t&&(a.navRects=e.map((e,a)=>e?{id:s[a],x:e.x-t.x,y:e.y-t.y,width:e.width,height:e.height}:null).filter(Boolean),a.renderer.updateNavRects({rects:a.navRects}))}}});