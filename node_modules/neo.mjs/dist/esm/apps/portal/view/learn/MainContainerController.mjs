import e from"../../../../src/controller/Component.mjs";import t from"./CubeLayoutButton.mjs";import{getSearchParams as o}from"../../Util.mjs";export default Neo.setupClass(class extends e{static config={className:"Portal.view.learn.MainContainerController",routes:{"/learn":"onRouteDefault","/learn/{itemId}":"onRouteLearnItem"}};construct(e){super.construct(e);let{windowId:t}=this;Neo.Main.getByPath({path:"location.search",windowId:t}).then((e=>{this.setState({deck:o(e).deck||"learnneo"})}))}navigateTo(e){Neo.Main.setRoute({value:`/learn/${e}`,windowId:this.component.windowId})}async onContentEdit(e){const t=this.getStateProvider();console.log(e);const o=t.getData("editorConfig"),n=t.getData("deck");if(!o||!n)return;const a=`${o.root}/${n}/pages/${e.record.id}.md`;await fetch("http://localhost:3000/openInEditor",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:a,editor:o.editor})})}onContentRefresh(e){this.getReference("tree").doFetchContent(e.record)}onIntersect(e){let t=this.getReference("page-sections-container").list,o=parseInt(e.data.recordId);t.isAnimating||t.selectionModel.select(t.store.get(o))}onNextPageButtonClick(e){this.navigateTo(this.getStateProvider().getData("nextPageRecord").id)}onPageSectionsToggleButtonClick(e){this.getReference("page-sections-container").toggleCls("neo-expanded")}onPreviousPageButtonClick(e){this.navigateTo(this.getStateProvider().getData("previousPageRecord").id)}onRouteDefault(e){this.getStateProvider().data.currentPageRecord||this.onRouteLearnItem({itemId:"benefits.Introduction"})}onRouteLearnItem(e){let t=this.getStateProvider(),o=t.getStore("contentTree");o.getCount()>0?t.data.currentPageRecord=o.get(e.itemId):o.on({load:()=>{t.data.currentPageRecord=o.get(e.itemId)},delay:10,once:!0})}onSideNavToggleButtonClick(e){this.getReference("sidenav-container").toggleCls("neo-expanded")}});