import e from"../../store/ContentSections.mjs";import t from"../../store/Content.mjs";import n from"../../../../src/state/Provider.mjs";export default Neo.setupClass(class extends n{static config={className:"Portal.view.learn.MainContainerStateProvider",data:{contentPath:null,countPages:null,countSections:null,currentPageRecord:null,deck:null,nextPageRecord:null,previousPageRecord:null},stores:{sections:{module:e},tree:{module:t}}};onDataPropertyChange(e,t,n){super.onDataPropertyChange(e,t,n);let o=this;switch(e){case"countSections":t<1&&o.component.getReference("page-sections-container")?.toggleCls("neo-expanded",!1);break;case"currentPageRecord":{let e,n,{data:r}=o,{countPages:a}=r,s=o.getStore("tree"),c=s.indexOf(t),d=null,l=null,i=null,u=null;for(e=c-1;e>=0;e--)if(n=s.getAt(e),n.isLeaf&&!o.recordIsHidden(n,s)){i=n;break}for(o.setData({previousPageText:u,previousPageRecord:i}),e=c+1;e<a;e++)if(n=s.getAt(e),n.isLeaf&&!o.recordIsHidden(n,s)){d=n;break}o.setData({nextPageText:l,nextPageRecord:d}),o.component.getReference("sidenav-container")?.toggleCls("neo-expanded",!1);break}case"deck":if(t){const e="learnneo"===t?"learn/":`resources/data/deck/${t}/`;o.data.contentPath=Neo.config.basePath+e}}}recordIsHidden(e,t){return!!e.hidden||null!==e.parentId&&this.recordIsHidden(t.get(e.parentId),t)}});