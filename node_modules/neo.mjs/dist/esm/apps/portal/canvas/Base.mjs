import e from"../../../src/core/Base.mjs";export default Neo.setupClass(class extends e{static config={className:"Portal.canvas.Base",remote:{app:["clearGraph","initGraph","pause","resume","setTheme","updateMouseState","updateSize"]},theme_:"light"};animationId=null;canvasId=null;canvasSize=null;context=null;gradients={};isPaused=!1;mouse={x:-1e3,y:-1e3};time=0;renderLoop=this.render.bind(this);afterSetTheme(e,t){e&&this.canvasSize&&this.updateResources?.(this.canvasSize.width,this.canvasSize.height)}get canRender(){return!(!this.context||this.isPaused)}clearGraph(){let e=this;e.context=null,e.canvasId=null,e.canvasSize=null,e.animationId=null,e.isPaused=!1,e.gradients={},e.mouse={x:-1e3,y:-1e3},e.time=0}initGraph({canvasId:e,windowId:t}){let a=this,s=a.canvasId!==e;a.canvasId=e,a.waitForCanvas(e,t,s)}onMouseClick(e){}pause(){this.isPaused=!0}render(){}resume(){let e=this;e.isPaused&&(e.isPaused=!1,e.renderLoop())}setTheme(e){this.theme=e}updateMouseState(e){let t=this;e.leave?(t.mouse.x=-1e3,t.mouse.y=-1e3):(void 0!==e.x&&(t.mouse.x=e.x),void 0!==e.y&&(t.mouse.y=e.y),e.click&&t.onMouseClick(e))}updateSize(e){let t=this;t.canvasSize=e,t.context&&(t.context.canvas.width=e.width,t.context.canvas.height=e.height,t.updateResources?.(e.width,e.height))}waitForCanvas(e,t,a){let s=this,i=Neo.currentWorker.canvasWindowMap[e]?.[t];i?(s.context=i.getContext("2d"),s.updateSize({width:i.width,height:i.height}),s.onGraphMounted?.(i.width,i.height),a&&!s.animationId&&s.renderLoop()):setTimeout(s.waitForCanvas.bind(s,e,t,a),50)}});