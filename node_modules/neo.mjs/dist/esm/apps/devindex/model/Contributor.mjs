import t from"../../../src/data/Model.mjs";export default Neo.setupClass(class extends t{static config={className:"DevIndex.model.Contributor",fields:[{name:"login",mapping:"l",type:"String"},{name:"name",mapping:"n",type:"String"},{name:"avatarUrl",mapping:"i",type:"String",defaultValue:null},{name:"location",mapping:"lc",type:"String",defaultValue:null},{name:"countryCode",mapping:"cc",type:"String",defaultValue:null},{name:"company",mapping:"c",type:"String",defaultValue:null},{name:"bio",mapping:"b",type:"String",defaultValue:null},{name:"followers",mapping:"fl",type:"Integer"},{name:"totalContributions",mapping:"tc",type:"Integer"},{name:"firstYear",mapping:"fy",type:"Integer"},{name:"lastUpdated",mapping:"lu",type:"Date"},{name:"linkedinUrl",mapping:"li",type:"String",defaultValue:null},{name:"twitter",mapping:"t",type:"String",defaultValue:null},{name:"website",mapping:"w",type:"String",defaultValue:null},{name:"isHireable",mapping:"h",type:"Boolean",defaultValue:!1,convert:t=>!!t},{name:"hasSponsors",mapping:"s",type:"Integer",defaultValue:null},{name:"heuristics",mapping:"hm",type:"Object",defaultValue:null},{name:"topRepo",mapping:"tr",type:"Array",defaultValue:null},{name:"topRepoCount",type:"Integer",virtual:!0,calculate:t=>(t.topRepo??t.tr)?.[1]||0},{name:"privateContributions",mapping:"py",type:"Array",defaultValue:[]},{name:"organizations",mapping:"o",type:"Array",convert:t=>Array.isArray(t)?t.map(t=>({login:t[0],avatarUrl:t[1]})):[]},{name:"commitsArray",mapping:"cy",type:"Array"},{name:"yearsArray",mapping:"y",type:"Array"},{name:"totalCommits",type:"Integer",calculate:t=>(t.commitsArray||t.cy)?.reduce((t,e)=>t+e,0)||0},{name:"totalPrivateContributions",type:"Integer",calculate:t=>(t.privateContributions||t.py)?.reduce((t,e)=>t+e,0)||0},{name:"totalPublicContributions",type:"Integer",depends:["totalPrivateContributions"],calculate:t=>(t.totalContributions||t.tc||0)-t.totalPrivateContributions},{name:"privateContributionsRatio",type:"Float",depends:["totalPrivateContributions"],calculate:t=>{const e=t.totalContributions||t.tc||0;return 0===e?0:t.totalPrivateContributions/e*100}},{name:"commitRatio",type:"Float",depends:["totalCommits","totalPublicContributions"],calculate:t=>0===t.totalPublicContributions?0:t.totalCommits/t.totalPublicContributions*100}]};construct(t){super.construct(t),this.addYearFields()}addYearFields(){let t=(new Date).getFullYear(),e=[...this.fields];for(let a=t;a>=2010;a--)e.push({name:`y${a}`,type:"Integer",virtual:!0,calculate:t=>{const e=t.fy||t.firstYear;return e&&(t.yearsArray||t.y)?.[a-e]||0}}),e.push({name:`cy${a}`,type:"Integer",virtual:!0,calculate:t=>{const e=t.fy||t.firstYear;return e&&(t.commitsArray||t.cy)?.[a-e]||0}}),e.push({name:`py${a}`,type:"Integer",virtual:!0,calculate:t=>{const e=t.fy||t.firstYear;return e&&(t.privateContributions||t.py)?.[a-e]||0}}),e.push({name:`puy${a}`,type:"Integer",virtual:!0,calculate:t=>{const e=t.fy||t.firstYear;if(!e)return 0;const n=a-e;return((t.yearsArray||t.y)?.[n]||0)-((t.privateContributions||t.py)?.[n]||0)}});this.fields=e}});