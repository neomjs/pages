import e from"../../../../src/component/Progress.mjs";import t from"../../../../src/grid/footer/Toolbar.mjs";export default Neo.setupClass(class extends t{static config={className:"DevIndex.view.home.StatusToolbar",ntype:"devindex-status-toolbar",cls:["devindex-status-toolbar"],dataMode_:"total",layout:{ntype:"hbox",align:"center",wrap:"wrap"},items:[{ntype:"label",reference:"progress-label",text:"Streaming Users:"},{module:e,flex:"none",max:100,reference:"progress",value:0,width:100},{ntype:"button",cls:["devindex-stop-stream-button"],flex:"none",handler:"up.onStopButtonClick",height:22,iconCls:"fa fa-ban",reference:"stop-button",text:"Stop",ui:"secondary"},{ntype:"container",cls:["devindex-stats-container"],layout:{ntype:"hbox",align:"center"},items:[{ntype:"label",reference:"total-contributions-label",text:"Total Contributions: 0"},{ntype:"label",text:"â€¢"},{ntype:"label",reference:"count-rows-label",text:"Visible Rows: 0"}]}]};numberFormatter=new Intl.NumberFormat;afterSetDataMode(e,t){void 0!==t&&this.updateLabels()}onStopButtonClick(){this.store.abort()}onStoreFilter(e){this.updateLabels()}onStoreLoad(e){let t=this;t.updateLabels(),e.isLoading||t.timeout(500).then(()=>{let e=t.getReference("progress"),o=t.getReference("progress-label"),r=t.getReference("stop-button");e.hidden=!0,o.hidden=!0,r.hidden=!0})}onStoreProgress(e){this.getReference("progress")?.set({hidden:!1,max:e.total||100,value:e.total?e.loaded:null}),this.getReference("stop-button").hidden=!1}updateLabels(){let e,t,o=this,{dataMode:r,store:n}=o,{count:a,items:s}=n,i=0,l=0;switch(r){case"commits":t="Total Commits";break;case"private":t="Private Contributions";break;case"public":t="Public Contributions";break;default:t="Total Contributions"}for(;l<a;l++)e=s[l],i+="commits"===r?e.totalCommits??n.resolveField(e,"totalCommits")??0:"private"===r?e.totalPrivateContributions??n.resolveField(e,"totalPrivateContributions")??0:"public"===r?e.totalPublicContributions??n.resolveField(e,"totalPublicContributions")??0:e.tc??e.totalContributions??0;o.getReference("count-rows-label").text="Visible Rows: "+o.numberFormatter.format(a),o.getReference("total-contributions-label").text=`${t}: ${o.numberFormatter.format(i)}`}});