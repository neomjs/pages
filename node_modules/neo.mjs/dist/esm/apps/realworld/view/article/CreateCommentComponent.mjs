import t from"../../../../src/component/Base.mjs";export default Neo.setupClass(class extends t{static config={className:"RealWorld.view.article.CreateCommentComponent",baseCls:["card","comment-form"],userImage_:null,userName_:null,_vdom:{tag:"form",cn:[{cls:["card-block"],cn:[{tag:"textarea",cls:["form-control"],placeholder:"Write a comment...",rows:3}]},{cls:["card-footer"],cn:[{tag:"img",cls:["comment-author-img"],src:"https://static.productionready.io/images/smiley-cyrus.jpg"},{vtype:"text",html:"&nbsp;"},{tag:"span",cls:["comment-author"]},{tag:"button",cls:["btn","btn-sm","btn-primary"],text:"Post Comment",type:"button"}]}]}};construct(t){super.construct(t);let e=this;e.addDomListeners({click:{fn:e.onSubmitButtonClick,delegate:".btn-primary",scope:e}}),e.vdom.cn[0].cn[0].id=e.getInputElId(),e.update(),e.getController().on({afterSetCurrentUser:e.onCurrentUserChange,scope:e})}afterSetUserImage(t,e){t&&(this.vdom.cn[1].cn[0].src=t,this.update())}afterSetUserName(t,e){t&&(this.vdom.cn[1].cn[2].text=t,this.update())}getInputElId(){return this.id+"__input"}onCurrentUserChange(t){this.set({userImage:t.image,userName:t.username})}onSubmitButtonClick(t){let e=this;Neo.main.DomAccess.getAttributes({id:e.getInputElId(),attributes:"value"}).then(t=>{e.getController().postComment({data:JSON.stringify({comment:{body:t.value}})}).then(t=>{e.vdom.cn[0].cn[0].value="",e.update()})})}});