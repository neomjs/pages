import t from"../../../../src/component/Base.mjs";import e from"../../../../src/util/Array.mjs";import a from"../../../../src/util/VDom.mjs";export default Neo.setupClass(class extends t{static config={className:"RealWorld.view.article.PreviewComponent",author_:null,baseCls:["article-preview"],createdAt_:null,description_:null,favorited_:!1,favoritesCount_:null,slug_:null,tagList_:null,title_:null,userImage_:null,_vdom:{cn:[{cls:["article-meta"],cn:[{tag:"a",flag:"userImageLink",cn:[{tag:"img"}]},{cls:["info"],cn:[{tag:"a",cls:["author"],flag:"author"},{tag:"span",cls:["date"],flag:"createdAt"}]},{tag:"button",cls:["btn","btn-sm","pull-xs-right"],cn:[{tag:"i",cls:["ion-heart"]},{vtype:"text",flag:"favoritesCount"}]}]},{tag:"a",cls:["preview-link"],flag:"preview-link",cn:[{tag:"h1",flag:"title"},{tag:"p",flag:"description"},{tag:"span",html:"Read more..."}]}]}};construct(t){super.construct(t);let e=this;e.addDomListeners({click:{fn:e.onFavoriteButtonClick,delegate:".pull-xs-right",scope:e}})}afterSetAuthor(t,e){let l=this.vdom,r=a.getByFlag(l,"author"),i="#/profile/"+t;r.href=i,r.html=t,a.getByFlag(l,"userImageLink").href=i,this.update()}afterSetCreatedAt(t,e){a.getByFlag(this.vdom,"createdAt").html=new Intl.DateTimeFormat("en-US",{day:"numeric",month:"long",year:"numeric"}).format(new Date(t)),this.update()}afterSetDescription(t,e){a.getByFlag(this.vdom,"description").html=t,this.update()}afterSetFavorited(t,a){let l=this,r=l.vdom.cn[0].cn[2];e.add(r.cls,t?"btn-primary":"btn-outline-primary"),e.remove(r.cls,t?"btn-outline-primary":"btn-primary"),l.update(),Neo.isBoolean(a)&&l.getController().favoriteArticle(l.slug,t)}afterSetFavoritesCount(t,e){a.getByFlag(this.vdom,"favoritesCount").html=" "+t,this.update()}afterSetSlug(t,e){a.getByFlag(this.vdom,"preview-link").href="#/article/"+t,this.update()}afterSetTagList(t,e){let a,l=this,r=l.vdom;r.cn[1].cn[3]&&r.cn[1].cn.pop(),Array.isArray(t)&&t.length>0&&(a={tag:"ul",cls:["tag-list"],cn:[]},t.forEach((t=>{a.cn.push({tag:"li",cls:["tag-default","tag-pill","tag-outline"],html:t})})),r.cn[1].cn.push(a),l.update())}afterSetTitle(t,e){a.getByFlag(this.vdom,"title").html=t,this.update()}afterSetUserImage(t,e){a.getByFlag(this.vdom,"userImageLink").cn[0].src=t,this.update()}onFavoriteButtonClick(t){let e=this,a=!e.favorited;e.set({favorited:a,favoritesCount:a?e.favoritesCount+1:e.favoritesCount-1})}});