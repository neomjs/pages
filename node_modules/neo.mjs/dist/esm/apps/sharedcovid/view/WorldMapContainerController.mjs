import e from"../../../src/controller/Component.mjs";export default Neo.setupClass(class extends e{static config={className:"SharedCovid.view.WorldMapContainerController",heatRuleChangeDelay:150,heatRuleChangeTimeout:null};changeHeatRule(e){let a=this,{windowId:t}=a,o=a.getReference("worldmap").id;Neo.main.addon.AmCharts.setProperty({id:a.getReference("worldmap").id,path:"series.values.0.heatRules.values.0.maxValue",value:e,windowId:t}),Neo.main.addon.AmCharts.callMethod({id:o,path:"series.values.0.invalidateData",windowId:t})}onHeatRuleFieldChange(e){const a=this;clearTimeout(a.heatRuleChangeTimeout),a.heatRuleChangeTimeout=setTimeout(()=>{a.changeHeatRule(e.value)},a.heatRuleChangeDelay)}onSeriesButtonClick(e){let a=this,{windowId:t}=a,o=a.getReference("worldmap").id,s=[...a.getParent().data];Neo.main.addon.AmCharts.setProperty({id:o,isColor:!0,path:"series.values.0.heatRules.values.0.max",value:{active:"#64b5f6",cases:"#bbbbbb",deaths:"#fb6767",recovered:"#28ca68"}[e.component.series],windowId:t}),Neo.main.addon.AmCharts.setProperty({id:o,path:"series.values.0.dataFields.value",value:e.component.series,windowId:t}),Neo.main.addon.AmCharts.callMethod({id:o,path:"series.values.0.invalidateData",windowId:t}).then(()=>{a.getReference("currentMapViewLabel").text="Current view: "+Neo.capitalize(e.component.series),s.sort((a,t)=>t[e.component.series]-a[e.component.series]),a.getReference("heatRuleField").value=100*Math.ceil(s[9][e.component.series]/100)})}});