{"classData":[{"comment":"/**\n * @summary Renders the \"Neural Timeline\" visualization for the Portal's Ticket view.\n *\n * This class runs inside a SharedWorker (via `CanvasWorker`) to provide a high-performance,\n * main-thread-blocking-free animation. It visualizes the flow of time and activity connecting\n * timeline nodes (tickets/events).\n *\n * Key Visual Concepts:\n * 1. **The Spine**: A continuous, gradient-stroked line connecting all nodes.\n * 2. **The Pulse**: A \"data packet\" that travels along the spine.\n * 3. **Dual-Point Physics**: The pulse Head and Tail are simulated as independent particles moving through the\n *    speed field. This creates organic \"Squash and Stretch\" behavior: compressing when entering a node (Head slows, Tail fast)\n *    and stretching when leaving (Head fast, Tail slow), without requiring complex constraints or causing visual artifacts.\n * 4. **Chameleon Effect**: The pulse dynamically changes its color to match the semantic color of the\n *    nearest node (e.g., Red for Bugs, Green for Features) as it passes by.\n *\n * @class Portal.canvas.TicketCanvas\n * @extends Portal.canvas.Base\n * @singleton\n */","meta":{"filename":"TicketCanvas.mjs","lineno":19,"columnno":0,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/portal/canvas","code":{}},"summary":"Renders the \"Neural Timeline\" visualization for the Portal's Ticket view.\n\nThis class runs inside a SharedWorker (via `CanvasWorker`) to provide a high-performance,\nmain-thread-blocking-free animation. It visualizes the flow of time and activity connecting\ntimeline nodes (tickets/events).\n\nKey Visual Concepts:\n1. **The Spine**: A continuous, gradient-stroked line connecting all nodes.\n2. **The Pulse**: A \"data packet\" that travels along the spine.\n3. **Dual-Point Physics**: The pulse Head and Tail are simulated as independent particles moving through the\n   speed field. This creates organic \"Squash and Stretch\" behavior: compressing when entering a node (Head slows, Tail fast)\n   and stretching when leaving (Head fast, Tail slow), without requiring complex constraints or causing visual artifacts.\n4. **Chameleon Effect**: The pulse dynamically changes its color to match the semantic color of the\n   nearest node (e.g., Red for Bugs, Green for Features) as it passes by.","kind":"class","name":"TicketCanvas","augments":["Portal.canvas.Base"],"tags":[{"originalTitle":"singleton","title":"singleton","text":""}],"memberof":"Portal.canvas","longname":"Portal.canvas.TicketCanvas","scope":"static","$longname":"Portal.canvas.TicketCanvas","$kind":"class","id":8607,"neoClassName":"Portal.canvas.TicketCanvas"},{"comment":"/**\n         * @member {String} className='Portal.canvas.TicketCanvas'\n         * @protected\n         */","meta":{"filename":"TicketCanvas.mjs","lineno":54,"columnno":8,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/portal/canvas","code":{}},"kind":"member","name":"className","type":{"names":["String"]},"defaultvalue":"'Portal.canvas.TicketCanvas'","access":"protected","longname":"className","scope":"global","$longname":"className","$kind":"property","id":8608,"neoClassName":"Portal.canvas.TicketCanvas"},{"comment":"/**\n         * Remote method access\n         * @member {Object} remote\n         * @protected\n         */","meta":{"filename":"TicketCanvas.mjs","lineno":60,"columnno":8,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/portal/canvas","code":{}},"description":"<p>Remote method access</p>\n","kind":"member","name":"remote","type":{"names":["Object"]},"access":"protected","longname":"remote","scope":"global","$longname":"remote","$kind":"property","id":8609,"neoClassName":"Portal.canvas.TicketCanvas"},{"comment":"/**\n         * @member {Boolean} singleton=true\n         * @protected\n         */","meta":{"filename":"TicketCanvas.mjs","lineno":73,"columnno":8,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/portal/canvas","code":{}},"kind":"member","name":"singleton","type":{"names":["Boolean"]},"defaultvalue":true,"access":"protected","longname":"singleton","scope":"global","$longname":"singleton","$kind":"property","id":8610,"neoClassName":"Portal.canvas.TicketCanvas"},{"comment":"/**\n         * @member {String} theme='light'\n         */","meta":{"filename":"TicketCanvas.mjs","lineno":77,"columnno":8,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/portal/canvas","code":{}},"kind":"member","name":"theme","type":{"names":["String"]},"defaultvalue":"'light'","longname":"theme","scope":"global","$longname":"theme","$kind":"property","id":8611,"neoClassName":"Portal.canvas.TicketCanvas"},{"comment":"/**\n     * @member {Number} baseSpeed=0.5\n     */","meta":{"filename":"TicketCanvas.mjs","lineno":83,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/portal/canvas","code":{}},"kind":"member","name":"baseSpeed","type":{"names":["Number"]},"defaultvalue":0.5,"longname":"baseSpeed","scope":"global","$longname":"baseSpeed","$kind":"property","id":8612,"neoClassName":"Portal.canvas.TicketCanvas"},{"comment":"/**\n     * @member {Number} lastFrameTime=0\n     */","meta":{"filename":"TicketCanvas.mjs","lineno":87,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/portal/canvas","code":{}},"kind":"member","name":"lastFrameTime","type":{"names":["Number"]},"defaultvalue":0,"longname":"lastFrameTime","scope":"global","$longname":"lastFrameTime","$kind":"property","id":8613,"neoClassName":"Portal.canvas.TicketCanvas"},{"comment":"/**\n     * @member {Array} nodes=[]\n     */","meta":{"filename":"TicketCanvas.mjs","lineno":91,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/portal/canvas","code":{}},"kind":"member","name":"nodes","type":{"names":["Array"]},"defaultvalue":"[]","longname":"nodes","scope":"global","$longname":"nodes","$kind":"property","id":8614,"neoClassName":"Portal.canvas.TicketCanvas"},{"comment":"/**\n     * @member {Number} pulseY=0\n     */","meta":{"filename":"TicketCanvas.mjs","lineno":95,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/portal/canvas","code":{}},"kind":"member","name":"pulseY","type":{"names":["Number"]},"defaultvalue":0,"longname":"pulseY","scope":"global","$longname":"pulseY","$kind":"property","id":8615,"neoClassName":"Portal.canvas.TicketCanvas"},{"comment":"/**\n     * @member {Number} pulseBottom=100\n     */","meta":{"filename":"TicketCanvas.mjs","lineno":99,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/portal/canvas","code":{}},"kind":"member","name":"pulseBottom","type":{"names":["Number"]},"defaultvalue":100,"longname":"pulseBottom","scope":"global","$longname":"pulseBottom","$kind":"property","id":8616,"neoClassName":"Portal.canvas.TicketCanvas"},{"comment":"/**\n     * @member {Number} startY=0\n     */","meta":{"filename":"TicketCanvas.mjs","lineno":103,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/portal/canvas","code":{}},"kind":"member","name":"startY","type":{"names":["Number"]},"defaultvalue":0,"longname":"startY","scope":"global","$longname":"startY","$kind":"property","id":8617,"neoClassName":"Portal.canvas.TicketCanvas"},{"comment":"/**\n     * Clears the graph state and stops the render loop.\n     * This is called when the view unmounts to prevent \"Zombie Loops\".\n     */","meta":{"range":[3295,3456],"filename":"TicketCanvas.mjs","lineno":109,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/portal/canvas","code":{"id":"astnode100037039","name":"TicketCanvas#clearGraph","type":"MethodDefinition","paramnames":[]},"vars":{"":null}},"description":"<p>Clears the graph state and stops the render loop.\nThis is called when the view unmounts to prevent &quot;Zombie Loops&quot;.</p>\n","name":"clearGraph","longname":"TicketCanvas#clearGraph","kind":"function","memberof":"TicketCanvas","scope":"instance","params":[],"$longname":"TicketCanvas#clearGraph","$kind":"method","id":8618,"neoClassName":"Portal.canvas.TicketCanvas"},{"comment":"/**\n     * Calculates the horizontal (X) position on the spine for a given vertical (Y) position.\n     *\n     * Since the nodes are not vertically aligned (they weave left/right), the spine is a polyline.\n     * This method performs linear interpolation between the two nearest nodes to ensure the\n     * \"Pulse\" stays perfectly centered on the spine path as it travels.\n     *\n     * @param {Number} y - The vertical position\n     * @returns {Number} x - The calculated horizontal position on the spine\n     */","meta":{"range":[3978,4508],"filename":"TicketCanvas.mjs","lineno":127,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/portal/canvas","code":{"id":"astnode100037070","name":"TicketCanvas#getXAtY","type":"MethodDefinition","paramnames":["y"]},"vars":{"":null}},"description":"<p>Calculates the horizontal (X) position on the spine for a given vertical (Y) position.</p>\n<p>Since the nodes are not vertically aligned (they weave left/right), the spine is a polyline.\nThis method performs linear interpolation between the two nearest nodes to ensure the\n&quot;Pulse&quot; stays perfectly centered on the spine path as it travels.</p>\n","params":[{"type":{"names":["Number"]},"description":"<p>The vertical position</p>\n","name":"y"}],"returns":[{"type":{"names":["Number"]},"description":"x - The calculated horizontal position on the spine"}],"name":"getXAtY","longname":"TicketCanvas#getXAtY","kind":"function","memberof":"TicketCanvas","scope":"instance","$longname":"TicketCanvas#getXAtY","$kind":"method","id":8619,"neoClassName":"Portal.canvas.TicketCanvas"},{"comment":"/**\n     * Calculates the physics state (speed, nearest node) for a given Y position.\n     * This acts as the \"Traffic Model\" engine, determining the local speed limit based on proximity\n     * to nodes. Particles slow down near nodes (observation) and accelerate in empty space (travel).\n     *\n     * @param {Number} y\n     * @returns {Object} {speedModifier, nearNode, minDist}\n     */","meta":{"range":[4907,5547],"filename":"TicketCanvas.mjs","lineno":154,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/portal/canvas","code":{"id":"astnode100037200","name":"TicketCanvas#getPhysics","type":"MethodDefinition","paramnames":["y"]},"vars":{"":null}},"description":"<p>Calculates the physics state (speed, nearest node) for a given Y position.\nThis acts as the &quot;Traffic Model&quot; engine, determining the local speed limit based on proximity\nto nodes. Particles slow down near nodes (observation) and accelerate in empty space (travel).</p>\n","params":[{"type":{"names":["Number"]},"name":"y"}],"returns":[{"type":{"names":["Object"]},"description":"{speedModifier, nearNode, minDist}"}],"name":"getPhysics","longname":"TicketCanvas#getPhysics","kind":"function","memberof":"TicketCanvas","scope":"instance","$longname":"TicketCanvas#getPhysics","$kind":"method","id":8620,"neoClassName":"Portal.canvas.TicketCanvas"},{"comment":"/**\n     * Helper to parse hex to rgb\n     * @param {String} hex\n     * @returns {Object} {r,g,b}\n     */","meta":{"range":[5663,6015],"filename":"TicketCanvas.mjs","lineno":183,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/portal/canvas","code":{"id":"astnode100037295","name":"TicketCanvas#hexToRgb","type":"MethodDefinition","paramnames":["hex"]},"vars":{"":null}},"description":"<p>Helper to parse hex to rgb</p>\n","params":[{"type":{"names":["String"]},"name":"hex"}],"returns":[{"type":{"names":["Object"]},"description":"{r,g,b}"}],"name":"hexToRgb","longname":"TicketCanvas#hexToRgb","kind":"function","memberof":"TicketCanvas","scope":"instance","$longname":"TicketCanvas#hexToRgb","$kind":"method","id":8621,"neoClassName":"Portal.canvas.TicketCanvas"},{"comment":"/**\n     * Updates the graph with new timeline nodes.\n     * When `reset` is true, it hard-resets the physics simulation (positions and time) to prevent\n     * visual artifacts (jumping/flashing) when switching between different ticket contexts.\n     *\n     * @param {Object} data\n     * @param {Array}  data.nodes\n     * @param {Boolean} [data.reset]\n     * @param {Number} [data.startY]\n     */","meta":{"range":[6422,6942],"filename":"TicketCanvas.mjs","lineno":207,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/portal/canvas","code":{"id":"astnode100037360","name":"TicketCanvas#updateGraphData","type":"MethodDefinition","paramnames":["data"]},"vars":{"":null}},"description":"<p>Updates the graph with new timeline nodes.\nWhen <code>reset</code> is true, it hard-resets the physics simulation (positions and time) to prevent\nvisual artifacts (jumping/flashing) when switching between different ticket contexts.</p>\n","params":[{"type":{"names":["Object"]},"name":"data"},{"type":{"names":["Array"]},"name":"data.nodes"},{"type":{"names":["Boolean"]},"optional":true,"name":"data.reset"},{"type":{"names":["Number"]},"optional":true,"name":"data.startY"}],"name":"updateGraphData","longname":"TicketCanvas#updateGraphData","kind":"function","memberof":"TicketCanvas","scope":"instance","$longname":"TicketCanvas#updateGraphData","$kind":"method","id":8622,"neoClassName":"Portal.canvas.TicketCanvas"},{"comment":"/**\n     * The Main Animation Loop (60fps).\n     *\n     * This method is responsible for:\n     * 1. **Physics Calculation**: Determining the pulse's speed based on proximity to nodes (\"Traffic Model\").\n     * 2. **State Updates**: Updating the pulse's position (`pulseY`) and color (`Chameleon Effect`).\n     * 3. **Drawing**: Rendering the spine, the pulse, and the node glows to the `OffscreenCanvas`.\n     *\n     * It uses `setTimeout` instead of `requestAnimationFrame` because SharedWorkers do not generally support rAF.\n     */","meta":{"range":[7486,14145],"filename":"TicketCanvas.mjs","lineno":236,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/portal/canvas","code":{"id":"astnode100037446","name":"TicketCanvas#render","type":"MethodDefinition","paramnames":[]},"vars":{"":null}},"description":"<p>The Main Animation Loop (60fps).</p>\n<p>This method is responsible for:</p>\n<ol>\n<li><strong>Physics Calculation</strong>: Determining the pulse&#39;s speed based on proximity to nodes (&quot;Traffic Model&quot;).</li>\n<li><strong>State Updates</strong>: Updating the pulse&#39;s position (<code>pulseY</code>) and color (<code>Chameleon Effect</code>).</li>\n<li><strong>Drawing</strong>: Rendering the spine, the pulse, and the node glows to the <code>OffscreenCanvas</code>.</li>\n</ol>\n<p>It uses <code>setTimeout</code> instead of <code>requestAnimationFrame</code> because SharedWorkers do not generally support rAF.</p>\n","name":"render","longname":"TicketCanvas#render","kind":"function","memberof":"TicketCanvas","scope":"instance","params":[],"$longname":"TicketCanvas#render","$kind":"method","id":8623,"neoClassName":"Portal.canvas.TicketCanvas"}]}