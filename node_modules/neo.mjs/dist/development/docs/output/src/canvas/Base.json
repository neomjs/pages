{"classData":[{"comment":"/**\n * @summary Abstract base class for Canvas Renderers.\n *\n * This class serves as the foundation for the specialized canvas visualizations (Header, Home, Services, Ticket)\n * that run within the **Neo.mjs Canvas SharedWorker**.\n *\n * It creates helper singletons that manage their own `OffscreenCanvas` instances, providing a standardized\n * architecture for:\n * - **Lifecycle Management:** Initialization (`initGraph`), destruction (`clearGraph`), and resource cleanup.\n * - **Render Loop Control:** Unified `render` loop with pause/resume capabilities and frame scheduling.\n * - **Context Management:** Robust handling of `OffscreenCanvas` transfer and context acquisition via `waitForCanvas`.\n * - **Shared State:** Common state management for mouse interaction, time, and theming.\n *\n * These renderers operate off the main thread to ensure high-performance, 60fps animations without\n * blocking the UI.\n *\n * @class Neo.canvas.Base\n * @extends Neo.core.Base\n */","meta":{"filename":"Base.mjs","lineno":3,"columnno":0,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/src/canvas","code":{}},"summary":"Abstract base class for Canvas Renderers.\n\nThis class serves as the foundation for the specialized canvas visualizations (Header, Home, Services, Ticket)\nthat run within the **Neo.mjs Canvas SharedWorker**.\n\nIt creates helper singletons that manage their own `OffscreenCanvas` instances, providing a standardized\narchitecture for:\n- **Lifecycle Management:** Initialization (`initGraph`), destruction (`clearGraph`), and resource cleanup.\n- **Render Loop Control:** Unified `render` loop with pause/resume capabilities and frame scheduling.\n- **Context Management:** Robust handling of `OffscreenCanvas` transfer and context acquisition via `waitForCanvas`.\n- **Shared State:** Common state management for mouse interaction, time, and theming.\n\nThese renderers operate off the main thread to ensure high-performance, 60fps animations without\nblocking the UI.","kind":"class","name":"Base","augments":["Neo.core.Base"],"memberof":"Neo.canvas","longname":"Neo.canvas.Base","scope":"static","$longname":"Neo.canvas.Base","$kind":"class","id":441,"neoClassName":"Neo.canvas.Base"},{"comment":"/**\n         * @member {String} className='Neo.canvas.Base'\n         * @protected\n         */","meta":{"filename":"Base.mjs","lineno":28,"columnno":8,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/src/canvas","code":{}},"kind":"member","name":"className","type":{"names":["String"]},"defaultvalue":"'Neo.canvas.Base'","access":"protected","longname":"className","scope":"global","$longname":"className","$kind":"property","id":442,"neoClassName":"Neo.canvas.Base"},{"comment":"/**\n         * Remote method access\n         * @member {Object} remote\n         * @protected\n         */","meta":{"filename":"Base.mjs","lineno":34,"columnno":8,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/src/canvas","code":{}},"description":"<p>Remote method access</p>\n","kind":"member","name":"remote","type":{"names":["Object"]},"access":"protected","longname":"remote","scope":"global","$longname":"remote","$kind":"property","id":443,"neoClassName":"Neo.canvas.Base"},{"comment":"/**\n         * The active color theme ('light' or 'dark').\n         * @member {String} theme_='light'\n         * @reactive\n         */","meta":{"filename":"Base.mjs","lineno":50,"columnno":8,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/src/canvas","code":{}},"description":"<p>The active color theme (&#39;light&#39; or &#39;dark&#39;).</p>\n","kind":"member","name":"theme_","type":{"names":["String"]},"defaultvalue":"'light'","tags":[{"originalTitle":"reactive","title":"reactive","text":""}],"longname":"theme_","scope":"global","$longname":"theme_","$kind":"property","id":444,"neoClassName":"Neo.canvas.Base"},{"comment":"/**\n     * @member {Number|null} animationId=null\n     */","meta":{"filename":"Base.mjs","lineno":56,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/src/canvas","code":{}},"kind":"member","name":"animationId","type":{"names":["Number","null"]},"defaultvalue":null,"longname":"animationId","scope":"global","$longname":"animationId","$kind":"property","id":445,"neoClassName":"Neo.canvas.Base"},{"comment":"/**\n     * @member {String|null} canvasId=null\n     */","meta":{"filename":"Base.mjs","lineno":60,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/src/canvas","code":{}},"kind":"member","name":"canvasId","type":{"names":["String","null"]},"defaultvalue":null,"longname":"canvasId","scope":"global","$longname":"canvasId","$kind":"property","id":446,"neoClassName":"Neo.canvas.Base"},{"comment":"/**\n     * @member {Object|null} canvasSize=null\n     */","meta":{"filename":"Base.mjs","lineno":64,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/src/canvas","code":{}},"kind":"member","name":"canvasSize","type":{"names":["Object","null"]},"defaultvalue":null,"longname":"canvasSize","scope":"global","$longname":"canvasSize","$kind":"property","id":447,"neoClassName":"Neo.canvas.Base"},{"comment":"/**\n     * @member {OffscreenCanvasRenderingContext2D|null} context=null\n     */","meta":{"filename":"Base.mjs","lineno":68,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/src/canvas","code":{}},"kind":"member","name":"context","type":{"names":["OffscreenCanvasRenderingContext2D","null"]},"defaultvalue":null,"longname":"context","scope":"global","$longname":"context","$kind":"property","id":448,"neoClassName":"Neo.canvas.Base"},{"comment":"/**\n     * Cache for reusable gradients to prevent GC.\n     * @member {Object} gradients={}\n     */","meta":{"filename":"Base.mjs","lineno":73,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/src/canvas","code":{}},"description":"<p>Cache for reusable gradients to prevent GC.</p>\n","kind":"member","name":"gradients","type":{"names":["Object"]},"defaultvalue":"{}","longname":"gradients","scope":"global","$longname":"gradients","$kind":"property","id":449,"neoClassName":"Neo.canvas.Base"},{"comment":"/**\n     * Flag to pause the render loop.\n     * @member {Boolean} isPaused=false\n     */","meta":{"filename":"Base.mjs","lineno":78,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/src/canvas","code":{}},"description":"<p>Flag to pause the render loop.</p>\n","kind":"member","name":"isPaused","type":{"names":["Boolean"]},"defaultvalue":false,"longname":"isPaused","scope":"global","$longname":"isPaused","$kind":"property","id":450,"neoClassName":"Neo.canvas.Base"},{"comment":"/**\n     * Tracked mouse position for interactive physics.\n     * Initialize off-screen to prevent startup jitters.\n     * @member {Object} mouse={x: -1000, y: -1000}\n     */","meta":{"filename":"Base.mjs","lineno":84,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/src/canvas","code":{}},"description":"<p>Tracked mouse position for interactive physics.\nInitialize off-screen to prevent startup jitters.</p>\n","kind":"member","name":"mouse","type":{"names":["Object"]},"defaultvalue":"{x: -1000, y: -1000}","longname":"mouse","scope":"global","$longname":"mouse","$kind":"property","id":451,"neoClassName":"Neo.canvas.Base"},{"comment":"/**\n     * Global simulation time.\n     * @member {Number} time=0\n     */","meta":{"filename":"Base.mjs","lineno":89,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/src/canvas","code":{}},"description":"<p>Global simulation time.</p>\n","kind":"member","name":"time","type":{"names":["Number"]},"defaultvalue":0,"longname":"time","scope":"global","$longname":"time","$kind":"property","id":452,"neoClassName":"Neo.canvas.Base"},{"comment":"/**\n     * @member {Function} renderLoop=this.render.bind(this)\n     */","meta":{"filename":"Base.mjs","lineno":94,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/src/canvas","code":{}},"kind":"member","name":"renderLoop","type":{"names":["function"]},"defaultvalue":"this.render.bind(this)","longname":"renderLoop","scope":"global","$longname":"renderLoop","$kind":"property","id":453,"neoClassName":"Neo.canvas.Base"},{"comment":"/**\n     * Triggered after the `theme` config is changed.\n     * Updates the resource cache (gradients, colors) to reflect the new theme immediately.\n     * @param {String} value\n     * @param {String} oldValue\n     */","meta":{"range":[2991,3161],"filename":"Base.mjs","lineno":102,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/src/canvas","code":{"id":"astnode100015151","name":"Base#afterSetTheme","type":"MethodDefinition","paramnames":["value","oldValue"]},"vars":{"":null}},"description":"<p>Triggered after the <code>theme</code> config is changed.\nUpdates the resource cache (gradients, colors) to reflect the new theme immediately.</p>\n","params":[{"type":{"names":["String"]},"name":"value"},{"type":{"names":["String"]},"name":"oldValue"}],"name":"afterSetTheme","longname":"Base#afterSetTheme","kind":"function","memberof":"Base","scope":"instance","$longname":"Base#afterSetTheme","$kind":"method","id":454,"neoClassName":"Neo.canvas.Base"},{"comment":"/**\n     * Checks if the canvas is ready to render.\n     * Returns true only if the context exists and the simulation is not paused.\n     * Subclasses should call this at the start of their `render` loop.\n     * @returns {Boolean}\n     */","meta":{"range":[3410,3502],"filename":"Base.mjs","lineno":120,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/src/canvas","code":{"id":"astnode100015166","name":"Base#canRender","type":"MethodDefinition","paramnames":[]},"vars":{"":null}},"description":"<p>Checks if the canvas is ready to render.\nReturns true only if the context exists and the simulation is not paused.\nSubclasses should call this at the start of their <code>render</code> loop.</p>\n","returns":[{"type":{"names":["Boolean"]}}],"name":"canRender","longname":"Base#canRender","kind":"member","memberof":"Base","scope":"instance","params":[],"$longname":"Base#canRender","$kind":"property","id":455,"neoClassName":"Neo.canvas.Base"},{"comment":"/**\n     * Clears the graph state and stops the render loop.\n     * Use this to cleanup resources when the component is destroyed or unmounted.\n     */","meta":{"range":[3664,3966],"filename":"Base.mjs","lineno":123,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/src/canvas","code":{"id":"astnode100015185","name":"Base#clearGraph","type":"MethodDefinition","paramnames":[]},"vars":{"":null}},"description":"<p>Clears the graph state and stops the render loop.\nUse this to cleanup resources when the component is destroyed or unmounted.</p>\n","name":"clearGraph","longname":"Base#clearGraph","kind":"function","memberof":"Base","scope":"instance","params":[],"$longname":"Base#clearGraph","$kind":"method","id":456,"neoClassName":"Neo.canvas.Base"},{"comment":"/**\n     * Initializes the canvas context.\n     * Starts the polling mechanism to wait for the OffscreenCanvas transfer from the Main Thread.\n     * @param {Object} opts\n     * @param {String} opts.canvasId\n     * @param {String} opts.windowId\n     */","meta":{"range":[4228,4437],"filename":"Base.mjs","lineno":142,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/src/canvas","code":{"id":"astnode100015247","name":"Base#initGraph","type":"MethodDefinition","paramnames":[""]},"vars":{"":null}},"description":"<p>Initializes the canvas context.\nStarts the polling mechanism to wait for the OffscreenCanvas transfer from the Main Thread.</p>\n","params":[{"type":{"names":["Object"]},"name":"opts"},{"type":{"names":["String"]},"name":"opts.canvasId"},{"type":{"names":["String"]},"name":"opts.windowId"}],"name":"initGraph","longname":"Base#initGraph","kind":"function","memberof":"Base","scope":"instance","$longname":"Base#initGraph","$kind":"method","id":457,"neoClassName":"Neo.canvas.Base"},{"comment":"/**\n     * Hook for subclasses to handle mouse clicks.\n     * Called by `updateMouseState` when a click event is received.\n     * @param {Object} data\n     */","meta":{"range":[4606,4627],"filename":"Base.mjs","lineno":156,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/src/canvas","code":{"id":"astnode100015281","name":"Base#onMouseClick","type":"MethodDefinition","paramnames":["data"]},"vars":{"":null}},"description":"<p>Hook for subclasses to handle mouse clicks.\nCalled by <code>updateMouseState</code> when a click event is received.</p>\n","params":[{"type":{"names":["Object"]},"name":"data"}],"name":"onMouseClick","longname":"Base#onMouseClick","kind":"function","memberof":"Base","scope":"instance","$longname":"Base#onMouseClick","$kind":"method","id":458,"neoClassName":"Neo.canvas.Base"},{"comment":"/**\n     * Pauses the simulation.\n     * The render loop will exit early while `isPaused` is true.\n     */","meta":{"range":[4744,4788],"filename":"Base.mjs","lineno":162,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/src/canvas","code":{"id":"astnode100015286","name":"Base#pause","type":"MethodDefinition","paramnames":[]},"vars":{"":null}},"description":"<p>Pauses the simulation.\nThe render loop will exit early while <code>isPaused</code> is true.</p>\n","name":"pause","longname":"Base#pause","kind":"function","memberof":"Base","scope":"instance","params":[],"$longname":"Base#pause","$kind":"method","id":459,"neoClassName":"Neo.canvas.Base"},{"comment":"/**\n     * Abstract render method.\n     * Subclasses must implement this method to draw the frame.\n     */","meta":{"range":[4905,4916],"filename":"Base.mjs","lineno":170,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/src/canvas","code":{"id":"astnode100015296","name":"Base#render","type":"MethodDefinition","paramnames":[]},"vars":{"":null}},"description":"<p>Abstract render method.\nSubclasses must implement this method to draw the frame.</p>\n","name":"render","longname":"Base#render","kind":"function","memberof":"Base","scope":"instance","params":[],"$longname":"Base#render","$kind":"method","id":460,"neoClassName":"Neo.canvas.Base"},{"comment":"/**\n     * Resumes the simulation.\n     * If the simulation was paused, this restarts the render loop.\n     */","meta":{"range":[5037,5175],"filename":"Base.mjs","lineno":176,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/src/canvas","code":{"id":"astnode100015300","name":"Base#resume","type":"MethodDefinition","paramnames":[]},"vars":{"":null}},"description":"<p>Resumes the simulation.\nIf the simulation was paused, this restarts the render loop.</p>\n","name":"resume","longname":"Base#resume","kind":"function","memberof":"Base","scope":"instance","params":[],"$longname":"Base#resume","$kind":"method","id":461,"neoClassName":"Neo.canvas.Base"},{"comment":"/**\n     * Exposed method for Remote Access to trigger the reactive config setter.\n     * @param {String} value\n     */","meta":{"range":[5305,5355],"filename":"Base.mjs","lineno":189,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/src/canvas","code":{"id":"astnode100015324","name":"Base#setTheme","type":"MethodDefinition","paramnames":["value"]},"vars":{"":null}},"description":"<p>Exposed method for Remote Access to trigger the reactive config setter.</p>\n","params":[{"type":{"names":["String"]},"name":"value"}],"name":"setTheme","longname":"Base#setTheme","kind":"function","memberof":"Base","scope":"instance","$longname":"Base#setTheme","$kind":"method","id":462,"neoClassName":"Neo.canvas.Base"},{"comment":"/**\n     * Updates the local mouse state from main thread events.\n     * Delegates click events to `onMouseClick`.\n     * @param {Object} data\n     * @param {Boolean} [data.click]\n     * @param {Boolean} [data.leave]\n     * @param {Number} [data.x]\n     * @param {Number} [data.y]\n     */","meta":{"range":[5654,6025],"filename":"Base.mjs","lineno":202,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/src/canvas","code":{"id":"astnode100015335","name":"Base#updateMouseState","type":"MethodDefinition","paramnames":["data"]},"vars":{"":null}},"description":"<p>Updates the local mouse state from main thread events.\nDelegates click events to <code>onMouseClick</code>.</p>\n","params":[{"type":{"names":["Object"]},"name":"data"},{"type":{"names":["Boolean"]},"optional":true,"name":"data.click"},{"type":{"names":["Boolean"]},"optional":true,"name":"data.leave"},{"type":{"names":["Number"]},"optional":true,"name":"data.x"},{"type":{"names":["Number"]},"optional":true,"name":"data.y"}],"name":"updateMouseState","longname":"Base#updateMouseState","kind":"function","memberof":"Base","scope":"instance","$longname":"Base#updateMouseState","$kind":"method","id":463,"neoClassName":"Neo.canvas.Base"},{"comment":"/**\n     * Updates the canvas size and resizes the internal context.\n     * Triggers `updateResources` hook to allow subclasses to regenerate buffers/gradients.\n     * @param {Object} size\n     * @param {Number} size.height\n     * @param {Number} size.width\n     */","meta":{"range":[6301,6647],"filename":"Base.mjs","lineno":225,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/src/canvas","code":{"id":"astnode100015411","name":"Base#updateSize","type":"MethodDefinition","paramnames":["size"]},"vars":{"":null}},"description":"<p>Updates the canvas size and resizes the internal context.\nTriggers <code>updateResources</code> hook to allow subclasses to regenerate buffers/gradients.</p>\n","params":[{"type":{"names":["Object"]},"name":"size"},{"type":{"names":["Number"]},"name":"size.height"},{"type":{"names":["Number"]},"name":"size.width"}],"name":"updateSize","longname":"Base#updateSize","kind":"function","memberof":"Base","scope":"instance","$longname":"Base#updateSize","$kind":"method","id":464,"neoClassName":"Neo.canvas.Base"},{"comment":"/**\n     * Polls for the OffscreenCanvas until it is available in the Worker's `canvasWindowMap`.\n     * Once found, it initializes the context and starts the render loop.\n     * @param {String} canvasId\n     * @param {String} windowId\n     * @param {Boolean} hasChange\n     * @protected\n     */","meta":{"range":[6953,7610],"filename":"Base.mjs","lineno":246,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/src/canvas","code":{"id":"astnode100015457","name":"Base#waitForCanvas","type":"MethodDefinition","paramnames":["canvasId","windowId","hasChange"]},"vars":{"":null}},"description":"<p>Polls for the OffscreenCanvas until it is available in the Worker&#39;s <code>canvasWindowMap</code>.\nOnce found, it initializes the context and starts the render loop.</p>\n","params":[{"type":{"names":["String"]},"name":"canvasId"},{"type":{"names":["String"]},"name":"windowId"},{"type":{"names":["Boolean"]},"name":"hasChange"}],"access":"protected","name":"waitForCanvas","longname":"Base#waitForCanvas","kind":"function","memberof":"Base","scope":"instance","$longname":"Base#waitForCanvas","$kind":"method","id":465,"neoClassName":"Neo.canvas.Base"}]}