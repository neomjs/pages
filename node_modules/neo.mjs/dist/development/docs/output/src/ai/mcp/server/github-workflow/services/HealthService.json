{"classData":[{"comment":"/**\n * @summary Monitors and validates the GitHub CLI dependency for the MCP server.\n *\n * This service acts as a gatekeeper, ensuring that the GitHub CLI (`gh`) is properly\n * installed, authenticated, and meets version requirements before any tools are executed.\n *\n * Key responsibilities:\n * - Version validation: Ensures `gh` meets the minimum required version using semantic versioning\n * - Authentication verification: Confirms the user is logged in to github.com\n * - Intelligent caching: Reduces overhead by caching health status for 5 minutes\n * - Graceful degradation: Provides clear, actionable error messages when dependencies are missing\n * - Recovery detection: Automatically detects when issues are resolved (e.g., after `gh auth login`)\n *\n * The service is designed to be non-blocking at startup, allowing the server to run even\n * when `gh` is not available, while failing gracefully at the tool-call level with helpful\n * error messages to guide users toward resolution.\n *\n * @class Neo.ai.mcp.server.github-workflow.services.HealthService\n * @extends Neo.core.Base\n * @singleton\n */","meta":{"filename":"HealthService.mjs","lineno":10,"columnno":0,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/ai/mcp/server/github-workflow/services","code":{}},"summary":"Monitors and validates the GitHub CLI dependency for the MCP server.\n\nThis service acts as a gatekeeper, ensuring that the GitHub CLI (`gh`) is properly\ninstalled, authenticated, and meets version requirements before any tools are executed.\n\nKey responsibilities:\n- Version validation: Ensures `gh` meets the minimum required version using semantic versioning\n- Authentication verification: Confirms the user is logged in to github.com\n- Intelligent caching: Reduces overhead by caching health status for 5 minutes\n- Graceful degradation: Provides clear, actionable error messages when dependencies are missing\n- Recovery detection: Automatically detects when issues are resolved (e.g., after `gh auth login`)\n\nThe service is designed to be non-blocking at startup, allowing the server to run even\nwhen `gh` is not available, while failing gracefully at the tool-call level with helpful\nerror messages to guide users toward resolution.","kind":"class","name":"HealthService","augments":["Neo.core.Base"],"tags":[{"originalTitle":"singleton","title":"singleton","text":""}],"memberof":"Neo.ai.mcp.server.github-workflow.services","longname":"Neo.ai.mcp.server.github-workflow.services.HealthService","scope":"static","$longname":"Neo.ai.mcp.server.github-workflow.services.HealthService","$kind":"class","id":6599,"neoClassName":"Neo.ai.mcp.server.github-workflow.services.HealthService"},{"comment":"/**\n         * @member {String} className='Neo.ai.mcp.server.github-workflow.services.HealthService'\n         * @protected\n         */","meta":{"filename":"HealthService.mjs","lineno":37,"columnno":8,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/ai/mcp/server/github-workflow/services","code":{}},"kind":"member","name":"className","type":{"names":["String"]},"defaultvalue":"'Neo.ai.mcp.server.github-workflow.services.HealthService'","access":"protected","longname":"className","scope":"global","$longname":"className","$kind":"property","id":6600,"neoClassName":"Neo.ai.mcp.server.github-workflow.services.HealthService"},{"comment":"/**\n         * @member {Boolean} singleton=true\n         * @protected\n         */","meta":{"filename":"HealthService.mjs","lineno":42,"columnno":8,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/ai/mcp/server/github-workflow/services","code":{}},"kind":"member","name":"singleton","type":{"names":["Boolean"]},"defaultvalue":true,"access":"protected","longname":"singleton","scope":"global","$longname":"singleton","$kind":"property","id":6601,"neoClassName":"Neo.ai.mcp.server.github-workflow.services.HealthService"},{"comment":"/**\n     * Duration (in milliseconds) for which cached HEALTHY results remain valid.\n     * Set to 5 minutes to balance freshness with performance.\n     * Unhealthy results are never cached to allow immediate recovery detection.\n     * @member {number} #cacheDuration\n     * @private\n     */","meta":{"filename":"HealthService.mjs","lineno":52,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/ai/mcp/server/github-workflow/services","code":{}},"description":"<p>Duration (in milliseconds) for which cached HEALTHY results remain valid.\nSet to 5 minutes to balance freshness with performance.\nUnhealthy results are never cached to allow immediate recovery detection.</p>\n","kind":"member","name":"#cacheDuration","type":{"names":["number"]},"access":"private","longname":"#cacheDuration","scope":"global","$longname":"#cacheDuration","$kind":"property","id":6602,"neoClassName":"Neo.ai.mcp.server.github-workflow.services.HealthService"},{"comment":"/**\n     * Cached result of the most recent health check.\n     * Used to avoid redundant `gh` CLI calls within the cache TTL window.\n     * @member {Object|null} #cachedHealth\n     * @private\n     */","meta":{"filename":"HealthService.mjs","lineno":60,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/ai/mcp/server/github-workflow/services","code":{}},"description":"<p>Cached result of the most recent health check.\nUsed to avoid redundant <code>gh</code> CLI calls within the cache TTL window.</p>\n","kind":"member","name":"#cachedHealth","type":{"names":["Object","null"]},"access":"private","longname":"#cachedHealth","scope":"global","$longname":"#cachedHealth","$kind":"property","id":6603,"neoClassName":"Neo.ai.mcp.server.github-workflow.services.HealthService"},{"comment":"/**\n     * Timestamp (in milliseconds) of when the health check cache was last populated.\n     * @member {number|null} #lastCheckTime\n     * @private\n     */","meta":{"filename":"HealthService.mjs","lineno":67,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/ai/mcp/server/github-workflow/services","code":{}},"description":"<p>Timestamp (in milliseconds) of when the health check cache was last populated.</p>\n","kind":"member","name":"#lastCheckTime","type":{"names":["number","null"]},"access":"private","longname":"#lastCheckTime","scope":"global","$longname":"#lastCheckTime","$kind":"property","id":6604,"neoClassName":"Neo.ai.mcp.server.github-workflow.services.HealthService"},{"comment":"/**\n     * Promise of the currently executing health check.\n     * Used for request deduplication to prevent \"thundering herd\" of gh CLI calls.\n     * @member {Promise<Object>|null} #healthCheckPromise\n     * @private\n     */","meta":{"filename":"HealthService.mjs","lineno":75,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/ai/mcp/server/github-workflow/services","code":{}},"description":"<p>Promise of the currently executing health check.\nUsed for request deduplication to prevent &quot;thundering herd&quot; of gh CLI calls.</p>\n","kind":"member","name":"#healthCheckPromise","type":{"names":["Promise.<Object>","null"]},"access":"private","longname":"#healthCheckPromise","scope":"global","$longname":"#healthCheckPromise","$kind":"property","id":6605,"neoClassName":"Neo.ai.mcp.server.github-workflow.services.HealthService"},{"comment":"/**\n     * The status from the previous health check, used to detect state transitions\n     * (e.g., recovery from 'unhealthy' to 'healthy') and log meaningful messages.\n     * @member {string|null} #previousStatus\n     * @private\n     */","meta":{"filename":"HealthService.mjs","lineno":83,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/ai/mcp/server/github-workflow/services","code":{}},"description":"<p>The status from the previous health check, used to detect state transitions\n(e.g., recovery from &#39;unhealthy&#39; to &#39;healthy&#39;) and log meaningful messages.</p>\n","kind":"member","name":"#previousStatus","type":{"names":["string","null"]},"access":"private","longname":"#previousStatus","scope":"global","$longname":"#previousStatus","$kind":"property","id":6606,"neoClassName":"Neo.ai.mcp.server.github-workflow.services.HealthService"},{"comment":"/**\n     * Clears the health check cache, forcing the next call to perform a fresh check.\n     *\n     * Intent: This is primarily useful for testing and debugging scenarios where\n     * you need to immediately verify a fix (e.g., after running `gh auth login`)\n     * without waiting for the 5-minute cache to expire.\n     *\n     * In production, this would rarely be called directly, but it could be useful\n     * if we later add a \"refresh\" tool or administrative endpoint.\n     */","meta":{"range":[6170,6350],"filename":"HealthService.mjs","lineno":160,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/ai/mcp/server/github-workflow/services","code":{"id":"astnode100013901","name":"HealthService#clearCache","type":"MethodDefinition","paramnames":[]},"vars":{"":null}},"description":"<p>Clears the health check cache, forcing the next call to perform a fresh check.</p>\n<p>Intent: This is primarily useful for testing and debugging scenarios where\nyou need to immediately verify a fix (e.g., after running <code>gh auth login</code>)\nwithout waiting for the 5-minute cache to expire.</p>\n<p>In production, this would rarely be called directly, but it could be useful\nif we later add a &quot;refresh&quot; tool or administrative endpoint.</p>\n","name":"clearCache","longname":"HealthService#clearCache","kind":"function","memberof":"HealthService","scope":"instance","params":[],"$longname":"HealthService#clearCache","$kind":"method","id":6607,"neoClassName":"Neo.ai.mcp.server.github-workflow.services.HealthService"},{"comment":"/**\n     * Ensures the GitHub CLI is healthy before allowing an operation to proceed.\n     *\n     * Intent: This is the \"gatekeeper\" method used by tool handlers and internal\n     * services (like SyncService) to fail-fast with a clear error message if the\n     * GitHub CLI is not available.\n     *\n     * By throwing an exception, we ensure that:\n     * 1. The operation doesn't attempt to use `gh` and get cryptic subprocess errors\n     * 2. The agent receives a clear, actionable error message via the MCP protocol\n     * 3. Users understand exactly what needs to be fixed\n     *\n     * This method leverages the cached health check, so calling it frequently\n     * (e.g., before each tool invocation) has minimal performance impact.\n     * @throws {Error} If the GitHub CLI is unhealthy, with a detailed message\n     * @returns {Promise<void>}\n     */","meta":{"range":[7395,7752],"filename":"HealthService.mjs","lineno":192,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/ai/mcp/server/github-workflow/services","code":{"id":"astnode100013943","name":"HealthService#ensureHealthy","type":"MethodDefinition","paramnames":[]},"vars":{"":null}},"description":"<p>Ensures the GitHub CLI is healthy before allowing an operation to proceed.</p>\n<p>Intent: This is the &quot;gatekeeper&quot; method used by tool handlers and internal\nservices (like SyncService) to fail-fast with a clear error message if the\nGitHub CLI is not available.</p>\n<p>By throwing an exception, we ensure that:</p>\n<ol>\n<li>The operation doesn&#39;t attempt to use <code>gh</code> and get cryptic subprocess errors</li>\n<li>The agent receives a clear, actionable error message via the MCP protocol</li>\n<li>Users understand exactly what needs to be fixed</li>\n</ol>\n<p>This method leverages the cached health check, so calling it frequently\n(e.g., before each tool invocation) has minimal performance impact.</p>\n","exceptions":[{"type":{"names":["Error"]},"description":"If the GitHub CLI is unhealthy, with a detailed message"}],"returns":[{"type":{"names":["Promise.<void>"]}}],"name":"ensureHealthy","longname":"HealthService#ensureHealthy","kind":"function","memberof":"HealthService","scope":"instance","params":[],"async":true,"$longname":"HealthService#ensureHealthy","$kind":"method","id":6608,"neoClassName":"Neo.ai.mcp.server.github-workflow.services.HealthService"},{"comment":"/**\n     * Public API: Checks the health of the GitHub CLI with intelligent caching.\n     *\n     * Intent: This is the primary entry point for all health checks. It uses a\n     * 5-minute cache to avoid hammering the `gh` CLI with redundant subprocess\n     * calls, which is especially important when:\n     * - The MCP server is handling multiple concurrent tool requests\n     * - Agents are debugging issues and repeatedly calling healthcheck\n     * - The SyncService is running frequent syncs\n     *\n     * IMPORTANT: Only 'healthy' results are cached. Unhealthy results are always\n     * fresh, allowing immediate recovery detection when users fix issues (e.g.,\n     * by running `gh auth login`). This ensures good UX - users don't have to\n     * wait 5 minutes to retry after fixing a problem.\n     *\n     * Recovery detection: If the status changes between checks (e.g., from 'unhealthy'\n     * to 'healthy'), we log a clear message so users know their fix worked.\n     * @returns {Promise<object>} A health status payload with structure:\n     *   {\n     *     status: 'healthy' | 'unhealthy',\n     *     timestamp: ISO string,\n     *     githubCli: {\n     *       installed: boolean,\n     *       authenticated: boolean,\n     *       versionOk: boolean,\n     *       version: string | null,\n     *       details: string[]\n     *     }\n     *   }\n     */","meta":{"range":[9123,11434],"filename":"HealthService.mjs","lineno":232,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/ai/mcp/server/github-workflow/services","code":{"id":"astnode100013981","name":"HealthService#healthcheck","type":"MethodDefinition","paramnames":[]},"vars":{"":null}},"description":"<p>Public API: Checks the health of the GitHub CLI with intelligent caching.</p>\n<p>Intent: This is the primary entry point for all health checks. It uses a\n5-minute cache to avoid hammering the <code>gh</code> CLI with redundant subprocess\ncalls, which is especially important when:</p>\n<ul>\n<li>The MCP server is handling multiple concurrent tool requests</li>\n<li>Agents are debugging issues and repeatedly calling healthcheck</li>\n<li>The SyncService is running frequent syncs</li>\n</ul>\n<p>IMPORTANT: Only &#39;healthy&#39; results are cached. Unhealthy results are always\nfresh, allowing immediate recovery detection when users fix issues (e.g.,\nby running <code>gh auth login</code>). This ensures good UX - users don&#39;t have to\nwait 5 minutes to retry after fixing a problem.</p>\n<p>Recovery detection: If the status changes between checks (e.g., from &#39;unhealthy&#39;\nto &#39;healthy&#39;), we log a clear message so users know their fix worked.</p>\n","returns":[{"type":{"names":["Promise.<object>"]},"description":"A health status payload with structure:\n  {\n    status: 'healthy' | 'unhealthy',\n    timestamp: ISO string,\n    githubCli: {\n      installed: boolean,\n      authenticated: boolean,\n      versionOk: boolean,\n      version: string | null,\n      details: string[]\n    }\n  }"}],"name":"healthcheck","longname":"HealthService#healthcheck","kind":"function","memberof":"HealthService","scope":"instance","params":[],"async":true,"$longname":"HealthService#healthcheck","$kind":"method","id":6609,"neoClassName":"Neo.ai.mcp.server.github-workflow.services.HealthService"}]}