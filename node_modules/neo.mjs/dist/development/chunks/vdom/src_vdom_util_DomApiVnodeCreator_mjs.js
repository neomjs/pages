export const __webpack_esm_id__ = "src_vdom_util_DomApiVnodeCreator_mjs";
export const __webpack_esm_ids__ = ["src_vdom_util_DomApiVnodeCreator_mjs"];
export const __webpack_esm_modules__ = {

/***/ "./src/vdom/util/DomApiVnodeCreator.mjs"
/*!**********************************************!*\
  !*** ./src/vdom/util/DomApiVnodeCreator.mjs ***!
  \**********************************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
const DomApiVnodeCreator = {
    /**
     * Recursively creates a VNode tree suitable for direct DOM API insertion.
     * This tree excludes any nodes that are marked as 'moved' within the movedNodes map,
     * as their DOM manipulation will be handled by separate moveNode deltas.
     *
     * @param {Neo.vdom.VNode} vnode        The VNode to process.
     * @param {Map}            [movedNodes] A map of VNodes that are being moved.
     * @returns {Object|null} A new VNode tree (or subtree) with moved nodes pruned, or null if the root is a moved node.
     */
    create(vnode, movedNodes) {
        /*
         * A vnode itself can be null (removeDom: true) => opt out.
         *
         * If the node has a componentId, there is nothing to do (scoped vdom updates), opt out.
         *
         * If this specific vnode is in the movedNodes map, it means its DOM element
         * will be moved by a separate delta. So, we should not include it in this fragment.
         */
        if (!vnode || vnode.componentId || (vnode.id && movedNodes?.get(vnode.id))) {
            return null // Prune this branch
        }

        // For text nodes, we can return the original VNode directly, as they have no childNodes array to modify.
        if (vnode.vtype === 'text') {
            return vnode
        }

        // For other VNodes (vnode or root), create a shallow clone first.
        let clonedVnode = {...vnode, childNodes: []};

        // Recursively process children
        if (vnode.childNodes.length > 0) {
            vnode.childNodes.forEach(child => {
                const processedChild = DomApiVnodeCreator.create(child, movedNodes);

                // Only add if not pruned
                if (processedChild) {
                    clonedVnode.childNodes.push(processedChild)
                }
            });
        }

        return clonedVnode
    }
};

const ns = Neo.ns('Neo.vdom.util', true);
ns.DomApiVnodeCreator = DomApiVnodeCreator;

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (DomApiVnodeCreator);


/***/ }

};

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2h1bmtzL3Zkb20vc3JjX3Zkb21fdXRpbF9Eb21BcGlWbm9kZUNyZWF0b3JfbWpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxnQkFBZ0I7QUFDL0IsZUFBZSxnQkFBZ0I7QUFDL0IsaUJBQWlCLGFBQWE7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSwyQkFBMkI7O0FBRTNCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLGlFQUFlLGtCQUFrQixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmVvLm1qcy8uL3NyYy92ZG9tL3V0aWwvRG9tQXBpVm5vZGVDcmVhdG9yLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBEb21BcGlWbm9kZUNyZWF0b3IgPSB7XG4gICAgLyoqXG4gICAgICogUmVjdXJzaXZlbHkgY3JlYXRlcyBhIFZOb2RlIHRyZWUgc3VpdGFibGUgZm9yIGRpcmVjdCBET00gQVBJIGluc2VydGlvbi5cbiAgICAgKiBUaGlzIHRyZWUgZXhjbHVkZXMgYW55IG5vZGVzIHRoYXQgYXJlIG1hcmtlZCBhcyAnbW92ZWQnIHdpdGhpbiB0aGUgbW92ZWROb2RlcyBtYXAsXG4gICAgICogYXMgdGhlaXIgRE9NIG1hbmlwdWxhdGlvbiB3aWxsIGJlIGhhbmRsZWQgYnkgc2VwYXJhdGUgbW92ZU5vZGUgZGVsdGFzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtOZW8udmRvbS5WTm9kZX0gdm5vZGUgICAgICAgIFRoZSBWTm9kZSB0byBwcm9jZXNzLlxuICAgICAqIEBwYXJhbSB7TWFwfSAgICAgICAgICAgIFttb3ZlZE5vZGVzXSBBIG1hcCBvZiBWTm9kZXMgdGhhdCBhcmUgYmVpbmcgbW92ZWQuXG4gICAgICogQHJldHVybnMge09iamVjdHxudWxsfSBBIG5ldyBWTm9kZSB0cmVlIChvciBzdWJ0cmVlKSB3aXRoIG1vdmVkIG5vZGVzIHBydW5lZCwgb3IgbnVsbCBpZiB0aGUgcm9vdCBpcyBhIG1vdmVkIG5vZGUuXG4gICAgICovXG4gICAgY3JlYXRlKHZub2RlLCBtb3ZlZE5vZGVzKSB7XG4gICAgICAgIC8qXG4gICAgICAgICAqIEEgdm5vZGUgaXRzZWxmIGNhbiBiZSBudWxsIChyZW1vdmVEb206IHRydWUpID0+IG9wdCBvdXQuXG4gICAgICAgICAqXG4gICAgICAgICAqIElmIHRoZSBub2RlIGhhcyBhIGNvbXBvbmVudElkLCB0aGVyZSBpcyBub3RoaW5nIHRvIGRvIChzY29wZWQgdmRvbSB1cGRhdGVzKSwgb3B0IG91dC5cbiAgICAgICAgICpcbiAgICAgICAgICogSWYgdGhpcyBzcGVjaWZpYyB2bm9kZSBpcyBpbiB0aGUgbW92ZWROb2RlcyBtYXAsIGl0IG1lYW5zIGl0cyBET00gZWxlbWVudFxuICAgICAgICAgKiB3aWxsIGJlIG1vdmVkIGJ5IGEgc2VwYXJhdGUgZGVsdGEuIFNvLCB3ZSBzaG91bGQgbm90IGluY2x1ZGUgaXQgaW4gdGhpcyBmcmFnbWVudC5cbiAgICAgICAgICovXG4gICAgICAgIGlmICghdm5vZGUgfHwgdm5vZGUuY29tcG9uZW50SWQgfHwgKHZub2RlLmlkICYmIG1vdmVkTm9kZXM/LmdldCh2bm9kZS5pZCkpKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbCAvLyBQcnVuZSB0aGlzIGJyYW5jaFxuICAgICAgICB9XG5cbiAgICAgICAgLy8gRm9yIHRleHQgbm9kZXMsIHdlIGNhbiByZXR1cm4gdGhlIG9yaWdpbmFsIFZOb2RlIGRpcmVjdGx5LCBhcyB0aGV5IGhhdmUgbm8gY2hpbGROb2RlcyBhcnJheSB0byBtb2RpZnkuXG4gICAgICAgIGlmICh2bm9kZS52dHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgICAgICByZXR1cm4gdm5vZGVcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZvciBvdGhlciBWTm9kZXMgKHZub2RlIG9yIHJvb3QpLCBjcmVhdGUgYSBzaGFsbG93IGNsb25lIGZpcnN0LlxuICAgICAgICBsZXQgY2xvbmVkVm5vZGUgPSB7Li4udm5vZGUsIGNoaWxkTm9kZXM6IFtdfTtcblxuICAgICAgICAvLyBSZWN1cnNpdmVseSBwcm9jZXNzIGNoaWxkcmVuXG4gICAgICAgIGlmICh2bm9kZS5jaGlsZE5vZGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHZub2RlLmNoaWxkTm9kZXMuZm9yRWFjaChjaGlsZCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJvY2Vzc2VkQ2hpbGQgPSBEb21BcGlWbm9kZUNyZWF0b3IuY3JlYXRlKGNoaWxkLCBtb3ZlZE5vZGVzKTtcblxuICAgICAgICAgICAgICAgIC8vIE9ubHkgYWRkIGlmIG5vdCBwcnVuZWRcbiAgICAgICAgICAgICAgICBpZiAocHJvY2Vzc2VkQ2hpbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgY2xvbmVkVm5vZGUuY2hpbGROb2Rlcy5wdXNoKHByb2Nlc3NlZENoaWxkKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNsb25lZFZub2RlXG4gICAgfVxufTtcblxuY29uc3QgbnMgPSBOZW8ubnMoJ05lby52ZG9tLnV0aWwnLCB0cnVlKTtcbm5zLkRvbUFwaVZub2RlQ3JlYXRvciA9IERvbUFwaVZub2RlQ3JlYXRvcjtcblxuZXhwb3J0IGRlZmF1bHQgRG9tQXBpVm5vZGVDcmVhdG9yO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9