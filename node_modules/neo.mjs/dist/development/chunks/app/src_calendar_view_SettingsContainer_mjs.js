"use strict";
(self["webpackChunkneo_mjs"] = self["webpackChunkneo_mjs"] || []).push([["src_calendar_view_SettingsContainer_mjs"],{

/***/ "./src/calendar/view/SettingsContainer.mjs":
/*!*************************************************!*\
  !*** ./src/calendar/view/SettingsContainer.mjs ***!
  \*************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _container_Base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../container/Base.mjs */ "./src/container/Base.mjs");
/* harmony import */ var _tab_Container_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../tab/Container.mjs */ "./src/tab/Container.mjs");



/**
 * @class Neo.calendar.view.SettingsContainer
 * @extends Neo.container.Base
 */
class SettingsContainer extends _container_Base_mjs__WEBPACK_IMPORTED_MODULE_0__["default"] {
    static config = {
        /**
         * @member {String} className='Neo.calendar.view.SettingsContainer'
         * @protected
         */
        className: 'Neo.calendar.view.SettingsContainer',
        /**
         * @member {String[]} baseCls=['neo-calendar-settingscontainer', 'neo-container']
         */
        baseCls: ['neo-calendar-settingscontainer', 'neo-container'],
        /**
         * Read only
         * @member {Boolean} collapsed=false
         */
        collapsed: false,
        /**
         * @member {Object} layout={ntype:'vbox',align:'stretch'}
         * @protected
         */
        layout: {ntype: 'vbox', align: 'stretch'},
        /**
         * True to only keep the active view inside the DOM
         * @member {Boolean} removeInactiveCards=true
         */
        removeInactiveCards: true
    }

    /**
     * @param {Object} config
     */
    construct(config) {
        super.construct(config);

        let me = this;

        if (me.collapsed) {
            me.vdom.removeDom = true
        }
    }

    /**
     * @param {Number} width
     */
    collapse(width) {
        let me    = this,
            style = me.style || {};

        style.marginRight = `-${width}px`;
        me._style         = style; // silent update
        me._vdom.style    = style; // silent update

        me.parent.updateDepth = -1;

        me.parent.promiseUpdate().then(() => {
            me.timeout(400).then(() => {
                me.collapsed = true;

                me.vdom.removeDom = true;
                me.update();

                me.mounted = false
            })
        })
    }

    /**
     *
     */
    createItems() {
        let me = this;

        me.items = [{
            ntype : 'component',
            cls   : ['neo-header'],
            height: 48,
            html  : '<i class="fa fa-cog"></i>Settings'
        }, {
            module             : _tab_Container_mjs__WEBPACK_IMPORTED_MODULE_1__["default"],
            removeInactiveCards: me.removeInactiveCards,

            items: [{
                module: () => Promise.all(/*! import() */[__webpack_require__.e("vendors-src_form_field_Number_mjs"), __webpack_require__.e("vendors-src_calendar_view_settings_GeneralContainer_mjs")]).then(__webpack_require__.bind(__webpack_require__, /*! ./settings/GeneralContainer.mjs */ "./src/calendar/view/settings/GeneralContainer.mjs")),
                flag  : 'general',
                header: {text: 'General'},
                style : {padding: '20px'}
            }, {
                ntype : 'component',
                flag  : 'day',
                header: {text: 'Day'},
                style : {padding: '20px'},
                test  : 'Day'
            }, {
                module: () => Promise.all(/*! import() */[__webpack_require__.e("vendors-src_form_field_Number_mjs"), __webpack_require__.e("src_calendar_view_settings_WeekContainer_mjs")]).then(__webpack_require__.bind(__webpack_require__, /*! ./settings/WeekContainer.mjs */ "./src/calendar/view/settings/WeekContainer.mjs")),
                flag  : 'week',
                header: {text: 'Week'},
                style : {padding: '20px'}
            }, {
                module: () => __webpack_require__.e(/*! import() */ "src_calendar_view_settings_MonthContainer_mjs").then(__webpack_require__.bind(__webpack_require__, /*! ./settings/MonthContainer.mjs */ "./src/calendar/view/settings/MonthContainer.mjs")),
                flag  : 'month',
                header: {text: 'Month'},
                style : {padding: '20px'}
            }, {
                module: () => Promise.all(/*! import() */[__webpack_require__.e("vendors-src_form_field_Number_mjs"), __webpack_require__.e("src_calendar_view_settings_YearContainer_mjs")]).then(__webpack_require__.bind(__webpack_require__, /*! ./settings/YearContainer.mjs */ "./src/calendar/view/settings/YearContainer.mjs")),
                flag  : 'year',
                header: {text: 'Year'},
                style : {padding: '20px'}
            }],

            listeners: {
                activeIndexChange: me.onCardIndexChange,
                scope            : me
            }
        }];

        super.createItems()
    }

    /**
     *
     */
    expand() {
        let me = this,
            style;

        delete me.vdom.removeDom;

        me.parent.updateDepth = -1;

        me.parent.promiseUpdate().then(() => {
            me.collapsed = false;
            me.mounted   = true;

            me.timeout(50).then(() => {
                style = me.style || {}
                style.marginRight = '0px';
                me.style = style
            })
        })
    }

    /**
     * @returns {Neo.calendar.view.MainContainer}
     */
    getMainContainer() {
        return this.up('calendar-maincontainer')
    }

    /**
     * @param {Object} data
     */
    onCardIndexChange(data) {
        let me            = this,
            container     = data.item,
            mainContainer = me.getMainContainer();

        if (mainContainer) {
            if (Neo.isFunction(container.createContent) && container.items.length < 1) {
                if (Neo.typeOf(mainContainer[`${container.flag}Component`]) !== 'NeoInstance') {
                    mainContainer.on('cardLoaded', () => {
                        me.timeout(30).then(() => {container.createContent()})
                    }, me, {once: true})
                } else {
                    me.timeout(30).then(() => {container.createContent()})
                }
            }

            if (container.flag !== 'general') {
                mainContainer.activeView = container.flag
            }
        }
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(SettingsContainer));


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2h1bmtzL2FwcC9zcmNfY2FsZW5kYXJfdmlld19TZXR0aW5nc0NvbnRhaW5lcl9tanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQW9EO0FBQ0Q7O0FBRW5EO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLDJEQUFTO0FBQ3pDO0FBQ0E7QUFDQSxvQkFBb0IsUUFBUTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixVQUFVO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFNBQVM7QUFDN0I7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFFBQVEsUUFBUTtBQUNwQztBQUNBO0FBQ0EsaUJBQWlCLGdDQUFnQztBQUNqRDtBQUNBO0FBQ0Esb0JBQW9CLFNBQVM7QUFDN0I7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxnQ0FBZ0MsTUFBTTtBQUN0QyxtQ0FBbUM7QUFDbkMsbUNBQW1DOztBQUVuQzs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULGlDQUFpQywwREFBWTtBQUM3Qzs7QUFFQTtBQUNBLDhCQUE4QiwwVEFBeUM7QUFDdkU7QUFDQSx5QkFBeUIsZ0JBQWdCO0FBQ3pDLHlCQUF5QjtBQUN6QixhQUFhO0FBQ2I7QUFDQTtBQUNBLHlCQUF5QixZQUFZO0FBQ3JDLHlCQUF5QixnQkFBZ0I7QUFDekM7QUFDQSxhQUFhO0FBQ2IsOEJBQThCLHlTQUFzQztBQUNwRTtBQUNBLHlCQUF5QixhQUFhO0FBQ3RDLHlCQUF5QjtBQUN6QixhQUFhO0FBQ2IsOEJBQThCLGtPQUF1QztBQUNyRTtBQUNBLHlCQUF5QixjQUFjO0FBQ3ZDLHlCQUF5QjtBQUN6QixhQUFhO0FBQ2IsOEJBQThCLHlTQUFzQztBQUNwRTtBQUNBLHlCQUF5QixhQUFhO0FBQ3RDLHlCQUF5QjtBQUN6QixhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUOztBQUVBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdEQUFnRCxlQUFlO0FBQy9EO0FBQ0EsbURBQW1ELDBCQUEwQjtBQUM3RSxxQkFBcUIsT0FBTyxXQUFXO0FBQ3ZDLGtCQUFrQjtBQUNsQiwrQ0FBK0MsMEJBQTBCO0FBQ3pFO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGlFQUFlLGlDQUFpQyxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmVvLm1qcy8uL3NyYy9jYWxlbmRhci92aWV3L1NldHRpbmdzQ29udGFpbmVyLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQ29udGFpbmVyICAgIGZyb20gJy4uLy4uL2NvbnRhaW5lci9CYXNlLm1qcyc7XG5pbXBvcnQgVGFiQ29udGFpbmVyIGZyb20gJy4uLy4uL3RhYi9Db250YWluZXIubWpzJztcblxuLyoqXG4gKiBAY2xhc3MgTmVvLmNhbGVuZGFyLnZpZXcuU2V0dGluZ3NDb250YWluZXJcbiAqIEBleHRlbmRzIE5lby5jb250YWluZXIuQmFzZVxuICovXG5jbGFzcyBTZXR0aW5nc0NvbnRhaW5lciBleHRlbmRzIENvbnRhaW5lciB7XG4gICAgc3RhdGljIGNvbmZpZyA9IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ30gY2xhc3NOYW1lPSdOZW8uY2FsZW5kYXIudmlldy5TZXR0aW5nc0NvbnRhaW5lcidcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgY2xhc3NOYW1lOiAnTmVvLmNhbGVuZGFyLnZpZXcuU2V0dGluZ3NDb250YWluZXInLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nW119IGJhc2VDbHM9WyduZW8tY2FsZW5kYXItc2V0dGluZ3Njb250YWluZXInLCAnbmVvLWNvbnRhaW5lciddXG4gICAgICAgICAqL1xuICAgICAgICBiYXNlQ2xzOiBbJ25lby1jYWxlbmRhci1zZXR0aW5nc2NvbnRhaW5lcicsICduZW8tY29udGFpbmVyJ10sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZWFkIG9ubHlcbiAgICAgICAgICogQG1lbWJlciB7Qm9vbGVhbn0gY29sbGFwc2VkPWZhbHNlXG4gICAgICAgICAqL1xuICAgICAgICBjb2xsYXBzZWQ6IGZhbHNlLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7T2JqZWN0fSBsYXlvdXQ9e250eXBlOid2Ym94JyxhbGlnbjonc3RyZXRjaCd9XG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIGxheW91dDoge250eXBlOiAndmJveCcsIGFsaWduOiAnc3RyZXRjaCd9LFxuICAgICAgICAvKipcbiAgICAgICAgICogVHJ1ZSB0byBvbmx5IGtlZXAgdGhlIGFjdGl2ZSB2aWV3IGluc2lkZSB0aGUgRE9NXG4gICAgICAgICAqIEBtZW1iZXIge0Jvb2xlYW59IHJlbW92ZUluYWN0aXZlQ2FyZHM9dHJ1ZVxuICAgICAgICAgKi9cbiAgICAgICAgcmVtb3ZlSW5hY3RpdmVDYXJkczogdHJ1ZVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWdcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3QoY29uZmlnKSB7XG4gICAgICAgIHN1cGVyLmNvbnN0cnVjdChjb25maWcpO1xuXG4gICAgICAgIGxldCBtZSA9IHRoaXM7XG5cbiAgICAgICAgaWYgKG1lLmNvbGxhcHNlZCkge1xuICAgICAgICAgICAgbWUudmRvbS5yZW1vdmVEb20gPSB0cnVlXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gd2lkdGhcbiAgICAgKi9cbiAgICBjb2xsYXBzZSh3aWR0aCkge1xuICAgICAgICBsZXQgbWUgICAgPSB0aGlzLFxuICAgICAgICAgICAgc3R5bGUgPSBtZS5zdHlsZSB8fCB7fTtcblxuICAgICAgICBzdHlsZS5tYXJnaW5SaWdodCA9IGAtJHt3aWR0aH1weGA7XG4gICAgICAgIG1lLl9zdHlsZSAgICAgICAgID0gc3R5bGU7IC8vIHNpbGVudCB1cGRhdGVcbiAgICAgICAgbWUuX3Zkb20uc3R5bGUgICAgPSBzdHlsZTsgLy8gc2lsZW50IHVwZGF0ZVxuXG4gICAgICAgIG1lLnBhcmVudC51cGRhdGVEZXB0aCA9IC0xO1xuXG4gICAgICAgIG1lLnBhcmVudC5wcm9taXNlVXBkYXRlKCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICBtZS50aW1lb3V0KDQwMCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgbWUuY29sbGFwc2VkID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgIG1lLnZkb20ucmVtb3ZlRG9tID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBtZS51cGRhdGUoKTtcblxuICAgICAgICAgICAgICAgIG1lLm1vdW50ZWQgPSBmYWxzZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqL1xuICAgIGNyZWF0ZUl0ZW1zKCkge1xuICAgICAgICBsZXQgbWUgPSB0aGlzO1xuXG4gICAgICAgIG1lLml0ZW1zID0gW3tcbiAgICAgICAgICAgIG50eXBlIDogJ2NvbXBvbmVudCcsXG4gICAgICAgICAgICBjbHMgICA6IFsnbmVvLWhlYWRlciddLFxuICAgICAgICAgICAgaGVpZ2h0OiA0OCxcbiAgICAgICAgICAgIGh0bWwgIDogJzxpIGNsYXNzPVwiZmEgZmEtY29nXCI+PC9pPlNldHRpbmdzJ1xuICAgICAgICB9LCB7XG4gICAgICAgICAgICBtb2R1bGUgICAgICAgICAgICAgOiBUYWJDb250YWluZXIsXG4gICAgICAgICAgICByZW1vdmVJbmFjdGl2ZUNhcmRzOiBtZS5yZW1vdmVJbmFjdGl2ZUNhcmRzLFxuXG4gICAgICAgICAgICBpdGVtczogW3tcbiAgICAgICAgICAgICAgICBtb2R1bGU6ICgpID0+IGltcG9ydCgnLi9zZXR0aW5ncy9HZW5lcmFsQ29udGFpbmVyLm1qcycpLFxuICAgICAgICAgICAgICAgIGZsYWcgIDogJ2dlbmVyYWwnLFxuICAgICAgICAgICAgICAgIGhlYWRlcjoge3RleHQ6ICdHZW5lcmFsJ30sXG4gICAgICAgICAgICAgICAgc3R5bGUgOiB7cGFkZGluZzogJzIwcHgnfVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIG50eXBlIDogJ2NvbXBvbmVudCcsXG4gICAgICAgICAgICAgICAgZmxhZyAgOiAnZGF5JyxcbiAgICAgICAgICAgICAgICBoZWFkZXI6IHt0ZXh0OiAnRGF5J30sXG4gICAgICAgICAgICAgICAgc3R5bGUgOiB7cGFkZGluZzogJzIwcHgnfSxcbiAgICAgICAgICAgICAgICB0ZXN0ICA6ICdEYXknXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgbW9kdWxlOiAoKSA9PiBpbXBvcnQoJy4vc2V0dGluZ3MvV2Vla0NvbnRhaW5lci5tanMnKSxcbiAgICAgICAgICAgICAgICBmbGFnICA6ICd3ZWVrJyxcbiAgICAgICAgICAgICAgICBoZWFkZXI6IHt0ZXh0OiAnV2Vlayd9LFxuICAgICAgICAgICAgICAgIHN0eWxlIDoge3BhZGRpbmc6ICcyMHB4J31cbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBtb2R1bGU6ICgpID0+IGltcG9ydCgnLi9zZXR0aW5ncy9Nb250aENvbnRhaW5lci5tanMnKSxcbiAgICAgICAgICAgICAgICBmbGFnICA6ICdtb250aCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyOiB7dGV4dDogJ01vbnRoJ30sXG4gICAgICAgICAgICAgICAgc3R5bGUgOiB7cGFkZGluZzogJzIwcHgnfVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIG1vZHVsZTogKCkgPT4gaW1wb3J0KCcuL3NldHRpbmdzL1llYXJDb250YWluZXIubWpzJyksXG4gICAgICAgICAgICAgICAgZmxhZyAgOiAneWVhcicsXG4gICAgICAgICAgICAgICAgaGVhZGVyOiB7dGV4dDogJ1llYXInfSxcbiAgICAgICAgICAgICAgICBzdHlsZSA6IHtwYWRkaW5nOiAnMjBweCd9XG4gICAgICAgICAgICB9XSxcblxuICAgICAgICAgICAgbGlzdGVuZXJzOiB7XG4gICAgICAgICAgICAgICAgYWN0aXZlSW5kZXhDaGFuZ2U6IG1lLm9uQ2FyZEluZGV4Q2hhbmdlLFxuICAgICAgICAgICAgICAgIHNjb3BlICAgICAgICAgICAgOiBtZVxuICAgICAgICAgICAgfVxuICAgICAgICB9XTtcblxuICAgICAgICBzdXBlci5jcmVhdGVJdGVtcygpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKi9cbiAgICBleHBhbmQoKSB7XG4gICAgICAgIGxldCBtZSA9IHRoaXMsXG4gICAgICAgICAgICBzdHlsZTtcblxuICAgICAgICBkZWxldGUgbWUudmRvbS5yZW1vdmVEb207XG5cbiAgICAgICAgbWUucGFyZW50LnVwZGF0ZURlcHRoID0gLTE7XG5cbiAgICAgICAgbWUucGFyZW50LnByb21pc2VVcGRhdGUoKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIG1lLmNvbGxhcHNlZCA9IGZhbHNlO1xuICAgICAgICAgICAgbWUubW91bnRlZCAgID0gdHJ1ZTtcblxuICAgICAgICAgICAgbWUudGltZW91dCg1MCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgc3R5bGUgPSBtZS5zdHlsZSB8fCB7fVxuICAgICAgICAgICAgICAgIHN0eWxlLm1hcmdpblJpZ2h0ID0gJzBweCc7XG4gICAgICAgICAgICAgICAgbWUuc3R5bGUgPSBzdHlsZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyB7TmVvLmNhbGVuZGFyLnZpZXcuTWFpbkNvbnRhaW5lcn1cbiAgICAgKi9cbiAgICBnZXRNYWluQ29udGFpbmVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51cCgnY2FsZW5kYXItbWFpbmNvbnRhaW5lcicpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGFcbiAgICAgKi9cbiAgICBvbkNhcmRJbmRleENoYW5nZShkYXRhKSB7XG4gICAgICAgIGxldCBtZSAgICAgICAgICAgID0gdGhpcyxcbiAgICAgICAgICAgIGNvbnRhaW5lciAgICAgPSBkYXRhLml0ZW0sXG4gICAgICAgICAgICBtYWluQ29udGFpbmVyID0gbWUuZ2V0TWFpbkNvbnRhaW5lcigpO1xuXG4gICAgICAgIGlmIChtYWluQ29udGFpbmVyKSB7XG4gICAgICAgICAgICBpZiAoTmVvLmlzRnVuY3Rpb24oY29udGFpbmVyLmNyZWF0ZUNvbnRlbnQpICYmIGNvbnRhaW5lci5pdGVtcy5sZW5ndGggPCAxKSB7XG4gICAgICAgICAgICAgICAgaWYgKE5lby50eXBlT2YobWFpbkNvbnRhaW5lcltgJHtjb250YWluZXIuZmxhZ31Db21wb25lbnRgXSkgIT09ICdOZW9JbnN0YW5jZScpIHtcbiAgICAgICAgICAgICAgICAgICAgbWFpbkNvbnRhaW5lci5vbignY2FyZExvYWRlZCcsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lLnRpbWVvdXQoMzApLnRoZW4oKCkgPT4ge2NvbnRhaW5lci5jcmVhdGVDb250ZW50KCl9KVxuICAgICAgICAgICAgICAgICAgICB9LCBtZSwge29uY2U6IHRydWV9KVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG1lLnRpbWVvdXQoMzApLnRoZW4oKCkgPT4ge2NvbnRhaW5lci5jcmVhdGVDb250ZW50KCl9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGNvbnRhaW5lci5mbGFnICE9PSAnZ2VuZXJhbCcpIHtcbiAgICAgICAgICAgICAgICBtYWluQ29udGFpbmVyLmFjdGl2ZVZpZXcgPSBjb250YWluZXIuZmxhZ1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBOZW8uc2V0dXBDbGFzcyhTZXR0aW5nc0NvbnRhaW5lcik7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=