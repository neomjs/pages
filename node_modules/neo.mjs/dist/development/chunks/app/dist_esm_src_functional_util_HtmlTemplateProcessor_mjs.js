"use strict";
(self["webpackChunkneo_mjs"] = self["webpackChunkneo_mjs"] || []).push([["dist_esm_src_functional_util_HtmlTemplateProcessor_mjs"],{

/***/ "./dist/esm/src/functional/util/HtmlTemplateProcessor.mjs"
/*!****************************************************************!*\
  !*** ./dist/esm/src/functional/util/HtmlTemplateProcessor.mjs ***!
  \****************************************************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _src_core_Base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../src/core/Base.mjs */ "./dist/esm/src/core/Base.mjs");
/* harmony import */ var _html_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./html.mjs */ "./dist/esm/src/functional/util/html.mjs");
Object(function webpackMissingModule() { var e = new Error("Cannot find module '../../../dist/parse5.mjs'"); e.code = 'MODULE_NOT_FOUND'; throw e; }());
const s=/\s+([a-zA-Z][^=]*)\s*=\s*"?$/,o=/^__DYNAMIC_VALUE_(\d+)__$/,a=/__DYNAMIC_VALUE_(\d+)__/g,r=/(__DYNAMIC_VALUE_|neotag)(\d+)/g,l=/<([\w\.]+)/,c=/<((?:[A-Z][\w\.]*)|(?:neotag\d+))([^>]*?)\/>/g;/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(class extends _src_core_Base_mjs__WEBPACK_IMPORTED_MODULE_0__["default"]{static config={className:"Neo.functional.util.HtmlTemplateProcessor",singleton:!0};convertNodeToVdom(t,e,n,s){if("#text"===t.nodeName){const n=t.value.trim();if(!n)return null;return{vtype:"text",text:n.replace(a,(t,n)=>{const s=e[parseInt(n,10)];return Neo.isObject(s)?JSON.stringify(s):s})}}if(t.nodeName&&t.sourceCodeLocation?.startTag){const r={},c=t.tagName;if(c.startsWith("neotag")){const t=parseInt(c.replace("neotag",""),10);r.module=e[t]}else{const{startTag:e}=t.sourceCodeLocation,s=n.substring(e.startOffset,e.endOffset).match(l)[1];if(s[0]===s[0].toUpperCase()){const t=Neo.ns(s,!1);if(!t)throw new Error(`Could not resolve component tag <${s}> from global namespace.`);r.module=t}else r.tag=s}return t.attrs?.forEach(t=>{const n=t.value.match(o);if(n){const o=parseInt(n[1],10),a=s[o]||t.name;r[a]=e[o]}else r[t.name]=t.value.replace(a,(t,n)=>e[parseInt(n,10)])}),t.childNodes?.length>0&&(r.cn=t.childNodes.map(t=>this.convertNodeToVdom(t,e,n,s)).filter(Boolean),1===r.cn.length&&"text"===r.cn[0].vtype&&(r.text=r.cn[0].text,delete r.cn)),r}return null}convertAstToVdom(t,e,n,s){if(!t.childNodes||t.childNodes.length<1)return{};const o=t.childNodes.map(t=>this.convertNodeToVdom(t,e,n,s)).filter(Boolean);return 1===o.length?o[0]:{cn:o}}flattenTemplate(t){let n="";const o=[],a={};for(let l=0;l<t.strings.length;l++){let c=t.strings[l];if(n+=c,l<t.values.length){const i=t.values[l],m=c.match(s);if(i instanceof _html_mjs__WEBPACK_IMPORTED_MODULE_1__.HtmlTemplate){const t=this.flattenTemplate(i);n+=t.flatString.replace(r,(e,n,s)=>{const r=parseInt(s,10),l=r+o.length;return t.attributeNameMap[r]&&(a[l]=t.attributeNameMap[r]),`${n}${l}`}),o.push(...t.flatValues)}else!1!==i&&null!=i&&(t.strings[l].trim().endsWith("<")||t.strings[l].trim().endsWith("</")?n+=`neotag${o.length}`:n+=`__DYNAMIC_VALUE_${o.length}__`,o.push(i),m&&(a[o.length-1]=m[1]))}}return{flatString:n,flatValues:o,attributeNameMap:a}}process(t,e){const{flatString:s,flatValues:o,attributeNameMap:a}=this.flattenTemplate(t),r=s.replace(c,"<$1$2></$1>"),l=Object(function webpackMissingModule() { var e = new Error("Cannot find module '../../../dist/parse5.mjs'"); e.code = 'MODULE_NOT_FOUND'; throw e; }())(r,{sourceCodeLocationInfo:!0}),i=this.convertAstToVdom(l,o,r,a);e.continueUpdateWithVdom(i)}}));

/***/ }

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2h1bmtzL2FwcC9kaXN0X2VzbV9zcmNfZnVuY3Rpb25hbF91dGlsX0h0bWxUZW1wbGF0ZVByb2Nlc3Nvcl9tanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUErSCx1TUFBdU0saUVBQWUsNkJBQTZCLDBEQUFDLENBQUMsZUFBZSxvRUFBb0UsMkJBQTJCLHlCQUF5Qix1QkFBdUIsa0JBQWtCLE9BQU8sc0NBQXNDLDBCQUEwQiwyQ0FBMkMsR0FBRywrQ0FBK0MsVUFBVSxhQUFhLDJCQUEyQiw0Q0FBNEMsY0FBYyxLQUFLLE1BQU0sV0FBVywyRUFBMkUsOEJBQThCLHFCQUFxQiwwREFBMEQsRUFBRSwyQkFBMkIsV0FBVyxhQUFhLDRCQUE0Qix5QkFBeUIsTUFBTSx5Q0FBeUMsVUFBVSwyREFBMkQsbUxBQW1MLFlBQVksMEJBQTBCLGlEQUFpRCw2RUFBNkUsMEJBQTBCLE1BQU0sbUJBQW1CLFNBQVMsZ0JBQWdCLFlBQVksbUJBQW1CLEtBQUssbUJBQW1CLDJCQUEyQixpQ0FBaUMsZ0JBQWdCLG1EQUFDLEVBQUUsZ0NBQWdDLG9DQUFvQyxvQ0FBb0MsOERBQThELEVBQUUsRUFBRSxFQUFFLEVBQUUsMEJBQTBCLHdHQUF3RyxTQUFTLHdCQUF3QixTQUFTLHdDQUF3QyxPQUFPLDhDQUE4QyxhQUFhLE1BQU0sNkNBQTZDLHdEQUF3RCx1SkFBZSxJQUFJLDBCQUEwQixtQ0FBbUMsNkJBQTZCLENBQUMsRSIsInNvdXJjZXMiOlsid2VicGFjazovL25lby5tanMvLi9kaXN0L2VzbS9zcmMvZnVuY3Rpb25hbC91dGlsL0h0bWxUZW1wbGF0ZVByb2Nlc3Nvci5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHQgZnJvbVwiLi4vLi4vLi4vc3JjL2NvcmUvQmFzZS5tanNcIjtpbXBvcnR7SHRtbFRlbXBsYXRlIGFzIGV9ZnJvbVwiLi9odG1sLm1qc1wiO2ltcG9ydCphcyBuIGZyb21cIi4uLy4uLy4uL2Rpc3QvcGFyc2U1Lm1qc1wiO2NvbnN0IHM9L1xccysoW2EtekEtWl1bXj1dKilcXHMqPVxccypcIj8kLyxvPS9eX19EWU5BTUlDX1ZBTFVFXyhcXGQrKV9fJC8sYT0vX19EWU5BTUlDX1ZBTFVFXyhcXGQrKV9fL2cscj0vKF9fRFlOQU1JQ19WQUxVRV98bmVvdGFnKShcXGQrKS9nLGw9LzwoW1xcd1xcLl0rKS8sYz0vPCgoPzpbQS1aXVtcXHdcXC5dKil8KD86bmVvdGFnXFxkKykpKFtePl0qPylcXC8+L2c7ZXhwb3J0IGRlZmF1bHQgTmVvLnNldHVwQ2xhc3MoY2xhc3MgZXh0ZW5kcyB0e3N0YXRpYyBjb25maWc9e2NsYXNzTmFtZTpcIk5lby5mdW5jdGlvbmFsLnV0aWwuSHRtbFRlbXBsYXRlUHJvY2Vzc29yXCIsc2luZ2xldG9uOiEwfTtjb252ZXJ0Tm9kZVRvVmRvbSh0LGUsbixzKXtpZihcIiN0ZXh0XCI9PT10Lm5vZGVOYW1lKXtjb25zdCBuPXQudmFsdWUudHJpbSgpO2lmKCFuKXJldHVybiBudWxsO3JldHVybnt2dHlwZTpcInRleHRcIix0ZXh0Om4ucmVwbGFjZShhLCh0LG4pPT57Y29uc3Qgcz1lW3BhcnNlSW50KG4sMTApXTtyZXR1cm4gTmVvLmlzT2JqZWN0KHMpP0pTT04uc3RyaW5naWZ5KHMpOnN9KX19aWYodC5ub2RlTmFtZSYmdC5zb3VyY2VDb2RlTG9jYXRpb24/LnN0YXJ0VGFnKXtjb25zdCByPXt9LGM9dC50YWdOYW1lO2lmKGMuc3RhcnRzV2l0aChcIm5lb3RhZ1wiKSl7Y29uc3QgdD1wYXJzZUludChjLnJlcGxhY2UoXCJuZW90YWdcIixcIlwiKSwxMCk7ci5tb2R1bGU9ZVt0XX1lbHNle2NvbnN0e3N0YXJ0VGFnOmV9PXQuc291cmNlQ29kZUxvY2F0aW9uLHM9bi5zdWJzdHJpbmcoZS5zdGFydE9mZnNldCxlLmVuZE9mZnNldCkubWF0Y2gobClbMV07aWYoc1swXT09PXNbMF0udG9VcHBlckNhc2UoKSl7Y29uc3QgdD1OZW8ubnMocywhMSk7aWYoIXQpdGhyb3cgbmV3IEVycm9yKGBDb3VsZCBub3QgcmVzb2x2ZSBjb21wb25lbnQgdGFnIDwke3N9PiBmcm9tIGdsb2JhbCBuYW1lc3BhY2UuYCk7ci5tb2R1bGU9dH1lbHNlIHIudGFnPXN9cmV0dXJuIHQuYXR0cnM/LmZvckVhY2godD0+e2NvbnN0IG49dC52YWx1ZS5tYXRjaChvKTtpZihuKXtjb25zdCBvPXBhcnNlSW50KG5bMV0sMTApLGE9c1tvXXx8dC5uYW1lO3JbYV09ZVtvXX1lbHNlIHJbdC5uYW1lXT10LnZhbHVlLnJlcGxhY2UoYSwodCxuKT0+ZVtwYXJzZUludChuLDEwKV0pfSksdC5jaGlsZE5vZGVzPy5sZW5ndGg+MCYmKHIuY249dC5jaGlsZE5vZGVzLm1hcCh0PT50aGlzLmNvbnZlcnROb2RlVG9WZG9tKHQsZSxuLHMpKS5maWx0ZXIoQm9vbGVhbiksMT09PXIuY24ubGVuZ3RoJiZcInRleHRcIj09PXIuY25bMF0udnR5cGUmJihyLnRleHQ9ci5jblswXS50ZXh0LGRlbGV0ZSByLmNuKSkscn1yZXR1cm4gbnVsbH1jb252ZXJ0QXN0VG9WZG9tKHQsZSxuLHMpe2lmKCF0LmNoaWxkTm9kZXN8fHQuY2hpbGROb2Rlcy5sZW5ndGg8MSlyZXR1cm57fTtjb25zdCBvPXQuY2hpbGROb2Rlcy5tYXAodD0+dGhpcy5jb252ZXJ0Tm9kZVRvVmRvbSh0LGUsbixzKSkuZmlsdGVyKEJvb2xlYW4pO3JldHVybiAxPT09by5sZW5ndGg/b1swXTp7Y246b319ZmxhdHRlblRlbXBsYXRlKHQpe2xldCBuPVwiXCI7Y29uc3Qgbz1bXSxhPXt9O2ZvcihsZXQgbD0wO2w8dC5zdHJpbmdzLmxlbmd0aDtsKyspe2xldCBjPXQuc3RyaW5nc1tsXTtpZihuKz1jLGw8dC52YWx1ZXMubGVuZ3RoKXtjb25zdCBpPXQudmFsdWVzW2xdLG09Yy5tYXRjaChzKTtpZihpIGluc3RhbmNlb2YgZSl7Y29uc3QgdD10aGlzLmZsYXR0ZW5UZW1wbGF0ZShpKTtuKz10LmZsYXRTdHJpbmcucmVwbGFjZShyLChlLG4scyk9Pntjb25zdCByPXBhcnNlSW50KHMsMTApLGw9citvLmxlbmd0aDtyZXR1cm4gdC5hdHRyaWJ1dGVOYW1lTWFwW3JdJiYoYVtsXT10LmF0dHJpYnV0ZU5hbWVNYXBbcl0pLGAke259JHtsfWB9KSxvLnB1c2goLi4udC5mbGF0VmFsdWVzKX1lbHNlITEhPT1pJiZudWxsIT1pJiYodC5zdHJpbmdzW2xdLnRyaW0oKS5lbmRzV2l0aChcIjxcIil8fHQuc3RyaW5nc1tsXS50cmltKCkuZW5kc1dpdGgoXCI8L1wiKT9uKz1gbmVvdGFnJHtvLmxlbmd0aH1gOm4rPWBfX0RZTkFNSUNfVkFMVUVfJHtvLmxlbmd0aH1fX2Asby5wdXNoKGkpLG0mJihhW28ubGVuZ3RoLTFdPW1bMV0pKX19cmV0dXJue2ZsYXRTdHJpbmc6bixmbGF0VmFsdWVzOm8sYXR0cmlidXRlTmFtZU1hcDphfX1wcm9jZXNzKHQsZSl7Y29uc3R7ZmxhdFN0cmluZzpzLGZsYXRWYWx1ZXM6byxhdHRyaWJ1dGVOYW1lTWFwOmF9PXRoaXMuZmxhdHRlblRlbXBsYXRlKHQpLHI9cy5yZXBsYWNlKGMsXCI8JDEkMj48LyQxPlwiKSxsPW4ucGFyc2VGcmFnbWVudChyLHtzb3VyY2VDb2RlTG9jYXRpb25JbmZvOiEwfSksaT10aGlzLmNvbnZlcnRBc3RUb1Zkb20obCxvLHIsYSk7ZS5jb250aW51ZVVwZGF0ZVdpdGhWZG9tKGkpfX0pOyJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=