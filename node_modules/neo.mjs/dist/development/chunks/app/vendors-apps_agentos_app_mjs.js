export const __webpack_esm_id__ = "vendors-apps_agentos_app_mjs";
export const __webpack_esm_ids__ = ["vendors-apps_agentos_app_mjs"];
export const __webpack_esm_modules__ = {

/***/ "./apps/agentos/app.mjs"
/*!******************************!*\
  !*** ./apps/agentos/app.mjs ***!
  \******************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   onStart: () => (/* binding */ onStart)
/* harmony export */ });
/* harmony import */ var _view_Viewport_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./view/Viewport.mjs */ "./apps/agentos/view/Viewport.mjs");


const onStart = () => Neo.app({
    mainView: _view_Viewport_mjs__WEBPACK_IMPORTED_MODULE_0__["default"],
    name    : 'AgentOS'
});

/***/ },

/***/ "./apps/agentos/model/Intervention.mjs"
/*!*********************************************!*\
  !*** ./apps/agentos/model/Intervention.mjs ***!
  \*********************************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _src_data_Model_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../src/data/Model.mjs */ "./src/data/Model.mjs");


/**
 * @class AgentOS.model.Intervention
 * @extends Neo.data.Model
 */
class Intervention extends _src_data_Model_mjs__WEBPACK_IMPORTED_MODULE_0__["default"] {
    static config = {
        /**
         * @member {String} className='AgentOS.model.Intervention'
         * @protected
         */
        className: 'AgentOS.model.Intervention',
        /**
         * @member {Object[]} fields
         */
        fields: [{
            name: 'id',
            type: 'String'
        }, {
            name: 'timestamp',
            type: 'Date'
        }, {
            name: 'message',
            type: 'String'
        }, {
            name: 'priority',
            type: 'String' // 'normal', 'warning', 'error'
        }]
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(Intervention));


/***/ },

/***/ "./apps/agentos/store/Interventions.mjs"
/*!**********************************************!*\
  !*** ./apps/agentos/store/Interventions.mjs ***!
  \**********************************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _model_Intervention_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../model/Intervention.mjs */ "./apps/agentos/model/Intervention.mjs");
/* harmony import */ var _src_data_Store_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../src/data/Store.mjs */ "./src/data/Store.mjs");



/**
 * @class AgentOS.store.Interventions
 * @extends Neo.data.Store
 */
class Interventions extends _src_data_Store_mjs__WEBPACK_IMPORTED_MODULE_1__["default"] {
    static config = {
        /**
         * @member {String} className='AgentOS.store.Interventions'
         * @protected
         */
        className: 'AgentOS.store.Interventions',
        /**
         * @member {Boolean} autoLoad=true
         */
        autoLoad: true,
        /**
         * @member {Neo.data.Model} model=InterventionModel
         * @reactive
         */
        model: _model_Intervention_mjs__WEBPACK_IMPORTED_MODULE_0__["default"],
        /**
         * @member {String} url=Neo.config.basePath + 'apps/agentos/resources/data/interventions.json'
         */
        url: Neo.config.basePath + 'apps/agentos/resources/data/interventions.json'
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(Interventions));


/***/ },

/***/ "./apps/agentos/view/Blackboard.mjs"
/*!******************************************!*\
  !*** ./apps/agentos/view/Blackboard.mjs ***!
  \******************************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _src_component_Canvas_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../src/component/Canvas.mjs */ "./src/component/Canvas.mjs");


/**
 * @class AgentOS.view.Blackboard
 * @extends Neo.component.Canvas
 */
class Blackboard extends _src_component_Canvas_mjs__WEBPACK_IMPORTED_MODULE_0__["default"] {
    static config = {
        /**
         * @member {String} className='AgentOS.view.Blackboard'
         * @protected
         */
        className: 'AgentOS.view.Blackboard',
        /**
         * @member {Object} _vdom
         */
        _vdom:
        {tag: 'div', cls: ['neo-blackboard-wrapper'], style: {width: '100%', height: '100%'}, cn: [
            {tag: 'canvas', style: {width: '100%', height: '100%'}}
        ]}
    }

    /**
     * Triggered after the id config got changed
     * @param {String} value
     * @param {String} oldValue
     */
    afterSetId(value, oldValue) {
        let me = this;
        me.vdom.cn[0].id = `${value}__canvas`;
        super.afterSetId(value, oldValue)
    }

    /**
     * Triggered after the offscreenRegistered config got changed
     * @param {Boolean} value
     * @param {Boolean} oldValue
     * @protected
     */
    async afterSetOffscreenRegistered(value, oldValue) {
        if (value) {
            let me = this;

            // Direct Remote Method Access call
            // The namespace AgentOS.canvas.Blackboard is auto-generated in this worker
            // by the RemoteMethodAccess mixin when the Canvas worker registers it.
            await AgentOS.canvas.Blackboard.initGraph({canvasId: me.getCanvasId(), windowId: me.windowId});

            await me.updateSize()
        }
    }

    /**
     * Override to return the inner canvas ID
     */
    getCanvasId() {
        return this.vdom.cn[0].id;
    }

    /**
     * @param {Object} data
     */
    onDomResize(data) {
        super.onDomResize(data);
        this.updateSize(data.contentRect)
    }

    /**
     * Pass new graph data to the worker
     * @param {Object} data {nodes, links}
     */
    async setData(data) {
        await AgentOS.canvas.Blackboard.updateGraphData(data);
    }

    async updateSize(rect) {
        let me = this;

        if (!rect || rect.width === 0 || rect.height === 0) {
            rect = await me.waitForDomRect({id: me.getCanvasId()})
        }

        await AgentOS.canvas.Blackboard.updateSize({width: rect.width, height: rect.height})
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(Blackboard));


/***/ },

/***/ "./apps/agentos/view/InterventionPanel.mjs"
/*!*************************************************!*\
  !*** ./apps/agentos/view/InterventionPanel.mjs ***!
  \*************************************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _src_dashboard_Panel_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../src/dashboard/Panel.mjs */ "./src/dashboard/Panel.mjs");
/* harmony import */ var _src_grid_Container_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../src/grid/Container.mjs */ "./src/grid/Container.mjs");
/* harmony import */ var _store_Interventions_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../store/Interventions.mjs */ "./apps/agentos/store/Interventions.mjs");




/**
 * @class AgentOS.view.InterventionPanel
 * @extends Neo.dashboard.Panel
 */
class InterventionPanel extends _src_dashboard_Panel_mjs__WEBPACK_IMPORTED_MODULE_0__["default"] {
    static config = {
        /**
         * @member {String} className='AgentOS.view.InterventionPanel'
         * @protected
         */
        className: 'AgentOS.view.InterventionPanel',
        /**
         * @member {String} ntype='intervention-panel'
         * @protected
         */
        ntype: 'intervention-panel',
        /**
         * @member {String[]} cls=['agent-panel-intervention']
         * @reactive
         */
        cls: ['agent-panel-intervention'],
        /**
         * @member {Object} layout={ntype: 'fit'}
         * @reactive
         */
        layout: {ntype: 'fit'},
        /**
         * @member {Function|String|null} popupUrl='apps/agentos/childapps/widget/index.html'
         */
        popupUrl: 'apps/agentos/childapps/widget/index.html',
        /**
         * @member {Object[]} headers
         */
        headers: [{
            dock: 'top',
            cls : ['neo-draggable'],
            text: 'Intervention'
        }],
        /**
         * @member {Object[]} items
         */
        items: [{
            module : _src_grid_Container_mjs__WEBPACK_IMPORTED_MODULE_1__["default"],
            store  : _store_Interventions_mjs__WEBPACK_IMPORTED_MODULE_2__["default"],
            columns: [{
                dataField: 'timestamp',
                text     : 'Time',
                width    : 100,
                renderer : ({value}) => {
                    if (!value) return '';
                    return `[${new Intl.DateTimeFormat('default', {
                        hour  : '2-digit',
                        minute: '2-digit',
                        second: '2-digit',
                        hour12: false
                    }).format(value)}]`;
                }
            }, {
                dataField: 'message',
                text     : 'Message',
                flex     : 1
            }, {
                dataField: 'priority',
                text     : 'Priority',
                width    : 100,
                renderer : ({value}) => {
                    return {
                        cls : ['agent-priority', `agent-priority-${value}`],
                        text: value
                    };
                }
            }]
        }]
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(InterventionPanel));


/***/ },

/***/ "./apps/agentos/view/StrategyCardPanel.mjs"
/*!*************************************************!*\
  !*** ./apps/agentos/view/StrategyCardPanel.mjs ***!
  \*************************************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _src_dashboard_Panel_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../src/dashboard/Panel.mjs */ "./src/dashboard/Panel.mjs");


/**
 * @class AgentOS.view.StrategyCardPanel
 * @extends Neo.dashboard.Panel
 */
class StrategyCardPanel extends _src_dashboard_Panel_mjs__WEBPACK_IMPORTED_MODULE_0__["default"] {
    static config = {
        /**
         * @member {String} className='AgentOS.view.StrategyCardPanel'
         * @protected
         */
        className: 'AgentOS.view.StrategyCardPanel',
        /**
         * @member {String[]} baseCls=['agent-kpi-card-panel','neo-panel','neo-container']
         * @reactive
         */
        baseCls: ['agent-kpi-card-panel', 'neo-panel', 'neo-container'],
        /**
         * @member {Object[]} headers
         * @reactive
         */
        headers: [{
            cls : ['neo-panel-header', 'neo-draggable'],
            dock: 'top'
        }],
        /**
         * @member {String|null} title_=null
         * @reactive
         */
        title_: null,
        /**
         * @member {String|null} value_=null
         * @reactive
         */
        value_: null,
        /**
         * @member {Object[]} items
         */
        items: [{
            ntype    : 'component',
            cls      : ['agent-kpi-card'],
            reference: 'body-component',
            vdom     : {cn: [{cls: 'agent-kpi-value'}]}
        }]
    }

    /**
     * Triggered after the title config got changed
     * @param {String|null} value
     * @param {String|null} oldValue
     * @protected
     */
    afterSetTitle(value, oldValue) {
        this.headers[0].text = value
    }

    /**
     * Triggered after the value config got changed
     * @param {String|null} value
     * @param {String|null} oldValue
     * @protected
     */
    afterSetValue(value, oldValue) {
        let bodyComponent = this.getItem('body-component');

        bodyComponent.vdom.cn[0].text = value;
        bodyComponent.update?.() // Only available after construction
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(StrategyCardPanel));


/***/ },

/***/ "./apps/agentos/view/StrategyPanel.mjs"
/*!*********************************************!*\
  !*** ./apps/agentos/view/StrategyPanel.mjs ***!
  \*********************************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _src_dashboard_Container_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../src/dashboard/Container.mjs */ "./src/dashboard/Container.mjs");
/* harmony import */ var _src_dashboard_Panel_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../src/dashboard/Panel.mjs */ "./src/dashboard/Panel.mjs");
/* harmony import */ var _StrategyCardPanel_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./StrategyCardPanel.mjs */ "./apps/agentos/view/StrategyCardPanel.mjs");
/* harmony import */ var _StrategyPanelController_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./StrategyPanelController.mjs */ "./apps/agentos/view/StrategyPanelController.mjs");





/**
 * @class AgentOS.view.StrategyPanel
 * @extends Neo.dashboard.Panel
 */
class StrategyPanel extends _src_dashboard_Panel_mjs__WEBPACK_IMPORTED_MODULE_1__["default"] {
    static config = {
        /**
         * @member {String} className='AgentOS.view.StrategyPanel'
         * @protected
         */
        className: 'AgentOS.view.StrategyPanel',
        /**
         * @member {String[]} cls=['agent-panel-strategy']
         * @reactive
         */
        cls: ['agent-panel-strategy'],
        /**
         * @member {Neo.controller.Component} controller=StrategyPanelController
         * @reactive
         */
        controller: _StrategyPanelController_mjs__WEBPACK_IMPORTED_MODULE_3__["default"],
        /**
         * @member {Number} flex=1
         */
        flex: 1,
        /**
         * @member {Object[]} headers
         */
        headers: [{
            dock: 'top',
            cls : ['neo-draggable'],
            text: 'Strategy Dashboard'
        }],
        /**
         * @member {Object} layout='fit'
         * @reactive
         */
        layout: 'fit',
        /**
         * @member {Function|String|null} popupUrl='apps/agentos/childapps/widget/index.html'
         */
        popupUrl: 'apps/agentos/childapps/widget/index.html',
        /**
         * @member {Object[]} items
         */
        items: [{
            module           : _src_dashboard_Container_mjs__WEBPACK_IMPORTED_MODULE_0__["default"],
            cls              : ['agent-kpi-dashboard'],
            dragProxyExtraCls: ['agent-panel-strategy', 'neo-panel'], // Ensure styles carry over to popup proxy
            layout           : {ntype: 'hbox', align: 'stretch'},
            popupUrl         : 'apps/agentos/childapps/strategy/index.html',

            itemDefaults: {
                module: _StrategyCardPanel_mjs__WEBPACK_IMPORTED_MODULE_2__["default"],
                flex  : 1
            },

            items: [{
                cls      : ['velocity'],
                reference: 'kpi-velocity',
                title    : 'Velocity',
                value    : '85%'
            }, {
                cls      : ['active-epics'],
                reference: 'kpi-active-epics',
                title    : 'Active Epics',
                value    : '12'
            }, {
                cls      : ['uptime'],
                reference: 'kpi-uptime',
                title    : 'Uptime',
                value    : '98.5%'
            }]
        }]
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(StrategyPanel));


/***/ },

/***/ "./apps/agentos/view/StrategyPanelController.mjs"
/*!*******************************************************!*\
  !*** ./apps/agentos/view/StrategyPanelController.mjs ***!
  \*******************************************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _src_controller_Component_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../src/controller/Component.mjs */ "./src/controller/Component.mjs");


/**
 * @class AgentOS.view.StrategyPanelController
 * @extends Neo.controller.Component
 */
class StrategyPanelController extends _src_controller_Component_mjs__WEBPACK_IMPORTED_MODULE_0__["default"] {
    static config = {
        className: 'AgentOS.view.StrategyPanelController'
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(StrategyPanelController));


/***/ },

/***/ "./apps/agentos/view/Viewport.mjs"
/*!****************************************!*\
  !*** ./apps/agentos/view/Viewport.mjs ***!
  \****************************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _src_container_Viewport_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../src/container/Viewport.mjs */ "./src/container/Viewport.mjs");
/* harmony import */ var _src_dashboard_Container_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../src/dashboard/Container.mjs */ "./src/dashboard/Container.mjs");
/* harmony import */ var _src_container_Panel_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../src/container/Panel.mjs */ "./src/container/Panel.mjs");
/* harmony import */ var _Blackboard_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Blackboard.mjs */ "./apps/agentos/view/Blackboard.mjs");
/* harmony import */ var _InterventionPanel_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./InterventionPanel.mjs */ "./apps/agentos/view/InterventionPanel.mjs");
/* harmony import */ var _StrategyPanel_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./StrategyPanel.mjs */ "./apps/agentos/view/StrategyPanel.mjs");
/* harmony import */ var _ViewportController_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./ViewportController.mjs */ "./apps/agentos/view/ViewportController.mjs");








/**
 * @class AgentOS.view.Viewport
 * @extends Neo.container.Viewport
 */
class Viewport extends _src_container_Viewport_mjs__WEBPACK_IMPORTED_MODULE_0__["default"] {
    static config = {
        /**
         * @member {String} className='AgentOS.view.Viewport'
         * @protected
         */
        className: 'AgentOS.view.Viewport',
        /**
         * @member {String[]} cls=['agent-os-viewport']
         * @reactive
         */
        cls: ['agent-os-viewport'],
        /**
         * @member {Neo.controller.Component} controller=ViewportController
         * @reactive
         */
        controller: _ViewportController_mjs__WEBPACK_IMPORTED_MODULE_6__["default"],
        /**
         * @member {Object} layout={ntype:'vbox',align:'stretch'}
         * @reactive
         */
        layout: {ntype: 'vbox', align: 'stretch'},
        /**
         * @member {Object[]} items
         */
        items: [{
            ntype: 'toolbar',
            cls  : ['agent-top-toolbar'],
            flex : 'none',
            items: [{
                ntype: 'component',
                cls  : ['agent-logo'],
                html : '<img src="../../resources/images/logo/neo_logo_cyberpunk.svg" alt="Neo.mjs Logo">'
            }, {
                ntype: 'label',
                text : 'Agent OS Command Center'
            }, '->', {
                ntype  : 'button',
                cls    : ['agent-button'],
                iconCls: 'fa fa-window-restore',
                text   : 'Detach Swarm View',
                handler: 'onOpenSwarmClick'
            }]
        }, {
            module           : _src_dashboard_Container_mjs__WEBPACK_IMPORTED_MODULE_1__["default"],
            dragProxyExtraCls: ['agent-os-viewport', 'neo-viewport'],
            flex             : 1,
            popupUrl         : 'apps/agentos/childapps/widget/index.html',
            reference        : 'dashboard',
            sortGroup        : 'neo-connected-dashboard',
            cls              : ['agent-dashboard'],
            style            : {margin: '20px'},

            items: [{
                module   : _StrategyPanel_mjs__WEBPACK_IMPORTED_MODULE_5__["default"],
                flex     : 2,
                reference: 'strategy'
            }, {
                module   : _src_container_Panel_mjs__WEBPACK_IMPORTED_MODULE_2__["default"],
                cls      : ['agent-panel-swarm'],
                flex     : 5,
                popupUrl : 'apps/agentos/childapps/swarm/index.html',
                reference: 'swarm',
                headers  : [{
                    dock: 'top',
                    cls : ['neo-draggable'],
                    text: 'Swarm View'
                }],
                items    : [{
                    module   : _Blackboard_mjs__WEBPACK_IMPORTED_MODULE_3__["default"],
                    style    : {
                        backgroundColor: '#000',
                        height         : '100%',
                        width          : '100%'
                    }
                }]
            }, {
                module   : _InterventionPanel_mjs__WEBPACK_IMPORTED_MODULE_4__["default"],
                flex     : 3,
                reference: 'intervention'
            }]
        }]
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(Viewport));


/***/ },

/***/ "./apps/agentos/view/ViewportController.mjs"
/*!**************************************************!*\
  !*** ./apps/agentos/view/ViewportController.mjs ***!
  \**************************************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _src_controller_Component_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../src/controller/Component.mjs */ "./src/controller/Component.mjs");


/**
 * @class AgentOS.view.ViewportController
 * @extends Neo.controller.Component
 */
class ViewportController extends _src_controller_Component_mjs__WEBPACK_IMPORTED_MODULE_0__["default"] {
    static config = {
        className: 'AgentOS.view.ViewportController'
    }

    /**
     * @param {Object} data
     */
    async onOpenSwarmClick(data) {
        let name                    = 'swarm',
            {config, windowConfigs} = Neo,
            {environment}           = config,
            firstWindowId           = Object.keys(windowConfigs)[0],
            {basePath}              = windowConfigs[firstWindowId],
            url;

        if (environment !== 'development') {
            basePath = `${basePath + environment}/`
        }

        url = `${basePath}apps/agentos/childapps/swarm/index.html?name=${name}`;

        await Neo.Main.windowOpen({
            url,
            windowId      : this.windowId,
            windowName    : name,
            windowFeatures: 'height=600,width=800,left=50,top=50'
        });
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(ViewportController));


/***/ },

/***/ "./src/component/Canvas.mjs"
/*!**********************************!*\
  !*** ./src/component/Canvas.mjs ***!
  \**********************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _Base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Base.mjs */ "./src/component/Base.mjs");


/**
 * @class Neo.component.Canvas
 * @extends Neo.component.Base
 */
class Canvas extends _Base_mjs__WEBPACK_IMPORTED_MODULE_0__["default"] {
    static config = {
        /**
         * @member {String} className='Neo.component.Canvas'
         * @protected
         */
        className: 'Neo.component.Canvas',
        /**
         * @member {String} ntype='canvas'
         * @protected
         */
        ntype: 'canvas',
        /**
         * true applies a main.addon.ResizeObserver and fires a custom resize event
         * which other instances can subscribe to.
         * @member {Boolean} monitorSize_=true
         * @reactive
         */
        monitorSize_: true,
        /**
         * @member {Boolean} offscreen=true
         */
        offscreen: true,
        /**
         * Only applicable if offscreen === true.
         * true once the ownership of the canvas node got transferred to worker.Canvas.
         * @member {Boolean} offscreenRegistered_=false
         * @reactive
         */
        offscreenRegistered_: false,
        /**
         * @member {Object} _vdom={tag: 'canvas'}
         */
        _vdom:
        {tag: 'canvas'}
    }

    /**
     * Triggered after the mounted config got changed
     * @param {Boolean} value
     * @param {Boolean} oldValue
     * @protected
     */
    async afterSetMounted(value, oldValue) {
        super.afterSetMounted(value, oldValue);

        let me                    = this,
            id                    = me.getCanvasId(),
            {offscreen, windowId} = me;

        if (value) {
            await me.timeout(30); // next rAF tick

            if (me.monitorSize) {
                me.addDomListeners([{
                    delegate: `#${me.getCanvasId()}`,
                    resize  : me.onDomResize,
                    scope   : me
                }])
            }

            if (offscreen) {
                let data,
                    delay = 50;

                while (me.mounted && !me.offscreenRegistered && !me.isDestroyed) {
                    data = await Neo.main.DomAccess.getOffscreenCanvas({
                        nodeId: id,
                        windowId
                    });

                    if (data.offscreen) {
                        await Neo.worker.Canvas.registerCanvas({
                            node  : data.offscreen,
                            nodeId: id,
                            windowId
                        }, [data.offscreen]);

                        me.offscreenRegistered = true;
                        break
                    } else if (data.transferred) {
                        if (Neo.config.useSharedWorkers) {
                            let retrieveData = await Neo.worker.Canvas.retrieveCanvas({
                                nodeId: id,
                                windowId
                            });

                            if (retrieveData.hasCanvas) {
                                me.offscreenRegistered = true;
                                break
                            }
                        }
                    }

                    await me.timeout(delay);

                    if (delay < 1000) {
                        delay *= 2
                    }
                }
            }
        } else if (offscreen) {
            me.offscreenRegistered = false
        }
    }


    /**
     * Triggered after the windowId config got changed
     * @param {String|null} value
     * @param {String|null} oldValue
     * @protected
     */
    afterSetWindowId(value, oldValue) {
        super.afterSetWindowId(value, oldValue);

        if (oldValue) {
            this.offscreenRegistered = false
        }
    }

    /**
     * Override this method when using wrappers (e.g. D3)
     * @returns {String}
     */
    getCanvasId() {
        return this.id
    }

    /**
     * @param {Object} data
     */
    onDomResize(data) {
        this.fire('resize', data)
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(Canvas));


/***/ }

};

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2h1bmtzL2FwcC92ZW5kb3JzLWFwcHNfYWdlbnRvc19hcHBfbWpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUEyQzs7QUFFcEM7QUFDUCxjQUFjLDBEQUFRO0FBQ3RCO0FBQ0EsQ0FBQyxFOzs7Ozs7Ozs7Ozs7Ozs7QUNMK0M7O0FBRWhEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLDJEQUFLO0FBQ2hDO0FBQ0E7QUFDQSxvQkFBb0IsUUFBUTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixVQUFVO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUEsaUVBQWUsNEJBQTRCLEVBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDaENjO0FBQ0U7O0FBRTVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLDJEQUFLO0FBQ2pDO0FBQ0E7QUFDQSxvQkFBb0IsUUFBUTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixTQUFTO0FBQzdCO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixnQkFBZ0I7QUFDcEM7QUFDQTtBQUNBLGVBQWUsK0RBQWlCO0FBQ2hDO0FBQ0Esb0JBQW9CLFFBQVE7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsaUVBQWUsNkJBQTZCLEVBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7QUM5QlU7O0FBRXZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLGlFQUFNO0FBQy9CO0FBQ0E7QUFDQSxvQkFBb0IsUUFBUTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixRQUFRO0FBQzVCO0FBQ0E7QUFDQSxTQUFTLHFEQUFxRCw4QkFBOEI7QUFDNUYsYUFBYSx1QkFBdUI7QUFDcEM7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FB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QkFBb0IsU0FBUztBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixTQUFTO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsU0FBUztBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixRQUFRLE9BQU87QUFDbkM7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxTQUFTO0FBQ3hCLGVBQWUsU0FBUztBQUN4QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYSxxQkFBcUI7O0FBRWxDO0FBQ0Esa0NBQWtDOztBQUVsQztBQUNBO0FBQ0Esa0NBQWtDLGlCQUFpQjtBQUNuRDtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjs7QUFFckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qjs7QUFFekI7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qjs7QUFFN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0EsZUFBZSxhQUFhO0FBQzVCLGVBQWUsYUFBYTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsaUVBQWUsc0JBQXNCLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZW8ubWpzLy4vYXBwcy9hZ2VudG9zL2FwcC5tanMiLCJ3ZWJwYWNrOi8vbmVvLm1qcy8uL2FwcHMvYWdlbnRvcy9tb2RlbC9JbnRlcnZlbnRpb24ubWpzIiwid2VicGFjazovL25lby5tanMvLi9hcHBzL2FnZW50b3Mvc3RvcmUvSW50ZXJ2ZW50aW9ucy5tanMiLCJ3ZWJwYWNrOi8vbmVvLm1qcy8uL2FwcHMvYWdlbnRvcy92aWV3L0JsYWNrYm9hcmQubWpzIiwid2VicGFjazovL25lby5tanMvLi9hcHBzL2FnZW50b3Mvdmlldy9JbnRlcnZlbnRpb25QYW5lbC5tanMiLCJ3ZWJwYWNrOi8vbmVvLm1qcy8uL2FwcHMvYWdlbnRvcy92aWV3L1N0cmF0ZWd5Q2FyZFBhbmVsLm1qcyIsIndlYnBhY2s6Ly9uZW8ubWpzLy4vYXBwcy9hZ2VudG9zL3ZpZXcvU3RyYXRlZ3lQYW5lbC5tanMiLCJ3ZWJwYWNrOi8vbmVvLm1qcy8uL2FwcHMvYWdlbnRvcy92aWV3L1N0cmF0ZWd5UGFuZWxDb250cm9sbGVyLm1qcyIsIndlYnBhY2s6Ly9uZW8ubWpzLy4vYXBwcy9hZ2VudG9zL3ZpZXcvVmlld3BvcnQubWpzIiwid2VicGFjazovL25lby5tanMvLi9hcHBzL2FnZW50b3Mvdmlldy9WaWV3cG9ydENvbnRyb2xsZXIubWpzIiwid2VicGFjazovL25lby5tanMvLi9zcmMvY29tcG9uZW50L0NhbnZhcy5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFZpZXdwb3J0IGZyb20gJy4vdmlldy9WaWV3cG9ydC5tanMnO1xuXG5leHBvcnQgY29uc3Qgb25TdGFydCA9ICgpID0+IE5lby5hcHAoe1xuICAgIG1haW5WaWV3OiBWaWV3cG9ydCxcbiAgICBuYW1lICAgIDogJ0FnZW50T1MnXG59KTsiLCJpbXBvcnQgTW9kZWwgZnJvbSAnLi4vLi4vLi4vc3JjL2RhdGEvTW9kZWwubWpzJztcblxuLyoqXG4gKiBAY2xhc3MgQWdlbnRPUy5tb2RlbC5JbnRlcnZlbnRpb25cbiAqIEBleHRlbmRzIE5lby5kYXRhLk1vZGVsXG4gKi9cbmNsYXNzIEludGVydmVudGlvbiBleHRlbmRzIE1vZGVsIHtcbiAgICBzdGF0aWMgY29uZmlnID0ge1xuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfSBjbGFzc05hbWU9J0FnZW50T1MubW9kZWwuSW50ZXJ2ZW50aW9uJ1xuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICBjbGFzc05hbWU6ICdBZ2VudE9TLm1vZGVsLkludGVydmVudGlvbicsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtPYmplY3RbXX0gZmllbGRzXG4gICAgICAgICAqL1xuICAgICAgICBmaWVsZHM6IFt7XG4gICAgICAgICAgICBuYW1lOiAnaWQnLFxuICAgICAgICAgICAgdHlwZTogJ1N0cmluZydcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgbmFtZTogJ3RpbWVzdGFtcCcsXG4gICAgICAgICAgICB0eXBlOiAnRGF0ZSdcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgbmFtZTogJ21lc3NhZ2UnLFxuICAgICAgICAgICAgdHlwZTogJ1N0cmluZydcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgbmFtZTogJ3ByaW9yaXR5JyxcbiAgICAgICAgICAgIHR5cGU6ICdTdHJpbmcnIC8vICdub3JtYWwnLCAnd2FybmluZycsICdlcnJvcidcbiAgICAgICAgfV1cbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IE5lby5zZXR1cENsYXNzKEludGVydmVudGlvbik7XG4iLCJpbXBvcnQgSW50ZXJ2ZW50aW9uTW9kZWwgZnJvbSAnLi4vbW9kZWwvSW50ZXJ2ZW50aW9uLm1qcyc7XG5pbXBvcnQgU3RvcmUgICAgICAgICAgICAgZnJvbSAnLi4vLi4vLi4vc3JjL2RhdGEvU3RvcmUubWpzJztcblxuLyoqXG4gKiBAY2xhc3MgQWdlbnRPUy5zdG9yZS5JbnRlcnZlbnRpb25zXG4gKiBAZXh0ZW5kcyBOZW8uZGF0YS5TdG9yZVxuICovXG5jbGFzcyBJbnRlcnZlbnRpb25zIGV4dGVuZHMgU3RvcmUge1xuICAgIHN0YXRpYyBjb25maWcgPSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtTdHJpbmd9IGNsYXNzTmFtZT0nQWdlbnRPUy5zdG9yZS5JbnRlcnZlbnRpb25zJ1xuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICBjbGFzc05hbWU6ICdBZ2VudE9TLnN0b3JlLkludGVydmVudGlvbnMnLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7Qm9vbGVhbn0gYXV0b0xvYWQ9dHJ1ZVxuICAgICAgICAgKi9cbiAgICAgICAgYXV0b0xvYWQ6IHRydWUsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtOZW8uZGF0YS5Nb2RlbH0gbW9kZWw9SW50ZXJ2ZW50aW9uTW9kZWxcbiAgICAgICAgICogQHJlYWN0aXZlXG4gICAgICAgICAqL1xuICAgICAgICBtb2RlbDogSW50ZXJ2ZW50aW9uTW9kZWwsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtTdHJpbmd9IHVybD1OZW8uY29uZmlnLmJhc2VQYXRoICsgJ2FwcHMvYWdlbnRvcy9yZXNvdXJjZXMvZGF0YS9pbnRlcnZlbnRpb25zLmpzb24nXG4gICAgICAgICAqL1xuICAgICAgICB1cmw6IE5lby5jb25maWcuYmFzZVBhdGggKyAnYXBwcy9hZ2VudG9zL3Jlc291cmNlcy9kYXRhL2ludGVydmVudGlvbnMuanNvbidcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IE5lby5zZXR1cENsYXNzKEludGVydmVudGlvbnMpO1xuIiwiaW1wb3J0IENhbnZhcyBmcm9tICcuLi8uLi8uLi9zcmMvY29tcG9uZW50L0NhbnZhcy5tanMnO1xuXG4vKipcbiAqIEBjbGFzcyBBZ2VudE9TLnZpZXcuQmxhY2tib2FyZFxuICogQGV4dGVuZHMgTmVvLmNvbXBvbmVudC5DYW52YXNcbiAqL1xuY2xhc3MgQmxhY2tib2FyZCBleHRlbmRzIENhbnZhcyB7XG4gICAgc3RhdGljIGNvbmZpZyA9IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ30gY2xhc3NOYW1lPSdBZ2VudE9TLnZpZXcuQmxhY2tib2FyZCdcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgY2xhc3NOYW1lOiAnQWdlbnRPUy52aWV3LkJsYWNrYm9hcmQnLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7T2JqZWN0fSBfdmRvbVxuICAgICAgICAgKi9cbiAgICAgICAgX3Zkb206XG4gICAgICAgIHt0YWc6ICdkaXYnLCBjbHM6IFsnbmVvLWJsYWNrYm9hcmQtd3JhcHBlciddLCBzdHlsZToge3dpZHRoOiAnMTAwJScsIGhlaWdodDogJzEwMCUnfSwgY246IFtcbiAgICAgICAgICAgIHt0YWc6ICdjYW52YXMnLCBzdHlsZToge3dpZHRoOiAnMTAwJScsIGhlaWdodDogJzEwMCUnfX1cbiAgICAgICAgXX1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgYWZ0ZXIgdGhlIGlkIGNvbmZpZyBnb3QgY2hhbmdlZFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBvbGRWYWx1ZVxuICAgICAqL1xuICAgIGFmdGVyU2V0SWQodmFsdWUsIG9sZFZhbHVlKSB7XG4gICAgICAgIGxldCBtZSA9IHRoaXM7XG4gICAgICAgIG1lLnZkb20uY25bMF0uaWQgPSBgJHt2YWx1ZX1fX2NhbnZhc2A7XG4gICAgICAgIHN1cGVyLmFmdGVyU2V0SWQodmFsdWUsIG9sZFZhbHVlKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCBhZnRlciB0aGUgb2Zmc2NyZWVuUmVnaXN0ZXJlZCBjb25maWcgZ290IGNoYW5nZWRcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IHZhbHVlXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBvbGRWYWx1ZVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBhc3luYyBhZnRlclNldE9mZnNjcmVlblJlZ2lzdGVyZWQodmFsdWUsIG9sZFZhbHVlKSB7XG4gICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgbGV0IG1lID0gdGhpcztcblxuICAgICAgICAgICAgLy8gRGlyZWN0IFJlbW90ZSBNZXRob2QgQWNjZXNzIGNhbGxcbiAgICAgICAgICAgIC8vIFRoZSBuYW1lc3BhY2UgQWdlbnRPUy5jYW52YXMuQmxhY2tib2FyZCBpcyBhdXRvLWdlbmVyYXRlZCBpbiB0aGlzIHdvcmtlclxuICAgICAgICAgICAgLy8gYnkgdGhlIFJlbW90ZU1ldGhvZEFjY2VzcyBtaXhpbiB3aGVuIHRoZSBDYW52YXMgd29ya2VyIHJlZ2lzdGVycyBpdC5cbiAgICAgICAgICAgIGF3YWl0IEFnZW50T1MuY2FudmFzLkJsYWNrYm9hcmQuaW5pdEdyYXBoKHtjYW52YXNJZDogbWUuZ2V0Q2FudmFzSWQoKSwgd2luZG93SWQ6IG1lLndpbmRvd0lkfSk7XG5cbiAgICAgICAgICAgIGF3YWl0IG1lLnVwZGF0ZVNpemUoKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogT3ZlcnJpZGUgdG8gcmV0dXJuIHRoZSBpbm5lciBjYW52YXMgSURcbiAgICAgKi9cbiAgICBnZXRDYW52YXNJZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmRvbS5jblswXS5pZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YVxuICAgICAqL1xuICAgIG9uRG9tUmVzaXplKGRhdGEpIHtcbiAgICAgICAgc3VwZXIub25Eb21SZXNpemUoZGF0YSk7XG4gICAgICAgIHRoaXMudXBkYXRlU2l6ZShkYXRhLmNvbnRlbnRSZWN0KVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBhc3MgbmV3IGdyYXBoIGRhdGEgdG8gdGhlIHdvcmtlclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhIHtub2RlcywgbGlua3N9XG4gICAgICovXG4gICAgYXN5bmMgc2V0RGF0YShkYXRhKSB7XG4gICAgICAgIGF3YWl0IEFnZW50T1MuY2FudmFzLkJsYWNrYm9hcmQudXBkYXRlR3JhcGhEYXRhKGRhdGEpO1xuICAgIH1cblxuICAgIGFzeW5jIHVwZGF0ZVNpemUocmVjdCkge1xuICAgICAgICBsZXQgbWUgPSB0aGlzO1xuXG4gICAgICAgIGlmICghcmVjdCB8fCByZWN0LndpZHRoID09PSAwIHx8IHJlY3QuaGVpZ2h0ID09PSAwKSB7XG4gICAgICAgICAgICByZWN0ID0gYXdhaXQgbWUud2FpdEZvckRvbVJlY3Qoe2lkOiBtZS5nZXRDYW52YXNJZCgpfSlcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IEFnZW50T1MuY2FudmFzLkJsYWNrYm9hcmQudXBkYXRlU2l6ZSh7d2lkdGg6IHJlY3Qud2lkdGgsIGhlaWdodDogcmVjdC5oZWlnaHR9KVxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTmVvLnNldHVwQ2xhc3MoQmxhY2tib2FyZCk7XG4iLCJpbXBvcnQgRGFzaGJvYXJkUGFuZWwgZnJvbSAnLi4vLi4vLi4vc3JjL2Rhc2hib2FyZC9QYW5lbC5tanMnO1xuaW1wb3J0IEdyaWRDb250YWluZXIgIGZyb20gJy4uLy4uLy4uL3NyYy9ncmlkL0NvbnRhaW5lci5tanMnO1xuaW1wb3J0IEludGVydmVudGlvbnMgIGZyb20gJy4uL3N0b3JlL0ludGVydmVudGlvbnMubWpzJztcblxuLyoqXG4gKiBAY2xhc3MgQWdlbnRPUy52aWV3LkludGVydmVudGlvblBhbmVsXG4gKiBAZXh0ZW5kcyBOZW8uZGFzaGJvYXJkLlBhbmVsXG4gKi9cbmNsYXNzIEludGVydmVudGlvblBhbmVsIGV4dGVuZHMgRGFzaGJvYXJkUGFuZWwge1xuICAgIHN0YXRpYyBjb25maWcgPSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtTdHJpbmd9IGNsYXNzTmFtZT0nQWdlbnRPUy52aWV3LkludGVydmVudGlvblBhbmVsJ1xuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICBjbGFzc05hbWU6ICdBZ2VudE9TLnZpZXcuSW50ZXJ2ZW50aW9uUGFuZWwnLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfSBudHlwZT0naW50ZXJ2ZW50aW9uLXBhbmVsJ1xuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICBudHlwZTogJ2ludGVydmVudGlvbi1wYW5lbCcsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtTdHJpbmdbXX0gY2xzPVsnYWdlbnQtcGFuZWwtaW50ZXJ2ZW50aW9uJ11cbiAgICAgICAgICogQHJlYWN0aXZlXG4gICAgICAgICAqL1xuICAgICAgICBjbHM6IFsnYWdlbnQtcGFuZWwtaW50ZXJ2ZW50aW9uJ10sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtPYmplY3R9IGxheW91dD17bnR5cGU6ICdmaXQnfVxuICAgICAgICAgKiBAcmVhY3RpdmVcbiAgICAgICAgICovXG4gICAgICAgIGxheW91dDoge250eXBlOiAnZml0J30sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtGdW5jdGlvbnxTdHJpbmd8bnVsbH0gcG9wdXBVcmw9J2FwcHMvYWdlbnRvcy9jaGlsZGFwcHMvd2lkZ2V0L2luZGV4Lmh0bWwnXG4gICAgICAgICAqL1xuICAgICAgICBwb3B1cFVybDogJ2FwcHMvYWdlbnRvcy9jaGlsZGFwcHMvd2lkZ2V0L2luZGV4Lmh0bWwnLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7T2JqZWN0W119IGhlYWRlcnNcbiAgICAgICAgICovXG4gICAgICAgIGhlYWRlcnM6IFt7XG4gICAgICAgICAgICBkb2NrOiAndG9wJyxcbiAgICAgICAgICAgIGNscyA6IFsnbmVvLWRyYWdnYWJsZSddLFxuICAgICAgICAgICAgdGV4dDogJ0ludGVydmVudGlvbidcbiAgICAgICAgfV0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtPYmplY3RbXX0gaXRlbXNcbiAgICAgICAgICovXG4gICAgICAgIGl0ZW1zOiBbe1xuICAgICAgICAgICAgbW9kdWxlIDogR3JpZENvbnRhaW5lcixcbiAgICAgICAgICAgIHN0b3JlICA6IEludGVydmVudGlvbnMsXG4gICAgICAgICAgICBjb2x1bW5zOiBbe1xuICAgICAgICAgICAgICAgIGRhdGFGaWVsZDogJ3RpbWVzdGFtcCcsXG4gICAgICAgICAgICAgICAgdGV4dCAgICAgOiAnVGltZScsXG4gICAgICAgICAgICAgICAgd2lkdGggICAgOiAxMDAsXG4gICAgICAgICAgICAgICAgcmVuZGVyZXIgOiAoe3ZhbHVlfSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXZhbHVlKSByZXR1cm4gJyc7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBgWyR7bmV3IEludGwuRGF0ZVRpbWVGb3JtYXQoJ2RlZmF1bHQnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBob3VyICA6ICcyLWRpZ2l0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbnV0ZTogJzItZGlnaXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2Vjb25kOiAnMi1kaWdpdCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBob3VyMTI6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIH0pLmZvcm1hdCh2YWx1ZSl9XWA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIGRhdGFGaWVsZDogJ21lc3NhZ2UnLFxuICAgICAgICAgICAgICAgIHRleHQgICAgIDogJ01lc3NhZ2UnLFxuICAgICAgICAgICAgICAgIGZsZXggICAgIDogMVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIGRhdGFGaWVsZDogJ3ByaW9yaXR5JyxcbiAgICAgICAgICAgICAgICB0ZXh0ICAgICA6ICdQcmlvcml0eScsXG4gICAgICAgICAgICAgICAgd2lkdGggICAgOiAxMDAsXG4gICAgICAgICAgICAgICAgcmVuZGVyZXIgOiAoe3ZhbHVlfSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xzIDogWydhZ2VudC1wcmlvcml0eScsIGBhZ2VudC1wcmlvcml0eS0ke3ZhbHVlfWBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogdmFsdWVcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XVxuICAgICAgICB9XVxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTmVvLnNldHVwQ2xhc3MoSW50ZXJ2ZW50aW9uUGFuZWwpO1xuIiwiaW1wb3J0IERhc2hib2FyZFBhbmVsIGZyb20gJy4uLy4uLy4uL3NyYy9kYXNoYm9hcmQvUGFuZWwubWpzJztcblxuLyoqXG4gKiBAY2xhc3MgQWdlbnRPUy52aWV3LlN0cmF0ZWd5Q2FyZFBhbmVsXG4gKiBAZXh0ZW5kcyBOZW8uZGFzaGJvYXJkLlBhbmVsXG4gKi9cbmNsYXNzIFN0cmF0ZWd5Q2FyZFBhbmVsIGV4dGVuZHMgRGFzaGJvYXJkUGFuZWwge1xuICAgIHN0YXRpYyBjb25maWcgPSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtTdHJpbmd9IGNsYXNzTmFtZT0nQWdlbnRPUy52aWV3LlN0cmF0ZWd5Q2FyZFBhbmVsJ1xuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICBjbGFzc05hbWU6ICdBZ2VudE9TLnZpZXcuU3RyYXRlZ3lDYXJkUGFuZWwnLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nW119IGJhc2VDbHM9WydhZ2VudC1rcGktY2FyZC1wYW5lbCcsJ25lby1wYW5lbCcsJ25lby1jb250YWluZXInXVxuICAgICAgICAgKiBAcmVhY3RpdmVcbiAgICAgICAgICovXG4gICAgICAgIGJhc2VDbHM6IFsnYWdlbnQta3BpLWNhcmQtcGFuZWwnLCAnbmVvLXBhbmVsJywgJ25lby1jb250YWluZXInXSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge09iamVjdFtdfSBoZWFkZXJzXG4gICAgICAgICAqIEByZWFjdGl2ZVxuICAgICAgICAgKi9cbiAgICAgICAgaGVhZGVyczogW3tcbiAgICAgICAgICAgIGNscyA6IFsnbmVvLXBhbmVsLWhlYWRlcicsICduZW8tZHJhZ2dhYmxlJ10sXG4gICAgICAgICAgICBkb2NrOiAndG9wJ1xuICAgICAgICB9XSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ3xudWxsfSB0aXRsZV89bnVsbFxuICAgICAgICAgKiBAcmVhY3RpdmVcbiAgICAgICAgICovXG4gICAgICAgIHRpdGxlXzogbnVsbCxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ3xudWxsfSB2YWx1ZV89bnVsbFxuICAgICAgICAgKiBAcmVhY3RpdmVcbiAgICAgICAgICovXG4gICAgICAgIHZhbHVlXzogbnVsbCxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge09iamVjdFtdfSBpdGVtc1xuICAgICAgICAgKi9cbiAgICAgICAgaXRlbXM6IFt7XG4gICAgICAgICAgICBudHlwZSAgICA6ICdjb21wb25lbnQnLFxuICAgICAgICAgICAgY2xzICAgICAgOiBbJ2FnZW50LWtwaS1jYXJkJ10sXG4gICAgICAgICAgICByZWZlcmVuY2U6ICdib2R5LWNvbXBvbmVudCcsXG4gICAgICAgICAgICB2ZG9tICAgICA6IHtjbjogW3tjbHM6ICdhZ2VudC1rcGktdmFsdWUnfV19XG4gICAgICAgIH1dXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIGFmdGVyIHRoZSB0aXRsZSBjb25maWcgZ290IGNoYW5nZWRcbiAgICAgKiBAcGFyYW0ge1N0cmluZ3xudWxsfSB2YWx1ZVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfG51bGx9IG9sZFZhbHVlXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIGFmdGVyU2V0VGl0bGUodmFsdWUsIG9sZFZhbHVlKSB7XG4gICAgICAgIHRoaXMuaGVhZGVyc1swXS50ZXh0ID0gdmFsdWVcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgYWZ0ZXIgdGhlIHZhbHVlIGNvbmZpZyBnb3QgY2hhbmdlZFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfG51bGx9IHZhbHVlXG4gICAgICogQHBhcmFtIHtTdHJpbmd8bnVsbH0gb2xkVmFsdWVcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgYWZ0ZXJTZXRWYWx1ZSh2YWx1ZSwgb2xkVmFsdWUpIHtcbiAgICAgICAgbGV0IGJvZHlDb21wb25lbnQgPSB0aGlzLmdldEl0ZW0oJ2JvZHktY29tcG9uZW50Jyk7XG5cbiAgICAgICAgYm9keUNvbXBvbmVudC52ZG9tLmNuWzBdLnRleHQgPSB2YWx1ZTtcbiAgICAgICAgYm9keUNvbXBvbmVudC51cGRhdGU/LigpIC8vIE9ubHkgYXZhaWxhYmxlIGFmdGVyIGNvbnN0cnVjdGlvblxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTmVvLnNldHVwQ2xhc3MoU3RyYXRlZ3lDYXJkUGFuZWwpO1xuIiwiaW1wb3J0IERhc2hib2FyZCAgICAgICAgICAgICAgIGZyb20gJy4uLy4uLy4uL3NyYy9kYXNoYm9hcmQvQ29udGFpbmVyLm1qcyc7XG5pbXBvcnQgRGFzaGJvYXJkUGFuZWwgICAgICAgICAgZnJvbSAnLi4vLi4vLi4vc3JjL2Rhc2hib2FyZC9QYW5lbC5tanMnO1xuaW1wb3J0IFN0cmF0ZWd5Q2FyZFBhbmVsICAgICAgIGZyb20gJy4vU3RyYXRlZ3lDYXJkUGFuZWwubWpzJztcbmltcG9ydCBTdHJhdGVneVBhbmVsQ29udHJvbGxlciBmcm9tICcuL1N0cmF0ZWd5UGFuZWxDb250cm9sbGVyLm1qcyc7XG5cbi8qKlxuICogQGNsYXNzIEFnZW50T1Mudmlldy5TdHJhdGVneVBhbmVsXG4gKiBAZXh0ZW5kcyBOZW8uZGFzaGJvYXJkLlBhbmVsXG4gKi9cbmNsYXNzIFN0cmF0ZWd5UGFuZWwgZXh0ZW5kcyBEYXNoYm9hcmRQYW5lbCB7XG4gICAgc3RhdGljIGNvbmZpZyA9IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ30gY2xhc3NOYW1lPSdBZ2VudE9TLnZpZXcuU3RyYXRlZ3lQYW5lbCdcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgY2xhc3NOYW1lOiAnQWdlbnRPUy52aWV3LlN0cmF0ZWd5UGFuZWwnLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nW119IGNscz1bJ2FnZW50LXBhbmVsLXN0cmF0ZWd5J11cbiAgICAgICAgICogQHJlYWN0aXZlXG4gICAgICAgICAqL1xuICAgICAgICBjbHM6IFsnYWdlbnQtcGFuZWwtc3RyYXRlZ3knXSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge05lby5jb250cm9sbGVyLkNvbXBvbmVudH0gY29udHJvbGxlcj1TdHJhdGVneVBhbmVsQ29udHJvbGxlclxuICAgICAgICAgKiBAcmVhY3RpdmVcbiAgICAgICAgICovXG4gICAgICAgIGNvbnRyb2xsZXI6IFN0cmF0ZWd5UGFuZWxDb250cm9sbGVyLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7TnVtYmVyfSBmbGV4PTFcbiAgICAgICAgICovXG4gICAgICAgIGZsZXg6IDEsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtPYmplY3RbXX0gaGVhZGVyc1xuICAgICAgICAgKi9cbiAgICAgICAgaGVhZGVyczogW3tcbiAgICAgICAgICAgIGRvY2s6ICd0b3AnLFxuICAgICAgICAgICAgY2xzIDogWyduZW8tZHJhZ2dhYmxlJ10sXG4gICAgICAgICAgICB0ZXh0OiAnU3RyYXRlZ3kgRGFzaGJvYXJkJ1xuICAgICAgICB9XSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge09iamVjdH0gbGF5b3V0PSdmaXQnXG4gICAgICAgICAqIEByZWFjdGl2ZVxuICAgICAgICAgKi9cbiAgICAgICAgbGF5b3V0OiAnZml0JyxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge0Z1bmN0aW9ufFN0cmluZ3xudWxsfSBwb3B1cFVybD0nYXBwcy9hZ2VudG9zL2NoaWxkYXBwcy93aWRnZXQvaW5kZXguaHRtbCdcbiAgICAgICAgICovXG4gICAgICAgIHBvcHVwVXJsOiAnYXBwcy9hZ2VudG9zL2NoaWxkYXBwcy93aWRnZXQvaW5kZXguaHRtbCcsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtPYmplY3RbXX0gaXRlbXNcbiAgICAgICAgICovXG4gICAgICAgIGl0ZW1zOiBbe1xuICAgICAgICAgICAgbW9kdWxlICAgICAgICAgICA6IERhc2hib2FyZCxcbiAgICAgICAgICAgIGNscyAgICAgICAgICAgICAgOiBbJ2FnZW50LWtwaS1kYXNoYm9hcmQnXSxcbiAgICAgICAgICAgIGRyYWdQcm94eUV4dHJhQ2xzOiBbJ2FnZW50LXBhbmVsLXN0cmF0ZWd5JywgJ25lby1wYW5lbCddLCAvLyBFbnN1cmUgc3R5bGVzIGNhcnJ5IG92ZXIgdG8gcG9wdXAgcHJveHlcbiAgICAgICAgICAgIGxheW91dCAgICAgICAgICAgOiB7bnR5cGU6ICdoYm94JywgYWxpZ246ICdzdHJldGNoJ30sXG4gICAgICAgICAgICBwb3B1cFVybCAgICAgICAgIDogJ2FwcHMvYWdlbnRvcy9jaGlsZGFwcHMvc3RyYXRlZ3kvaW5kZXguaHRtbCcsXG5cbiAgICAgICAgICAgIGl0ZW1EZWZhdWx0czoge1xuICAgICAgICAgICAgICAgIG1vZHVsZTogU3RyYXRlZ3lDYXJkUGFuZWwsXG4gICAgICAgICAgICAgICAgZmxleCAgOiAxXG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBpdGVtczogW3tcbiAgICAgICAgICAgICAgICBjbHMgICAgICA6IFsndmVsb2NpdHknXSxcbiAgICAgICAgICAgICAgICByZWZlcmVuY2U6ICdrcGktdmVsb2NpdHknLFxuICAgICAgICAgICAgICAgIHRpdGxlICAgIDogJ1ZlbG9jaXR5JyxcbiAgICAgICAgICAgICAgICB2YWx1ZSAgICA6ICc4NSUnXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgY2xzICAgICAgOiBbJ2FjdGl2ZS1lcGljcyddLFxuICAgICAgICAgICAgICAgIHJlZmVyZW5jZTogJ2twaS1hY3RpdmUtZXBpY3MnLFxuICAgICAgICAgICAgICAgIHRpdGxlICAgIDogJ0FjdGl2ZSBFcGljcycsXG4gICAgICAgICAgICAgICAgdmFsdWUgICAgOiAnMTInXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgY2xzICAgICAgOiBbJ3VwdGltZSddLFxuICAgICAgICAgICAgICAgIHJlZmVyZW5jZTogJ2twaS11cHRpbWUnLFxuICAgICAgICAgICAgICAgIHRpdGxlICAgIDogJ1VwdGltZScsXG4gICAgICAgICAgICAgICAgdmFsdWUgICAgOiAnOTguNSUnXG4gICAgICAgICAgICB9XVxuICAgICAgICB9XVxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTmVvLnNldHVwQ2xhc3MoU3RyYXRlZ3lQYW5lbCk7XG4iLCJpbXBvcnQgQ29udHJvbGxlciBmcm9tICcuLi8uLi8uLi9zcmMvY29udHJvbGxlci9Db21wb25lbnQubWpzJztcblxuLyoqXG4gKiBAY2xhc3MgQWdlbnRPUy52aWV3LlN0cmF0ZWd5UGFuZWxDb250cm9sbGVyXG4gKiBAZXh0ZW5kcyBOZW8uY29udHJvbGxlci5Db21wb25lbnRcbiAqL1xuY2xhc3MgU3RyYXRlZ3lQYW5lbENvbnRyb2xsZXIgZXh0ZW5kcyBDb250cm9sbGVyIHtcbiAgICBzdGF0aWMgY29uZmlnID0ge1xuICAgICAgICBjbGFzc05hbWU6ICdBZ2VudE9TLnZpZXcuU3RyYXRlZ3lQYW5lbENvbnRyb2xsZXInXG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBOZW8uc2V0dXBDbGFzcyhTdHJhdGVneVBhbmVsQ29udHJvbGxlcik7XG4iLCJpbXBvcnQgQmFzZVZpZXdwb3J0ICAgICAgIGZyb20gJy4uLy4uLy4uL3NyYy9jb250YWluZXIvVmlld3BvcnQubWpzJztcbmltcG9ydCBEYXNoYm9hcmQgICAgICAgICAgZnJvbSAnLi4vLi4vLi4vc3JjL2Rhc2hib2FyZC9Db250YWluZXIubWpzJztcbmltcG9ydCBQYW5lbCAgICAgICAgICAgICAgZnJvbSAnLi4vLi4vLi4vc3JjL2NvbnRhaW5lci9QYW5lbC5tanMnO1xuaW1wb3J0IEJsYWNrYm9hcmQgICAgICAgICBmcm9tICcuL0JsYWNrYm9hcmQubWpzJztcbmltcG9ydCBJbnRlcnZlbnRpb25QYW5lbCAgZnJvbSAnLi9JbnRlcnZlbnRpb25QYW5lbC5tanMnO1xuaW1wb3J0IFN0cmF0ZWd5UGFuZWwgICAgICBmcm9tICcuL1N0cmF0ZWd5UGFuZWwubWpzJztcbmltcG9ydCBWaWV3cG9ydENvbnRyb2xsZXIgZnJvbSAnLi9WaWV3cG9ydENvbnRyb2xsZXIubWpzJztcblxuLyoqXG4gKiBAY2xhc3MgQWdlbnRPUy52aWV3LlZpZXdwb3J0XG4gKiBAZXh0ZW5kcyBOZW8uY29udGFpbmVyLlZpZXdwb3J0XG4gKi9cbmNsYXNzIFZpZXdwb3J0IGV4dGVuZHMgQmFzZVZpZXdwb3J0IHtcbiAgICBzdGF0aWMgY29uZmlnID0ge1xuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfSBjbGFzc05hbWU9J0FnZW50T1Mudmlldy5WaWV3cG9ydCdcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgY2xhc3NOYW1lOiAnQWdlbnRPUy52aWV3LlZpZXdwb3J0JyxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ1tdfSBjbHM9WydhZ2VudC1vcy12aWV3cG9ydCddXG4gICAgICAgICAqIEByZWFjdGl2ZVxuICAgICAgICAgKi9cbiAgICAgICAgY2xzOiBbJ2FnZW50LW9zLXZpZXdwb3J0J10sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtOZW8uY29udHJvbGxlci5Db21wb25lbnR9IGNvbnRyb2xsZXI9Vmlld3BvcnRDb250cm9sbGVyXG4gICAgICAgICAqIEByZWFjdGl2ZVxuICAgICAgICAgKi9cbiAgICAgICAgY29udHJvbGxlcjogVmlld3BvcnRDb250cm9sbGVyLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7T2JqZWN0fSBsYXlvdXQ9e250eXBlOid2Ym94JyxhbGlnbjonc3RyZXRjaCd9XG4gICAgICAgICAqIEByZWFjdGl2ZVxuICAgICAgICAgKi9cbiAgICAgICAgbGF5b3V0OiB7bnR5cGU6ICd2Ym94JywgYWxpZ246ICdzdHJldGNoJ30sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtPYmplY3RbXX0gaXRlbXNcbiAgICAgICAgICovXG4gICAgICAgIGl0ZW1zOiBbe1xuICAgICAgICAgICAgbnR5cGU6ICd0b29sYmFyJyxcbiAgICAgICAgICAgIGNscyAgOiBbJ2FnZW50LXRvcC10b29sYmFyJ10sXG4gICAgICAgICAgICBmbGV4IDogJ25vbmUnLFxuICAgICAgICAgICAgaXRlbXM6IFt7XG4gICAgICAgICAgICAgICAgbnR5cGU6ICdjb21wb25lbnQnLFxuICAgICAgICAgICAgICAgIGNscyAgOiBbJ2FnZW50LWxvZ28nXSxcbiAgICAgICAgICAgICAgICBodG1sIDogJzxpbWcgc3JjPVwiLi4vLi4vcmVzb3VyY2VzL2ltYWdlcy9sb2dvL25lb19sb2dvX2N5YmVycHVuay5zdmdcIiBhbHQ9XCJOZW8ubWpzIExvZ29cIj4nXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgbnR5cGU6ICdsYWJlbCcsXG4gICAgICAgICAgICAgICAgdGV4dCA6ICdBZ2VudCBPUyBDb21tYW5kIENlbnRlcidcbiAgICAgICAgICAgIH0sICctPicsIHtcbiAgICAgICAgICAgICAgICBudHlwZSAgOiAnYnV0dG9uJyxcbiAgICAgICAgICAgICAgICBjbHMgICAgOiBbJ2FnZW50LWJ1dHRvbiddLFxuICAgICAgICAgICAgICAgIGljb25DbHM6ICdmYSBmYS13aW5kb3ctcmVzdG9yZScsXG4gICAgICAgICAgICAgICAgdGV4dCAgIDogJ0RldGFjaCBTd2FybSBWaWV3JyxcbiAgICAgICAgICAgICAgICBoYW5kbGVyOiAnb25PcGVuU3dhcm1DbGljaydcbiAgICAgICAgICAgIH1dXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG1vZHVsZSAgICAgICAgICAgOiBEYXNoYm9hcmQsXG4gICAgICAgICAgICBkcmFnUHJveHlFeHRyYUNsczogWydhZ2VudC1vcy12aWV3cG9ydCcsICduZW8tdmlld3BvcnQnXSxcbiAgICAgICAgICAgIGZsZXggICAgICAgICAgICAgOiAxLFxuICAgICAgICAgICAgcG9wdXBVcmwgICAgICAgICA6ICdhcHBzL2FnZW50b3MvY2hpbGRhcHBzL3dpZGdldC9pbmRleC5odG1sJyxcbiAgICAgICAgICAgIHJlZmVyZW5jZSAgICAgICAgOiAnZGFzaGJvYXJkJyxcbiAgICAgICAgICAgIHNvcnRHcm91cCAgICAgICAgOiAnbmVvLWNvbm5lY3RlZC1kYXNoYm9hcmQnLFxuICAgICAgICAgICAgY2xzICAgICAgICAgICAgICA6IFsnYWdlbnQtZGFzaGJvYXJkJ10sXG4gICAgICAgICAgICBzdHlsZSAgICAgICAgICAgIDoge21hcmdpbjogJzIwcHgnfSxcblxuICAgICAgICAgICAgaXRlbXM6IFt7XG4gICAgICAgICAgICAgICAgbW9kdWxlICAgOiBTdHJhdGVneVBhbmVsLFxuICAgICAgICAgICAgICAgIGZsZXggICAgIDogMixcbiAgICAgICAgICAgICAgICByZWZlcmVuY2U6ICdzdHJhdGVneSdcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBtb2R1bGUgICA6IFBhbmVsLFxuICAgICAgICAgICAgICAgIGNscyAgICAgIDogWydhZ2VudC1wYW5lbC1zd2FybSddLFxuICAgICAgICAgICAgICAgIGZsZXggICAgIDogNSxcbiAgICAgICAgICAgICAgICBwb3B1cFVybCA6ICdhcHBzL2FnZW50b3MvY2hpbGRhcHBzL3N3YXJtL2luZGV4Lmh0bWwnLFxuICAgICAgICAgICAgICAgIHJlZmVyZW5jZTogJ3N3YXJtJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzICA6IFt7XG4gICAgICAgICAgICAgICAgICAgIGRvY2s6ICd0b3AnLFxuICAgICAgICAgICAgICAgICAgICBjbHMgOiBbJ25lby1kcmFnZ2FibGUnXSxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogJ1N3YXJtIFZpZXcnXG4gICAgICAgICAgICAgICAgfV0sXG4gICAgICAgICAgICAgICAgaXRlbXMgICAgOiBbe1xuICAgICAgICAgICAgICAgICAgICBtb2R1bGUgICA6IEJsYWNrYm9hcmQsXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlICAgIDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnIzAwMCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQgICAgICAgICA6ICcxMDAlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoICAgICAgICAgIDogJzEwMCUnXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIG1vZHVsZSAgIDogSW50ZXJ2ZW50aW9uUGFuZWwsXG4gICAgICAgICAgICAgICAgZmxleCAgICAgOiAzLFxuICAgICAgICAgICAgICAgIHJlZmVyZW5jZTogJ2ludGVydmVudGlvbidcbiAgICAgICAgICAgIH1dXG4gICAgICAgIH1dXG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBOZW8uc2V0dXBDbGFzcyhWaWV3cG9ydCk7XG4iLCJpbXBvcnQgQ29udHJvbGxlciBmcm9tICcuLi8uLi8uLi9zcmMvY29udHJvbGxlci9Db21wb25lbnQubWpzJztcblxuLyoqXG4gKiBAY2xhc3MgQWdlbnRPUy52aWV3LlZpZXdwb3J0Q29udHJvbGxlclxuICogQGV4dGVuZHMgTmVvLmNvbnRyb2xsZXIuQ29tcG9uZW50XG4gKi9cbmNsYXNzIFZpZXdwb3J0Q29udHJvbGxlciBleHRlbmRzIENvbnRyb2xsZXIge1xuICAgIHN0YXRpYyBjb25maWcgPSB7XG4gICAgICAgIGNsYXNzTmFtZTogJ0FnZW50T1Mudmlldy5WaWV3cG9ydENvbnRyb2xsZXInXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGFcbiAgICAgKi9cbiAgICBhc3luYyBvbk9wZW5Td2FybUNsaWNrKGRhdGEpIHtcbiAgICAgICAgbGV0IG5hbWUgICAgICAgICAgICAgICAgICAgID0gJ3N3YXJtJyxcbiAgICAgICAgICAgIHtjb25maWcsIHdpbmRvd0NvbmZpZ3N9ID0gTmVvLFxuICAgICAgICAgICAge2Vudmlyb25tZW50fSAgICAgICAgICAgPSBjb25maWcsXG4gICAgICAgICAgICBmaXJzdFdpbmRvd0lkICAgICAgICAgICA9IE9iamVjdC5rZXlzKHdpbmRvd0NvbmZpZ3MpWzBdLFxuICAgICAgICAgICAge2Jhc2VQYXRofSAgICAgICAgICAgICAgPSB3aW5kb3dDb25maWdzW2ZpcnN0V2luZG93SWRdLFxuICAgICAgICAgICAgdXJsO1xuXG4gICAgICAgIGlmIChlbnZpcm9ubWVudCAhPT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgICAgICAgYmFzZVBhdGggPSBgJHtiYXNlUGF0aCArIGVudmlyb25tZW50fS9gXG4gICAgICAgIH1cblxuICAgICAgICB1cmwgPSBgJHtiYXNlUGF0aH1hcHBzL2FnZW50b3MvY2hpbGRhcHBzL3N3YXJtL2luZGV4Lmh0bWw/bmFtZT0ke25hbWV9YDtcblxuICAgICAgICBhd2FpdCBOZW8uTWFpbi53aW5kb3dPcGVuKHtcbiAgICAgICAgICAgIHVybCxcbiAgICAgICAgICAgIHdpbmRvd0lkICAgICAgOiB0aGlzLndpbmRvd0lkLFxuICAgICAgICAgICAgd2luZG93TmFtZSAgICA6IG5hbWUsXG4gICAgICAgICAgICB3aW5kb3dGZWF0dXJlczogJ2hlaWdodD02MDAsd2lkdGg9ODAwLGxlZnQ9NTAsdG9wPTUwJ1xuICAgICAgICB9KTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IE5lby5zZXR1cENsYXNzKFZpZXdwb3J0Q29udHJvbGxlcik7XG4iLCJpbXBvcnQgQ29tcG9uZW50IGZyb20gJy4vQmFzZS5tanMnO1xuXG4vKipcbiAqIEBjbGFzcyBOZW8uY29tcG9uZW50LkNhbnZhc1xuICogQGV4dGVuZHMgTmVvLmNvbXBvbmVudC5CYXNlXG4gKi9cbmNsYXNzIENhbnZhcyBleHRlbmRzIENvbXBvbmVudCB7XG4gICAgc3RhdGljIGNvbmZpZyA9IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ30gY2xhc3NOYW1lPSdOZW8uY29tcG9uZW50LkNhbnZhcydcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgY2xhc3NOYW1lOiAnTmVvLmNvbXBvbmVudC5DYW52YXMnLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfSBudHlwZT0nY2FudmFzJ1xuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICBudHlwZTogJ2NhbnZhcycsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiB0cnVlIGFwcGxpZXMgYSBtYWluLmFkZG9uLlJlc2l6ZU9ic2VydmVyIGFuZCBmaXJlcyBhIGN1c3RvbSByZXNpemUgZXZlbnRcbiAgICAgICAgICogd2hpY2ggb3RoZXIgaW5zdGFuY2VzIGNhbiBzdWJzY3JpYmUgdG8uXG4gICAgICAgICAqIEBtZW1iZXIge0Jvb2xlYW59IG1vbml0b3JTaXplXz10cnVlXG4gICAgICAgICAqIEByZWFjdGl2ZVxuICAgICAgICAgKi9cbiAgICAgICAgbW9uaXRvclNpemVfOiB0cnVlLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7Qm9vbGVhbn0gb2Zmc2NyZWVuPXRydWVcbiAgICAgICAgICovXG4gICAgICAgIG9mZnNjcmVlbjogdHJ1ZSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE9ubHkgYXBwbGljYWJsZSBpZiBvZmZzY3JlZW4gPT09IHRydWUuXG4gICAgICAgICAqIHRydWUgb25jZSB0aGUgb3duZXJzaGlwIG9mIHRoZSBjYW52YXMgbm9kZSBnb3QgdHJhbnNmZXJyZWQgdG8gd29ya2VyLkNhbnZhcy5cbiAgICAgICAgICogQG1lbWJlciB7Qm9vbGVhbn0gb2Zmc2NyZWVuUmVnaXN0ZXJlZF89ZmFsc2VcbiAgICAgICAgICogQHJlYWN0aXZlXG4gICAgICAgICAqL1xuICAgICAgICBvZmZzY3JlZW5SZWdpc3RlcmVkXzogZmFsc2UsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtPYmplY3R9IF92ZG9tPXt0YWc6ICdjYW52YXMnfVxuICAgICAgICAgKi9cbiAgICAgICAgX3Zkb206XG4gICAgICAgIHt0YWc6ICdjYW52YXMnfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCBhZnRlciB0aGUgbW91bnRlZCBjb25maWcgZ290IGNoYW5nZWRcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IHZhbHVlXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBvbGRWYWx1ZVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBhc3luYyBhZnRlclNldE1vdW50ZWQodmFsdWUsIG9sZFZhbHVlKSB7XG4gICAgICAgIHN1cGVyLmFmdGVyU2V0TW91bnRlZCh2YWx1ZSwgb2xkVmFsdWUpO1xuXG4gICAgICAgIGxldCBtZSAgICAgICAgICAgICAgICAgICAgPSB0aGlzLFxuICAgICAgICAgICAgaWQgICAgICAgICAgICAgICAgICAgID0gbWUuZ2V0Q2FudmFzSWQoKSxcbiAgICAgICAgICAgIHtvZmZzY3JlZW4sIHdpbmRvd0lkfSA9IG1lO1xuXG4gICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgYXdhaXQgbWUudGltZW91dCgzMCk7IC8vIG5leHQgckFGIHRpY2tcblxuICAgICAgICAgICAgaWYgKG1lLm1vbml0b3JTaXplKSB7XG4gICAgICAgICAgICAgICAgbWUuYWRkRG9tTGlzdGVuZXJzKFt7XG4gICAgICAgICAgICAgICAgICAgIGRlbGVnYXRlOiBgIyR7bWUuZ2V0Q2FudmFzSWQoKX1gLFxuICAgICAgICAgICAgICAgICAgICByZXNpemUgIDogbWUub25Eb21SZXNpemUsXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlICAgOiBtZVxuICAgICAgICAgICAgICAgIH1dKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAob2Zmc2NyZWVuKSB7XG4gICAgICAgICAgICAgICAgbGV0IGRhdGEsXG4gICAgICAgICAgICAgICAgICAgIGRlbGF5ID0gNTA7XG5cbiAgICAgICAgICAgICAgICB3aGlsZSAobWUubW91bnRlZCAmJiAhbWUub2Zmc2NyZWVuUmVnaXN0ZXJlZCAmJiAhbWUuaXNEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IGF3YWl0IE5lby5tYWluLkRvbUFjY2Vzcy5nZXRPZmZzY3JlZW5DYW52YXMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZUlkOiBpZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvd0lkXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLm9mZnNjcmVlbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgTmVvLndvcmtlci5DYW52YXMucmVnaXN0ZXJDYW52YXMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUgIDogZGF0YS5vZmZzY3JlZW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZUlkOiBpZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3dJZFxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgW2RhdGEub2Zmc2NyZWVuXSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIG1lLm9mZnNjcmVlblJlZ2lzdGVyZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnRyYW5zZmVycmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoTmVvLmNvbmZpZy51c2VTaGFyZWRXb3JrZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJldHJpZXZlRGF0YSA9IGF3YWl0IE5lby53b3JrZXIuQ2FudmFzLnJldHJpZXZlQ2FudmFzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZUlkOiBpZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93SWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXRyaWV2ZURhdGEuaGFzQ2FudmFzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lLm9mZnNjcmVlblJlZ2lzdGVyZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IG1lLnRpbWVvdXQoZGVsYXkpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChkZWxheSA8IDEwMDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGF5ICo9IDJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChvZmZzY3JlZW4pIHtcbiAgICAgICAgICAgIG1lLm9mZnNjcmVlblJlZ2lzdGVyZWQgPSBmYWxzZVxuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgYWZ0ZXIgdGhlIHdpbmRvd0lkIGNvbmZpZyBnb3QgY2hhbmdlZFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfG51bGx9IHZhbHVlXG4gICAgICogQHBhcmFtIHtTdHJpbmd8bnVsbH0gb2xkVmFsdWVcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgYWZ0ZXJTZXRXaW5kb3dJZCh2YWx1ZSwgb2xkVmFsdWUpIHtcbiAgICAgICAgc3VwZXIuYWZ0ZXJTZXRXaW5kb3dJZCh2YWx1ZSwgb2xkVmFsdWUpO1xuXG4gICAgICAgIGlmIChvbGRWYWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5vZmZzY3JlZW5SZWdpc3RlcmVkID0gZmFsc2VcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE92ZXJyaWRlIHRoaXMgbWV0aG9kIHdoZW4gdXNpbmcgd3JhcHBlcnMgKGUuZy4gRDMpXG4gICAgICogQHJldHVybnMge1N0cmluZ31cbiAgICAgKi9cbiAgICBnZXRDYW52YXNJZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaWRcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YVxuICAgICAqL1xuICAgIG9uRG9tUmVzaXplKGRhdGEpIHtcbiAgICAgICAgdGhpcy5maXJlKCdyZXNpemUnLCBkYXRhKVxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTmVvLnNldHVwQ2xhc3MoQ2FudmFzKTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=