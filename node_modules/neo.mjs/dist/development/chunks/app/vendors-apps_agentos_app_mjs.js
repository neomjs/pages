"use strict";
(self["webpackChunkneo_mjs"] = self["webpackChunkneo_mjs"] || []).push([["vendors-apps_agentos_app_mjs"],{

/***/ "./apps/agentos/app.mjs"
/*!******************************!*\
  !*** ./apps/agentos/app.mjs ***!
  \******************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   onStart: () => (/* binding */ onStart)
/* harmony export */ });
/* harmony import */ var _view_Viewport_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./view/Viewport.mjs */ "./apps/agentos/view/Viewport.mjs");


const onStart = () => Neo.app({
    mainView: _view_Viewport_mjs__WEBPACK_IMPORTED_MODULE_0__["default"],
    name    : 'AgentOS'
});

/***/ },

/***/ "./apps/agentos/model/Intervention.mjs"
/*!*********************************************!*\
  !*** ./apps/agentos/model/Intervention.mjs ***!
  \*********************************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _src_data_Model_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../src/data/Model.mjs */ "./src/data/Model.mjs");


/**
 * @class AgentOS.model.Intervention
 * @extends Neo.data.Model
 */
class Intervention extends _src_data_Model_mjs__WEBPACK_IMPORTED_MODULE_0__["default"] {
    static config = {
        /**
         * @member {String} className='AgentOS.model.Intervention'
         * @protected
         */
        className: 'AgentOS.model.Intervention',
        /**
         * @member {Object[]} fields
         */
        fields: [{
            name: 'id',
            type: 'String'
        }, {
            name: 'timestamp',
            type: 'Date'
        }, {
            name: 'message',
            type: 'String'
        }, {
            name: 'priority',
            type: 'String' // 'normal', 'warning', 'error'
        }]
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(Intervention));


/***/ },

/***/ "./apps/agentos/store/Interventions.mjs"
/*!**********************************************!*\
  !*** ./apps/agentos/store/Interventions.mjs ***!
  \**********************************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _model_Intervention_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../model/Intervention.mjs */ "./apps/agentos/model/Intervention.mjs");
/* harmony import */ var _src_data_Store_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../src/data/Store.mjs */ "./src/data/Store.mjs");



/**
 * @class AgentOS.store.Interventions
 * @extends Neo.data.Store
 */
class Interventions extends _src_data_Store_mjs__WEBPACK_IMPORTED_MODULE_1__["default"] {
    static config = {
        /**
         * @member {String} className='AgentOS.store.Interventions'
         * @protected
         */
        className: 'AgentOS.store.Interventions',
        /**
         * @member {Boolean} autoLoad=true
         */
        autoLoad: true,
        /**
         * @member {Neo.data.Model} model=InterventionModel
         * @reactive
         */
        model: _model_Intervention_mjs__WEBPACK_IMPORTED_MODULE_0__["default"],
        /**
         * @member {String} url=Neo.config.basePath + 'apps/agentos/resources/data/interventions.json'
         */
        url: Neo.config.basePath + 'apps/agentos/resources/data/interventions.json'
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(Interventions));


/***/ },

/***/ "./apps/agentos/view/Blackboard.mjs"
/*!******************************************!*\
  !*** ./apps/agentos/view/Blackboard.mjs ***!
  \******************************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _src_component_Canvas_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../src/component/Canvas.mjs */ "./src/component/Canvas.mjs");


/**
 * @class AgentOS.view.Blackboard
 * @extends Neo.component.Canvas
 */
class Blackboard extends _src_component_Canvas_mjs__WEBPACK_IMPORTED_MODULE_0__["default"] {
    static config = {
        /**
         * @member {String} className='AgentOS.view.Blackboard'
         * @protected
         */
        className: 'AgentOS.view.Blackboard',
        /**
         * @member {Object} _vdom
         */
        _vdom:
        {tag: 'div', cls: ['neo-blackboard-wrapper'], style: {width: '100%', height: '100%'}, cn: [
            {tag: 'canvas', style: {width: '100%', height: '100%'}}
        ]}
    }

    /**
     * Triggered after the id config got changed
     * @param {String} value
     * @param {String} oldValue
     */
    afterSetId(value, oldValue) {
        let me = this;
        me.vdom.cn[0].id = `${value}__canvas`;
        super.afterSetId(value, oldValue)
    }

    /**
     * Triggered after the offscreenRegistered config got changed
     * @param {Boolean} value
     * @param {Boolean} oldValue
     * @protected
     */
    async afterSetOffscreenRegistered(value, oldValue) {
        if (value) {
            let me = this;

            // Direct Remote Method Access call
            // The namespace AgentOS.canvas.Blackboard is auto-generated in this worker
            // by the RemoteMethodAccess mixin when the Canvas worker registers it.
            await AgentOS.canvas.Blackboard.initGraph({canvasId: me.getCanvasId(), windowId: me.windowId});

            await me.updateSize()
        }
    }

    /**
     * Override to return the inner canvas ID
     */
    getCanvasId() {
        return this.vdom.cn[0].id;
    }

    /**
     * @param {Object} data
     */
    onDomResize(data) {
        super.onDomResize(data);
        this.updateSize(data.contentRect)
    }

    /**
     * Pass new graph data to the worker
     * @param {Object} data {nodes, links}
     */
    async setData(data) {
        await AgentOS.canvas.Blackboard.updateGraphData(data);
    }

    async updateSize(rect) {
        let me = this;

        if (!rect || rect.width === 0 || rect.height === 0) {
            rect = await me.waitForDomRect({id: me.getCanvasId()})
        }

        await AgentOS.canvas.Blackboard.updateSize({width: rect.width, height: rect.height})
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(Blackboard));


/***/ },

/***/ "./apps/agentos/view/InterventionPanel.mjs"
/*!*************************************************!*\
  !*** ./apps/agentos/view/InterventionPanel.mjs ***!
  \*************************************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _src_dashboard_Panel_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../src/dashboard/Panel.mjs */ "./src/dashboard/Panel.mjs");
/* harmony import */ var _src_grid_Container_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../src/grid/Container.mjs */ "./src/grid/Container.mjs");
/* harmony import */ var _store_Interventions_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../store/Interventions.mjs */ "./apps/agentos/store/Interventions.mjs");




/**
 * @class AgentOS.view.InterventionPanel
 * @extends Neo.dashboard.Panel
 */
class InterventionPanel extends _src_dashboard_Panel_mjs__WEBPACK_IMPORTED_MODULE_0__["default"] {
    static config = {
        /**
         * @member {String} className='AgentOS.view.InterventionPanel'
         * @protected
         */
        className: 'AgentOS.view.InterventionPanel',
        /**
         * @member {String} ntype='intervention-panel'
         * @protected
         */
        ntype: 'intervention-panel',
        /**
         * @member {String[]} cls=['agent-panel-intervention']
         * @reactive
         */
        cls: ['agent-panel-intervention'],
        /**
         * @member {Object} layout={ntype: 'fit'}
         * @reactive
         */
        layout: {ntype: 'fit'},
        /**
         * @member {Function|String|null} popupUrl='apps/agentos/childapps/widget/index.html'
         */
        popupUrl: 'apps/agentos/childapps/widget/index.html',
        /**
         * @member {Object[]} headers
         */
        headers: [{
            dock: 'top',
            cls : ['neo-draggable'],
            text: 'Intervention'
        }],
        /**
         * @member {Object[]} items
         */
        items: [{
            module : _src_grid_Container_mjs__WEBPACK_IMPORTED_MODULE_1__["default"],
            store  : _store_Interventions_mjs__WEBPACK_IMPORTED_MODULE_2__["default"],
            columns: [{
                dataField: 'timestamp',
                text     : 'Time',
                width    : 100,
                renderer : ({value}) => {
                    if (!value) return '';
                    return `[${new Intl.DateTimeFormat('default', {
                        hour  : '2-digit',
                        minute: '2-digit',
                        second: '2-digit',
                        hour12: false
                    }).format(value)}]`;
                }
            }, {
                dataField: 'message',
                text     : 'Message',
                flex     : 1
            }, {
                dataField: 'priority',
                text     : 'Priority',
                width    : 100,
                renderer : ({value}) => {
                    return {
                        cls : ['agent-priority', `agent-priority-${value}`],
                        text: value
                    };
                }
            }]
        }]
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(InterventionPanel));


/***/ },

/***/ "./apps/agentos/view/StrategyCardPanel.mjs"
/*!*************************************************!*\
  !*** ./apps/agentos/view/StrategyCardPanel.mjs ***!
  \*************************************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _src_dashboard_Panel_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../src/dashboard/Panel.mjs */ "./src/dashboard/Panel.mjs");


/**
 * @class AgentOS.view.StrategyCardPanel
 * @extends Neo.dashboard.Panel
 */
class StrategyCardPanel extends _src_dashboard_Panel_mjs__WEBPACK_IMPORTED_MODULE_0__["default"] {
    static config = {
        /**
         * @member {String} className='AgentOS.view.StrategyCardPanel'
         * @protected
         */
        className: 'AgentOS.view.StrategyCardPanel',
        /**
         * @member {String[]} baseCls=['agent-kpi-card-panel','neo-panel','neo-container']
         * @reactive
         */
        baseCls: ['agent-kpi-card-panel', 'neo-panel', 'neo-container'],
        /**
         * @member {Object[]} headers
         * @reactive
         */
        headers: [{
            cls : ['neo-panel-header', 'neo-draggable'],
            dock: 'top'
        }],
        /**
         * @member {String|null} title_=null
         * @reactive
         */
        title_: null,
        /**
         * @member {String|null} value_=null
         * @reactive
         */
        value_: null,
        /**
         * @member {Object[]} items
         */
        items: [{
            ntype    : 'component',
            cls      : ['agent-kpi-card'],
            reference: 'body-component',
            vdom     : {cn: [{cls: 'agent-kpi-value'}]}
        }]
    }

    /**
     * Triggered after the title config got changed
     * @param {String|null} value
     * @param {String|null} oldValue
     * @protected
     */
    afterSetTitle(value, oldValue) {
        this.headers[0].text = value
    }

    /**
     * Triggered after the value config got changed
     * @param {String|null} value
     * @param {String|null} oldValue
     * @protected
     */
    afterSetValue(value, oldValue) {
        let bodyComponent = this.getItem('body-component');

        bodyComponent.vdom.cn[0].text = value;
        bodyComponent.update?.() // Only available after construction
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(StrategyCardPanel));


/***/ },

/***/ "./apps/agentos/view/StrategyPanel.mjs"
/*!*********************************************!*\
  !*** ./apps/agentos/view/StrategyPanel.mjs ***!
  \*********************************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _src_dashboard_Container_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../src/dashboard/Container.mjs */ "./src/dashboard/Container.mjs");
/* harmony import */ var _src_dashboard_Panel_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../src/dashboard/Panel.mjs */ "./src/dashboard/Panel.mjs");
/* harmony import */ var _StrategyCardPanel_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./StrategyCardPanel.mjs */ "./apps/agentos/view/StrategyCardPanel.mjs");
/* harmony import */ var _StrategyPanelController_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./StrategyPanelController.mjs */ "./apps/agentos/view/StrategyPanelController.mjs");





/**
 * @class AgentOS.view.StrategyPanel
 * @extends Neo.dashboard.Panel
 */
class StrategyPanel extends _src_dashboard_Panel_mjs__WEBPACK_IMPORTED_MODULE_1__["default"] {
    static config = {
        /**
         * @member {String} className='AgentOS.view.StrategyPanel'
         * @protected
         */
        className: 'AgentOS.view.StrategyPanel',
        /**
         * @member {String[]} cls=['agent-panel-strategy']
         * @reactive
         */
        cls: ['agent-panel-strategy'],
        /**
         * @member {Neo.controller.Component} controller=StrategyPanelController
         * @reactive
         */
        controller: _StrategyPanelController_mjs__WEBPACK_IMPORTED_MODULE_3__["default"],
        /**
         * @member {Number} flex=1
         */
        flex: 1,
        /**
         * @member {Object[]} headers
         */
        headers: [{
            dock: 'top',
            cls : ['neo-draggable'],
            text: 'Strategy Dashboard'
        }],
        /**
         * @member {Object} layout='fit'
         * @reactive
         */
        layout: 'fit',
        /**
         * @member {Function|String|null} popupUrl='apps/agentos/childapps/widget/index.html'
         */
        popupUrl: 'apps/agentos/childapps/widget/index.html',
        /**
         * @member {Object[]} items
         */
        items: [{
            module           : _src_dashboard_Container_mjs__WEBPACK_IMPORTED_MODULE_0__["default"],
            cls              : ['agent-kpi-dashboard'],
            dragProxyExtraCls: ['agent-panel-strategy', 'neo-panel'], // Ensure styles carry over to popup proxy
            layout           : {ntype: 'hbox', align: 'stretch'},
            popupUrl         : 'apps/agentos/childapps/strategy/index.html',

            itemDefaults: {
                module: _StrategyCardPanel_mjs__WEBPACK_IMPORTED_MODULE_2__["default"],
                flex  : 1
            },

            items: [{
                cls      : ['velocity'],
                reference: 'kpi-velocity',
                title    : 'Velocity',
                value    : '85%'
            }, {
                cls      : ['active-epics'],
                reference: 'kpi-active-epics',
                title    : 'Active Epics',
                value    : '12'
            }, {
                cls      : ['uptime'],
                reference: 'kpi-uptime',
                title    : 'Uptime',
                value    : '98.5%'
            }]
        }]
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(StrategyPanel));


/***/ },

/***/ "./apps/agentos/view/StrategyPanelController.mjs"
/*!*******************************************************!*\
  !*** ./apps/agentos/view/StrategyPanelController.mjs ***!
  \*******************************************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _src_controller_Component_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../src/controller/Component.mjs */ "./src/controller/Component.mjs");


/**
 * @class AgentOS.view.StrategyPanelController
 * @extends Neo.controller.Component
 */
class StrategyPanelController extends _src_controller_Component_mjs__WEBPACK_IMPORTED_MODULE_0__["default"] {
    static config = {
        className: 'AgentOS.view.StrategyPanelController'
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(StrategyPanelController));


/***/ },

/***/ "./apps/agentos/view/Viewport.mjs"
/*!****************************************!*\
  !*** ./apps/agentos/view/Viewport.mjs ***!
  \****************************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _src_container_Viewport_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../src/container/Viewport.mjs */ "./src/container/Viewport.mjs");
/* harmony import */ var _src_dashboard_Container_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../src/dashboard/Container.mjs */ "./src/dashboard/Container.mjs");
/* harmony import */ var _src_container_Panel_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../src/container/Panel.mjs */ "./src/container/Panel.mjs");
/* harmony import */ var _Blackboard_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Blackboard.mjs */ "./apps/agentos/view/Blackboard.mjs");
/* harmony import */ var _InterventionPanel_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./InterventionPanel.mjs */ "./apps/agentos/view/InterventionPanel.mjs");
/* harmony import */ var _StrategyPanel_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./StrategyPanel.mjs */ "./apps/agentos/view/StrategyPanel.mjs");
/* harmony import */ var _ViewportController_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./ViewportController.mjs */ "./apps/agentos/view/ViewportController.mjs");








/**
 * @class AgentOS.view.Viewport
 * @extends Neo.container.Viewport
 */
class Viewport extends _src_container_Viewport_mjs__WEBPACK_IMPORTED_MODULE_0__["default"] {
    static config = {
        /**
         * @member {String} className='AgentOS.view.Viewport'
         * @protected
         */
        className: 'AgentOS.view.Viewport',
        /**
         * @member {String[]} cls=['agent-os-viewport']
         * @reactive
         */
        cls: ['agent-os-viewport'],
        /**
         * @member {Neo.controller.Component} controller=ViewportController
         * @reactive
         */
        controller: _ViewportController_mjs__WEBPACK_IMPORTED_MODULE_6__["default"],
        /**
         * @member {Object} layout={ntype:'vbox',align:'stretch'}
         * @reactive
         */
        layout: {ntype: 'vbox', align: 'stretch'},
        /**
         * @member {Object[]} items
         */
        items: [{
            ntype: 'toolbar',
            cls  : ['agent-top-toolbar'],
            flex : 'none',
            items: [{
                ntype: 'component',
                cls  : ['agent-logo'],
                html : '<img src="../../resources/images/logo/neo_logo_cyberpunk.svg" alt="Neo.mjs Logo">'
            }, {
                ntype: 'label',
                text : 'Agent OS Command Center'
            }, '->', {
                ntype  : 'button',
                cls    : ['agent-button'],
                iconCls: 'fa fa-window-restore',
                text   : 'Detach Swarm View',
                handler: 'onOpenSwarmClick'
            }]
        }, {
            module           : _src_dashboard_Container_mjs__WEBPACK_IMPORTED_MODULE_1__["default"],
            dragProxyExtraCls: ['agent-os-viewport', 'neo-viewport'],
            flex             : 1,
            popupUrl         : 'apps/agentos/childapps/widget/index.html',
            reference        : 'dashboard',
            sortGroup        : 'neo-connected-dashboard',
            cls              : ['agent-dashboard'],
            style            : {margin: '20px'},

            items: [{
                module   : _StrategyPanel_mjs__WEBPACK_IMPORTED_MODULE_5__["default"],
                flex     : 2,
                reference: 'strategy'
            }, {
                module   : _src_container_Panel_mjs__WEBPACK_IMPORTED_MODULE_2__["default"],
                cls      : ['agent-panel-swarm'],
                flex     : 5,
                popupUrl : 'apps/agentos/childapps/swarm/index.html',
                reference: 'swarm',
                headers  : [{
                    dock: 'top',
                    cls : ['neo-draggable'],
                    text: 'Swarm View'
                }],
                items    : [{
                    module   : _Blackboard_mjs__WEBPACK_IMPORTED_MODULE_3__["default"],
                    style    : {
                        backgroundColor: '#000',
                        height         : '100%',
                        width          : '100%'
                    }
                }]
            }, {
                module   : _InterventionPanel_mjs__WEBPACK_IMPORTED_MODULE_4__["default"],
                flex     : 3,
                reference: 'intervention'
            }]
        }]
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(Viewport));


/***/ },

/***/ "./apps/agentos/view/ViewportController.mjs"
/*!**************************************************!*\
  !*** ./apps/agentos/view/ViewportController.mjs ***!
  \**************************************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _src_controller_Component_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../src/controller/Component.mjs */ "./src/controller/Component.mjs");


/**
 * @class AgentOS.view.ViewportController
 * @extends Neo.controller.Component
 */
class ViewportController extends _src_controller_Component_mjs__WEBPACK_IMPORTED_MODULE_0__["default"] {
    static config = {
        className: 'AgentOS.view.ViewportController'
    }

    /**
     * @param {Object} data
     */
    async onOpenSwarmClick(data) {
        let name                    = 'swarm',
            {config, windowConfigs} = Neo,
            {environment}           = config,
            firstWindowId           = Object.keys(windowConfigs)[0],
            {basePath}              = windowConfigs[firstWindowId],
            url;

        if (environment !== 'development') {
            basePath = `${basePath + environment}/`
        }

        url = `${basePath}apps/agentos/childapps/swarm/index.html?name=${name}`;

        await Neo.Main.windowOpen({
            url,
            windowId      : this.windowId,
            windowName    : name,
            windowFeatures: 'height=600,width=800,left=50,top=50'
        });
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(ViewportController));


/***/ },

/***/ "./src/component/Canvas.mjs"
/*!**********************************!*\
  !*** ./src/component/Canvas.mjs ***!
  \**********************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _Base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Base.mjs */ "./src/component/Base.mjs");


/**
 * @class Neo.component.Canvas
 * @extends Neo.component.Base
 */
class Canvas extends _Base_mjs__WEBPACK_IMPORTED_MODULE_0__["default"] {
    static config = {
        /**
         * @member {String} className='Neo.component.Canvas'
         * @protected
         */
        className: 'Neo.component.Canvas',
        /**
         * @member {String} ntype='canvas'
         * @protected
         */
        ntype: 'canvas',
        /**
         * true applies a main.addon.ResizeObserver and fires a custom resize event
         * which other instances can subscribe to.
         * @member {Boolean} monitorSize_=true
         * @reactive
         */
        monitorSize_: true,
        /**
         * @member {Boolean} offscreen=true
         */
        offscreen: true,
        /**
         * Only applicable if offscreen === true.
         * true once the ownership of the canvas node got transferred to worker.Canvas.
         * @member {Boolean} offscreenRegistered_=false
         * @reactive
         */
        offscreenRegistered_: false,
        /**
         * @member {Object} _vdom={tag: 'canvas'}
         */
        _vdom:
        {tag: 'canvas'}
    }

    /**
     * Triggered after the mounted config got changed
     * @param {Boolean} value
     * @param {Boolean} oldValue
     * @protected
     */
    async afterSetMounted(value, oldValue) {
        super.afterSetMounted(value, oldValue);

        let me          = this,
            id          = me.getCanvasId(),
            {offscreen} = me;

        if (value) {
            await me.timeout(30); // next rAF tick

            if (me.monitorSize) {
                me.addDomListeners([{
                    delegate: `#${me.getCanvasId()}`,
                    resize  : me.onDomResize,
                    scope   : me
                }])
            }

            if (offscreen) {
                const data = await Neo.main.DomAccess.getOffscreenCanvas({
                    nodeId  : id,
                    windowId: me.windowId
                });

                if (data.offscreen) {
                    await Neo.worker.Canvas.registerCanvas({
                        node    : data.offscreen,
                        nodeId  : id,
                        windowId: me.windowId
                    }, [data.offscreen]);

                    me.offscreenRegistered = true
                } else if (data.transferred) {
                    if (Neo.config.useSharedWorkers) {
                        let retrieveData = await Neo.worker.Canvas.retrieveCanvas({
                            nodeId  : id,
                            windowId: me.windowId
                        });

                        if (retrieveData.hasCanvas) {
                            me.offscreenRegistered = true
                        }
                    }
                }
            }
        } else if (offscreen) {
            me.offscreenRegistered = false
        }
    }


    /**
     * Triggered after the windowId config got changed
     * @param {Number|null} value
     * @param {Number|null} oldValue
     * @protected
     */
    afterSetWindowId(value, oldValue) {
        if (oldValue) {
            this.offscreenRegistered = false
        }
    }

    /**
     * Override this method when using wrappers (e.g. D3)
     * @returns {String}
     */
    getCanvasId() {
        return this.id
    }

    /**
     * @param {Object} data
     */
    onDomResize(data) {
        this.fire('resize', data)
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(Canvas));


/***/ }

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2h1bmtzL2FwcC92ZW5kb3JzLWFwcHNfYWdlbnRvc19hcHBfbWpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQTJDOztBQUVwQztBQUNQLGNBQWMsMERBQVE7QUFDdEI7QUFDQSxDQUFDLEU7Ozs7Ozs7Ozs7Ozs7OztBQ0wrQzs7QUFFaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsMkRBQUs7QUFDaEM7QUFDQTtBQUNBLG9CQUFvQixRQUFRO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFVBQVU7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQSxpRUFBZSw0QkFBNEIsRUFBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNoQ2M7QUFDRTs7QUFFNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsMkRBQUs7QUFDakM7QUFDQTtBQUNBLG9CQUFvQixRQUFRO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFNBQVM7QUFDN0I7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGdCQUFnQjtBQUNwQztBQUNBO0FBQ0EsZUFBZSwrREFBaUI7QUFDaEM7QUFDQSxvQkFBb0IsUUFBUTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxpRUFBZSw2QkFBNkIsRUFBQzs7Ozs7Ozs7Ozs7Ozs7OztBQzlCVTs7QUFFdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsaUVBQU07QUFDL0I7QUFDQTtBQUNBLG9CQUFvQixRQUFRO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFFBQVE7QUFDNUI7QUFDQTtBQUNBLFNBQVMscURBQXFELDhCQUE4QjtBQUM1RixhQUFhLHVCQUF1QjtBQUNwQztBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFD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QUFvQixTQUFTO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFNBQVM7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixTQUFTO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFFBQVEsT0FBTztBQUNuQztBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQSxlQUFlLFNBQVM7QUFDeEIsZUFBZSxTQUFTO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxhQUFhLFdBQVc7O0FBRXhCO0FBQ0Esa0NBQWtDOztBQUVsQztBQUNBO0FBQ0Esa0NBQWtDLGlCQUFpQjtBQUNuRDtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCOztBQUVqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCOztBQUVyQjtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qjs7QUFFekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBLGVBQWUsYUFBYTtBQUM1QixlQUFlLGFBQWE7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGlFQUFlLHNCQUFzQixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmVvLm1qcy8uL2FwcHMvYWdlbnRvcy9hcHAubWpzIiwid2VicGFjazovL25lby5tanMvLi9hcHBzL2FnZW50b3MvbW9kZWwvSW50ZXJ2ZW50aW9uLm1qcyIsIndlYnBhY2s6Ly9uZW8ubWpzLy4vYXBwcy9hZ2VudG9zL3N0b3JlL0ludGVydmVudGlvbnMubWpzIiwid2VicGFjazovL25lby5tanMvLi9hcHBzL2FnZW50b3Mvdmlldy9CbGFja2JvYXJkLm1qcyIsIndlYnBhY2s6Ly9uZW8ubWpzLy4vYXBwcy9hZ2VudG9zL3ZpZXcvSW50ZXJ2ZW50aW9uUGFuZWwubWpzIiwid2VicGFjazovL25lby5tanMvLi9hcHBzL2FnZW50b3Mvdmlldy9TdHJhdGVneUNhcmRQYW5lbC5tanMiLCJ3ZWJwYWNrOi8vbmVvLm1qcy8uL2FwcHMvYWdlbnRvcy92aWV3L1N0cmF0ZWd5UGFuZWwubWpzIiwid2VicGFjazovL25lby5tanMvLi9hcHBzL2FnZW50b3Mvdmlldy9TdHJhdGVneVBhbmVsQ29udHJvbGxlci5tanMiLCJ3ZWJwYWNrOi8vbmVvLm1qcy8uL2FwcHMvYWdlbnRvcy92aWV3L1ZpZXdwb3J0Lm1qcyIsIndlYnBhY2s6Ly9uZW8ubWpzLy4vYXBwcy9hZ2VudG9zL3ZpZXcvVmlld3BvcnRDb250cm9sbGVyLm1qcyIsIndlYnBhY2s6Ly9uZW8ubWpzLy4vc3JjL2NvbXBvbmVudC9DYW52YXMubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBWaWV3cG9ydCBmcm9tICcuL3ZpZXcvVmlld3BvcnQubWpzJztcblxuZXhwb3J0IGNvbnN0IG9uU3RhcnQgPSAoKSA9PiBOZW8uYXBwKHtcbiAgICBtYWluVmlldzogVmlld3BvcnQsXG4gICAgbmFtZSAgICA6ICdBZ2VudE9TJ1xufSk7IiwiaW1wb3J0IE1vZGVsIGZyb20gJy4uLy4uLy4uL3NyYy9kYXRhL01vZGVsLm1qcyc7XG5cbi8qKlxuICogQGNsYXNzIEFnZW50T1MubW9kZWwuSW50ZXJ2ZW50aW9uXG4gKiBAZXh0ZW5kcyBOZW8uZGF0YS5Nb2RlbFxuICovXG5jbGFzcyBJbnRlcnZlbnRpb24gZXh0ZW5kcyBNb2RlbCB7XG4gICAgc3RhdGljIGNvbmZpZyA9IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ30gY2xhc3NOYW1lPSdBZ2VudE9TLm1vZGVsLkludGVydmVudGlvbidcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgY2xhc3NOYW1lOiAnQWdlbnRPUy5tb2RlbC5JbnRlcnZlbnRpb24nLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7T2JqZWN0W119IGZpZWxkc1xuICAgICAgICAgKi9cbiAgICAgICAgZmllbGRzOiBbe1xuICAgICAgICAgICAgbmFtZTogJ2lkJyxcbiAgICAgICAgICAgIHR5cGU6ICdTdHJpbmcnXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG5hbWU6ICd0aW1lc3RhbXAnLFxuICAgICAgICAgICAgdHlwZTogJ0RhdGUnXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG5hbWU6ICdtZXNzYWdlJyxcbiAgICAgICAgICAgIHR5cGU6ICdTdHJpbmcnXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG5hbWU6ICdwcmlvcml0eScsXG4gICAgICAgICAgICB0eXBlOiAnU3RyaW5nJyAvLyAnbm9ybWFsJywgJ3dhcm5pbmcnLCAnZXJyb3InXG4gICAgICAgIH1dXG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBOZW8uc2V0dXBDbGFzcyhJbnRlcnZlbnRpb24pO1xuIiwiaW1wb3J0IEludGVydmVudGlvbk1vZGVsIGZyb20gJy4uL21vZGVsL0ludGVydmVudGlvbi5tanMnO1xuaW1wb3J0IFN0b3JlICAgICAgICAgICAgIGZyb20gJy4uLy4uLy4uL3NyYy9kYXRhL1N0b3JlLm1qcyc7XG5cbi8qKlxuICogQGNsYXNzIEFnZW50T1Muc3RvcmUuSW50ZXJ2ZW50aW9uc1xuICogQGV4dGVuZHMgTmVvLmRhdGEuU3RvcmVcbiAqL1xuY2xhc3MgSW50ZXJ2ZW50aW9ucyBleHRlbmRzIFN0b3JlIHtcbiAgICBzdGF0aWMgY29uZmlnID0ge1xuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfSBjbGFzc05hbWU9J0FnZW50T1Muc3RvcmUuSW50ZXJ2ZW50aW9ucydcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgY2xhc3NOYW1lOiAnQWdlbnRPUy5zdG9yZS5JbnRlcnZlbnRpb25zJyxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge0Jvb2xlYW59IGF1dG9Mb2FkPXRydWVcbiAgICAgICAgICovXG4gICAgICAgIGF1dG9Mb2FkOiB0cnVlLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7TmVvLmRhdGEuTW9kZWx9IG1vZGVsPUludGVydmVudGlvbk1vZGVsXG4gICAgICAgICAqIEByZWFjdGl2ZVxuICAgICAgICAgKi9cbiAgICAgICAgbW9kZWw6IEludGVydmVudGlvbk1vZGVsLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfSB1cmw9TmVvLmNvbmZpZy5iYXNlUGF0aCArICdhcHBzL2FnZW50b3MvcmVzb3VyY2VzL2RhdGEvaW50ZXJ2ZW50aW9ucy5qc29uJ1xuICAgICAgICAgKi9cbiAgICAgICAgdXJsOiBOZW8uY29uZmlnLmJhc2VQYXRoICsgJ2FwcHMvYWdlbnRvcy9yZXNvdXJjZXMvZGF0YS9pbnRlcnZlbnRpb25zLmpzb24nXG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBOZW8uc2V0dXBDbGFzcyhJbnRlcnZlbnRpb25zKTtcbiIsImltcG9ydCBDYW52YXMgZnJvbSAnLi4vLi4vLi4vc3JjL2NvbXBvbmVudC9DYW52YXMubWpzJztcblxuLyoqXG4gKiBAY2xhc3MgQWdlbnRPUy52aWV3LkJsYWNrYm9hcmRcbiAqIEBleHRlbmRzIE5lby5jb21wb25lbnQuQ2FudmFzXG4gKi9cbmNsYXNzIEJsYWNrYm9hcmQgZXh0ZW5kcyBDYW52YXMge1xuICAgIHN0YXRpYyBjb25maWcgPSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtTdHJpbmd9IGNsYXNzTmFtZT0nQWdlbnRPUy52aWV3LkJsYWNrYm9hcmQnXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIGNsYXNzTmFtZTogJ0FnZW50T1Mudmlldy5CbGFja2JvYXJkJyxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge09iamVjdH0gX3Zkb21cbiAgICAgICAgICovXG4gICAgICAgIF92ZG9tOlxuICAgICAgICB7dGFnOiAnZGl2JywgY2xzOiBbJ25lby1ibGFja2JvYXJkLXdyYXBwZXInXSwgc3R5bGU6IHt3aWR0aDogJzEwMCUnLCBoZWlnaHQ6ICcxMDAlJ30sIGNuOiBbXG4gICAgICAgICAgICB7dGFnOiAnY2FudmFzJywgc3R5bGU6IHt3aWR0aDogJzEwMCUnLCBoZWlnaHQ6ICcxMDAlJ319XG4gICAgICAgIF19XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIGFmdGVyIHRoZSBpZCBjb25maWcgZ290IGNoYW5nZWRcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdmFsdWVcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gb2xkVmFsdWVcbiAgICAgKi9cbiAgICBhZnRlclNldElkKHZhbHVlLCBvbGRWYWx1ZSkge1xuICAgICAgICBsZXQgbWUgPSB0aGlzO1xuICAgICAgICBtZS52ZG9tLmNuWzBdLmlkID0gYCR7dmFsdWV9X19jYW52YXNgO1xuICAgICAgICBzdXBlci5hZnRlclNldElkKHZhbHVlLCBvbGRWYWx1ZSlcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgYWZ0ZXIgdGhlIG9mZnNjcmVlblJlZ2lzdGVyZWQgY29uZmlnIGdvdCBjaGFuZ2VkXG4gICAgICogQHBhcmFtIHtCb29sZWFufSB2YWx1ZVxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gb2xkVmFsdWVcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgYXN5bmMgYWZ0ZXJTZXRPZmZzY3JlZW5SZWdpc3RlcmVkKHZhbHVlLCBvbGRWYWx1ZSkge1xuICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgIGxldCBtZSA9IHRoaXM7XG5cbiAgICAgICAgICAgIC8vIERpcmVjdCBSZW1vdGUgTWV0aG9kIEFjY2VzcyBjYWxsXG4gICAgICAgICAgICAvLyBUaGUgbmFtZXNwYWNlIEFnZW50T1MuY2FudmFzLkJsYWNrYm9hcmQgaXMgYXV0by1nZW5lcmF0ZWQgaW4gdGhpcyB3b3JrZXJcbiAgICAgICAgICAgIC8vIGJ5IHRoZSBSZW1vdGVNZXRob2RBY2Nlc3MgbWl4aW4gd2hlbiB0aGUgQ2FudmFzIHdvcmtlciByZWdpc3RlcnMgaXQuXG4gICAgICAgICAgICBhd2FpdCBBZ2VudE9TLmNhbnZhcy5CbGFja2JvYXJkLmluaXRHcmFwaCh7Y2FudmFzSWQ6IG1lLmdldENhbnZhc0lkKCksIHdpbmRvd0lkOiBtZS53aW5kb3dJZH0pO1xuXG4gICAgICAgICAgICBhd2FpdCBtZS51cGRhdGVTaXplKClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE92ZXJyaWRlIHRvIHJldHVybiB0aGUgaW5uZXIgY2FudmFzIElEXG4gICAgICovXG4gICAgZ2V0Q2FudmFzSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZkb20uY25bMF0uaWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGFcbiAgICAgKi9cbiAgICBvbkRvbVJlc2l6ZShkYXRhKSB7XG4gICAgICAgIHN1cGVyLm9uRG9tUmVzaXplKGRhdGEpO1xuICAgICAgICB0aGlzLnVwZGF0ZVNpemUoZGF0YS5jb250ZW50UmVjdClcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQYXNzIG5ldyBncmFwaCBkYXRhIHRvIHRoZSB3b3JrZXJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YSB7bm9kZXMsIGxpbmtzfVxuICAgICAqL1xuICAgIGFzeW5jIHNldERhdGEoZGF0YSkge1xuICAgICAgICBhd2FpdCBBZ2VudE9TLmNhbnZhcy5CbGFja2JvYXJkLnVwZGF0ZUdyYXBoRGF0YShkYXRhKTtcbiAgICB9XG5cbiAgICBhc3luYyB1cGRhdGVTaXplKHJlY3QpIHtcbiAgICAgICAgbGV0IG1lID0gdGhpcztcblxuICAgICAgICBpZiAoIXJlY3QgfHwgcmVjdC53aWR0aCA9PT0gMCB8fCByZWN0LmhlaWdodCA9PT0gMCkge1xuICAgICAgICAgICAgcmVjdCA9IGF3YWl0IG1lLndhaXRGb3JEb21SZWN0KHtpZDogbWUuZ2V0Q2FudmFzSWQoKX0pXG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCBBZ2VudE9TLmNhbnZhcy5CbGFja2JvYXJkLnVwZGF0ZVNpemUoe3dpZHRoOiByZWN0LndpZHRoLCBoZWlnaHQ6IHJlY3QuaGVpZ2h0fSlcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IE5lby5zZXR1cENsYXNzKEJsYWNrYm9hcmQpO1xuIiwiaW1wb3J0IERhc2hib2FyZFBhbmVsIGZyb20gJy4uLy4uLy4uL3NyYy9kYXNoYm9hcmQvUGFuZWwubWpzJztcbmltcG9ydCBHcmlkQ29udGFpbmVyICBmcm9tICcuLi8uLi8uLi9zcmMvZ3JpZC9Db250YWluZXIubWpzJztcbmltcG9ydCBJbnRlcnZlbnRpb25zICBmcm9tICcuLi9zdG9yZS9JbnRlcnZlbnRpb25zLm1qcyc7XG5cbi8qKlxuICogQGNsYXNzIEFnZW50T1Mudmlldy5JbnRlcnZlbnRpb25QYW5lbFxuICogQGV4dGVuZHMgTmVvLmRhc2hib2FyZC5QYW5lbFxuICovXG5jbGFzcyBJbnRlcnZlbnRpb25QYW5lbCBleHRlbmRzIERhc2hib2FyZFBhbmVsIHtcbiAgICBzdGF0aWMgY29uZmlnID0ge1xuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfSBjbGFzc05hbWU9J0FnZW50T1Mudmlldy5JbnRlcnZlbnRpb25QYW5lbCdcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgY2xhc3NOYW1lOiAnQWdlbnRPUy52aWV3LkludGVydmVudGlvblBhbmVsJyxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ30gbnR5cGU9J2ludGVydmVudGlvbi1wYW5lbCdcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgbnR5cGU6ICdpbnRlcnZlbnRpb24tcGFuZWwnLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nW119IGNscz1bJ2FnZW50LXBhbmVsLWludGVydmVudGlvbiddXG4gICAgICAgICAqIEByZWFjdGl2ZVxuICAgICAgICAgKi9cbiAgICAgICAgY2xzOiBbJ2FnZW50LXBhbmVsLWludGVydmVudGlvbiddLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7T2JqZWN0fSBsYXlvdXQ9e250eXBlOiAnZml0J31cbiAgICAgICAgICogQHJlYWN0aXZlXG4gICAgICAgICAqL1xuICAgICAgICBsYXlvdXQ6IHtudHlwZTogJ2ZpdCd9LFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7RnVuY3Rpb258U3RyaW5nfG51bGx9IHBvcHVwVXJsPSdhcHBzL2FnZW50b3MvY2hpbGRhcHBzL3dpZGdldC9pbmRleC5odG1sJ1xuICAgICAgICAgKi9cbiAgICAgICAgcG9wdXBVcmw6ICdhcHBzL2FnZW50b3MvY2hpbGRhcHBzL3dpZGdldC9pbmRleC5odG1sJyxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge09iamVjdFtdfSBoZWFkZXJzXG4gICAgICAgICAqL1xuICAgICAgICBoZWFkZXJzOiBbe1xuICAgICAgICAgICAgZG9jazogJ3RvcCcsXG4gICAgICAgICAgICBjbHMgOiBbJ25lby1kcmFnZ2FibGUnXSxcbiAgICAgICAgICAgIHRleHQ6ICdJbnRlcnZlbnRpb24nXG4gICAgICAgIH1dLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7T2JqZWN0W119IGl0ZW1zXG4gICAgICAgICAqL1xuICAgICAgICBpdGVtczogW3tcbiAgICAgICAgICAgIG1vZHVsZSA6IEdyaWRDb250YWluZXIsXG4gICAgICAgICAgICBzdG9yZSAgOiBJbnRlcnZlbnRpb25zLFxuICAgICAgICAgICAgY29sdW1uczogW3tcbiAgICAgICAgICAgICAgICBkYXRhRmllbGQ6ICd0aW1lc3RhbXAnLFxuICAgICAgICAgICAgICAgIHRleHQgICAgIDogJ1RpbWUnLFxuICAgICAgICAgICAgICAgIHdpZHRoICAgIDogMTAwLFxuICAgICAgICAgICAgICAgIHJlbmRlcmVyIDogKHt2YWx1ZX0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF2YWx1ZSkgcmV0dXJuICcnO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYFske25ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KCdkZWZhdWx0Jywge1xuICAgICAgICAgICAgICAgICAgICAgICAgaG91ciAgOiAnMi1kaWdpdCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW51dGU6ICcyLWRpZ2l0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlY29uZDogJzItZGlnaXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgaG91cjEyOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICB9KS5mb3JtYXQodmFsdWUpfV1gO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBkYXRhRmllbGQ6ICdtZXNzYWdlJyxcbiAgICAgICAgICAgICAgICB0ZXh0ICAgICA6ICdNZXNzYWdlJyxcbiAgICAgICAgICAgICAgICBmbGV4ICAgICA6IDFcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBkYXRhRmllbGQ6ICdwcmlvcml0eScsXG4gICAgICAgICAgICAgICAgdGV4dCAgICAgOiAnUHJpb3JpdHknLFxuICAgICAgICAgICAgICAgIHdpZHRoICAgIDogMTAwLFxuICAgICAgICAgICAgICAgIHJlbmRlcmVyIDogKHt2YWx1ZX0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNscyA6IFsnYWdlbnQtcHJpb3JpdHknLCBgYWdlbnQtcHJpb3JpdHktJHt2YWx1ZX1gXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHZhbHVlXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfV1cbiAgICAgICAgfV1cbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IE5lby5zZXR1cENsYXNzKEludGVydmVudGlvblBhbmVsKTtcbiIsImltcG9ydCBEYXNoYm9hcmRQYW5lbCBmcm9tICcuLi8uLi8uLi9zcmMvZGFzaGJvYXJkL1BhbmVsLm1qcyc7XG5cbi8qKlxuICogQGNsYXNzIEFnZW50T1Mudmlldy5TdHJhdGVneUNhcmRQYW5lbFxuICogQGV4dGVuZHMgTmVvLmRhc2hib2FyZC5QYW5lbFxuICovXG5jbGFzcyBTdHJhdGVneUNhcmRQYW5lbCBleHRlbmRzIERhc2hib2FyZFBhbmVsIHtcbiAgICBzdGF0aWMgY29uZmlnID0ge1xuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfSBjbGFzc05hbWU9J0FnZW50T1Mudmlldy5TdHJhdGVneUNhcmRQYW5lbCdcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgY2xhc3NOYW1lOiAnQWdlbnRPUy52aWV3LlN0cmF0ZWd5Q2FyZFBhbmVsJyxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ1tdfSBiYXNlQ2xzPVsnYWdlbnQta3BpLWNhcmQtcGFuZWwnLCduZW8tcGFuZWwnLCduZW8tY29udGFpbmVyJ11cbiAgICAgICAgICogQHJlYWN0aXZlXG4gICAgICAgICAqL1xuICAgICAgICBiYXNlQ2xzOiBbJ2FnZW50LWtwaS1jYXJkLXBhbmVsJywgJ25lby1wYW5lbCcsICduZW8tY29udGFpbmVyJ10sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtPYmplY3RbXX0gaGVhZGVyc1xuICAgICAgICAgKiBAcmVhY3RpdmVcbiAgICAgICAgICovXG4gICAgICAgIGhlYWRlcnM6IFt7XG4gICAgICAgICAgICBjbHMgOiBbJ25lby1wYW5lbC1oZWFkZXInLCAnbmVvLWRyYWdnYWJsZSddLFxuICAgICAgICAgICAgZG9jazogJ3RvcCdcbiAgICAgICAgfV0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtTdHJpbmd8bnVsbH0gdGl0bGVfPW51bGxcbiAgICAgICAgICogQHJlYWN0aXZlXG4gICAgICAgICAqL1xuICAgICAgICB0aXRsZV86IG51bGwsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtTdHJpbmd8bnVsbH0gdmFsdWVfPW51bGxcbiAgICAgICAgICogQHJlYWN0aXZlXG4gICAgICAgICAqL1xuICAgICAgICB2YWx1ZV86IG51bGwsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtPYmplY3RbXX0gaXRlbXNcbiAgICAgICAgICovXG4gICAgICAgIGl0ZW1zOiBbe1xuICAgICAgICAgICAgbnR5cGUgICAgOiAnY29tcG9uZW50JyxcbiAgICAgICAgICAgIGNscyAgICAgIDogWydhZ2VudC1rcGktY2FyZCddLFxuICAgICAgICAgICAgcmVmZXJlbmNlOiAnYm9keS1jb21wb25lbnQnLFxuICAgICAgICAgICAgdmRvbSAgICAgOiB7Y246IFt7Y2xzOiAnYWdlbnQta3BpLXZhbHVlJ31dfVxuICAgICAgICB9XVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCBhZnRlciB0aGUgdGl0bGUgY29uZmlnIGdvdCBjaGFuZ2VkXG4gICAgICogQHBhcmFtIHtTdHJpbmd8bnVsbH0gdmFsdWVcbiAgICAgKiBAcGFyYW0ge1N0cmluZ3xudWxsfSBvbGRWYWx1ZVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBhZnRlclNldFRpdGxlKHZhbHVlLCBvbGRWYWx1ZSkge1xuICAgICAgICB0aGlzLmhlYWRlcnNbMF0udGV4dCA9IHZhbHVlXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIGFmdGVyIHRoZSB2YWx1ZSBjb25maWcgZ290IGNoYW5nZWRcbiAgICAgKiBAcGFyYW0ge1N0cmluZ3xudWxsfSB2YWx1ZVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfG51bGx9IG9sZFZhbHVlXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIGFmdGVyU2V0VmFsdWUodmFsdWUsIG9sZFZhbHVlKSB7XG4gICAgICAgIGxldCBib2R5Q29tcG9uZW50ID0gdGhpcy5nZXRJdGVtKCdib2R5LWNvbXBvbmVudCcpO1xuXG4gICAgICAgIGJvZHlDb21wb25lbnQudmRvbS5jblswXS50ZXh0ID0gdmFsdWU7XG4gICAgICAgIGJvZHlDb21wb25lbnQudXBkYXRlPy4oKSAvLyBPbmx5IGF2YWlsYWJsZSBhZnRlciBjb25zdHJ1Y3Rpb25cbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IE5lby5zZXR1cENsYXNzKFN0cmF0ZWd5Q2FyZFBhbmVsKTtcbiIsImltcG9ydCBEYXNoYm9hcmQgICAgICAgICAgICAgICBmcm9tICcuLi8uLi8uLi9zcmMvZGFzaGJvYXJkL0NvbnRhaW5lci5tanMnO1xuaW1wb3J0IERhc2hib2FyZFBhbmVsICAgICAgICAgIGZyb20gJy4uLy4uLy4uL3NyYy9kYXNoYm9hcmQvUGFuZWwubWpzJztcbmltcG9ydCBTdHJhdGVneUNhcmRQYW5lbCAgICAgICBmcm9tICcuL1N0cmF0ZWd5Q2FyZFBhbmVsLm1qcyc7XG5pbXBvcnQgU3RyYXRlZ3lQYW5lbENvbnRyb2xsZXIgZnJvbSAnLi9TdHJhdGVneVBhbmVsQ29udHJvbGxlci5tanMnO1xuXG4vKipcbiAqIEBjbGFzcyBBZ2VudE9TLnZpZXcuU3RyYXRlZ3lQYW5lbFxuICogQGV4dGVuZHMgTmVvLmRhc2hib2FyZC5QYW5lbFxuICovXG5jbGFzcyBTdHJhdGVneVBhbmVsIGV4dGVuZHMgRGFzaGJvYXJkUGFuZWwge1xuICAgIHN0YXRpYyBjb25maWcgPSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtTdHJpbmd9IGNsYXNzTmFtZT0nQWdlbnRPUy52aWV3LlN0cmF0ZWd5UGFuZWwnXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIGNsYXNzTmFtZTogJ0FnZW50T1Mudmlldy5TdHJhdGVneVBhbmVsJyxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ1tdfSBjbHM9WydhZ2VudC1wYW5lbC1zdHJhdGVneSddXG4gICAgICAgICAqIEByZWFjdGl2ZVxuICAgICAgICAgKi9cbiAgICAgICAgY2xzOiBbJ2FnZW50LXBhbmVsLXN0cmF0ZWd5J10sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtOZW8uY29udHJvbGxlci5Db21wb25lbnR9IGNvbnRyb2xsZXI9U3RyYXRlZ3lQYW5lbENvbnRyb2xsZXJcbiAgICAgICAgICogQHJlYWN0aXZlXG4gICAgICAgICAqL1xuICAgICAgICBjb250cm9sbGVyOiBTdHJhdGVneVBhbmVsQ29udHJvbGxlcixcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge051bWJlcn0gZmxleD0xXG4gICAgICAgICAqL1xuICAgICAgICBmbGV4OiAxLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7T2JqZWN0W119IGhlYWRlcnNcbiAgICAgICAgICovXG4gICAgICAgIGhlYWRlcnM6IFt7XG4gICAgICAgICAgICBkb2NrOiAndG9wJyxcbiAgICAgICAgICAgIGNscyA6IFsnbmVvLWRyYWdnYWJsZSddLFxuICAgICAgICAgICAgdGV4dDogJ1N0cmF0ZWd5IERhc2hib2FyZCdcbiAgICAgICAgfV0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtPYmplY3R9IGxheW91dD0nZml0J1xuICAgICAgICAgKiBAcmVhY3RpdmVcbiAgICAgICAgICovXG4gICAgICAgIGxheW91dDogJ2ZpdCcsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtGdW5jdGlvbnxTdHJpbmd8bnVsbH0gcG9wdXBVcmw9J2FwcHMvYWdlbnRvcy9jaGlsZGFwcHMvd2lkZ2V0L2luZGV4Lmh0bWwnXG4gICAgICAgICAqL1xuICAgICAgICBwb3B1cFVybDogJ2FwcHMvYWdlbnRvcy9jaGlsZGFwcHMvd2lkZ2V0L2luZGV4Lmh0bWwnLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7T2JqZWN0W119IGl0ZW1zXG4gICAgICAgICAqL1xuICAgICAgICBpdGVtczogW3tcbiAgICAgICAgICAgIG1vZHVsZSAgICAgICAgICAgOiBEYXNoYm9hcmQsXG4gICAgICAgICAgICBjbHMgICAgICAgICAgICAgIDogWydhZ2VudC1rcGktZGFzaGJvYXJkJ10sXG4gICAgICAgICAgICBkcmFnUHJveHlFeHRyYUNsczogWydhZ2VudC1wYW5lbC1zdHJhdGVneScsICduZW8tcGFuZWwnXSwgLy8gRW5zdXJlIHN0eWxlcyBjYXJyeSBvdmVyIHRvIHBvcHVwIHByb3h5XG4gICAgICAgICAgICBsYXlvdXQgICAgICAgICAgIDoge250eXBlOiAnaGJveCcsIGFsaWduOiAnc3RyZXRjaCd9LFxuICAgICAgICAgICAgcG9wdXBVcmwgICAgICAgICA6ICdhcHBzL2FnZW50b3MvY2hpbGRhcHBzL3N0cmF0ZWd5L2luZGV4Lmh0bWwnLFxuXG4gICAgICAgICAgICBpdGVtRGVmYXVsdHM6IHtcbiAgICAgICAgICAgICAgICBtb2R1bGU6IFN0cmF0ZWd5Q2FyZFBhbmVsLFxuICAgICAgICAgICAgICAgIGZsZXggIDogMVxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgaXRlbXM6IFt7XG4gICAgICAgICAgICAgICAgY2xzICAgICAgOiBbJ3ZlbG9jaXR5J10sXG4gICAgICAgICAgICAgICAgcmVmZXJlbmNlOiAna3BpLXZlbG9jaXR5JyxcbiAgICAgICAgICAgICAgICB0aXRsZSAgICA6ICdWZWxvY2l0eScsXG4gICAgICAgICAgICAgICAgdmFsdWUgICAgOiAnODUlJ1xuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIGNscyAgICAgIDogWydhY3RpdmUtZXBpY3MnXSxcbiAgICAgICAgICAgICAgICByZWZlcmVuY2U6ICdrcGktYWN0aXZlLWVwaWNzJyxcbiAgICAgICAgICAgICAgICB0aXRsZSAgICA6ICdBY3RpdmUgRXBpY3MnLFxuICAgICAgICAgICAgICAgIHZhbHVlICAgIDogJzEyJ1xuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIGNscyAgICAgIDogWyd1cHRpbWUnXSxcbiAgICAgICAgICAgICAgICByZWZlcmVuY2U6ICdrcGktdXB0aW1lJyxcbiAgICAgICAgICAgICAgICB0aXRsZSAgICA6ICdVcHRpbWUnLFxuICAgICAgICAgICAgICAgIHZhbHVlICAgIDogJzk4LjUlJ1xuICAgICAgICAgICAgfV1cbiAgICAgICAgfV1cbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IE5lby5zZXR1cENsYXNzKFN0cmF0ZWd5UGFuZWwpO1xuIiwiaW1wb3J0IENvbnRyb2xsZXIgZnJvbSAnLi4vLi4vLi4vc3JjL2NvbnRyb2xsZXIvQ29tcG9uZW50Lm1qcyc7XG5cbi8qKlxuICogQGNsYXNzIEFnZW50T1Mudmlldy5TdHJhdGVneVBhbmVsQ29udHJvbGxlclxuICogQGV4dGVuZHMgTmVvLmNvbnRyb2xsZXIuQ29tcG9uZW50XG4gKi9cbmNsYXNzIFN0cmF0ZWd5UGFuZWxDb250cm9sbGVyIGV4dGVuZHMgQ29udHJvbGxlciB7XG4gICAgc3RhdGljIGNvbmZpZyA9IHtcbiAgICAgICAgY2xhc3NOYW1lOiAnQWdlbnRPUy52aWV3LlN0cmF0ZWd5UGFuZWxDb250cm9sbGVyJ1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTmVvLnNldHVwQ2xhc3MoU3RyYXRlZ3lQYW5lbENvbnRyb2xsZXIpO1xuIiwiaW1wb3J0IEJhc2VWaWV3cG9ydCAgICAgICBmcm9tICcuLi8uLi8uLi9zcmMvY29udGFpbmVyL1ZpZXdwb3J0Lm1qcyc7XG5pbXBvcnQgRGFzaGJvYXJkICAgICAgICAgIGZyb20gJy4uLy4uLy4uL3NyYy9kYXNoYm9hcmQvQ29udGFpbmVyLm1qcyc7XG5pbXBvcnQgUGFuZWwgICAgICAgICAgICAgIGZyb20gJy4uLy4uLy4uL3NyYy9jb250YWluZXIvUGFuZWwubWpzJztcbmltcG9ydCBCbGFja2JvYXJkICAgICAgICAgZnJvbSAnLi9CbGFja2JvYXJkLm1qcyc7XG5pbXBvcnQgSW50ZXJ2ZW50aW9uUGFuZWwgIGZyb20gJy4vSW50ZXJ2ZW50aW9uUGFuZWwubWpzJztcbmltcG9ydCBTdHJhdGVneVBhbmVsICAgICAgZnJvbSAnLi9TdHJhdGVneVBhbmVsLm1qcyc7XG5pbXBvcnQgVmlld3BvcnRDb250cm9sbGVyIGZyb20gJy4vVmlld3BvcnRDb250cm9sbGVyLm1qcyc7XG5cbi8qKlxuICogQGNsYXNzIEFnZW50T1Mudmlldy5WaWV3cG9ydFxuICogQGV4dGVuZHMgTmVvLmNvbnRhaW5lci5WaWV3cG9ydFxuICovXG5jbGFzcyBWaWV3cG9ydCBleHRlbmRzIEJhc2VWaWV3cG9ydCB7XG4gICAgc3RhdGljIGNvbmZpZyA9IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ30gY2xhc3NOYW1lPSdBZ2VudE9TLnZpZXcuVmlld3BvcnQnXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIGNsYXNzTmFtZTogJ0FnZW50T1Mudmlldy5WaWV3cG9ydCcsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtTdHJpbmdbXX0gY2xzPVsnYWdlbnQtb3Mtdmlld3BvcnQnXVxuICAgICAgICAgKiBAcmVhY3RpdmVcbiAgICAgICAgICovXG4gICAgICAgIGNsczogWydhZ2VudC1vcy12aWV3cG9ydCddLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7TmVvLmNvbnRyb2xsZXIuQ29tcG9uZW50fSBjb250cm9sbGVyPVZpZXdwb3J0Q29udHJvbGxlclxuICAgICAgICAgKiBAcmVhY3RpdmVcbiAgICAgICAgICovXG4gICAgICAgIGNvbnRyb2xsZXI6IFZpZXdwb3J0Q29udHJvbGxlcixcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge09iamVjdH0gbGF5b3V0PXtudHlwZTondmJveCcsYWxpZ246J3N0cmV0Y2gnfVxuICAgICAgICAgKiBAcmVhY3RpdmVcbiAgICAgICAgICovXG4gICAgICAgIGxheW91dDoge250eXBlOiAndmJveCcsIGFsaWduOiAnc3RyZXRjaCd9LFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7T2JqZWN0W119IGl0ZW1zXG4gICAgICAgICAqL1xuICAgICAgICBpdGVtczogW3tcbiAgICAgICAgICAgIG50eXBlOiAndG9vbGJhcicsXG4gICAgICAgICAgICBjbHMgIDogWydhZ2VudC10b3AtdG9vbGJhciddLFxuICAgICAgICAgICAgZmxleCA6ICdub25lJyxcbiAgICAgICAgICAgIGl0ZW1zOiBbe1xuICAgICAgICAgICAgICAgIG50eXBlOiAnY29tcG9uZW50JyxcbiAgICAgICAgICAgICAgICBjbHMgIDogWydhZ2VudC1sb2dvJ10sXG4gICAgICAgICAgICAgICAgaHRtbCA6ICc8aW1nIHNyYz1cIi4uLy4uL3Jlc291cmNlcy9pbWFnZXMvbG9nby9uZW9fbG9nb19jeWJlcnB1bmsuc3ZnXCIgYWx0PVwiTmVvLm1qcyBMb2dvXCI+J1xuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIG50eXBlOiAnbGFiZWwnLFxuICAgICAgICAgICAgICAgIHRleHQgOiAnQWdlbnQgT1MgQ29tbWFuZCBDZW50ZXInXG4gICAgICAgICAgICB9LCAnLT4nLCB7XG4gICAgICAgICAgICAgICAgbnR5cGUgIDogJ2J1dHRvbicsXG4gICAgICAgICAgICAgICAgY2xzICAgIDogWydhZ2VudC1idXR0b24nXSxcbiAgICAgICAgICAgICAgICBpY29uQ2xzOiAnZmEgZmEtd2luZG93LXJlc3RvcmUnLFxuICAgICAgICAgICAgICAgIHRleHQgICA6ICdEZXRhY2ggU3dhcm0gVmlldycsXG4gICAgICAgICAgICAgICAgaGFuZGxlcjogJ29uT3BlblN3YXJtQ2xpY2snXG4gICAgICAgICAgICB9XVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBtb2R1bGUgICAgICAgICAgIDogRGFzaGJvYXJkLFxuICAgICAgICAgICAgZHJhZ1Byb3h5RXh0cmFDbHM6IFsnYWdlbnQtb3Mtdmlld3BvcnQnLCAnbmVvLXZpZXdwb3J0J10sXG4gICAgICAgICAgICBmbGV4ICAgICAgICAgICAgIDogMSxcbiAgICAgICAgICAgIHBvcHVwVXJsICAgICAgICAgOiAnYXBwcy9hZ2VudG9zL2NoaWxkYXBwcy93aWRnZXQvaW5kZXguaHRtbCcsXG4gICAgICAgICAgICByZWZlcmVuY2UgICAgICAgIDogJ2Rhc2hib2FyZCcsXG4gICAgICAgICAgICBzb3J0R3JvdXAgICAgICAgIDogJ25lby1jb25uZWN0ZWQtZGFzaGJvYXJkJyxcbiAgICAgICAgICAgIGNscyAgICAgICAgICAgICAgOiBbJ2FnZW50LWRhc2hib2FyZCddLFxuICAgICAgICAgICAgc3R5bGUgICAgICAgICAgICA6IHttYXJnaW46ICcyMHB4J30sXG5cbiAgICAgICAgICAgIGl0ZW1zOiBbe1xuICAgICAgICAgICAgICAgIG1vZHVsZSAgIDogU3RyYXRlZ3lQYW5lbCxcbiAgICAgICAgICAgICAgICBmbGV4ICAgICA6IDIsXG4gICAgICAgICAgICAgICAgcmVmZXJlbmNlOiAnc3RyYXRlZ3knXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgbW9kdWxlICAgOiBQYW5lbCxcbiAgICAgICAgICAgICAgICBjbHMgICAgICA6IFsnYWdlbnQtcGFuZWwtc3dhcm0nXSxcbiAgICAgICAgICAgICAgICBmbGV4ICAgICA6IDUsXG4gICAgICAgICAgICAgICAgcG9wdXBVcmwgOiAnYXBwcy9hZ2VudG9zL2NoaWxkYXBwcy9zd2FybS9pbmRleC5odG1sJyxcbiAgICAgICAgICAgICAgICByZWZlcmVuY2U6ICdzd2FybScsXG4gICAgICAgICAgICAgICAgaGVhZGVycyAgOiBbe1xuICAgICAgICAgICAgICAgICAgICBkb2NrOiAndG9wJyxcbiAgICAgICAgICAgICAgICAgICAgY2xzIDogWyduZW8tZHJhZ2dhYmxlJ10sXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6ICdTd2FybSBWaWV3J1xuICAgICAgICAgICAgICAgIH1dLFxuICAgICAgICAgICAgICAgIGl0ZW1zICAgIDogW3tcbiAgICAgICAgICAgICAgICAgICAgbW9kdWxlICAgOiBCbGFja2JvYXJkLFxuICAgICAgICAgICAgICAgICAgICBzdHlsZSAgICA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJyMwMDAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0ICAgICAgICAgOiAnMTAwJScsXG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aCAgICAgICAgICA6ICcxMDAlJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBtb2R1bGUgICA6IEludGVydmVudGlvblBhbmVsLFxuICAgICAgICAgICAgICAgIGZsZXggICAgIDogMyxcbiAgICAgICAgICAgICAgICByZWZlcmVuY2U6ICdpbnRlcnZlbnRpb24nXG4gICAgICAgICAgICB9XVxuICAgICAgICB9XVxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTmVvLnNldHVwQ2xhc3MoVmlld3BvcnQpO1xuIiwiaW1wb3J0IENvbnRyb2xsZXIgZnJvbSAnLi4vLi4vLi4vc3JjL2NvbnRyb2xsZXIvQ29tcG9uZW50Lm1qcyc7XG5cbi8qKlxuICogQGNsYXNzIEFnZW50T1Mudmlldy5WaWV3cG9ydENvbnRyb2xsZXJcbiAqIEBleHRlbmRzIE5lby5jb250cm9sbGVyLkNvbXBvbmVudFxuICovXG5jbGFzcyBWaWV3cG9ydENvbnRyb2xsZXIgZXh0ZW5kcyBDb250cm9sbGVyIHtcbiAgICBzdGF0aWMgY29uZmlnID0ge1xuICAgICAgICBjbGFzc05hbWU6ICdBZ2VudE9TLnZpZXcuVmlld3BvcnRDb250cm9sbGVyJ1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhXG4gICAgICovXG4gICAgYXN5bmMgb25PcGVuU3dhcm1DbGljayhkYXRhKSB7XG4gICAgICAgIGxldCBuYW1lICAgICAgICAgICAgICAgICAgICA9ICdzd2FybScsXG4gICAgICAgICAgICB7Y29uZmlnLCB3aW5kb3dDb25maWdzfSA9IE5lbyxcbiAgICAgICAgICAgIHtlbnZpcm9ubWVudH0gICAgICAgICAgID0gY29uZmlnLFxuICAgICAgICAgICAgZmlyc3RXaW5kb3dJZCAgICAgICAgICAgPSBPYmplY3Qua2V5cyh3aW5kb3dDb25maWdzKVswXSxcbiAgICAgICAgICAgIHtiYXNlUGF0aH0gICAgICAgICAgICAgID0gd2luZG93Q29uZmlnc1tmaXJzdFdpbmRvd0lkXSxcbiAgICAgICAgICAgIHVybDtcblxuICAgICAgICBpZiAoZW52aXJvbm1lbnQgIT09ICdkZXZlbG9wbWVudCcpIHtcbiAgICAgICAgICAgIGJhc2VQYXRoID0gYCR7YmFzZVBhdGggKyBlbnZpcm9ubWVudH0vYFxuICAgICAgICB9XG5cbiAgICAgICAgdXJsID0gYCR7YmFzZVBhdGh9YXBwcy9hZ2VudG9zL2NoaWxkYXBwcy9zd2FybS9pbmRleC5odG1sP25hbWU9JHtuYW1lfWA7XG5cbiAgICAgICAgYXdhaXQgTmVvLk1haW4ud2luZG93T3Blbih7XG4gICAgICAgICAgICB1cmwsXG4gICAgICAgICAgICB3aW5kb3dJZCAgICAgIDogdGhpcy53aW5kb3dJZCxcbiAgICAgICAgICAgIHdpbmRvd05hbWUgICAgOiBuYW1lLFxuICAgICAgICAgICAgd2luZG93RmVhdHVyZXM6ICdoZWlnaHQ9NjAwLHdpZHRoPTgwMCxsZWZ0PTUwLHRvcD01MCdcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBOZW8uc2V0dXBDbGFzcyhWaWV3cG9ydENvbnRyb2xsZXIpO1xuIiwiaW1wb3J0IENvbXBvbmVudCBmcm9tICcuL0Jhc2UubWpzJztcblxuLyoqXG4gKiBAY2xhc3MgTmVvLmNvbXBvbmVudC5DYW52YXNcbiAqIEBleHRlbmRzIE5lby5jb21wb25lbnQuQmFzZVxuICovXG5jbGFzcyBDYW52YXMgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIHN0YXRpYyBjb25maWcgPSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtTdHJpbmd9IGNsYXNzTmFtZT0nTmVvLmNvbXBvbmVudC5DYW52YXMnXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIGNsYXNzTmFtZTogJ05lby5jb21wb25lbnQuQ2FudmFzJyxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ30gbnR5cGU9J2NhbnZhcydcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgbnR5cGU6ICdjYW52YXMnLFxuICAgICAgICAvKipcbiAgICAgICAgICogdHJ1ZSBhcHBsaWVzIGEgbWFpbi5hZGRvbi5SZXNpemVPYnNlcnZlciBhbmQgZmlyZXMgYSBjdXN0b20gcmVzaXplIGV2ZW50XG4gICAgICAgICAqIHdoaWNoIG90aGVyIGluc3RhbmNlcyBjYW4gc3Vic2NyaWJlIHRvLlxuICAgICAgICAgKiBAbWVtYmVyIHtCb29sZWFufSBtb25pdG9yU2l6ZV89dHJ1ZVxuICAgICAgICAgKiBAcmVhY3RpdmVcbiAgICAgICAgICovXG4gICAgICAgIG1vbml0b3JTaXplXzogdHJ1ZSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge0Jvb2xlYW59IG9mZnNjcmVlbj10cnVlXG4gICAgICAgICAqL1xuICAgICAgICBvZmZzY3JlZW46IHRydWUsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBPbmx5IGFwcGxpY2FibGUgaWYgb2Zmc2NyZWVuID09PSB0cnVlLlxuICAgICAgICAgKiB0cnVlIG9uY2UgdGhlIG93bmVyc2hpcCBvZiB0aGUgY2FudmFzIG5vZGUgZ290IHRyYW5zZmVycmVkIHRvIHdvcmtlci5DYW52YXMuXG4gICAgICAgICAqIEBtZW1iZXIge0Jvb2xlYW59IG9mZnNjcmVlblJlZ2lzdGVyZWRfPWZhbHNlXG4gICAgICAgICAqIEByZWFjdGl2ZVxuICAgICAgICAgKi9cbiAgICAgICAgb2Zmc2NyZWVuUmVnaXN0ZXJlZF86IGZhbHNlLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7T2JqZWN0fSBfdmRvbT17dGFnOiAnY2FudmFzJ31cbiAgICAgICAgICovXG4gICAgICAgIF92ZG9tOlxuICAgICAgICB7dGFnOiAnY2FudmFzJ31cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgYWZ0ZXIgdGhlIG1vdW50ZWQgY29uZmlnIGdvdCBjaGFuZ2VkXG4gICAgICogQHBhcmFtIHtCb29sZWFufSB2YWx1ZVxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gb2xkVmFsdWVcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgYXN5bmMgYWZ0ZXJTZXRNb3VudGVkKHZhbHVlLCBvbGRWYWx1ZSkge1xuICAgICAgICBzdXBlci5hZnRlclNldE1vdW50ZWQodmFsdWUsIG9sZFZhbHVlKTtcblxuICAgICAgICBsZXQgbWUgICAgICAgICAgPSB0aGlzLFxuICAgICAgICAgICAgaWQgICAgICAgICAgPSBtZS5nZXRDYW52YXNJZCgpLFxuICAgICAgICAgICAge29mZnNjcmVlbn0gPSBtZTtcblxuICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgIGF3YWl0IG1lLnRpbWVvdXQoMzApOyAvLyBuZXh0IHJBRiB0aWNrXG5cbiAgICAgICAgICAgIGlmIChtZS5tb25pdG9yU2l6ZSkge1xuICAgICAgICAgICAgICAgIG1lLmFkZERvbUxpc3RlbmVycyhbe1xuICAgICAgICAgICAgICAgICAgICBkZWxlZ2F0ZTogYCMke21lLmdldENhbnZhc0lkKCl9YCxcbiAgICAgICAgICAgICAgICAgICAgcmVzaXplICA6IG1lLm9uRG9tUmVzaXplLFxuICAgICAgICAgICAgICAgICAgICBzY29wZSAgIDogbWVcbiAgICAgICAgICAgICAgICB9XSlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG9mZnNjcmVlbikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBOZW8ubWFpbi5Eb21BY2Nlc3MuZ2V0T2Zmc2NyZWVuQ2FudmFzKHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZUlkICA6IGlkLFxuICAgICAgICAgICAgICAgICAgICB3aW5kb3dJZDogbWUud2luZG93SWRcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGlmIChkYXRhLm9mZnNjcmVlbikge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBOZW8ud29ya2VyLkNhbnZhcy5yZWdpc3RlckNhbnZhcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlICAgIDogZGF0YS5vZmZzY3JlZW4sXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlSWQgIDogaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3dJZDogbWUud2luZG93SWRcbiAgICAgICAgICAgICAgICAgICAgfSwgW2RhdGEub2Zmc2NyZWVuXSk7XG5cbiAgICAgICAgICAgICAgICAgICAgbWUub2Zmc2NyZWVuUmVnaXN0ZXJlZCA9IHRydWVcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHJhbnNmZXJyZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKE5lby5jb25maWcudXNlU2hhcmVkV29ya2Vycykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJldHJpZXZlRGF0YSA9IGF3YWl0IE5lby53b3JrZXIuQ2FudmFzLnJldHJpZXZlQ2FudmFzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlSWQgIDogaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93SWQ6IG1lLndpbmRvd0lkXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJldHJpZXZlRGF0YS5oYXNDYW52YXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZS5vZmZzY3JlZW5SZWdpc3RlcmVkID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKG9mZnNjcmVlbikge1xuICAgICAgICAgICAgbWUub2Zmc2NyZWVuUmVnaXN0ZXJlZCA9IGZhbHNlXG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCBhZnRlciB0aGUgd2luZG93SWQgY29uZmlnIGdvdCBjaGFuZ2VkXG4gICAgICogQHBhcmFtIHtOdW1iZXJ8bnVsbH0gdmFsdWVcbiAgICAgKiBAcGFyYW0ge051bWJlcnxudWxsfSBvbGRWYWx1ZVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBhZnRlclNldFdpbmRvd0lkKHZhbHVlLCBvbGRWYWx1ZSkge1xuICAgICAgICBpZiAob2xkVmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMub2Zmc2NyZWVuUmVnaXN0ZXJlZCA9IGZhbHNlXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBPdmVycmlkZSB0aGlzIG1ldGhvZCB3aGVuIHVzaW5nIHdyYXBwZXJzIChlLmcuIEQzKVxuICAgICAqIEByZXR1cm5zIHtTdHJpbmd9XG4gICAgICovXG4gICAgZ2V0Q2FudmFzSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlkXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGFcbiAgICAgKi9cbiAgICBvbkRvbVJlc2l6ZShkYXRhKSB7XG4gICAgICAgIHRoaXMuZmlyZSgncmVzaXplJywgZGF0YSlcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IE5lby5zZXR1cENsYXNzKENhbnZhcyk7XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9