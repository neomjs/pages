"use strict";
(self["webpackChunkneo_mjs"] = self["webpackChunkneo_mjs"] || []).push([["vendors-examples_table_container_app_mjs"],{

/***/ "./examples/table/container/MainContainer.mjs":
/*!****************************************************!*\
  !*** ./examples/table/container/MainContainer.mjs ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _src_button_Base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../src/button/Base.mjs */ "./src/button/Base.mjs");
/* harmony import */ var _src_selection_table_CellColumnModel_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../src/selection/table/CellColumnModel.mjs */ "./src/selection/table/CellColumnModel.mjs");
/* harmony import */ var _src_selection_table_CellColumnRowModel_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../src/selection/table/CellColumnRowModel.mjs */ "./src/selection/table/CellColumnRowModel.mjs");
/* harmony import */ var _src_selection_table_CellModel_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../src/selection/table/CellModel.mjs */ "./src/selection/table/CellModel.mjs");
/* harmony import */ var _src_selection_table_CellRowModel_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../src/selection/table/CellRowModel.mjs */ "./src/selection/table/CellRowModel.mjs");
/* harmony import */ var _src_form_field_CheckBox_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../src/form/field/CheckBox.mjs */ "./src/form/field/CheckBox.mjs");
/* harmony import */ var _ConfigurationViewport_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../ConfigurationViewport.mjs */ "./examples/ConfigurationViewport.mjs");
/* harmony import */ var _src_selection_table_ColumnModel_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../src/selection/table/ColumnModel.mjs */ "./src/selection/table/ColumnModel.mjs");
/* harmony import */ var _MainStore_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./MainStore.mjs */ "./examples/table/container/MainStore.mjs");
/* harmony import */ var _src_form_field_Number_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../src/form/field/Number.mjs */ "./src/form/field/Number.mjs");
/* harmony import */ var _src_form_field_Radio_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../src/form/field/Radio.mjs */ "./src/form/field/Radio.mjs");
/* harmony import */ var _src_selection_table_RowModel_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../src/selection/table/RowModel.mjs */ "./src/selection/table/RowModel.mjs");
/* harmony import */ var _src_table_Container_mjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../src/table/Container.mjs */ "./src/table/Container.mjs");














/**
 * @class Neo.examples.table.container.MainContainer
 * @extends Neo.examples.ConfigurationViewport
 */
class MainContainer extends _ConfigurationViewport_mjs__WEBPACK_IMPORTED_MODULE_6__["default"] {
    static config = {
        className           : 'Neo.examples.table.container.MainContainer',
        autoMount           : true,
        configItemLabelWidth: 130,
        configPanelFlex     : 1.5,
        exampleComponentFlex: 3,
        layout              : {ntype: 'hbox', align: 'stretch'}
    }

    createConfigurationComponents() {
        let me = this;

        const selectionModelRadioDefaults = {
            module        : _src_form_field_Radio_mjs__WEBPACK_IMPORTED_MODULE_10__["default"],
            hideValueLabel: false,
            labelText     : '',
            name          : 'selectionModel',
            width         : 350
        };

        return [{
            module   : _src_form_field_Number_mjs__WEBPACK_IMPORTED_MODULE_9__["default"],
            labelText: 'height',
            listeners: {change: me.onConfigChange.bind(me, 'height')},
            maxValue : 800,
            minValue : 225,
            stepSize : 5,
            value    : me.exampleComponent.height
        }, {
            ...selectionModelRadioDefaults,
            checked       : me.exampleComponent.selectionModel.ntype === 'selection-table-cellmodel',
            labelText     : 'selectionModel',
            listeners     : {change: me.onRadioChange.bind(me, 'selectionModel', _src_selection_table_CellModel_mjs__WEBPACK_IMPORTED_MODULE_3__["default"])},
            style         : {marginTop: '10px'},
            valueLabelText: 'Cell'
        }, {
            ...selectionModelRadioDefaults,
            checked       : me.exampleComponent.selectionModel.ntype === 'selection-table-columnmodel',
            listeners     : {change: me.onRadioChange.bind(me, 'selectionModel', _src_selection_table_ColumnModel_mjs__WEBPACK_IMPORTED_MODULE_7__["default"])},
            valueLabelText: 'Column'
        }, {
            ...selectionModelRadioDefaults,
            checked       : me.exampleComponent.selectionModel.ntype === 'selection-table-rowmodel',
            listeners     : {change: me.onRadioChange.bind(me, 'selectionModel', _src_selection_table_RowModel_mjs__WEBPACK_IMPORTED_MODULE_11__["default"])},
            valueLabelText: 'Row'
        }, {
            ...selectionModelRadioDefaults,
            checked       : me.exampleComponent.selectionModel.ntype === 'selection-table-cellcolumnmodel',
            listeners     : {change: me.onRadioChange.bind(me, 'selectionModel', _src_selection_table_CellColumnModel_mjs__WEBPACK_IMPORTED_MODULE_1__["default"])},
            valueLabelText: 'Cell & Column'
        }, {
            ...selectionModelRadioDefaults,
            checked       : me.exampleComponent.selectionModel.ntype === 'selection-table-cellrowmodel',
            listeners     : {change: me.onRadioChange.bind(me, 'selectionModel', _src_selection_table_CellRowModel_mjs__WEBPACK_IMPORTED_MODULE_4__["default"])},
            valueLabelText: 'Cell & Row'
        }, {
            ...selectionModelRadioDefaults,
            checked       : me.exampleComponent.selectionModel.ntype === 'selection-table-cellcolumnrowmodel',
            listeners     : {change: me.onRadioChange.bind(me, 'selectionModel', _src_selection_table_CellColumnRowModel_mjs__WEBPACK_IMPORTED_MODULE_2__["default"])},
            valueLabelText: 'Cell & Column & Row'
        }, {
            module   : _src_form_field_CheckBox_mjs__WEBPACK_IMPORTED_MODULE_5__["default"],
            checked  : me.exampleComponent.sortable,
            labelText: 'sortable',
            listeners: {change: me.onConfigChange.bind(me, 'sortable')},
            style    : {marginTop: '10px'}
        }, {
            module   : _src_form_field_CheckBox_mjs__WEBPACK_IMPORTED_MODULE_5__["default"],
            checked  : false,
            labelText: 'Fit width',
            listeners: {
                change({ value }) {
                    const { style } = me.exampleComponent;

                    if (value) {
                        style.width = '100%';
                        style.tableLayout = 'fixed';
                    } else {
                        style.width = '';
                        style.tableLayout = '';
                    }

                    me.exampleComponent.style = style;
                    me.exampleComponent.update();
                }
            },
            style: {marginTop: '10px'}
        }]
    }

    /**
     * @returns {Neo.table.Container}
     */
    createExampleComponent() {
        return Neo.create(_src_table_Container_mjs__WEBPACK_IMPORTED_MODULE_12__["default"], {
            id            : 'myTableStoreContainer',
            selectionModel: _src_selection_table_CellModel_mjs__WEBPACK_IMPORTED_MODULE_3__["default"],
            store         : _MainStore_mjs__WEBPACK_IMPORTED_MODULE_8__["default"],

            columns: [
                {dataField: 'firstname', text: 'Firstname'},
                {dataField: 'lastname',  text: 'Lastname'},
                {dataField: 'githubId',  text: 'Github Id'},
                {dataField: 'country',   text: 'Country'},
                {
                    dataField: 'edit',
                    text     : 'Edit Action',
                    renderer({column, index}) {
                        const
                            me       = this,
                            widgetId = `${column.id}-widget-${index}`,
                            button   = (column.widgetMap || (column.widgetMap = {}))[widgetId] || (column.widgetMap[widgetId] = Neo.create({
                                module  : _src_button_Base_mjs__WEBPACK_IMPORTED_MODULE_0__["default"],
                                appName : me.appName,
                                handler : 'up.editButtonHandler',
                                parentId: 'myTableStoreContainer',
                                text    : 'Edit'
                            }));

                        me.view.updateDepth = -1;

                        return button.createVdomReference()
                    }
                }, {
                    dataField: 'menu',
                    text     : 'Menu',
                    renderer({column, record, index}) {
                        const
                            me       = this,
                            widgetId = `${column.id}-widget-${index}`,
                            button   = (column.widgetMap || (column.widgetMap = {}))[widgetId] || (column.widgetMap[widgetId] = Neo.create('Neo.button.Base', {
                                ntype   : 'button',
                                appName : me.appName,
                                text    : '\u22ee',
                                windowId: me.windowId,
                                menu    : {
                                    items : [{
                                        text : 'Menu option 1'
                                    }, {
                                        text : 'Menu option 2'
                                    }, {
                                        text : 'Menu option 3'
                                    }, {
                                        text : 'Menu option 4'
                                    }]
                                }
                            }));

                        me.view.updateDepth = -1;

                        return button.createVdomReference()
                    }
                }
            ]
        })
    }

    /**
     * @param {Object} data
     */
    editButtonHandler(data) {
        console.log(data)
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(MainContainer));


/***/ }),

/***/ "./examples/table/container/MainModel.mjs":
/*!************************************************!*\
  !*** ./examples/table/container/MainModel.mjs ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _src_data_Model_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../src/data/Model.mjs */ "./src/data/Model.mjs");


/**
 * @class Neo.examples.table.container.MainModel
 * @extends Neo.data.Model
 */
class MainModel extends _src_data_Model_mjs__WEBPACK_IMPORTED_MODULE_0__["default"] {
    static config = {
        className: 'Neo.examples.table.container.MainModel',

        fields: [{
            name: 'colspan',
            type: 'Object'
        }, {
            name: 'country',
            type: 'String'
        }, {
            name: 'firstname',
            type: 'String'
        }, {
            name: 'githubId',
            type: 'String'
        }, {
            name: 'lastname',
            type: 'String'
        }]
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(MainModel));


/***/ }),

/***/ "./examples/table/container/MainStore.mjs":
/*!************************************************!*\
  !*** ./examples/table/container/MainStore.mjs ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _MainModel_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MainModel.mjs */ "./examples/table/container/MainModel.mjs");
/* harmony import */ var _src_data_Store_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../src/data/Store.mjs */ "./src/data/Store.mjs");



/**
 * @class Neo.examples.table.container.MainStore
 * @extends Neo.data.Store
 */
class MainStore extends _src_data_Store_mjs__WEBPACK_IMPORTED_MODULE_1__["default"] {
    static config = {
        className  : 'Neo.examples.table.container.MainStore',
        keyProperty: 'githubId',
        model      : _MainModel_mjs__WEBPACK_IMPORTED_MODULE_0__["default"],

        data: [{
            country  : 'Germany',
            firstname: 'Tobias',
            githubId : 'tobiu',
            lastname : 'Uhlig'
        }, {
            country  : 'USA',
            firstname: 'Rich',
            githubId : 'rwaters',
            lastname : 'Waters'
        }, {
            country  : 'Germany',
            firstname: 'Nils',
            githubId : 'mrsunshine',
            lastname : 'Dehl'
        }, {
            country  : 'USA',
            firstname: 'Gerard',
            githubId : 'camtnbikerrwc',
            lastname : 'Horan'
        }, {
            country  : 'Slovakia',
            firstname: 'Jozef',
            githubId : 'jsakalos',
            lastname : 'Sakalos'
        }, {
            country  : 'Germany',
            firstname: 'Bastian',
            githubId : 'bhaustein',
            lastname : 'Haustein'
        }]
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(MainStore));


/***/ }),

/***/ "./examples/table/container/app.mjs":
/*!******************************************!*\
  !*** ./examples/table/container/app.mjs ***!
  \******************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   onStart: () => (/* binding */ onStart)
/* harmony export */ });
/* harmony import */ var _MainContainer_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MainContainer.mjs */ "./examples/table/container/MainContainer.mjs");


const onStart = () => Neo.app({
    mainView: _MainContainer_mjs__WEBPACK_IMPORTED_MODULE_0__["default"],
    name    : 'Neo.examples.table.container'
});


/***/ }),

/***/ "./src/selection/table/CellColumnRowModel.mjs":
/*!****************************************************!*\
  !*** ./src/selection/table/CellColumnRowModel.mjs ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _CellRowModel_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CellRowModel.mjs */ "./src/selection/table/CellRowModel.mjs");
/* harmony import */ var _ColumnModel_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ColumnModel.mjs */ "./src/selection/table/ColumnModel.mjs");
/* harmony import */ var _util_VDom_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../util/VDom.mjs */ "./src/util/VDom.mjs");




/**
 * @class Neo.selection.table.CellColumnRowModel
 * @extends Neo.selection.table.CellRowModel
 */
class CellColumnRowModel extends _CellRowModel_mjs__WEBPACK_IMPORTED_MODULE_0__["default"] {
    static config = {
        /**
         * @member {String} className='Neo.selection.table.CellColumnRowModel'
         * @protected
         */
        className: 'Neo.selection.table.CellColumnRowModel',
        /**
         * @member {String} ntype='selection-table-cellcolumnrowmodel'
         * @protected
         */
        ntype: 'selection-table-cellcolumnrowmodel',
        /**
         * @member {String} cls='neo-selection-cellcolumnrowmodel'
         * @protected
         */
        cls: 'neo-selection-cellcolumnrowmodel',
        /**
         * @member {String} selectedColumnCellCls='selected-column-cell'
         * @protected
         */
        selectedColumnCellCls: 'selected-column-cell',
        /**
         * @member {Array|null} selectedColumnCellIds=null
         * @protected
         */
        selectedColumnCellIds: null
    }

    /**
     * @param {Object} config
     */
    construct(config) {
        super.construct(config);

        this.selectedColumnCellIds = []
    }

    /**
     * @param {Boolean} [silent] true to prevent a vdom update
     */
    deselectAllCells(silent) {
        let me      = this,
            cellIds = [...me.selectedColumnCellIds],
            {view}  = me;

        cellIds.forEach(cellId => {
            me.deselect(cellId, true, me.selectedColumnCellIds, me.selectedColumnCellCls)
        });

        !silent && view.update()
    }

    /**
     * @param {Object} data
     */
    onCellClick(data) {
        let me = this,
            id = data.data.currentTarget,
            columnNodeIds, index, tbodyNode;

        if (id) {
            index         = _ColumnModel_mjs__WEBPACK_IMPORTED_MODULE_1__["default"].getColumnIndex(id, me.view.items[0].items);
            tbodyNode     = _util_VDom_mjs__WEBPACK_IMPORTED_MODULE_2__["default"].find(me.view.vdom, {tag: 'tbody'}).vdom;
            columnNodeIds = _util_VDom_mjs__WEBPACK_IMPORTED_MODULE_2__["default"].getColumnNodesIds(tbodyNode, index);

            me.deselectAllCells(true);
            me.select(columnNodeIds, me.selectedColumnCellIds, me.selectedColumnCellCls)
        }

        super.onCellClick(data)
    }

    /**
     * @param {Object} data
     * @param {Number} step
     */
    onNavKeyColumn(data, step) {
        let me            = this,
            idArray       = _ColumnModel_mjs__WEBPACK_IMPORTED_MODULE_1__["default"].getCellId(data.path).split('__'),
            currentColumn = idArray[2],
            {view}        = me,
            dataFields    = view.columns.map(c => c.dataField),
            newIndex      = (dataFields.indexOf(currentColumn) + step) % dataFields.length,
            columnNodeIds, tbodyNode;

        while (newIndex < 0) {
            newIndex += dataFields.length
        }

        tbodyNode     = _util_VDom_mjs__WEBPACK_IMPORTED_MODULE_2__["default"].find(me.view.vdom, {tag: 'tbody'}).vdom;
        columnNodeIds = _util_VDom_mjs__WEBPACK_IMPORTED_MODULE_2__["default"].getColumnNodesIds(tbodyNode, newIndex);

        me.deselectAllCells(true);
        me.select(columnNodeIds, me.selectedColumnCellIds, me.selectedColumnCellCls);

        super.onNavKeyColumn(data, step)
    }

    /**
     *
     */
    unregister() {
        this.deselectAllCells();
        super.unregister()
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(CellColumnRowModel));


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2h1bmtzL2FwcC92ZW5kb3JzLWV4YW1wbGVzX3RhYmxlX2NvbnRhaW5lcl9hcHBfbWpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQWlFO0FBQ29CO0FBQ0c7QUFDVDtBQUNHO0FBQ1Q7QUFDTDtBQUNhO0FBQzdCO0FBQ21CO0FBQ0Q7QUFDUTtBQUNUOztBQUVyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixrRUFBcUI7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9COztBQUVBO0FBQ0E7O0FBRUE7QUFDQSw0QkFBNEIsa0VBQUs7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHVCQUF1QixrRUFBVztBQUNsQztBQUNBLHdCQUF3Qiw2Q0FBNkM7QUFDckU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLG9EQUFvRCwwRUFBUyxFQUFFO0FBQzVGLDZCQUE2QixrQkFBa0I7QUFDL0M7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLDZCQUE2QixvREFBb0QsNEVBQVcsRUFBRTtBQUM5RjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsNkJBQTZCLG9EQUFvRCwwRUFBUSxFQUFFO0FBQzNGO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSw2QkFBNkIsb0RBQW9ELGdGQUFlLEVBQUU7QUFDbEc7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLDZCQUE2QixvREFBb0QsNkVBQVksRUFBRTtBQUMvRjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsNkJBQTZCLG9EQUFvRCxtRkFBa0IsRUFBRTtBQUNyRztBQUNBLFNBQVM7QUFDVCx1QkFBdUIsb0VBQVE7QUFDL0I7QUFDQTtBQUNBLHdCQUF3QiwrQ0FBK0M7QUFDdkUsd0JBQXdCO0FBQ3hCLFNBQVM7QUFDVCx1QkFBdUIsb0VBQVE7QUFDL0I7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLE9BQU87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O0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw0QkFBNEIsd0RBQVc7QUFDdkMsNEJBQTRCLHNEQUFRLHFCQUFxQixhQUFhO0FBQ3RFLDRCQUE0QixzREFBUTs7QUFFcEM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBLDRCQUE0Qix3REFBVztBQUN2QztBQUNBLGFBQWEsYUFBYTtBQUMxQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLHdCQUF3QixzREFBUSxxQkFBcUIsYUFBYTtBQUNsRSx3QkFBd0Isc0RBQVE7O0FBRWhDO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGlFQUFlLGtDQUFrQyxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmVvLm1qcy8uL2V4YW1wbGVzL3RhYmxlL2NvbnRhaW5lci9NYWluQ29udGFpbmVyLm1qcyIsIndlYnBhY2s6Ly9uZW8ubWpzLy4vZXhhbXBsZXMvdGFibGUvY29udGFpbmVyL01haW5Nb2RlbC5tanMiLCJ3ZWJwYWNrOi8vbmVvLm1qcy8uL2V4YW1wbGVzL3RhYmxlL2NvbnRhaW5lci9NYWluU3RvcmUubWpzIiwid2VicGFjazovL25lby5tanMvLi9leGFtcGxlcy90YWJsZS9jb250YWluZXIvYXBwLm1qcyIsIndlYnBhY2s6Ly9uZW8ubWpzLy4vc3JjL3NlbGVjdGlvbi90YWJsZS9DZWxsQ29sdW1uUm93TW9kZWwubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCdXR0b24gICAgICAgICAgICAgICAgZnJvbSAnLi4vLi4vLi4vc3JjL2J1dHRvbi9CYXNlLm1qcyc7XG5pbXBvcnQgQ2VsbENvbHVtbk1vZGVsICAgICAgIGZyb20gJy4uLy4uLy4uL3NyYy9zZWxlY3Rpb24vdGFibGUvQ2VsbENvbHVtbk1vZGVsLm1qcyc7XG5pbXBvcnQgQ2VsbENvbHVtblJvd01vZGVsICAgIGZyb20gJy4uLy4uLy4uL3NyYy9zZWxlY3Rpb24vdGFibGUvQ2VsbENvbHVtblJvd01vZGVsLm1qcyc7XG5pbXBvcnQgQ2VsbE1vZGVsICAgICAgICAgICAgIGZyb20gJy4uLy4uLy4uL3NyYy9zZWxlY3Rpb24vdGFibGUvQ2VsbE1vZGVsLm1qcyc7XG5pbXBvcnQgQ2VsbFJvd01vZGVsICAgICAgICAgIGZyb20gJy4uLy4uLy4uL3NyYy9zZWxlY3Rpb24vdGFibGUvQ2VsbFJvd01vZGVsLm1qcyc7XG5pbXBvcnQgQ2hlY2tib3ggICAgICAgICAgICAgIGZyb20gJy4uLy4uLy4uL3NyYy9mb3JtL2ZpZWxkL0NoZWNrQm94Lm1qcyc7XG5pbXBvcnQgQ29uZmlndXJhdGlvblZpZXdwb3J0IGZyb20gJy4uLy4uL0NvbmZpZ3VyYXRpb25WaWV3cG9ydC5tanMnO1xuaW1wb3J0IENvbHVtbk1vZGVsICAgICAgICAgICBmcm9tICcuLi8uLi8uLi9zcmMvc2VsZWN0aW9uL3RhYmxlL0NvbHVtbk1vZGVsLm1qcyc7XG5pbXBvcnQgTWFpblN0b3JlICAgICAgICAgICAgIGZyb20gJy4vTWFpblN0b3JlLm1qcyc7XG5pbXBvcnQgTnVtYmVyRmllbGQgICAgICAgICAgIGZyb20gJy4uLy4uLy4uL3NyYy9mb3JtL2ZpZWxkL051bWJlci5tanMnO1xuaW1wb3J0IFJhZGlvICAgICAgICAgICAgICAgICBmcm9tICcuLi8uLi8uLi9zcmMvZm9ybS9maWVsZC9SYWRpby5tanMnO1xuaW1wb3J0IFJvd01vZGVsICAgICAgICAgICAgICBmcm9tICcuLi8uLi8uLi9zcmMvc2VsZWN0aW9uL3RhYmxlL1Jvd01vZGVsLm1qcyc7XG5pbXBvcnQgVGFibGVDb250YWluZXIgICAgICAgIGZyb20gJy4uLy4uLy4uL3NyYy90YWJsZS9Db250YWluZXIubWpzJztcblxuLyoqXG4gKiBAY2xhc3MgTmVvLmV4YW1wbGVzLnRhYmxlLmNvbnRhaW5lci5NYWluQ29udGFpbmVyXG4gKiBAZXh0ZW5kcyBOZW8uZXhhbXBsZXMuQ29uZmlndXJhdGlvblZpZXdwb3J0XG4gKi9cbmNsYXNzIE1haW5Db250YWluZXIgZXh0ZW5kcyBDb25maWd1cmF0aW9uVmlld3BvcnQge1xuICAgIHN0YXRpYyBjb25maWcgPSB7XG4gICAgICAgIGNsYXNzTmFtZSAgICAgICAgICAgOiAnTmVvLmV4YW1wbGVzLnRhYmxlLmNvbnRhaW5lci5NYWluQ29udGFpbmVyJyxcbiAgICAgICAgYXV0b01vdW50ICAgICAgICAgICA6IHRydWUsXG4gICAgICAgIGNvbmZpZ0l0ZW1MYWJlbFdpZHRoOiAxMzAsXG4gICAgICAgIGNvbmZpZ1BhbmVsRmxleCAgICAgOiAxLjUsXG4gICAgICAgIGV4YW1wbGVDb21wb25lbnRGbGV4OiAzLFxuICAgICAgICBsYXlvdXQgICAgICAgICAgICAgIDoge250eXBlOiAnaGJveCcsIGFsaWduOiAnc3RyZXRjaCd9XG4gICAgfVxuXG4gICAgY3JlYXRlQ29uZmlndXJhdGlvbkNvbXBvbmVudHMoKSB7XG4gICAgICAgIGxldCBtZSA9IHRoaXM7XG5cbiAgICAgICAgY29uc3Qgc2VsZWN0aW9uTW9kZWxSYWRpb0RlZmF1bHRzID0ge1xuICAgICAgICAgICAgbW9kdWxlICAgICAgICA6IFJhZGlvLFxuICAgICAgICAgICAgaGlkZVZhbHVlTGFiZWw6IGZhbHNlLFxuICAgICAgICAgICAgbGFiZWxUZXh0ICAgICA6ICcnLFxuICAgICAgICAgICAgbmFtZSAgICAgICAgICA6ICdzZWxlY3Rpb25Nb2RlbCcsXG4gICAgICAgICAgICB3aWR0aCAgICAgICAgIDogMzUwXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIFt7XG4gICAgICAgICAgICBtb2R1bGUgICA6IE51bWJlckZpZWxkLFxuICAgICAgICAgICAgbGFiZWxUZXh0OiAnaGVpZ2h0JyxcbiAgICAgICAgICAgIGxpc3RlbmVyczoge2NoYW5nZTogbWUub25Db25maWdDaGFuZ2UuYmluZChtZSwgJ2hlaWdodCcpfSxcbiAgICAgICAgICAgIG1heFZhbHVlIDogODAwLFxuICAgICAgICAgICAgbWluVmFsdWUgOiAyMjUsXG4gICAgICAgICAgICBzdGVwU2l6ZSA6IDUsXG4gICAgICAgICAgICB2YWx1ZSAgICA6IG1lLmV4YW1wbGVDb21wb25lbnQuaGVpZ2h0XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIC4uLnNlbGVjdGlvbk1vZGVsUmFkaW9EZWZhdWx0cyxcbiAgICAgICAgICAgIGNoZWNrZWQgICAgICAgOiBtZS5leGFtcGxlQ29tcG9uZW50LnNlbGVjdGlvbk1vZGVsLm50eXBlID09PSAnc2VsZWN0aW9uLXRhYmxlLWNlbGxtb2RlbCcsXG4gICAgICAgICAgICBsYWJlbFRleHQgICAgIDogJ3NlbGVjdGlvbk1vZGVsJyxcbiAgICAgICAgICAgIGxpc3RlbmVycyAgICAgOiB7Y2hhbmdlOiBtZS5vblJhZGlvQ2hhbmdlLmJpbmQobWUsICdzZWxlY3Rpb25Nb2RlbCcsIENlbGxNb2RlbCl9LFxuICAgICAgICAgICAgc3R5bGUgICAgICAgICA6IHttYXJnaW5Ub3A6ICcxMHB4J30sXG4gICAgICAgICAgICB2YWx1ZUxhYmVsVGV4dDogJ0NlbGwnXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIC4uLnNlbGVjdGlvbk1vZGVsUmFkaW9EZWZhdWx0cyxcbiAgICAgICAgICAgIGNoZWNrZWQgICAgICAgOiBtZS5leGFtcGxlQ29tcG9uZW50LnNlbGVjdGlvbk1vZGVsLm50eXBlID09PSAnc2VsZWN0aW9uLXRhYmxlLWNvbHVtbm1vZGVsJyxcbiAgICAgICAgICAgIGxpc3RlbmVycyAgICAgOiB7Y2hhbmdlOiBtZS5vblJhZGlvQ2hhbmdlLmJpbmQobWUsICdzZWxlY3Rpb25Nb2RlbCcsIENvbHVtbk1vZGVsKX0sXG4gICAgICAgICAgICB2YWx1ZUxhYmVsVGV4dDogJ0NvbHVtbidcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgLi4uc2VsZWN0aW9uTW9kZWxSYWRpb0RlZmF1bHRzLFxuICAgICAgICAgICAgY2hlY2tlZCAgICAgICA6IG1lLmV4YW1wbGVDb21wb25lbnQuc2VsZWN0aW9uTW9kZWwubnR5cGUgPT09ICdzZWxlY3Rpb24tdGFibGUtcm93bW9kZWwnLFxuICAgICAgICAgICAgbGlzdGVuZXJzICAgICA6IHtjaGFuZ2U6IG1lLm9uUmFkaW9DaGFuZ2UuYmluZChtZSwgJ3NlbGVjdGlvbk1vZGVsJywgUm93TW9kZWwpfSxcbiAgICAgICAgICAgIHZhbHVlTGFiZWxUZXh0OiAnUm93J1xuICAgICAgICB9LCB7XG4gICAgICAgICAgICAuLi5zZWxlY3Rpb25Nb2RlbFJhZGlvRGVmYXVsdHMsXG4gICAgICAgICAgICBjaGVja2VkICAgICAgIDogbWUuZXhhbXBsZUNvbXBvbmVudC5zZWxlY3Rpb25Nb2RlbC5udHlwZSA9PT0gJ3NlbGVjdGlvbi10YWJsZS1jZWxsY29sdW1ubW9kZWwnLFxuICAgICAgICAgICAgbGlzdGVuZXJzICAgICA6IHtjaGFuZ2U6IG1lLm9uUmFkaW9DaGFuZ2UuYmluZChtZSwgJ3NlbGVjdGlvbk1vZGVsJywgQ2VsbENvbHVtbk1vZGVsKX0sXG4gICAgICAgICAgICB2YWx1ZUxhYmVsVGV4dDogJ0NlbGwgJiBDb2x1bW4nXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIC4uLnNlbGVjdGlvbk1vZGVsUmFkaW9EZWZhdWx0cyxcbiAgICAgICAgICAgIGNoZWNrZWQgICAgICAgOiBtZS5leGFtcGxlQ29tcG9uZW50LnNlbGVjdGlvbk1vZGVsLm50eXBlID09PSAnc2VsZWN0aW9uLXRhYmxlLWNlbGxyb3dtb2RlbCcsXG4gICAgICAgICAgICBsaXN0ZW5lcnMgICAgIDoge2NoYW5nZTogbWUub25SYWRpb0NoYW5nZS5iaW5kKG1lLCAnc2VsZWN0aW9uTW9kZWwnLCBDZWxsUm93TW9kZWwpfSxcbiAgICAgICAgICAgIHZhbHVlTGFiZWxUZXh0OiAnQ2VsbCAmIFJvdydcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgLi4uc2VsZWN0aW9uTW9kZWxSYWRpb0RlZmF1bHRzLFxuICAgICAgICAgICAgY2hlY2tlZCAgICAgICA6IG1lLmV4YW1wbGVDb21wb25lbnQuc2VsZWN0aW9uTW9kZWwubnR5cGUgPT09ICdzZWxlY3Rpb24tdGFibGUtY2VsbGNvbHVtbnJvd21vZGVsJyxcbiAgICAgICAgICAgIGxpc3RlbmVycyAgICAgOiB7Y2hhbmdlOiBtZS5vblJhZGlvQ2hhbmdlLmJpbmQobWUsICdzZWxlY3Rpb25Nb2RlbCcsIENlbGxDb2x1bW5Sb3dNb2RlbCl9LFxuICAgICAgICAgICAgdmFsdWVMYWJlbFRleHQ6ICdDZWxsICYgQ29sdW1uICYgUm93J1xuICAgICAgICB9LCB7XG4gICAgICAgICAgICBtb2R1bGUgICA6IENoZWNrYm94LFxuICAgICAgICAgICAgY2hlY2tlZCAgOiBtZS5leGFtcGxlQ29tcG9uZW50LnNvcnRhYmxlLFxuICAgICAgICAgICAgbGFiZWxUZXh0OiAnc29ydGFibGUnLFxuICAgICAgICAgICAgbGlzdGVuZXJzOiB7Y2hhbmdlOiBtZS5vbkNvbmZpZ0NoYW5nZS5iaW5kKG1lLCAnc29ydGFibGUnKX0sXG4gICAgICAgICAgICBzdHlsZSAgICA6IHttYXJnaW5Ub3A6ICcxMHB4J31cbiAgICAgICAgfSwge1xuICAgICAgICAgICAgbW9kdWxlICAgOiBDaGVja2JveCxcbiAgICAgICAgICAgIGNoZWNrZWQgIDogZmFsc2UsXG4gICAgICAgICAgICBsYWJlbFRleHQ6ICdGaXQgd2lkdGgnLFxuICAgICAgICAgICAgbGlzdGVuZXJzOiB7XG4gICAgICAgICAgICAgICAgY2hhbmdlKHsgdmFsdWUgfSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IHN0eWxlIH0gPSBtZS5leGFtcGxlQ29tcG9uZW50O1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZS50YWJsZUxheW91dCA9ICdmaXhlZCc7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZS53aWR0aCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGUudGFibGVMYXlvdXQgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIG1lLmV4YW1wbGVDb21wb25lbnQuc3R5bGUgPSBzdHlsZTtcbiAgICAgICAgICAgICAgICAgICAgbWUuZXhhbXBsZUNvbXBvbmVudC51cGRhdGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3R5bGU6IHttYXJnaW5Ub3A6ICcxMHB4J31cbiAgICAgICAgfV1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyB7TmVvLnRhYmxlLkNvbnRhaW5lcn1cbiAgICAgKi9cbiAgICBjcmVhdGVFeGFtcGxlQ29tcG9uZW50KCkge1xuICAgICAgICByZXR1cm4gTmVvLmNyZWF0ZShUYWJsZUNvbnRhaW5lciwge1xuICAgICAgICAgICAgaWQgICAgICAgICAgICA6ICdteVRhYmxlU3RvcmVDb250YWluZXInLFxuICAgICAgICAgICAgc2VsZWN0aW9uTW9kZWw6IENlbGxNb2RlbCxcbiAgICAgICAgICAgIHN0b3JlICAgICAgICAgOiBNYWluU3RvcmUsXG5cbiAgICAgICAgICAgIGNvbHVtbnM6IFtcbiAgICAgICAgICAgICAgICB7ZGF0YUZpZWxkOiAnZmlyc3RuYW1lJywgdGV4dDogJ0ZpcnN0bmFtZSd9LFxuICAgICAgICAgICAgICAgIHtkYXRhRmllbGQ6ICdsYXN0bmFtZScsICB0ZXh0OiAnTGFzdG5hbWUnfSxcbiAgICAgICAgICAgICAgICB7ZGF0YUZpZWxkOiAnZ2l0aHViSWQnLCAgdGV4dDogJ0dpdGh1YiBJZCd9LFxuICAgICAgICAgICAgICAgIHtkYXRhRmllbGQ6ICdjb3VudHJ5JywgICB0ZXh0OiAnQ291bnRyeSd9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YUZpZWxkOiAnZWRpdCcsXG4gICAgICAgICAgICAgICAgICAgIHRleHQgICAgIDogJ0VkaXQgQWN0aW9uJyxcbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyZXIoe2NvbHVtbiwgaW5kZXh9KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lICAgICAgID0gdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWRnZXRJZCA9IGAke2NvbHVtbi5pZH0td2lkZ2V0LSR7aW5kZXh9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b24gICA9IChjb2x1bW4ud2lkZ2V0TWFwIHx8IChjb2x1bW4ud2lkZ2V0TWFwID0ge30pKVt3aWRnZXRJZF0gfHwgKGNvbHVtbi53aWRnZXRNYXBbd2lkZ2V0SWRdID0gTmVvLmNyZWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZHVsZSAgOiBCdXR0b24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcE5hbWUgOiBtZS5hcHBOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVyIDogJ3VwLmVkaXRCdXR0b25IYW5kbGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50SWQ6ICdteVRhYmxlU3RvcmVDb250YWluZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ICAgIDogJ0VkaXQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBtZS52aWV3LnVwZGF0ZURlcHRoID0gLTE7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBidXR0b24uY3JlYXRlVmRvbVJlZmVyZW5jZSgpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFGaWVsZDogJ21lbnUnLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0ICAgICA6ICdNZW51JyxcbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyZXIoe2NvbHVtbiwgcmVjb3JkLCBpbmRleH0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWUgICAgICAgPSB0aGlzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZGdldElkID0gYCR7Y29sdW1uLmlkfS13aWRnZXQtJHtpbmRleH1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbiAgID0gKGNvbHVtbi53aWRnZXRNYXAgfHwgKGNvbHVtbi53aWRnZXRNYXAgPSB7fSkpW3dpZGdldElkXSB8fCAoY29sdW1uLndpZGdldE1hcFt3aWRnZXRJZF0gPSBOZW8uY3JlYXRlKCdOZW8uYnV0dG9uLkJhc2UnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG50eXBlICAgOiAnYnV0dG9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwTmFtZSA6IG1lLmFwcE5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgICAgOiAnXFx1MjJlZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvd0lkOiBtZS53aW5kb3dJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudSAgICA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zIDogW3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0IDogJ01lbnUgb3B0aW9uIDEnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCA6ICdNZW51IG9wdGlvbiAyJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgOiAnTWVudSBvcHRpb24gMydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0IDogJ01lbnUgb3B0aW9uIDQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBtZS52aWV3LnVwZGF0ZURlcHRoID0gLTE7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBidXR0b24uY3JlYXRlVmRvbVJlZmVyZW5jZSgpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGFcbiAgICAgKi9cbiAgICBlZGl0QnV0dG9uSGFuZGxlcihkYXRhKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBOZW8uc2V0dXBDbGFzcyhNYWluQ29udGFpbmVyKTtcbiIsImltcG9ydCBNb2RlbCBmcm9tICcuLi8uLi8uLi9zcmMvZGF0YS9Nb2RlbC5tanMnO1xuXG4vKipcbiAqIEBjbGFzcyBOZW8uZXhhbXBsZXMudGFibGUuY29udGFpbmVyLk1haW5Nb2RlbFxuICogQGV4dGVuZHMgTmVvLmRhdGEuTW9kZWxcbiAqL1xuY2xhc3MgTWFpbk1vZGVsIGV4dGVuZHMgTW9kZWwge1xuICAgIHN0YXRpYyBjb25maWcgPSB7XG4gICAgICAgIGNsYXNzTmFtZTogJ05lby5leGFtcGxlcy50YWJsZS5jb250YWluZXIuTWFpbk1vZGVsJyxcblxuICAgICAgICBmaWVsZHM6IFt7XG4gICAgICAgICAgICBuYW1lOiAnY29sc3BhbicsXG4gICAgICAgICAgICB0eXBlOiAnT2JqZWN0J1xuICAgICAgICB9LCB7XG4gICAgICAgICAgICBuYW1lOiAnY291bnRyeScsXG4gICAgICAgICAgICB0eXBlOiAnU3RyaW5nJ1xuICAgICAgICB9LCB7XG4gICAgICAgICAgICBuYW1lOiAnZmlyc3RuYW1lJyxcbiAgICAgICAgICAgIHR5cGU6ICdTdHJpbmcnXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG5hbWU6ICdnaXRodWJJZCcsXG4gICAgICAgICAgICB0eXBlOiAnU3RyaW5nJ1xuICAgICAgICB9LCB7XG4gICAgICAgICAgICBuYW1lOiAnbGFzdG5hbWUnLFxuICAgICAgICAgICAgdHlwZTogJ1N0cmluZydcbiAgICAgICAgfV1cbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IE5lby5zZXR1cENsYXNzKE1haW5Nb2RlbCk7XG4iLCJpbXBvcnQgTW9kZWwgZnJvbSAnLi9NYWluTW9kZWwubWpzJztcbmltcG9ydCBTdG9yZSBmcm9tICcuLi8uLi8uLi9zcmMvZGF0YS9TdG9yZS5tanMnO1xuXG4vKipcbiAqIEBjbGFzcyBOZW8uZXhhbXBsZXMudGFibGUuY29udGFpbmVyLk1haW5TdG9yZVxuICogQGV4dGVuZHMgTmVvLmRhdGEuU3RvcmVcbiAqL1xuY2xhc3MgTWFpblN0b3JlIGV4dGVuZHMgU3RvcmUge1xuICAgIHN0YXRpYyBjb25maWcgPSB7XG4gICAgICAgIGNsYXNzTmFtZSAgOiAnTmVvLmV4YW1wbGVzLnRhYmxlLmNvbnRhaW5lci5NYWluU3RvcmUnLFxuICAgICAgICBrZXlQcm9wZXJ0eTogJ2dpdGh1YklkJyxcbiAgICAgICAgbW9kZWwgICAgICA6IE1vZGVsLFxuXG4gICAgICAgIGRhdGE6IFt7XG4gICAgICAgICAgICBjb3VudHJ5ICA6ICdHZXJtYW55JyxcbiAgICAgICAgICAgIGZpcnN0bmFtZTogJ1RvYmlhcycsXG4gICAgICAgICAgICBnaXRodWJJZCA6ICd0b2JpdScsXG4gICAgICAgICAgICBsYXN0bmFtZSA6ICdVaGxpZydcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgY291bnRyeSAgOiAnVVNBJyxcbiAgICAgICAgICAgIGZpcnN0bmFtZTogJ1JpY2gnLFxuICAgICAgICAgICAgZ2l0aHViSWQgOiAncndhdGVycycsXG4gICAgICAgICAgICBsYXN0bmFtZSA6ICdXYXRlcnMnXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGNvdW50cnkgIDogJ0dlcm1hbnknLFxuICAgICAgICAgICAgZmlyc3RuYW1lOiAnTmlscycsXG4gICAgICAgICAgICBnaXRodWJJZCA6ICdtcnN1bnNoaW5lJyxcbiAgICAgICAgICAgIGxhc3RuYW1lIDogJ0RlaGwnXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGNvdW50cnkgIDogJ1VTQScsXG4gICAgICAgICAgICBmaXJzdG5hbWU6ICdHZXJhcmQnLFxuICAgICAgICAgICAgZ2l0aHViSWQgOiAnY2FtdG5iaWtlcnJ3YycsXG4gICAgICAgICAgICBsYXN0bmFtZSA6ICdIb3JhbidcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgY291bnRyeSAgOiAnU2xvdmFraWEnLFxuICAgICAgICAgICAgZmlyc3RuYW1lOiAnSm96ZWYnLFxuICAgICAgICAgICAgZ2l0aHViSWQgOiAnanNha2Fsb3MnLFxuICAgICAgICAgICAgbGFzdG5hbWUgOiAnU2FrYWxvcydcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgY291bnRyeSAgOiAnR2VybWFueScsXG4gICAgICAgICAgICBmaXJzdG5hbWU6ICdCYXN0aWFuJyxcbiAgICAgICAgICAgIGdpdGh1YklkIDogJ2JoYXVzdGVpbicsXG4gICAgICAgICAgICBsYXN0bmFtZSA6ICdIYXVzdGVpbidcbiAgICAgICAgfV1cbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IE5lby5zZXR1cENsYXNzKE1haW5TdG9yZSk7XG4iLCJpbXBvcnQgTWFpbkNvbnRhaW5lciBmcm9tICcuL01haW5Db250YWluZXIubWpzJztcblxuZXhwb3J0IGNvbnN0IG9uU3RhcnQgPSAoKSA9PiBOZW8uYXBwKHtcbiAgICBtYWluVmlldzogTWFpbkNvbnRhaW5lcixcbiAgICBuYW1lICAgIDogJ05lby5leGFtcGxlcy50YWJsZS5jb250YWluZXInXG59KTtcbiIsImltcG9ydCBDZWxsUm93TW9kZWwgZnJvbSAnLi9DZWxsUm93TW9kZWwubWpzJztcbmltcG9ydCBDb2x1bW5Nb2RlbCAgZnJvbSAnLi9Db2x1bW5Nb2RlbC5tanMnO1xuaW1wb3J0IFZEb21VdGlsICAgICBmcm9tICcuLi8uLi91dGlsL1ZEb20ubWpzJztcblxuLyoqXG4gKiBAY2xhc3MgTmVvLnNlbGVjdGlvbi50YWJsZS5DZWxsQ29sdW1uUm93TW9kZWxcbiAqIEBleHRlbmRzIE5lby5zZWxlY3Rpb24udGFibGUuQ2VsbFJvd01vZGVsXG4gKi9cbmNsYXNzIENlbGxDb2x1bW5Sb3dNb2RlbCBleHRlbmRzIENlbGxSb3dNb2RlbCB7XG4gICAgc3RhdGljIGNvbmZpZyA9IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ30gY2xhc3NOYW1lPSdOZW8uc2VsZWN0aW9uLnRhYmxlLkNlbGxDb2x1bW5Sb3dNb2RlbCdcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgY2xhc3NOYW1lOiAnTmVvLnNlbGVjdGlvbi50YWJsZS5DZWxsQ29sdW1uUm93TW9kZWwnLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfSBudHlwZT0nc2VsZWN0aW9uLXRhYmxlLWNlbGxjb2x1bW5yb3dtb2RlbCdcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgbnR5cGU6ICdzZWxlY3Rpb24tdGFibGUtY2VsbGNvbHVtbnJvd21vZGVsJyxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ30gY2xzPSduZW8tc2VsZWN0aW9uLWNlbGxjb2x1bW5yb3dtb2RlbCdcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgY2xzOiAnbmVvLXNlbGVjdGlvbi1jZWxsY29sdW1ucm93bW9kZWwnLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfSBzZWxlY3RlZENvbHVtbkNlbGxDbHM9J3NlbGVjdGVkLWNvbHVtbi1jZWxsJ1xuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICBzZWxlY3RlZENvbHVtbkNlbGxDbHM6ICdzZWxlY3RlZC1jb2x1bW4tY2VsbCcsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtBcnJheXxudWxsfSBzZWxlY3RlZENvbHVtbkNlbGxJZHM9bnVsbFxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICBzZWxlY3RlZENvbHVtbkNlbGxJZHM6IG51bGxcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gY29uZmlnXG4gICAgICovXG4gICAgY29uc3RydWN0KGNvbmZpZykge1xuICAgICAgICBzdXBlci5jb25zdHJ1Y3QoY29uZmlnKTtcblxuICAgICAgICB0aGlzLnNlbGVjdGVkQ29sdW1uQ2VsbElkcyA9IFtdXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBbc2lsZW50XSB0cnVlIHRvIHByZXZlbnQgYSB2ZG9tIHVwZGF0ZVxuICAgICAqL1xuICAgIGRlc2VsZWN0QWxsQ2VsbHMoc2lsZW50KSB7XG4gICAgICAgIGxldCBtZSAgICAgID0gdGhpcyxcbiAgICAgICAgICAgIGNlbGxJZHMgPSBbLi4ubWUuc2VsZWN0ZWRDb2x1bW5DZWxsSWRzXSxcbiAgICAgICAgICAgIHt2aWV3fSAgPSBtZTtcblxuICAgICAgICBjZWxsSWRzLmZvckVhY2goY2VsbElkID0+IHtcbiAgICAgICAgICAgIG1lLmRlc2VsZWN0KGNlbGxJZCwgdHJ1ZSwgbWUuc2VsZWN0ZWRDb2x1bW5DZWxsSWRzLCBtZS5zZWxlY3RlZENvbHVtbkNlbGxDbHMpXG4gICAgICAgIH0pO1xuXG4gICAgICAgICFzaWxlbnQgJiYgdmlldy51cGRhdGUoKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhXG4gICAgICovXG4gICAgb25DZWxsQ2xpY2soZGF0YSkge1xuICAgICAgICBsZXQgbWUgPSB0aGlzLFxuICAgICAgICAgICAgaWQgPSBkYXRhLmRhdGEuY3VycmVudFRhcmdldCxcbiAgICAgICAgICAgIGNvbHVtbk5vZGVJZHMsIGluZGV4LCB0Ym9keU5vZGU7XG5cbiAgICAgICAgaWYgKGlkKSB7XG4gICAgICAgICAgICBpbmRleCAgICAgICAgID0gQ29sdW1uTW9kZWwuZ2V0Q29sdW1uSW5kZXgoaWQsIG1lLnZpZXcuaXRlbXNbMF0uaXRlbXMpO1xuICAgICAgICAgICAgdGJvZHlOb2RlICAgICA9IFZEb21VdGlsLmZpbmQobWUudmlldy52ZG9tLCB7dGFnOiAndGJvZHknfSkudmRvbTtcbiAgICAgICAgICAgIGNvbHVtbk5vZGVJZHMgPSBWRG9tVXRpbC5nZXRDb2x1bW5Ob2Rlc0lkcyh0Ym9keU5vZGUsIGluZGV4KTtcblxuICAgICAgICAgICAgbWUuZGVzZWxlY3RBbGxDZWxscyh0cnVlKTtcbiAgICAgICAgICAgIG1lLnNlbGVjdChjb2x1bW5Ob2RlSWRzLCBtZS5zZWxlY3RlZENvbHVtbkNlbGxJZHMsIG1lLnNlbGVjdGVkQ29sdW1uQ2VsbENscylcbiAgICAgICAgfVxuXG4gICAgICAgIHN1cGVyLm9uQ2VsbENsaWNrKGRhdGEpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGFcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gc3RlcFxuICAgICAqL1xuICAgIG9uTmF2S2V5Q29sdW1uKGRhdGEsIHN0ZXApIHtcbiAgICAgICAgbGV0IG1lICAgICAgICAgICAgPSB0aGlzLFxuICAgICAgICAgICAgaWRBcnJheSAgICAgICA9IENvbHVtbk1vZGVsLmdldENlbGxJZChkYXRhLnBhdGgpLnNwbGl0KCdfXycpLFxuICAgICAgICAgICAgY3VycmVudENvbHVtbiA9IGlkQXJyYXlbMl0sXG4gICAgICAgICAgICB7dmlld30gICAgICAgID0gbWUsXG4gICAgICAgICAgICBkYXRhRmllbGRzICAgID0gdmlldy5jb2x1bW5zLm1hcChjID0+IGMuZGF0YUZpZWxkKSxcbiAgICAgICAgICAgIG5ld0luZGV4ICAgICAgPSAoZGF0YUZpZWxkcy5pbmRleE9mKGN1cnJlbnRDb2x1bW4pICsgc3RlcCkgJSBkYXRhRmllbGRzLmxlbmd0aCxcbiAgICAgICAgICAgIGNvbHVtbk5vZGVJZHMsIHRib2R5Tm9kZTtcblxuICAgICAgICB3aGlsZSAobmV3SW5kZXggPCAwKSB7XG4gICAgICAgICAgICBuZXdJbmRleCArPSBkYXRhRmllbGRzLmxlbmd0aFxuICAgICAgICB9XG5cbiAgICAgICAgdGJvZHlOb2RlICAgICA9IFZEb21VdGlsLmZpbmQobWUudmlldy52ZG9tLCB7dGFnOiAndGJvZHknfSkudmRvbTtcbiAgICAgICAgY29sdW1uTm9kZUlkcyA9IFZEb21VdGlsLmdldENvbHVtbk5vZGVzSWRzKHRib2R5Tm9kZSwgbmV3SW5kZXgpO1xuXG4gICAgICAgIG1lLmRlc2VsZWN0QWxsQ2VsbHModHJ1ZSk7XG4gICAgICAgIG1lLnNlbGVjdChjb2x1bW5Ob2RlSWRzLCBtZS5zZWxlY3RlZENvbHVtbkNlbGxJZHMsIG1lLnNlbGVjdGVkQ29sdW1uQ2VsbENscyk7XG5cbiAgICAgICAgc3VwZXIub25OYXZLZXlDb2x1bW4oZGF0YSwgc3RlcClcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqL1xuICAgIHVucmVnaXN0ZXIoKSB7XG4gICAgICAgIHRoaXMuZGVzZWxlY3RBbGxDZWxscygpO1xuICAgICAgICBzdXBlci51bnJlZ2lzdGVyKClcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IE5lby5zZXR1cENsYXNzKENlbGxDb2x1bW5Sb3dNb2RlbCk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=