"use strict";
(self["webpackChunkneo_mjs"] = self["webpackChunkneo_mjs"] || []).push([["vendors-examples_grid_cellEditing_app_mjs"],{

/***/ "./examples/grid/cellEditing/MainContainer.mjs":
/*!*****************************************************!*\
  !*** ./examples/grid/cellEditing/MainContainer.mjs ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _src_selection_grid_CellColumnModel_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../src/selection/grid/CellColumnModel.mjs */ "./src/selection/grid/CellColumnModel.mjs");
/* harmony import */ var _src_selection_grid_CellColumnRowModel_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../src/selection/grid/CellColumnRowModel.mjs */ "./src/selection/grid/CellColumnRowModel.mjs");
/* harmony import */ var _src_selection_grid_CellModel_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../src/selection/grid/CellModel.mjs */ "./src/selection/grid/CellModel.mjs");
/* harmony import */ var _src_selection_grid_CellRowModel_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../src/selection/grid/CellRowModel.mjs */ "./src/selection/grid/CellRowModel.mjs");
/* harmony import */ var _src_form_field_CheckBox_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../src/form/field/CheckBox.mjs */ "./src/form/field/CheckBox.mjs");
/* harmony import */ var _src_form_field_Country_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../src/form/field/Country.mjs */ "./src/form/field/Country.mjs");
/* harmony import */ var _ConfigurationViewport_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../ConfigurationViewport.mjs */ "./examples/ConfigurationViewport.mjs");
/* harmony import */ var _src_form_field_Date_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../src/form/field/Date.mjs */ "./src/form/field/Date.mjs");
/* harmony import */ var _src_grid_Container_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../src/grid/Container.mjs */ "./src/grid/Container.mjs");
/* harmony import */ var _MainContainerStateProvider_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./MainContainerStateProvider.mjs */ "./examples/grid/cellEditing/MainContainerStateProvider.mjs");
/* harmony import */ var _MainStore_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./MainStore.mjs */ "./examples/grid/cellEditing/MainStore.mjs");
/* harmony import */ var _src_form_field_Number_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../src/form/field/Number.mjs */ "./src/form/field/Number.mjs");
/* harmony import */ var _src_form_field_Radio_mjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../src/form/field/Radio.mjs */ "./src/form/field/Radio.mjs");














/**
 * @class Neo.examples.grid.cellEditing.MainContainer
 * @extends Neo.examples.ConfigurationViewport
 */
class MainContainer extends _ConfigurationViewport_mjs__WEBPACK_IMPORTED_MODULE_6__["default"] {
    static config = {
        className           : 'Neo.examples.grid.cellEditing.MainContainer',
        autoMount           : true,
        configItemLabelWidth: 130,
        configPanelFlex     : 1.5,
        exampleComponentFlex: 3,
        layout              : {ntype: 'hbox', align: 'stretch'},
        stateProvider       : _MainContainerStateProvider_mjs__WEBPACK_IMPORTED_MODULE_9__["default"]
    }

    /**
     * @param {Object} data
     */
    countryRenderer({record}) {
        let countryStore = this.getStateProvider().getStore('countries');

        if (countryStore.getCount() > 0) {
            return countryStore.get(record.country).name
        }

        return ''
    }

    /**
     * @returns {Object[]}
     */
    createConfigurationComponents() {
        let me               = this,
            {selectionModel} = me.exampleComponent.view;

        const selectionModelRadioDefaults = {
            module        : _src_form_field_Radio_mjs__WEBPACK_IMPORTED_MODULE_12__["default"],
            hideValueLabel: false,
            labelText     : '',
            name          : 'selectionModel',
            width         : 350
        };

        return [{
            module   : _src_form_field_Number_mjs__WEBPACK_IMPORTED_MODULE_11__["default"],
            labelText: 'height',
            listeners: {change: me.onConfigChange.bind(me, 'height')},
            maxValue : 800,
            minValue : 225,
            stepSize : 5,
            value    : me.exampleComponent.height
        }, {
            ...selectionModelRadioDefaults,
            checked       : selectionModel.ntype === 'selection-grid-cellmodel',
            labelText     : 'selectionModel',
            listeners     : {change: me.onRadioViewChange.bind(me, 'selectionModel', _src_selection_grid_CellModel_mjs__WEBPACK_IMPORTED_MODULE_2__["default"])},
            style         : {marginTop: '10px'},
            valueLabelText: 'Cell'
        }, {
            ...selectionModelRadioDefaults,
            checked       : selectionModel.ntype === 'selection-grid-cellcolumnmodel',
            listeners     : {change: me.onRadioViewChange.bind(me, 'selectionModel', _src_selection_grid_CellColumnModel_mjs__WEBPACK_IMPORTED_MODULE_0__["default"])},
            valueLabelText: 'Cell & Column'
        }, {
            ...selectionModelRadioDefaults,
            checked       : selectionModel.ntype === 'selection-grid-cellrowmodel',
            listeners     : {change: me.onRadioViewChange.bind(me, 'selectionModel', _src_selection_grid_CellRowModel_mjs__WEBPACK_IMPORTED_MODULE_3__["default"])},
            valueLabelText: 'Cell & Row'
        }, {
            ...selectionModelRadioDefaults,
            checked       : selectionModel.ntype === 'selection-grid-cellcolumnrowmodel',
            listeners     : {change: me.onRadioViewChange.bind(me, 'selectionModel', _src_selection_grid_CellColumnRowModel_mjs__WEBPACK_IMPORTED_MODULE_1__["default"])},
            valueLabelText: 'Cell & Column & Row'
        }, {
            module        : _src_form_field_CheckBox_mjs__WEBPACK_IMPORTED_MODULE_4__["default"],
            checked       : me.exampleComponent.sortable,
            hideLabel     : true,
            listeners     : {change: me.onConfigChange.bind(me, 'sortable')},
            style         : {marginTop: '10px'},
            valueLabelText: 'sortable'
        }, {
            module        : _src_form_field_CheckBox_mjs__WEBPACK_IMPORTED_MODULE_4__["default"],
            checked       : false, // we can not access the lazy-loaded plugin yet
            hideLabel     : true,
            listeners     : {change: me.onPluginConfigChange.bind(me, 'disabled')},
            style         : {marginTop: '10px'},
            valueLabelText: 'Disable CellEditing'
        }]
    }

    /**
     * @returns {Object}
     */
    createExampleComponent() {
        return {
            module     : _src_grid_Container_mjs__WEBPACK_IMPORTED_MODULE_8__["default"],
            bind       : {store: 'stores.mainStore'},
            cellEditing: true,
            parentId   : this.id,
            store      : _MainStore_mjs__WEBPACK_IMPORTED_MODULE_10__["default"],

            columnDefaults: {
                editable: true,
                width   : 200
            },

            columns: [{
                dataField: 'firstname',
                text     : 'Firstname'
            }, {
                dataField: 'randomNumber',
                text     : 'Number (step 5)',

                editor: {
                    module   : _src_form_field_Number_mjs__WEBPACK_IMPORTED_MODULE_11__["default"],
                    clearable: false,
                    maxValue : 100,
                    minValue : 0,
                    stepSize : 5
                }
            }, {
                dataField: 'randomDate',
                renderer : ({value}) => new Intl.DateTimeFormat('default').format(value),
                text     : 'Random Date',

                editor: {
                    module   : _src_form_field_Date_mjs__WEBPACK_IMPORTED_MODULE_7__["default"],
                    clearable: false,
                    maxValue : '2024-12-20',
                    minValue : '2024-12-10'
                }
            }, {
                dataField: 'country',
                renderer : 'up.countryRenderer',
                text     : 'Country',

                editor: {
                    module        : _src_form_field_Country_mjs__WEBPACK_IMPORTED_MODULE_5__["default"],
                    bind          : {store: 'stores.countries'},
                    clearable     : false,
                    forceSelection: true,
                    valueField    : 'code'
                }
            }, {
                dataField: 'githubId',
                editable : false,
                text     : 'Github Id (Non-editable)'
            }],

            viewConfig: {
                selectionModel: _src_selection_grid_CellModel_mjs__WEBPACK_IMPORTED_MODULE_2__["default"]
            }
        }
    }

    /**
     * @param {String} config
     * @param {Object} opts
     */
    onPluginConfigChange(config, opts) {
        this.exampleComponent.getPlugin('grid-cell-editing')[config] = opts.value
    }

    /**
     * @param {String} config
     * @param {String} value
     * @param {Object} opts
     */
    onRadioViewChange(config, value, opts) {
        if (opts.value === true) { // we only want to listen to check events, not uncheck
            this.exampleComponent.view[config] = value
        }
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(MainContainer));


/***/ }),

/***/ "./examples/grid/cellEditing/MainContainerStateProvider.mjs":
/*!******************************************************************!*\
  !*** ./examples/grid/cellEditing/MainContainerStateProvider.mjs ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _MainStore_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MainStore.mjs */ "./examples/grid/cellEditing/MainStore.mjs");
/* harmony import */ var _src_state_Provider_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../src/state/Provider.mjs */ "./src/state/Provider.mjs");
/* harmony import */ var _src_data_Store_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../src/data/Store.mjs */ "./src/data/Store.mjs");




const countrySymbol = Symbol.for('country');

/**
 * @class Neo.examples.grid.cellEditing.MainContainerStateProvider
 * @extends Neo.state.Provider
 */
class MainContainerStateProvider extends _src_state_Provider_mjs__WEBPACK_IMPORTED_MODULE_1__["default"] {
    static config = {
        /**
         * @member {String} className='Neo.examples.grid.cellEditing.MainContainerStateProvider'
         * @protected
         */
        className: 'Neo.examples.grid.cellEditing.MainContainerStateProvider',
        /**
         * @member {Object} stores
         */
        stores: {
            countries: {
                module     : _src_data_Store_mjs__WEBPACK_IMPORTED_MODULE_2__["default"],
                autoLoad   : true,
                keyProperty: 'code',
                listeners  : {load: 'onCountryStoreLoad'},
                url        : '../../../resources/examples/data/countries.json',

                model: {
                    fields: [
                        {name: 'code'},
                        {name: 'name'}
                    ]
                }
            },
            mainStore: _MainStore_mjs__WEBPACK_IMPORTED_MODULE_0__["default"]
        }
    }

    /**
     * @param {Record[]} items
     */
    onCountryStoreLoad(items) {
        let me        = this,
            mainStore = me.getStore('mainStore'),
            country;

        // if the main table store is already loaded, the country field renderer had no data
        if (mainStore.getCount() > 0) {
            mainStore.items.forEach(record => {
                country = record.country;

                // hack resetting the current value to get a new record change
                record[countrySymbol] = null;

                record.country = country
            })
        }
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(MainContainerStateProvider));


/***/ }),

/***/ "./examples/grid/cellEditing/MainModel.mjs":
/*!*************************************************!*\
  !*** ./examples/grid/cellEditing/MainModel.mjs ***!
  \*************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _src_data_Model_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../src/data/Model.mjs */ "./src/data/Model.mjs");


/**
 * @class Neo.examples.grid.cellEditing.MainModel
 * @extends Neo.data.Model
 */
class MainModel extends _src_data_Model_mjs__WEBPACK_IMPORTED_MODULE_0__["default"] {
    static config = {
        className: 'Neo.examples.grid.cellEditing.MainModel',

        fields: [{
            name: 'country',
            type: 'String'
        }, {
            name: 'firstname',
            type: 'String'
        }, {
            name: 'githubId',
            type: 'String'
        }, {
            name: 'randomNumber',
            type: 'Int'
        }, {
            name: 'randomDate',
            type: 'Date'
        }]
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(MainModel));


/***/ }),

/***/ "./examples/grid/cellEditing/MainStore.mjs":
/*!*************************************************!*\
  !*** ./examples/grid/cellEditing/MainStore.mjs ***!
  \*************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _MainModel_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MainModel.mjs */ "./examples/grid/cellEditing/MainModel.mjs");
/* harmony import */ var _src_data_Store_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../src/data/Store.mjs */ "./src/data/Store.mjs");



/**
 * @class Neo.examples.grid.cellEditing.MainStore
 * @extends Neo.data.Store
 */
class MainStore extends _src_data_Store_mjs__WEBPACK_IMPORTED_MODULE_1__["default"] {
    static config = {
        className  : 'Neo.examples.grid.cellEditing.MainStore',
        keyProperty: 'githubId',
        model      : _MainModel_mjs__WEBPACK_IMPORTED_MODULE_0__["default"],

        data: [{
            country     : 'DE',
            firstname   : 'Tobias',
            githubId    : 'tobiu',
            randomDate  : '2024-12-20',
            randomNumber: 100
        }, {
            country     : 'US',
            firstname   : 'Rich',
            githubId    : 'rwaters',
            randomDate  : '2024-12-18',
            randomNumber: 90
        }, {
            country     : 'DE',
            firstname   : 'Nils',
            githubId    : 'mrsunshine',
            randomDate  : '2024-12-19',
            randomNumber: 70
        }, {
            country     : 'US',
            firstname   : 'Gerard',
            githubId    : 'camtnbikerrwc',
            randomDate  : '2024-12-17',
            randomNumber: 80
        }, {
            country     : 'SK',
            firstname   : 'Jozef',
            githubId    : 'jsakalos',
            randomDate  : '2024-12-16',
            randomNumber: 60
        }, {
            country     : 'DE',
            firstname   : 'Bastian',
            githubId    : 'bhaustein',
            randomDate  : '2024-12-15',
            randomNumber: 50
        }]
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(MainStore));


/***/ }),

/***/ "./examples/grid/cellEditing/app.mjs":
/*!*******************************************!*\
  !*** ./examples/grid/cellEditing/app.mjs ***!
  \*******************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   onStart: () => (/* binding */ onStart)
/* harmony export */ });
/* harmony import */ var _MainContainer_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MainContainer.mjs */ "./examples/grid/cellEditing/MainContainer.mjs");


const onStart = () => Neo.app({
    mainView: _MainContainer_mjs__WEBPACK_IMPORTED_MODULE_0__["default"],
    name    : 'Neo.examples.grid.cellEditing'
});


/***/ }),

/***/ "./src/form/field/Country.mjs":
/*!************************************!*\
  !*** ./src/form/field/Country.mjs ***!
  \************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _ComboBox_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ComboBox.mjs */ "./src/form/field/ComboBox.mjs");


/**
 * @class Neo.form.field.Country
 * @extends Neo.form.field.ComboBox
 */
class Country extends _ComboBox_mjs__WEBPACK_IMPORTED_MODULE_0__["default"] {
    static config = {
        /**
         * @member {String} className='Neo.form.field.Country'
         * @protected
         */
        className: 'Neo.form.field.Country',
        /**
         * @member {String} ntype='countryfield'
         * @protected
         */
        ntype: 'countryfield',
        /**
         * You can either pass a field instance or a field reference
         * @member {Neo.form.field.Base|String|null} zipCodeField_=null
         */
        zipCodeField_: null
    }

    /**
     * Triggered after the zipCodeField config got changed
     * @param {Neo.form.field.Base|null} value
     * @param {Neo.form.field.Base|null} oldValue
     * @protected
     */
    afterSetZipCodeField(value, oldValue) {
        if (value && value instanceof Neo.form.field.Base) {
            value.countryField = this
        }
    }

    /**
     * Triggered before the zipCodeField config gets changed
     * @param {Neo.form.field.Base|String|null} value
     * @param {Neo.form.field.Base|String|null} oldValue
     * @returns {Neo.form.field.Base|null}
     * @protected
     */
    beforeSetZipCodeField(value, oldValue) {
        let me = this;

        if (Neo.isString(value)) {
            return me.up().getReference(value)
        }

        return value
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(Country));


/***/ }),

/***/ "./src/form/field/Date.mjs":
/*!*********************************!*\
  !*** ./src/form/field/Date.mjs ***!
  \*********************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _component_DateSelector_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../component/DateSelector.mjs */ "./src/component/DateSelector.mjs");
/* harmony import */ var _trigger_Date_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./trigger/Date.mjs */ "./src/form/field/trigger/Date.mjs");
/* harmony import */ var _util_Date_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../util/Date.mjs */ "./src/util/Date.mjs");
/* harmony import */ var _Picker_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Picker.mjs */ "./src/form/field/Picker.mjs");
/* harmony import */ var _util_VDom_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../util/VDom.mjs */ "./src/util/VDom.mjs");






/**
 * @class Neo.form.field.Date
 * @extends Neo.form.field.Picker
 */
class DateField extends _Picker_mjs__WEBPACK_IMPORTED_MODULE_3__["default"] {
    static config = {
        /**
         * @member {String} className='Neo.form.field.Date'
         * @protected
         */
        className: 'Neo.form.field.Date',
        /**
         * @member {String} ntype='datefield'
         * @protected
         */
        ntype: 'datefield',
        /**
         * @member {String[]} baseCls=['neo-datefield','neo-pickerfield','neo-textfield']
         */
        baseCls: ['neo-datefield', 'neo-pickerfield', 'neo-textfield'],
        /**
         * @member {Neo.component.DateSelector|null} dateSelector=null
         * @protected
         */
        dateSelector: null,
        /**
         * @member {Object|null} dateSelectorConfig=null
         */
        dateSelectorConfig: null,
        /**
         * @member {String} errorTextInvalidDate='Not a valid date'
         */
        errorTextInvalidDate: 'Not a valid date',
        /**
         * @member {Boolean} isoDate=false
         */
        isoDate: false,
        /**
         * True to hide the DatePicker when selecting a day
         * @member {Boolean} hidePickerOnSelect=false
         */
        hidePickerOnSelect: false,
        /**
         * @member {String} inputType='date'
         */
        inputType: 'date',
        /**
         * @member {String|null} maxValue_=null
         */
        maxValue_: null,
        /**
         * @member {String|null} minValue_=null
         */
        minValue_: null,
        /**
         * @member {Number} pickerHeight=225
         */
        pickerHeight: 225,
        /**
         * @member {Number|null} pickerMaxHeight=225
         */
        pickerMaxHeight: 225,
        /**
         * @member {Number} pickerWidth=200
         */
        pickerWidth: 200,
        /**
         * @member {Object|Object[]} triggers=[{module: DateTrigger}]
         * @protected
         */
        triggers: [{
            module: _trigger_Date_mjs__WEBPACK_IMPORTED_MODULE_1__["default"]
        }]
    }

    /**
     * Internal flag to store the dom based validity of this field
     * @member {Boolean} invalidInput=false
     */
    invalidInput = false
    /**
     * Setting the value to true will return a Date object when calling getSubmitValue()
     * @member {Boolean} submitDateObject=false
     */
    submitDateObject = false

    /**
     * @param config
     */
    construct(config) {
        super.construct(config);

        let me = this;

        me.dateSelector = Neo.create({
            module       : _component_DateSelector_mjs__WEBPACK_IMPORTED_MODULE_0__["default"],
            dayNameFormat: 'short',
            maxValue     : me.maxValue,
            minValue     : me.minValue,
            value        : me.value || _util_Date_mjs__WEBPACK_IMPORTED_MODULE_2__["default"].convertToyyyymmdd(new Date()),
            ...me.dateSelectorConfig
        });

        me.dateSelector.keys._keys.push(
            {fn: 'onContainerKeyDownEscape', key: 'Escape', scope: me.id}
        );

        me.dateSelector.on({
            change: me.onDatePickerChange,
            scope : me
        })
    }

    /**
     * Triggered after the maxValue config got changed
     * @param {Text} value
     * @param {Text} oldValue
     * @protected
     */
    afterSetMaxValue(value, oldValue) {
        let me = this;

        me.changeInputElKey('max', value);

        if (me.dateSelector) {
            me.dateSelector.maxValue = value
        }
    }

    /**
     * Triggered after the minValue config got changed
     * @param {Text} value
     * @param {Text} oldValue
     * @protected
     */
    afterSetMinValue(value, oldValue) {
        let me = this;

        me.changeInputElKey('min', value);

        if (me.dateSelector) {
            me.dateSelector.minValue = value
        }
    }

    /**
     * Triggered after the value config got changed
     * @param {String} value
     * @param {String} oldValue
     * @protected
     */
    afterSetValue(value, oldValue) {
        super.afterSetValue(value, oldValue);

        if (oldValue !== undefined) {
            this.dateSelector.value = value
        }
    }

    /**
     * Triggered before the value config got changed
     * @param {String} value
     * @param {String} oldValue
     * @protected
     */
    beforeSetValue(value, oldValue) {
        if (Neo.typeOf(value) === 'Date') {
            value = _util_Date_mjs__WEBPACK_IMPORTED_MODULE_2__["default"].convertToyyyymmdd(value);
            this.originalConfig.value = value
        }

        value = super.beforeSetValue(value, oldValue);

        return (this.isoDate && value) ? value.substring(0, 10) : value
    }

    /**
     * @returns {Neo.component.DateSelector}
     */
    createPickerComponent() {
        return this.dateSelector
    }

    /**
     * @returns {Date|String|null}
     */
    getSubmitValue() {
        let value = this.value;

        if(this.submitDateObject && value) {
            return new Date(`${value}T12:00:00.000Z`);
        } else if(this.isoDate && value) {
            return new Date(value).toISOString();
        }

        return value;
    }

    /**
     * @returns {Boolean}
     */
    hasContent() {
        if (this.labelPosition === 'inline') {
            return true
        }

        return super.hasContent()
    }

    /**
     * @param {Object} data
     * @protected
     */
    onContainerKeyDownEscape(data) {
        let me = this;

        me.hidePicker();
        me.focus(me.getInputElId())
    }

    /**
     * @param {Object} opts
     */
    onDatePickerChange(opts) {
        let me = this;

        me.clean = false;

        if (me.hidePickerOnSelect) {
            _util_VDom_mjs__WEBPACK_IMPORTED_MODULE_4__["default"].removeVdomChild(me.vdom, me.getPickerId());

            me.promiseUpdate().then(data => {
                me.value = opts.value
            })
        } else {
            me.value = opts.value
        }
    }

    /**
     * @param {Object} data
     * @protected
     */
    onInputValueChange(data) {
        this.invalidInput = !data.valid;

        if (data.valid) {
            super.onInputValueChange(data)
        } else {
            this.validate(false)
        }
    }

    /**
     * @param {Object} data
     * @protected
     */
    onKeyDownEnter(data) {
        let me = this;

        if (me.pickerIsMounted) {
            me.dateSelector.focusCurrentItem();
            super.onKeyDownEnter(data)
        } else {
            super.onKeyDownEnter(data, me.dateSelector.focusCurrentItem, me.dateSelector)
        }
    }

    /**
     * Checks for client-side field errors
     * @param {Boolean} silent=true
     * @returns {Boolean} Returns true in case there are no client-side errors
     */
    validate(silent=true) {
        let me          = this,
            returnValue = super.validate(silent);

        if (returnValue) {
            if (me.invalidInput) {
                me._error = me.errorTextInvalidDate;
                returnValue = false
            }
        }

        !returnValue && !me.clean && me.updateError(me._error, silent);

        return returnValue
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(DateField));


/***/ }),

/***/ "./src/form/field/trigger/Date.mjs":
/*!*****************************************!*\
  !*** ./src/form/field/trigger/Date.mjs ***!
  \*****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _Picker_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Picker.mjs */ "./src/form/field/trigger/Picker.mjs");


/**
 * used by form.field.Date
 * @class Neo.form.field.trigger.Date
 * @extends Neo.form.field.trigger.Picker
 */
class DateTrigger extends _Picker_mjs__WEBPACK_IMPORTED_MODULE_0__["default"] {
    static config = {
        /**
         * @member {String} className='Neo.form.field.trigger.Date'
         * @protected
         */
        className: 'Neo.form.field.trigger.Date',
        /**
         * @member {String} ntype='trigger-date'
         * @protected
         */
        ntype: 'trigger-date',
        /**
         * @member {String|null} iconCls='fa fa-calendar-alt'
         */
        iconCls: 'fa fa-calendar-alt'
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(DateTrigger));


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2h1bmtzL2FwcC92ZW5kb3JzLWV4YW1wbGVzX2dyaWRfY2VsbEVkaXRpbmdfYXBwX21qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF5RjtBQUNHO0FBQ1Q7QUFDRztBQUNSO0FBQ0Q7QUFDSjtBQUNDO0FBQ0Q7QUFDQztBQUNqQjtBQUNtQjtBQUNEOztBQUUzRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixrRUFBcUI7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLGdDQUFnQztBQUMvRCw4QkFBOEIsdUVBQTBCO0FBQ3hEOztBQUVBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0EscUJBQXFCLE9BQU87QUFDNUI7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsYUFBYSxnQkFBZ0I7O0FBRTdCO0FBQ0EsNEJBQTRCLGtFQUFLO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx1QkFBdUIsbUVBQVc7QUFDbEM7QUFDQSx3QkFBd0IsNkNBQTZDO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qix3REFBd0QseUVBQVMsRUFBRTtBQUNoRyw2QkFBNkIsa0JBQWtCO0FBQy9DO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSw2QkFBNkIsd0RBQXdELCtFQUFlLEVBQUU7QUFDdEc7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLDZCQUE2Qix3REFBd0QsNEVBQVksRUFBRTtBQUNuRztBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsNkJBQTZCLHdEQUF3RCxrRkFBa0IsRUFBRTtBQUN6RztBQUNBLFNBQVM7QUFDVCw0QkFBNEIsb0VBQVE7QUFDcEM7QUFDQTtBQUNBLDZCQUE2QiwrQ0FBK0M7QUFDNUUsNkJBQTZCLGtCQUFrQjtBQUMvQztBQUNBLFNBQVM7QUFDVCw0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QUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLFlBQVksc0RBQVE7O0FBRXBCO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsVUFBVTtBQUNWO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLFNBQVM7QUFDeEIsaUJBQWlCLFNBQVM7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxpRUFBZSx5QkFBeUIsRUFBQzs7Ozs7Ozs7Ozs7Ozs7OztBQ3hTUDs7QUFFbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixtREFBTTtBQUNoQztBQUNBO0FBQ0Esb0JBQW9CLFFBQVE7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsUUFBUTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixhQUFhO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGlFQUFlLDJCQUEyQixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmVvLm1qcy8uL2V4YW1wbGVzL2dyaWQvY2VsbEVkaXRpbmcvTWFpbkNvbnRhaW5lci5tanMiLCJ3ZWJwYWNrOi8vbmVvLm1qcy8uL2V4YW1wbGVzL2dyaWQvY2VsbEVkaXRpbmcvTWFpbkNvbnRhaW5lclN0YXRlUHJvdmlkZXIubWpzIiwid2VicGFjazovL25lby5tanMvLi9leGFtcGxlcy9ncmlkL2NlbGxFZGl0aW5nL01haW5Nb2RlbC5tanMiLCJ3ZWJwYWNrOi8vbmVvLm1qcy8uL2V4YW1wbGVzL2dyaWQvY2VsbEVkaXRpbmcvTWFpblN0b3JlLm1qcyIsIndlYnBhY2s6Ly9uZW8ubWpzLy4vZXhhbXBsZXMvZ3JpZC9jZWxsRWRpdGluZy9hcHAubWpzIiwid2VicGFjazovL25lby5tanMvLi9zcmMvZm9ybS9maWVsZC9Db3VudHJ5Lm1qcyIsIndlYnBhY2s6Ly9uZW8ubWpzLy4vc3JjL2Zvcm0vZmllbGQvRGF0ZS5tanMiLCJ3ZWJwYWNrOi8vbmVvLm1qcy8uL3NyYy9mb3JtL2ZpZWxkL3RyaWdnZXIvRGF0ZS5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IENlbGxDb2x1bW5Nb2RlbCAgICAgICAgICAgIGZyb20gJy4uLy4uLy4uL3NyYy9zZWxlY3Rpb24vZ3JpZC9DZWxsQ29sdW1uTW9kZWwubWpzJztcbmltcG9ydCBDZWxsQ29sdW1uUm93TW9kZWwgICAgICAgICBmcm9tICcuLi8uLi8uLi9zcmMvc2VsZWN0aW9uL2dyaWQvQ2VsbENvbHVtblJvd01vZGVsLm1qcyc7XG5pbXBvcnQgQ2VsbE1vZGVsICAgICAgICAgICAgICAgICAgZnJvbSAnLi4vLi4vLi4vc3JjL3NlbGVjdGlvbi9ncmlkL0NlbGxNb2RlbC5tanMnO1xuaW1wb3J0IENlbGxSb3dNb2RlbCAgICAgICAgICAgICAgIGZyb20gJy4uLy4uLy4uL3NyYy9zZWxlY3Rpb24vZ3JpZC9DZWxsUm93TW9kZWwubWpzJztcbmltcG9ydCBDaGVja0JveCAgICAgICAgICAgICAgICAgICBmcm9tICcuLi8uLi8uLi9zcmMvZm9ybS9maWVsZC9DaGVja0JveC5tanMnO1xuaW1wb3J0IENvdW50cnlGaWVsZCAgICAgICAgICAgICAgIGZyb20gJy4uLy4uLy4uL3NyYy9mb3JtL2ZpZWxkL0NvdW50cnkubWpzJztcbmltcG9ydCBDb25maWd1cmF0aW9uVmlld3BvcnQgICAgICBmcm9tICcuLi8uLi9Db25maWd1cmF0aW9uVmlld3BvcnQubWpzJztcbmltcG9ydCBEYXRlRmllbGQgICAgICAgICAgICAgICAgICBmcm9tICcuLi8uLi8uLi9zcmMvZm9ybS9maWVsZC9EYXRlLm1qcyc7XG5pbXBvcnQgR3JpZENvbnRhaW5lciAgICAgICAgICAgICAgZnJvbSAnLi4vLi4vLi4vc3JjL2dyaWQvQ29udGFpbmVyLm1qcyc7XG5pbXBvcnQgTWFpbkNvbnRhaW5lclN0YXRlUHJvdmlkZXIgZnJvbSAnLi9NYWluQ29udGFpbmVyU3RhdGVQcm92aWRlci5tanMnO1xuaW1wb3J0IE1haW5TdG9yZSAgICAgICAgICAgICAgICAgIGZyb20gJy4vTWFpblN0b3JlLm1qcyc7XG5pbXBvcnQgTnVtYmVyRmllbGQgICAgICAgICAgICAgICAgZnJvbSAnLi4vLi4vLi4vc3JjL2Zvcm0vZmllbGQvTnVtYmVyLm1qcyc7XG5pbXBvcnQgUmFkaW8gICAgICAgICAgICAgICAgICAgICAgZnJvbSAnLi4vLi4vLi4vc3JjL2Zvcm0vZmllbGQvUmFkaW8ubWpzJztcblxuLyoqXG4gKiBAY2xhc3MgTmVvLmV4YW1wbGVzLmdyaWQuY2VsbEVkaXRpbmcuTWFpbkNvbnRhaW5lclxuICogQGV4dGVuZHMgTmVvLmV4YW1wbGVzLkNvbmZpZ3VyYXRpb25WaWV3cG9ydFxuICovXG5jbGFzcyBNYWluQ29udGFpbmVyIGV4dGVuZHMgQ29uZmlndXJhdGlvblZpZXdwb3J0IHtcbiAgICBzdGF0aWMgY29uZmlnID0ge1xuICAgICAgICBjbGFzc05hbWUgICAgICAgICAgIDogJ05lby5leGFtcGxlcy5ncmlkLmNlbGxFZGl0aW5nLk1haW5Db250YWluZXInLFxuICAgICAgICBhdXRvTW91bnQgICAgICAgICAgIDogdHJ1ZSxcbiAgICAgICAgY29uZmlnSXRlbUxhYmVsV2lkdGg6IDEzMCxcbiAgICAgICAgY29uZmlnUGFuZWxGbGV4ICAgICA6IDEuNSxcbiAgICAgICAgZXhhbXBsZUNvbXBvbmVudEZsZXg6IDMsXG4gICAgICAgIGxheW91dCAgICAgICAgICAgICAgOiB7bnR5cGU6ICdoYm94JywgYWxpZ246ICdzdHJldGNoJ30sXG4gICAgICAgIHN0YXRlUHJvdmlkZXIgICAgICAgOiBNYWluQ29udGFpbmVyU3RhdGVQcm92aWRlclxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhXG4gICAgICovXG4gICAgY291bnRyeVJlbmRlcmVyKHtyZWNvcmR9KSB7XG4gICAgICAgIGxldCBjb3VudHJ5U3RvcmUgPSB0aGlzLmdldFN0YXRlUHJvdmlkZXIoKS5nZXRTdG9yZSgnY291bnRyaWVzJyk7XG5cbiAgICAgICAgaWYgKGNvdW50cnlTdG9yZS5nZXRDb3VudCgpID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGNvdW50cnlTdG9yZS5nZXQocmVjb3JkLmNvdW50cnkpLm5hbWVcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAnJ1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIHtPYmplY3RbXX1cbiAgICAgKi9cbiAgICBjcmVhdGVDb25maWd1cmF0aW9uQ29tcG9uZW50cygpIHtcbiAgICAgICAgbGV0IG1lICAgICAgICAgICAgICAgPSB0aGlzLFxuICAgICAgICAgICAge3NlbGVjdGlvbk1vZGVsfSA9IG1lLmV4YW1wbGVDb21wb25lbnQudmlldztcblxuICAgICAgICBjb25zdCBzZWxlY3Rpb25Nb2RlbFJhZGlvRGVmYXVsdHMgPSB7XG4gICAgICAgICAgICBtb2R1bGUgICAgICAgIDogUmFkaW8sXG4gICAgICAgICAgICBoaWRlVmFsdWVMYWJlbDogZmFsc2UsXG4gICAgICAgICAgICBsYWJlbFRleHQgICAgIDogJycsXG4gICAgICAgICAgICBuYW1lICAgICAgICAgIDogJ3NlbGVjdGlvbk1vZGVsJyxcbiAgICAgICAgICAgIHdpZHRoICAgICAgICAgOiAzNTBcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gW3tcbiAgICAgICAgICAgIG1vZHVsZSAgIDogTnVtYmVyRmllbGQsXG4gICAgICAgICAgICBsYWJlbFRleHQ6ICdoZWlnaHQnLFxuICAgICAgICAgICAgbGlzdGVuZXJzOiB7Y2hhbmdlOiBtZS5vbkNvbmZpZ0NoYW5nZS5iaW5kKG1lLCAnaGVpZ2h0Jyl9LFxuICAgICAgICAgICAgbWF4VmFsdWUgOiA4MDAsXG4gICAgICAgICAgICBtaW5WYWx1ZSA6IDIyNSxcbiAgICAgICAgICAgIHN0ZXBTaXplIDogNSxcbiAgICAgICAgICAgIHZhbHVlICAgIDogbWUuZXhhbXBsZUNvbXBvbmVudC5oZWlnaHRcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgLi4uc2VsZWN0aW9uTW9kZWxSYWRpb0RlZmF1bHRzLFxuICAgICAgICAgICAgY2hlY2tlZCAgICAgICA6IHNlbGVjdGlvbk1vZGVsLm50eXBlID09PSAnc2VsZWN0aW9uLWdyaWQtY2VsbG1vZGVsJyxcbiAgICAgICAgICAgIGxhYmVsVGV4dCAgICAgOiAnc2VsZWN0aW9uTW9kZWwnLFxuICAgICAgICAgICAgbGlzdGVuZXJzICAgICA6IHtjaGFuZ2U6IG1lLm9uUmFkaW9WaWV3Q2hhbmdlLmJpbmQobWUsICdzZWxlY3Rpb25Nb2RlbCcsIENlbGxNb2RlbCl9LFxuICAgICAgICAgICAgc3R5bGUgICAgICAgICA6IHttYXJnaW5Ub3A6ICcxMHB4J30sXG4gICAgICAgICAgICB2YWx1ZUxhYmVsVGV4dDogJ0NlbGwnXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIC4uLnNlbGVjdGlvbk1vZGVsUmFkaW9EZWZhdWx0cyxcbiAgICAgICAgICAgIGNoZWNrZWQgICAgICAgOiBzZWxlY3Rpb25Nb2RlbC5udHlwZSA9PT0gJ3NlbGVjdGlvbi1ncmlkLWNlbGxjb2x1bW5tb2RlbCcsXG4gICAgICAgICAgICBsaXN0ZW5lcnMgICAgIDoge2NoYW5nZTogbWUub25SYWRpb1ZpZXdDaGFuZ2UuYmluZChtZSwgJ3NlbGVjdGlvbk1vZGVsJywgQ2VsbENvbHVtbk1vZGVsKX0sXG4gICAgICAgICAgICB2YWx1ZUxhYmVsVGV4dDogJ0NlbGwgJiBDb2x1bW4nXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIC4uLnNlbGVjdGlvbk1vZGVsUmFkaW9EZWZhdWx0cyxcbiAgICAgICAgICAgIGNoZWNrZWQgICAgICAgOiBzZWxlY3Rpb25Nb2RlbC5udHlwZSA9PT0gJ3NlbGVjdGlvbi1ncmlkLWNlbGxyb3dtb2RlbCcsXG4gICAgICAgICAgICBsaXN0ZW5lcnMgICAgIDoge2NoYW5nZTogbWUub25SYWRpb1ZpZXdDaGFuZ2UuYmluZChtZSwgJ3NlbGVjdGlvbk1vZGVsJywgQ2VsbFJvd01vZGVsKX0sXG4gICAgICAgICAgICB2YWx1ZUxhYmVsVGV4dDogJ0NlbGwgJiBSb3cnXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIC4uLnNlbGVjdGlvbk1vZGVsUmFkaW9EZWZhdWx0cyxcbiAgICAgICAgICAgIGNoZWNrZWQgICAgICAgOiBzZWxlY3Rpb25Nb2RlbC5udHlwZSA9PT0gJ3NlbGVjdGlvbi1ncmlkLWNlbGxjb2x1bW5yb3dtb2RlbCcsXG4gICAgICAgICAgICBsaXN0ZW5lcnMgICAgIDoge2NoYW5nZTogbWUub25SYWRpb1ZpZXdDaGFuZ2UuYmluZChtZSwgJ3NlbGVjdGlvbk1vZGVsJywgQ2VsbENvbHVtblJvd01vZGVsKX0sXG4gICAgICAgICAgICB2YWx1ZUxhYmVsVGV4dDogJ0NlbGwgJiBDb2x1bW4gJiBSb3cnXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG1vZHVsZSAgICAgICAgOiBDaGVja0JveCxcbiAgICAgICAgICAgIGNoZWNrZWQgICAgICAgOiBtZS5leGFtcGxlQ29tcG9uZW50LnNvcnRhYmxlLFxuICAgICAgICAgICAgaGlkZUxhYmVsICAgICA6IHRydWUsXG4gICAgICAgICAgICBsaXN0ZW5lcnMgICAgIDoge2NoYW5nZTogbWUub25Db25maWdDaGFuZ2UuYmluZChtZSwgJ3NvcnRhYmxlJyl9LFxuICAgICAgICAgICAgc3R5bGUgICAgICAgICA6IHttYXJnaW5Ub3A6ICcxMHB4J30sXG4gICAgICAgICAgICB2YWx1ZUxhYmVsVGV4dDogJ3NvcnRhYmxlJ1xuICAgICAgICB9LCB7XG4gICAgICAgICAgICBtb2R1bGUgICAgICAgIDogQ2hlY2tCb3gsXG4gICAgICAgICAgICBjaGVja2VkICAgICAgIDogZmFsc2UsIC8vIHdlIGNhbiBub3QgYWNjZXNzIHRoZSBsYXp5LWxvYWRlZCBwbHVnaW4geWV0XG4gICAgICAgICAgICBoaWRlTGFiZWwgICAgIDogdHJ1ZSxcbiAgICAgICAgICAgIGxpc3RlbmVycyAgICAgOiB7Y2hhbmdlOiBtZS5vblBsdWdpbkNvbmZpZ0NoYW5nZS5iaW5kKG1lLCAnZGlzYWJsZWQnKX0sXG4gICAgICAgICAgICBzdHlsZSAgICAgICAgIDoge21hcmdpblRvcDogJzEwcHgnfSxcbiAgICAgICAgICAgIHZhbHVlTGFiZWxUZXh0OiAnRGlzYWJsZSBDZWxsRWRpdGluZydcbiAgICAgICAgfV1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgICAqL1xuICAgIGNyZWF0ZUV4YW1wbGVDb21wb25lbnQoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtb2R1bGUgICAgIDogR3JpZENvbnRhaW5lcixcbiAgICAgICAgICAgIGJpbmQgICAgICAgOiB7c3RvcmU6ICdzdG9yZXMubWFpblN0b3JlJ30sXG4gICAgICAgICAgICBjZWxsRWRpdGluZzogdHJ1ZSxcbiAgICAgICAgICAgIHBhcmVudElkICAgOiB0aGlzLmlkLFxuICAgICAgICAgICAgc3RvcmUgICAgICA6IE1haW5TdG9yZSxcblxuICAgICAgICAgICAgY29sdW1uRGVmYXVsdHM6IHtcbiAgICAgICAgICAgICAgICBlZGl0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICB3aWR0aCAgIDogMjAwXG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBjb2x1bW5zOiBbe1xuICAgICAgICAgICAgICAgIGRhdGFGaWVsZDogJ2ZpcnN0bmFtZScsXG4gICAgICAgICAgICAgICAgdGV4dCAgICAgOiAnRmlyc3RuYW1lJ1xuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIGRhdGFGaWVsZDogJ3JhbmRvbU51bWJlcicsXG4gICAgICAgICAgICAgICAgdGV4dCAgICAgOiAnTnVtYmVyIChzdGVwIDUpJyxcblxuICAgICAgICAgICAgICAgIGVkaXRvcjoge1xuICAgICAgICAgICAgICAgICAgICBtb2R1bGUgICA6IE51bWJlckZpZWxkLFxuICAgICAgICAgICAgICAgICAgICBjbGVhcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtYXhWYWx1ZSA6IDEwMCxcbiAgICAgICAgICAgICAgICAgICAgbWluVmFsdWUgOiAwLFxuICAgICAgICAgICAgICAgICAgICBzdGVwU2l6ZSA6IDVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgZGF0YUZpZWxkOiAncmFuZG9tRGF0ZScsXG4gICAgICAgICAgICAgICAgcmVuZGVyZXIgOiAoe3ZhbHVlfSkgPT4gbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQoJ2RlZmF1bHQnKS5mb3JtYXQodmFsdWUpLFxuICAgICAgICAgICAgICAgIHRleHQgICAgIDogJ1JhbmRvbSBEYXRlJyxcblxuICAgICAgICAgICAgICAgIGVkaXRvcjoge1xuICAgICAgICAgICAgICAgICAgICBtb2R1bGUgICA6IERhdGVGaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbWF4VmFsdWUgOiAnMjAyNC0xMi0yMCcsXG4gICAgICAgICAgICAgICAgICAgIG1pblZhbHVlIDogJzIwMjQtMTItMTAnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIGRhdGFGaWVsZDogJ2NvdW50cnknLFxuICAgICAgICAgICAgICAgIHJlbmRlcmVyIDogJ3VwLmNvdW50cnlSZW5kZXJlcicsXG4gICAgICAgICAgICAgICAgdGV4dCAgICAgOiAnQ291bnRyeScsXG5cbiAgICAgICAgICAgICAgICBlZGl0b3I6IHtcbiAgICAgICAgICAgICAgICAgICAgbW9kdWxlICAgICAgICA6IENvdW50cnlGaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgYmluZCAgICAgICAgICA6IHtzdG9yZTogJ3N0b3Jlcy5jb3VudHJpZXMnfSxcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJhYmxlICAgICA6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBmb3JjZVNlbGVjdGlvbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVGaWVsZCAgICA6ICdjb2RlJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBkYXRhRmllbGQ6ICdnaXRodWJJZCcsXG4gICAgICAgICAgICAgICAgZWRpdGFibGUgOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB0ZXh0ICAgICA6ICdHaXRodWIgSWQgKE5vbi1lZGl0YWJsZSknXG4gICAgICAgICAgICB9XSxcblxuICAgICAgICAgICAgdmlld0NvbmZpZzoge1xuICAgICAgICAgICAgICAgIHNlbGVjdGlvbk1vZGVsOiBDZWxsTW9kZWxcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBjb25maWdcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0c1xuICAgICAqL1xuICAgIG9uUGx1Z2luQ29uZmlnQ2hhbmdlKGNvbmZpZywgb3B0cykge1xuICAgICAgICB0aGlzLmV4YW1wbGVDb21wb25lbnQuZ2V0UGx1Z2luKCdncmlkLWNlbGwtZWRpdGluZycpW2NvbmZpZ10gPSBvcHRzLnZhbHVlXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGNvbmZpZ1xuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzXG4gICAgICovXG4gICAgb25SYWRpb1ZpZXdDaGFuZ2UoY29uZmlnLCB2YWx1ZSwgb3B0cykge1xuICAgICAgICBpZiAob3B0cy52YWx1ZSA9PT0gdHJ1ZSkgeyAvLyB3ZSBvbmx5IHdhbnQgdG8gbGlzdGVuIHRvIGNoZWNrIGV2ZW50cywgbm90IHVuY2hlY2tcbiAgICAgICAgICAgIHRoaXMuZXhhbXBsZUNvbXBvbmVudC52aWV3W2NvbmZpZ10gPSB2YWx1ZVxuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBOZW8uc2V0dXBDbGFzcyhNYWluQ29udGFpbmVyKTtcbiIsImltcG9ydCBNYWluU3RvcmUgICAgIGZyb20gJy4vTWFpblN0b3JlLm1qcyc7XG5pbXBvcnQgU3RhdGVQcm92aWRlciBmcm9tICcuLi8uLi8uLi9zcmMvc3RhdGUvUHJvdmlkZXIubWpzJztcbmltcG9ydCBTdG9yZSAgICAgICAgIGZyb20gJy4uLy4uLy4uL3NyYy9kYXRhL1N0b3JlLm1qcyc7XG5cbmNvbnN0IGNvdW50cnlTeW1ib2wgPSBTeW1ib2wuZm9yKCdjb3VudHJ5Jyk7XG5cbi8qKlxuICogQGNsYXNzIE5lby5leGFtcGxlcy5ncmlkLmNlbGxFZGl0aW5nLk1haW5Db250YWluZXJTdGF0ZVByb3ZpZGVyXG4gKiBAZXh0ZW5kcyBOZW8uc3RhdGUuUHJvdmlkZXJcbiAqL1xuY2xhc3MgTWFpbkNvbnRhaW5lclN0YXRlUHJvdmlkZXIgZXh0ZW5kcyBTdGF0ZVByb3ZpZGVyIHtcbiAgICBzdGF0aWMgY29uZmlnID0ge1xuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfSBjbGFzc05hbWU9J05lby5leGFtcGxlcy5ncmlkLmNlbGxFZGl0aW5nLk1haW5Db250YWluZXJTdGF0ZVByb3ZpZGVyJ1xuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICBjbGFzc05hbWU6ICdOZW8uZXhhbXBsZXMuZ3JpZC5jZWxsRWRpdGluZy5NYWluQ29udGFpbmVyU3RhdGVQcm92aWRlcicsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtPYmplY3R9IHN0b3Jlc1xuICAgICAgICAgKi9cbiAgICAgICAgc3RvcmVzOiB7XG4gICAgICAgICAgICBjb3VudHJpZXM6IHtcbiAgICAgICAgICAgICAgICBtb2R1bGUgICAgIDogU3RvcmUsXG4gICAgICAgICAgICAgICAgYXV0b0xvYWQgICA6IHRydWUsXG4gICAgICAgICAgICAgICAga2V5UHJvcGVydHk6ICdjb2RlJyxcbiAgICAgICAgICAgICAgICBsaXN0ZW5lcnMgIDoge2xvYWQ6ICdvbkNvdW50cnlTdG9yZUxvYWQnfSxcbiAgICAgICAgICAgICAgICB1cmwgICAgICAgIDogJy4uLy4uLy4uL3Jlc291cmNlcy9leGFtcGxlcy9kYXRhL2NvdW50cmllcy5qc29uJyxcblxuICAgICAgICAgICAgICAgIG1vZGVsOiB7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkczogW1xuICAgICAgICAgICAgICAgICAgICAgICAge25hbWU6ICdjb2RlJ30sXG4gICAgICAgICAgICAgICAgICAgICAgICB7bmFtZTogJ25hbWUnfVxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1haW5TdG9yZTogTWFpblN0b3JlXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1JlY29yZFtdfSBpdGVtc1xuICAgICAqL1xuICAgIG9uQ291bnRyeVN0b3JlTG9hZChpdGVtcykge1xuICAgICAgICBsZXQgbWUgICAgICAgID0gdGhpcyxcbiAgICAgICAgICAgIG1haW5TdG9yZSA9IG1lLmdldFN0b3JlKCdtYWluU3RvcmUnKSxcbiAgICAgICAgICAgIGNvdW50cnk7XG5cbiAgICAgICAgLy8gaWYgdGhlIG1haW4gdGFibGUgc3RvcmUgaXMgYWxyZWFkeSBsb2FkZWQsIHRoZSBjb3VudHJ5IGZpZWxkIHJlbmRlcmVyIGhhZCBubyBkYXRhXG4gICAgICAgIGlmIChtYWluU3RvcmUuZ2V0Q291bnQoKSA+IDApIHtcbiAgICAgICAgICAgIG1haW5TdG9yZS5pdGVtcy5mb3JFYWNoKHJlY29yZCA9PiB7XG4gICAgICAgICAgICAgICAgY291bnRyeSA9IHJlY29yZC5jb3VudHJ5O1xuXG4gICAgICAgICAgICAgICAgLy8gaGFjayByZXNldHRpbmcgdGhlIGN1cnJlbnQgdmFsdWUgdG8gZ2V0IGEgbmV3IHJlY29yZCBjaGFuZ2VcbiAgICAgICAgICAgICAgICByZWNvcmRbY291bnRyeVN5bWJvbF0gPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgcmVjb3JkLmNvdW50cnkgPSBjb3VudHJ5XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBOZW8uc2V0dXBDbGFzcyhNYWluQ29udGFpbmVyU3RhdGVQcm92aWRlcik7XG4iLCJpbXBvcnQgTW9kZWwgZnJvbSAnLi4vLi4vLi4vc3JjL2RhdGEvTW9kZWwubWpzJztcblxuLyoqXG4gKiBAY2xhc3MgTmVvLmV4YW1wbGVzLmdyaWQuY2VsbEVkaXRpbmcuTWFpbk1vZGVsXG4gKiBAZXh0ZW5kcyBOZW8uZGF0YS5Nb2RlbFxuICovXG5jbGFzcyBNYWluTW9kZWwgZXh0ZW5kcyBNb2RlbCB7XG4gICAgc3RhdGljIGNvbmZpZyA9IHtcbiAgICAgICAgY2xhc3NOYW1lOiAnTmVvLmV4YW1wbGVzLmdyaWQuY2VsbEVkaXRpbmcuTWFpbk1vZGVsJyxcblxuICAgICAgICBmaWVsZHM6IFt7XG4gICAgICAgICAgICBuYW1lOiAnY291bnRyeScsXG4gICAgICAgICAgICB0eXBlOiAnU3RyaW5nJ1xuICAgICAgICB9LCB7XG4gICAgICAgICAgICBuYW1lOiAnZmlyc3RuYW1lJyxcbiAgICAgICAgICAgIHR5cGU6ICdTdHJpbmcnXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG5hbWU6ICdnaXRodWJJZCcsXG4gICAgICAgICAgICB0eXBlOiAnU3RyaW5nJ1xuICAgICAgICB9LCB7XG4gICAgICAgICAgICBuYW1lOiAncmFuZG9tTnVtYmVyJyxcbiAgICAgICAgICAgIHR5cGU6ICdJbnQnXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG5hbWU6ICdyYW5kb21EYXRlJyxcbiAgICAgICAgICAgIHR5cGU6ICdEYXRlJ1xuICAgICAgICB9XVxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTmVvLnNldHVwQ2xhc3MoTWFpbk1vZGVsKTtcbiIsImltcG9ydCBNb2RlbCBmcm9tICcuL01haW5Nb2RlbC5tanMnO1xuaW1wb3J0IFN0b3JlIGZyb20gJy4uLy4uLy4uL3NyYy9kYXRhL1N0b3JlLm1qcyc7XG5cbi8qKlxuICogQGNsYXNzIE5lby5leGFtcGxlcy5ncmlkLmNlbGxFZGl0aW5nLk1haW5TdG9yZVxuICogQGV4dGVuZHMgTmVvLmRhdGEuU3RvcmVcbiAqL1xuY2xhc3MgTWFpblN0b3JlIGV4dGVuZHMgU3RvcmUge1xuICAgIHN0YXRpYyBjb25maWcgPSB7XG4gICAgICAgIGNsYXNzTmFtZSAgOiAnTmVvLmV4YW1wbGVzLmdyaWQuY2VsbEVkaXRpbmcuTWFpblN0b3JlJyxcbiAgICAgICAga2V5UHJvcGVydHk6ICdnaXRodWJJZCcsXG4gICAgICAgIG1vZGVsICAgICAgOiBNb2RlbCxcblxuICAgICAgICBkYXRhOiBbe1xuICAgICAgICAgICAgY291bnRyeSAgICAgOiAnREUnLFxuICAgICAgICAgICAgZmlyc3RuYW1lICAgOiAnVG9iaWFzJyxcbiAgICAgICAgICAgIGdpdGh1YklkICAgIDogJ3RvYml1JyxcbiAgICAgICAgICAgIHJhbmRvbURhdGUgIDogJzIwMjQtMTItMjAnLFxuICAgICAgICAgICAgcmFuZG9tTnVtYmVyOiAxMDBcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgY291bnRyeSAgICAgOiAnVVMnLFxuICAgICAgICAgICAgZmlyc3RuYW1lICAgOiAnUmljaCcsXG4gICAgICAgICAgICBnaXRodWJJZCAgICA6ICdyd2F0ZXJzJyxcbiAgICAgICAgICAgIHJhbmRvbURhdGUgIDogJzIwMjQtMTItMTgnLFxuICAgICAgICAgICAgcmFuZG9tTnVtYmVyOiA5MFxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBjb3VudHJ5ICAgICA6ICdERScsXG4gICAgICAgICAgICBmaXJzdG5hbWUgICA6ICdOaWxzJyxcbiAgICAgICAgICAgIGdpdGh1YklkICAgIDogJ21yc3Vuc2hpbmUnLFxuICAgICAgICAgICAgcmFuZG9tRGF0ZSAgOiAnMjAyNC0xMi0xOScsXG4gICAgICAgICAgICByYW5kb21OdW1iZXI6IDcwXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGNvdW50cnkgICAgIDogJ1VTJyxcbiAgICAgICAgICAgIGZpcnN0bmFtZSAgIDogJ0dlcmFyZCcsXG4gICAgICAgICAgICBnaXRodWJJZCAgICA6ICdjYW10bmJpa2VycndjJyxcbiAgICAgICAgICAgIHJhbmRvbURhdGUgIDogJzIwMjQtMTItMTcnLFxuICAgICAgICAgICAgcmFuZG9tTnVtYmVyOiA4MFxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBjb3VudHJ5ICAgICA6ICdTSycsXG4gICAgICAgICAgICBmaXJzdG5hbWUgICA6ICdKb3plZicsXG4gICAgICAgICAgICBnaXRodWJJZCAgICA6ICdqc2FrYWxvcycsXG4gICAgICAgICAgICByYW5kb21EYXRlICA6ICcyMDI0LTEyLTE2JyxcbiAgICAgICAgICAgIHJhbmRvbU51bWJlcjogNjBcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgY291bnRyeSAgICAgOiAnREUnLFxuICAgICAgICAgICAgZmlyc3RuYW1lICAgOiAnQmFzdGlhbicsXG4gICAgICAgICAgICBnaXRodWJJZCAgICA6ICdiaGF1c3RlaW4nLFxuICAgICAgICAgICAgcmFuZG9tRGF0ZSAgOiAnMjAyNC0xMi0xNScsXG4gICAgICAgICAgICByYW5kb21OdW1iZXI6IDUwXG4gICAgICAgIH1dXG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBOZW8uc2V0dXBDbGFzcyhNYWluU3RvcmUpO1xuIiwiaW1wb3J0IE1haW5Db250YWluZXIgZnJvbSAnLi9NYWluQ29udGFpbmVyLm1qcyc7XG5cbmV4cG9ydCBjb25zdCBvblN0YXJ0ID0gKCkgPT4gTmVvLmFwcCh7XG4gICAgbWFpblZpZXc6IE1haW5Db250YWluZXIsXG4gICAgbmFtZSAgICA6ICdOZW8uZXhhbXBsZXMuZ3JpZC5jZWxsRWRpdGluZydcbn0pO1xuIiwiaW1wb3J0IENvbWJvQm94IGZyb20gJy4vQ29tYm9Cb3gubWpzJztcblxuLyoqXG4gKiBAY2xhc3MgTmVvLmZvcm0uZmllbGQuQ291bnRyeVxuICogQGV4dGVuZHMgTmVvLmZvcm0uZmllbGQuQ29tYm9Cb3hcbiAqL1xuY2xhc3MgQ291bnRyeSBleHRlbmRzIENvbWJvQm94IHtcbiAgICBzdGF0aWMgY29uZmlnID0ge1xuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfSBjbGFzc05hbWU9J05lby5mb3JtLmZpZWxkLkNvdW50cnknXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIGNsYXNzTmFtZTogJ05lby5mb3JtLmZpZWxkLkNvdW50cnknLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfSBudHlwZT0nY291bnRyeWZpZWxkJ1xuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICBudHlwZTogJ2NvdW50cnlmaWVsZCcsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBZb3UgY2FuIGVpdGhlciBwYXNzIGEgZmllbGQgaW5zdGFuY2Ugb3IgYSBmaWVsZCByZWZlcmVuY2VcbiAgICAgICAgICogQG1lbWJlciB7TmVvLmZvcm0uZmllbGQuQmFzZXxTdHJpbmd8bnVsbH0gemlwQ29kZUZpZWxkXz1udWxsXG4gICAgICAgICAqL1xuICAgICAgICB6aXBDb2RlRmllbGRfOiBudWxsXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIGFmdGVyIHRoZSB6aXBDb2RlRmllbGQgY29uZmlnIGdvdCBjaGFuZ2VkXG4gICAgICogQHBhcmFtIHtOZW8uZm9ybS5maWVsZC5CYXNlfG51bGx9IHZhbHVlXG4gICAgICogQHBhcmFtIHtOZW8uZm9ybS5maWVsZC5CYXNlfG51bGx9IG9sZFZhbHVlXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIGFmdGVyU2V0WmlwQ29kZUZpZWxkKHZhbHVlLCBvbGRWYWx1ZSkge1xuICAgICAgICBpZiAodmFsdWUgJiYgdmFsdWUgaW5zdGFuY2VvZiBOZW8uZm9ybS5maWVsZC5CYXNlKSB7XG4gICAgICAgICAgICB2YWx1ZS5jb3VudHJ5RmllbGQgPSB0aGlzXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgYmVmb3JlIHRoZSB6aXBDb2RlRmllbGQgY29uZmlnIGdldHMgY2hhbmdlZFxuICAgICAqIEBwYXJhbSB7TmVvLmZvcm0uZmllbGQuQmFzZXxTdHJpbmd8bnVsbH0gdmFsdWVcbiAgICAgKiBAcGFyYW0ge05lby5mb3JtLmZpZWxkLkJhc2V8U3RyaW5nfG51bGx9IG9sZFZhbHVlXG4gICAgICogQHJldHVybnMge05lby5mb3JtLmZpZWxkLkJhc2V8bnVsbH1cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgYmVmb3JlU2V0WmlwQ29kZUZpZWxkKHZhbHVlLCBvbGRWYWx1ZSkge1xuICAgICAgICBsZXQgbWUgPSB0aGlzO1xuXG4gICAgICAgIGlmIChOZW8uaXNTdHJpbmcodmFsdWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gbWUudXAoKS5nZXRSZWZlcmVuY2UodmFsdWUpXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdmFsdWVcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IE5lby5zZXR1cENsYXNzKENvdW50cnkpO1xuIiwiaW1wb3J0IERhdGVTZWxlY3RvciBmcm9tICcuLi8uLi9jb21wb25lbnQvRGF0ZVNlbGVjdG9yLm1qcydcbmltcG9ydCBEYXRlVHJpZ2dlciAgZnJvbSAnLi90cmlnZ2VyL0RhdGUubWpzJ1xuaW1wb3J0IERhdGVVdGlsICAgICBmcm9tICcuLi8uLi91dGlsL0RhdGUubWpzJztcbmltcG9ydCBQaWNrZXIgICAgICAgZnJvbSAnLi9QaWNrZXIubWpzJztcbmltcG9ydCBWRG9tVXRpbCAgICAgZnJvbSAnLi4vLi4vdXRpbC9WRG9tLm1qcyc7XG5cbi8qKlxuICogQGNsYXNzIE5lby5mb3JtLmZpZWxkLkRhdGVcbiAqIEBleHRlbmRzIE5lby5mb3JtLmZpZWxkLlBpY2tlclxuICovXG5jbGFzcyBEYXRlRmllbGQgZXh0ZW5kcyBQaWNrZXIge1xuICAgIHN0YXRpYyBjb25maWcgPSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtTdHJpbmd9IGNsYXNzTmFtZT0nTmVvLmZvcm0uZmllbGQuRGF0ZSdcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgY2xhc3NOYW1lOiAnTmVvLmZvcm0uZmllbGQuRGF0ZScsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtTdHJpbmd9IG50eXBlPSdkYXRlZmllbGQnXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIG50eXBlOiAnZGF0ZWZpZWxkJyxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ1tdfSBiYXNlQ2xzPVsnbmVvLWRhdGVmaWVsZCcsJ25lby1waWNrZXJmaWVsZCcsJ25lby10ZXh0ZmllbGQnXVxuICAgICAgICAgKi9cbiAgICAgICAgYmFzZUNsczogWyduZW8tZGF0ZWZpZWxkJywgJ25lby1waWNrZXJmaWVsZCcsICduZW8tdGV4dGZpZWxkJ10sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtOZW8uY29tcG9uZW50LkRhdGVTZWxlY3RvcnxudWxsfSBkYXRlU2VsZWN0b3I9bnVsbFxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICBkYXRlU2VsZWN0b3I6IG51bGwsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtPYmplY3R8bnVsbH0gZGF0ZVNlbGVjdG9yQ29uZmlnPW51bGxcbiAgICAgICAgICovXG4gICAgICAgIGRhdGVTZWxlY3RvckNvbmZpZzogbnVsbCxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ30gZXJyb3JUZXh0SW52YWxpZERhdGU9J05vdCBhIHZhbGlkIGRhdGUnXG4gICAgICAgICAqL1xuICAgICAgICBlcnJvclRleHRJbnZhbGlkRGF0ZTogJ05vdCBhIHZhbGlkIGRhdGUnLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7Qm9vbGVhbn0gaXNvRGF0ZT1mYWxzZVxuICAgICAgICAgKi9cbiAgICAgICAgaXNvRGF0ZTogZmFsc2UsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUcnVlIHRvIGhpZGUgdGhlIERhdGVQaWNrZXIgd2hlbiBzZWxlY3RpbmcgYSBkYXlcbiAgICAgICAgICogQG1lbWJlciB7Qm9vbGVhbn0gaGlkZVBpY2tlck9uU2VsZWN0PWZhbHNlXG4gICAgICAgICAqL1xuICAgICAgICBoaWRlUGlja2VyT25TZWxlY3Q6IGZhbHNlLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfSBpbnB1dFR5cGU9J2RhdGUnXG4gICAgICAgICAqL1xuICAgICAgICBpbnB1dFR5cGU6ICdkYXRlJyxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ3xudWxsfSBtYXhWYWx1ZV89bnVsbFxuICAgICAgICAgKi9cbiAgICAgICAgbWF4VmFsdWVfOiBudWxsLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfG51bGx9IG1pblZhbHVlXz1udWxsXG4gICAgICAgICAqL1xuICAgICAgICBtaW5WYWx1ZV86IG51bGwsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtOdW1iZXJ9IHBpY2tlckhlaWdodD0yMjVcbiAgICAgICAgICovXG4gICAgICAgIHBpY2tlckhlaWdodDogMjI1LFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7TnVtYmVyfG51bGx9IHBpY2tlck1heEhlaWdodD0yMjVcbiAgICAgICAgICovXG4gICAgICAgIHBpY2tlck1heEhlaWdodDogMjI1LFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7TnVtYmVyfSBwaWNrZXJXaWR0aD0yMDBcbiAgICAgICAgICovXG4gICAgICAgIHBpY2tlcldpZHRoOiAyMDAsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtPYmplY3R8T2JqZWN0W119IHRyaWdnZXJzPVt7bW9kdWxlOiBEYXRlVHJpZ2dlcn1dXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIHRyaWdnZXJzOiBbe1xuICAgICAgICAgICAgbW9kdWxlOiBEYXRlVHJpZ2dlclxuICAgICAgICB9XVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEludGVybmFsIGZsYWcgdG8gc3RvcmUgdGhlIGRvbSBiYXNlZCB2YWxpZGl0eSBvZiB0aGlzIGZpZWxkXG4gICAgICogQG1lbWJlciB7Qm9vbGVhbn0gaW52YWxpZElucHV0PWZhbHNlXG4gICAgICovXG4gICAgaW52YWxpZElucHV0ID0gZmFsc2VcbiAgICAvKipcbiAgICAgKiBTZXR0aW5nIHRoZSB2YWx1ZSB0byB0cnVlIHdpbGwgcmV0dXJuIGEgRGF0ZSBvYmplY3Qgd2hlbiBjYWxsaW5nIGdldFN1Ym1pdFZhbHVlKClcbiAgICAgKiBAbWVtYmVyIHtCb29sZWFufSBzdWJtaXREYXRlT2JqZWN0PWZhbHNlXG4gICAgICovXG4gICAgc3VibWl0RGF0ZU9iamVjdCA9IGZhbHNlXG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gY29uZmlnXG4gICAgICovXG4gICAgY29uc3RydWN0KGNvbmZpZykge1xuICAgICAgICBzdXBlci5jb25zdHJ1Y3QoY29uZmlnKTtcblxuICAgICAgICBsZXQgbWUgPSB0aGlzO1xuXG4gICAgICAgIG1lLmRhdGVTZWxlY3RvciA9IE5lby5jcmVhdGUoe1xuICAgICAgICAgICAgbW9kdWxlICAgICAgIDogRGF0ZVNlbGVjdG9yLFxuICAgICAgICAgICAgZGF5TmFtZUZvcm1hdDogJ3Nob3J0JyxcbiAgICAgICAgICAgIG1heFZhbHVlICAgICA6IG1lLm1heFZhbHVlLFxuICAgICAgICAgICAgbWluVmFsdWUgICAgIDogbWUubWluVmFsdWUsXG4gICAgICAgICAgICB2YWx1ZSAgICAgICAgOiBtZS52YWx1ZSB8fCBEYXRlVXRpbC5jb252ZXJ0VG95eXl5bW1kZChuZXcgRGF0ZSgpKSxcbiAgICAgICAgICAgIC4uLm1lLmRhdGVTZWxlY3RvckNvbmZpZ1xuICAgICAgICB9KTtcblxuICAgICAgICBtZS5kYXRlU2VsZWN0b3Iua2V5cy5fa2V5cy5wdXNoKFxuICAgICAgICAgICAge2ZuOiAnb25Db250YWluZXJLZXlEb3duRXNjYXBlJywga2V5OiAnRXNjYXBlJywgc2NvcGU6IG1lLmlkfVxuICAgICAgICApO1xuXG4gICAgICAgIG1lLmRhdGVTZWxlY3Rvci5vbih7XG4gICAgICAgICAgICBjaGFuZ2U6IG1lLm9uRGF0ZVBpY2tlckNoYW5nZSxcbiAgICAgICAgICAgIHNjb3BlIDogbWVcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgYWZ0ZXIgdGhlIG1heFZhbHVlIGNvbmZpZyBnb3QgY2hhbmdlZFxuICAgICAqIEBwYXJhbSB7VGV4dH0gdmFsdWVcbiAgICAgKiBAcGFyYW0ge1RleHR9IG9sZFZhbHVlXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIGFmdGVyU2V0TWF4VmFsdWUodmFsdWUsIG9sZFZhbHVlKSB7XG4gICAgICAgIGxldCBtZSA9IHRoaXM7XG5cbiAgICAgICAgbWUuY2hhbmdlSW5wdXRFbEtleSgnbWF4JywgdmFsdWUpO1xuXG4gICAgICAgIGlmIChtZS5kYXRlU2VsZWN0b3IpIHtcbiAgICAgICAgICAgIG1lLmRhdGVTZWxlY3Rvci5tYXhWYWx1ZSA9IHZhbHVlXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgYWZ0ZXIgdGhlIG1pblZhbHVlIGNvbmZpZyBnb3QgY2hhbmdlZFxuICAgICAqIEBwYXJhbSB7VGV4dH0gdmFsdWVcbiAgICAgKiBAcGFyYW0ge1RleHR9IG9sZFZhbHVlXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIGFmdGVyU2V0TWluVmFsdWUodmFsdWUsIG9sZFZhbHVlKSB7XG4gICAgICAgIGxldCBtZSA9IHRoaXM7XG5cbiAgICAgICAgbWUuY2hhbmdlSW5wdXRFbEtleSgnbWluJywgdmFsdWUpO1xuXG4gICAgICAgIGlmIChtZS5kYXRlU2VsZWN0b3IpIHtcbiAgICAgICAgICAgIG1lLmRhdGVTZWxlY3Rvci5taW5WYWx1ZSA9IHZhbHVlXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgYWZ0ZXIgdGhlIHZhbHVlIGNvbmZpZyBnb3QgY2hhbmdlZFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBvbGRWYWx1ZVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBhZnRlclNldFZhbHVlKHZhbHVlLCBvbGRWYWx1ZSkge1xuICAgICAgICBzdXBlci5hZnRlclNldFZhbHVlKHZhbHVlLCBvbGRWYWx1ZSk7XG5cbiAgICAgICAgaWYgKG9sZFZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuZGF0ZVNlbGVjdG9yLnZhbHVlID0gdmFsdWVcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCBiZWZvcmUgdGhlIHZhbHVlIGNvbmZpZyBnb3QgY2hhbmdlZFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBvbGRWYWx1ZVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBiZWZvcmVTZXRWYWx1ZSh2YWx1ZSwgb2xkVmFsdWUpIHtcbiAgICAgICAgaWYgKE5lby50eXBlT2YodmFsdWUpID09PSAnRGF0ZScpIHtcbiAgICAgICAgICAgIHZhbHVlID0gRGF0ZVV0aWwuY29udmVydFRveXl5eW1tZGQodmFsdWUpO1xuICAgICAgICAgICAgdGhpcy5vcmlnaW5hbENvbmZpZy52YWx1ZSA9IHZhbHVlXG4gICAgICAgIH1cblxuICAgICAgICB2YWx1ZSA9IHN1cGVyLmJlZm9yZVNldFZhbHVlKHZhbHVlLCBvbGRWYWx1ZSk7XG5cbiAgICAgICAgcmV0dXJuICh0aGlzLmlzb0RhdGUgJiYgdmFsdWUpID8gdmFsdWUuc3Vic3RyaW5nKDAsIDEwKSA6IHZhbHVlXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHJldHVybnMge05lby5jb21wb25lbnQuRGF0ZVNlbGVjdG9yfVxuICAgICAqL1xuICAgIGNyZWF0ZVBpY2tlckNvbXBvbmVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0ZVNlbGVjdG9yXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHJldHVybnMge0RhdGV8U3RyaW5nfG51bGx9XG4gICAgICovXG4gICAgZ2V0U3VibWl0VmFsdWUoKSB7XG4gICAgICAgIGxldCB2YWx1ZSA9IHRoaXMudmFsdWU7XG5cbiAgICAgICAgaWYodGhpcy5zdWJtaXREYXRlT2JqZWN0ICYmIHZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IERhdGUoYCR7dmFsdWV9VDEyOjAwOjAwLjAwMFpgKTtcbiAgICAgICAgfSBlbHNlIGlmKHRoaXMuaXNvRGF0ZSAmJiB2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHZhbHVlKS50b0lTT1N0cmluZygpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuICAgICAqL1xuICAgIGhhc0NvbnRlbnQoKSB7XG4gICAgICAgIGlmICh0aGlzLmxhYmVsUG9zaXRpb24gPT09ICdpbmxpbmUnKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHN1cGVyLmhhc0NvbnRlbnQoKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIG9uQ29udGFpbmVyS2V5RG93bkVzY2FwZShkYXRhKSB7XG4gICAgICAgIGxldCBtZSA9IHRoaXM7XG5cbiAgICAgICAgbWUuaGlkZVBpY2tlcigpO1xuICAgICAgICBtZS5mb2N1cyhtZS5nZXRJbnB1dEVsSWQoKSlcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0c1xuICAgICAqL1xuICAgIG9uRGF0ZVBpY2tlckNoYW5nZShvcHRzKSB7XG4gICAgICAgIGxldCBtZSA9IHRoaXM7XG5cbiAgICAgICAgbWUuY2xlYW4gPSBmYWxzZTtcblxuICAgICAgICBpZiAobWUuaGlkZVBpY2tlck9uU2VsZWN0KSB7XG4gICAgICAgICAgICBWRG9tVXRpbC5yZW1vdmVWZG9tQ2hpbGQobWUudmRvbSwgbWUuZ2V0UGlja2VySWQoKSk7XG5cbiAgICAgICAgICAgIG1lLnByb21pc2VVcGRhdGUoKS50aGVuKGRhdGEgPT4ge1xuICAgICAgICAgICAgICAgIG1lLnZhbHVlID0gb3B0cy52YWx1ZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG1lLnZhbHVlID0gb3B0cy52YWx1ZVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGFcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgb25JbnB1dFZhbHVlQ2hhbmdlKGRhdGEpIHtcbiAgICAgICAgdGhpcy5pbnZhbGlkSW5wdXQgPSAhZGF0YS52YWxpZDtcblxuICAgICAgICBpZiAoZGF0YS52YWxpZCkge1xuICAgICAgICAgICAgc3VwZXIub25JbnB1dFZhbHVlQ2hhbmdlKGRhdGEpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnZhbGlkYXRlKGZhbHNlKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGFcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgb25LZXlEb3duRW50ZXIoZGF0YSkge1xuICAgICAgICBsZXQgbWUgPSB0aGlzO1xuXG4gICAgICAgIGlmIChtZS5waWNrZXJJc01vdW50ZWQpIHtcbiAgICAgICAgICAgIG1lLmRhdGVTZWxlY3Rvci5mb2N1c0N1cnJlbnRJdGVtKCk7XG4gICAgICAgICAgICBzdXBlci5vbktleURvd25FbnRlcihkYXRhKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3VwZXIub25LZXlEb3duRW50ZXIoZGF0YSwgbWUuZGF0ZVNlbGVjdG9yLmZvY3VzQ3VycmVudEl0ZW0sIG1lLmRhdGVTZWxlY3RvcilcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBmb3IgY2xpZW50LXNpZGUgZmllbGQgZXJyb3JzXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBzaWxlbnQ9dHJ1ZVxuICAgICAqIEByZXR1cm5zIHtCb29sZWFufSBSZXR1cm5zIHRydWUgaW4gY2FzZSB0aGVyZSBhcmUgbm8gY2xpZW50LXNpZGUgZXJyb3JzXG4gICAgICovXG4gICAgdmFsaWRhdGUoc2lsZW50PXRydWUpIHtcbiAgICAgICAgbGV0IG1lICAgICAgICAgID0gdGhpcyxcbiAgICAgICAgICAgIHJldHVyblZhbHVlID0gc3VwZXIudmFsaWRhdGUoc2lsZW50KTtcblxuICAgICAgICBpZiAocmV0dXJuVmFsdWUpIHtcbiAgICAgICAgICAgIGlmIChtZS5pbnZhbGlkSW5wdXQpIHtcbiAgICAgICAgICAgICAgICBtZS5fZXJyb3IgPSBtZS5lcnJvclRleHRJbnZhbGlkRGF0ZTtcbiAgICAgICAgICAgICAgICByZXR1cm5WYWx1ZSA9IGZhbHNlXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAhcmV0dXJuVmFsdWUgJiYgIW1lLmNsZWFuICYmIG1lLnVwZGF0ZUVycm9yKG1lLl9lcnJvciwgc2lsZW50KTtcblxuICAgICAgICByZXR1cm4gcmV0dXJuVmFsdWVcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IE5lby5zZXR1cENsYXNzKERhdGVGaWVsZCk7XG4iLCJpbXBvcnQgUGlja2VyIGZyb20gJy4vUGlja2VyLm1qcyc7XG5cbi8qKlxuICogdXNlZCBieSBmb3JtLmZpZWxkLkRhdGVcbiAqIEBjbGFzcyBOZW8uZm9ybS5maWVsZC50cmlnZ2VyLkRhdGVcbiAqIEBleHRlbmRzIE5lby5mb3JtLmZpZWxkLnRyaWdnZXIuUGlja2VyXG4gKi9cbmNsYXNzIERhdGVUcmlnZ2VyIGV4dGVuZHMgUGlja2VyIHtcbiAgICBzdGF0aWMgY29uZmlnID0ge1xuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfSBjbGFzc05hbWU9J05lby5mb3JtLmZpZWxkLnRyaWdnZXIuRGF0ZSdcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgY2xhc3NOYW1lOiAnTmVvLmZvcm0uZmllbGQudHJpZ2dlci5EYXRlJyxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ30gbnR5cGU9J3RyaWdnZXItZGF0ZSdcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgbnR5cGU6ICd0cmlnZ2VyLWRhdGUnLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfG51bGx9IGljb25DbHM9J2ZhIGZhLWNhbGVuZGFyLWFsdCdcbiAgICAgICAgICovXG4gICAgICAgIGljb25DbHM6ICdmYSBmYS1jYWxlbmRhci1hbHQnXG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBOZW8uc2V0dXBDbGFzcyhEYXRlVHJpZ2dlcik7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=