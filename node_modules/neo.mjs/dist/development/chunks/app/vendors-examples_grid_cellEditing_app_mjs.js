"use strict";
(self["webpackChunkneo_mjs"] = self["webpackChunkneo_mjs"] || []).push([["vendors-examples_grid_cellEditing_app_mjs"],{

/***/ "./examples/grid/cellEditing/MainContainer.mjs":
/*!*****************************************************!*\
  !*** ./examples/grid/cellEditing/MainContainer.mjs ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _src_selection_grid_CellColumnModel_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../src/selection/grid/CellColumnModel.mjs */ "./src/selection/grid/CellColumnModel.mjs");
/* harmony import */ var _src_selection_grid_CellColumnRowModel_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../src/selection/grid/CellColumnRowModel.mjs */ "./src/selection/grid/CellColumnRowModel.mjs");
/* harmony import */ var _src_selection_grid_CellModel_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../src/selection/grid/CellModel.mjs */ "./src/selection/grid/CellModel.mjs");
/* harmony import */ var _src_selection_grid_CellRowModel_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../src/selection/grid/CellRowModel.mjs */ "./src/selection/grid/CellRowModel.mjs");
/* harmony import */ var _src_form_field_CheckBox_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../src/form/field/CheckBox.mjs */ "./src/form/field/CheckBox.mjs");
/* harmony import */ var _src_form_field_Country_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../src/form/field/Country.mjs */ "./src/form/field/Country.mjs");
/* harmony import */ var _ConfigurationViewport_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../ConfigurationViewport.mjs */ "./examples/ConfigurationViewport.mjs");
/* harmony import */ var _src_form_field_Date_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../src/form/field/Date.mjs */ "./src/form/field/Date.mjs");
/* harmony import */ var _src_grid_Container_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../src/grid/Container.mjs */ "./src/grid/Container.mjs");
/* harmony import */ var _MainContainerStateProvider_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./MainContainerStateProvider.mjs */ "./examples/grid/cellEditing/MainContainerStateProvider.mjs");
/* harmony import */ var _MainStore_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./MainStore.mjs */ "./examples/grid/cellEditing/MainStore.mjs");
/* harmony import */ var _src_form_field_Number_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../src/form/field/Number.mjs */ "./src/form/field/Number.mjs");
/* harmony import */ var _src_form_field_Radio_mjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../src/form/field/Radio.mjs */ "./src/form/field/Radio.mjs");














/**
 * @class Neo.examples.grid.cellEditing.MainContainer
 * @extends Neo.examples.ConfigurationViewport
 */
class MainContainer extends _ConfigurationViewport_mjs__WEBPACK_IMPORTED_MODULE_6__["default"] {
    static config = {
        className           : 'Neo.examples.grid.cellEditing.MainContainer',
        autoMount           : true,
        configItemLabelWidth: 130,
        configPanelFlex     : 1.5,
        exampleComponentFlex: 3,
        layout              : {ntype: 'hbox', align: 'stretch'},
        stateProvider       : _MainContainerStateProvider_mjs__WEBPACK_IMPORTED_MODULE_9__["default"]
    }

    /**
     * @param {Object} data
     */
    countryRenderer({record}) {
        let countryStore = this.getStateProvider().getStore('countries');

        if (countryStore.getCount() > 0) {
            return countryStore.get(record.country).name
        }

        return ''
    }

    /**
     * @returns {Object[]}
     */
    createConfigurationComponents() {
        let me               = this,
            {selectionModel} = me.exampleComponent.view;

        const selectionModelRadioDefaults = {
            module        : _src_form_field_Radio_mjs__WEBPACK_IMPORTED_MODULE_12__["default"],
            hideValueLabel: false,
            labelText     : '',
            name          : 'selectionModel',
            width         : 350
        };

        return [{
            module   : _src_form_field_Number_mjs__WEBPACK_IMPORTED_MODULE_11__["default"],
            labelText: 'height',
            listeners: {change: me.onConfigChange.bind(me, 'height')},
            maxValue : 800,
            minValue : 225,
            stepSize : 5,
            value    : me.exampleComponent.height
        }, {
            ...selectionModelRadioDefaults,
            checked   : selectionModel.ntype === 'selection-grid-cellmodel',
            labelText : 'selectionModel',
            listeners : {change: me.onRadioViewChange.bind(me, 'selectionModel', _src_selection_grid_CellModel_mjs__WEBPACK_IMPORTED_MODULE_2__["default"])},
            style     : {marginTop: '10px'},
            valueLabel: 'Cell'
        }, {
            ...selectionModelRadioDefaults,
            checked   : selectionModel.ntype === 'selection-grid-cellcolumnmodel',
            listeners : {change: me.onRadioViewChange.bind(me, 'selectionModel', _src_selection_grid_CellColumnModel_mjs__WEBPACK_IMPORTED_MODULE_0__["default"])},
            valueLabel: 'Cell & Column'
        }, {
            ...selectionModelRadioDefaults,
            checked   : selectionModel.ntype === 'selection-grid-cellrowmodel',
            listeners : {change: me.onRadioViewChange.bind(me, 'selectionModel', _src_selection_grid_CellRowModel_mjs__WEBPACK_IMPORTED_MODULE_3__["default"])},
            valueLabel: 'Cell & Row'
        }, {
            ...selectionModelRadioDefaults,
            checked   : selectionModel.ntype === 'selection-grid-cellcolumnrowmodel',
            listeners : {change: me.onRadioViewChange.bind(me, 'selectionModel', _src_selection_grid_CellColumnRowModel_mjs__WEBPACK_IMPORTED_MODULE_1__["default"])},
            valueLabel: 'Cell & Column & Row'
        }, {
            module    : _src_form_field_CheckBox_mjs__WEBPACK_IMPORTED_MODULE_4__["default"],
            checked   : me.exampleComponent.sortable,
            hideLabel : true,
            listeners : {change: me.onConfigChange.bind(me, 'sortable')},
            style     : {marginTop: '10px'},
            valueLabel: 'sortable'
        }, {
            module    : _src_form_field_CheckBox_mjs__WEBPACK_IMPORTED_MODULE_4__["default"],
            checked   : false, // we can not access the lazy-loaded plugin yet
            hideLabel : true,
            listeners : {change: me.onPluginConfigChange.bind(me, 'disabled')},
            style     : {marginTop: '10px'},
            valueLabel: 'Disable CellEditing'
        }]
    }

    /**
     * @returns {Object}
     */
    createExampleComponent() {
        return {
            module      : _src_grid_Container_mjs__WEBPACK_IMPORTED_MODULE_8__["default"],
            bind        : {store: 'stores.mainStore'},
            cellEditing : true,
            parentId    : this.id,
            store       : _MainStore_mjs__WEBPACK_IMPORTED_MODULE_10__["default"],
            wrapperStyle: {maxWidth: '1002px'},

            body: {
                selectionModel: _src_selection_grid_CellModel_mjs__WEBPACK_IMPORTED_MODULE_2__["default"]
            },

            columnDefaults: {
                editable: true,
                width   : 200
            },

            columns: [{
                dataField: 'firstname',
                text     : 'Firstname'
            }, {
                dataField: 'randomNumber',
                text     : 'Number (step 5)',

                editor: {
                    module   : _src_form_field_Number_mjs__WEBPACK_IMPORTED_MODULE_11__["default"],
                    clearable: false,
                    maxValue : 100,
                    minValue : 0,
                    stepSize : 5
                }
            }, {
                dataField: 'randomDate',
                renderer : ({value}) => new Intl.DateTimeFormat('default').format(value),
                text     : 'Random Date',

                editor: {
                    module   : _src_form_field_Date_mjs__WEBPACK_IMPORTED_MODULE_7__["default"],
                    clearable: false,
                    maxValue : '2024-12-20',
                    minValue : '2024-12-10'
                }
            }, {
                dataField: 'country',
                renderer : 'up.countryRenderer',
                text     : 'Country',

                editor: {
                    module        : _src_form_field_Country_mjs__WEBPACK_IMPORTED_MODULE_5__["default"],
                    bind          : {store: 'stores.countries'},
                    clearable     : false,
                    forceSelection: true,
                    valueField    : 'code'
                }
            }, {
                dataField: 'githubId',
                editable : false,
                text     : 'Github Id (Non-editable)'
            }]
        }
    }

    /**
     * @param {String} config
     * @param {Object} opts
     */
    onPluginConfigChange(config, opts) {
        this.exampleComponent.getPlugin('grid-cell-editing')[config] = opts.value
    }

    /**
     * @param {String} config
     * @param {String} value
     * @param {Object} opts
     */
    onRadioViewChange(config, value, opts) {
        if (opts.value === true) { // we only want to listen to check events, not uncheck
            this.exampleComponent.view[config] = value
        }
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(MainContainer));


/***/ }),

/***/ "./examples/grid/cellEditing/MainContainerStateProvider.mjs":
/*!******************************************************************!*\
  !*** ./examples/grid/cellEditing/MainContainerStateProvider.mjs ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _MainStore_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MainStore.mjs */ "./examples/grid/cellEditing/MainStore.mjs");
/* harmony import */ var _src_state_Provider_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../src/state/Provider.mjs */ "./src/state/Provider.mjs");
/* harmony import */ var _src_data_Store_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../src/data/Store.mjs */ "./src/data/Store.mjs");




const countrySymbol = Symbol.for('country');

/**
 * @class Neo.examples.grid.cellEditing.MainContainerStateProvider
 * @extends Neo.state.Provider
 */
class MainContainerStateProvider extends _src_state_Provider_mjs__WEBPACK_IMPORTED_MODULE_1__["default"] {
    static config = {
        /**
         * @member {String} className='Neo.examples.grid.cellEditing.MainContainerStateProvider'
         * @protected
         */
        className: 'Neo.examples.grid.cellEditing.MainContainerStateProvider',
        /**
         * @member {Object} stores
         */
        stores: {
            countries: {
                module     : _src_data_Store_mjs__WEBPACK_IMPORTED_MODULE_2__["default"],
                autoLoad   : true,
                keyProperty: 'code',
                listeners  : {load: 'onCountryStoreLoad'},
                url        : '../../../resources/examples/data/countries.json',

                model: {
                    fields: [
                        {name: 'code'},
                        {name: 'name'}
                    ]
                }
            },
            mainStore: _MainStore_mjs__WEBPACK_IMPORTED_MODULE_0__["default"]
        }
    }

    /**
     * @param {Record[]} items
     */
    onCountryStoreLoad(items) {
        let me        = this,
            mainStore = me.getStore('mainStore'),
            country;

        // if the main table store is already loaded, the country field renderer had no data
        if (mainStore.getCount() > 0) {
            mainStore.forEach(record => {
                country = record.country;

                // hack resetting the current value to get a new record change
                record[countrySymbol] = null;

                record.country = country
            })
        }
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(MainContainerStateProvider));


/***/ }),

/***/ "./examples/grid/cellEditing/MainModel.mjs":
/*!*************************************************!*\
  !*** ./examples/grid/cellEditing/MainModel.mjs ***!
  \*************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _src_data_Model_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../src/data/Model.mjs */ "./src/data/Model.mjs");


/**
 * @class Neo.examples.grid.cellEditing.MainModel
 * @extends Neo.data.Model
 */
class MainModel extends _src_data_Model_mjs__WEBPACK_IMPORTED_MODULE_0__["default"] {
    static config = {
        className: 'Neo.examples.grid.cellEditing.MainModel',

        fields: [{
            name: 'country',
            type: 'String'
        }, {
            name: 'firstname',
            type: 'String'
        }, {
            name: 'githubId',
            type: 'String'
        }, {
            name: 'randomNumber',
            type: 'Int'
        }, {
            name: 'randomDate',
            type: 'Date'
        }]
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(MainModel));


/***/ }),

/***/ "./examples/grid/cellEditing/MainStore.mjs":
/*!*************************************************!*\
  !*** ./examples/grid/cellEditing/MainStore.mjs ***!
  \*************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _MainModel_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MainModel.mjs */ "./examples/grid/cellEditing/MainModel.mjs");
/* harmony import */ var _src_data_Store_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../src/data/Store.mjs */ "./src/data/Store.mjs");



/**
 * @class Neo.examples.grid.cellEditing.MainStore
 * @extends Neo.data.Store
 */
class MainStore extends _src_data_Store_mjs__WEBPACK_IMPORTED_MODULE_1__["default"] {
    static config = {
        className  : 'Neo.examples.grid.cellEditing.MainStore',
        keyProperty: 'githubId',
        model      : _MainModel_mjs__WEBPACK_IMPORTED_MODULE_0__["default"],

        data: [{
            country     : 'DE',
            firstname   : 'Tobias',
            githubId    : 'tobiu',
            randomDate  : '2024-12-20',
            randomNumber: 100
        }, {
            country     : 'US',
            firstname   : 'Rich',
            githubId    : 'rwaters',
            randomDate  : '2024-12-18',
            randomNumber: 90
        }, {
            country     : 'DE',
            firstname   : 'Nils',
            githubId    : 'mrsunshine',
            randomDate  : '2024-12-19',
            randomNumber: 70
        }, {
            country     : 'US',
            firstname   : 'Gerard',
            githubId    : 'camtnbikerrwc',
            randomDate  : '2024-12-17',
            randomNumber: 80
        }, {
            country     : 'SK',
            firstname   : 'Jozef',
            githubId    : 'jsakalos',
            randomDate  : '2024-12-16',
            randomNumber: 60
        }, {
            country     : 'DE',
            firstname   : 'Bastian',
            githubId    : 'bhaustein',
            randomDate  : '2024-12-15',
            randomNumber: 50
        }]
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(MainStore));


/***/ }),

/***/ "./examples/grid/cellEditing/app.mjs":
/*!*******************************************!*\
  !*** ./examples/grid/cellEditing/app.mjs ***!
  \*******************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   onStart: () => (/* binding */ onStart)
/* harmony export */ });
/* harmony import */ var _MainContainer_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MainContainer.mjs */ "./examples/grid/cellEditing/MainContainer.mjs");


const onStart = () => Neo.app({
    mainView: _MainContainer_mjs__WEBPACK_IMPORTED_MODULE_0__["default"],
    name    : 'Neo.examples.grid.cellEditing'
});


/***/ }),

/***/ "./src/form/field/Country.mjs":
/*!************************************!*\
  !*** ./src/form/field/Country.mjs ***!
  \************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _ComboBox_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ComboBox.mjs */ "./src/form/field/ComboBox.mjs");


/**
 * @class Neo.form.field.Country
 * @extends Neo.form.field.ComboBox
 */
class Country extends _ComboBox_mjs__WEBPACK_IMPORTED_MODULE_0__["default"] {
    static config = {
        /**
         * @member {String} className='Neo.form.field.Country'
         * @protected
         */
        className: 'Neo.form.field.Country',
        /**
         * @member {String} ntype='countryfield'
         * @protected
         */
        ntype: 'countryfield',
        /**
         * You can either pass a field instance or a field reference
         * @member {Neo.form.field.Base|String|null} zipCodeField_=null
         * @reactive
         */
        zipCodeField_: null
    }

    /**
     * Triggered after the zipCodeField config got changed
     * @param {Neo.form.field.Base|null} value
     * @param {Neo.form.field.Base|null} oldValue
     * @protected
     */
    afterSetZipCodeField(value, oldValue) {
        if (value && value instanceof Neo.form.field.Base) {
            value.countryField = this
        }
    }

    /**
     * Triggered before the zipCodeField config gets changed
     * @param {Neo.form.field.Base|String|null} value
     * @param {Neo.form.field.Base|String|null} oldValue
     * @returns {Neo.form.field.Base|null}
     * @protected
     */
    beforeSetZipCodeField(value, oldValue) {
        let me = this;

        if (Neo.isString(value)) {
            return me.up().getReference(value)
        }

        return value
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(Country));


/***/ }),

/***/ "./src/form/field/Date.mjs":
/*!*********************************!*\
  !*** ./src/form/field/Date.mjs ***!
  \*********************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _component_DateSelector_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../component/DateSelector.mjs */ "./src/component/DateSelector.mjs");
/* harmony import */ var _trigger_Date_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./trigger/Date.mjs */ "./src/form/field/trigger/Date.mjs");
/* harmony import */ var _util_Date_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../util/Date.mjs */ "./src/util/Date.mjs");
/* harmony import */ var _Picker_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Picker.mjs */ "./src/form/field/Picker.mjs");
/* harmony import */ var _util_VDom_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../util/VDom.mjs */ "./src/util/VDom.mjs");






/**
 * @class Neo.form.field.Date
 * @extends Neo.form.field.Picker
 */
class DateField extends _Picker_mjs__WEBPACK_IMPORTED_MODULE_3__["default"] {
    static config = {
        /**
         * @member {String} className='Neo.form.field.Date'
         * @protected
         */
        className: 'Neo.form.field.Date',
        /**
         * @member {String} ntype='datefield'
         * @protected
         */
        ntype: 'datefield',
        /**
         * @member {String[]} baseCls=['neo-datefield','neo-pickerfield','neo-textfield']
         */
        baseCls: ['neo-datefield', 'neo-pickerfield', 'neo-textfield'],
        /**
         * @member {Neo.component.DateSelector|null} dateSelector=null
         * @protected
         */
        dateSelector: null,
        /**
         * @member {Object|null} dateSelectorConfig=null
         */
        dateSelectorConfig: null,
        /**
         * @member {String} errorTextInvalidDate='Not a valid date'
         */
        errorTextInvalidDate: 'Not a valid date',
        /**
         * @member {Boolean} isoDate=false
         */
        isoDate: false,
        /**
         * True to hide the DatePicker when selecting a day
         * @member {Boolean} hidePickerOnSelect=false
         */
        hidePickerOnSelect: false,
        /**
         * @member {String} inputType='date'
         * @reactive
         */
        inputType: 'date',
        /**
         * @member {String|null} maxValue_=null
         * @reactive
         */
        maxValue_: null,
        /**
         * @member {String|null} minValue_=null
         * @reactive
         */
        minValue_: null,
        /**
         * @member {Number} pickerHeight=225
         */
        pickerHeight: 225,
        /**
         * @member {Number|null} pickerMaxHeight=225
         */
        pickerMaxHeight: 225,
        /**
         * @member {Number} pickerWidth=200
         */
        pickerWidth: 200,
        /**
         * @member {Object|Object[]} triggers=[{module: DateTrigger}]
         * @protected
         * @reactive
         */
        triggers: [{
            module: _trigger_Date_mjs__WEBPACK_IMPORTED_MODULE_1__["default"]
        }]
    }

    /**
     * Internal flag to store the dom based validity of this field
     * @member {Boolean} invalidInput=false
     */
    invalidInput = false
    /**
     * Setting the value to true will return a Date object when calling getSubmitValue()
     * @member {Boolean} submitDateObject=false
     */
    submitDateObject = false

    /**
     * @param config
     */
    construct(config) {
        super.construct(config);

        let me = this;

        me.dateSelector = Neo.create({
            module       : _component_DateSelector_mjs__WEBPACK_IMPORTED_MODULE_0__["default"],
            dayNameFormat: 'short',
            maxValue     : me.maxValue,
            minValue     : me.minValue,
            value        : me.value || _util_Date_mjs__WEBPACK_IMPORTED_MODULE_2__["default"].convertToyyyymmdd(new Date()),
            ...me.dateSelectorConfig
        });

        me.dateSelector.keys._keys.push(
            {fn: 'onContainerKeyDownEscape', key: 'Escape', scope: me.id}
        );

        me.dateSelector.on({
            change: me.onDatePickerChange,
            scope : me
        })
    }

    /**
     * Triggered after the maxValue config got changed
     * @param {Text} value
     * @param {Text} oldValue
     * @protected
     */
    afterSetMaxValue(value, oldValue) {
        let me = this;

        me.changeInputElKey('max', value);

        if (me.dateSelector) {
            me.dateSelector.maxValue = value
        }
    }

    /**
     * Triggered after the minValue config got changed
     * @param {Text} value
     * @param {Text} oldValue
     * @protected
     */
    afterSetMinValue(value, oldValue) {
        let me = this;

        me.changeInputElKey('min', value);

        if (me.dateSelector) {
            me.dateSelector.minValue = value
        }
    }

    /**
     * Triggered after the value config got changed
     * @param {String} value
     * @param {String} oldValue
     * @protected
     */
    afterSetValue(value, oldValue) {
        super.afterSetValue(value, oldValue);

        if (oldValue !== undefined) {
            this.dateSelector.value = value
        }
    }

    /**
     * Triggered before the value config got changed
     * @param {String} value
     * @param {String} oldValue
     * @protected
     */
    beforeSetValue(value, oldValue) {
        if (Neo.typeOf(value) === 'Date') {
            value = _util_Date_mjs__WEBPACK_IMPORTED_MODULE_2__["default"].convertToyyyymmdd(value);
            this.originalConfig.value = value
        }

        value = super.beforeSetValue(value, oldValue);

        return (this.isoDate && value) ? value.substring(0, 10) : value
    }

    /**
     * @returns {Neo.component.DateSelector}
     */
    createPickerComponent() {
        return this.dateSelector
    }

    /**
     * @returns {Date|String|null}
     */
    getSubmitValue() {
        let value = this.value;

        if(this.submitDateObject && value) {
            return new Date(`${value}T12:00:00.000Z`);
        } else if(this.isoDate && value) {
            return new Date(value).toISOString();
        }

        return value;
    }

    /**
     * @returns {Boolean}
     */
    hasContent() {
        if (this.labelPosition === 'inline') {
            return true
        }

        return super.hasContent()
    }

    /**
     * @param {Object} data
     * @protected
     */
    onContainerKeyDownEscape(data) {
        let me = this;

        me.hidePicker();
        me.focus(me.getInputElId())
    }

    /**
     * @param {Object} opts
     */
    onDatePickerChange(opts) {
        let me = this;

        me.clean = false;

        if (me.hidePickerOnSelect) {
            _util_VDom_mjs__WEBPACK_IMPORTED_MODULE_4__["default"].removeVdomChild(me.vdom, me.getPickerId());

            me.promiseUpdate().then(data => {
                me.value = opts.value
            })
        } else {
            me.value = opts.value
        }
    }

    /**
     * @param {Object} data
     * @protected
     */
    onInputValueChange(data) {
        this.invalidInput = !data.valid;

        if (data.valid) {
            super.onInputValueChange(data)
        } else {
            this.validate(false)
        }
    }

    /**
     * @param {Object} data
     * @protected
     */
    onKeyDownEnter(data) {
        let me = this;

        if (me.pickerIsMounted) {
            me.dateSelector.focusCurrentItem();
            super.onKeyDownEnter(data)
        } else {
            super.onKeyDownEnter(data, me.dateSelector.focusCurrentItem, me.dateSelector)
        }
    }

    /**
     * Checks for client-side field errors
     * @param {Boolean} silent=true
     * @returns {Boolean} Returns true in case there are no client-side errors
     */
    validate(silent=true) {
        let me          = this,
            returnValue = super.validate(silent);

        if (returnValue) {
            if (me.invalidInput) {
                me._error = me.errorTextInvalidDate;
                returnValue = false
            }
        }

        !returnValue && !me.clean && me.updateError(me._error, silent);

        return returnValue
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(DateField));


/***/ }),

/***/ "./src/form/field/trigger/Date.mjs":
/*!*****************************************!*\
  !*** ./src/form/field/trigger/Date.mjs ***!
  \*****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _Picker_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Picker.mjs */ "./src/form/field/trigger/Picker.mjs");


/**
 * used by form.field.Date
 * @class Neo.form.field.trigger.Date
 * @extends Neo.form.field.trigger.Picker
 */
class DateTrigger extends _Picker_mjs__WEBPACK_IMPORTED_MODULE_0__["default"] {
    static config = {
        /**
         * @member {String} className='Neo.form.field.trigger.Date'
         * @protected
         */
        className: 'Neo.form.field.trigger.Date',
        /**
         * @member {String} ntype='trigger-date'
         * @protected
         */
        ntype: 'trigger-date',
        /**
         * @member {String|null} iconCls='fa fa-calendar-alt'
         * @reactive
         */
        iconCls: 'fa fa-calendar-alt'
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(DateTrigger));


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2h1bmtzL2FwcC92ZW5kb3JzLWV4YW1wbGVzX2dyaWRfY2VsbEVkaXRpbmdfYXBwX21qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF5RjtBQUNHO0FBQ1Q7QUFDRztBQUNSO0FBQ0Q7QUFDSjtBQUNDO0FBQ0Q7QUFDQztBQUNqQjtBQUNtQjtBQUNEOztBQUUzRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixrRUFBcUI7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLGdDQUFnQztBQUMvRCw4QkFBOEIsdUVBQTBCO0FBQ3hEOztBQUVBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0EscUJBQXFCLE9BQU87QUFDNUI7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsYUFBYSxnQkFBZ0I7O0FBRTdCO0FBQ0EsNEJBQTRCLGtFQUFLO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx1QkFBdUIsbUVBQVc7QUFDbEM7QUFDQSx3QkFBd0IsNkNBQTZDO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qix3REFBd0QseUVBQVMsRUFBRTtBQUM1Rix5QkFBeUIsa0JBQWtCO0FBQzNDO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSx5QkFBeUIsd0RBQXdELCtFQUFlLEVBQUU7QUFDbEc7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLHlCQUF5Qix3REFBd0QsNEVBQVksRUFBRTtBQUMvRjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EseUJBQXlCLHdEQUF3RCxrRkFBa0IsRUFBRTtBQUNyRztBQUNBLFNBQVM7QUFDVCx3QkFBd0Isb0VBQVE7QUFDaEM7QUFDQTtBQUNBLHlCQUF5QiwrQ0FBK0M7QUFDeEUseUJBQXlCLGtCQUFrQjtBQUMzQztBQUNBLFNBQVM7QUFDVCx3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QkFBK0IsTUFBTTtBQUNyQyxVQUFVO0FBQ1Y7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsWUFBWSxzREFBUTs7QUFFcEI7QUFDQTtBQUNBLGFBQWE7QUFDYixVQUFVO0FBQ1Y7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsU0FBUztBQUN4QixpQkFBaUIsU0FBUztBQUMxQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBLGlFQUFlLHlCQUF5QixFQUFDOzs7Ozs7Ozs7Ozs7Ozs7O0FDNVNQOztBQUVsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLG1EQUFNO0FBQ2hDO0FBQ0E7QUFDQSxvQkFBb0IsUUFBUTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixRQUFRO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGFBQWE7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxpRUFBZSwyQkFBMkIsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL25lby5tanMvLi9leGFtcGxlcy9ncmlkL2NlbGxFZGl0aW5nL01haW5Db250YWluZXIubWpzIiwid2VicGFjazovL25lby5tanMvLi9leGFtcGxlcy9ncmlkL2NlbGxFZGl0aW5nL01haW5Db250YWluZXJTdGF0ZVByb3ZpZGVyLm1qcyIsIndlYnBhY2s6Ly9uZW8ubWpzLy4vZXhhbXBsZXMvZ3JpZC9jZWxsRWRpdGluZy9NYWluTW9kZWwubWpzIiwid2VicGFjazovL25lby5tanMvLi9leGFtcGxlcy9ncmlkL2NlbGxFZGl0aW5nL01haW5TdG9yZS5tanMiLCJ3ZWJwYWNrOi8vbmVvLm1qcy8uL2V4YW1wbGVzL2dyaWQvY2VsbEVkaXRpbmcvYXBwLm1qcyIsIndlYnBhY2s6Ly9uZW8ubWpzLy4vc3JjL2Zvcm0vZmllbGQvQ291bnRyeS5tanMiLCJ3ZWJwYWNrOi8vbmVvLm1qcy8uL3NyYy9mb3JtL2ZpZWxkL0RhdGUubWpzIiwid2VicGFjazovL25lby5tanMvLi9zcmMvZm9ybS9maWVsZC90cmlnZ2VyL0RhdGUubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDZWxsQ29sdW1uTW9kZWwgICAgICAgICAgICBmcm9tICcuLi8uLi8uLi9zcmMvc2VsZWN0aW9uL2dyaWQvQ2VsbENvbHVtbk1vZGVsLm1qcyc7XG5pbXBvcnQgQ2VsbENvbHVtblJvd01vZGVsICAgICAgICAgZnJvbSAnLi4vLi4vLi4vc3JjL3NlbGVjdGlvbi9ncmlkL0NlbGxDb2x1bW5Sb3dNb2RlbC5tanMnO1xuaW1wb3J0IENlbGxNb2RlbCAgICAgICAgICAgICAgICAgIGZyb20gJy4uLy4uLy4uL3NyYy9zZWxlY3Rpb24vZ3JpZC9DZWxsTW9kZWwubWpzJztcbmltcG9ydCBDZWxsUm93TW9kZWwgICAgICAgICAgICAgICBmcm9tICcuLi8uLi8uLi9zcmMvc2VsZWN0aW9uL2dyaWQvQ2VsbFJvd01vZGVsLm1qcyc7XG5pbXBvcnQgQ2hlY2tCb3ggICAgICAgICAgICAgICAgICAgZnJvbSAnLi4vLi4vLi4vc3JjL2Zvcm0vZmllbGQvQ2hlY2tCb3gubWpzJztcbmltcG9ydCBDb3VudHJ5RmllbGQgICAgICAgICAgICAgICBmcm9tICcuLi8uLi8uLi9zcmMvZm9ybS9maWVsZC9Db3VudHJ5Lm1qcyc7XG5pbXBvcnQgQ29uZmlndXJhdGlvblZpZXdwb3J0ICAgICAgZnJvbSAnLi4vLi4vQ29uZmlndXJhdGlvblZpZXdwb3J0Lm1qcyc7XG5pbXBvcnQgRGF0ZUZpZWxkICAgICAgICAgICAgICAgICAgZnJvbSAnLi4vLi4vLi4vc3JjL2Zvcm0vZmllbGQvRGF0ZS5tanMnO1xuaW1wb3J0IEdyaWRDb250YWluZXIgICAgICAgICAgICAgIGZyb20gJy4uLy4uLy4uL3NyYy9ncmlkL0NvbnRhaW5lci5tanMnO1xuaW1wb3J0IE1haW5Db250YWluZXJTdGF0ZVByb3ZpZGVyIGZyb20gJy4vTWFpbkNvbnRhaW5lclN0YXRlUHJvdmlkZXIubWpzJztcbmltcG9ydCBNYWluU3RvcmUgICAgICAgICAgICAgICAgICBmcm9tICcuL01haW5TdG9yZS5tanMnO1xuaW1wb3J0IE51bWJlckZpZWxkICAgICAgICAgICAgICAgIGZyb20gJy4uLy4uLy4uL3NyYy9mb3JtL2ZpZWxkL051bWJlci5tanMnO1xuaW1wb3J0IFJhZGlvICAgICAgICAgICAgICAgICAgICAgIGZyb20gJy4uLy4uLy4uL3NyYy9mb3JtL2ZpZWxkL1JhZGlvLm1qcyc7XG5cbi8qKlxuICogQGNsYXNzIE5lby5leGFtcGxlcy5ncmlkLmNlbGxFZGl0aW5nLk1haW5Db250YWluZXJcbiAqIEBleHRlbmRzIE5lby5leGFtcGxlcy5Db25maWd1cmF0aW9uVmlld3BvcnRcbiAqL1xuY2xhc3MgTWFpbkNvbnRhaW5lciBleHRlbmRzIENvbmZpZ3VyYXRpb25WaWV3cG9ydCB7XG4gICAgc3RhdGljIGNvbmZpZyA9IHtcbiAgICAgICAgY2xhc3NOYW1lICAgICAgICAgICA6ICdOZW8uZXhhbXBsZXMuZ3JpZC5jZWxsRWRpdGluZy5NYWluQ29udGFpbmVyJyxcbiAgICAgICAgYXV0b01vdW50ICAgICAgICAgICA6IHRydWUsXG4gICAgICAgIGNvbmZpZ0l0ZW1MYWJlbFdpZHRoOiAxMzAsXG4gICAgICAgIGNvbmZpZ1BhbmVsRmxleCAgICAgOiAxLjUsXG4gICAgICAgIGV4YW1wbGVDb21wb25lbnRGbGV4OiAzLFxuICAgICAgICBsYXlvdXQgICAgICAgICAgICAgIDoge250eXBlOiAnaGJveCcsIGFsaWduOiAnc3RyZXRjaCd9LFxuICAgICAgICBzdGF0ZVByb3ZpZGVyICAgICAgIDogTWFpbkNvbnRhaW5lclN0YXRlUHJvdmlkZXJcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YVxuICAgICAqL1xuICAgIGNvdW50cnlSZW5kZXJlcih7cmVjb3JkfSkge1xuICAgICAgICBsZXQgY291bnRyeVN0b3JlID0gdGhpcy5nZXRTdGF0ZVByb3ZpZGVyKCkuZ2V0U3RvcmUoJ2NvdW50cmllcycpO1xuXG4gICAgICAgIGlmIChjb3VudHJ5U3RvcmUuZ2V0Q291bnQoKSA+IDApIHtcbiAgICAgICAgICAgIHJldHVybiBjb3VudHJ5U3RvcmUuZ2V0KHJlY29yZC5jb3VudHJ5KS5uYW1lXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gJydcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0W119XG4gICAgICovXG4gICAgY3JlYXRlQ29uZmlndXJhdGlvbkNvbXBvbmVudHMoKSB7XG4gICAgICAgIGxldCBtZSAgICAgICAgICAgICAgID0gdGhpcyxcbiAgICAgICAgICAgIHtzZWxlY3Rpb25Nb2RlbH0gPSBtZS5leGFtcGxlQ29tcG9uZW50LnZpZXc7XG5cbiAgICAgICAgY29uc3Qgc2VsZWN0aW9uTW9kZWxSYWRpb0RlZmF1bHRzID0ge1xuICAgICAgICAgICAgbW9kdWxlICAgICAgICA6IFJhZGlvLFxuICAgICAgICAgICAgaGlkZVZhbHVlTGFiZWw6IGZhbHNlLFxuICAgICAgICAgICAgbGFiZWxUZXh0ICAgICA6ICcnLFxuICAgICAgICAgICAgbmFtZSAgICAgICAgICA6ICdzZWxlY3Rpb25Nb2RlbCcsXG4gICAgICAgICAgICB3aWR0aCAgICAgICAgIDogMzUwXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIFt7XG4gICAgICAgICAgICBtb2R1bGUgICA6IE51bWJlckZpZWxkLFxuICAgICAgICAgICAgbGFiZWxUZXh0OiAnaGVpZ2h0JyxcbiAgICAgICAgICAgIGxpc3RlbmVyczoge2NoYW5nZTogbWUub25Db25maWdDaGFuZ2UuYmluZChtZSwgJ2hlaWdodCcpfSxcbiAgICAgICAgICAgIG1heFZhbHVlIDogODAwLFxuICAgICAgICAgICAgbWluVmFsdWUgOiAyMjUsXG4gICAgICAgICAgICBzdGVwU2l6ZSA6IDUsXG4gICAgICAgICAgICB2YWx1ZSAgICA6IG1lLmV4YW1wbGVDb21wb25lbnQuaGVpZ2h0XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIC4uLnNlbGVjdGlvbk1vZGVsUmFkaW9EZWZhdWx0cyxcbiAgICAgICAgICAgIGNoZWNrZWQgICA6IHNlbGVjdGlvbk1vZGVsLm50eXBlID09PSAnc2VsZWN0aW9uLWdyaWQtY2VsbG1vZGVsJyxcbiAgICAgICAgICAgIGxhYmVsVGV4dCA6ICdzZWxlY3Rpb25Nb2RlbCcsXG4gICAgICAgICAgICBsaXN0ZW5lcnMgOiB7Y2hhbmdlOiBtZS5vblJhZGlvVmlld0NoYW5nZS5iaW5kKG1lLCAnc2VsZWN0aW9uTW9kZWwnLCBDZWxsTW9kZWwpfSxcbiAgICAgICAgICAgIHN0eWxlICAgICA6IHttYXJnaW5Ub3A6ICcxMHB4J30sXG4gICAgICAgICAgICB2YWx1ZUxhYmVsOiAnQ2VsbCdcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgLi4uc2VsZWN0aW9uTW9kZWxSYWRpb0RlZmF1bHRzLFxuICAgICAgICAgICAgY2hlY2tlZCAgIDogc2VsZWN0aW9uTW9kZWwubnR5cGUgPT09ICdzZWxlY3Rpb24tZ3JpZC1jZWxsY29sdW1ubW9kZWwnLFxuICAgICAgICAgICAgbGlzdGVuZXJzIDoge2NoYW5nZTogbWUub25SYWRpb1ZpZXdDaGFuZ2UuYmluZChtZSwgJ3NlbGVjdGlvbk1vZGVsJywgQ2VsbENvbHVtbk1vZGVsKX0sXG4gICAgICAgICAgICB2YWx1ZUxhYmVsOiAnQ2VsbCAmIENvbHVtbidcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgLi4uc2VsZWN0aW9uTW9kZWxSYWRpb0RlZmF1bHRzLFxuICAgICAgICAgICAgY2hlY2tlZCAgIDogc2VsZWN0aW9uTW9kZWwubnR5cGUgPT09ICdzZWxlY3Rpb24tZ3JpZC1jZWxscm93bW9kZWwnLFxuICAgICAgICAgICAgbGlzdGVuZXJzIDoge2NoYW5nZTogbWUub25SYWRpb1ZpZXdDaGFuZ2UuYmluZChtZSwgJ3NlbGVjdGlvbk1vZGVsJywgQ2VsbFJvd01vZGVsKX0sXG4gICAgICAgICAgICB2YWx1ZUxhYmVsOiAnQ2VsbCAmIFJvdydcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgLi4uc2VsZWN0aW9uTW9kZWxSYWRpb0RlZmF1bHRzLFxuICAgICAgICAgICAgY2hlY2tlZCAgIDogc2VsZWN0aW9uTW9kZWwubnR5cGUgPT09ICdzZWxlY3Rpb24tZ3JpZC1jZWxsY29sdW1ucm93bW9kZWwnLFxuICAgICAgICAgICAgbGlzdGVuZXJzIDoge2NoYW5nZTogbWUub25SYWRpb1ZpZXdDaGFuZ2UuYmluZChtZSwgJ3NlbGVjdGlvbk1vZGVsJywgQ2VsbENvbHVtblJvd01vZGVsKX0sXG4gICAgICAgICAgICB2YWx1ZUxhYmVsOiAnQ2VsbCAmIENvbHVtbiAmIFJvdydcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgbW9kdWxlICAgIDogQ2hlY2tCb3gsXG4gICAgICAgICAgICBjaGVja2VkICAgOiBtZS5leGFtcGxlQ29tcG9uZW50LnNvcnRhYmxlLFxuICAgICAgICAgICAgaGlkZUxhYmVsIDogdHJ1ZSxcbiAgICAgICAgICAgIGxpc3RlbmVycyA6IHtjaGFuZ2U6IG1lLm9uQ29uZmlnQ2hhbmdlLmJpbmQobWUsICdzb3J0YWJsZScpfSxcbiAgICAgICAgICAgIHN0eWxlICAgICA6IHttYXJnaW5Ub3A6ICcxMHB4J30sXG4gICAgICAgICAgICB2YWx1ZUxhYmVsOiAnc29ydGFibGUnXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG1vZHVsZSAgICA6IENoZWNrQm94LFxuICAgICAgICAgICAgY2hlY2tlZCAgIDogZmFsc2UsIC8vIHdlIGNhbiBub3QgYWNjZXNzIHRoZSBsYXp5LWxvYWRlZCBwbHVnaW4geWV0XG4gICAgICAgICAgICBoaWRlTGFiZWwgOiB0cnVlLFxuICAgICAgICAgICAgbGlzdGVuZXJzIDoge2NoYW5nZTogbWUub25QbHVnaW5Db25maWdDaGFuZ2UuYmluZChtZSwgJ2Rpc2FibGVkJyl9LFxuICAgICAgICAgICAgc3R5bGUgICAgIDoge21hcmdpblRvcDogJzEwcHgnfSxcbiAgICAgICAgICAgIHZhbHVlTGFiZWw6ICdEaXNhYmxlIENlbGxFZGl0aW5nJ1xuICAgICAgICB9XVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAgICovXG4gICAgY3JlYXRlRXhhbXBsZUNvbXBvbmVudCgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1vZHVsZSAgICAgIDogR3JpZENvbnRhaW5lcixcbiAgICAgICAgICAgIGJpbmQgICAgICAgIDoge3N0b3JlOiAnc3RvcmVzLm1haW5TdG9yZSd9LFxuICAgICAgICAgICAgY2VsbEVkaXRpbmcgOiB0cnVlLFxuICAgICAgICAgICAgcGFyZW50SWQgICAgOiB0aGlzLmlkLFxuICAgICAgICAgICAgc3RvcmUgICAgICAgOiBNYWluU3RvcmUsXG4gICAgICAgICAgICB3cmFwcGVyU3R5bGU6IHttYXhXaWR0aDogJzEwMDJweCd9LFxuXG4gICAgICAgICAgICBib2R5OiB7XG4gICAgICAgICAgICAgICAgc2VsZWN0aW9uTW9kZWw6IENlbGxNb2RlbFxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgY29sdW1uRGVmYXVsdHM6IHtcbiAgICAgICAgICAgICAgICBlZGl0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICB3aWR0aCAgIDogMjAwXG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBjb2x1bW5zOiBbe1xuICAgICAgICAgICAgICAgIGRhdGFGaWVsZDogJ2ZpcnN0bmFtZScsXG4gICAgICAgICAgICAgICAgdGV4dCAgICAgOiAnRmlyc3RuYW1lJ1xuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIGRhdGFGaWVsZDogJ3JhbmRvbU51bWJlcicsXG4gICAgICAgICAgICAgICAgdGV4dCAgICAgOiAnTnVtYmVyIChzdGVwIDUpJyxcblxuICAgICAgICAgICAgICAgIGVkaXRvcjoge1xuICAgICAgICAgICAgICAgICAgICBtb2R1bGUgICA6IE51bWJlckZpZWxkLFxuICAgICAgICAgICAgICAgICAgICBjbGVhcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBtYXhWYWx1ZSA6IDEwMCxcbiAgICAgICAgICAgICAgICAgICAgbWluVmFsdWUgOiAwLFxuICAgICAgICAgICAgICAgICAgICBzdGVwU2l6ZSA6IDVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgZGF0YUZpZWxkOiAncmFuZG9tRGF0ZScsXG4gICAgICAgICAgICAgICAgcmVuZGVyZXIgOiAoe3ZhbHVlfSkgPT4gbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQoJ2RlZmF1bHQnKS5mb3JtYXQodmFsdWUpLFxuICAgICAgICAgICAgICAgIHRleHQgICAgIDogJ1JhbmRvbSBEYXRlJyxcblxuICAgICAgICAgICAgICAgIGVkaXRvcjoge1xuICAgICAgICAgICAgICAgICAgICBtb2R1bGUgICA6IERhdGVGaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbWF4VmFsdWUgOiAnMjAyNC0xMi0yMCcsXG4gICAgICAgICAgICAgICAgICAgIG1pblZhbHVlIDogJzIwMjQtMTItMTAnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIGRhdGFGaWVsZDogJ2NvdW50cnknLFxuICAgICAgICAgICAgICAgIHJlbmRlcmVyIDogJ3VwLmNvdW50cnlSZW5kZXJlcicsXG4gICAgICAgICAgICAgICAgdGV4dCAgICAgOiAnQ291bnRyeScsXG5cbiAgICAgICAgICAgICAgICBlZGl0b3I6IHtcbiAgICAgICAgICAgICAgICAgICAgbW9kdWxlICAgICAgICA6IENvdW50cnlGaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgYmluZCAgICAgICAgICA6IHtzdG9yZTogJ3N0b3Jlcy5jb3VudHJpZXMnfSxcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJhYmxlICAgICA6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBmb3JjZVNlbGVjdGlvbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVGaWVsZCAgICA6ICdjb2RlJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBkYXRhRmllbGQ6ICdnaXRodWJJZCcsXG4gICAgICAgICAgICAgICAgZWRpdGFibGUgOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB0ZXh0ICAgICA6ICdHaXRodWIgSWQgKE5vbi1lZGl0YWJsZSknXG4gICAgICAgICAgICB9XVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGNvbmZpZ1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzXG4gICAgICovXG4gICAgb25QbHVnaW5Db25maWdDaGFuZ2UoY29uZmlnLCBvcHRzKSB7XG4gICAgICAgIHRoaXMuZXhhbXBsZUNvbXBvbmVudC5nZXRQbHVnaW4oJ2dyaWQtY2VsbC1lZGl0aW5nJylbY29uZmlnXSA9IG9wdHMudmFsdWVcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gY29uZmlnXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdHNcbiAgICAgKi9cbiAgICBvblJhZGlvVmlld0NoYW5nZShjb25maWcsIHZhbHVlLCBvcHRzKSB7XG4gICAgICAgIGlmIChvcHRzLnZhbHVlID09PSB0cnVlKSB7IC8vIHdlIG9ubHkgd2FudCB0byBsaXN0ZW4gdG8gY2hlY2sgZXZlbnRzLCBub3QgdW5jaGVja1xuICAgICAgICAgICAgdGhpcy5leGFtcGxlQ29tcG9uZW50LnZpZXdbY29uZmlnXSA9IHZhbHVlXG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IE5lby5zZXR1cENsYXNzKE1haW5Db250YWluZXIpO1xuIiwiaW1wb3J0IE1haW5TdG9yZSAgICAgZnJvbSAnLi9NYWluU3RvcmUubWpzJztcbmltcG9ydCBTdGF0ZVByb3ZpZGVyIGZyb20gJy4uLy4uLy4uL3NyYy9zdGF0ZS9Qcm92aWRlci5tanMnO1xuaW1wb3J0IFN0b3JlICAgICAgICAgZnJvbSAnLi4vLi4vLi4vc3JjL2RhdGEvU3RvcmUubWpzJztcblxuY29uc3QgY291bnRyeVN5bWJvbCA9IFN5bWJvbC5mb3IoJ2NvdW50cnknKTtcblxuLyoqXG4gKiBAY2xhc3MgTmVvLmV4YW1wbGVzLmdyaWQuY2VsbEVkaXRpbmcuTWFpbkNvbnRhaW5lclN0YXRlUHJvdmlkZXJcbiAqIEBleHRlbmRzIE5lby5zdGF0ZS5Qcm92aWRlclxuICovXG5jbGFzcyBNYWluQ29udGFpbmVyU3RhdGVQcm92aWRlciBleHRlbmRzIFN0YXRlUHJvdmlkZXIge1xuICAgIHN0YXRpYyBjb25maWcgPSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtTdHJpbmd9IGNsYXNzTmFtZT0nTmVvLmV4YW1wbGVzLmdyaWQuY2VsbEVkaXRpbmcuTWFpbkNvbnRhaW5lclN0YXRlUHJvdmlkZXInXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIGNsYXNzTmFtZTogJ05lby5leGFtcGxlcy5ncmlkLmNlbGxFZGl0aW5nLk1haW5Db250YWluZXJTdGF0ZVByb3ZpZGVyJyxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge09iamVjdH0gc3RvcmVzXG4gICAgICAgICAqL1xuICAgICAgICBzdG9yZXM6IHtcbiAgICAgICAgICAgIGNvdW50cmllczoge1xuICAgICAgICAgICAgICAgIG1vZHVsZSAgICAgOiBTdG9yZSxcbiAgICAgICAgICAgICAgICBhdXRvTG9hZCAgIDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBrZXlQcm9wZXJ0eTogJ2NvZGUnLFxuICAgICAgICAgICAgICAgIGxpc3RlbmVycyAgOiB7bG9hZDogJ29uQ291bnRyeVN0b3JlTG9hZCd9LFxuICAgICAgICAgICAgICAgIHVybCAgICAgICAgOiAnLi4vLi4vLi4vcmVzb3VyY2VzL2V4YW1wbGVzL2RhdGEvY291bnRyaWVzLmpzb24nLFxuXG4gICAgICAgICAgICAgICAgbW9kZWw6IHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGRzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICB7bmFtZTogJ2NvZGUnfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHtuYW1lOiAnbmFtZSd9XG4gICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbWFpblN0b3JlOiBNYWluU3RvcmVcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7UmVjb3JkW119IGl0ZW1zXG4gICAgICovXG4gICAgb25Db3VudHJ5U3RvcmVMb2FkKGl0ZW1zKSB7XG4gICAgICAgIGxldCBtZSAgICAgICAgPSB0aGlzLFxuICAgICAgICAgICAgbWFpblN0b3JlID0gbWUuZ2V0U3RvcmUoJ21haW5TdG9yZScpLFxuICAgICAgICAgICAgY291bnRyeTtcblxuICAgICAgICAvLyBpZiB0aGUgbWFpbiB0YWJsZSBzdG9yZSBpcyBhbHJlYWR5IGxvYWRlZCwgdGhlIGNvdW50cnkgZmllbGQgcmVuZGVyZXIgaGFkIG5vIGRhdGFcbiAgICAgICAgaWYgKG1haW5TdG9yZS5nZXRDb3VudCgpID4gMCkge1xuICAgICAgICAgICAgbWFpblN0b3JlLmZvckVhY2gocmVjb3JkID0+IHtcbiAgICAgICAgICAgICAgICBjb3VudHJ5ID0gcmVjb3JkLmNvdW50cnk7XG5cbiAgICAgICAgICAgICAgICAvLyBoYWNrIHJlc2V0dGluZyB0aGUgY3VycmVudCB2YWx1ZSB0byBnZXQgYSBuZXcgcmVjb3JkIGNoYW5nZVxuICAgICAgICAgICAgICAgIHJlY29yZFtjb3VudHJ5U3ltYm9sXSA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICByZWNvcmQuY291bnRyeSA9IGNvdW50cnlcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IE5lby5zZXR1cENsYXNzKE1haW5Db250YWluZXJTdGF0ZVByb3ZpZGVyKTtcbiIsImltcG9ydCBNb2RlbCBmcm9tICcuLi8uLi8uLi9zcmMvZGF0YS9Nb2RlbC5tanMnO1xuXG4vKipcbiAqIEBjbGFzcyBOZW8uZXhhbXBsZXMuZ3JpZC5jZWxsRWRpdGluZy5NYWluTW9kZWxcbiAqIEBleHRlbmRzIE5lby5kYXRhLk1vZGVsXG4gKi9cbmNsYXNzIE1haW5Nb2RlbCBleHRlbmRzIE1vZGVsIHtcbiAgICBzdGF0aWMgY29uZmlnID0ge1xuICAgICAgICBjbGFzc05hbWU6ICdOZW8uZXhhbXBsZXMuZ3JpZC5jZWxsRWRpdGluZy5NYWluTW9kZWwnLFxuXG4gICAgICAgIGZpZWxkczogW3tcbiAgICAgICAgICAgIG5hbWU6ICdjb3VudHJ5JyxcbiAgICAgICAgICAgIHR5cGU6ICdTdHJpbmcnXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG5hbWU6ICdmaXJzdG5hbWUnLFxuICAgICAgICAgICAgdHlwZTogJ1N0cmluZydcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgbmFtZTogJ2dpdGh1YklkJyxcbiAgICAgICAgICAgIHR5cGU6ICdTdHJpbmcnXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG5hbWU6ICdyYW5kb21OdW1iZXInLFxuICAgICAgICAgICAgdHlwZTogJ0ludCdcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgbmFtZTogJ3JhbmRvbURhdGUnLFxuICAgICAgICAgICAgdHlwZTogJ0RhdGUnXG4gICAgICAgIH1dXG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBOZW8uc2V0dXBDbGFzcyhNYWluTW9kZWwpO1xuIiwiaW1wb3J0IE1vZGVsIGZyb20gJy4vTWFpbk1vZGVsLm1qcyc7XG5pbXBvcnQgU3RvcmUgZnJvbSAnLi4vLi4vLi4vc3JjL2RhdGEvU3RvcmUubWpzJztcblxuLyoqXG4gKiBAY2xhc3MgTmVvLmV4YW1wbGVzLmdyaWQuY2VsbEVkaXRpbmcuTWFpblN0b3JlXG4gKiBAZXh0ZW5kcyBOZW8uZGF0YS5TdG9yZVxuICovXG5jbGFzcyBNYWluU3RvcmUgZXh0ZW5kcyBTdG9yZSB7XG4gICAgc3RhdGljIGNvbmZpZyA9IHtcbiAgICAgICAgY2xhc3NOYW1lICA6ICdOZW8uZXhhbXBsZXMuZ3JpZC5jZWxsRWRpdGluZy5NYWluU3RvcmUnLFxuICAgICAgICBrZXlQcm9wZXJ0eTogJ2dpdGh1YklkJyxcbiAgICAgICAgbW9kZWwgICAgICA6IE1vZGVsLFxuXG4gICAgICAgIGRhdGE6IFt7XG4gICAgICAgICAgICBjb3VudHJ5ICAgICA6ICdERScsXG4gICAgICAgICAgICBmaXJzdG5hbWUgICA6ICdUb2JpYXMnLFxuICAgICAgICAgICAgZ2l0aHViSWQgICAgOiAndG9iaXUnLFxuICAgICAgICAgICAgcmFuZG9tRGF0ZSAgOiAnMjAyNC0xMi0yMCcsXG4gICAgICAgICAgICByYW5kb21OdW1iZXI6IDEwMFxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBjb3VudHJ5ICAgICA6ICdVUycsXG4gICAgICAgICAgICBmaXJzdG5hbWUgICA6ICdSaWNoJyxcbiAgICAgICAgICAgIGdpdGh1YklkICAgIDogJ3J3YXRlcnMnLFxuICAgICAgICAgICAgcmFuZG9tRGF0ZSAgOiAnMjAyNC0xMi0xOCcsXG4gICAgICAgICAgICByYW5kb21OdW1iZXI6IDkwXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGNvdW50cnkgICAgIDogJ0RFJyxcbiAgICAgICAgICAgIGZpcnN0bmFtZSAgIDogJ05pbHMnLFxuICAgICAgICAgICAgZ2l0aHViSWQgICAgOiAnbXJzdW5zaGluZScsXG4gICAgICAgICAgICByYW5kb21EYXRlICA6ICcyMDI0LTEyLTE5JyxcbiAgICAgICAgICAgIHJhbmRvbU51bWJlcjogNzBcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgY291bnRyeSAgICAgOiAnVVMnLFxuICAgICAgICAgICAgZmlyc3RuYW1lICAgOiAnR2VyYXJkJyxcbiAgICAgICAgICAgIGdpdGh1YklkICAgIDogJ2NhbXRuYmlrZXJyd2MnLFxuICAgICAgICAgICAgcmFuZG9tRGF0ZSAgOiAnMjAyNC0xMi0xNycsXG4gICAgICAgICAgICByYW5kb21OdW1iZXI6IDgwXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGNvdW50cnkgICAgIDogJ1NLJyxcbiAgICAgICAgICAgIGZpcnN0bmFtZSAgIDogJ0pvemVmJyxcbiAgICAgICAgICAgIGdpdGh1YklkICAgIDogJ2pzYWthbG9zJyxcbiAgICAgICAgICAgIHJhbmRvbURhdGUgIDogJzIwMjQtMTItMTYnLFxuICAgICAgICAgICAgcmFuZG9tTnVtYmVyOiA2MFxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBjb3VudHJ5ICAgICA6ICdERScsXG4gICAgICAgICAgICBmaXJzdG5hbWUgICA6ICdCYXN0aWFuJyxcbiAgICAgICAgICAgIGdpdGh1YklkICAgIDogJ2JoYXVzdGVpbicsXG4gICAgICAgICAgICByYW5kb21EYXRlICA6ICcyMDI0LTEyLTE1JyxcbiAgICAgICAgICAgIHJhbmRvbU51bWJlcjogNTBcbiAgICAgICAgfV1cbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IE5lby5zZXR1cENsYXNzKE1haW5TdG9yZSk7XG4iLCJpbXBvcnQgTWFpbkNvbnRhaW5lciBmcm9tICcuL01haW5Db250YWluZXIubWpzJztcblxuZXhwb3J0IGNvbnN0IG9uU3RhcnQgPSAoKSA9PiBOZW8uYXBwKHtcbiAgICBtYWluVmlldzogTWFpbkNvbnRhaW5lcixcbiAgICBuYW1lICAgIDogJ05lby5leGFtcGxlcy5ncmlkLmNlbGxFZGl0aW5nJ1xufSk7XG4iLCJpbXBvcnQgQ29tYm9Cb3ggZnJvbSAnLi9Db21ib0JveC5tanMnO1xuXG4vKipcbiAqIEBjbGFzcyBOZW8uZm9ybS5maWVsZC5Db3VudHJ5XG4gKiBAZXh0ZW5kcyBOZW8uZm9ybS5maWVsZC5Db21ib0JveFxuICovXG5jbGFzcyBDb3VudHJ5IGV4dGVuZHMgQ29tYm9Cb3gge1xuICAgIHN0YXRpYyBjb25maWcgPSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtTdHJpbmd9IGNsYXNzTmFtZT0nTmVvLmZvcm0uZmllbGQuQ291bnRyeSdcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgY2xhc3NOYW1lOiAnTmVvLmZvcm0uZmllbGQuQ291bnRyeScsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtTdHJpbmd9IG50eXBlPSdjb3VudHJ5ZmllbGQnXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIG50eXBlOiAnY291bnRyeWZpZWxkJyxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFlvdSBjYW4gZWl0aGVyIHBhc3MgYSBmaWVsZCBpbnN0YW5jZSBvciBhIGZpZWxkIHJlZmVyZW5jZVxuICAgICAgICAgKiBAbWVtYmVyIHtOZW8uZm9ybS5maWVsZC5CYXNlfFN0cmluZ3xudWxsfSB6aXBDb2RlRmllbGRfPW51bGxcbiAgICAgICAgICogQHJlYWN0aXZlXG4gICAgICAgICAqL1xuICAgICAgICB6aXBDb2RlRmllbGRfOiBudWxsXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIGFmdGVyIHRoZSB6aXBDb2RlRmllbGQgY29uZmlnIGdvdCBjaGFuZ2VkXG4gICAgICogQHBhcmFtIHtOZW8uZm9ybS5maWVsZC5CYXNlfG51bGx9IHZhbHVlXG4gICAgICogQHBhcmFtIHtOZW8uZm9ybS5maWVsZC5CYXNlfG51bGx9IG9sZFZhbHVlXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIGFmdGVyU2V0WmlwQ29kZUZpZWxkKHZhbHVlLCBvbGRWYWx1ZSkge1xuICAgICAgICBpZiAodmFsdWUgJiYgdmFsdWUgaW5zdGFuY2VvZiBOZW8uZm9ybS5maWVsZC5CYXNlKSB7XG4gICAgICAgICAgICB2YWx1ZS5jb3VudHJ5RmllbGQgPSB0aGlzXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgYmVmb3JlIHRoZSB6aXBDb2RlRmllbGQgY29uZmlnIGdldHMgY2hhbmdlZFxuICAgICAqIEBwYXJhbSB7TmVvLmZvcm0uZmllbGQuQmFzZXxTdHJpbmd8bnVsbH0gdmFsdWVcbiAgICAgKiBAcGFyYW0ge05lby5mb3JtLmZpZWxkLkJhc2V8U3RyaW5nfG51bGx9IG9sZFZhbHVlXG4gICAgICogQHJldHVybnMge05lby5mb3JtLmZpZWxkLkJhc2V8bnVsbH1cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgYmVmb3JlU2V0WmlwQ29kZUZpZWxkKHZhbHVlLCBvbGRWYWx1ZSkge1xuICAgICAgICBsZXQgbWUgPSB0aGlzO1xuXG4gICAgICAgIGlmIChOZW8uaXNTdHJpbmcodmFsdWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gbWUudXAoKS5nZXRSZWZlcmVuY2UodmFsdWUpXG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdmFsdWVcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IE5lby5zZXR1cENsYXNzKENvdW50cnkpO1xuIiwiaW1wb3J0IERhdGVTZWxlY3RvciBmcm9tICcuLi8uLi9jb21wb25lbnQvRGF0ZVNlbGVjdG9yLm1qcydcbmltcG9ydCBEYXRlVHJpZ2dlciAgZnJvbSAnLi90cmlnZ2VyL0RhdGUubWpzJ1xuaW1wb3J0IERhdGVVdGlsICAgICBmcm9tICcuLi8uLi91dGlsL0RhdGUubWpzJztcbmltcG9ydCBQaWNrZXIgICAgICAgZnJvbSAnLi9QaWNrZXIubWpzJztcbmltcG9ydCBWRG9tVXRpbCAgICAgZnJvbSAnLi4vLi4vdXRpbC9WRG9tLm1qcyc7XG5cbi8qKlxuICogQGNsYXNzIE5lby5mb3JtLmZpZWxkLkRhdGVcbiAqIEBleHRlbmRzIE5lby5mb3JtLmZpZWxkLlBpY2tlclxuICovXG5jbGFzcyBEYXRlRmllbGQgZXh0ZW5kcyBQaWNrZXIge1xuICAgIHN0YXRpYyBjb25maWcgPSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtTdHJpbmd9IGNsYXNzTmFtZT0nTmVvLmZvcm0uZmllbGQuRGF0ZSdcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgY2xhc3NOYW1lOiAnTmVvLmZvcm0uZmllbGQuRGF0ZScsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtTdHJpbmd9IG50eXBlPSdkYXRlZmllbGQnXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIG50eXBlOiAnZGF0ZWZpZWxkJyxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ1tdfSBiYXNlQ2xzPVsnbmVvLWRhdGVmaWVsZCcsJ25lby1waWNrZXJmaWVsZCcsJ25lby10ZXh0ZmllbGQnXVxuICAgICAgICAgKi9cbiAgICAgICAgYmFzZUNsczogWyduZW8tZGF0ZWZpZWxkJywgJ25lby1waWNrZXJmaWVsZCcsICduZW8tdGV4dGZpZWxkJ10sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtOZW8uY29tcG9uZW50LkRhdGVTZWxlY3RvcnxudWxsfSBkYXRlU2VsZWN0b3I9bnVsbFxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICBkYXRlU2VsZWN0b3I6IG51bGwsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtPYmplY3R8bnVsbH0gZGF0ZVNlbGVjdG9yQ29uZmlnPW51bGxcbiAgICAgICAgICovXG4gICAgICAgIGRhdGVTZWxlY3RvckNvbmZpZzogbnVsbCxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ30gZXJyb3JUZXh0SW52YWxpZERhdGU9J05vdCBhIHZhbGlkIGRhdGUnXG4gICAgICAgICAqL1xuICAgICAgICBlcnJvclRleHRJbnZhbGlkRGF0ZTogJ05vdCBhIHZhbGlkIGRhdGUnLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7Qm9vbGVhbn0gaXNvRGF0ZT1mYWxzZVxuICAgICAgICAgKi9cbiAgICAgICAgaXNvRGF0ZTogZmFsc2UsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUcnVlIHRvIGhpZGUgdGhlIERhdGVQaWNrZXIgd2hlbiBzZWxlY3RpbmcgYSBkYXlcbiAgICAgICAgICogQG1lbWJlciB7Qm9vbGVhbn0gaGlkZVBpY2tlck9uU2VsZWN0PWZhbHNlXG4gICAgICAgICAqL1xuICAgICAgICBoaWRlUGlja2VyT25TZWxlY3Q6IGZhbHNlLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfSBpbnB1dFR5cGU9J2RhdGUnXG4gICAgICAgICAqIEByZWFjdGl2ZVxuICAgICAgICAgKi9cbiAgICAgICAgaW5wdXRUeXBlOiAnZGF0ZScsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtTdHJpbmd8bnVsbH0gbWF4VmFsdWVfPW51bGxcbiAgICAgICAgICogQHJlYWN0aXZlXG4gICAgICAgICAqL1xuICAgICAgICBtYXhWYWx1ZV86IG51bGwsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtTdHJpbmd8bnVsbH0gbWluVmFsdWVfPW51bGxcbiAgICAgICAgICogQHJlYWN0aXZlXG4gICAgICAgICAqL1xuICAgICAgICBtaW5WYWx1ZV86IG51bGwsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtOdW1iZXJ9IHBpY2tlckhlaWdodD0yMjVcbiAgICAgICAgICovXG4gICAgICAgIHBpY2tlckhlaWdodDogMjI1LFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7TnVtYmVyfG51bGx9IHBpY2tlck1heEhlaWdodD0yMjVcbiAgICAgICAgICovXG4gICAgICAgIHBpY2tlck1heEhlaWdodDogMjI1LFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7TnVtYmVyfSBwaWNrZXJXaWR0aD0yMDBcbiAgICAgICAgICovXG4gICAgICAgIHBpY2tlcldpZHRoOiAyMDAsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtPYmplY3R8T2JqZWN0W119IHRyaWdnZXJzPVt7bW9kdWxlOiBEYXRlVHJpZ2dlcn1dXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHJlYWN0aXZlXG4gICAgICAgICAqL1xuICAgICAgICB0cmlnZ2VyczogW3tcbiAgICAgICAgICAgIG1vZHVsZTogRGF0ZVRyaWdnZXJcbiAgICAgICAgfV1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbnRlcm5hbCBmbGFnIHRvIHN0b3JlIHRoZSBkb20gYmFzZWQgdmFsaWRpdHkgb2YgdGhpcyBmaWVsZFxuICAgICAqIEBtZW1iZXIge0Jvb2xlYW59IGludmFsaWRJbnB1dD1mYWxzZVxuICAgICAqL1xuICAgIGludmFsaWRJbnB1dCA9IGZhbHNlXG4gICAgLyoqXG4gICAgICogU2V0dGluZyB0aGUgdmFsdWUgdG8gdHJ1ZSB3aWxsIHJldHVybiBhIERhdGUgb2JqZWN0IHdoZW4gY2FsbGluZyBnZXRTdWJtaXRWYWx1ZSgpXG4gICAgICogQG1lbWJlciB7Qm9vbGVhbn0gc3VibWl0RGF0ZU9iamVjdD1mYWxzZVxuICAgICAqL1xuICAgIHN1Ym1pdERhdGVPYmplY3QgPSBmYWxzZVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIGNvbmZpZ1xuICAgICAqL1xuICAgIGNvbnN0cnVjdChjb25maWcpIHtcbiAgICAgICAgc3VwZXIuY29uc3RydWN0KGNvbmZpZyk7XG5cbiAgICAgICAgbGV0IG1lID0gdGhpcztcblxuICAgICAgICBtZS5kYXRlU2VsZWN0b3IgPSBOZW8uY3JlYXRlKHtcbiAgICAgICAgICAgIG1vZHVsZSAgICAgICA6IERhdGVTZWxlY3RvcixcbiAgICAgICAgICAgIGRheU5hbWVGb3JtYXQ6ICdzaG9ydCcsXG4gICAgICAgICAgICBtYXhWYWx1ZSAgICAgOiBtZS5tYXhWYWx1ZSxcbiAgICAgICAgICAgIG1pblZhbHVlICAgICA6IG1lLm1pblZhbHVlLFxuICAgICAgICAgICAgdmFsdWUgICAgICAgIDogbWUudmFsdWUgfHwgRGF0ZVV0aWwuY29udmVydFRveXl5eW1tZGQobmV3IERhdGUoKSksXG4gICAgICAgICAgICAuLi5tZS5kYXRlU2VsZWN0b3JDb25maWdcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbWUuZGF0ZVNlbGVjdG9yLmtleXMuX2tleXMucHVzaChcbiAgICAgICAgICAgIHtmbjogJ29uQ29udGFpbmVyS2V5RG93bkVzY2FwZScsIGtleTogJ0VzY2FwZScsIHNjb3BlOiBtZS5pZH1cbiAgICAgICAgKTtcblxuICAgICAgICBtZS5kYXRlU2VsZWN0b3Iub24oe1xuICAgICAgICAgICAgY2hhbmdlOiBtZS5vbkRhdGVQaWNrZXJDaGFuZ2UsXG4gICAgICAgICAgICBzY29wZSA6IG1lXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIGFmdGVyIHRoZSBtYXhWYWx1ZSBjb25maWcgZ290IGNoYW5nZWRcbiAgICAgKiBAcGFyYW0ge1RleHR9IHZhbHVlXG4gICAgICogQHBhcmFtIHtUZXh0fSBvbGRWYWx1ZVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBhZnRlclNldE1heFZhbHVlKHZhbHVlLCBvbGRWYWx1ZSkge1xuICAgICAgICBsZXQgbWUgPSB0aGlzO1xuXG4gICAgICAgIG1lLmNoYW5nZUlucHV0RWxLZXkoJ21heCcsIHZhbHVlKTtcblxuICAgICAgICBpZiAobWUuZGF0ZVNlbGVjdG9yKSB7XG4gICAgICAgICAgICBtZS5kYXRlU2VsZWN0b3IubWF4VmFsdWUgPSB2YWx1ZVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIGFmdGVyIHRoZSBtaW5WYWx1ZSBjb25maWcgZ290IGNoYW5nZWRcbiAgICAgKiBAcGFyYW0ge1RleHR9IHZhbHVlXG4gICAgICogQHBhcmFtIHtUZXh0fSBvbGRWYWx1ZVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBhZnRlclNldE1pblZhbHVlKHZhbHVlLCBvbGRWYWx1ZSkge1xuICAgICAgICBsZXQgbWUgPSB0aGlzO1xuXG4gICAgICAgIG1lLmNoYW5nZUlucHV0RWxLZXkoJ21pbicsIHZhbHVlKTtcblxuICAgICAgICBpZiAobWUuZGF0ZVNlbGVjdG9yKSB7XG4gICAgICAgICAgICBtZS5kYXRlU2VsZWN0b3IubWluVmFsdWUgPSB2YWx1ZVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIGFmdGVyIHRoZSB2YWx1ZSBjb25maWcgZ290IGNoYW5nZWRcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdmFsdWVcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gb2xkVmFsdWVcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgYWZ0ZXJTZXRWYWx1ZSh2YWx1ZSwgb2xkVmFsdWUpIHtcbiAgICAgICAgc3VwZXIuYWZ0ZXJTZXRWYWx1ZSh2YWx1ZSwgb2xkVmFsdWUpO1xuXG4gICAgICAgIGlmIChvbGRWYWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGVTZWxlY3Rvci52YWx1ZSA9IHZhbHVlXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgYmVmb3JlIHRoZSB2YWx1ZSBjb25maWcgZ290IGNoYW5nZWRcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdmFsdWVcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gb2xkVmFsdWVcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgYmVmb3JlU2V0VmFsdWUodmFsdWUsIG9sZFZhbHVlKSB7XG4gICAgICAgIGlmIChOZW8udHlwZU9mKHZhbHVlKSA9PT0gJ0RhdGUnKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IERhdGVVdGlsLmNvbnZlcnRUb3l5eXltbWRkKHZhbHVlKTtcbiAgICAgICAgICAgIHRoaXMub3JpZ2luYWxDb25maWcudmFsdWUgPSB2YWx1ZVxuICAgICAgICB9XG5cbiAgICAgICAgdmFsdWUgPSBzdXBlci5iZWZvcmVTZXRWYWx1ZSh2YWx1ZSwgb2xkVmFsdWUpO1xuXG4gICAgICAgIHJldHVybiAodGhpcy5pc29EYXRlICYmIHZhbHVlKSA/IHZhbHVlLnN1YnN0cmluZygwLCAxMCkgOiB2YWx1ZVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIHtOZW8uY29tcG9uZW50LkRhdGVTZWxlY3Rvcn1cbiAgICAgKi9cbiAgICBjcmVhdGVQaWNrZXJDb21wb25lbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGVTZWxlY3RvclxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIHtEYXRlfFN0cmluZ3xudWxsfVxuICAgICAqL1xuICAgIGdldFN1Ym1pdFZhbHVlKCkge1xuICAgICAgICBsZXQgdmFsdWUgPSB0aGlzLnZhbHVlO1xuXG4gICAgICAgIGlmKHRoaXMuc3VibWl0RGF0ZU9iamVjdCAmJiB2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGAke3ZhbHVlfVQxMjowMDowMC4wMDBaYCk7XG4gICAgICAgIH0gZWxzZSBpZih0aGlzLmlzb0RhdGUgJiYgdmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZSh2YWx1ZSkudG9JU09TdHJpbmcoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cbiAgICAgKi9cbiAgICBoYXNDb250ZW50KCkge1xuICAgICAgICBpZiAodGhpcy5sYWJlbFBvc2l0aW9uID09PSAnaW5saW5lJykge1xuICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzdXBlci5oYXNDb250ZW50KClcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBvbkNvbnRhaW5lcktleURvd25Fc2NhcGUoZGF0YSkge1xuICAgICAgICBsZXQgbWUgPSB0aGlzO1xuXG4gICAgICAgIG1lLmhpZGVQaWNrZXIoKTtcbiAgICAgICAgbWUuZm9jdXMobWUuZ2V0SW5wdXRFbElkKCkpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdHNcbiAgICAgKi9cbiAgICBvbkRhdGVQaWNrZXJDaGFuZ2Uob3B0cykge1xuICAgICAgICBsZXQgbWUgPSB0aGlzO1xuXG4gICAgICAgIG1lLmNsZWFuID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKG1lLmhpZGVQaWNrZXJPblNlbGVjdCkge1xuICAgICAgICAgICAgVkRvbVV0aWwucmVtb3ZlVmRvbUNoaWxkKG1lLnZkb20sIG1lLmdldFBpY2tlcklkKCkpO1xuXG4gICAgICAgICAgICBtZS5wcm9taXNlVXBkYXRlKCkudGhlbihkYXRhID0+IHtcbiAgICAgICAgICAgICAgICBtZS52YWx1ZSA9IG9wdHMudmFsdWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBtZS52YWx1ZSA9IG9wdHMudmFsdWVcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIG9uSW5wdXRWYWx1ZUNoYW5nZShkYXRhKSB7XG4gICAgICAgIHRoaXMuaW52YWxpZElucHV0ID0gIWRhdGEudmFsaWQ7XG5cbiAgICAgICAgaWYgKGRhdGEudmFsaWQpIHtcbiAgICAgICAgICAgIHN1cGVyLm9uSW5wdXRWYWx1ZUNoYW5nZShkYXRhKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy52YWxpZGF0ZShmYWxzZSlcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIG9uS2V5RG93bkVudGVyKGRhdGEpIHtcbiAgICAgICAgbGV0IG1lID0gdGhpcztcblxuICAgICAgICBpZiAobWUucGlja2VySXNNb3VudGVkKSB7XG4gICAgICAgICAgICBtZS5kYXRlU2VsZWN0b3IuZm9jdXNDdXJyZW50SXRlbSgpO1xuICAgICAgICAgICAgc3VwZXIub25LZXlEb3duRW50ZXIoZGF0YSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN1cGVyLm9uS2V5RG93bkVudGVyKGRhdGEsIG1lLmRhdGVTZWxlY3Rvci5mb2N1c0N1cnJlbnRJdGVtLCBtZS5kYXRlU2VsZWN0b3IpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgZm9yIGNsaWVudC1zaWRlIGZpZWxkIGVycm9yc1xuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gc2lsZW50PXRydWVcbiAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn0gUmV0dXJucyB0cnVlIGluIGNhc2UgdGhlcmUgYXJlIG5vIGNsaWVudC1zaWRlIGVycm9yc1xuICAgICAqL1xuICAgIHZhbGlkYXRlKHNpbGVudD10cnVlKSB7XG4gICAgICAgIGxldCBtZSAgICAgICAgICA9IHRoaXMsXG4gICAgICAgICAgICByZXR1cm5WYWx1ZSA9IHN1cGVyLnZhbGlkYXRlKHNpbGVudCk7XG5cbiAgICAgICAgaWYgKHJldHVyblZhbHVlKSB7XG4gICAgICAgICAgICBpZiAobWUuaW52YWxpZElucHV0KSB7XG4gICAgICAgICAgICAgICAgbWUuX2Vycm9yID0gbWUuZXJyb3JUZXh0SW52YWxpZERhdGU7XG4gICAgICAgICAgICAgICAgcmV0dXJuVmFsdWUgPSBmYWxzZVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgIXJldHVyblZhbHVlICYmICFtZS5jbGVhbiAmJiBtZS51cGRhdGVFcnJvcihtZS5fZXJyb3IsIHNpbGVudCk7XG5cbiAgICAgICAgcmV0dXJuIHJldHVyblZhbHVlXG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBOZW8uc2V0dXBDbGFzcyhEYXRlRmllbGQpO1xuIiwiaW1wb3J0IFBpY2tlciBmcm9tICcuL1BpY2tlci5tanMnO1xuXG4vKipcbiAqIHVzZWQgYnkgZm9ybS5maWVsZC5EYXRlXG4gKiBAY2xhc3MgTmVvLmZvcm0uZmllbGQudHJpZ2dlci5EYXRlXG4gKiBAZXh0ZW5kcyBOZW8uZm9ybS5maWVsZC50cmlnZ2VyLlBpY2tlclxuICovXG5jbGFzcyBEYXRlVHJpZ2dlciBleHRlbmRzIFBpY2tlciB7XG4gICAgc3RhdGljIGNvbmZpZyA9IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ30gY2xhc3NOYW1lPSdOZW8uZm9ybS5maWVsZC50cmlnZ2VyLkRhdGUnXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIGNsYXNzTmFtZTogJ05lby5mb3JtLmZpZWxkLnRyaWdnZXIuRGF0ZScsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtTdHJpbmd9IG50eXBlPSd0cmlnZ2VyLWRhdGUnXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIG50eXBlOiAndHJpZ2dlci1kYXRlJyxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ3xudWxsfSBpY29uQ2xzPSdmYSBmYS1jYWxlbmRhci1hbHQnXG4gICAgICAgICAqIEByZWFjdGl2ZVxuICAgICAgICAgKi9cbiAgICAgICAgaWNvbkNsczogJ2ZhIGZhLWNhbGVuZGFyLWFsdCdcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IE5lby5zZXR1cENsYXNzKERhdGVUcmlnZ2VyKTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=