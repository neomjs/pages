"use strict";
(self["webpackChunkneo_mjs"] = self["webpackChunkneo_mjs"] || []).push([["vendors-examples_component_process_realWorldExample_app_mjs"],{

/***/ "./examples/component/process/realWorldExample/MainContainer.mjs":
/*!***********************************************************************!*\
  !*** ./examples/component/process/realWorldExample/MainContainer.mjs ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _src_button_Base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../src/button/Base.mjs */ "./src/button/Base.mjs");
/* harmony import */ var _src_form_field_CheckBox_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../src/form/field/CheckBox.mjs */ "./src/form/field/CheckBox.mjs");
/* harmony import */ var _ConfigurationViewport_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../ConfigurationViewport.mjs */ "./examples/ConfigurationViewport.mjs");
/* harmony import */ var _src_form_field_ComboBox_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../src/form/field/ComboBox.mjs */ "./src/form/field/ComboBox.mjs");
/* harmony import */ var _src_component_Base_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../src/component/Base.mjs */ "./src/component/Base.mjs");
/* harmony import */ var _src_container_Base_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../src/container/Base.mjs */ "./src/container/Base.mjs");
/* harmony import */ var _src_form_field_Display_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../src/form/field/Display.mjs */ "./src/form/field/Display.mjs");
/* harmony import */ var _src_form_Container_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../src/form/Container.mjs */ "./src/form/Container.mjs");
/* harmony import */ var _src_form_field_Number_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../src/form/field/Number.mjs */ "./src/form/field/Number.mjs");
/* harmony import */ var _src_component_Process_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../src/component/Process.mjs */ "./src/component/Process.mjs");
/* harmony import */ var _src_form_field_Range_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../src/form/field/Range.mjs */ "./src/form/field/Range.mjs");
/* harmony import */ var _src_form_field_Text_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../src/form/field/Text.mjs */ "./src/form/field/Text.mjs");
/* harmony import */ var _src_component_Toast_mjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../src/component/Toast.mjs */ "./src/component/Toast.mjs");














/**
 * @class Neo.examples.component.process.realWorldExample.MainContainer
 * @extends Neo.examples.ConfigurationViewport
 */
class MainContainer extends _ConfigurationViewport_mjs__WEBPACK_IMPORTED_MODULE_2__["default"] {
    static config = {
        className           : 'Neo.examples.component.process.realWorldExample.MainContainer',
        configItemLabelWidth: 110,
        configItemWidth     : 250,
        configPanelMinWidth : 250,
        configPanelFlex     : 'none',
        layout              : {ntype: 'hbox', align: 'stretch'}
    }

    createConfigurationComponents() {
        let me = this;

        return [{
            module   : _src_form_field_CheckBox_mjs__WEBPACK_IMPORTED_MODULE_1__["default"],
            checked  : false,
            value    : 5,
            labelText: 'horizontal',
            listeners: {change: me.onConfigChange.bind(me, 'horizontal')}
        }, {
            module   : _src_form_field_Text_mjs__WEBPACK_IMPORTED_MODULE_11__["default"],
            labelText: 'arrowColor',
            listeners: {change: me.onConfigChange.bind(me, 'arrowColor')}
        }, {
            module   : _src_form_field_Text_mjs__WEBPACK_IMPORTED_MODULE_11__["default"],
            labelText: 'iconColor',
            listeners: {change: me.onConfigChange.bind(me, 'iconColor')}
        }];
    }

    createExampleComponent() {
        const me            = this,
              onRangeChange = me.onRangeChange.bind(me),
              // Wetterdaten von Berlin Tiergarten
              weatherUrl    = 'https://api.open-meteo.com/v1/forecast?latitude=52.51239766781255&longitude=13.35733940978727&current_weather=true';

        let weather = fetch(weatherUrl).then(async (response) => {
            let result        = await response.json(),
                temperature   = Math.ceil(result.current_weather.temperature),
                temperatureEl = me.down({flag: 'temperature'})

            temperatureEl.value = temperature;
        });

        return Neo.create({
            module      : _src_container_Base_mjs__WEBPACK_IMPORTED_MODULE_5__["default"],
            maxWidth    : 450,
            maxHeight   : '100%',
            style       : {
                overflowY: 'auto',
                margin   : '0 auto'
            },
            itemDefaults: {
                horizontal: false
            },
            items       : [{
                module: _src_component_Base_mjs__WEBPACK_IMPORTED_MODULE_4__["default"],
                vdom  : {
                    cn: [
                        {tag: 'img', src: './RangeHeader.jpg', width: '100%'}
                    ]
                }
            }, {
                module: _src_component_Process_mjs__WEBPACK_IMPORTED_MODULE_9__["default"],
                flag  : 'start-process',
                items : [{
                    iconCls: 'fa fa-plane-departure',
                    title  : 'Start Eingabe',
                    text   : 'Batterie % und Kilometerstand'
                }]
            }, {
                module   : _src_form_Container_mjs__WEBPACK_IMPORTED_MODULE_7__["default"],
                hasFields: true,
                layout   : {ntype: 'vbox', align: 'stretch'},
                items    : [{
                    module   : _src_form_field_Number_mjs__WEBPACK_IMPORTED_MODULE_8__["default"],
                    flag     : 'max-capacity',
                    labelText: 'max. Kapazität kWh',
                    minValue : 1,
                    maxValue : 500,
                    value    : 29
                }, {
                    module           : _src_form_field_Range_mjs__WEBPACK_IMPORTED_MODULE_10__["default"],
                    flag             : 'start-battery',
                    labelText        : 'Batterie %',
                    showResultInLabel: true,
                    minValue         : 1,
                    maxValue         : 100,
                    value            : 100,
                    listeners        : {change: onRangeChange}
                }, {
                    module   : _src_form_field_Number_mjs__WEBPACK_IMPORTED_MODULE_8__["default"],
                    flag     : 'start-km',
                    labelText: 'Kilometerstand',
                    minValue : 0,
                    maxValue : 500000
                }],
                listeners: {fieldFocusLeave: onRangeChange}
            }, {
                module: _src_component_Process_mjs__WEBPACK_IMPORTED_MODULE_9__["default"],
                flag  : 'end-process',
                items : [{
                    iconCls: 'fa fa-plane-arrival',
                    title  : 'Ankunft Eingabe',
                    text   : 'Batterie % und Kilometerstand'
                }]
            }, {
                module   : _src_form_Container_mjs__WEBPACK_IMPORTED_MODULE_7__["default"],
                hasFields: true,
                layout   : {ntype: 'vbox', align: 'stretch'},
                items    : [{
                    module           : _src_form_field_Range_mjs__WEBPACK_IMPORTED_MODULE_10__["default"],
                    flag             : 'end-battery',
                    labelText        : 'Batterie %',
                    showResultInLabel: true,
                    minValue         : 0,
                    maxValue         : 99,
                    value            : 0,
                    listeners        : {change: onRangeChange}
                }, {
                    module   : _src_form_field_Number_mjs__WEBPACK_IMPORTED_MODULE_8__["default"],
                    flag     : 'end-km',
                    labelText: 'Kilometerstand',
                    minValue : 0,
                    maxValue : 500000,
                }],
                listeners: {fieldFocusLeave: onRangeChange}
            }, {
                module    : _src_component_Process_mjs__WEBPACK_IMPORTED_MODULE_9__["default"],
                flag      : 'result-process',
                arrowColor: 'rgb(200 155 12)',
                items     : [{
                    iconCls: 'fa fa-square-poll-vertical',
                    title  : 'Ergebnisse',
                    text   : 'Errechnete Ergebnisse'
                }]
            }, {
                module   : _src_form_Container_mjs__WEBPACK_IMPORTED_MODULE_7__["default"],
                hasFields: true,
                layout   : {ntype: 'vbox', align: 'stretch'},
                listeners: {fieldChange: onRangeChange},
                items    : [{
                    module   : _src_form_field_Display_mjs__WEBPACK_IMPORTED_MODULE_6__["default"],
                    flag     : 'result',
                    labelText: 'Rest Kilometer'
                }, {
                    module   : _src_form_field_Display_mjs__WEBPACK_IMPORTED_MODULE_6__["default"],
                    flag     : 'remain-kWh',
                    labelText: 'Rest kWh'
                }, {
                    module   : _src_form_field_Display_mjs__WEBPACK_IMPORTED_MODULE_6__["default"],
                    flag     : 'average-kWh',
                    labelText: 'kwH pro 100km'
                }]
            }, {
                module    : _src_component_Process_mjs__WEBPACK_IMPORTED_MODULE_9__["default"],
                arrowColor: 'rgb(200 155 12)',
                items     : [{
                    iconCls: 'fa fa-magnifying-glass-chart',
                    title  : 'Zusätzliche Angaben',
                    text   : 'Für die Langzeitauswertung'
                }]
            }, {
                module      : _src_form_Container_mjs__WEBPACK_IMPORTED_MODULE_7__["default"],
                flag        : 'additional-information',
                disabled    : true,
                layout      : {ntype: 'vbox', align: 'stretch'},
                itemDefaults: {
                    showResultInLabel: true,
                    value            : 20
                },
                items       : [{
                    module      : _src_form_field_ComboBox_mjs__WEBPACK_IMPORTED_MODULE_3__["default"],
                    displayField: 'name',
                    labelText   : 'Fahrstil',
                    value       : 'normal',

                    store: {
                        data : [
                            {style: 'sportStyle',  name: 'sport',  code: 'sportCode'},
                            {style: 'normalStyle', name: 'normal', code: 'normalCode'},
                            {style: 'ecoStyle',    name: 'eco',    code: 'ecoCode'},
                        ],
                        model: {
                            fields: [
                                {name: 'style', type: 'String'},
                                {name: 'name',  type: 'String'},
                                {name: 'code',  type: 'String'}
                            ]
                        }
                    }
                }, {
                    module   : _src_form_field_Range_mjs__WEBPACK_IMPORTED_MODULE_10__["default"],
                    flag     : 'highway',
                    labelText: 'Autobahn %',
                    minValue : 0,
                    maxValue : 100,
                }, {
                    module   : _src_form_field_Range_mjs__WEBPACK_IMPORTED_MODULE_10__["default"],
                    flag     : 'temperature',
                    labelText: 'Außen-Temp.',
                    minValue : -20,
                    maxValue : 50
                }, {
                    module : _src_button_Base_mjs__WEBPACK_IMPORTED_MODULE_0__["default"],
                    text   : 'Speichern und Auswerten',
                    ui     : 'secondary',
                    style  : {
                        minHeight   : '50px',
                        marginBottom: '35px'
                    },
                    handler: me.onSaveClick.bind(me)
                }],
                listeners   : {fieldChange: onRangeChange}
            }]
        });
    }

    /**
     * @param {String} config
     * @param {Object} opts
     */
    onConfigChange(config, opts) {
        const processes = Neo.find({ntype: 'process'});

        processes.forEach(process => {
            process[config] = opts.value;
        });
    }

    /**
     * @param {Object} data
     */
    onRangeChange(data) {
        const me                      = this,
              startBattery            = me.down({flag: 'start-battery'}).value,
              endBatteryEl            = me.down({flag: 'end-battery'}),
              endBattery              = endBatteryEl.value,
              startKm                 = me.down({flag: 'start-km'}).value,
              endKmEl                 = me.down({flag: 'end-km'}),
              endKm                   = endKmEl.value,
              additionalInformationEl = me.down({flag: 'additional-information'});

        if (startKm) {
            const startProcess = this.down({flag: 'start-process'});

            startProcess.arrowColor = '#12FE88';
        }
        if (endKm) {
            const startProcess = this.down({flag: 'end-process'});

            startProcess.arrowColor = '#12FE88';
        }

        if ((startKm && !endKm) || endKm <= startKm) {
            endKmEl.value = startKm + 5;
        }
        if (endBattery >= startBattery) {
            endBatteryEl.value = startBattery - 1;
        }

        if (startKm && endKm) {
            const resultEl      = me.down({flag: 'result'}),
                  kwpMaxEl      = me.down({flag: 'max-capacity'}),
                  remainKwhEl   = me.down({flag: 'remain-kWh'}),
                  averageKwhEl  = me.down({flag: 'average-kWh'}),
                  maxCapacityEl = me.down({flag: 'max-capacity'}),
                  batteryDiff   = startBattery - endBattery,
                  kmDiff        = endKm - startKm,
                  kWhUsed       = maxCapacityEl.value * (batteryDiff / 100),
                  resultKm      = (endBattery) * kmDiff / batteryDiff;

            additionalInformationEl.disabled = false;
            resultEl.value = Math.ceil(resultKm);
            remainKwhEl.value = Math.ceil(kwpMaxEl.value * (endBattery / 100));
            averageKwhEl.value = Math.ceil(100 * (kWhUsed / kmDiff));
        } else {
            additionalInformationEl.disabled = true;
        }
    }

    /**
     * Shows a toast
     */
    onSaveClick() {
        const averageKwh = this.down({flag: 'average-kWh'}).value;
        let msg     = `Du hast einen durchschnittlichen Verbrauch von ${averageKwh} kwh/100km.`,
            iconCls = 'fa fa-user-tie',
            title   = 'results',
            ui;

        if (averageKwh > 25) {
            msg = `Du bist seeehr sportlich unterwegs mit ${averageKwh} kWh auf 100km`;
            iconCls = 'fa fa-flag-checkered';
            ui = 'danger';
            title = 'racing';
        } else if (averageKwh < 15) {
            msg = `Du bist sehr umweltbewusst gefahren und hast nur ${averageKwh} kwh/100km verbraucht.`;
            iconCls = 'fa-brands fa-pagelines';
            ui = 'success';
            title = 'ECO';
        }

        Neo.toast({
            appName: this.appName,
            ui     : ui,
            iconCls: iconCls,
            title  : title,
            msg    : msg
        });
    }
}

Neo.setupClass(MainContainer);

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (MainContainer);


/***/ }),

/***/ "./examples/component/process/realWorldExample/app.mjs":
/*!*************************************************************!*\
  !*** ./examples/component/process/realWorldExample/app.mjs ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   onStart: () => (/* binding */ onStart)
/* harmony export */ });
/* harmony import */ var _MainContainer_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MainContainer.mjs */ "./examples/component/process/realWorldExample/MainContainer.mjs");


const onStart = () => Neo.app({
    mainView: _MainContainer_mjs__WEBPACK_IMPORTED_MODULE_0__["default"],
    name    : 'Neo.examples.component.realWorldExample.process'
});

/***/ }),

/***/ "./src/component/Process.mjs":
/*!***********************************!*\
  !*** ./src/component/Process.mjs ***!
  \***********************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _Base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Base.mjs */ "./src/component/Base.mjs");
/* harmony import */ var _util_Array_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../util/Array.mjs */ "./src/util/Array.mjs");



/**
 * @class Neo.component.Process
 * @extends Neo.component.Base
 *
 * @example
 *     {
 *         module: Process,
 *         arrowColor: 'darkred',
 *         items: [{
 *             iconCls: 'fa fa-car',
 *             header: '1. Wunschkennzeichen',
 *             text: 'Lorem ipsum dolor sit amet, consectetuer adipiscing elit...'
 *         }, {
 *             iconCls: 'fa fa-house',
 *             header: '2. Termine',
 *             text: 'Lorem ipsum dolor sit amet, consectetuer adipiscing elit...'
 *         }]
 *     }
 */
class Process extends _Base_mjs__WEBPACK_IMPORTED_MODULE_0__["default"] {
    /**
     * Each item gets an arrow and the content, which gets filled with an item.
     * The slit allows to fade out the sidebar.
     *
     * @member {Object} itemLayout={cls: 'process-step', cn: [{cls: ['arrow', 'white']},{cls: ['slit']},{cls: ['arrow', 'yellow']},{cls: 'process-content', cn: [{cls: ['process-step-icon']},{tag: 'h2', cls: ['process-step-header']},{cls: ['process-step-text']}]}]}
     */
    itemLayout = {
        cls: 'process-step', cn: [
            {cls: ['arrow', 'white']},
            {cls: ['slit']},
            {cls: ['arrow', 'yellow']},
            {
                cls: 'process-content', cn: [
                    {cls: ['process-step-icon']},
                    {tag: 'h2', cls: ['process-step-header']},
                    {cls: ['process-step-text']}
                ]
            }
        ]
    }

    static config = {
        /**
         * @member {String} className='Neo.component.Process'
         * @protected
         */
        className: 'Neo.component.Process',
        /**
         * @member {String} ntype='process'
         * @protected
         */
        ntype: 'process',
        /**
         * @member {String[]} baseCls=['neo-process']
         */
        baseCls: ['neo-process'],

        /**
         * Set the color of the process arrow.
         * Out of the box this is #ffdb4a
         *
         * @member {String|null} arrowColor=null
         */
        arrowColor_: null,
        /**
         * 'true' shows the items from left to right
         * 'false' shows the items from top to bottom
         * There is a minimum width of 700px to show items 'true'
         *
         * @member {Boolean} horizontal=true
         */
        horizontal_: true,
        /**
         * Set the color of the icons.
         * Out of the box this is #ffdb4a
         *
         * @member {String|null} iconColor=null
         */
        iconColor_: null,

        /**
         * Each item will be transferred into the itemLayout
         *
         * @member {Object[]|Object} items=null
         *
         * @example
         *     items: [{
         *         iconCls: 'fa fa-car',
         *         header: '1. First Step',
         *         text: 'Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Maecenas porttitor congue massa. Fusce posuere, magna sed pulvinar ultricies, purus lectus malesuada libero, sit amet commodo magna eros quis urna.'
         *     }, {
         *         iconCls: 'fa fa-house',
         *         header: '2. Second Step',
         *         text: 'Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Maecenas porttitor congue massa. Fusce posuere, magna sed pulvinar ultricies, purus lectus malesuada libero, sit amet commodo magna eros quis urna.'
         *     }]
         */
        items_: null,

        /**
         * vdom definition is used during item creation
         * Do not remove
         *
         * @member {Object} vdom={cn:[]}
         */
        vdom: {cn: []}
    }

    /**
     * Triggered after arrowColor config got changed
     * @param {String} newValue
     * @protected
     */
    afterSetArrowColor(newValue) {
        if (newValue === null) return;

        let style = this.style;

        style['--process-arrow-color'] = newValue + '!important';
        this.style = style;
    }

    /**
     * Triggered after horizontal config got changed
     * @param {Boolean} isHorizontal
     * @protected
     */
    afterSetHorizontal(isHorizontal) {
        let cls         = this.cls,
            positionCls = isHorizontal ? 'neo-process-horizontal' : 'neo-process-vertical',
            removeCls   = !isHorizontal ? 'neo-process-horizontal' : 'neo-process-vertical';

        _util_Array_mjs__WEBPACK_IMPORTED_MODULE_1__["default"].add(cls, positionCls);
        _util_Array_mjs__WEBPACK_IMPORTED_MODULE_1__["default"].remove(cls, removeCls);

        this.cls = cls;
    }

    /**
     * Triggered after iconColor config got changed
     * @param {String} newValue
     * @protected
     */
    afterSetIconColor(newValue) {
        if (newValue === null) return;
        let style = this.style;

        style['--process-icon-color'] = newValue + '!important';

        this.style = style;
    }

    /**
     * Triggered after items config got changed
     * @param {Object[]} items
     * @protected
     */
    afterSetItems(items) {
        if (!(Neo.isArray(items) || Neo.isObject(items))) return;
        if (!Neo.isArray(items)) {
            items = [items];
        }

        let vdomRoot   = this.vdom,
            itemLayout = this.itemLayout;

        items.forEach((newItem) => {
            let curItem = Neo.clone(itemLayout, true),
                content = curItem.cn[3];

            content.cn[0].cls.push(newItem.iconCls);
            content.cn[1].innerHTML = newItem.title;
            content.cn[2].innerHTML = newItem.text;

            _util_Array_mjs__WEBPACK_IMPORTED_MODULE_1__["default"].add(vdomRoot.cn, curItem);
        });
    }
}

Neo.setupClass(Process);

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Process);


/***/ }),

/***/ "./src/form/field/Display.mjs":
/*!************************************!*\
  !*** ./src/form/field/Display.mjs ***!
  \************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _Text_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Text.mjs */ "./src/form/field/Text.mjs");


/**
 * An extended form.field.Text, which is read-only.
 * @class Neo.form.field.Display
 * @extends Neo.form.field.Text
 */
class Display extends _Text_mjs__WEBPACK_IMPORTED_MODULE_0__["default"] {
    static config = {
        /**
         * @member {String} className='Neo.form.field.Display'
         * @protected
         */
        className: 'Neo.form.field.Display',
        /**
         * @member {String} ntype='displayfield'
         * @protected
         */
        ntype: 'displayfield',
        /**
         * @member {String[]} baseCls=['neo-displayfield','neo-textfield']
         */
        baseCls: ['neo-displayfield', 'neo-textfield'],
        /**
         * @member {Boolean} clearable=false
         * @protected
         */
        clearable: false
    }

    /**
     * @param {Object} config
     */
    construct(config) {
        super.construct(config);

        let me      = this,
            inputEl = me.getInputEl();

        inputEl.readonly = 'readonly';
        inputEl.tabindex = '-1';

        me.update();
    }
}

Neo.setupClass(Display);

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Display);


/***/ }),

/***/ "./src/form/field/Range.mjs":
/*!**********************************!*\
  !*** ./src/form/field/Range.mjs ***!
  \**********************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _Number_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Number.mjs */ "./src/form/field/Number.mjs");


/**
 * @class Neo.form.field.Range
 * @extends Neo.form.field.Number
 */
class Range extends _Number_mjs__WEBPACK_IMPORTED_MODULE_0__["default"] {
    /**
     * Removing the debounce for range fields
     * @member {Object} delayable
     * @protected
     * @static
     */
    static delayable = {}

    static config = {
        /**
         * @member {String} className='Neo.form.field.Range'
         * @protected
         */
        className: 'Neo.form.field.Range',
        /**
         * @member {String} ntype='rangefield'
         * @protected
         */
        ntype: 'rangefield',
        /**
         * @member {String[]} baseCls=['neo-rangefield','neo-textfield']
         */
        baseCls: ['neo-rangefield', 'neo-textfield'],
        /**
         * True shows a clear trigger in case the field has a non empty value.
         * @member {Boolean} clearable=false
         */
        clearable: false,
        /**
         * Value for the inputType_ textfield config
         * @member {String} inputType='range'
         */
        inputType: 'range',
        /**
         * If true, shows the result of the slider in the label
         * @member {Boolean} showResultInLabel=false
         */
        showResultInLabel: false,
        /**
         * @member {Array} tickmarks_=[]
         */
        tickmarks_: [],
        /**
         * @member {Boolean} useInputEvent=false
         */
        useInputEvent: false,
        /**
         * Disables the field.Number buttons
         * @member {Boolean} useInputEvent=false
         */
        useSpinButtons: false
    }

    /**
     * @param {Object} config
     */
    construct(config) {
        super.construct(config);

        let me      = this,
            inputEl = me.vdom.cn[2];

        if (me.useInputEvent) {
            me.addDomListeners({
                input: {
                    fn   : me.onInputValueChange,
                    id   : me.vdom.cn[2].id,
                    scope: me
                }
            });
        }

        inputEl.cls = ['neo-rangefield-input']; // replace neo-textfield-input

        me.addValueToLabel();
    }

    /**
     * Triggered after the tickmarks config got changed
     * @param {Array} value
     * @param {Array} oldValue
     * @protected
     */
    afterSetTickmarks(value, oldValue) {
        // todo
    }

    /**
     * Override the NumberField implementation
     * @param {Object} data
     */
    afterSetValue(value, oldValue) {
        this.addValueToLabel();
        super.afterSetValue(value, oldValue);
    }

    /**
     * Update label with value
     */
    addValueToLabel() {
        const me = this;

        if (me.showResultInLabel) {
            me.getLabelEl().innerHTML = `[${me.value}] ` + me.labelText;
        }
    }
}

Neo.setupClass(Range);

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Range);


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2h1bmtzL2FwcC92ZW5kb3JzLWV4YW1wbGVzX2NvbXBvbmVudF9wcm9jZXNzX3JlYWxXb3JsZEV4YW1wbGVfYXBwX21qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFvRTtBQUNRO0FBQ0w7QUFDSztBQUNMO0FBQ0E7QUFDSTtBQUNKO0FBQ0c7QUFDQTtBQUNEO0FBQ0Q7QUFDQTs7QUFFeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsa0VBQXFCO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsdUJBQXVCLG9FQUFRO0FBQy9CO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QixTQUFTO0FBQ1QsdUJBQXVCLGlFQUFTO0FBQ2hDO0FBQ0Esd0JBQXdCO0FBQ3hCLFNBQVM7QUFDVCx1QkFBdUIsaUVBQVM7QUFDaEM7QUFDQSx3QkFBd0I7QUFDeEIsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLG9CQUFvQjs7QUFFN0Q7QUFDQSxTQUFTOztBQUVUO0FBQ0EsMEJBQTBCLCtEQUFTO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLHdCQUF3QiwrREFBUztBQUNqQztBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQSxhQUFhO0FBQ2Isd0JBQXdCLGtFQUFPO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiLDJCQUEyQiwrREFBSTtBQUMvQjtBQUNBLDRCQUE0QixnQ0FBZ0M7QUFDNUQ7QUFDQSwrQkFBK0Isa0VBQVc7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQix1Q0FBdUMsa0VBQVU7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7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cmxkRXhhbXBsZS9NYWluQ29udGFpbmVyLm1qcyIsIndlYnBhY2s6Ly9uZW8ubWpzLy4vZXhhbXBsZXMvY29tcG9uZW50L3Byb2Nlc3MvcmVhbFdvcmxkRXhhbXBsZS9hcHAubWpzIiwid2VicGFjazovL25lby5tanMvLi9zcmMvY29tcG9uZW50L1Byb2Nlc3MubWpzIiwid2VicGFjazovL25lby5tanMvLi9zcmMvZm9ybS9maWVsZC9EaXNwbGF5Lm1qcyIsIndlYnBhY2s6Ly9uZW8ubWpzLy4vc3JjL2Zvcm0vZmllbGQvUmFuZ2UubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCdXR0b24gICAgICAgICAgICAgICAgZnJvbSAnLi4vLi4vLi4vLi4vc3JjL2J1dHRvbi9CYXNlLm1qcyc7XG5pbXBvcnQgQ2hlY2tCb3ggICAgICAgICAgICAgIGZyb20gJy4uLy4uLy4uLy4uL3NyYy9mb3JtL2ZpZWxkL0NoZWNrQm94Lm1qcyc7XG5pbXBvcnQgQ29uZmlndXJhdGlvblZpZXdwb3J0IGZyb20gJy4uLy4uLy4uL0NvbmZpZ3VyYXRpb25WaWV3cG9ydC5tanMnO1xuaW1wb3J0IENvbWJvQm94ICAgICAgICAgICAgICBmcm9tICcuLi8uLi8uLi8uLi9zcmMvZm9ybS9maWVsZC9Db21ib0JveC5tanMnO1xuaW1wb3J0IENvbXBvbmVudCAgICAgICAgICAgICBmcm9tICcuLi8uLi8uLi8uLi9zcmMvY29tcG9uZW50L0Jhc2UubWpzJztcbmltcG9ydCBDb250YWluZXIgICAgICAgICAgICAgZnJvbSAnLi4vLi4vLi4vLi4vc3JjL2NvbnRhaW5lci9CYXNlLm1qcyc7XG5pbXBvcnQgRGlzcGxheUZpZWxkICAgICAgICAgIGZyb20gJy4uLy4uLy4uLy4uL3NyYy9mb3JtL2ZpZWxkL0Rpc3BsYXkubWpzJztcbmltcG9ydCBGb3JtICAgICAgICAgICAgICAgICAgZnJvbSAnLi4vLi4vLi4vLi4vc3JjL2Zvcm0vQ29udGFpbmVyLm1qcyc7XG5pbXBvcnQgTnVtYmVyRmllbGQgICAgICAgICAgIGZyb20gJy4uLy4uLy4uLy4uL3NyYy9mb3JtL2ZpZWxkL051bWJlci5tanMnO1xuaW1wb3J0IFByb2Nlc3MgICAgICAgICAgICAgICBmcm9tICcuLi8uLi8uLi8uLi9zcmMvY29tcG9uZW50L1Byb2Nlc3MubWpzJztcbmltcG9ydCBSYW5nZUZpZWxkICAgICAgICAgICAgZnJvbSAnLi4vLi4vLi4vLi4vc3JjL2Zvcm0vZmllbGQvUmFuZ2UubWpzJztcbmltcG9ydCBUZXh0RmllbGQgICAgICAgICAgICAgZnJvbSAnLi4vLi4vLi4vLi4vc3JjL2Zvcm0vZmllbGQvVGV4dC5tanMnO1xuaW1wb3J0IFRvYXN0ICAgICAgICAgICAgICAgICBmcm9tICcuLi8uLi8uLi8uLi9zcmMvY29tcG9uZW50L1RvYXN0Lm1qcyc7XG5cbi8qKlxuICogQGNsYXNzIE5lby5leGFtcGxlcy5jb21wb25lbnQucHJvY2Vzcy5yZWFsV29ybGRFeGFtcGxlLk1haW5Db250YWluZXJcbiAqIEBleHRlbmRzIE5lby5leGFtcGxlcy5Db25maWd1cmF0aW9uVmlld3BvcnRcbiAqL1xuY2xhc3MgTWFpbkNvbnRhaW5lciBleHRlbmRzIENvbmZpZ3VyYXRpb25WaWV3cG9ydCB7XG4gICAgc3RhdGljIGNvbmZpZyA9IHtcbiAgICAgICAgY2xhc3NOYW1lICAgICAgICAgICA6ICdOZW8uZXhhbXBsZXMuY29tcG9uZW50LnByb2Nlc3MucmVhbFdvcmxkRXhhbXBsZS5NYWluQ29udGFpbmVyJyxcbiAgICAgICAgY29uZmlnSXRlbUxhYmVsV2lkdGg6IDExMCxcbiAgICAgICAgY29uZmlnSXRlbVdpZHRoICAgICA6IDI1MCxcbiAgICAgICAgY29uZmlnUGFuZWxNaW5XaWR0aCA6IDI1MCxcbiAgICAgICAgY29uZmlnUGFuZWxGbGV4ICAgICA6ICdub25lJyxcbiAgICAgICAgbGF5b3V0ICAgICAgICAgICAgICA6IHtudHlwZTogJ2hib3gnLCBhbGlnbjogJ3N0cmV0Y2gnfVxuICAgIH1cblxuICAgIGNyZWF0ZUNvbmZpZ3VyYXRpb25Db21wb25lbnRzKCkge1xuICAgICAgICBsZXQgbWUgPSB0aGlzO1xuXG4gICAgICAgIHJldHVybiBbe1xuICAgICAgICAgICAgbW9kdWxlICAgOiBDaGVja0JveCxcbiAgICAgICAgICAgIGNoZWNrZWQgIDogZmFsc2UsXG4gICAgICAgICAgICB2YWx1ZSAgICA6IDUsXG4gICAgICAgICAgICBsYWJlbFRleHQ6ICdob3Jpem9udGFsJyxcbiAgICAgICAgICAgIGxpc3RlbmVyczoge2NoYW5nZTogbWUub25Db25maWdDaGFuZ2UuYmluZChtZSwgJ2hvcml6b250YWwnKX1cbiAgICAgICAgfSwge1xuICAgICAgICAgICAgbW9kdWxlICAgOiBUZXh0RmllbGQsXG4gICAgICAgICAgICBsYWJlbFRleHQ6ICdhcnJvd0NvbG9yJyxcbiAgICAgICAgICAgIGxpc3RlbmVyczoge2NoYW5nZTogbWUub25Db25maWdDaGFuZ2UuYmluZChtZSwgJ2Fycm93Q29sb3InKX1cbiAgICAgICAgfSwge1xuICAgICAgICAgICAgbW9kdWxlICAgOiBUZXh0RmllbGQsXG4gICAgICAgICAgICBsYWJlbFRleHQ6ICdpY29uQ29sb3InLFxuICAgICAgICAgICAgbGlzdGVuZXJzOiB7Y2hhbmdlOiBtZS5vbkNvbmZpZ0NoYW5nZS5iaW5kKG1lLCAnaWNvbkNvbG9yJyl9XG4gICAgICAgIH1dO1xuICAgIH1cblxuICAgIGNyZWF0ZUV4YW1wbGVDb21wb25lbnQoKSB7XG4gICAgICAgIGNvbnN0IG1lICAgICAgICAgICAgPSB0aGlzLFxuICAgICAgICAgICAgICBvblJhbmdlQ2hhbmdlID0gbWUub25SYW5nZUNoYW5nZS5iaW5kKG1lKSxcbiAgICAgICAgICAgICAgLy8gV2V0dGVyZGF0ZW4gdm9uIEJlcmxpbiBUaWVyZ2FydGVuXG4gICAgICAgICAgICAgIHdlYXRoZXJVcmwgICAgPSAnaHR0cHM6Ly9hcGkub3Blbi1tZXRlby5jb20vdjEvZm9yZWNhc3Q/bGF0aXR1ZGU9NTIuNTEyMzk3NjY3ODEyNTUmbG9uZ2l0dWRlPTEzLjM1NzMzOTQwOTc4NzI3JmN1cnJlbnRfd2VhdGhlcj10cnVlJztcblxuICAgICAgICBsZXQgd2VhdGhlciA9IGZldGNoKHdlYXRoZXJVcmwpLnRoZW4oYXN5bmMgKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICBsZXQgcmVzdWx0ICAgICAgICA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKSxcbiAgICAgICAgICAgICAgICB0ZW1wZXJhdHVyZSAgID0gTWF0aC5jZWlsKHJlc3VsdC5jdXJyZW50X3dlYXRoZXIudGVtcGVyYXR1cmUpLFxuICAgICAgICAgICAgICAgIHRlbXBlcmF0dXJlRWwgPSBtZS5kb3duKHtmbGFnOiAndGVtcGVyYXR1cmUnfSlcblxuICAgICAgICAgICAgdGVtcGVyYXR1cmVFbC52YWx1ZSA9IHRlbXBlcmF0dXJlO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gTmVvLmNyZWF0ZSh7XG4gICAgICAgICAgICBtb2R1bGUgICAgICA6IENvbnRhaW5lcixcbiAgICAgICAgICAgIG1heFdpZHRoICAgIDogNDUwLFxuICAgICAgICAgICAgbWF4SGVpZ2h0ICAgOiAnMTAwJScsXG4gICAgICAgICAgICBzdHlsZSAgICAgICA6IHtcbiAgICAgICAgICAgICAgICBvdmVyZmxvd1k6ICdhdXRvJyxcbiAgICAgICAgICAgICAgICBtYXJnaW4gICA6ICcwIGF1dG8nXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaXRlbURlZmF1bHRzOiB7XG4gICAgICAgICAgICAgICAgaG9yaXpvbnRhbDogZmFsc2VcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpdGVtcyAgICAgICA6IFt7XG4gICAgICAgICAgICAgICAgbW9kdWxlOiBDb21wb25lbnQsXG4gICAgICAgICAgICAgICAgdmRvbSAgOiB7XG4gICAgICAgICAgICAgICAgICAgIGNuOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICB7dGFnOiAnaW1nJywgc3JjOiAnLi9SYW5nZUhlYWRlci5qcGcnLCB3aWR0aDogJzEwMCUnfVxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIG1vZHVsZTogUHJvY2VzcyxcbiAgICAgICAgICAgICAgICBmbGFnICA6ICdzdGFydC1wcm9jZXNzJyxcbiAgICAgICAgICAgICAgICBpdGVtcyA6IFt7XG4gICAgICAgICAgICAgICAgICAgIGljb25DbHM6ICdmYSBmYS1wbGFuZS1kZXBhcnR1cmUnLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZSAgOiAnU3RhcnQgRWluZ2FiZScsXG4gICAgICAgICAgICAgICAgICAgIHRleHQgICA6ICdCYXR0ZXJpZSAlIHVuZCBLaWxvbWV0ZXJzdGFuZCdcbiAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIG1vZHVsZSAgIDogRm9ybSxcbiAgICAgICAgICAgICAgICBoYXNGaWVsZHM6IHRydWUsXG4gICAgICAgICAgICAgICAgbGF5b3V0ICAgOiB7bnR5cGU6ICd2Ym94JywgYWxpZ246ICdzdHJldGNoJ30sXG4gICAgICAgICAgICAgICAgaXRlbXMgICAgOiBbe1xuICAgICAgICAgICAgICAgICAgICBtb2R1bGUgICA6IE51bWJlckZpZWxkLFxuICAgICAgICAgICAgICAgICAgICBmbGFnICAgICA6ICdtYXgtY2FwYWNpdHknLFxuICAgICAgICAgICAgICAgICAgICBsYWJlbFRleHQ6ICdtYXguIEthcGF6aXTDpHQga1doJyxcbiAgICAgICAgICAgICAgICAgICAgbWluVmFsdWUgOiAxLFxuICAgICAgICAgICAgICAgICAgICBtYXhWYWx1ZSA6IDUwMCxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgICAgOiAyOVxuICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgbW9kdWxlICAgICAgICAgICA6IFJhbmdlRmllbGQsXG4gICAgICAgICAgICAgICAgICAgIGZsYWcgICAgICAgICAgICAgOiAnc3RhcnQtYmF0dGVyeScsXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsVGV4dCAgICAgICAgOiAnQmF0dGVyaWUgJScsXG4gICAgICAgICAgICAgICAgICAgIHNob3dSZXN1bHRJbkxhYmVsOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBtaW5WYWx1ZSAgICAgICAgIDogMSxcbiAgICAgICAgICAgICAgICAgICAgbWF4VmFsdWUgICAgICAgICA6IDEwMCxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgICAgICAgICAgICA6IDEwMCxcbiAgICAgICAgICAgICAgICAgICAgbGlzdGVuZXJzICAgICAgICA6IHtjaGFuZ2U6IG9uUmFuZ2VDaGFuZ2V9XG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICBtb2R1bGUgICA6IE51bWJlckZpZWxkLFxuICAgICAgICAgICAgICAgICAgICBmbGFnICAgICA6ICdzdGFydC1rbScsXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsVGV4dDogJ0tpbG9tZXRlcnN0YW5kJyxcbiAgICAgICAgICAgICAgICAgICAgbWluVmFsdWUgOiAwLFxuICAgICAgICAgICAgICAgICAgICBtYXhWYWx1ZSA6IDUwMDAwMFxuICAgICAgICAgICAgICAgIH1dLFxuICAgICAgICAgICAgICAgIGxpc3RlbmVyczoge2ZpZWxkRm9jdXNMZWF2ZTogb25SYW5nZUNoYW5nZX1cbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBtb2R1bGU6IFByb2Nlc3MsXG4gICAgICAgICAgICAgICAgZmxhZyAgOiAnZW5kLXByb2Nlc3MnLFxuICAgICAgICAgICAgICAgIGl0ZW1zIDogW3tcbiAgICAgICAgICAgICAgICAgICAgaWNvbkNsczogJ2ZhIGZhLXBsYW5lLWFycml2YWwnLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZSAgOiAnQW5rdW5mdCBFaW5nYWJlJyxcbiAgICAgICAgICAgICAgICAgICAgdGV4dCAgIDogJ0JhdHRlcmllICUgdW5kIEtpbG9tZXRlcnN0YW5kJ1xuICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgbW9kdWxlICAgOiBGb3JtLFxuICAgICAgICAgICAgICAgIGhhc0ZpZWxkczogdHJ1ZSxcbiAgICAgICAgICAgICAgICBsYXlvdXQgICA6IHtudHlwZTogJ3Zib3gnLCBhbGlnbjogJ3N0cmV0Y2gnfSxcbiAgICAgICAgICAgICAgICBpdGVtcyAgICA6IFt7XG4gICAgICAgICAgICAgICAgICAgIG1vZHVsZSAgICAgICAgICAgOiBSYW5nZUZpZWxkLFxuICAgICAgICAgICAgICAgICAgICBmbGFnICAgICAgICAgICAgIDogJ2VuZC1iYXR0ZXJ5JyxcbiAgICAgICAgICAgICAgICAgICAgbGFiZWxUZXh0ICAgICAgICA6ICdCYXR0ZXJpZSAlJyxcbiAgICAgICAgICAgICAgICAgICAgc2hvd1Jlc3VsdEluTGFiZWw6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG1pblZhbHVlICAgICAgICAgOiAwLFxuICAgICAgICAgICAgICAgICAgICBtYXhWYWx1ZSAgICAgICAgIDogOTksXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlICAgICAgICAgICAgOiAwLFxuICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lcnMgICAgICAgIDoge2NoYW5nZTogb25SYW5nZUNoYW5nZX1cbiAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgIG1vZHVsZSAgIDogTnVtYmVyRmllbGQsXG4gICAgICAgICAgICAgICAgICAgIGZsYWcgICAgIDogJ2VuZC1rbScsXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsVGV4dDogJ0tpbG9tZXRlcnN0YW5kJyxcbiAgICAgICAgICAgICAgICAgICAgbWluVmFsdWUgOiAwLFxuICAgICAgICAgICAgICAgICAgICBtYXhWYWx1ZSA6IDUwMDAwMCxcbiAgICAgICAgICAgICAgICB9XSxcbiAgICAgICAgICAgICAgICBsaXN0ZW5lcnM6IHtmaWVsZEZvY3VzTGVhdmU6IG9uUmFuZ2VDaGFuZ2V9XG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgbW9kdWxlICAgIDogUHJvY2VzcyxcbiAgICAgICAgICAgICAgICBmbGFnICAgICAgOiAncmVzdWx0LXByb2Nlc3MnLFxuICAgICAgICAgICAgICAgIGFycm93Q29sb3I6ICdyZ2IoMjAwIDE1NSAxMiknLFxuICAgICAgICAgICAgICAgIGl0ZW1zICAgICA6IFt7XG4gICAgICAgICAgICAgICAgICAgIGljb25DbHM6ICdmYSBmYS1zcXVhcmUtcG9sbC12ZXJ0aWNhbCcsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlICA6ICdFcmdlYm5pc3NlJyxcbiAgICAgICAgICAgICAgICAgICAgdGV4dCAgIDogJ0VycmVjaG5ldGUgRXJnZWJuaXNzZSdcbiAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIG1vZHVsZSAgIDogRm9ybSxcbiAgICAgICAgICAgICAgICBoYXNGaWVsZHM6IHRydWUsXG4gICAgICAgICAgICAgICAgbGF5b3V0ICAgOiB7bnR5cGU6ICd2Ym94JywgYWxpZ246ICdzdHJldGNoJ30sXG4gICAgICAgICAgICAgICAgbGlzdGVuZXJzOiB7ZmllbGRDaGFuZ2U6IG9uUmFuZ2VDaGFuZ2V9LFxuICAgICAgICAgICAgICAgIGl0ZW1zICAgIDogW3tcbiAgICAgICAgICAgICAgICAgICAgbW9kdWxlICAgOiBEaXNwbGF5RmllbGQsXG4gICAgICAgICAgICAgICAgICAgIGZsYWcgICAgIDogJ3Jlc3VsdCcsXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsVGV4dDogJ1Jlc3QgS2lsb21ldGVyJ1xuICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgbW9kdWxlICAgOiBEaXNwbGF5RmllbGQsXG4gICAgICAgICAgICAgICAgICAgIGZsYWcgICAgIDogJ3JlbWFpbi1rV2gnLFxuICAgICAgICAgICAgICAgICAgICBsYWJlbFRleHQ6ICdSZXN0IGtXaCdcbiAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgIG1vZHVsZSAgIDogRGlzcGxheUZpZWxkLFxuICAgICAgICAgICAgICAgICAgICBmbGFnICAgICA6ICdhdmVyYWdlLWtXaCcsXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsVGV4dDogJ2t3SCBwcm8gMTAwa20nXG4gICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBtb2R1bGUgICAgOiBQcm9jZXNzLFxuICAgICAgICAgICAgICAgIGFycm93Q29sb3I6ICdyZ2IoMjAwIDE1NSAxMiknLFxuICAgICAgICAgICAgICAgIGl0ZW1zICAgICA6IFt7XG4gICAgICAgICAgICAgICAgICAgIGljb25DbHM6ICdmYSBmYS1tYWduaWZ5aW5nLWdsYXNzLWNoYXJ0JyxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGUgIDogJ1p1c8OkdHpsaWNoZSBBbmdhYmVuJyxcbiAgICAgICAgICAgICAgICAgICAgdGV4dCAgIDogJ0bDvHIgZGllIExhbmd6ZWl0YXVzd2VydHVuZydcbiAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIG1vZHVsZSAgICAgIDogRm9ybSxcbiAgICAgICAgICAgICAgICBmbGFnICAgICAgICA6ICdhZGRpdGlvbmFsLWluZm9ybWF0aW9uJyxcbiAgICAgICAgICAgICAgICBkaXNhYmxlZCAgICA6IHRydWUsXG4gICAgICAgICAgICAgICAgbGF5b3V0ICAgICAgOiB7bnR5cGU6ICd2Ym94JywgYWxpZ246ICdzdHJldGNoJ30sXG4gICAgICAgICAgICAgICAgaXRlbURlZmF1bHRzOiB7XG4gICAgICAgICAgICAgICAgICAgIHNob3dSZXN1bHRJbkxhYmVsOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSAgICAgICAgICAgIDogMjBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGl0ZW1zICAgICAgIDogW3tcbiAgICAgICAgICAgICAgICAgICAgbW9kdWxlICAgICAgOiBDb21ib0JveCxcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheUZpZWxkOiAnbmFtZScsXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsVGV4dCAgIDogJ0ZhaHJzdGlsJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgICAgICAgOiAnbm9ybWFsJyxcblxuICAgICAgICAgICAgICAgICAgICBzdG9yZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7c3R5bGU6ICdzcG9ydFN0eWxlJywgIG5hbWU6ICdzcG9ydCcsICBjb2RlOiAnc3BvcnRDb2RlJ30sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3N0eWxlOiAnbm9ybWFsU3R5bGUnLCBuYW1lOiAnbm9ybWFsJywgY29kZTogJ25vcm1hbENvZGUnfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7c3R5bGU6ICdlY29TdHlsZScsICAgIG5hbWU6ICdlY28nLCAgICBjb2RlOiAnZWNvQ29kZSd9LFxuICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtuYW1lOiAnc3R5bGUnLCB0eXBlOiAnU3RyaW5nJ30sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtuYW1lOiAnbmFtZScsICB0eXBlOiAnU3RyaW5nJ30sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtuYW1lOiAnY29kZScsICB0eXBlOiAnU3RyaW5nJ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgIG1vZHVsZSAgIDogUmFuZ2VGaWVsZCxcbiAgICAgICAgICAgICAgICAgICAgZmxhZyAgICAgOiAnaGlnaHdheScsXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsVGV4dDogJ0F1dG9iYWhuICUnLFxuICAgICAgICAgICAgICAgICAgICBtaW5WYWx1ZSA6IDAsXG4gICAgICAgICAgICAgICAgICAgIG1heFZhbHVlIDogMTAwLFxuICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgbW9kdWxlICAgOiBSYW5nZUZpZWxkLFxuICAgICAgICAgICAgICAgICAgICBmbGFnICAgICA6ICd0ZW1wZXJhdHVyZScsXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsVGV4dDogJ0F1w59lbi1UZW1wLicsXG4gICAgICAgICAgICAgICAgICAgIG1pblZhbHVlIDogLTIwLFxuICAgICAgICAgICAgICAgICAgICBtYXhWYWx1ZSA6IDUwXG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICBtb2R1bGUgOiBCdXR0b24sXG4gICAgICAgICAgICAgICAgICAgIHRleHQgICA6ICdTcGVpY2hlcm4gdW5kIEF1c3dlcnRlbicsXG4gICAgICAgICAgICAgICAgICAgIHVpICAgICA6ICdzZWNvbmRhcnknLFxuICAgICAgICAgICAgICAgICAgICBzdHlsZSAgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5IZWlnaHQgICA6ICc1MHB4JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbkJvdHRvbTogJzM1cHgnXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZXI6IG1lLm9uU2F2ZUNsaWNrLmJpbmQobWUpXG4gICAgICAgICAgICAgICAgfV0sXG4gICAgICAgICAgICAgICAgbGlzdGVuZXJzICAgOiB7ZmllbGRDaGFuZ2U6IG9uUmFuZ2VDaGFuZ2V9XG4gICAgICAgICAgICB9XVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gY29uZmlnXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdHNcbiAgICAgKi9cbiAgICBvbkNvbmZpZ0NoYW5nZShjb25maWcsIG9wdHMpIHtcbiAgICAgICAgY29uc3QgcHJvY2Vzc2VzID0gTmVvLmZpbmQoe250eXBlOiAncHJvY2Vzcyd9KTtcblxuICAgICAgICBwcm9jZXNzZXMuZm9yRWFjaChwcm9jZXNzID0+IHtcbiAgICAgICAgICAgIHByb2Nlc3NbY29uZmlnXSA9IG9wdHMudmFsdWU7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhXG4gICAgICovXG4gICAgb25SYW5nZUNoYW5nZShkYXRhKSB7XG4gICAgICAgIGNvbnN0IG1lICAgICAgICAgICAgICAgICAgICAgID0gdGhpcyxcbiAgICAgICAgICAgICAgc3RhcnRCYXR0ZXJ5ICAgICAgICAgICAgPSBtZS5kb3duKHtmbGFnOiAnc3RhcnQtYmF0dGVyeSd9KS52YWx1ZSxcbiAgICAgICAgICAgICAgZW5kQmF0dGVyeUVsICAgICAgICAgICAgPSBtZS5kb3duKHtmbGFnOiAnZW5kLWJhdHRlcnknfSksXG4gICAgICAgICAgICAgIGVuZEJhdHRlcnkgICAgICAgICAgICAgID0gZW5kQmF0dGVyeUVsLnZhbHVlLFxuICAgICAgICAgICAgICBzdGFydEttICAgICAgICAgICAgICAgICA9IG1lLmRvd24oe2ZsYWc6ICdzdGFydC1rbSd9KS52YWx1ZSxcbiAgICAgICAgICAgICAgZW5kS21FbCAgICAgICAgICAgICAgICAgPSBtZS5kb3duKHtmbGFnOiAnZW5kLWttJ30pLFxuICAgICAgICAgICAgICBlbmRLbSAgICAgICAgICAgICAgICAgICA9IGVuZEttRWwudmFsdWUsXG4gICAgICAgICAgICAgIGFkZGl0aW9uYWxJbmZvcm1hdGlvbkVsID0gbWUuZG93bih7ZmxhZzogJ2FkZGl0aW9uYWwtaW5mb3JtYXRpb24nfSk7XG5cbiAgICAgICAgaWYgKHN0YXJ0S20pIHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0UHJvY2VzcyA9IHRoaXMuZG93bih7ZmxhZzogJ3N0YXJ0LXByb2Nlc3MnfSk7XG5cbiAgICAgICAgICAgIHN0YXJ0UHJvY2Vzcy5hcnJvd0NvbG9yID0gJyMxMkZFODgnO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlbmRLbSkge1xuICAgICAgICAgICAgY29uc3Qgc3RhcnRQcm9jZXNzID0gdGhpcy5kb3duKHtmbGFnOiAnZW5kLXByb2Nlc3MnfSk7XG5cbiAgICAgICAgICAgIHN0YXJ0UHJvY2Vzcy5hcnJvd0NvbG9yID0gJyMxMkZFODgnO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKChzdGFydEttICYmICFlbmRLbSkgfHwgZW5kS20gPD0gc3RhcnRLbSkge1xuICAgICAgICAgICAgZW5kS21FbC52YWx1ZSA9IHN0YXJ0S20gKyA1O1xuICAgICAgICB9XG4gICAgICAgIGlmIChlbmRCYXR0ZXJ5ID49IHN0YXJ0QmF0dGVyeSkge1xuICAgICAgICAgICAgZW5kQmF0dGVyeUVsLnZhbHVlID0gc3RhcnRCYXR0ZXJ5IC0gMTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzdGFydEttICYmIGVuZEttKSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHRFbCAgICAgID0gbWUuZG93bih7ZmxhZzogJ3Jlc3VsdCd9KSxcbiAgICAgICAgICAgICAgICAgIGt3cE1heEVsICAgICAgPSBtZS5kb3duKHtmbGFnOiAnbWF4LWNhcGFjaXR5J30pLFxuICAgICAgICAgICAgICAgICAgcmVtYWluS3doRWwgICA9IG1lLmRvd24oe2ZsYWc6ICdyZW1haW4ta1doJ30pLFxuICAgICAgICAgICAgICAgICAgYXZlcmFnZUt3aEVsICA9IG1lLmRvd24oe2ZsYWc6ICdhdmVyYWdlLWtXaCd9KSxcbiAgICAgICAgICAgICAgICAgIG1heENhcGFjaXR5RWwgPSBtZS5kb3duKHtmbGFnOiAnbWF4LWNhcGFjaXR5J30pLFxuICAgICAgICAgICAgICAgICAgYmF0dGVyeURpZmYgICA9IHN0YXJ0QmF0dGVyeSAtIGVuZEJhdHRlcnksXG4gICAgICAgICAgICAgICAgICBrbURpZmYgICAgICAgID0gZW5kS20gLSBzdGFydEttLFxuICAgICAgICAgICAgICAgICAga1doVXNlZCAgICAgICA9IG1heENhcGFjaXR5RWwudmFsdWUgKiAoYmF0dGVyeURpZmYgLyAxMDApLFxuICAgICAgICAgICAgICAgICAgcmVzdWx0S20gICAgICA9IChlbmRCYXR0ZXJ5KSAqIGttRGlmZiAvIGJhdHRlcnlEaWZmO1xuXG4gICAgICAgICAgICBhZGRpdGlvbmFsSW5mb3JtYXRpb25FbC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgcmVzdWx0RWwudmFsdWUgPSBNYXRoLmNlaWwocmVzdWx0S20pO1xuICAgICAgICAgICAgcmVtYWluS3doRWwudmFsdWUgPSBNYXRoLmNlaWwoa3dwTWF4RWwudmFsdWUgKiAoZW5kQmF0dGVyeSAvIDEwMCkpO1xuICAgICAgICAgICAgYXZlcmFnZUt3aEVsLnZhbHVlID0gTWF0aC5jZWlsKDEwMCAqIChrV2hVc2VkIC8ga21EaWZmKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhZGRpdGlvbmFsSW5mb3JtYXRpb25FbC5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTaG93cyBhIHRvYXN0XG4gICAgICovXG4gICAgb25TYXZlQ2xpY2soKSB7XG4gICAgICAgIGNvbnN0IGF2ZXJhZ2VLd2ggPSB0aGlzLmRvd24oe2ZsYWc6ICdhdmVyYWdlLWtXaCd9KS52YWx1ZTtcbiAgICAgICAgbGV0IG1zZyAgICAgPSBgRHUgaGFzdCBlaW5lbiBkdXJjaHNjaG5pdHRsaWNoZW4gVmVyYnJhdWNoIHZvbiAke2F2ZXJhZ2VLd2h9IGt3aC8xMDBrbS5gLFxuICAgICAgICAgICAgaWNvbkNscyA9ICdmYSBmYS11c2VyLXRpZScsXG4gICAgICAgICAgICB0aXRsZSAgID0gJ3Jlc3VsdHMnLFxuICAgICAgICAgICAgdWk7XG5cbiAgICAgICAgaWYgKGF2ZXJhZ2VLd2ggPiAyNSkge1xuICAgICAgICAgICAgbXNnID0gYER1IGJpc3Qgc2VlZWhyIHNwb3J0bGljaCB1bnRlcndlZ3MgbWl0ICR7YXZlcmFnZUt3aH0ga1doIGF1ZiAxMDBrbWA7XG4gICAgICAgICAgICBpY29uQ2xzID0gJ2ZhIGZhLWZsYWctY2hlY2tlcmVkJztcbiAgICAgICAgICAgIHVpID0gJ2Rhbmdlcic7XG4gICAgICAgICAgICB0aXRsZSA9ICdyYWNpbmcnO1xuICAgICAgICB9IGVsc2UgaWYgKGF2ZXJhZ2VLd2ggPCAxNSkge1xuICAgICAgICAgICAgbXNnID0gYER1IGJpc3Qgc2VociB1bXdlbHRiZXd1c3N0IGdlZmFocmVuIHVuZCBoYXN0IG51ciAke2F2ZXJhZ2VLd2h9IGt3aC8xMDBrbSB2ZXJicmF1Y2h0LmA7XG4gICAgICAgICAgICBpY29uQ2xzID0gJ2ZhLWJyYW5kcyBmYS1wYWdlbGluZXMnO1xuICAgICAgICAgICAgdWkgPSAnc3VjY2Vzcyc7XG4gICAgICAgICAgICB0aXRsZSA9ICdFQ08nO1xuICAgICAgICB9XG5cbiAgICAgICAgTmVvLnRvYXN0KHtcbiAgICAgICAgICAgIGFwcE5hbWU6IHRoaXMuYXBwTmFtZSxcbiAgICAgICAgICAgIHVpICAgICA6IHVpLFxuICAgICAgICAgICAgaWNvbkNsczogaWNvbkNscyxcbiAgICAgICAgICAgIHRpdGxlICA6IHRpdGxlLFxuICAgICAgICAgICAgbXNnICAgIDogbXNnXG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuTmVvLnNldHVwQ2xhc3MoTWFpbkNvbnRhaW5lcik7XG5cbmV4cG9ydCBkZWZhdWx0IE1haW5Db250YWluZXI7XG4iLCJpbXBvcnQgTWFpbkNvbnRhaW5lciBmcm9tICcuL01haW5Db250YWluZXIubWpzJztcblxuZXhwb3J0IGNvbnN0IG9uU3RhcnQgPSAoKSA9PiBOZW8uYXBwKHtcbiAgICBtYWluVmlldzogTWFpbkNvbnRhaW5lcixcbiAgICBuYW1lICAgIDogJ05lby5leGFtcGxlcy5jb21wb25lbnQucmVhbFdvcmxkRXhhbXBsZS5wcm9jZXNzJ1xufSk7IiwiaW1wb3J0IEJhc2UgICAgIGZyb20gJy4vQmFzZS5tanMnO1xuaW1wb3J0IE5lb0FycmF5IGZyb20gJy4uL3V0aWwvQXJyYXkubWpzJztcblxuLyoqXG4gKiBAY2xhc3MgTmVvLmNvbXBvbmVudC5Qcm9jZXNzXG4gKiBAZXh0ZW5kcyBOZW8uY29tcG9uZW50LkJhc2VcbiAqXG4gKiBAZXhhbXBsZVxuICogICAgIHtcbiAqICAgICAgICAgbW9kdWxlOiBQcm9jZXNzLFxuICogICAgICAgICBhcnJvd0NvbG9yOiAnZGFya3JlZCcsXG4gKiAgICAgICAgIGl0ZW1zOiBbe1xuICogICAgICAgICAgICAgaWNvbkNsczogJ2ZhIGZhLWNhcicsXG4gKiAgICAgICAgICAgICBoZWFkZXI6ICcxLiBXdW5zY2hrZW5uemVpY2hlbicsXG4gKiAgICAgICAgICAgICB0ZXh0OiAnTG9yZW0gaXBzdW0gZG9sb3Igc2l0IGFtZXQsIGNvbnNlY3RldHVlciBhZGlwaXNjaW5nIGVsaXQuLi4nXG4gKiAgICAgICAgIH0sIHtcbiAqICAgICAgICAgICAgIGljb25DbHM6ICdmYSBmYS1ob3VzZScsXG4gKiAgICAgICAgICAgICBoZWFkZXI6ICcyLiBUZXJtaW5lJyxcbiAqICAgICAgICAgICAgIHRleHQ6ICdMb3JlbSBpcHN1bSBkb2xvciBzaXQgYW1ldCwgY29uc2VjdGV0dWVyIGFkaXBpc2NpbmcgZWxpdC4uLidcbiAqICAgICAgICAgfV1cbiAqICAgICB9XG4gKi9cbmNsYXNzIFByb2Nlc3MgZXh0ZW5kcyBCYXNlIHtcbiAgICAvKipcbiAgICAgKiBFYWNoIGl0ZW0gZ2V0cyBhbiBhcnJvdyBhbmQgdGhlIGNvbnRlbnQsIHdoaWNoIGdldHMgZmlsbGVkIHdpdGggYW4gaXRlbS5cbiAgICAgKiBUaGUgc2xpdCBhbGxvd3MgdG8gZmFkZSBvdXQgdGhlIHNpZGViYXIuXG4gICAgICpcbiAgICAgKiBAbWVtYmVyIHtPYmplY3R9IGl0ZW1MYXlvdXQ9e2NsczogJ3Byb2Nlc3Mtc3RlcCcsIGNuOiBbe2NsczogWydhcnJvdycsICd3aGl0ZSddfSx7Y2xzOiBbJ3NsaXQnXX0se2NsczogWydhcnJvdycsICd5ZWxsb3cnXX0se2NsczogJ3Byb2Nlc3MtY29udGVudCcsIGNuOiBbe2NsczogWydwcm9jZXNzLXN0ZXAtaWNvbiddfSx7dGFnOiAnaDInLCBjbHM6IFsncHJvY2Vzcy1zdGVwLWhlYWRlciddfSx7Y2xzOiBbJ3Byb2Nlc3Mtc3RlcC10ZXh0J119XX1dfVxuICAgICAqL1xuICAgIGl0ZW1MYXlvdXQgPSB7XG4gICAgICAgIGNsczogJ3Byb2Nlc3Mtc3RlcCcsIGNuOiBbXG4gICAgICAgICAgICB7Y2xzOiBbJ2Fycm93JywgJ3doaXRlJ119LFxuICAgICAgICAgICAge2NsczogWydzbGl0J119LFxuICAgICAgICAgICAge2NsczogWydhcnJvdycsICd5ZWxsb3cnXX0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2xzOiAncHJvY2Vzcy1jb250ZW50JywgY246IFtcbiAgICAgICAgICAgICAgICAgICAge2NsczogWydwcm9jZXNzLXN0ZXAtaWNvbiddfSxcbiAgICAgICAgICAgICAgICAgICAge3RhZzogJ2gyJywgY2xzOiBbJ3Byb2Nlc3Mtc3RlcC1oZWFkZXInXX0sXG4gICAgICAgICAgICAgICAgICAgIHtjbHM6IFsncHJvY2Vzcy1zdGVwLXRleHQnXX1cbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICB9XG5cbiAgICBzdGF0aWMgY29uZmlnID0ge1xuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfSBjbGFzc05hbWU9J05lby5jb21wb25lbnQuUHJvY2VzcydcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgY2xhc3NOYW1lOiAnTmVvLmNvbXBvbmVudC5Qcm9jZXNzJyxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ30gbnR5cGU9J3Byb2Nlc3MnXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIG50eXBlOiAncHJvY2VzcycsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtTdHJpbmdbXX0gYmFzZUNscz1bJ25lby1wcm9jZXNzJ11cbiAgICAgICAgICovXG4gICAgICAgIGJhc2VDbHM6IFsnbmVvLXByb2Nlc3MnXSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0IHRoZSBjb2xvciBvZiB0aGUgcHJvY2VzcyBhcnJvdy5cbiAgICAgICAgICogT3V0IG9mIHRoZSBib3ggdGhpcyBpcyAjZmZkYjRhXG4gICAgICAgICAqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ3xudWxsfSBhcnJvd0NvbG9yPW51bGxcbiAgICAgICAgICovXG4gICAgICAgIGFycm93Q29sb3JfOiBudWxsLFxuICAgICAgICAvKipcbiAgICAgICAgICogJ3RydWUnIHNob3dzIHRoZSBpdGVtcyBmcm9tIGxlZnQgdG8gcmlnaHRcbiAgICAgICAgICogJ2ZhbHNlJyBzaG93cyB0aGUgaXRlbXMgZnJvbSB0b3AgdG8gYm90dG9tXG4gICAgICAgICAqIFRoZXJlIGlzIGEgbWluaW11bSB3aWR0aCBvZiA3MDBweCB0byBzaG93IGl0ZW1zICd0cnVlJ1xuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtCb29sZWFufSBob3Jpem9udGFsPXRydWVcbiAgICAgICAgICovXG4gICAgICAgIGhvcml6b250YWxfOiB0cnVlLFxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0IHRoZSBjb2xvciBvZiB0aGUgaWNvbnMuXG4gICAgICAgICAqIE91dCBvZiB0aGUgYm94IHRoaXMgaXMgI2ZmZGI0YVxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtTdHJpbmd8bnVsbH0gaWNvbkNvbG9yPW51bGxcbiAgICAgICAgICovXG4gICAgICAgIGljb25Db2xvcl86IG51bGwsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVhY2ggaXRlbSB3aWxsIGJlIHRyYW5zZmVycmVkIGludG8gdGhlIGl0ZW1MYXlvdXRcbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7T2JqZWN0W118T2JqZWN0fSBpdGVtcz1udWxsXG4gICAgICAgICAqXG4gICAgICAgICAqIEBleGFtcGxlXG4gICAgICAgICAqICAgICBpdGVtczogW3tcbiAgICAgICAgICogICAgICAgICBpY29uQ2xzOiAnZmEgZmEtY2FyJyxcbiAgICAgICAgICogICAgICAgICBoZWFkZXI6ICcxLiBGaXJzdCBTdGVwJyxcbiAgICAgICAgICogICAgICAgICB0ZXh0OiAnTG9yZW0gaXBzdW0gZG9sb3Igc2l0IGFtZXQsIGNvbnNlY3RldHVlciBhZGlwaXNjaW5nIGVsaXQuIE1hZWNlbmFzIHBvcnR0aXRvciBjb25ndWUgbWFzc2EuIEZ1c2NlIHBvc3VlcmUsIG1hZ25hIHNlZCBwdWx2aW5hciB1bHRyaWNpZXMsIHB1cnVzIGxlY3R1cyBtYWxlc3VhZGEgbGliZXJvLCBzaXQgYW1ldCBjb21tb2RvIG1hZ25hIGVyb3MgcXVpcyB1cm5hLidcbiAgICAgICAgICogICAgIH0sIHtcbiAgICAgICAgICogICAgICAgICBpY29uQ2xzOiAnZmEgZmEtaG91c2UnLFxuICAgICAgICAgKiAgICAgICAgIGhlYWRlcjogJzIuIFNlY29uZCBTdGVwJyxcbiAgICAgICAgICogICAgICAgICB0ZXh0OiAnTG9yZW0gaXBzdW0gZG9sb3Igc2l0IGFtZXQsIGNvbnNlY3RldHVlciBhZGlwaXNjaW5nIGVsaXQuIE1hZWNlbmFzIHBvcnR0aXRvciBjb25ndWUgbWFzc2EuIEZ1c2NlIHBvc3VlcmUsIG1hZ25hIHNlZCBwdWx2aW5hciB1bHRyaWNpZXMsIHB1cnVzIGxlY3R1cyBtYWxlc3VhZGEgbGliZXJvLCBzaXQgYW1ldCBjb21tb2RvIG1hZ25hIGVyb3MgcXVpcyB1cm5hLidcbiAgICAgICAgICogICAgIH1dXG4gICAgICAgICAqL1xuICAgICAgICBpdGVtc186IG51bGwsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHZkb20gZGVmaW5pdGlvbiBpcyB1c2VkIGR1cmluZyBpdGVtIGNyZWF0aW9uXG4gICAgICAgICAqIERvIG5vdCByZW1vdmVcbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7T2JqZWN0fSB2ZG9tPXtjbjpbXX1cbiAgICAgICAgICovXG4gICAgICAgIHZkb206IHtjbjogW119XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIGFmdGVyIGFycm93Q29sb3IgY29uZmlnIGdvdCBjaGFuZ2VkXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG5ld1ZhbHVlXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIGFmdGVyU2V0QXJyb3dDb2xvcihuZXdWYWx1ZSkge1xuICAgICAgICBpZiAobmV3VmFsdWUgPT09IG51bGwpIHJldHVybjtcblxuICAgICAgICBsZXQgc3R5bGUgPSB0aGlzLnN0eWxlO1xuXG4gICAgICAgIHN0eWxlWyctLXByb2Nlc3MtYXJyb3ctY29sb3InXSA9IG5ld1ZhbHVlICsgJyFpbXBvcnRhbnQnO1xuICAgICAgICB0aGlzLnN0eWxlID0gc3R5bGU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIGFmdGVyIGhvcml6b250YWwgY29uZmlnIGdvdCBjaGFuZ2VkXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBpc0hvcml6b250YWxcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgYWZ0ZXJTZXRIb3Jpem9udGFsKGlzSG9yaXpvbnRhbCkge1xuICAgICAgICBsZXQgY2xzICAgICAgICAgPSB0aGlzLmNscyxcbiAgICAgICAgICAgIHBvc2l0aW9uQ2xzID0gaXNIb3Jpem9udGFsID8gJ25lby1wcm9jZXNzLWhvcml6b250YWwnIDogJ25lby1wcm9jZXNzLXZlcnRpY2FsJyxcbiAgICAgICAgICAgIHJlbW92ZUNscyAgID0gIWlzSG9yaXpvbnRhbCA/ICduZW8tcHJvY2Vzcy1ob3Jpem9udGFsJyA6ICduZW8tcHJvY2Vzcy12ZXJ0aWNhbCc7XG5cbiAgICAgICAgTmVvQXJyYXkuYWRkKGNscywgcG9zaXRpb25DbHMpO1xuICAgICAgICBOZW9BcnJheS5yZW1vdmUoY2xzLCByZW1vdmVDbHMpO1xuXG4gICAgICAgIHRoaXMuY2xzID0gY2xzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCBhZnRlciBpY29uQ29sb3IgY29uZmlnIGdvdCBjaGFuZ2VkXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG5ld1ZhbHVlXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIGFmdGVyU2V0SWNvbkNvbG9yKG5ld1ZhbHVlKSB7XG4gICAgICAgIGlmIChuZXdWYWx1ZSA9PT0gbnVsbCkgcmV0dXJuO1xuICAgICAgICBsZXQgc3R5bGUgPSB0aGlzLnN0eWxlO1xuXG4gICAgICAgIHN0eWxlWyctLXByb2Nlc3MtaWNvbi1jb2xvciddID0gbmV3VmFsdWUgKyAnIWltcG9ydGFudCc7XG5cbiAgICAgICAgdGhpcy5zdHlsZSA9IHN0eWxlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCBhZnRlciBpdGVtcyBjb25maWcgZ290IGNoYW5nZWRcbiAgICAgKiBAcGFyYW0ge09iamVjdFtdfSBpdGVtc1xuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBhZnRlclNldEl0ZW1zKGl0ZW1zKSB7XG4gICAgICAgIGlmICghKE5lby5pc0FycmF5KGl0ZW1zKSB8fCBOZW8uaXNPYmplY3QoaXRlbXMpKSkgcmV0dXJuO1xuICAgICAgICBpZiAoIU5lby5pc0FycmF5KGl0ZW1zKSkge1xuICAgICAgICAgICAgaXRlbXMgPSBbaXRlbXNdO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHZkb21Sb290ICAgPSB0aGlzLnZkb20sXG4gICAgICAgICAgICBpdGVtTGF5b3V0ID0gdGhpcy5pdGVtTGF5b3V0O1xuXG4gICAgICAgIGl0ZW1zLmZvckVhY2goKG5ld0l0ZW0pID0+IHtcbiAgICAgICAgICAgIGxldCBjdXJJdGVtID0gTmVvLmNsb25lKGl0ZW1MYXlvdXQsIHRydWUpLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBjdXJJdGVtLmNuWzNdO1xuXG4gICAgICAgICAgICBjb250ZW50LmNuWzBdLmNscy5wdXNoKG5ld0l0ZW0uaWNvbkNscyk7XG4gICAgICAgICAgICBjb250ZW50LmNuWzFdLmlubmVySFRNTCA9IG5ld0l0ZW0udGl0bGU7XG4gICAgICAgICAgICBjb250ZW50LmNuWzJdLmlubmVySFRNTCA9IG5ld0l0ZW0udGV4dDtcblxuICAgICAgICAgICAgTmVvQXJyYXkuYWRkKHZkb21Sb290LmNuLCBjdXJJdGVtKTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5OZW8uc2V0dXBDbGFzcyhQcm9jZXNzKTtcblxuZXhwb3J0IGRlZmF1bHQgUHJvY2VzcztcbiIsImltcG9ydCBUZXh0IGZyb20gJy4vVGV4dC5tanMnO1xuXG4vKipcbiAqIEFuIGV4dGVuZGVkIGZvcm0uZmllbGQuVGV4dCwgd2hpY2ggaXMgcmVhZC1vbmx5LlxuICogQGNsYXNzIE5lby5mb3JtLmZpZWxkLkRpc3BsYXlcbiAqIEBleHRlbmRzIE5lby5mb3JtLmZpZWxkLlRleHRcbiAqL1xuY2xhc3MgRGlzcGxheSBleHRlbmRzIFRleHQge1xuICAgIHN0YXRpYyBjb25maWcgPSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtTdHJpbmd9IGNsYXNzTmFtZT0nTmVvLmZvcm0uZmllbGQuRGlzcGxheSdcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgY2xhc3NOYW1lOiAnTmVvLmZvcm0uZmllbGQuRGlzcGxheScsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtTdHJpbmd9IG50eXBlPSdkaXNwbGF5ZmllbGQnXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIG50eXBlOiAnZGlzcGxheWZpZWxkJyxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ1tdfSBiYXNlQ2xzPVsnbmVvLWRpc3BsYXlmaWVsZCcsJ25lby10ZXh0ZmllbGQnXVxuICAgICAgICAgKi9cbiAgICAgICAgYmFzZUNsczogWyduZW8tZGlzcGxheWZpZWxkJywgJ25lby10ZXh0ZmllbGQnXSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge0Jvb2xlYW59IGNsZWFyYWJsZT1mYWxzZVxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICBjbGVhcmFibGU6IGZhbHNlXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZ1xuICAgICAqL1xuICAgIGNvbnN0cnVjdChjb25maWcpIHtcbiAgICAgICAgc3VwZXIuY29uc3RydWN0KGNvbmZpZyk7XG5cbiAgICAgICAgbGV0IG1lICAgICAgPSB0aGlzLFxuICAgICAgICAgICAgaW5wdXRFbCA9IG1lLmdldElucHV0RWwoKTtcblxuICAgICAgICBpbnB1dEVsLnJlYWRvbmx5ID0gJ3JlYWRvbmx5JztcbiAgICAgICAgaW5wdXRFbC50YWJpbmRleCA9ICctMSc7XG5cbiAgICAgICAgbWUudXBkYXRlKCk7XG4gICAgfVxufVxuXG5OZW8uc2V0dXBDbGFzcyhEaXNwbGF5KTtcblxuZXhwb3J0IGRlZmF1bHQgRGlzcGxheTtcbiIsImltcG9ydCBOdW1iZXIgZnJvbSAnLi9OdW1iZXIubWpzJztcblxuLyoqXG4gKiBAY2xhc3MgTmVvLmZvcm0uZmllbGQuUmFuZ2VcbiAqIEBleHRlbmRzIE5lby5mb3JtLmZpZWxkLk51bWJlclxuICovXG5jbGFzcyBSYW5nZSBleHRlbmRzIE51bWJlciB7XG4gICAgLyoqXG4gICAgICogUmVtb3ZpbmcgdGhlIGRlYm91bmNlIGZvciByYW5nZSBmaWVsZHNcbiAgICAgKiBAbWVtYmVyIHtPYmplY3R9IGRlbGF5YWJsZVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAc3RhdGljXG4gICAgICovXG4gICAgc3RhdGljIGRlbGF5YWJsZSA9IHt9XG5cbiAgICBzdGF0aWMgY29uZmlnID0ge1xuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfSBjbGFzc05hbWU9J05lby5mb3JtLmZpZWxkLlJhbmdlJ1xuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICBjbGFzc05hbWU6ICdOZW8uZm9ybS5maWVsZC5SYW5nZScsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtTdHJpbmd9IG50eXBlPSdyYW5nZWZpZWxkJ1xuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICBudHlwZTogJ3JhbmdlZmllbGQnLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nW119IGJhc2VDbHM9WyduZW8tcmFuZ2VmaWVsZCcsJ25lby10ZXh0ZmllbGQnXVxuICAgICAgICAgKi9cbiAgICAgICAgYmFzZUNsczogWyduZW8tcmFuZ2VmaWVsZCcsICduZW8tdGV4dGZpZWxkJ10sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUcnVlIHNob3dzIGEgY2xlYXIgdHJpZ2dlciBpbiBjYXNlIHRoZSBmaWVsZCBoYXMgYSBub24gZW1wdHkgdmFsdWUuXG4gICAgICAgICAqIEBtZW1iZXIge0Jvb2xlYW59IGNsZWFyYWJsZT1mYWxzZVxuICAgICAgICAgKi9cbiAgICAgICAgY2xlYXJhYmxlOiBmYWxzZSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFZhbHVlIGZvciB0aGUgaW5wdXRUeXBlXyB0ZXh0ZmllbGQgY29uZmlnXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ30gaW5wdXRUeXBlPSdyYW5nZSdcbiAgICAgICAgICovXG4gICAgICAgIGlucHV0VHlwZTogJ3JhbmdlJyxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIHRydWUsIHNob3dzIHRoZSByZXN1bHQgb2YgdGhlIHNsaWRlciBpbiB0aGUgbGFiZWxcbiAgICAgICAgICogQG1lbWJlciB7Qm9vbGVhbn0gc2hvd1Jlc3VsdEluTGFiZWw9ZmFsc2VcbiAgICAgICAgICovXG4gICAgICAgIHNob3dSZXN1bHRJbkxhYmVsOiBmYWxzZSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge0FycmF5fSB0aWNrbWFya3NfPVtdXG4gICAgICAgICAqL1xuICAgICAgICB0aWNrbWFya3NfOiBbXSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge0Jvb2xlYW59IHVzZUlucHV0RXZlbnQ9ZmFsc2VcbiAgICAgICAgICovXG4gICAgICAgIHVzZUlucHV0RXZlbnQ6IGZhbHNlLFxuICAgICAgICAvKipcbiAgICAgICAgICogRGlzYWJsZXMgdGhlIGZpZWxkLk51bWJlciBidXR0b25zXG4gICAgICAgICAqIEBtZW1iZXIge0Jvb2xlYW59IHVzZUlucHV0RXZlbnQ9ZmFsc2VcbiAgICAgICAgICovXG4gICAgICAgIHVzZVNwaW5CdXR0b25zOiBmYWxzZVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWdcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3QoY29uZmlnKSB7XG4gICAgICAgIHN1cGVyLmNvbnN0cnVjdChjb25maWcpO1xuXG4gICAgICAgIGxldCBtZSAgICAgID0gdGhpcyxcbiAgICAgICAgICAgIGlucHV0RWwgPSBtZS52ZG9tLmNuWzJdO1xuXG4gICAgICAgIGlmIChtZS51c2VJbnB1dEV2ZW50KSB7XG4gICAgICAgICAgICBtZS5hZGREb21MaXN0ZW5lcnMoe1xuICAgICAgICAgICAgICAgIGlucHV0OiB7XG4gICAgICAgICAgICAgICAgICAgIGZuICAgOiBtZS5vbklucHV0VmFsdWVDaGFuZ2UsXG4gICAgICAgICAgICAgICAgICAgIGlkICAgOiBtZS52ZG9tLmNuWzJdLmlkLFxuICAgICAgICAgICAgICAgICAgICBzY29wZTogbWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlucHV0RWwuY2xzID0gWyduZW8tcmFuZ2VmaWVsZC1pbnB1dCddOyAvLyByZXBsYWNlIG5lby10ZXh0ZmllbGQtaW5wdXRcblxuICAgICAgICBtZS5hZGRWYWx1ZVRvTGFiZWwoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgYWZ0ZXIgdGhlIHRpY2ttYXJrcyBjb25maWcgZ290IGNoYW5nZWRcbiAgICAgKiBAcGFyYW0ge0FycmF5fSB2YWx1ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IG9sZFZhbHVlXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIGFmdGVyU2V0VGlja21hcmtzKHZhbHVlLCBvbGRWYWx1ZSkge1xuICAgICAgICAvLyB0b2RvXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogT3ZlcnJpZGUgdGhlIE51bWJlckZpZWxkIGltcGxlbWVudGF0aW9uXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGFcbiAgICAgKi9cbiAgICBhZnRlclNldFZhbHVlKHZhbHVlLCBvbGRWYWx1ZSkge1xuICAgICAgICB0aGlzLmFkZFZhbHVlVG9MYWJlbCgpO1xuICAgICAgICBzdXBlci5hZnRlclNldFZhbHVlKHZhbHVlLCBvbGRWYWx1ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIGxhYmVsIHdpdGggdmFsdWVcbiAgICAgKi9cbiAgICBhZGRWYWx1ZVRvTGFiZWwoKSB7XG4gICAgICAgIGNvbnN0IG1lID0gdGhpcztcblxuICAgICAgICBpZiAobWUuc2hvd1Jlc3VsdEluTGFiZWwpIHtcbiAgICAgICAgICAgIG1lLmdldExhYmVsRWwoKS5pbm5lckhUTUwgPSBgWyR7bWUudmFsdWV9XSBgICsgbWUubGFiZWxUZXh0O1xuICAgICAgICB9XG4gICAgfVxufVxuXG5OZW8uc2V0dXBDbGFzcyhSYW5nZSk7XG5cbmV4cG9ydCBkZWZhdWx0IFJhbmdlO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9