export const __webpack_esm_id__ = "src_component_wrapper_Mermaid_mjs";
export const __webpack_esm_ids__ = ["src_component_wrapper_Mermaid_mjs"];
export const __webpack_esm_modules__ = {

/***/ "./src/component/wrapper/Mermaid.mjs"
/*!*******************************************!*\
  !*** ./src/component/wrapper/Mermaid.mjs ***!
  \*******************************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _Base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Base.mjs */ "./src/component/Base.mjs");


/**
 * @summary A wrapper component for rendering Mermaid diagrams.
 *
 * This class abstracts the communication with the Main thread `Mermaid` addon, allowing developers
 * to use a declarative component to display Mermaid diagrams. It handles the lifecycle management,
 * ensuring the addon is loaded and the diagram is re-rendered when the `value` config changes.
 *
 * It uses the `Neo.main.addon.Mermaid` remote API to perform the actual rendering on the Main thread,
 * passing the diagram code and the target element ID.
 *
 * @class Neo.component.wrapper.Mermaid
 * @extends Neo.component.Base
 */
class Mermaid extends _Base_mjs__WEBPACK_IMPORTED_MODULE_0__["default"] {
    static config = {
        /**
         * @member {String} className='Neo.component.wrapper.Mermaid'
         * @protected
         */
        className: 'Neo.component.wrapper.Mermaid',
        /**
         * @member {String} ntype='mermaid'
         * @protected
         */
        ntype: 'mermaid',
        /**
         * @member {String[]} baseCls=['neo-mermaid']
         */
        baseCls: ['neo-mermaid'],
        /**
         * @member {String|null} mermaidTheme=null
         */
        mermaidTheme: null,
        /**
         * @member {Object} themeMap
         */
        themeMap: {
            'neo-theme-cyberpunk': 'dark',
            'neo-theme-dark'     : 'dark',
            'neo-theme-light'    : 'default',
            'neo-theme-neo-dark' : 'dark',
            'neo-theme-neo-light': 'default'
        },
        /**
         * The mermaid diagram code.
         * Changing this value will automatically trigger a re-render of the diagram.
         * @member {String|null} value_=null
         * @reactive
         */
        value_: null
    }

    /**
     * Stores the remote proxy instance of the Mermaid addon.
     * This proxy is retrieved during `initAsync` and is used to invoke methods on the Main thread.
     * @member {Object|null} addon=null
     * @protected
     */
    addon = null

    /**
     * Triggered after the component is mounted.
     * Checks if there is a value to render and triggers the rendering process.
     * @param {Boolean} value
     * @param {Boolean} oldValue
     * @protected
     */
    afterSetMounted(value, oldValue) {
        super.afterSetMounted(value, oldValue);

        if (value) {
            this.render()
        }
    }

    /**
     * Triggered after the theme config got changed
     * @param {String|null} value
     * @param {String|null} oldValue
     * @protected
     */
    afterSetTheme(value, oldValue) {
        super.afterSetTheme(value, oldValue);
        this.render()
    }

    /**
     * Triggered when the mermaid code value changes.
     * Triggers a re-render to update the diagram.
     * @param {String|null} value
     * @param {String|null} oldValue
     * @protected
     */
    afterSetValue(value, oldValue) {
        if (value) {
            this.render()
        }
    }

    /**
     * Initializes the component asynchronously.
     * Retrieves the Mermaid addon proxy from the current worker for the specific window.
     * This ensures the addon is loaded and ready for communication.
     * @returns {Promise<void>}
     */
    async initAsync() {
        await super.initAsync();
        this.addon = await Neo.currentWorker.getAddon('Mermaid', this.windowId)
    }

    /**
     * @returns {Promise<void>}
     */
    async loadFiles() {
        return this.addon.loadFiles()
    }

    /**
     * Renders the Mermaid diagram.
     * This method waits for the component to be fully initialized (ready) and then invokes
     * the `render` method on the remote addon proxy.
     * @returns {Promise<void>}
     */
    async render() {
        let me = this;

        if (me.mounted && me.value) {
            await me.ready();

            const
                theme = me.mermaidTheme || me.themeMap[me.theme] || 'default',
                code  = `---\nconfig:\n  theme: ${theme}\n---\n${me.value}`;

            await me.addon.render({
                code,
                id      : me.id,
                windowId: me.windowId
            })
        }
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(Mermaid));


/***/ }

};

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2h1bmtzL2FwcC9zcmNfY29tcG9uZW50X3dyYXBwZXJfTWVybWFpZF9tanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQW9DOztBQUVwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixpREFBUztBQUMvQjtBQUNBO0FBQ0Esb0JBQW9CLFFBQVE7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsUUFBUTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixVQUFVO0FBQzlCO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixhQUFhO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixRQUFRO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixhQUFhO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixhQUFhO0FBQzdCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFNBQVM7QUFDeEIsZUFBZSxTQUFTO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLGFBQWE7QUFDNUIsZUFBZSxhQUFhO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGFBQWE7QUFDNUIsZUFBZSxhQUFhO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGtEQUFrRCxNQUFNLFNBQVMsU0FBUzs7QUFFMUU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBOztBQUVBLGlFQUFlLHVCQUF1QixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmVvLm1qcy8uL3NyYy9jb21wb25lbnQvd3JhcHBlci9NZXJtYWlkLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQ29tcG9uZW50IGZyb20gJy4uL0Jhc2UubWpzJztcblxuLyoqXG4gKiBAc3VtbWFyeSBBIHdyYXBwZXIgY29tcG9uZW50IGZvciByZW5kZXJpbmcgTWVybWFpZCBkaWFncmFtcy5cbiAqXG4gKiBUaGlzIGNsYXNzIGFic3RyYWN0cyB0aGUgY29tbXVuaWNhdGlvbiB3aXRoIHRoZSBNYWluIHRocmVhZCBgTWVybWFpZGAgYWRkb24sIGFsbG93aW5nIGRldmVsb3BlcnNcbiAqIHRvIHVzZSBhIGRlY2xhcmF0aXZlIGNvbXBvbmVudCB0byBkaXNwbGF5IE1lcm1haWQgZGlhZ3JhbXMuIEl0IGhhbmRsZXMgdGhlIGxpZmVjeWNsZSBtYW5hZ2VtZW50LFxuICogZW5zdXJpbmcgdGhlIGFkZG9uIGlzIGxvYWRlZCBhbmQgdGhlIGRpYWdyYW0gaXMgcmUtcmVuZGVyZWQgd2hlbiB0aGUgYHZhbHVlYCBjb25maWcgY2hhbmdlcy5cbiAqXG4gKiBJdCB1c2VzIHRoZSBgTmVvLm1haW4uYWRkb24uTWVybWFpZGAgcmVtb3RlIEFQSSB0byBwZXJmb3JtIHRoZSBhY3R1YWwgcmVuZGVyaW5nIG9uIHRoZSBNYWluIHRocmVhZCxcbiAqIHBhc3NpbmcgdGhlIGRpYWdyYW0gY29kZSBhbmQgdGhlIHRhcmdldCBlbGVtZW50IElELlxuICpcbiAqIEBjbGFzcyBOZW8uY29tcG9uZW50LndyYXBwZXIuTWVybWFpZFxuICogQGV4dGVuZHMgTmVvLmNvbXBvbmVudC5CYXNlXG4gKi9cbmNsYXNzIE1lcm1haWQgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIHN0YXRpYyBjb25maWcgPSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtTdHJpbmd9IGNsYXNzTmFtZT0nTmVvLmNvbXBvbmVudC53cmFwcGVyLk1lcm1haWQnXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIGNsYXNzTmFtZTogJ05lby5jb21wb25lbnQud3JhcHBlci5NZXJtYWlkJyxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ30gbnR5cGU9J21lcm1haWQnXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIG50eXBlOiAnbWVybWFpZCcsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtTdHJpbmdbXX0gYmFzZUNscz1bJ25lby1tZXJtYWlkJ11cbiAgICAgICAgICovXG4gICAgICAgIGJhc2VDbHM6IFsnbmVvLW1lcm1haWQnXSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ3xudWxsfSBtZXJtYWlkVGhlbWU9bnVsbFxuICAgICAgICAgKi9cbiAgICAgICAgbWVybWFpZFRoZW1lOiBudWxsLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7T2JqZWN0fSB0aGVtZU1hcFxuICAgICAgICAgKi9cbiAgICAgICAgdGhlbWVNYXA6IHtcbiAgICAgICAgICAgICduZW8tdGhlbWUtY3liZXJwdW5rJzogJ2RhcmsnLFxuICAgICAgICAgICAgJ25lby10aGVtZS1kYXJrJyAgICAgOiAnZGFyaycsXG4gICAgICAgICAgICAnbmVvLXRoZW1lLWxpZ2h0JyAgICA6ICdkZWZhdWx0JyxcbiAgICAgICAgICAgICduZW8tdGhlbWUtbmVvLWRhcmsnIDogJ2RhcmsnLFxuICAgICAgICAgICAgJ25lby10aGVtZS1uZW8tbGlnaHQnOiAnZGVmYXVsdCdcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBtZXJtYWlkIGRpYWdyYW0gY29kZS5cbiAgICAgICAgICogQ2hhbmdpbmcgdGhpcyB2YWx1ZSB3aWxsIGF1dG9tYXRpY2FsbHkgdHJpZ2dlciBhIHJlLXJlbmRlciBvZiB0aGUgZGlhZ3JhbS5cbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfG51bGx9IHZhbHVlXz1udWxsXG4gICAgICAgICAqIEByZWFjdGl2ZVxuICAgICAgICAgKi9cbiAgICAgICAgdmFsdWVfOiBudWxsXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU3RvcmVzIHRoZSByZW1vdGUgcHJveHkgaW5zdGFuY2Ugb2YgdGhlIE1lcm1haWQgYWRkb24uXG4gICAgICogVGhpcyBwcm94eSBpcyByZXRyaWV2ZWQgZHVyaW5nIGBpbml0QXN5bmNgIGFuZCBpcyB1c2VkIHRvIGludm9rZSBtZXRob2RzIG9uIHRoZSBNYWluIHRocmVhZC5cbiAgICAgKiBAbWVtYmVyIHtPYmplY3R8bnVsbH0gYWRkb249bnVsbFxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBhZGRvbiA9IG51bGxcblxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCBhZnRlciB0aGUgY29tcG9uZW50IGlzIG1vdW50ZWQuXG4gICAgICogQ2hlY2tzIGlmIHRoZXJlIGlzIGEgdmFsdWUgdG8gcmVuZGVyIGFuZCB0cmlnZ2VycyB0aGUgcmVuZGVyaW5nIHByb2Nlc3MuXG4gICAgICogQHBhcmFtIHtCb29sZWFufSB2YWx1ZVxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gb2xkVmFsdWVcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgYWZ0ZXJTZXRNb3VudGVkKHZhbHVlLCBvbGRWYWx1ZSkge1xuICAgICAgICBzdXBlci5hZnRlclNldE1vdW50ZWQodmFsdWUsIG9sZFZhbHVlKTtcblxuICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCBhZnRlciB0aGUgdGhlbWUgY29uZmlnIGdvdCBjaGFuZ2VkXG4gICAgICogQHBhcmFtIHtTdHJpbmd8bnVsbH0gdmFsdWVcbiAgICAgKiBAcGFyYW0ge1N0cmluZ3xudWxsfSBvbGRWYWx1ZVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBhZnRlclNldFRoZW1lKHZhbHVlLCBvbGRWYWx1ZSkge1xuICAgICAgICBzdXBlci5hZnRlclNldFRoZW1lKHZhbHVlLCBvbGRWYWx1ZSk7XG4gICAgICAgIHRoaXMucmVuZGVyKClcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgd2hlbiB0aGUgbWVybWFpZCBjb2RlIHZhbHVlIGNoYW5nZXMuXG4gICAgICogVHJpZ2dlcnMgYSByZS1yZW5kZXIgdG8gdXBkYXRlIHRoZSBkaWFncmFtLlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfG51bGx9IHZhbHVlXG4gICAgICogQHBhcmFtIHtTdHJpbmd8bnVsbH0gb2xkVmFsdWVcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgYWZ0ZXJTZXRWYWx1ZSh2YWx1ZSwgb2xkVmFsdWUpIHtcbiAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcigpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplcyB0aGUgY29tcG9uZW50IGFzeW5jaHJvbm91c2x5LlxuICAgICAqIFJldHJpZXZlcyB0aGUgTWVybWFpZCBhZGRvbiBwcm94eSBmcm9tIHRoZSBjdXJyZW50IHdvcmtlciBmb3IgdGhlIHNwZWNpZmljIHdpbmRvdy5cbiAgICAgKiBUaGlzIGVuc3VyZXMgdGhlIGFkZG9uIGlzIGxvYWRlZCBhbmQgcmVhZHkgZm9yIGNvbW11bmljYXRpb24uXG4gICAgICogQHJldHVybnMge1Byb21pc2U8dm9pZD59XG4gICAgICovXG4gICAgYXN5bmMgaW5pdEFzeW5jKCkge1xuICAgICAgICBhd2FpdCBzdXBlci5pbml0QXN5bmMoKTtcbiAgICAgICAgdGhpcy5hZGRvbiA9IGF3YWl0IE5lby5jdXJyZW50V29ya2VyLmdldEFkZG9uKCdNZXJtYWlkJywgdGhpcy53aW5kb3dJZClcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTx2b2lkPn1cbiAgICAgKi9cbiAgICBhc3luYyBsb2FkRmlsZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFkZG9uLmxvYWRGaWxlcygpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVuZGVycyB0aGUgTWVybWFpZCBkaWFncmFtLlxuICAgICAqIFRoaXMgbWV0aG9kIHdhaXRzIGZvciB0aGUgY29tcG9uZW50IHRvIGJlIGZ1bGx5IGluaXRpYWxpemVkIChyZWFkeSkgYW5kIHRoZW4gaW52b2tlc1xuICAgICAqIHRoZSBgcmVuZGVyYCBtZXRob2Qgb24gdGhlIHJlbW90ZSBhZGRvbiBwcm94eS5cbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTx2b2lkPn1cbiAgICAgKi9cbiAgICBhc3luYyByZW5kZXIoKSB7XG4gICAgICAgIGxldCBtZSA9IHRoaXM7XG5cbiAgICAgICAgaWYgKG1lLm1vdW50ZWQgJiYgbWUudmFsdWUpIHtcbiAgICAgICAgICAgIGF3YWl0IG1lLnJlYWR5KCk7XG5cbiAgICAgICAgICAgIGNvbnN0XG4gICAgICAgICAgICAgICAgdGhlbWUgPSBtZS5tZXJtYWlkVGhlbWUgfHwgbWUudGhlbWVNYXBbbWUudGhlbWVdIHx8ICdkZWZhdWx0JyxcbiAgICAgICAgICAgICAgICBjb2RlICA9IGAtLS1cXG5jb25maWc6XFxuICB0aGVtZTogJHt0aGVtZX1cXG4tLS1cXG4ke21lLnZhbHVlfWA7XG5cbiAgICAgICAgICAgIGF3YWl0IG1lLmFkZG9uLnJlbmRlcih7XG4gICAgICAgICAgICAgICAgY29kZSxcbiAgICAgICAgICAgICAgICBpZCAgICAgIDogbWUuaWQsXG4gICAgICAgICAgICAgICAgd2luZG93SWQ6IG1lLndpbmRvd0lkXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBOZW8uc2V0dXBDbGFzcyhNZXJtYWlkKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==