"use strict";
(self["webpackChunkneo_mjs"] = self["webpackChunkneo_mjs"] || []).push([["dist_esm_src_draggable_list_DragZone_mjs"],{

/***/ "./dist/esm/src/draggable/DragProxyComponent.mjs":
/*!*******************************************************!*\
  !*** ./dist/esm/src/draggable/DragProxyComponent.mjs ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _component_Base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../component/Base.mjs */ "./dist/esm/src/component/Base.mjs");
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(class extends _component_Base_mjs__WEBPACK_IMPORTED_MODULE_0__["default"]{static config={className:"Neo.draggable.DragProxyComponent",ntype:"dragproxy",autoMount:!0,autoRender:!0,baseCls:["neo-dragproxy"],moveInMainThread:!0};afterSetMounted(e,a){if(super.afterSetMounted(e,a),e&&this.moveInMainThread){let{appName:e,id:a,windowId:o}=this;Neo.main.addon.DragDrop.setDragProxyElement({appName:e,id:a,windowId:o})}}}));

/***/ }),

/***/ "./dist/esm/src/draggable/DragZone.mjs":
/*!*********************************************!*\
  !*** ./dist/esm/src/draggable/DragZone.mjs ***!
  \*********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _core_Base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/Base.mjs */ "./dist/esm/src/core/Base.mjs");
/* harmony import */ var _DragProxyComponent_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./DragProxyComponent.mjs */ "./dist/esm/src/draggable/DragProxyComponent.mjs");
/* harmony import */ var _util_Array_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../util/Array.mjs */ "./dist/esm/src/util/Array.mjs");
/* harmony import */ var _core_Observable_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/Observable.mjs */ "./dist/esm/src/core/Observable.mjs");
/* harmony import */ var _util_VDom_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../util/VDom.mjs */ "./dist/esm/src/util/VDom.mjs");
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(class extends _core_Base_mjs__WEBPACK_IMPORTED_MODULE_0__["default"]{static observable=!0;static config={className:"Neo.draggable.DragZone",ntype:"dragzone",addDragProxyCls:!0,alwaysFireDragMove:!1,appName_:null,bodyCursorStyle:null,boundaryContainerId:null,boundaryContainerRect:null,data:null,dragElement:null,dragElementRect:null,dragProxy:null,dragProxyConfig_:null,dragProxyCls:"neo-dragproxy",dropZoneIdentifier:null,moveHorizontal:!0,moveInMainThread:!0,moveVertical:!0,offsetX:0,offsetY:0,owner:null,proxyParentId_:"document.body",scrollContainerId:null,scrollFactorLeft:1,scrollFactorTop:1,useProxyWrapper:!0,windowId_:null};construct(e){super.construct(e),Neo.main.addon.DragDrop||console.error("You can not use Neo.draggable.DragZone without adding Neo.main.addon.DragDrop to the main thread addons",this.id)}afterSetWindowId(e,r){e&&Neo.currentWorker.insertThemeFiles(e,this.__proto__)}beforeGetDragProxyConfig(e){return Neo.clone(e,!0,!0)}async createDragProxy(e,t=!0){let n=this,l=Neo.getComponent(n.getDragElementRoot().id)||n.owner,d=n.dragElementRect,i=n.dragProxyConfig?.vdom,s=_util_VDom_mjs__WEBPACK_IMPORTED_MODULE_4__["default"].clone(i||n.dragElement),g={module:_DragProxyComponent_mjs__WEBPACK_IMPORTED_MODULE_1__["default"],appName:n.appName,moveInMainThread:n.moveInMainThread,parentId:n.proxyParentId,windowId:n.windowId,...n.dragProxyConfig,vdom:n.useProxyWrapper?{cn:[s]}:s};return g.cls=g.cls||[],l&&g.cls.push(l.getTheme()),s.cls&&!n.useProxyWrapper&&g.cls.push(...s.cls),n.addDragProxyCls&&g.cls&&_util_Array_mjs__WEBPACK_IMPORTED_MODULE_2__["default"].add(g.cls,n.dragProxyCls),g.style=g.style||{},Object.assign(g.style,{height:`${e.height}px`,left:`${n.moveHorizontal?e.x:d.x}px`,top:`${n.moveVertical?e.y:d.y}px`,width:`${e.width}px`}),t?n.dragProxy=Neo.create(g):g}destroyDragProxy(){let e=this,r=e.dragProxy.id;e.timeout(e.moveInMainThread?0:30).then(()=>{Neo.currentWorker.promiseMessage("main",{action:"updateDom",appName:e.appName,deltas:[{action:"removeNode",id:r}]})}),e.dragProxy.destroy()}dragEnd(e){let r=this,{owner:t}=r,{cls:a}=t;_util_Array_mjs__WEBPACK_IMPORTED_MODULE_2__["default"].remove(a,"neo-is-dragging"),t.cls=a,r.dragProxy&&(r.destroyDragProxy(),r.dragProxy=null),Object.assign(r,{dragElementRect:null,offsetX:0,offsetY:0,scrollContainerId:null}),r.fire("dragEnd",e),r.resetData()}dragMove(e){let r,o=this;!o.moveInMainThread&&o.dragProxy&&(r=o.dragProxy.style,o.moveHorizontal&&(r.left=e.clientX-o.offsetX+"px"),o.moveVertical&&(r.top=e.clientY-o.offsetY+"px"),o.dragProxy.style=r),o.fire("dragMove",e)}async dragStart(e){let r,t,a,n=this,{appName:l,owner:d,windowId:i}=n,{cls:s}=d,g=n.getDragElementRect(e);n.setData(),r=await Neo.main.addon.DragDrop.setConfigs({appName:l,windowId:i,...n.getMainThreadConfigs()}),n.boundaryContainerRect=r.boundaryContainerRect,_util_Array_mjs__WEBPACK_IMPORTED_MODULE_2__["default"].add(s,"neo-is-dragging"),d.cls=s,t=e.clientX-g.left,a=e.clientY-g.top,Object.assign(n,{dragElementRect:g,offsetX:t,offsetY:a}),await n.createDragProxy(g),n.fire("dragStart",{clientX:e.clientX,clientY:e.clientY,dragElementRect:g,eventData:e,id:n.id,offsetX:t,offsetY:a})}getDragElementRect(e){let r=this.getDragElementRoot().id;for(let o of e.path)if(o.id===r)return o.rect;for(let o of e.targetPath)if(o.id===r)return o.rect;return null}getDragElementRoot(){return this.dragElement}getMainThreadConfigs(){let e=this;return{alwaysFireDragMove:e.alwaysFireDragMove,bodyCursorStyle:e.bodyCursorStyle,boundaryContainerId:e.boundaryContainerId,dragElementRootId:e.getDragElementRoot().id,dragProxyCls:e.dragProxyCls,dragZoneId:e.id,dropZoneIdentifier:e.dropZoneIdentifier,moveHorizontal:e.moveHorizontal,moveVertical:e.moveVertical,scrollContainerId:e.scrollContainerId,scrollFactorLeft:e.scrollFactorLeft,scrollFactorTop:e.scrollFactorTop}}onDrop(e){this.fire("drop",e)}onDropEnter(e){this.fire("drop:enter",e)}onDropLeave(e){this.fire("drop:leave",e)}resetData(){this.timeout(50).then(()=>{this.data=null})}setData(e={}){let r=this;r.data={dragElement:r.getDragElementRoot(),dragZoneId:r.id,...e}}}));

/***/ }),

/***/ "./dist/esm/src/draggable/list/DragZone.mjs":
/*!**************************************************!*\
  !*** ./dist/esm/src/draggable/list/DragZone.mjs ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _draggable_DragZone_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../draggable/DragZone.mjs */ "./dist/esm/src/draggable/DragZone.mjs");
/* harmony import */ var _util_Array_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../util/Array.mjs */ "./dist/esm/src/util/Array.mjs");
/* harmony import */ var _util_VDom_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../util/VDom.mjs */ "./dist/esm/src/util/VDom.mjs");
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(class extends _draggable_DragZone_mjs__WEBPACK_IMPORTED_MODULE_0__["default"]{static config={className:"Neo.draggable.list.DragZone",ntype:"list-dragzone",dragProxyConfig:{cls:["neo-list"]}};construct(t){super.construct(t);let e=this,{owner:o}=e,r={delegate:".neo-draggable",scope:e},{store:a}=o;o.addDomListeners([{"drag:end":e.onDragEnd,...r},{"drag:start":e.onDragStart,...r}]),a.on({load:e.onStoreLoad,scope:e}),a.getCount()>0&&e.onStoreLoad()}adjustListItemCls(t){let o,r=this,{owner:a}=r,{store:s}=a;s.items.forEach((a,s)=>{o=r.getItemVdom(a,s),o&&(o.cls=o.cls||[],_util_Array_mjs__WEBPACK_IMPORTED_MODULE_1__["default"][t?"add":"remove"](o.cls,"neo-draggable"))}),a.update()}getItemVdom(t,e){return this.owner.vdom.cn[e]}onDragEnd(t){if(this.owner.draggable){let t=this,o=t.dragProxy,r=o.cls||{},a=t.dragElementRect,s=o.wrapperStyle||{};_util_Array_mjs__WEBPACK_IMPORTED_MODULE_1__["default"].add(r,"neo-animate"),o.cls=r,t.timeout(30).then(()=>{s.left=`${a.left}px`,s.top=`${a.top}px`,o.wrapperStyle=s,t.timeout(300).then(()=>{t.dragEnd()})})}}async onDragStart(t){let e=this;e.owner.draggable&&(e.dragElement=_util_VDom_mjs__WEBPACK_IMPORTED_MODULE_2__["default"].find(e.owner.vdom,t.path[0].id).vdom,await e.dragStart(t))}onStoreLoad(){this.adjustListItemCls(!0)}setData(t={}){let{owner:e}=this,o=e.getItemRecordId(this.getDragElementRoot().id);t.record=e.store.get(o),super.setData(t)}}));

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2h1bmtzL2FwcC9kaXN0X2VzbV9zcmNfZHJhZ2dhYmxlX2xpc3RfRHJhZ1pvbmVfbWpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQXFDLGlFQUFlLDZCQUE2QiwyREFBQyxDQUFDLGVBQWUseUlBQXlJLHFCQUFxQix3REFBd0QsSUFBSSwwQkFBMEIsTUFBTSw2Q0FBNkMsMEJBQTBCLElBQUksQ0FBQyxFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDQXpQLGlFQUFlLDZCQUE2QixzREFBQyxDQUFDLHFCQUFxQixlQUFlLGloQkFBaWhCLGFBQWEsNktBQTZLLHNCQUFzQix3REFBd0QsNEJBQTRCLDBCQUEwQiw4QkFBOEIsa0hBQWtILHNEQUFDLDRCQUE0QixPQUFPLCtEQUFDLGlKQUFpSixPQUFPLElBQUksNkhBQTZILHVEQUFDLDhDQUE4Qyx3QkFBd0IsVUFBVSxTQUFTLFlBQVkseUJBQXlCLFdBQVcsdUJBQXVCLGFBQWEsUUFBUSxJQUFJLGdDQUFnQyxtQkFBbUIsNEJBQTRCLDZDQUE2Qyx5Q0FBeUMsOENBQThDLHlCQUF5QixFQUFFLEVBQUUsd0JBQXdCLFdBQVcsWUFBWSxRQUFRLElBQUksTUFBTSxHQUFHLHVEQUFDLDJHQUEyRyxnRUFBZ0Usb0NBQW9DLFlBQVksYUFBYSxzTUFBc00sbUJBQW1CLGtCQUFrQiw2QkFBNkIsSUFBSSxNQUFNLDZCQUE2Qix3REFBd0QsaURBQWlELGtEQUFrRCx1REFBQyx3RkFBd0Ysc0NBQXNDLGlEQUFpRCw4RkFBOEYsRUFBRSxzQkFBc0IsbUNBQW1DLDhDQUE4QyxvREFBb0QsWUFBWSxxQkFBcUIsd0JBQXdCLHVCQUF1QixXQUFXLE9BQU8sNlpBQTZaLFVBQVUsb0JBQW9CLGVBQWUsMEJBQTBCLGVBQWUsMEJBQTBCLFlBQVksMkJBQTJCLGVBQWUsRUFBRSxZQUFZLEVBQUUsV0FBVyxRQUFRLDBEQUEwRCxDQUFDLEU7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDQTF2SCxpRUFBZSw2QkFBNkIsK0RBQUMsQ0FBQyxlQUFlLCtFQUErRSxtQkFBbUIsYUFBYSxtQkFBbUIsWUFBWSxRQUFRLE1BQU0sa0NBQWtDLEVBQUUsUUFBUSxHQUFHLG9CQUFvQiw0QkFBNEIsRUFBRSxnQ0FBZ0MsU0FBUywyQkFBMkIsa0NBQWtDLHFCQUFxQixjQUFjLFFBQVEsSUFBSSxRQUFRLEdBQUcsd0JBQXdCLHlDQUF5Qyx1REFBQywyQ0FBMkMsYUFBYSxpQkFBaUIsNkJBQTZCLGFBQWEseUJBQXlCLG9DQUFvQywwQ0FBMEMsdURBQUMsc0RBQXNELFVBQVUsT0FBTyxhQUFhLE1BQU0sOENBQThDLFlBQVksRUFBRSxHQUFHLHFCQUFxQixXQUFXLGtDQUFrQyxzREFBQyw0REFBNEQsY0FBYywyQkFBMkIsWUFBWSxFQUFFLElBQUksUUFBUSx3REFBd0QsMENBQTBDLENBQUMsRSIsInNvdXJjZXMiOlsid2VicGFjazovL25lby5tanMvLi9kaXN0L2VzbS9zcmMvZHJhZ2dhYmxlL0RyYWdQcm94eUNvbXBvbmVudC5tanMiLCJ3ZWJwYWNrOi8vbmVvLm1qcy8uL2Rpc3QvZXNtL3NyYy9kcmFnZ2FibGUvRHJhZ1pvbmUubWpzIiwid2VicGFjazovL25lby5tanMvLi9kaXN0L2VzbS9zcmMvZHJhZ2dhYmxlL2xpc3QvRHJhZ1pvbmUubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBlIGZyb21cIi4uL2NvbXBvbmVudC9CYXNlLm1qc1wiO2V4cG9ydCBkZWZhdWx0IE5lby5zZXR1cENsYXNzKGNsYXNzIGV4dGVuZHMgZXtzdGF0aWMgY29uZmlnPXtjbGFzc05hbWU6XCJOZW8uZHJhZ2dhYmxlLkRyYWdQcm94eUNvbXBvbmVudFwiLG50eXBlOlwiZHJhZ3Byb3h5XCIsYXV0b01vdW50OiEwLGF1dG9SZW5kZXI6ITAsYmFzZUNsczpbXCJuZW8tZHJhZ3Byb3h5XCJdLG1vdmVJbk1haW5UaHJlYWQ6ITB9O2FmdGVyU2V0TW91bnRlZChlLGEpe2lmKHN1cGVyLmFmdGVyU2V0TW91bnRlZChlLGEpLGUmJnRoaXMubW92ZUluTWFpblRocmVhZCl7bGV0e2FwcE5hbWU6ZSxpZDphLHdpbmRvd0lkOm99PXRoaXM7TmVvLm1haW4uYWRkb24uRHJhZ0Ryb3Auc2V0RHJhZ1Byb3h5RWxlbWVudCh7YXBwTmFtZTplLGlkOmEsd2luZG93SWQ6b30pfX19KTsiLCJpbXBvcnQgZSBmcm9tXCIuLi9jb3JlL0Jhc2UubWpzXCI7aW1wb3J0IHIgZnJvbVwiLi9EcmFnUHJveHlDb21wb25lbnQubWpzXCI7aW1wb3J0IG8gZnJvbVwiLi4vdXRpbC9BcnJheS5tanNcIjtpbXBvcnQgdCBmcm9tXCIuLi9jb3JlL09ic2VydmFibGUubWpzXCI7aW1wb3J0IGEgZnJvbVwiLi4vdXRpbC9WRG9tLm1qc1wiO2V4cG9ydCBkZWZhdWx0IE5lby5zZXR1cENsYXNzKGNsYXNzIGV4dGVuZHMgZXtzdGF0aWMgb2JzZXJ2YWJsZT0hMDtzdGF0aWMgY29uZmlnPXtjbGFzc05hbWU6XCJOZW8uZHJhZ2dhYmxlLkRyYWdab25lXCIsbnR5cGU6XCJkcmFnem9uZVwiLGFkZERyYWdQcm94eUNsczohMCxhbHdheXNGaXJlRHJhZ01vdmU6ITEsYXBwTmFtZV86bnVsbCxib2R5Q3Vyc29yU3R5bGU6bnVsbCxib3VuZGFyeUNvbnRhaW5lcklkOm51bGwsYm91bmRhcnlDb250YWluZXJSZWN0Om51bGwsZGF0YTpudWxsLGRyYWdFbGVtZW50Om51bGwsZHJhZ0VsZW1lbnRSZWN0Om51bGwsZHJhZ1Byb3h5Om51bGwsZHJhZ1Byb3h5Q29uZmlnXzpudWxsLGRyYWdQcm94eUNsczpcIm5lby1kcmFncHJveHlcIixkcm9wWm9uZUlkZW50aWZpZXI6bnVsbCxtb3ZlSG9yaXpvbnRhbDohMCxtb3ZlSW5NYWluVGhyZWFkOiEwLG1vdmVWZXJ0aWNhbDohMCxvZmZzZXRYOjAsb2Zmc2V0WTowLG93bmVyOm51bGwscHJveHlQYXJlbnRJZF86XCJkb2N1bWVudC5ib2R5XCIsc2Nyb2xsQ29udGFpbmVySWQ6bnVsbCxzY3JvbGxGYWN0b3JMZWZ0OjEsc2Nyb2xsRmFjdG9yVG9wOjEsdXNlUHJveHlXcmFwcGVyOiEwLHdpbmRvd0lkXzpudWxsfTtjb25zdHJ1Y3QoZSl7c3VwZXIuY29uc3RydWN0KGUpLE5lby5tYWluLmFkZG9uLkRyYWdEcm9wfHxjb25zb2xlLmVycm9yKFwiWW91IGNhbiBub3QgdXNlIE5lby5kcmFnZ2FibGUuRHJhZ1pvbmUgd2l0aG91dCBhZGRpbmcgTmVvLm1haW4uYWRkb24uRHJhZ0Ryb3AgdG8gdGhlIG1haW4gdGhyZWFkIGFkZG9uc1wiLHRoaXMuaWQpfWFmdGVyU2V0V2luZG93SWQoZSxyKXtlJiZOZW8uY3VycmVudFdvcmtlci5pbnNlcnRUaGVtZUZpbGVzKGUsdGhpcy5fX3Byb3RvX18pfWJlZm9yZUdldERyYWdQcm94eUNvbmZpZyhlKXtyZXR1cm4gTmVvLmNsb25lKGUsITAsITApfWFzeW5jIGNyZWF0ZURyYWdQcm94eShlLHQ9ITApe2xldCBuPXRoaXMsbD1OZW8uZ2V0Q29tcG9uZW50KG4uZ2V0RHJhZ0VsZW1lbnRSb290KCkuaWQpfHxuLm93bmVyLGQ9bi5kcmFnRWxlbWVudFJlY3QsaT1uLmRyYWdQcm94eUNvbmZpZz8udmRvbSxzPWEuY2xvbmUoaXx8bi5kcmFnRWxlbWVudCksZz17bW9kdWxlOnIsYXBwTmFtZTpuLmFwcE5hbWUsbW92ZUluTWFpblRocmVhZDpuLm1vdmVJbk1haW5UaHJlYWQscGFyZW50SWQ6bi5wcm94eVBhcmVudElkLHdpbmRvd0lkOm4ud2luZG93SWQsLi4ubi5kcmFnUHJveHlDb25maWcsdmRvbTpuLnVzZVByb3h5V3JhcHBlcj97Y246W3NdfTpzfTtyZXR1cm4gZy5jbHM9Zy5jbHN8fFtdLGwmJmcuY2xzLnB1c2gobC5nZXRUaGVtZSgpKSxzLmNscyYmIW4udXNlUHJveHlXcmFwcGVyJiZnLmNscy5wdXNoKC4uLnMuY2xzKSxuLmFkZERyYWdQcm94eUNscyYmZy5jbHMmJm8uYWRkKGcuY2xzLG4uZHJhZ1Byb3h5Q2xzKSxnLnN0eWxlPWcuc3R5bGV8fHt9LE9iamVjdC5hc3NpZ24oZy5zdHlsZSx7aGVpZ2h0OmAke2UuaGVpZ2h0fXB4YCxsZWZ0OmAke24ubW92ZUhvcml6b250YWw/ZS54OmQueH1weGAsdG9wOmAke24ubW92ZVZlcnRpY2FsP2UueTpkLnl9cHhgLHdpZHRoOmAke2Uud2lkdGh9cHhgfSksdD9uLmRyYWdQcm94eT1OZW8uY3JlYXRlKGcpOmd9ZGVzdHJveURyYWdQcm94eSgpe2xldCBlPXRoaXMscj1lLmRyYWdQcm94eS5pZDtlLnRpbWVvdXQoZS5tb3ZlSW5NYWluVGhyZWFkPzA6MzApLnRoZW4oKCk9PntOZW8uY3VycmVudFdvcmtlci5wcm9taXNlTWVzc2FnZShcIm1haW5cIix7YWN0aW9uOlwidXBkYXRlRG9tXCIsYXBwTmFtZTplLmFwcE5hbWUsZGVsdGFzOlt7YWN0aW9uOlwicmVtb3ZlTm9kZVwiLGlkOnJ9XX0pfSksZS5kcmFnUHJveHkuZGVzdHJveSgpfWRyYWdFbmQoZSl7bGV0IHI9dGhpcyx7b3duZXI6dH09cix7Y2xzOmF9PXQ7by5yZW1vdmUoYSxcIm5lby1pcy1kcmFnZ2luZ1wiKSx0LmNscz1hLHIuZHJhZ1Byb3h5JiYoci5kZXN0cm95RHJhZ1Byb3h5KCksci5kcmFnUHJveHk9bnVsbCksT2JqZWN0LmFzc2lnbihyLHtkcmFnRWxlbWVudFJlY3Q6bnVsbCxvZmZzZXRYOjAsb2Zmc2V0WTowLHNjcm9sbENvbnRhaW5lcklkOm51bGx9KSxyLmZpcmUoXCJkcmFnRW5kXCIsZSksci5yZXNldERhdGEoKX1kcmFnTW92ZShlKXtsZXQgcixvPXRoaXM7IW8ubW92ZUluTWFpblRocmVhZCYmby5kcmFnUHJveHkmJihyPW8uZHJhZ1Byb3h5LnN0eWxlLG8ubW92ZUhvcml6b250YWwmJihyLmxlZnQ9ZS5jbGllbnRYLW8ub2Zmc2V0WCtcInB4XCIpLG8ubW92ZVZlcnRpY2FsJiYoci50b3A9ZS5jbGllbnRZLW8ub2Zmc2V0WStcInB4XCIpLG8uZHJhZ1Byb3h5LnN0eWxlPXIpLG8uZmlyZShcImRyYWdNb3ZlXCIsZSl9YXN5bmMgZHJhZ1N0YXJ0KGUpe2xldCByLHQsYSxuPXRoaXMse2FwcE5hbWU6bCxvd25lcjpkLHdpbmRvd0lkOml9PW4se2NsczpzfT1kLGc9bi5nZXREcmFnRWxlbWVudFJlY3QoZSk7bi5zZXREYXRhKCkscj1hd2FpdCBOZW8ubWFpbi5hZGRvbi5EcmFnRHJvcC5zZXRDb25maWdzKHthcHBOYW1lOmwsd2luZG93SWQ6aSwuLi5uLmdldE1haW5UaHJlYWRDb25maWdzKCl9KSxuLmJvdW5kYXJ5Q29udGFpbmVyUmVjdD1yLmJvdW5kYXJ5Q29udGFpbmVyUmVjdCxvLmFkZChzLFwibmVvLWlzLWRyYWdnaW5nXCIpLGQuY2xzPXMsdD1lLmNsaWVudFgtZy5sZWZ0LGE9ZS5jbGllbnRZLWcudG9wLE9iamVjdC5hc3NpZ24obix7ZHJhZ0VsZW1lbnRSZWN0Omcsb2Zmc2V0WDp0LG9mZnNldFk6YX0pLGF3YWl0IG4uY3JlYXRlRHJhZ1Byb3h5KGcpLG4uZmlyZShcImRyYWdTdGFydFwiLHtjbGllbnRYOmUuY2xpZW50WCxjbGllbnRZOmUuY2xpZW50WSxkcmFnRWxlbWVudFJlY3Q6ZyxldmVudERhdGE6ZSxpZDpuLmlkLG9mZnNldFg6dCxvZmZzZXRZOmF9KX1nZXREcmFnRWxlbWVudFJlY3QoZSl7bGV0IHI9dGhpcy5nZXREcmFnRWxlbWVudFJvb3QoKS5pZDtmb3IobGV0IG8gb2YgZS5wYXRoKWlmKG8uaWQ9PT1yKXJldHVybiBvLnJlY3Q7Zm9yKGxldCBvIG9mIGUudGFyZ2V0UGF0aClpZihvLmlkPT09cilyZXR1cm4gby5yZWN0O3JldHVybiBudWxsfWdldERyYWdFbGVtZW50Um9vdCgpe3JldHVybiB0aGlzLmRyYWdFbGVtZW50fWdldE1haW5UaHJlYWRDb25maWdzKCl7bGV0IGU9dGhpcztyZXR1cm57YWx3YXlzRmlyZURyYWdNb3ZlOmUuYWx3YXlzRmlyZURyYWdNb3ZlLGJvZHlDdXJzb3JTdHlsZTplLmJvZHlDdXJzb3JTdHlsZSxib3VuZGFyeUNvbnRhaW5lcklkOmUuYm91bmRhcnlDb250YWluZXJJZCxkcmFnRWxlbWVudFJvb3RJZDplLmdldERyYWdFbGVtZW50Um9vdCgpLmlkLGRyYWdQcm94eUNsczplLmRyYWdQcm94eUNscyxkcmFnWm9uZUlkOmUuaWQsZHJvcFpvbmVJZGVudGlmaWVyOmUuZHJvcFpvbmVJZGVudGlmaWVyLG1vdmVIb3Jpem9udGFsOmUubW92ZUhvcml6b250YWwsbW92ZVZlcnRpY2FsOmUubW92ZVZlcnRpY2FsLHNjcm9sbENvbnRhaW5lcklkOmUuc2Nyb2xsQ29udGFpbmVySWQsc2Nyb2xsRmFjdG9yTGVmdDplLnNjcm9sbEZhY3RvckxlZnQsc2Nyb2xsRmFjdG9yVG9wOmUuc2Nyb2xsRmFjdG9yVG9wfX1vbkRyb3AoZSl7dGhpcy5maXJlKFwiZHJvcFwiLGUpfW9uRHJvcEVudGVyKGUpe3RoaXMuZmlyZShcImRyb3A6ZW50ZXJcIixlKX1vbkRyb3BMZWF2ZShlKXt0aGlzLmZpcmUoXCJkcm9wOmxlYXZlXCIsZSl9cmVzZXREYXRhKCl7dGhpcy50aW1lb3V0KDUwKS50aGVuKCgpPT57dGhpcy5kYXRhPW51bGx9KX1zZXREYXRhKGU9e30pe2xldCByPXRoaXM7ci5kYXRhPXtkcmFnRWxlbWVudDpyLmdldERyYWdFbGVtZW50Um9vdCgpLGRyYWdab25lSWQ6ci5pZCwuLi5lfX19KTsiLCJpbXBvcnQgdCBmcm9tXCIuLi8uLi9kcmFnZ2FibGUvRHJhZ1pvbmUubWpzXCI7aW1wb3J0IGUgZnJvbVwiLi4vLi4vdXRpbC9BcnJheS5tanNcIjtpbXBvcnQgbyBmcm9tXCIuLi8uLi91dGlsL1ZEb20ubWpzXCI7ZXhwb3J0IGRlZmF1bHQgTmVvLnNldHVwQ2xhc3MoY2xhc3MgZXh0ZW5kcyB0e3N0YXRpYyBjb25maWc9e2NsYXNzTmFtZTpcIk5lby5kcmFnZ2FibGUubGlzdC5EcmFnWm9uZVwiLG50eXBlOlwibGlzdC1kcmFnem9uZVwiLGRyYWdQcm94eUNvbmZpZzp7Y2xzOltcIm5lby1saXN0XCJdfX07Y29uc3RydWN0KHQpe3N1cGVyLmNvbnN0cnVjdCh0KTtsZXQgZT10aGlzLHtvd25lcjpvfT1lLHI9e2RlbGVnYXRlOlwiLm5lby1kcmFnZ2FibGVcIixzY29wZTplfSx7c3RvcmU6YX09bztvLmFkZERvbUxpc3RlbmVycyhbe1wiZHJhZzplbmRcIjplLm9uRHJhZ0VuZCwuLi5yfSx7XCJkcmFnOnN0YXJ0XCI6ZS5vbkRyYWdTdGFydCwuLi5yfV0pLGEub24oe2xvYWQ6ZS5vblN0b3JlTG9hZCxzY29wZTplfSksYS5nZXRDb3VudCgpPjAmJmUub25TdG9yZUxvYWQoKX1hZGp1c3RMaXN0SXRlbUNscyh0KXtsZXQgbyxyPXRoaXMse293bmVyOmF9PXIse3N0b3JlOnN9PWE7cy5pdGVtcy5mb3JFYWNoKChhLHMpPT57bz1yLmdldEl0ZW1WZG9tKGEscyksbyYmKG8uY2xzPW8uY2xzfHxbXSxlW3Q/XCJhZGRcIjpcInJlbW92ZVwiXShvLmNscyxcIm5lby1kcmFnZ2FibGVcIikpfSksYS51cGRhdGUoKX1nZXRJdGVtVmRvbSh0LGUpe3JldHVybiB0aGlzLm93bmVyLnZkb20uY25bZV19b25EcmFnRW5kKHQpe2lmKHRoaXMub3duZXIuZHJhZ2dhYmxlKXtsZXQgdD10aGlzLG89dC5kcmFnUHJveHkscj1vLmNsc3x8e30sYT10LmRyYWdFbGVtZW50UmVjdCxzPW8ud3JhcHBlclN0eWxlfHx7fTtlLmFkZChyLFwibmVvLWFuaW1hdGVcIiksby5jbHM9cix0LnRpbWVvdXQoMzApLnRoZW4oKCk9PntzLmxlZnQ9YCR7YS5sZWZ0fXB4YCxzLnRvcD1gJHthLnRvcH1weGAsby53cmFwcGVyU3R5bGU9cyx0LnRpbWVvdXQoMzAwKS50aGVuKCgpPT57dC5kcmFnRW5kKCl9KX0pfX1hc3luYyBvbkRyYWdTdGFydCh0KXtsZXQgZT10aGlzO2Uub3duZXIuZHJhZ2dhYmxlJiYoZS5kcmFnRWxlbWVudD1vLmZpbmQoZS5vd25lci52ZG9tLHQucGF0aFswXS5pZCkudmRvbSxhd2FpdCBlLmRyYWdTdGFydCh0KSl9b25TdG9yZUxvYWQoKXt0aGlzLmFkanVzdExpc3RJdGVtQ2xzKCEwKX1zZXREYXRhKHQ9e30pe2xldHtvd25lcjplfT10aGlzLG89ZS5nZXRJdGVtUmVjb3JkSWQodGhpcy5nZXREcmFnRWxlbWVudFJvb3QoKS5pZCk7dC5yZWNvcmQ9ZS5zdG9yZS5nZXQobyksc3VwZXIuc2V0RGF0YSh0KX19KTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=