"use strict";
(self["webpackChunkneo_mjs"] = self["webpackChunkneo_mjs"] || []).push([["vendors-dist_esm_src_calendar_view_week_Component_mjs"],{

/***/ "./dist/esm/src/calendar/view/week/Component.mjs":
/*!*******************************************************!*\
  !*** ./dist/esm/src/calendar/view/week/Component.mjs ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _component_Base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../component/Base.mjs */ "./dist/esm/src/component/Base.mjs");
/* harmony import */ var _util_Date_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../util/Date.mjs */ "./dist/esm/src/util/Date.mjs");
/* harmony import */ var _util_Array_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../util/Array.mjs */ "./dist/esm/src/util/Array.mjs");
/* harmony import */ var _TimeAxisComponent_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./TimeAxisComponent.mjs */ "./dist/esm/src/calendar/view/week/TimeAxisComponent.mjs");
/* harmony import */ var _util_VDom_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../util/VDom.mjs */ "./dist/esm/src/util/VDom.mjs");
const r=new Date,i=r.getDate(),l=r.getMonth(),s=r.getFullYear();class d extends _component_Base_mjs__WEBPACK_IMPORTED_MODULE_0__["default"]{static timeAxisPositions=["end","start"];static config={className:"Neo.calendar.view.week.Component",baseCls:["neo-calendar-weekcomponent"],bind:{calendarStore:"stores.calendars",currentDate:e=>e.currentDate,enableDrag:e=>e.events.enableDrag,endTime:e=>e.endTime,eventBorder:e=>e.events.border,eventStore:"stores.events",intlFormat_time:e=>e.intlFormat_time,locale:e=>e.locale,minimumEventDuration:e=>e.minimumEventDuration,showWeekends:e=>e.showWeekends,startTime:e=>e.startTime,weekStartDay:e=>e.weekStartDay},calendarStore_:null,columnsBuffer_:7,columnsVisible_:7,currentDate_:null,dayNameFormat_:"short",enableDrag_:!0,eventBorder_:null,eventDragZone:null,eventStore_:null,firstColumnDate:null,headerCreated:!1,intlFormat_day:null,intlFormat_time_:null,isUpdating:!1,locale_:Neo.config.locale,minimumEventDuration:30,needsEventUpdate:!1,owner:null,pluginDragDropConfig:null,pluginEventResizableConfig:null,showEventEndTime_:!1,showWeekends_:!0,timeAxis:null,timeAxisConfig:null,timeAxisPosition_:"start",totalColumns:null,updateDepth:-1,vdom:{cn:[{cls:["neo-scroll-overlay"]},{cls:["neo-c-w-scrollcontainer"],flag:"neo-c-w-scrollcontainer",cn:[{cls:["neo-header-row"],flag:"neo-header-row",cn:[]},{cls:["neo-c-w-column-timeaxis-container"],flag:"neo-c-w-column-timeaxis-container",cn:[{cls:["neo-c-w-column-container"],flag:"neo-c-w-column-container",style:{},cn:[]}]}]}]},weekStartDay_:0};construct(e){super.construct(e);let t=this;t.addDomListeners([{dblclick:t.onEventDoubleClick,scope:t,delegate:".neo-event"},{wheel:t.onWheel,scope:t}]),t.timeAxis=Neo.create({module:_TimeAxisComponent_mjs__WEBPACK_IMPORTED_MODULE_3__["default"],appName:t.appName,parentId:t.id,listeners:{change:t.onTimeAxisChange,scope:t},windowId:t.windowId,...t.timeAxisConfig}),t.getColumnTimeAxisContainer().cn["start"===t.timeAxisPosition?"unshift":"push"](t.timeAxis.createVdomReference()),t.calendarStore.getCount()>0&&t.eventStore.getCount()>0&&(t.needsEventUpdate=!0),t.updateHeader(!0,t.needsEventUpdate),t.needsEventUpdate&&t.updateEvents(!1),t.headerCreated=!0}adjustTotalHeight(e,t=!1){let{rowHeight:n,rowsPerItem:o}=e,a=e.totalHeight-n,r=0,i=[];for(;r<o;r++)i.push(`var(--c-w-background-color) ${r*n+r}px`,`var(--c-w-background-color) ${(r+1)*n+r}px`,"var(--c-w-border-color) 0");Object.assign(this.getColumnContainer().style,{backgroundImage:`linear-gradient(${i.join(",")})`,backgroundSize:`1px ${o*n+o}px`,height:`${a}px`,maxHeight:`${a}px`}),!t&&this.update()}afterSetCalendarStore(e,t){let n=this,o={load:n.onCalendarStoreLoad,recordChange:n.onCalendarStoreRecordChange,scope:n};t?.un(o),e?.on(o)}afterSetColumnsBuffer(e,t){this.totalColumns=this.visibleColumns+2*e}afterSetColumnsVisible(e,t){this.totalColumns=2*this.columnsBuffer+e}afterSetCurrentDate(e,t){let n=this;n.isConstructed&&(n.updateHeader(!1,!0),n.updateEvents())}afterSetDayNameFormat(e,t){let n=this;n.intlFormat_day=new Intl.DateTimeFormat(n.locale,{weekday:e}),t&&n.updateHeader()}afterSetEnableDrag(e,t){e&&!this.getPlugin("calendar-week-dragdrop")&&Promise.all([__webpack_require__.e(/*! import() */ "vendors-dist_esm_src_calendar_view_week_plugin_DragDrop_mjs").then(__webpack_require__.bind(__webpack_require__, /*! ./plugin/DragDrop.mjs */ "./dist/esm/src/calendar/view/week/plugin/DragDrop.mjs")),Promise.all(/*! import() */[__webpack_require__.e("vendors-dist_esm_src_plugin_Resizable_mjs"), __webpack_require__.e("dist_esm_src_calendar_view_week_plugin_EventResizable_mjs")]).then(__webpack_require__.bind(__webpack_require__, /*! ./plugin/EventResizable.mjs */ "./dist/esm/src/calendar/view/week/plugin/EventResizable.mjs"))]).then(e=>{let t=this,{appName:n}=t,o=t.plugins||[];o.push({module:e[0].default,appName:n,...t.pluginDragDropConfig},{module:e[1].default,appName:n,delegationCls:"neo-event",directions:["b","t"],...t.pluginEventResizableConfig}),t.plugins=o})}afterSetEventBorder(e,t){let{cls:o}=this;t&&_util_Array_mjs__WEBPACK_IMPORTED_MODULE_2__["default"].remove(o,`neo-event-border-${t}`),e&&_util_Array_mjs__WEBPACK_IMPORTED_MODULE_2__["default"].add(o,`neo-event-border-${e}`),this.cls=o}afterSetEventStore(e,t){let n=this,o={load:n.onEventStoreLoad,recordChange:n.onEventStoreRecordChange,scope:n};t?.un(o),e?.on(o)}afterSetLocale(e,t){if(t){let t=this;t.intlFormat_day=new Intl.DateTimeFormat(e,{weekday:t.dayNameFormat}),t.updateHeader()}}async afterSetMounted(e,t){super.afterSetMounted(e,t);let n,o,a=this;e&&(a.needsEventUpdate&&(a.updateEvents(),a.needsEventUpdate=!1),await a.timeout(100),o=await a.getDomRect(a.getColumnContainer().id),n=a.getScrollContainer().id,n&&Neo.main.DomAccess.scrollBy({appName:a.appName,direction:"left",id:n,value:o.width*a.columnsBuffer/a.columnsVisible/3}))}afterSetShowEventEndTime(e,t){void 0!==t&&this.updateEvents()}afterSetShowWeekends(e,t){let o=this,{cls:a}=o;_util_Array_mjs__WEBPACK_IMPORTED_MODULE_2__["default"][e?"add":"remove"](a,"neo-show-weekends"),o._cls=a,void 0!==t&&(o.updateHeader(!1,!0),o.updateEvents())}afterSetTimeAxisPosition(e,t){let o=this,{cls:a}=o,r=o.getColumnTimeAxisContainer();_util_Array_mjs__WEBPACK_IMPORTED_MODULE_2__["default"]["end"===e?"add":"remove"](a,"neo-timeaxis-end"),void 0!==t&&r.cn.unshift(r.cn.pop()),o.cls=a,o.update()}afterSetWeekStartDay(e,t){void 0!==t&&(this.updateHeader(!1,!0),this.updateEvents())}beforeSetDayNameFormat(e,n){return this.beforeSetEnumValue(e,n,"dayNameFormat",_util_Date_mjs__WEBPACK_IMPORTED_MODULE_1__["default"].prototype.dayNameFormats)}beforeSetTimeAxisPosition(e,t){return this.beforeSetEnumValue(e,t,"timeAxisPosition")}beforeSetWeekStartDay(e,n){return this.beforeSetEnumValue(e,n,"weekStartDay",_util_Date_mjs__WEBPACK_IMPORTED_MODULE_1__["default"].prototype.weekStartDays)}createColumnAndHeader(e){let n,o,a=this,r=["neo-c-w-column","neo-draggable"],d=e.getDate(),m=e.getDay(),c=["neo-date"],u=!1;return 0!==m&&6!==m||(r.push("neo-weekend"),!a.showWeekends&&(u=!0)),d===i&&e.getMonth()===l&&e.getFullYear()===s&&c.push("neo-today"),n={cls:r,flag:_util_Date_mjs__WEBPACK_IMPORTED_MODULE_1__["default"].convertToyyyymmdd(e),removeDom:u},o={cls:["neo-header-row-item"],removeDom:u,cn:[{cls:["neo-day"],html:a.intlFormat_day.format(e)},{cls:c,html:d}]},{column:n,header:o}}destroy(...e){this.timeAxis=null,super.destroy(...e)}getColumnContainer(){return _util_VDom_mjs__WEBPACK_IMPORTED_MODULE_4__["default"].getByFlag(this.vdom,"neo-c-w-column-container")}getColumnId(e){return`${this.id}_col_${_util_Date_mjs__WEBPACK_IMPORTED_MODULE_1__["default"].convertToyyyymmdd(e)}`}getColumnHeaderId(e){return`${this.id}_ch_${_util_Date_mjs__WEBPACK_IMPORTED_MODULE_1__["default"].convertToyyyymmdd(e)}`}getColumnTimeAxisContainer(){return _util_VDom_mjs__WEBPACK_IMPORTED_MODULE_4__["default"].getByFlag(this.vdom,"neo-c-w-column-timeaxis-container")}getEventId(e){return`${this.id}__${e}`}getHeaderContainer(){return _util_VDom_mjs__WEBPACK_IMPORTED_MODULE_4__["default"].getByFlag(this.vdom,"neo-header-row")}getIdKey(){return"c-w"}getScrollContainer(){return _util_VDom_mjs__WEBPACK_IMPORTED_MODULE_4__["default"].getByFlag(this.vdom,"neo-c-w-scrollcontainer")}onCalendarStoreLoad(e){this.eventStore.getCount()>0&&this.updateEvents()}onCalendarStoreRecordChange(e){this.updateEvents()}onEventDoubleClick(e){if(this.data.events.enableEdit){let{path:t}=e;!t[0].cls.includes("neo-event")&&t.shift();let n=this,{editEventContainer:o}=n.owner,r=t[0],i=_util_VDom_mjs__WEBPACK_IMPORTED_MODULE_4__["default"].find(n.vdom,r.id).vdom,l=n.eventStore.get(i.flag),{style:s}=o;Object.assign(s,{left:`${r.rect.width+15}px`,top:i.style.top}),o.setSilent({parentId:t[1].id,record:l,style:s}),o.render(!0)}}onEventStoreLoad(e){this.calendarStore.getCount()>0&&this.updateEvents()}onEventStoreRecordChange(e){this.updateEvents()}onFocusChange(e){let{oldPath:t,path:n}=e;t?.[0]?.cls.includes("neo-event")&&Neo.applyDeltas(this.appName,{id:t[0].id,cls:{remove:["neo-focus"]}}),n?.[0]?.cls.includes("neo-event")&&Neo.applyDeltas(this.appName,{id:n[0].id,cls:{add:["neo-focus"]}})}onTimeAxisChange(e){let t=this;t.adjustTotalHeight(e,t.headerCreated),t.headerCreated&&t.updateEvents()}onWheel(e){if(!this.isUpdating&&Math.abs(e.deltaX)>Math.abs(e.deltaY)){let t,n,o,a=this,r=a.getColumnContainer(),{columnsBuffer:i,columnsVisible:l,firstColumnDate:s}=a,d=a.getHeaderContainer(),m=0,c=50,u=e.clientWidth-c;if(e.deltaX>0&&Math.round(e.scrollLeft/u*i)>i+l-1){for(n=new Date(r.cn[r.cn.length-1].flag),r.cn.splice(0,i),d.cn.splice(0,i);m<i;m++)n.setDate(n.getDate()+1),t=a.createColumnAndHeader(n),r.cn.push(t.column),d.cn.push(t.header);s.setDate(s.getDate()+i),a.timeout(50).then(()=>{a.updateEvents(!1,i+l,a.totalColumns)}),o=-u}else if(e.deltaX<0&&Math.round(e.scrollLeft/u*i)<1){for(n=new Date(r.cn[0].flag),r.cn.length=i+l,d.cn.length=i+l;m<i;m++)n.setDate(n.getDate()-1),t=a.createColumnAndHeader(n),r.cn.unshift(t.column),d.cn.unshift(t.header);s.setDate(s.getDate()-i),a.timeout(50).then(()=>{a.updateEvents(!1,0,i)}),o=u}o&&(a.isUpdating=!0,a.promiseUpdate().then(()=>{Neo.main.DomAccess.scrollBy({direction:"left",id:a.getScrollContainer().id,value:o}).then(()=>{a.isUpdating=!1})}))}}setFirstColumnDate(e){e.setDate(e.getDate()-e.getDay()+this.weekStartDay-this.columnsBuffer)}updateEvents(e=!1,n=0,o=this.totalColumns){let a=this;if(a.mounted){let r,i,l,s,d,m,c,u,h,g,p,v,f,C,D,y,{calendarStore:w,eventStore:S,showEventEndTime:E,timeAxis:_,vdom:b}=a,x=_.getTime(a.endTime),k=_.getTime(a.startTime),F=x-k,H=_util_Date_mjs__WEBPACK_IMPORTED_MODULE_1__["default"].clone(a.firstColumnDate),T=a.getColumnContainer(),$=n;for(H.setDate(H.getDate()+n);$<o;$++){for(i=T.cn[$],i.cn=[],l=S.getDayRecords(H),p=l.length,g=0;g<p;g++)if(v=l[g],r=w.get(v.calendarId),r?.active){if(d=v.endDate,C=v.startDate,x<=C.getHours()||k>=d.getHours())continue;x<d.getHours()&&(d=_util_Date_mjs__WEBPACK_IMPORTED_MODULE_1__["default"].clone(d),d.setHours(x),d.setMinutes(0)),k>C.getHours()&&(C=_util_Date_mjs__WEBPACK_IMPORTED_MODULE_1__["default"].clone(C),C.setHours(k),C.setMinutes(0)),s=(d-C)/60/60/1e3,m=["neo-event","neo-draggable",`neo-${r.color}`],c=60*s/_.interval,u=!1,h=Math.round(s/F*100*1e3)/1e3,f=v[S.keyProperty],D=(60*C.getHours()+C.getMinutes())/60,y=Math.round((D-k)/F*100*1e3)/1e3,c<=2&&(u=_.rowHeight*c<(E?50:34),!u||E&&_.rowHeight/c>=34||m.push("neo-overflow")),E=!(u&&1===c||!E),E&&m.push("neo-show-end-time"),i.cn.push({cls:m,flag:f,id:a.getEventId(f),tabIndex:-1,cn:[{cls:["neo-event-time"],html:a.intlFormat_time.format(v.startDate),id:`${a.id}__time__${f}`},{cls:["neo-event-title"],html:v.title,id:`${a.id}__title__${f}`},{cls:["neo-event-time","neo-event-end-time"],html:a.intlFormat_time.format(v.endDate),id:`${a.id}__enddate__${f}`,removeDom:!E}],style:{height:`calc(${h}% - 2px)`,top:`calc(${y}% + 1px)`,width:"calc(100% - 1px)"}})}H.setDate(H.getDate()+1)}!e&&a.update()}else a.needsEventUpdate=!0}updateHeader(e=!1,n=!1){let o,a,r,d,m,c,u=this,{showWeekends:h}=u,g=u.currentDate,p=u.getColumnContainer(),v=u.getHeaderContainer(),f=0;for(u.setFirstColumnDate(g),u.firstColumnDate=_util_Date_mjs__WEBPACK_IMPORTED_MODULE_1__["default"].clone(g);f<u.totalColumns;f++)o=["neo-c-w-column","neo-draggable"],a=g.getDate(),r=g.getDay(),d=["neo-date"],c=!1,0!==r&&6!==r||(o.push("neo-weekend"),!h&&(c=!0)),a===i&&g.getMonth()===l&&g.getFullYear()===s&&d.push("neo-today"),m=u.getColumnHeaderId(g),e?(p.cn.push({cls:o,flag:_util_Date_mjs__WEBPACK_IMPORTED_MODULE_1__["default"].convertToyyyymmdd(g),id:u.getColumnId(g),removeDom:c}),v.cn.push({cls:["neo-header-row-item"],id:m,removeDom:c,cn:[{cls:["neo-day"],html:u.intlFormat_day.format(g),id:`${m}_day`},{cls:d,html:a,id:`${m}_date`}]})):(Object.assign(p.cn[f],{cls:o,flag:_util_Date_mjs__WEBPACK_IMPORTED_MODULE_1__["default"].convertToyyyymmdd(g),id:u.getColumnId(g),removeDom:c}),Object.assign(v.cn[f],{id:m,removeDom:c}),Object.assign(v.cn[f].cn[0],{html:u.intlFormat_day.format(g),id:`${m}_day`}),Object.assign(v.cn[f].cn[1],{cls:d,html:a,id:`${m}_date`})),g.setDate(g.getDate()+1);!n&&u.update()}}/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(d));

/***/ }),

/***/ "./dist/esm/src/calendar/view/week/TimeAxisComponent.mjs":
/*!***************************************************************!*\
  !*** ./dist/esm/src/calendar/view/week/TimeAxisComponent.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _component_Base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../component/Base.mjs */ "./dist/esm/src/component/Base.mjs");
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(class extends _component_Base_mjs__WEBPACK_IMPORTED_MODULE_0__["default"]{static intervals=[15,30,60];static config={className:"Neo.calendar.view.week.TimeAxisComponent",baseCls:["neo-calendar-timeaxis"],bind:{endTime:e=>e.endTime,startTime:e=>e.startTime},endTime_:"24:00",interval_:30,rowHeight_:20,startTime_:"00:00",vdom:{style:{}}};construct(e){super.construct(e);let t=this;t.createItems(),t.afterSetRowHeight(t.rowHeight,0)}afterSetEndTime(e,t){if(void 0!==t){let t=this;e||(t._endTime="24:00"),t.afterSetRowHeight(t.rowHeight,0)}}afterSetInterval(e,t){void 0!==t&&this.afterSetRowHeight(this.rowHeight,0)}afterSetRowHeight(e,t){if(void 0!==t&&this.vdom.cn){let e,t,i=this,r=i.getTime(i.endTime),o=i.getTime(i.startTime),{rowHeight:a,vdom:s}=i,n=i.getRowsPerItem(),m=n*a+n,c=a+(r-o)*m;for(Object.assign(s.style,{backgroundImage:`linear-gradient(var(--c-w-background-color) ${m-1}px, var(--c-w-border-color) 1px)`,backgroundPositionY:1-m+"px",backgroundSize:`0.4em ${m}px`,height:c-a+1+"px",maxHeight:c-a+1+"px"}),e=0;e<25;e++)t={height:`${m}px`},e===o?t.marginTop=-2-a*(1===n?.5:2===n?1:2)+"px":delete t.marginTop,s.cn[e].style=t,s.cn[e].removeDom=e<o||e-1>=r;i.fire("change",{component:i,rowHeight:a,rowsPerItem:n,totalHeight:c})}}afterSetStartTime(e,t){void 0!==t&&this.afterSetRowHeight(this.rowHeight,0)}beforeSetInterval(e,t){return this.beforeSetEnumValue(e,t,"interval")}createItems(){let e,t,{vdom:i}=this;for(i.cn=[],t=0;t<25;t++)e=24===t?"00:00":(t<10?"0":"")+t+":00",i.cn.push({cls:["neo-c-w-timeaxis-item"],cn:[{html:e}]})}getRowsPerItem(){let{interval:e}=this;return 60===e?1:30===e?2:4}getTime(e){return e.split(":").map(Number)[0]}}));

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2h1bmtzL2FwcC92ZW5kb3JzLWRpc3RfZXNtX3NyY19jYWxlbmRhcl92aWV3X3dlZWtfQ29tcG9uZW50X21qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBcU0sZ0VBQWdFLGdCQUFnQiwyREFBQyxDQUFDLHlDQUF5QyxlQUFlLDBGQUEwRiw2V0FBNlcsd2hCQUF3aEIsS0FBSywyQkFBMkIsRUFBRSxvRUFBb0UsbURBQW1ELEVBQUUsd0ZBQXdGLHlFQUF5RSxPQUFPLEVBQUUsRUFBRSxFQUFFLGtCQUFrQixhQUFhLG1CQUFtQixXQUFXLG9CQUFvQiw0REFBNEQsRUFBRSx3QkFBd0IsMEJBQTBCLE9BQU8sOERBQUMsNENBQTRDLGtDQUFrQyx5Q0FBeUMsc1NBQXNTLDBCQUEwQixJQUFJLDBCQUEwQiw4QkFBOEIsS0FBSyxJQUFJLDBDQUEwQyxNQUFNLG1DQUFtQyxVQUFVLGlDQUFpQywrQ0FBK0MsbUNBQW1DLFlBQVkseUJBQXlCLE1BQU0sY0FBYyxFQUFFLGlCQUFpQixFQUFFLElBQUksb0JBQW9CLDJCQUEyQixjQUFjLCtFQUErRSxrQkFBa0IsMkJBQTJCLDBDQUEwQyw0QkFBNEIseUNBQXlDLHlCQUF5QixXQUFXLDBEQUEwRCwyQkFBMkIsV0FBVyxtREFBbUQsVUFBVSxzQkFBc0Isd0JBQXdCLDJEQUEyRCw4T0FBK0IsQ0FBQywwVUFBcUMsWUFBWSxZQUFZLFVBQVUsbUJBQW1CLFFBQVEsd0RBQXdELEVBQUUsNkdBQTZHLGNBQWMsRUFBRSx5QkFBeUIsSUFBSSxNQUFNLE1BQU0sR0FBRyx1REFBQyw4QkFBOEIsRUFBRSxNQUFNLHVEQUFDLDJCQUEyQixFQUFFLGNBQWMsd0JBQXdCLGNBQWMseUVBQXlFLGtCQUFrQixvQkFBb0IsTUFBTSxXQUFXLDRDQUE0Qyx3QkFBd0Isb0JBQW9CLDJCQUEyQiwyQkFBMkIsZUFBZSxrTUFBa00seUZBQXlGLEdBQUcsOEJBQThCLGdDQUFnQywwQkFBMEIsWUFBWSxNQUFNLEdBQUcsdURBQUMsd0dBQXdH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SSxXQUFXLE1BQU0sMkJBQTJCLFdBQVcsb0NBQW9DLENBQUMsRSIsInNvdXJjZXMiOlsid2VicGFjazovL25lby5tanMvLi9kaXN0L2VzbS9zcmMvY2FsZW5kYXIvdmlldy93ZWVrL0NvbXBvbmVudC5tanMiLCJ3ZWJwYWNrOi8vbmVvLm1qcy8uL2Rpc3QvZXNtL3NyYy9jYWxlbmRhci92aWV3L3dlZWsvVGltZUF4aXNDb21wb25lbnQubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBlIGZyb21cIi4uLy4uLy4uL2NvbXBvbmVudC9CYXNlLm1qc1wiO2ltcG9ydCB0IGZyb21cIi4uLy4uLy4uL3V0aWwvRGF0ZS5tanNcIjtpbXBvcnQgbiBmcm9tXCIuLi8uLi8uLi91dGlsL0FycmF5Lm1qc1wiO2ltcG9ydCBvIGZyb21cIi4vVGltZUF4aXNDb21wb25lbnQubWpzXCI7aW1wb3J0IGEgZnJvbVwiLi4vLi4vLi4vdXRpbC9WRG9tLm1qc1wiO2NvbnN0IHI9bmV3IERhdGUsaT1yLmdldERhdGUoKSxsPXIuZ2V0TW9udGgoKSxzPXIuZ2V0RnVsbFllYXIoKTtjbGFzcyBkIGV4dGVuZHMgZXtzdGF0aWMgdGltZUF4aXNQb3NpdGlvbnM9W1wiZW5kXCIsXCJzdGFydFwiXTtzdGF0aWMgY29uZmlnPXtjbGFzc05hbWU6XCJOZW8uY2FsZW5kYXIudmlldy53ZWVrLkNvbXBvbmVudFwiLGJhc2VDbHM6W1wibmVvLWNhbGVuZGFyLXdlZWtjb21wb25lbnRcIl0sYmluZDp7Y2FsZW5kYXJTdG9yZTpcInN0b3Jlcy5jYWxlbmRhcnNcIixjdXJyZW50RGF0ZTplPT5lLmN1cnJlbnREYXRlLGVuYWJsZURyYWc6ZT0+ZS5ldmVudHMuZW5hYmxlRHJhZyxlbmRUaW1lOmU9PmUuZW5kVGltZSxldmVudEJvcmRlcjplPT5lLmV2ZW50cy5ib3JkZXIsZXZlbnRTdG9yZTpcInN0b3Jlcy5ldmVudHNcIixpbnRsRm9ybWF0X3RpbWU6ZT0+ZS5pbnRsRm9ybWF0X3RpbWUsbG9jYWxlOmU9PmUubG9jYWxlLG1pbmltdW1FdmVudER1cmF0aW9uOmU9PmUubWluaW11bUV2ZW50RHVyYXRpb24sc2hvd1dlZWtlbmRzOmU9PmUuc2hvd1dlZWtlbmRzLHN0YXJ0VGltZTplPT5lLnN0YXJ0VGltZSx3ZWVrU3RhcnREYXk6ZT0+ZS53ZWVrU3RhcnREYXl9LGNhbGVuZGFyU3RvcmVfOm51bGwsY29sdW1uc0J1ZmZlcl86Nyxjb2x1bW5zVmlzaWJsZV86NyxjdXJyZW50RGF0ZV86bnVsbCxkYXlOYW1lRm9ybWF0XzpcInNob3J0XCIsZW5hYmxlRHJhZ186ITAsZXZlbnRCb3JkZXJfOm51bGwsZXZlbnREcmFnWm9uZTpudWxsLGV2ZW50U3RvcmVfOm51bGwsZmlyc3RDb2x1bW5EYXRlOm51bGwsaGVhZGVyQ3JlYXRlZDohMSxpbnRsRm9ybWF0X2RheTpudWxsLGludGxGb3JtYXRfdGltZV86bnVsbCxpc1VwZGF0aW5nOiExLGxvY2FsZV86TmVvLmNvbmZpZy5sb2NhbGUsbWluaW11bUV2ZW50RHVyYXRpb246MzAsbmVlZHNFdmVudFVwZGF0ZTohMSxvd25lcjpudWxsLHBsdWdpbkRyYWdEcm9wQ29uZmlnOm51bGwscGx1Z2luRXZlbnRSZXNpemFibGVDb25maWc6bnVsbCxzaG93RXZlbnRFbmRUaW1lXzohMSxzaG93V2Vla2VuZHNfOiEwLHRpbWVBeGlzOm51bGwsdGltZUF4aXNDb25maWc6bnVsbCx0aW1lQXhpc1Bvc2l0aW9uXzpcInN0YXJ0XCIsdG90YWxDb2x1bW5zOm51bGwsdXBkYXRlRGVwdGg6LTEsdmRvbTp7Y246W3tjbHM6W1wibmVvLXNjcm9sbC1vdmVybGF5XCJdfSx7Y2xzOltcIm5lby1jLXctc2Nyb2xsY29udGFpbmVyXCJdLGZsYWc6XCJuZW8tYy13LXNjcm9sbGNvbnRhaW5lclwiLGNuOlt7Y2xzOltcIm5lby1oZWFkZXItcm93XCJdLGZsYWc6XCJuZW8taGVhZGVyLXJvd1wiLGNuOltdfSx7Y2xzOltcIm5lby1jLXctY29sdW1uLXRpbWVheGlzLWNvbnRhaW5lclwiXSxmbGFnOlwibmVvLWMtdy1jb2x1bW4tdGltZWF4aXMtY29udGFpbmVyXCIsY246W3tjbHM6W1wibmVvLWMtdy1jb2x1bW4tY29udGFpbmVyXCJdLGZsYWc6XCJuZW8tYy13LWNvbHVtbi1jb250YWluZXJcIixzdHlsZTp7fSxjbjpbXX1dfV19XX0sd2Vla1N0YXJ0RGF5XzowfTtjb25zdHJ1Y3QoZSl7c3VwZXIuY29uc3RydWN0KGUpO2xldCB0PXRoaXM7dC5hZGREb21MaXN0ZW5lcnMoW3tkYmxjbGljazp0Lm9uRXZlbnREb3VibGVDbGljayxzY29wZTp0LGRlbGVnYXRlOlwiLm5lby1ldmVudFwifSx7d2hlZWw6dC5vbldoZWVsLHNjb3BlOnR9XSksdC50aW1lQXhpcz1OZW8uY3JlYXRlKHttb2R1bGU6byxhcHBOYW1lOnQuYXBwTmFtZSxwYXJlbnRJZDp0LmlkLGxpc3RlbmVyczp7Y2hhbmdlOnQub25UaW1lQXhpc0NoYW5nZSxzY29wZTp0fSx3aW5kb3dJZDp0LndpbmRvd0lkLC4uLnQudGltZUF4aXNDb25maWd9KSx0LmdldENvbHVtblRpbWVBeGlzQ29udGFpbmVyKCkuY25bXCJzdGFydFwiPT09dC50aW1lQXhpc1Bvc2l0aW9uP1widW5zaGlmdFwiOlwicHVzaFwiXSh0LnRpbWVBeGlzLmNyZWF0ZVZkb21SZWZlcmVuY2UoKSksdC5jYWxlbmRhclN0b3JlLmdldENvdW50KCk+MCYmdC5ldmVudFN0b3JlLmdldENvdW50KCk+MCYmKHQubmVlZHNFdmVudFVwZGF0ZT0hMCksdC51cGRhdGVIZWFkZXIoITAsdC5uZWVkc0V2ZW50VXBkYXRlKSx0Lm5lZWRzRXZlbnRVcGRhdGUmJnQudXBkYXRlRXZlbnRzKCExKSx0LmhlYWRlckNyZWF0ZWQ9ITB9YWRqdXN0VG90YWxIZWlnaHQoZSx0PSExKXtsZXR7cm93SGVpZ2h0Om4scm93c1Blckl0ZW06b309ZSxhPWUudG90YWxIZWlnaHQtbixyPTAsaT1bXTtmb3IoO3I8bztyKyspaS5wdXNoKGB2YXIoLS1jLXctYmFja2dyb3VuZC1jb2xvcikgJHtyKm4rcn1weGAsYHZhcigtLWMtdy1iYWNrZ3JvdW5kLWNvbG9yKSAkeyhyKzEpKm4rcn1weGAsXCJ2YXIoLS1jLXctYm9yZGVyLWNvbG9yKSAwXCIpO09iamVjdC5hc3NpZ24odGhpcy5nZXRDb2x1bW5Db250YWluZXIoKS5zdHlsZSx7YmFja2dyb3VuZEltYWdlOmBsaW5lYXItZ3JhZGllbnQoJHtpLmpvaW4oXCIsXCIpfSlgLGJhY2tncm91bmRTaXplOmAxcHggJHtvKm4rb31weGAsaGVpZ2h0OmAke2F9cHhgLG1heEhlaWdodDpgJHthfXB4YH0pLCF0JiZ0aGlzLnVwZGF0ZSgpfWFmdGVyU2V0Q2FsZW5kYXJTdG9yZShlLHQpe2xldCBuPXRoaXMsbz17bG9hZDpuLm9uQ2FsZW5kYXJTdG9yZUxvYWQscmVjb3JkQ2hhbmdlOm4ub25DYWxlbmRhclN0b3JlUmVjb3JkQ2hhbmdlLHNjb3BlOm59O3Q/LnVuKG8pLGU/Lm9uKG8pfWFmdGVyU2V0Q29sdW1uc0J1ZmZlcihlLHQpe3RoaXMudG90YWxDb2x1bW5zPXRoaXMudmlzaWJsZUNvbHVtbnMrMiplfWFmdGVyU2V0Q29sdW1uc1Zpc2libGUoZSx0KXt0aGlzLnRvdGFsQ29sdW1ucz0yKnRoaXMuY29sdW1uc0J1ZmZlcitlfWFmdGVyU2V0Q3VycmVudERhdGUoZSx0KXtsZXQgbj10aGlzO24uaXNDb25zdHJ1Y3RlZCYmKG4udXBkYXRlSGVhZGVyKCExLCEwKSxuLnVwZGF0ZUV2ZW50cygpKX1hZnRlclNldERheU5hbWVGb3JtYXQoZSx0KXtsZXQgbj10aGlzO24uaW50bEZvcm1hdF9kYXk9bmV3IEludGwuRGF0ZVRpbWVGb3JtYXQobi5sb2NhbGUse3dlZWtkYXk6ZX0pLHQmJm4udXBkYXRlSGVhZGVyKCl9YWZ0ZXJTZXRFbmFibGVEcmFnKGUsdCl7ZSYmIXRoaXMuZ2V0UGx1Z2luKFwiY2FsZW5kYXItd2Vlay1kcmFnZHJvcFwiKSYmUHJvbWlzZS5hbGwoW2ltcG9ydChcIi4vcGx1Z2luL0RyYWdEcm9wLm1qc1wiKSxpbXBvcnQoXCIuL3BsdWdpbi9FdmVudFJlc2l6YWJsZS5tanNcIildKS50aGVuKGU9PntsZXQgdD10aGlzLHthcHBOYW1lOm59PXQsbz10LnBsdWdpbnN8fFtdO28ucHVzaCh7bW9kdWxlOmVbMF0uZGVmYXVsdCxhcHBOYW1lOm4sLi4udC5wbHVnaW5EcmFnRHJvcENvbmZpZ30se21vZHVsZTplWzFdLmRlZmF1bHQsYXBwTmFtZTpuLGRlbGVnYXRpb25DbHM6XCJuZW8tZXZlbnRcIixkaXJlY3Rpb25zOltcImJcIixcInRcIl0sLi4udC5wbHVnaW5FdmVudFJlc2l6YWJsZUNvbmZpZ30pLHQucGx1Z2lucz1vfSl9YWZ0ZXJTZXRFdmVudEJvcmRlcihlLHQpe2xldHtjbHM6b309dGhpczt0JiZuLnJlbW92ZShvLGBuZW8tZXZlbnQtYm9yZGVyLSR7dH1gKSxlJiZuLmFkZChvLGBuZW8tZXZlbnQtYm9yZGVyLSR7ZX1gKSx0aGlzLmNscz1vfWFmdGVyU2V0RXZlbnRTdG9yZShlLHQpe2xldCBuPXRoaXMsbz17bG9hZDpuLm9uRXZlbnRTdG9yZUxvYWQscmVjb3JkQ2hhbmdlOm4ub25FdmVudFN0b3JlUmVjb3JkQ2hhbmdlLHNjb3BlOm59O3Q/LnVuKG8pLGU/Lm9uKG8pfWFmdGVyU2V0TG9jYWxlKGUsdCl7aWYodCl7bGV0IHQ9dGhpczt0LmludGxGb3JtYXRfZGF5PW5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KGUse3dlZWtkYXk6dC5kYXlOYW1lRm9ybWF0fSksdC51cGRhdGVIZWFkZXIoKX19YXN5bmMgYWZ0ZXJTZXRNb3VudGVkKGUsdCl7c3VwZXIuYWZ0ZXJTZXRNb3VudGVkKGUsdCk7bGV0IG4sbyxhPXRoaXM7ZSYmKGEubmVlZHNFdmVudFVwZGF0ZSYmKGEudXBkYXRlRXZlbnRzKCksYS5uZWVkc0V2ZW50VXBkYXRlPSExKSxhd2FpdCBhLnRpbWVvdXQoMTAwKSxvPWF3YWl0IGEuZ2V0RG9tUmVjdChhLmdldENvbHVtbkNvbnRhaW5lcigpLmlkKSxuPWEuZ2V0U2Nyb2xsQ29udGFpbmVyKCkuaWQsbiYmTmVvLm1haW4uRG9tQWNjZXNzLnNjcm9sbEJ5KHthcHBOYW1lOmEuYXBwTmFtZSxkaXJlY3Rpb246XCJsZWZ0XCIsaWQ6bix2YWx1ZTpvLndpZHRoKmEuY29sdW1uc0J1ZmZlci9hLmNvbHVtbnNWaXNpYmxlLzN9KSl9YWZ0ZXJTZXRTaG93RXZlbnRFbmRUaW1lKGUsdCl7dm9pZCAwIT09dCYmdGhpcy51cGRhdGVFdmVudHMoKX1hZnRlclNldFNob3dXZWVrZW5kcyhlLHQpe2xldCBvPXRoaXMse2NsczphfT1vO25bZT9cImFkZFwiOlwicmVtb3ZlXCJdKGEsXCJuZW8tc2hvdy13ZWVrZW5kc1wiKSxvLl9jbHM9YSx2b2lkIDAhPT10JiYoby51cGRhdGVIZWFkZXIoITEsITApLG8udXBkYXRlRXZlbnRzKCkpfWFmdGVyU2V0VGltZUF4aXNQb3NpdGlvbihlLHQpe2xldCBvPXRoaXMse2NsczphfT1vLHI9by5nZXRDb2x1bW5UaW1lQXhpc0NvbnRhaW5lcigpO25bXCJlbmRcIj09PWU/XCJhZGRcIjpcInJlbW92ZVwiXShhLFwibmVvLXRpbWVheGlzLWVuZFwiKSx2b2lkIDAhPT10JiZyLmNuLnVuc2hpZnQoci5jbi5wb3AoKSksby5jbHM9YSxvLnVwZGF0ZSgpfWFmdGVyU2V0V2Vla1N0YXJ0RGF5KGUsdCl7dm9pZCAwIT09dCYmKHRoaXMudXBkYXRlSGVhZGVyKCExLCEwKSx0aGlzLnVwZGF0ZUV2ZW50cygpKX1iZWZvcmVTZXREYXlOYW1lRm9ybWF0KGUsbil7cmV0dXJuIHRoaXMuYmVmb3JlU2V0RW51bVZhbHVlKGUsbixcImRheU5hbWVGb3JtYXRcIix0LnByb3RvdHlwZS5kYXlOYW1lRm9ybWF0cyl9YmVmb3JlU2V0VGltZUF4aXNQb3NpdGlvbihlLHQpe3JldHVybiB0aGlzLmJlZm9yZVNldEVudW1WYWx1ZShlLHQsXCJ0aW1lQXhpc1Bvc2l0aW9uXCIpfWJlZm9yZVNldFdlZWtTdGFydERheShlLG4pe3JldHVybiB0aGlzLmJlZm9yZVNldEVudW1WYWx1ZShlLG4sXCJ3ZWVrU3RhcnREYXlcIix0LnByb3RvdHlwZS53ZWVrU3RhcnREYXlzKX1jcmVhdGVDb2x1bW5BbmRIZWFkZXIoZSl7bGV0IG4sbyxhPXRoaXMscj1bXCJuZW8tYy13LWNvbHVtblwiLFwibmVvLWRyYWdnYWJsZVwiXSxkPWUuZ2V0RGF0ZSgpLG09ZS5nZXREYXkoKSxjPVtcIm5lby1kYXRlXCJdLHU9ITE7cmV0dXJuIDAhPT1tJiY2IT09bXx8KHIucHVzaChcIm5lby13ZWVrZW5kXCIpLCFhLnNob3dXZWVrZW5kcyYmKHU9ITApKSxkPT09aSYmZS5nZXRNb250aCgpPT09bCYmZS5nZXRGdWxsWWVhcigpPT09cyYmYy5wdXNoKFwibmVvLXRvZGF5XCIpLG49e2NsczpyLGZsYWc6dC5jb252ZXJ0VG95eXl5bW1kZChlKSxyZW1vdmVEb206dX0sbz17Y2xzOltcIm5lby1oZWFkZXItcm93LWl0ZW1cIl0scmVtb3ZlRG9tOnUsY246W3tjbHM6W1wibmVvLWRheVwiXSxodG1sOmEuaW50bEZvcm1hdF9kYXkuZm9ybWF0KGUpfSx7Y2xzOmMsaHRtbDpkfV19LHtjb2x1bW46bixoZWFkZXI6b319ZGVzdHJveSguLi5lKXt0aGlzLnRpbWVBeGlzPW51bGwsc3VwZXIuZGVzdHJveSguLi5lKX1nZXRDb2x1bW5Db250YWluZXIoKXtyZXR1cm4gYS5nZXRCeUZsYWcodGhpcy52ZG9tLFwibmVvLWMtdy1jb2x1bW4tY29udGFpbmVyXCIpfWdldENvbHVtbklkKGUpe3JldHVybmAke3RoaXMuaWR9X2NvbF8ke3QuY29udmVydFRveXl5eW1tZGQoZSl9YH1nZXRDb2x1bW5IZWFkZXJJZChlKXtyZXR1cm5gJHt0aGlzLmlkfV9jaF8ke3QuY29udmVydFRveXl5eW1tZGQoZSl9YH1nZXRDb2x1bW5UaW1lQXhpc0NvbnRhaW5lcigpe3JldHVybiBhLmdldEJ5RmxhZyh0aGlzLnZkb20sXCJuZW8tYy13LWNvbHVtbi10aW1lYXhpcy1jb250YWluZXJcIil9Z2V0RXZlbnRJZChlKXtyZXR1cm5gJHt0aGlzLmlkfV9fJHtlfWB9Z2V0SGVhZGVyQ29udGFpbmVyKCl7cmV0dXJuIGEuZ2V0QnlGbGFnKHRoaXMudmRvbSxcIm5lby1oZWFkZXItcm93XCIpfWdldElkS2V5KCl7cmV0dXJuXCJjLXdcIn1nZXRTY3JvbGxDb250YWluZXIoKXtyZXR1cm4gYS5nZXRCeUZsYWcodGhpcy52ZG9tLFwibmVvLWMtdy1zY3JvbGxjb250YWluZXJcIil9b25DYWxlbmRhclN0b3JlTG9hZChlKXt0aGlzLmV2ZW50U3RvcmUuZ2V0Q291bnQoKT4wJiZ0aGlzLnVwZGF0ZUV2ZW50cygpfW9uQ2FsZW5kYXJTdG9yZVJlY29yZENoYW5nZShlKXt0aGlzLnVwZGF0ZUV2ZW50cygpfW9uRXZlbnREb3VibGVDbGljayhlKXtpZih0aGlzLmRhdGEuZXZlbnRzLmVuYWJsZUVkaXQpe2xldHtwYXRoOnR9PWU7IXRbMF0uY2xzLmluY2x1ZGVzKFwibmVvLWV2ZW50XCIpJiZ0LnNoaWZ0KCk7bGV0IG49dGhpcyx7ZWRpdEV2ZW50Q29udGFpbmVyOm99PW4ub3duZXIscj10WzBdLGk9YS5maW5kKG4udmRvbSxyLmlkKS52ZG9tLGw9bi5ldmVudFN0b3JlLmdldChpLmZsYWcpLHtzdHlsZTpzfT1vO09iamVjdC5hc3NpZ24ocyx7bGVmdDpgJHtyLnJlY3Qud2lkdGgrMTV9cHhgLHRvcDppLnN0eWxlLnRvcH0pLG8uc2V0U2lsZW50KHtwYXJlbnRJZDp0WzFdLmlkLHJlY29yZDpsLHN0eWxlOnN9KSxvLnJlbmRlcighMCl9fW9uRXZlbnRTdG9yZUxvYWQoZSl7dGhpcy5jYWxlbmRhclN0b3JlLmdldENvdW50KCk+MCYmdGhpcy51cGRhdGVFdmVudHMoKX1vbkV2ZW50U3RvcmVSZWNvcmRDaGFuZ2UoZSl7dGhpcy51cGRhdGVFdmVudHMoKX1vbkZvY3VzQ2hhbmdlKGUpe2xldHtvbGRQYXRoOnQscGF0aDpufT1lO3Q/LlswXT8uY2xzLmluY2x1ZGVzKFwibmVvLWV2ZW50XCIpJiZOZW8uYXBwbHlEZWx0YXModGhpcy5hcHBOYW1lLHtpZDp0WzBdLmlkLGNsczp7cmVtb3ZlOltcIm5lby1mb2N1c1wiXX19KSxuPy5bMF0/LmNscy5pbmNsdWRlcyhcIm5lby1ldmVudFwiKSYmTmVvLmFwcGx5RGVsdGFzKHRoaXMuYXBwTmFtZSx7aWQ6blswXS5pZCxjbHM6e2FkZDpbXCJuZW8tZm9jdXNcIl19fSl9b25UaW1lQXhpc0NoYW5nZShlKXtsZXQgdD10aGlzO3QuYWRqdXN0VG90YWxIZWlnaHQoZSx0LmhlYWRlckNyZWF0ZWQpLHQuaGVhZGVyQ3JlYXRlZCYmdC51cGRhdGVFdmVudHMoKX1vbldoZWVsKGUpe2lmKCF0aGlzLmlzVXBkYXRpbmcmJk1hdGguYWJzKGUuZGVsdGFYKT5NYXRoLmFicyhlLmRlbHRhWSkpe2xldCB0LG4sbyxhPXRoaXMscj1hLmdldENvbHVtbkNvbnRhaW5lcigpLHtjb2x1bW5zQnVmZmVyOmksY29sdW1uc1Zpc2libGU6bCxmaXJzdENvbHVtbkRhdGU6c309YSxkPWEuZ2V0SGVhZGVyQ29udGFpbmVyKCksbT0wLGM9NTAsdT1lLmNsaWVudFdpZHRoLWM7aWYoZS5kZWx0YVg+MCYmTWF0aC5yb3VuZChlLnNjcm9sbExlZnQvdSppKT5pK2wtMSl7Zm9yKG49bmV3IERhdGUoci5jbltyLmNuLmxlbmd0aC0xXS5mbGFnKSxyLmNuLnNwbGljZSgwLGkpLGQuY24uc3BsaWNlKDAsaSk7bTxpO20rKyluLnNldERhdGUobi5nZXREYXRlKCkrMSksdD1hLmNyZWF0ZUNvbHVtbkFuZEhlYWRlcihuKSxyLmNuLnB1c2godC5jb2x1bW4pLGQuY24ucHVzaCh0LmhlYWRlcik7cy5zZXREYXRlKHMuZ2V0RGF0ZSgpK2kpLGEudGltZW91dCg1MCkudGhlbigoKT0+e2EudXBkYXRlRXZlbnRzKCExLGkrbCxhLnRvdGFsQ29sdW1ucyl9KSxvPS11fWVsc2UgaWYoZS5kZWx0YVg8MCYmTWF0aC5yb3VuZChlLnNjcm9sbExlZnQvdSppKTwxKXtmb3Iobj1uZXcgRGF0ZShyLmNuWzBdLmZsYWcpLHIuY24ubGVuZ3RoPWkrbCxkLmNuLmxlbmd0aD1pK2w7bTxpO20rKyluLnNldERhdGUobi5nZXREYXRlKCktMSksdD1hLmNyZWF0ZUNvbHVtbkFuZEhlYWRlcihuKSxyLmNuLnVuc2hpZnQodC5jb2x1bW4pLGQuY24udW5zaGlmdCh0LmhlYWRlcik7cy5zZXREYXRlKHMuZ2V0RGF0ZSgpLWkpLGEudGltZW91dCg1MCkudGhlbigoKT0+e2EudXBkYXRlRXZlbnRzKCExLDAsaSl9KSxvPXV9byYmKGEuaXNVcGRhdGluZz0hMCxhLnByb21pc2VVcGRhdGUoKS50aGVuKCgpPT57TmVvLm1haW4uRG9tQWNjZXNzLnNjcm9sbEJ5KHtkaXJlY3Rpb246XCJsZWZ0XCIsaWQ6YS5nZXRTY3JvbGxDb250YWluZXIoKS5pZCx2YWx1ZTpvfSkudGhlbigoKT0+e2EuaXNVcGRhdGluZz0hMX0pfSkpfX1zZXRGaXJzdENvbHVtbkRhdGUoZSl7ZS5zZXREYXRlKGUuZ2V0RGF0ZSgpLWUuZ2V0RGF5KCkrdGhpcy53ZWVrU3RhcnREYXktdGhpcy5jb2x1bW5zQnVmZmVyKX11cGRhdGVFdmVudHMoZT0hMSxuPTAsbz10aGlzLnRvdGFsQ29sdW1ucyl7bGV0IGE9dGhpcztpZihhLm1vdW50ZWQpe2xldCByLGksbCxzLGQsbSxjLHUsaCxnLHAsdixmLEMsRCx5LHtjYWxlbmRhclN0b3JlOncsZXZlbnRTdG9yZTpTLHNob3dFdmVudEVuZFRpbWU6RSx0aW1lQXhpczpfLHZkb206Yn09YSx4PV8uZ2V0VGltZShhLmVuZFRpbWUpLGs9Xy5nZXRUaW1lKGEuc3RhcnRUaW1lKSxGPXgtayxIPXQuY2xvbmUoYS5maXJzdENvbHVtbkRhdGUpLFQ9YS5nZXRDb2x1bW5Db250YWluZXIoKSwkPW47Zm9yKEguc2V0RGF0ZShILmdldERhdGUoKStuKTskPG87JCsrKXtmb3IoaT1ULmNuWyRdLGkuY249W10sbD1TLmdldERheVJlY29yZHMoSCkscD1sLmxlbmd0aCxnPTA7ZzxwO2crKylpZih2PWxbZ10scj13LmdldCh2LmNhbGVuZGFySWQpLHI/LmFjdGl2ZSl7aWYoZD12LmVuZERhdGUsQz12LnN0YXJ0RGF0ZSx4PD1DLmdldEhvdXJzKCl8fGs+PWQuZ2V0SG91cnMoKSljb250aW51ZTt4PGQuZ2V0SG91cnMoKSYmKGQ9dC5jbG9uZShkKSxkLnNldEhvdXJzKHgpLGQuc2V0TWludXRlcygwKSksaz5DLmdldEhvdXJzKCkmJihDPXQuY2xvbmUoQyksQy5zZXRIb3VycyhrKSxDLnNldE1pbnV0ZXMoMCkpLHM9KGQtQykvNjAvNjAvMWUzLG09W1wibmVvLWV2ZW50XCIsXCJuZW8tZHJhZ2dhYmxlXCIsYG5lby0ke3IuY29sb3J9YF0sYz02MCpzL18uaW50ZXJ2YWwsdT0hMSxoPU1hdGgucm91bmQocy9GKjEwMCoxZTMpLzFlMyxmPXZbUy5rZXlQcm9wZXJ0eV0sRD0oNjAqQy5nZXRIb3VycygpK0MuZ2V0TWludXRlcygpKS82MCx5PU1hdGgucm91bmQoKEQtaykvRioxMDAqMWUzKS8xZTMsYzw9MiYmKHU9Xy5yb3dIZWlnaHQqYzwoRT81MDozNCksIXV8fEUmJl8ucm93SGVpZ2h0L2M+PTM0fHxtLnB1c2goXCJuZW8tb3ZlcmZsb3dcIikpLEU9ISh1JiYxPT09Y3x8IUUpLEUmJm0ucHVzaChcIm5lby1zaG93LWVuZC10aW1lXCIpLGkuY24ucHVzaCh7Y2xzOm0sZmxhZzpmLGlkOmEuZ2V0RXZlbnRJZChmKSx0YWJJbmRleDotMSxjbjpbe2NsczpbXCJuZW8tZXZlbnQtdGltZVwiXSxodG1sOmEuaW50bEZvcm1hdF90aW1lLmZvcm1hdCh2LnN0YXJ0RGF0ZSksaWQ6YCR7YS5pZH1fX3RpbWVfXyR7Zn1gfSx7Y2xzOltcIm5lby1ldmVudC10aXRsZVwiXSxodG1sOnYudGl0bGUsaWQ6YCR7YS5pZH1fX3RpdGxlX18ke2Z9YH0se2NsczpbXCJuZW8tZXZlbnQtdGltZVwiLFwibmVvLWV2ZW50LWVuZC10aW1lXCJdLGh0bWw6YS5pbnRsRm9ybWF0X3RpbWUuZm9ybWF0KHYuZW5kRGF0ZSksaWQ6YCR7YS5pZH1fX2VuZGRhdGVfXyR7Zn1gLHJlbW92ZURvbTohRX1dLHN0eWxlOntoZWlnaHQ6YGNhbGMoJHtofSUgLSAycHgpYCx0b3A6YGNhbGMoJHt5fSUgKyAxcHgpYCx3aWR0aDpcImNhbGMoMTAwJSAtIDFweClcIn19KX1ILnNldERhdGUoSC5nZXREYXRlKCkrMSl9IWUmJmEudXBkYXRlKCl9ZWxzZSBhLm5lZWRzRXZlbnRVcGRhdGU9ITB9dXBkYXRlSGVhZGVyKGU9ITEsbj0hMSl7bGV0IG8sYSxyLGQsbSxjLHU9dGhpcyx7c2hvd1dlZWtlbmRzOmh9PXUsZz11LmN1cnJlbnREYXRlLHA9dS5nZXRDb2x1bW5Db250YWluZXIoKSx2PXUuZ2V0SGVhZGVyQ29udGFpbmVyKCksZj0wO2Zvcih1LnNldEZpcnN0Q29sdW1uRGF0ZShnKSx1LmZpcnN0Q29sdW1uRGF0ZT10LmNsb25lKGcpO2Y8dS50b3RhbENvbHVtbnM7ZisrKW89W1wibmVvLWMtdy1jb2x1bW5cIixcIm5lby1kcmFnZ2FibGVcIl0sYT1nLmdldERhdGUoKSxyPWcuZ2V0RGF5KCksZD1bXCJuZW8tZGF0ZVwiXSxjPSExLDAhPT1yJiY2IT09cnx8KG8ucHVzaChcIm5lby13ZWVrZW5kXCIpLCFoJiYoYz0hMCkpLGE9PT1pJiZnLmdldE1vbnRoKCk9PT1sJiZnLmdldEZ1bGxZZWFyKCk9PT1zJiZkLnB1c2goXCJuZW8tdG9kYXlcIiksbT11LmdldENvbHVtbkhlYWRlcklkKGcpLGU/KHAuY24ucHVzaCh7Y2xzOm8sZmxhZzp0LmNvbnZlcnRUb3l5eXltbWRkKGcpLGlkOnUuZ2V0Q29sdW1uSWQoZykscmVtb3ZlRG9tOmN9KSx2LmNuLnB1c2goe2NsczpbXCJuZW8taGVhZGVyLXJvdy1pdGVtXCJdLGlkOm0scmVtb3ZlRG9tOmMsY246W3tjbHM6W1wibmVvLWRheVwiXSxodG1sOnUuaW50bEZvcm1hdF9kYXkuZm9ybWF0KGcpLGlkOmAke219X2RheWB9LHtjbHM6ZCxodG1sOmEsaWQ6YCR7bX1fZGF0ZWB9XX0pKTooT2JqZWN0LmFzc2lnbihwLmNuW2ZdLHtjbHM6byxmbGFnOnQuY29udmVydFRveXl5eW1tZGQoZyksaWQ6dS5nZXRDb2x1bW5JZChnKSxyZW1vdmVEb206Y30pLE9iamVjdC5hc3NpZ24odi5jbltmXSx7aWQ6bSxyZW1vdmVEb206Y30pLE9iamVjdC5hc3NpZ24odi5jbltmXS5jblswXSx7aHRtbDp1LmludGxGb3JtYXRfZGF5LmZvcm1hdChnKSxpZDpgJHttfV9kYXlgfSksT2JqZWN0LmFzc2lnbih2LmNuW2ZdLmNuWzFdLHtjbHM6ZCxodG1sOmEsaWQ6YCR7bX1fZGF0ZWB9KSksZy5zZXREYXRlKGcuZ2V0RGF0ZSgpKzEpOyFuJiZ1LnVwZGF0ZSgpfX1leHBvcnQgZGVmYXVsdCBOZW8uc2V0dXBDbGFzcyhkKTsiLCJpbXBvcnQgZSBmcm9tXCIuLi8uLi8uLi9jb21wb25lbnQvQmFzZS5tanNcIjtleHBvcnQgZGVmYXVsdCBOZW8uc2V0dXBDbGFzcyhjbGFzcyBleHRlbmRzIGV7c3RhdGljIGludGVydmFscz1bMTUsMzAsNjBdO3N0YXRpYyBjb25maWc9e2NsYXNzTmFtZTpcIk5lby5jYWxlbmRhci52aWV3LndlZWsuVGltZUF4aXNDb21wb25lbnRcIixiYXNlQ2xzOltcIm5lby1jYWxlbmRhci10aW1lYXhpc1wiXSxiaW5kOntlbmRUaW1lOmU9PmUuZW5kVGltZSxzdGFydFRpbWU6ZT0+ZS5zdGFydFRpbWV9LGVuZFRpbWVfOlwiMjQ6MDBcIixpbnRlcnZhbF86MzAscm93SGVpZ2h0XzoyMCxzdGFydFRpbWVfOlwiMDA6MDBcIix2ZG9tOntzdHlsZTp7fX19O2NvbnN0cnVjdChlKXtzdXBlci5jb25zdHJ1Y3QoZSk7bGV0IHQ9dGhpczt0LmNyZWF0ZUl0ZW1zKCksdC5hZnRlclNldFJvd0hlaWdodCh0LnJvd0hlaWdodCwwKX1hZnRlclNldEVuZFRpbWUoZSx0KXtpZih2b2lkIDAhPT10KXtsZXQgdD10aGlzO2V8fCh0Ll9lbmRUaW1lPVwiMjQ6MDBcIiksdC5hZnRlclNldFJvd0hlaWdodCh0LnJvd0hlaWdodCwwKX19YWZ0ZXJTZXRJbnRlcnZhbChlLHQpe3ZvaWQgMCE9PXQmJnRoaXMuYWZ0ZXJTZXRSb3dIZWlnaHQodGhpcy5yb3dIZWlnaHQsMCl9YWZ0ZXJTZXRSb3dIZWlnaHQoZSx0KXtpZih2b2lkIDAhPT10JiZ0aGlzLnZkb20uY24pe2xldCBlLHQsaT10aGlzLHI9aS5nZXRUaW1lKGkuZW5kVGltZSksbz1pLmdldFRpbWUoaS5zdGFydFRpbWUpLHtyb3dIZWlnaHQ6YSx2ZG9tOnN9PWksbj1pLmdldFJvd3NQZXJJdGVtKCksbT1uKmErbixjPWErKHItbykqbTtmb3IoT2JqZWN0LmFzc2lnbihzLnN0eWxlLHtiYWNrZ3JvdW5kSW1hZ2U6YGxpbmVhci1ncmFkaWVudCh2YXIoLS1jLXctYmFja2dyb3VuZC1jb2xvcikgJHttLTF9cHgsIHZhcigtLWMtdy1ib3JkZXItY29sb3IpIDFweClgLGJhY2tncm91bmRQb3NpdGlvblk6MS1tK1wicHhcIixiYWNrZ3JvdW5kU2l6ZTpgMC40ZW0gJHttfXB4YCxoZWlnaHQ6Yy1hKzErXCJweFwiLG1heEhlaWdodDpjLWErMStcInB4XCJ9KSxlPTA7ZTwyNTtlKyspdD17aGVpZ2h0OmAke219cHhgfSxlPT09bz90Lm1hcmdpblRvcD0tMi1hKigxPT09bj8uNToyPT09bj8xOjIpK1wicHhcIjpkZWxldGUgdC5tYXJnaW5Ub3Ascy5jbltlXS5zdHlsZT10LHMuY25bZV0ucmVtb3ZlRG9tPWU8b3x8ZS0xPj1yO2kuZmlyZShcImNoYW5nZVwiLHtjb21wb25lbnQ6aSxyb3dIZWlnaHQ6YSxyb3dzUGVySXRlbTpuLHRvdGFsSGVpZ2h0OmN9KX19YWZ0ZXJTZXRTdGFydFRpbWUoZSx0KXt2b2lkIDAhPT10JiZ0aGlzLmFmdGVyU2V0Um93SGVpZ2h0KHRoaXMucm93SGVpZ2h0LDApfWJlZm9yZVNldEludGVydmFsKGUsdCl7cmV0dXJuIHRoaXMuYmVmb3JlU2V0RW51bVZhbHVlKGUsdCxcImludGVydmFsXCIpfWNyZWF0ZUl0ZW1zKCl7bGV0IGUsdCx7dmRvbTppfT10aGlzO2ZvcihpLmNuPVtdLHQ9MDt0PDI1O3QrKyllPTI0PT09dD9cIjAwOjAwXCI6KHQ8MTA/XCIwXCI6XCJcIikrdCtcIjowMFwiLGkuY24ucHVzaCh7Y2xzOltcIm5lby1jLXctdGltZWF4aXMtaXRlbVwiXSxjbjpbe2h0bWw6ZX1dfSl9Z2V0Um93c1Blckl0ZW0oKXtsZXR7aW50ZXJ2YWw6ZX09dGhpcztyZXR1cm4gNjA9PT1lPzE6MzA9PT1lPzI6NH1nZXRUaW1lKGUpe3JldHVybiBlLnNwbGl0KFwiOlwiKS5tYXAoTnVtYmVyKVswXX19KTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=