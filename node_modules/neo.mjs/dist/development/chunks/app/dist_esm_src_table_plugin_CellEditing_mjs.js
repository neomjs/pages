"use strict";
(self["webpackChunkneo_mjs"] = self["webpackChunkneo_mjs"] || []).push([["dist_esm_src_table_plugin_CellEditing_mjs"],{

/***/ "./dist/esm/src/plugin/Base.mjs":
/*!**************************************!*\
  !*** ./dist/esm/src/plugin/Base.mjs ***!
  \**************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _core_Base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/Base.mjs */ "./dist/esm/src/core/Base.mjs");
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(class extends _core_Base_mjs__WEBPACK_IMPORTED_MODULE_0__["default"]{static config={className:"Neo.plugin.Base",ntype:"plugin",owner:null,windowId_:null};construct(e){super.construct(e);let n=this,{owner:o}=n;o.isConstructed?n.onOwnerConstructed():o.on("constructed",()=>{n.onOwnerConstructed()},n,{once:!0}),o.mounted?n.onOwnerMounted():o.on("mounted",n.onOwnerMounted,n)}afterSetWindowId(e,n){e&&Neo.currentWorker.insertThemeFiles(e,this.__proto__)}onOwnerConstructed(){let{owner:e}=this;e.windowId&&(this.windowId=e.windowId)}onOwnerMounted(){}}));

/***/ }),

/***/ "./dist/esm/src/table/plugin/CellEditing.mjs":
/*!***************************************************!*\
  !*** ./dist/esm/src/table/plugin/CellEditing.mjs ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _plugin_Base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../plugin/Base.mjs */ "./dist/esm/src/plugin/Base.mjs");
/* harmony import */ var _form_field_Text_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../form/field/Text.mjs */ "./dist/esm/src/form/field/Text.mjs");
/* harmony import */ var _util_VDom_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../util/VDom.mjs */ "./dist/esm/src/util/VDom.mjs");
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(class extends _plugin_Base_mjs__WEBPACK_IMPORTED_MODULE_0__["default"]{static config={className:"Neo.table.plugin.CellEditing",ntype:"plugin-table-cell-editing",cellCls:"neo-table-cell",disabled_:!1,editorCls:["neo-table-editor"],focusCells:!0};editors={};mountedEditor=null;construct(e){super.construct(e);let t=this,{owner:o}=t,{selectionModel:i}=o;o.on({cellDoubleClick:t.onCellDoubleClick,focusLeave:t.onFocusLeave,selectionModelChange:t.onSelectionModelChange,scope:t}),"NeoInstance"===Neo.typeOf(i)&&t.onSelectionModelChange({value:i}),o.body.keys.add({Enter:"onTableKeyDown",Space:"onTableKeyDown",scope:t})}afterSetDisabled(e,t){t&&this.unmountEditor()}destroy(...e){Object.values(this.editors).forEach(e=>{e.destroy(!1,!0)}),super.destroy(...e)}async mountEditor(e,i){if(this.disabled)return;let l,n=this,{appName:d,windowId:a}=n,{body:s}=n.owner,r=s.getCellId(e,i),c=_util_VDom_mjs__WEBPACK_IMPORTED_MODULE_2__["default"].find(s.vdom,r).vdom,u=n.owner.headerToolbar.getColumn(i),m=n.editors[i],E=e[i];n.mountedEditor&&(await n.unmountEditor(),await n.timeout(10)),u.editable&&(m?(m.originalConfig.value=E,m.setSilent({record:e,value:E})):(n.editors[i]=m=Neo.create({module:_form_field_Text_mjs__WEBPACK_IMPORTED_MODULE_1__["default"],appName:d,cls:n.editorCls,dataField:i,hideLabel:!0,parentId:s.id,record:e,value:E,windowId:a,...u.editor}),l={Enter:"onEditorKeyEnter",Escape:"onEditorKeyEscape",Tab:"onEditorKeyTab",scope:n},m.keys?m.keys.add(l):m.keys=l),n.mountedEditor=m,c.cn=[m.createVdomReference()],delete c.html,s.updateDepth=-1,await s.promiseUpdate(),await n.timeout(30),m.focus())}async onCellDoubleClick({body:e,data:t,dataField:o,record:i}){await this.mountEditor(i,o)}async onEditorKeyEnter(e,t){let o=this;await o.submitEditor(),await o.timeout(20),o.selectCell(e)}async onEditorKeyEscape(e,t){let o=this;await o.unmountEditor(),await o.timeout(20),o.selectCell(e)}async onEditorKeyTab(e,t){let o=this,{store:i}=o.owner,l=i.indexOf(t.record),n=i.getCount(),d=(l+(e.altKey?-1:1)+n)%n,a=i.getAt(d);await o.submitEditor(),await o.mountEditor(a,t.dataField)}async onFocusLeave(e){await this.unmountEditor()}onSelectionChange(e){}onSelectionModelChange(e){let t=e.value;t.ntype.includes("cell")&&t.on("selectionChange",this.onSelectionChange,this)}async onTableKeyDown(e){let t,o,i=this,{target:l}=e,{body:n}=i.owner;!i.mountedEditor&&l.cls?.includes("neo-selected")&&(t=n.getCellDataField(l.id),o=n.getRecord(l.id),await i.mountEditor(o,t))}selectCell({path:e}){let t,o=this,{selectionModel:i}=o.owner,l=0,n=e.length;for(;l<n;l++)if(e[l].cls?.includes(o.cellCls)){t=e[l].id;break}t&&(i?.deselect(t,!0),i?.select(t),o.focusCells&&o.owner.focus(t))}async submitEditor(){let e=this,t=e.mountedEditor;t?.isValid()&&(t.isDirty?(e.mountedEditor=null,t.record[t.dataField]=t.getSubmitValue()):await e.unmountEditor())}async unmountEditor(){if(!this.mountedEditor)return;let e=this,t=e.mountedEditor.record,{body:o}=e.owner,i=o.store.indexOf(t);e.mountedEditor=null,o.getVdomRoot().cn[i]=o.createRow({record:t,rowIndex:i}),await o.promiseUpdate()}}));

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2h1bmtzL2FwcC9kaXN0X2VzbV9zcmNfdGFibGVfcGx1Z2luX0NlbGxFZGl0aW5nX21qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFnQyxpRUFBZSw2QkFBNkIsc0RBQUMsQ0FBQyxlQUFlLHNFQUFzRSxhQUFhLG1CQUFtQixZQUFZLFFBQVEsR0FBRywrREFBK0QsdUJBQXVCLElBQUksUUFBUSxrRUFBa0Usc0JBQXNCLHdEQUF3RCxxQkFBcUIsSUFBSSxRQUFRLE1BQU0sdUNBQXVDLG1CQUFtQixDQUFDLEU7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDQTdiLGlFQUFlLDZCQUE2Qix3REFBQyxDQUFDLGVBQWUsK0pBQStKLFdBQVcsbUJBQW1CLGFBQWEsbUJBQW1CLFlBQVksUUFBUSxJQUFJLGlCQUFpQixHQUFHLE1BQU0sb0hBQW9ILDJEQUEyRCxRQUFRLG1CQUFtQixzREFBc0QsRUFBRSxzQkFBc0Isd0JBQXdCLGNBQWMsd0NBQXdDLGlCQUFpQixzQkFBc0IsdUJBQXVCLHdCQUF3QixjQUFjLHFCQUFxQixJQUFJLE9BQU8sOEJBQThCLHNEQUFDLGdGQUFnRixxSEFBcUgsaUJBQWlCLCtCQUErQixPQUFPLDREQUFDLDBHQUEwRyxLQUFLLGlGQUFpRix1S0FBdUsseUJBQXlCLG1DQUFtQyxFQUFFLDRCQUE0Qiw0QkFBNEIsV0FBVywyREFBMkQsNkJBQTZCLFdBQVcsNERBQTRELDBCQUEwQixZQUFZLFFBQVEscUZBQXFGLDBEQUEwRCxzQkFBc0IsMkJBQTJCLHNCQUFzQiwwQkFBMEIsY0FBYyw4RUFBOEUsd0JBQXdCLGdCQUFnQixTQUFTLElBQUksT0FBTyxTQUFTLDZIQUE2SCxZQUFZLE9BQU8sRUFBRSxjQUFjLGlCQUFpQix3QkFBd0IsS0FBSyxJQUFJLHNDQUFzQyxVQUFVLE1BQU0sbUVBQW1FLHFCQUFxQiw2QkFBNkIsa0hBQWtILHNCQUFzQiw4QkFBOEIscUNBQXFDLE9BQU8sOEJBQThCLHdEQUF3RCxvQkFBb0IsMkJBQTJCLENBQUMsRSIsInNvdXJjZXMiOlsid2VicGFjazovL25lby5tanMvLi9kaXN0L2VzbS9zcmMvcGx1Z2luL0Jhc2UubWpzIiwid2VicGFjazovL25lby5tanMvLi9kaXN0L2VzbS9zcmMvdGFibGUvcGx1Z2luL0NlbGxFZGl0aW5nLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZSBmcm9tXCIuLi9jb3JlL0Jhc2UubWpzXCI7ZXhwb3J0IGRlZmF1bHQgTmVvLnNldHVwQ2xhc3MoY2xhc3MgZXh0ZW5kcyBle3N0YXRpYyBjb25maWc9e2NsYXNzTmFtZTpcIk5lby5wbHVnaW4uQmFzZVwiLG50eXBlOlwicGx1Z2luXCIsb3duZXI6bnVsbCx3aW5kb3dJZF86bnVsbH07Y29uc3RydWN0KGUpe3N1cGVyLmNvbnN0cnVjdChlKTtsZXQgbj10aGlzLHtvd25lcjpvfT1uO28uaXNDb25zdHJ1Y3RlZD9uLm9uT3duZXJDb25zdHJ1Y3RlZCgpOm8ub24oXCJjb25zdHJ1Y3RlZFwiLCgpPT57bi5vbk93bmVyQ29uc3RydWN0ZWQoKX0sbix7b25jZTohMH0pLG8ubW91bnRlZD9uLm9uT3duZXJNb3VudGVkKCk6by5vbihcIm1vdW50ZWRcIixuLm9uT3duZXJNb3VudGVkLG4pfWFmdGVyU2V0V2luZG93SWQoZSxuKXtlJiZOZW8uY3VycmVudFdvcmtlci5pbnNlcnRUaGVtZUZpbGVzKGUsdGhpcy5fX3Byb3RvX18pfW9uT3duZXJDb25zdHJ1Y3RlZCgpe2xldHtvd25lcjplfT10aGlzO2Uud2luZG93SWQmJih0aGlzLndpbmRvd0lkPWUud2luZG93SWQpfW9uT3duZXJNb3VudGVkKCl7fX0pOyIsImltcG9ydCBlIGZyb21cIi4uLy4uL3BsdWdpbi9CYXNlLm1qc1wiO2ltcG9ydCB0IGZyb21cIi4uLy4uL2Zvcm0vZmllbGQvVGV4dC5tanNcIjtpbXBvcnQgbyBmcm9tXCIuLi8uLi91dGlsL1ZEb20ubWpzXCI7ZXhwb3J0IGRlZmF1bHQgTmVvLnNldHVwQ2xhc3MoY2xhc3MgZXh0ZW5kcyBle3N0YXRpYyBjb25maWc9e2NsYXNzTmFtZTpcIk5lby50YWJsZS5wbHVnaW4uQ2VsbEVkaXRpbmdcIixudHlwZTpcInBsdWdpbi10YWJsZS1jZWxsLWVkaXRpbmdcIixjZWxsQ2xzOlwibmVvLXRhYmxlLWNlbGxcIixkaXNhYmxlZF86ITEsZWRpdG9yQ2xzOltcIm5lby10YWJsZS1lZGl0b3JcIl0sZm9jdXNDZWxsczohMH07ZWRpdG9ycz17fTttb3VudGVkRWRpdG9yPW51bGw7Y29uc3RydWN0KGUpe3N1cGVyLmNvbnN0cnVjdChlKTtsZXQgdD10aGlzLHtvd25lcjpvfT10LHtzZWxlY3Rpb25Nb2RlbDppfT1vO28ub24oe2NlbGxEb3VibGVDbGljazp0Lm9uQ2VsbERvdWJsZUNsaWNrLGZvY3VzTGVhdmU6dC5vbkZvY3VzTGVhdmUsc2VsZWN0aW9uTW9kZWxDaGFuZ2U6dC5vblNlbGVjdGlvbk1vZGVsQ2hhbmdlLHNjb3BlOnR9KSxcIk5lb0luc3RhbmNlXCI9PT1OZW8udHlwZU9mKGkpJiZ0Lm9uU2VsZWN0aW9uTW9kZWxDaGFuZ2Uoe3ZhbHVlOml9KSxvLmJvZHkua2V5cy5hZGQoe0VudGVyOlwib25UYWJsZUtleURvd25cIixTcGFjZTpcIm9uVGFibGVLZXlEb3duXCIsc2NvcGU6dH0pfWFmdGVyU2V0RGlzYWJsZWQoZSx0KXt0JiZ0aGlzLnVubW91bnRFZGl0b3IoKX1kZXN0cm95KC4uLmUpe09iamVjdC52YWx1ZXModGhpcy5lZGl0b3JzKS5mb3JFYWNoKGU9PntlLmRlc3Ryb3koITEsITApfSksc3VwZXIuZGVzdHJveSguLi5lKX1hc3luYyBtb3VudEVkaXRvcihlLGkpe2lmKHRoaXMuZGlzYWJsZWQpcmV0dXJuO2xldCBsLG49dGhpcyx7YXBwTmFtZTpkLHdpbmRvd0lkOmF9PW4se2JvZHk6c309bi5vd25lcixyPXMuZ2V0Q2VsbElkKGUsaSksYz1vLmZpbmQocy52ZG9tLHIpLnZkb20sdT1uLm93bmVyLmhlYWRlclRvb2xiYXIuZ2V0Q29sdW1uKGkpLG09bi5lZGl0b3JzW2ldLEU9ZVtpXTtuLm1vdW50ZWRFZGl0b3ImJihhd2FpdCBuLnVubW91bnRFZGl0b3IoKSxhd2FpdCBuLnRpbWVvdXQoMTApKSx1LmVkaXRhYmxlJiYobT8obS5vcmlnaW5hbENvbmZpZy52YWx1ZT1FLG0uc2V0U2lsZW50KHtyZWNvcmQ6ZSx2YWx1ZTpFfSkpOihuLmVkaXRvcnNbaV09bT1OZW8uY3JlYXRlKHttb2R1bGU6dCxhcHBOYW1lOmQsY2xzOm4uZWRpdG9yQ2xzLGRhdGFGaWVsZDppLGhpZGVMYWJlbDohMCxwYXJlbnRJZDpzLmlkLHJlY29yZDplLHZhbHVlOkUsd2luZG93SWQ6YSwuLi51LmVkaXRvcn0pLGw9e0VudGVyOlwib25FZGl0b3JLZXlFbnRlclwiLEVzY2FwZTpcIm9uRWRpdG9yS2V5RXNjYXBlXCIsVGFiOlwib25FZGl0b3JLZXlUYWJcIixzY29wZTpufSxtLmtleXM/bS5rZXlzLmFkZChsKTptLmtleXM9bCksbi5tb3VudGVkRWRpdG9yPW0sYy5jbj1bbS5jcmVhdGVWZG9tUmVmZXJlbmNlKCldLGRlbGV0ZSBjLmh0bWwscy51cGRhdGVEZXB0aD0tMSxhd2FpdCBzLnByb21pc2VVcGRhdGUoKSxhd2FpdCBuLnRpbWVvdXQoMzApLG0uZm9jdXMoKSl9YXN5bmMgb25DZWxsRG91YmxlQ2xpY2soe2JvZHk6ZSxkYXRhOnQsZGF0YUZpZWxkOm8scmVjb3JkOml9KXthd2FpdCB0aGlzLm1vdW50RWRpdG9yKGksbyl9YXN5bmMgb25FZGl0b3JLZXlFbnRlcihlLHQpe2xldCBvPXRoaXM7YXdhaXQgby5zdWJtaXRFZGl0b3IoKSxhd2FpdCBvLnRpbWVvdXQoMjApLG8uc2VsZWN0Q2VsbChlKX1hc3luYyBvbkVkaXRvcktleUVzY2FwZShlLHQpe2xldCBvPXRoaXM7YXdhaXQgby51bm1vdW50RWRpdG9yKCksYXdhaXQgby50aW1lb3V0KDIwKSxvLnNlbGVjdENlbGwoZSl9YXN5bmMgb25FZGl0b3JLZXlUYWIoZSx0KXtsZXQgbz10aGlzLHtzdG9yZTppfT1vLm93bmVyLGw9aS5pbmRleE9mKHQucmVjb3JkKSxuPWkuZ2V0Q291bnQoKSxkPShsKyhlLmFsdEtleT8tMToxKStuKSVuLGE9aS5nZXRBdChkKTthd2FpdCBvLnN1Ym1pdEVkaXRvcigpLGF3YWl0IG8ubW91bnRFZGl0b3IoYSx0LmRhdGFGaWVsZCl9YXN5bmMgb25Gb2N1c0xlYXZlKGUpe2F3YWl0IHRoaXMudW5tb3VudEVkaXRvcigpfW9uU2VsZWN0aW9uQ2hhbmdlKGUpe31vblNlbGVjdGlvbk1vZGVsQ2hhbmdlKGUpe2xldCB0PWUudmFsdWU7dC5udHlwZS5pbmNsdWRlcyhcImNlbGxcIikmJnQub24oXCJzZWxlY3Rpb25DaGFuZ2VcIix0aGlzLm9uU2VsZWN0aW9uQ2hhbmdlLHRoaXMpfWFzeW5jIG9uVGFibGVLZXlEb3duKGUpe2xldCB0LG8saT10aGlzLHt0YXJnZXQ6bH09ZSx7Ym9keTpufT1pLm93bmVyOyFpLm1vdW50ZWRFZGl0b3ImJmwuY2xzPy5pbmNsdWRlcyhcIm5lby1zZWxlY3RlZFwiKSYmKHQ9bi5nZXRDZWxsRGF0YUZpZWxkKGwuaWQpLG89bi5nZXRSZWNvcmQobC5pZCksYXdhaXQgaS5tb3VudEVkaXRvcihvLHQpKX1zZWxlY3RDZWxsKHtwYXRoOmV9KXtsZXQgdCxvPXRoaXMse3NlbGVjdGlvbk1vZGVsOml9PW8ub3duZXIsbD0wLG49ZS5sZW5ndGg7Zm9yKDtsPG47bCsrKWlmKGVbbF0uY2xzPy5pbmNsdWRlcyhvLmNlbGxDbHMpKXt0PWVbbF0uaWQ7YnJlYWt9dCYmKGk/LmRlc2VsZWN0KHQsITApLGk/LnNlbGVjdCh0KSxvLmZvY3VzQ2VsbHMmJm8ub3duZXIuZm9jdXModCkpfWFzeW5jIHN1Ym1pdEVkaXRvcigpe2xldCBlPXRoaXMsdD1lLm1vdW50ZWRFZGl0b3I7dD8uaXNWYWxpZCgpJiYodC5pc0RpcnR5PyhlLm1vdW50ZWRFZGl0b3I9bnVsbCx0LnJlY29yZFt0LmRhdGFGaWVsZF09dC5nZXRTdWJtaXRWYWx1ZSgpKTphd2FpdCBlLnVubW91bnRFZGl0b3IoKSl9YXN5bmMgdW5tb3VudEVkaXRvcigpe2lmKCF0aGlzLm1vdW50ZWRFZGl0b3IpcmV0dXJuO2xldCBlPXRoaXMsdD1lLm1vdW50ZWRFZGl0b3IucmVjb3JkLHtib2R5Om99PWUub3duZXIsaT1vLnN0b3JlLmluZGV4T2YodCk7ZS5tb3VudGVkRWRpdG9yPW51bGwsby5nZXRWZG9tUm9vdCgpLmNuW2ldPW8uY3JlYXRlUm93KHtyZWNvcmQ6dCxyb3dJbmRleDppfSksYXdhaXQgby5wcm9taXNlVXBkYXRlKCl9fSk7Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9