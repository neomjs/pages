export const __webpack_esm_id__ = "vendors-examples_tab_container_app_mjs";
export const __webpack_esm_ids__ = ["vendors-examples_tab_container_app_mjs"];
export const __webpack_esm_modules__ = {

/***/ "./examples/tab/container/MainContainer.mjs"
/*!**************************************************!*\
  !*** ./examples/tab/container/MainContainer.mjs ***!
  \**************************************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _src_form_field_CheckBox_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../src/form/field/CheckBox.mjs */ "./src/form/field/CheckBox.mjs");
/* harmony import */ var _ConfigurationViewport_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../ConfigurationViewport.mjs */ "./examples/ConfigurationViewport.mjs");
/* harmony import */ var _src_form_field_Number_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../src/form/field/Number.mjs */ "./src/form/field/Number.mjs");
/* harmony import */ var _src_form_field_Radio_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../src/form/field/Radio.mjs */ "./src/form/field/Radio.mjs");
/* harmony import */ var _src_form_field_Text_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../src/form/field/Text.mjs */ "./src/form/field/Text.mjs");
/* harmony import */ var _src_tab_Container_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../src/tab/Container.mjs */ "./src/tab/Container.mjs");







/**
 * @summary An interactive example demonstrating the Neo.tab.Container.
 *
 * This class creates a viewport that showcases the `Neo.tab.Container`, a component for managing
 * a collection of child components in a tabbed interface. It extends `ConfigurationViewport` to provide
 * a side-by-side view with the live tab container on one side and a configuration panel on the other.
 * The panel allows for dynamic manipulation of the container's properties, such as `activeIndex`,
 * `tabBarPosition`, and individual tab headers, to demonstrate the component's extensive features
 * and reactivity.
 *
 * @class Neo.examples.tab.container.MainContainer
 * @extends Neo.examples.ConfigurationViewport
 * @see Neo.tab.Container
 */
class MainContainer extends _ConfigurationViewport_mjs__WEBPACK_IMPORTED_MODULE_1__["default"] {
    static config = {
        /**
         * @member {String} className='Neo.examples.tab.container.MainContainer'
         * @protected
         */
        className: 'Neo.examples.tab.container.MainContainer',
        /**
         * @member {Boolean} autoMount=true
         */
        autoMount: true,
        /**
         * @member {Number} configItemLabelWidth=160
         */
        configItemLabelWidth: 160,
        /**
         * @member {Number} configItemWidth=280
         */
        configItemWidth: 280,
        /**
         * The layout for the viewport, arranging the configuration panel and the example component horizontally.
         * @member {Object} layout={ntype: 'hbox', align: 'stretch'}
         */
        layout: {ntype: 'hbox', align: 'stretch'}
    }

    /**
     * Overridden from `ConfigurationViewport`. This method defines the set of form fields that will be
     * displayed in the configuration panel. These fields are bound to the properties of the example
     * TabContainer, allowing for real-time manipulation of its appearance and behavior.
     * @returns {Object[]} An array of component configuration objects.
     */
    createConfigurationComponents() {
        let me           = this,
            tabContainer = me.exampleComponent,
            headerLayout = tabContainer.getTabBar().layout;

        return [{
            module   : _src_form_field_Number_mjs__WEBPACK_IMPORTED_MODULE_2__["default"],
            id       : 'activeIndexField',
            labelText: 'activeIndex',
            listeners: {change: me.onConfigChange.bind(me, 'activeIndex')},
            maxValue : 2,
            minValue : 0,
            value    : tabContainer.activeIndex
        }, {
            module   : _src_form_field_Number_mjs__WEBPACK_IMPORTED_MODULE_2__["default"],
            labelText: 'height',
            listeners: {change: me.onConfigChange.bind(me, 'height')},
            maxValue : 800,
            minValue : 300,
            stepSize : 5,
            value    : tabContainer.height
        }, {
            module        : _src_form_field_CheckBox_mjs__WEBPACK_IMPORTED_MODULE_0__["default"],
            checked       : headerLayout.direction === 'column-reverse' || headerLayout.direction === 'row-reverse',
            hideLabel     : true,
            hideValueLabel: false,
            id            : 'reverseLayoutDirection',
            listeners     : {change: me.onLayoutSortDirectionChange.bind(me)},
            style         : {marginTop: '10px'},
            valueLabel    : 'reversed layout sort-direction'
        }, {
            module        : _src_form_field_CheckBox_mjs__WEBPACK_IMPORTED_MODULE_0__["default"],
            checked       : tabContainer.dragResortable,
            hideLabel     : true,
            hideValueLabel: false,
            listeners     : {change: me.onConfigChange.bind(me, 'dragResortable')},
            style         : {marginTop: '10px'},
            valueLabel    : 'dragResortable'
        }, {
            module        : _src_form_field_Radio_mjs__WEBPACK_IMPORTED_MODULE_3__["default"],
            checked       : tabContainer.tabBarPosition === 'top',
            hideValueLabel: false,
            labelText     : 'tabBarPosition',
            listeners     : {change: me.onTabBarPositionChange.bind(me, 'top')},
            name          : 'tabBarPosition',
            style         : {marginTop: '10px'},
            valueLabel    : 'top'
        }, {
            module        : _src_form_field_Radio_mjs__WEBPACK_IMPORTED_MODULE_3__["default"],
            checked       : tabContainer.tabBarPosition === 'right',
            hideValueLabel: false,
            labelText     : '',
            listeners     : {change: me.onTabBarPositionChange.bind(me, 'right')},
            name          : 'tabBarPosition',
            valueLabel    : 'right'
        }, {
            module        : _src_form_field_Radio_mjs__WEBPACK_IMPORTED_MODULE_3__["default"],
            checked       : tabContainer.tabBarPosition === 'bottom',
            hideValueLabel: false,
            labelText     : '',
            listeners     : {change: me.onTabBarPositionChange.bind(me, 'bottom')},
            name          : 'tabBarPosition',
            valueLabel    : 'bottom'
        }, {
            module        : _src_form_field_Radio_mjs__WEBPACK_IMPORTED_MODULE_3__["default"],
            checked       : tabContainer.tabBarPosition === 'left',
            hideValueLabel: false,
            labelText     : '',
            listeners     : {change: me.onTabBarPositionChange.bind(me, 'left')},
            name          : 'tabBarPosition',
            valueLabel    : 'left'
        }, {
            module   : _src_form_field_Number_mjs__WEBPACK_IMPORTED_MODULE_2__["default"],
            labelText: 'width',
            listeners: {change: me.onConfigChange.bind(me, 'width')},
            maxValue : 800,
            minValue : 250,
            stepSize : 5,
            style    : {marginTop: '10px'},
            value    : tabContainer.width
        }, {
            module        : _src_form_field_CheckBox_mjs__WEBPACK_IMPORTED_MODULE_0__["default"],
            checked       : tabContainer.useActiveTabIndicator,
            hideLabel     : true,
            hideValueLabel: false,
            listeners     : {change: me.onConfigChange.bind(me, 'useActiveTabIndicator')},
            style         : {marginTop: '10px'},
            valueLabel    : 'useActiveTabIndicator'
        }, {
            module   : _src_form_field_Text_mjs__WEBPACK_IMPORTED_MODULE_4__["default"], // todo: SelectField
            labelText: 'Tab 1 iconCls',
            listeners: {change: me.onFirstTabHeaderConfigChange.bind(me, 'iconCls')},
            style    : {marginTop: '50px'},
            value    : me.getFirstTabHeader().iconCls
        }, {
            module   : _src_form_field_Text_mjs__WEBPACK_IMPORTED_MODULE_4__["default"], // todo: ColorPicker
            labelText: 'Tab 1 iconColor',
            listeners: {change: me.onFirstTabHeaderConfigChange.bind(me, 'iconColor')},
            value    : me.getFirstTabHeader().iconColor
        }, {
            module   : _src_form_field_Text_mjs__WEBPACK_IMPORTED_MODULE_4__["default"],
            labelText: 'Tab 1 text',
            listeners: {change: me.onFirstTabHeaderConfigChange.bind(me, 'text')},
            value    : me.getFirstTabHeader().text
        }, {
            module        : _src_form_field_Radio_mjs__WEBPACK_IMPORTED_MODULE_3__["default"],
            checked       : me.getBadgeTabHeader().badgePosition === 'bottom-left',
            hideValueLabel: false,
            labelText     : 'badgePosition',
            listeners     : {change: me.onBadgeRadioChange.bind(me, 'badgePosition', 'bottom-left')},
            name          : 'badgePosition',
            style         : {marginTop: '50px'},
            valueLabel    : 'bottom-left'
        }, {
            module        : _src_form_field_Radio_mjs__WEBPACK_IMPORTED_MODULE_3__["default"],
            checked       : me.getBadgeTabHeader().badgePosition === 'bottom-right',
            hideValueLabel: false,
            labelText     : '',
            listeners     : {change: me.onBadgeRadioChange.bind(me, 'badgePosition', 'bottom-right')},
            name          : 'badgePosition',
            valueLabel    : 'bottom-right'
        }, {
            module        : _src_form_field_Radio_mjs__WEBPACK_IMPORTED_MODULE_3__["default"],
            checked       : me.getBadgeTabHeader().badgePosition === 'top-left',
            hideValueLabel: false,
            labelText     : '',
            listeners     : {change: me.onBadgeRadioChange.bind(me, 'badgePosition', 'top-left')},
            name          : 'badgePosition',
            valueLabel    : 'top-left'
        }, {
            module        : _src_form_field_Radio_mjs__WEBPACK_IMPORTED_MODULE_3__["default"],
            checked       : me.getBadgeTabHeader().badgePosition === 'top-right',
            hideValueLabel: false,
            labelText     : '',
            listeners     : {change: me.onBadgeRadioChange.bind(me, 'badgePosition', 'top-right')},
            name          : 'badgePosition',
            valueLabel    : 'top-right'
        }, {
            module   : _src_form_field_Text_mjs__WEBPACK_IMPORTED_MODULE_4__["default"],
            labelText: 'badgeText',
            listeners: {change: me.onBadgeConfigChange.bind(me, 'badgeText')},
            style    : {marginTop: '10px'},
            value    : me.getBadgeTabHeader().badgeText
        }]
    }

    /**
     * Overridden from `ConfigurationViewport`. This method creates the actual `TabContainer` instance
     * to be demonstrated. It is configured with three initial tabs and a listener to sync user-driven
     * tab changes back to the configuration panel.
     * @returns {Neo.tab.Container} The configured TabContainer instance.
     */
    createExampleComponent() {
        return Neo.create(_src_tab_Container_mjs__WEBPACK_IMPORTED_MODULE_5__["default"], {
            dragResortable: true,
            height        : 300,
            width         : 500,
            style         : {margin: '20px'},

            itemDefaults: {
                ntype: 'component',
                cls  : ['neo-examples-tab-component'],
                style: {padding: '20px'}
            },

            items: [{
                header: {iconCls: 'fa fa-home', text: 'Tab 1', flag: 'tab1',},
                vdom  : {html: 'Tab 1 Content'}
            }, {
                header: {iconCls: 'fa fa-play-circle', text: 'Tab 2'},
                vdom  : {html: 'Tab 2 Content'}
            }, {
                header: {iconCls: 'fa fa-user', text: 'Tab 3', badgeText: 'hello'},
                vdom  : {html: 'Tab 3 Content'}
            }],

            listeners: {
                activeIndexChange: this.onUserActiveIndexChange,
                scope            : this
            }
        })
    }

    /**
     * A helper method to retrieve the header button for the third tab, which is used for demonstrating
     * badge functionality.
     * @returns {Neo.tab.header.Button}
     */
    getBadgeTabHeader() {
        let tabHeaders = this.exampleComponent.getTabBar().items,
            item;

        for (item of tabHeaders) {
            if (item.text === 'Tab 3') {
                return item
            }
        }
    }

    /**
     * A helper method to retrieve the header button for the first tab, identified by a unique `flag` property.
     * This allows for stable targeting of the tab even if its text or position changes.
     * @returns {Neo.tab.header.Button}
     */
    getFirstTabHeader() {
        let tabHeaders = this.exampleComponent.getTabBar().items,
            item;

        for (item of tabHeaders) {
            if (item.flag === 'tab1') {
                return item
            }
        }
    }

    /**
     * Handles the change event from various text fields in the configuration panel that control the
     * properties of the third tab's header (the "badge tab").
     * @param {String} config The name of the config property to change (e.g., 'badgeText').
     * @param {Object} opts The event data from the field's change event.
     * @param {String} opts.value The new value for the config.
     */
    onBadgeConfigChange(config, opts) {
        this.getBadgeTabHeader()[config] = opts.value
    }

    /**
     * Handles the change event from the radio group controlling the `badgePosition` config.
     * It ensures the config is only updated when a radio button is checked, not unchecked.
     * @param {String} config The name of the config property to change (always 'badgePosition').
     * @param {String} value The new value for the badge position (e.g., 'top-right').
     * @param {Object} opts The event data from the radio's change event.
     * @param {Boolean} opts.value The checked state of the radio button.
     */
    onBadgeRadioChange(config, value, opts) {
        if (opts.value === true) { // we only want to listen to check events, not uncheck
            this.getBadgeTabHeader()[config] = value
        }
    }

    /**
     * Handles the change event from various text fields in the configuration panel that control the
     * properties of the first tab's header.
     * @param {String} config The name of the config property to change (e.g., 'text', 'iconCls').
     * @param {Object} opts The event data from the field's change event.
     * @param {String} opts.value The new value for the config.
     */
    onFirstTabHeaderConfigChange(config, opts) {
        this.getFirstTabHeader()[config] = opts.value
    }

    /**
     * Handles the change event from the 'reversed layout sort-direction' checkbox. This method
     * dynamically modifies the `direction` of the tab bar's layout to demonstrate how the visual
     * order of the tabs can be reversed.
     * @param {Object} data The event data from the checkbox change event.
     * @param {Boolean} data.value The new checked state of the checkbox.
     */
    onLayoutSortDirectionChange(data) {
        let layout    = this.exampleComponent.getTabBar().layout,
            direction = layout.direction;

        if (data.value === true) {
            if (!direction.includes('-reverse')) {
                direction += '-reverse'
            }
        } else {
            if (direction.includes('-reverse')) {
                direction = direction.substring(0, direction.indexOf('-reverse'))
            }
        }

        layout.direction = direction
    }

    /**
     * Handles the change event from the radio group controlling the `tabBarPosition` config.
     * It updates the tab container's config and also intelligently adjusts the 'reversed layout'
     * checkbox, as the concept of a reversed direction is only meaningful for 'left' and 'right' positions.
     * @param {String} value The new value for the tab bar position (e.g., 'top', 'right').
     * @param {Object} opts The event data from the radio's change event.
     * @param {Boolean} opts.value The checked state of the radio button.
     */
    onTabBarPositionChange(value, opts) {
        if (opts.value === true) { // we only want to listen to check events, not uncheck
            this.onRadioChange('tabBarPosition', value, opts);
            Neo.getComponent('reverseLayoutDirection').checked = value === 'left'
        }

    }

    /**
     * This listener responds to the `activeIndexChange` event fired by the `TabContainer` when a user
     * clicks on a tab. Its purpose is to synchronize the UI, ensuring that the `activeIndex` number field
     * in the configuration panel accurately reflects the currently active tab.
     * @param {Object} opts The event data from the `activeIndexChange` event.
     * @param {Number} opts.value The new active index.
     */
    onUserActiveIndexChange(opts) {
        Neo.getComponent('activeIndexField').value = opts.value
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(MainContainer));


/***/ },

/***/ "./examples/tab/container/app.mjs"
/*!****************************************!*\
  !*** ./examples/tab/container/app.mjs ***!
  \****************************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   onStart: () => (/* binding */ onStart)
/* harmony export */ });
/* harmony import */ var _MainContainer_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MainContainer.mjs */ "./examples/tab/container/MainContainer.mjs");


const onStart = () => Neo.app({
    mainView: _MainContainer_mjs__WEBPACK_IMPORTED_MODULE_0__["default"],
    name    : 'Neo.examples.tab.container'
});


/***/ },

/***/ "./src/form/field/Radio.mjs"
/*!**********************************!*\
  !*** ./src/form/field/Radio.mjs ***!
  \**********************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _CheckBox_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CheckBox.mjs */ "./src/form/field/CheckBox.mjs");
/* harmony import */ var _manager_Component_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../manager/Component.mjs */ "./src/manager/Component.mjs");



/**
 * @class Neo.form.field.Radio
 * @extends Neo.form.field.CheckBox
 */
class Radio extends _CheckBox_mjs__WEBPACK_IMPORTED_MODULE_0__["default"] {
    static config = {
        /**
         * @member {String} className='Neo.form.field.Radio'
         * @protected
         */
        className: 'Neo.form.field.Radio',
        /**
         * @member {String} ntype='radiofield'
         * @protected
         */
        ntype: 'radiofield',
        /**
         * @member {String[]} baseCls=['neo-radiofield','neo-checkboxfield']
         */
        baseCls: ['neo-radiofield', 'neo-checkboxfield'],
        /**
         * @member {String[]} iconCls=['far','fa-circle']
         */
        iconCls: ['far', 'fa-circle'],
        /**
         * @member {String} inputType='radio'
         * @reactive
         */
        inputType: 'radio'
    }

    /**
     * Triggered after the checked config got changed
     * @param {Boolean} value
     * @param {Boolean} oldValue
     * @protected
     */
    afterSetChecked(value, oldValue) {
        super.afterSetChecked(value, oldValue);

        // update radios with the same name to be unchecked
        value && this.uncheckGroupItems()
    }

    /**
     * Radios should only fire change & fieldChange events if checked.
     * If there was just 1 radio, you can not uncheck it.
     * @param {*} value
     * @param {*} oldValue
     */
    fireChangeEvent(value, oldValue) {
        this.checked && super.fireChangeEvent(value, oldValue)
    }

    /**
     * @returns {String[]}
     */
    getGroupValue() {
        let value = super.getGroupValue();

        return value.length > 0 ? value[0] : []
    }

    /**
     * Radios do not fire a change event for "uncheck", so we need to iterate over other radios with the same name.
     */
    uncheckGroupItems() {
        let me = this,
            radios;

        // discuss: we could limit this to radios inside the same form, IF a top level form is used
        radios = _manager_Component_mjs__WEBPACK_IMPORTED_MODULE_1__["default"].find({
            ntype: 'radiofield',
            name : me.name
        });

        radios.forEach(item => {
            if (item.id !== me.id && item._checked) {
                item.checked = false
            }
        })
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(Radio));


/***/ }

};

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2h1bmtzL2FwcC92ZW5kb3JzLWV4YW1wbGVzX3RhYl9jb250YWluZXJfYXBwX21qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF5RTtBQUNMO0FBQ0c7QUFDRDtBQUNEO0FBQ0Y7O0FBRW5FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsa0VBQXFCO0FBQ2pEO0FBQ0E7QUFDQSxvQkFBb0IsUUFBUTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixTQUFTO0FBQzdCO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixRQUFRO0FBQzVCO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixRQUFRO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFFBQVEsUUFBUTtBQUNwQztBQUNBLGlCQUFpQjtBQUNqQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixVQUFVO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx1QkFBdUIsa0VBQVc7QUFDbEM7QUFDQTtBQUNBLHdCQUF3QixrREFBa0Q7QUFDMUU7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULHVCQUF1QixrRUFBVztBQUNsQztBQUNBLHdCQUF3Qiw2Q0FBNkM7QUFDckU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsNEJBQTRCLG9FQUFRO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLGdEQUFnRDtBQUM3RSw2QkFBNkIsa0JBQWtCO0FBQy9DO0FBQ0EsU0FBUztBQUNULDRCQUE0QixvRUFBUTtBQUNwQztBQUNBO0FBQ0E7QUFDQSw2QkFBNkIscURBQXFEO0FBQ2xGLDZCQUE2QixrQkFBa0I7QUFDL0M7QUFDQSxTQUFTO0FBQ1QsNEJBQTRCLGlFQUFLO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixrREFBa0Q7QUFDL0U7QUFDQSw2QkFBNkIs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QUFDakM7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQSxpRUFBZSxxQkFBcUIsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL25lby5tanMvLi9leGFtcGxlcy90YWIvY29udGFpbmVyL01haW5Db250YWluZXIubWpzIiwid2VicGFjazovL25lby5tanMvLi9leGFtcGxlcy90YWIvY29udGFpbmVyL2FwcC5tanMiLCJ3ZWJwYWNrOi8vbmVvLm1qcy8uL3NyYy9mb3JtL2ZpZWxkL1JhZGlvLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQ2hlY2tCb3ggICAgICAgICAgICAgIGZyb20gJy4uLy4uLy4uL3NyYy9mb3JtL2ZpZWxkL0NoZWNrQm94Lm1qcyc7XG5pbXBvcnQgQ29uZmlndXJhdGlvblZpZXdwb3J0IGZyb20gJy4uLy4uL0NvbmZpZ3VyYXRpb25WaWV3cG9ydC5tanMnO1xuaW1wb3J0IE51bWJlckZpZWxkICAgICAgICAgICBmcm9tICcuLi8uLi8uLi9zcmMvZm9ybS9maWVsZC9OdW1iZXIubWpzJztcbmltcG9ydCBSYWRpbyAgICAgICAgICAgICAgICAgZnJvbSAnLi4vLi4vLi4vc3JjL2Zvcm0vZmllbGQvUmFkaW8ubWpzJztcbmltcG9ydCBUZXh0RmllbGQgICAgICAgICAgICAgZnJvbSAnLi4vLi4vLi4vc3JjL2Zvcm0vZmllbGQvVGV4dC5tanMnO1xuaW1wb3J0IFRhYkNvbnRhaW5lciAgICAgICAgICBmcm9tICcuLi8uLi8uLi9zcmMvdGFiL0NvbnRhaW5lci5tanMnO1xuXG4vKipcbiAqIEBzdW1tYXJ5IEFuIGludGVyYWN0aXZlIGV4YW1wbGUgZGVtb25zdHJhdGluZyB0aGUgTmVvLnRhYi5Db250YWluZXIuXG4gKlxuICogVGhpcyBjbGFzcyBjcmVhdGVzIGEgdmlld3BvcnQgdGhhdCBzaG93Y2FzZXMgdGhlIGBOZW8udGFiLkNvbnRhaW5lcmAsIGEgY29tcG9uZW50IGZvciBtYW5hZ2luZ1xuICogYSBjb2xsZWN0aW9uIG9mIGNoaWxkIGNvbXBvbmVudHMgaW4gYSB0YWJiZWQgaW50ZXJmYWNlLiBJdCBleHRlbmRzIGBDb25maWd1cmF0aW9uVmlld3BvcnRgIHRvIHByb3ZpZGVcbiAqIGEgc2lkZS1ieS1zaWRlIHZpZXcgd2l0aCB0aGUgbGl2ZSB0YWIgY29udGFpbmVyIG9uIG9uZSBzaWRlIGFuZCBhIGNvbmZpZ3VyYXRpb24gcGFuZWwgb24gdGhlIG90aGVyLlxuICogVGhlIHBhbmVsIGFsbG93cyBmb3IgZHluYW1pYyBtYW5pcHVsYXRpb24gb2YgdGhlIGNvbnRhaW5lcidzIHByb3BlcnRpZXMsIHN1Y2ggYXMgYGFjdGl2ZUluZGV4YCxcbiAqIGB0YWJCYXJQb3NpdGlvbmAsIGFuZCBpbmRpdmlkdWFsIHRhYiBoZWFkZXJzLCB0byBkZW1vbnN0cmF0ZSB0aGUgY29tcG9uZW50J3MgZXh0ZW5zaXZlIGZlYXR1cmVzXG4gKiBhbmQgcmVhY3Rpdml0eS5cbiAqXG4gKiBAY2xhc3MgTmVvLmV4YW1wbGVzLnRhYi5jb250YWluZXIuTWFpbkNvbnRhaW5lclxuICogQGV4dGVuZHMgTmVvLmV4YW1wbGVzLkNvbmZpZ3VyYXRpb25WaWV3cG9ydFxuICogQHNlZSBOZW8udGFiLkNvbnRhaW5lclxuICovXG5jbGFzcyBNYWluQ29udGFpbmVyIGV4dGVuZHMgQ29uZmlndXJhdGlvblZpZXdwb3J0IHtcbiAgICBzdGF0aWMgY29uZmlnID0ge1xuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfSBjbGFzc05hbWU9J05lby5leGFtcGxlcy50YWIuY29udGFpbmVyLk1haW5Db250YWluZXInXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIGNsYXNzTmFtZTogJ05lby5leGFtcGxlcy50YWIuY29udGFpbmVyLk1haW5Db250YWluZXInLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7Qm9vbGVhbn0gYXV0b01vdW50PXRydWVcbiAgICAgICAgICovXG4gICAgICAgIGF1dG9Nb3VudDogdHJ1ZSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge051bWJlcn0gY29uZmlnSXRlbUxhYmVsV2lkdGg9MTYwXG4gICAgICAgICAqL1xuICAgICAgICBjb25maWdJdGVtTGFiZWxXaWR0aDogMTYwLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7TnVtYmVyfSBjb25maWdJdGVtV2lkdGg9MjgwXG4gICAgICAgICAqL1xuICAgICAgICBjb25maWdJdGVtV2lkdGg6IDI4MCxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBsYXlvdXQgZm9yIHRoZSB2aWV3cG9ydCwgYXJyYW5naW5nIHRoZSBjb25maWd1cmF0aW9uIHBhbmVsIGFuZCB0aGUgZXhhbXBsZSBjb21wb25lbnQgaG9yaXpvbnRhbGx5LlxuICAgICAgICAgKiBAbWVtYmVyIHtPYmplY3R9IGxheW91dD17bnR5cGU6ICdoYm94JywgYWxpZ246ICdzdHJldGNoJ31cbiAgICAgICAgICovXG4gICAgICAgIGxheW91dDoge250eXBlOiAnaGJveCcsIGFsaWduOiAnc3RyZXRjaCd9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogT3ZlcnJpZGRlbiBmcm9tIGBDb25maWd1cmF0aW9uVmlld3BvcnRgLiBUaGlzIG1ldGhvZCBkZWZpbmVzIHRoZSBzZXQgb2YgZm9ybSBmaWVsZHMgdGhhdCB3aWxsIGJlXG4gICAgICogZGlzcGxheWVkIGluIHRoZSBjb25maWd1cmF0aW9uIHBhbmVsLiBUaGVzZSBmaWVsZHMgYXJlIGJvdW5kIHRvIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBleGFtcGxlXG4gICAgICogVGFiQ29udGFpbmVyLCBhbGxvd2luZyBmb3IgcmVhbC10aW1lIG1hbmlwdWxhdGlvbiBvZiBpdHMgYXBwZWFyYW5jZSBhbmQgYmVoYXZpb3IuXG4gICAgICogQHJldHVybnMge09iamVjdFtdfSBBbiBhcnJheSBvZiBjb21wb25lbnQgY29uZmlndXJhdGlvbiBvYmplY3RzLlxuICAgICAqL1xuICAgIGNyZWF0ZUNvbmZpZ3VyYXRpb25Db21wb25lbnRzKCkge1xuICAgICAgICBsZXQgbWUgICAgICAgICAgID0gdGhpcyxcbiAgICAgICAgICAgIHRhYkNvbnRhaW5lciA9IG1lLmV4YW1wbGVDb21wb25lbnQsXG4gICAgICAgICAgICBoZWFkZXJMYXlvdXQgPSB0YWJDb250YWluZXIuZ2V0VGFiQmFyKCkubGF5b3V0O1xuXG4gICAgICAgIHJldHVybiBbe1xuICAgICAgICAgICAgbW9kdWxlICAgOiBOdW1iZXJGaWVsZCxcbiAgICAgICAgICAgIGlkICAgICAgIDogJ2FjdGl2ZUluZGV4RmllbGQnLFxuICAgICAgICAgICAgbGFiZWxUZXh0OiAnYWN0aXZlSW5kZXgnLFxuICAgICAgICAgICAgbGlzdGVuZXJzOiB7Y2hhbmdlOiBtZS5vbkNvbmZpZ0NoYW5nZS5iaW5kKG1lLCAnYWN0aXZlSW5kZXgnKX0sXG4gICAgICAgICAgICBtYXhWYWx1ZSA6IDIsXG4gICAgICAgICAgICBtaW5WYWx1ZSA6IDAsXG4gICAgICAgICAgICB2YWx1ZSAgICA6IHRhYkNvbnRhaW5lci5hY3RpdmVJbmRleFxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBtb2R1bGUgICA6IE51bWJlckZpZWxkLFxuICAgICAgICAgICAgbGFiZWxUZXh0OiAnaGVpZ2h0JyxcbiAgICAgICAgICAgIGxpc3RlbmVyczoge2NoYW5nZTogbWUub25Db25maWdDaGFuZ2UuYmluZChtZSwgJ2hlaWdodCcpfSxcbiAgICAgICAgICAgIG1heFZhbHVlIDogODAwLFxuICAgICAgICAgICAgbWluVmFsdWUgOiAzMDAsXG4gICAgICAgICAgICBzdGVwU2l6ZSA6IDUsXG4gICAgICAgICAgICB2YWx1ZSAgICA6IHRhYkNvbnRhaW5lci5oZWlnaHRcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgbW9kdWxlICAgICAgICA6IENoZWNrQm94LFxuICAgICAgICAgICAgY2hlY2tlZCAgICAgICA6IGhlYWRlckxheW91dC5kaXJlY3Rpb24gPT09ICdjb2x1bW4tcmV2ZXJzZScgfHwgaGVhZGVyTGF5b3V0LmRpcmVjdGlvbiA9PT0gJ3Jvdy1yZXZlcnNlJyxcbiAgICAgICAgICAgIGhpZGVMYWJlbCAgICAgOiB0cnVlLFxuICAgICAgICAgICAgaGlkZVZhbHVlTGFiZWw6IGZhbHNlLFxuICAgICAgICAgICAgaWQgICAgICAgICAgICA6ICdyZXZlcnNlTGF5b3V0RGlyZWN0aW9uJyxcbiAgICAgICAgICAgIGxpc3RlbmVycyAgICAgOiB7Y2hhbmdlOiBtZS5vbkxheW91dFNvcnREaXJlY3Rpb25DaGFuZ2UuYmluZChtZSl9LFxuICAgICAgICAgICAgc3R5bGUgICAgICAgICA6IHttYXJnaW5Ub3A6ICcxMHB4J30sXG4gICAgICAgICAgICB2YWx1ZUxhYmVsICAgIDogJ3JldmVyc2VkIGxheW91dCBzb3J0LWRpcmVjdGlvbidcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgbW9kdWxlICAgICAgICA6IENoZWNrQm94LFxuICAgICAgICAgICAgY2hlY2tlZCAgICAgICA6IHRhYkNvbnRhaW5lci5kcmFnUmVzb3J0YWJsZSxcbiAgICAgICAgICAgIGhpZGVMYWJlbCAgICAgOiB0cnVlLFxuICAgICAgICAgICAgaGlkZVZhbHVlTGFiZWw6IGZhbHNlLFxuICAgICAgICAgICAgbGlzdGVuZXJzICAgICA6IHtjaGFuZ2U6IG1lLm9uQ29uZmlnQ2hhbmdlLmJpbmQobWUsICdkcmFnUmVzb3J0YWJsZScpfSxcbiAgICAgICAgICAgIHN0eWxlICAgICAgICAgOiB7bWFyZ2luVG9wOiAnMTBweCd9LFxuICAgICAgICAgICAgdmFsdWVMYWJlbCAgICA6ICdkcmFnUmVzb3J0YWJsZSdcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgbW9kdWxlICAgICAgICA6IFJhZGlvLFxuICAgICAgICAgICAgY2hlY2tlZCAgICAgICA6IHRhYkNvbnRhaW5lci50YWJCYXJQb3NpdGlvbiA9PT0gJ3RvcCcsXG4gICAgICAgICAgICBoaWRlVmFsdWVMYWJlbDogZmFsc2UsXG4gICAgICAgICAgICBsYWJlbFRleHQgICAgIDogJ3RhYkJhclBvc2l0aW9uJyxcbiAgICAgICAgICAgIGxpc3RlbmVycyAgICAgOiB7Y2hhbmdlOiBtZS5vblRhYkJhclBvc2l0aW9uQ2hhbmdlLmJpbmQobWUsICd0b3AnKX0sXG4gICAgICAgICAgICBuYW1lICAgICAgICAgIDogJ3RhYkJhclBvc2l0aW9uJyxcbiAgICAgICAgICAgIHN0eWxlICAgICAgICAgOiB7bWFyZ2luVG9wOiAnMTBweCd9LFxuICAgICAgICAgICAgdmFsdWVMYWJlbCAgICA6ICd0b3AnXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG1vZHVsZSAgICAgICAgOiBSYWRpbyxcbiAgICAgICAgICAgIGNoZWNrZWQgICAgICAgOiB0YWJDb250YWluZXIudGFiQmFyUG9zaXRpb24gPT09ICdyaWdodCcsXG4gICAgICAgICAgICBoaWRlVmFsdWVMYWJlbDogZmFsc2UsXG4gICAgICAgICAgICBsYWJlbFRleHQgICAgIDogJycsXG4gICAgICAgICAgICBsaXN0ZW5lcnMgICAgIDoge2NoYW5nZTogbWUub25UYWJCYXJQb3NpdGlvbkNoYW5nZS5iaW5kKG1lLCAncmlnaHQnKX0sXG4gICAgICAgICAgICBuYW1lICAgICAgICAgIDogJ3RhYkJhclBvc2l0aW9uJyxcbiAgICAgICAgICAgIHZhbHVlTGFiZWwgICAgOiAncmlnaHQnXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG1vZHVsZSAgICAgICAgOiBSYWRpbyxcbiAgICAgICAgICAgIGNoZWNrZWQgICAgICAgOiB0YWJDb250YWluZXIudGFiQmFyUG9zaXRpb24gPT09ICdib3R0b20nLFxuICAgICAgICAgICAgaGlkZVZhbHVlTGFiZWw6IGZhbHNlLFxuICAgICAgICAgICAgbGFiZWxUZXh0ICAgICA6ICcnLFxuICAgICAgICAgICAgbGlzdGVuZXJzICAgICA6IHtjaGFuZ2U6IG1lLm9uVGFiQmFyUG9zaXRpb25DaGFuZ2UuYmluZChtZSwgJ2JvdHRvbScpfSxcbiAgICAgICAgICAgIG5hbWUgICAgICAgICAgOiAndGFiQmFyUG9zaXRpb24nLFxuICAgICAgICAgICAgdmFsdWVMYWJlbCAgICA6ICdib3R0b20nXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG1vZHVsZSAgICAgICAgOiBSYWRpbyxcbiAgICAgICAgICAgIGNoZWNrZWQgICAgICAgOiB0YWJDb250YWluZXIudGFiQmFyUG9zaXRpb24gPT09ICdsZWZ0JyxcbiAgICAgICAgICAgIGhpZGVWYWx1ZUxhYmVsOiBmYWxzZSxcbiAgICAgICAgICAgIGxhYmVsVGV4dCAgICAgOiAnJyxcbiAgICAgICAgICAgIGxpc3RlbmVycyAgICAgOiB7Y2hhbmdlOiBtZS5vblRhYkJhclBvc2l0aW9uQ2hhbmdlLmJpbmQobWUsICdsZWZ0Jyl9LFxuICAgICAgICAgICAgbmFtZSAgICAgICAgICA6ICd0YWJCYXJQb3NpdGlvbicsXG4gICAgICAgICAgICB2YWx1ZUxhYmVsICAgIDogJ2xlZnQnXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG1vZHVsZSAgIDogTnVtYmVyRmllbGQsXG4gICAgICAgICAgICBsYWJlbFRleHQ6ICd3aWR0aCcsXG4gICAgICAgICAgICBsaXN0ZW5lcnM6IHtjaGFuZ2U6IG1lLm9uQ29uZmlnQ2hhbmdlLmJpbmQobWUsICd3aWR0aCcpfSxcbiAgICAgICAgICAgIG1heFZhbHVlIDogODAwLFxuICAgICAgICAgICAgbWluVmFsdWUgOiAyNTAsXG4gICAgICAgICAgICBzdGVwU2l6ZSA6IDUsXG4gICAgICAgICAgICBzdHlsZSAgICA6IHttYXJnaW5Ub3A6ICcxMHB4J30sXG4gICAgICAgICAgICB2YWx1ZSAgICA6IHRhYkNvbnRhaW5lci53aWR0aFxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBtb2R1bGUgICAgICAgIDogQ2hlY2tCb3gsXG4gICAgICAgICAgICBjaGVja2VkICAgICAgIDogdGFiQ29udGFpbmVyLnVzZUFjdGl2ZVRhYkluZGljYXRvcixcbiAgICAgICAgICAgIGhpZGVMYWJlbCAgICAgOiB0cnVlLFxuICAgICAgICAgICAgaGlkZVZhbHVlTGFiZWw6IGZhbHNlLFxuICAgICAgICAgICAgbGlzdGVuZXJzICAgICA6IHtjaGFuZ2U6IG1lLm9uQ29uZmlnQ2hhbmdlLmJpbmQobWUsICd1c2VBY3RpdmVUYWJJbmRpY2F0b3InKX0sXG4gICAgICAgICAgICBzdHlsZSAgICAgICAgIDoge21hcmdpblRvcDogJzEwcHgnfSxcbiAgICAgICAgICAgIHZhbHVlTGFiZWwgICAgOiAndXNlQWN0aXZlVGFiSW5kaWNhdG9yJ1xuICAgICAgICB9LCB7XG4gICAgICAgICAgICBtb2R1bGUgICA6IFRleHRGaWVsZCwgLy8gdG9kbzogU2VsZWN0RmllbGRcbiAgICAgICAgICAgIGxhYmVsVGV4dDogJ1RhYiAxIGljb25DbHMnLFxuICAgICAgICAgICAgbGlzdGVuZXJzOiB7Y2hhbmdlOiBtZS5vbkZpcnN0VGFiSGVhZGVyQ29uZmlnQ2hhbmdlLmJpbmQobWUsICdpY29uQ2xzJyl9LFxuICAgICAgICAgICAgc3R5bGUgICAgOiB7bWFyZ2luVG9wOiAnNTBweCd9LFxuICAgICAgICAgICAgdmFsdWUgICAgOiBtZS5nZXRGaXJzdFRhYkhlYWRlcigpLmljb25DbHNcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgbW9kdWxlICAgOiBUZXh0RmllbGQsIC8vIHRvZG86IENvbG9yUGlja2VyXG4gICAgICAgICAgICBsYWJlbFRleHQ6ICdUYWIgMSBpY29uQ29sb3InLFxuICAgICAgICAgICAgbGlzdGVuZXJzOiB7Y2hhbmdlOiBtZS5vbkZpcnN0VGFiSGVhZGVyQ29uZmlnQ2hhbmdlLmJpbmQobWUsICdpY29uQ29sb3InKX0sXG4gICAgICAgICAgICB2YWx1ZSAgICA6IG1lLmdldEZpcnN0VGFiSGVhZGVyKCkuaWNvbkNvbG9yXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG1vZHVsZSAgIDogVGV4dEZpZWxkLFxuICAgICAgICAgICAgbGFiZWxUZXh0OiAnVGFiIDEgdGV4dCcsXG4gICAgICAgICAgICBsaXN0ZW5lcnM6IHtjaGFuZ2U6IG1lLm9uRmlyc3RUYWJIZWFkZXJDb25maWdDaGFuZ2UuYmluZChtZSwgJ3RleHQnKX0sXG4gICAgICAgICAgICB2YWx1ZSAgICA6IG1lLmdldEZpcnN0VGFiSGVhZGVyKCkudGV4dFxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBtb2R1bGUgICAgICAgIDogUmFkaW8sXG4gICAgICAgICAgICBjaGVja2VkICAgICAgIDogbWUuZ2V0QmFkZ2VUYWJIZWFkZXIoKS5iYWRnZVBvc2l0aW9uID09PSAnYm90dG9tLWxlZnQnLFxuICAgICAgICAgICAgaGlkZVZhbHVlTGFiZWw6IGZhbHNlLFxuICAgICAgICAgICAgbGFiZWxUZXh0ICAgICA6ICdiYWRnZVBvc2l0aW9uJyxcbiAgICAgICAgICAgIGxpc3RlbmVycyAgICAgOiB7Y2hhbmdlOiBtZS5vbkJhZGdlUmFkaW9DaGFuZ2UuYmluZChtZSwgJ2JhZGdlUG9zaXRpb24nLCAnYm90dG9tLWxlZnQnKX0sXG4gICAgICAgICAgICBuYW1lICAgICAgICAgIDogJ2JhZGdlUG9zaXRpb24nLFxuICAgICAgICAgICAgc3R5bGUgICAgICAgICA6IHttYXJnaW5Ub3A6ICc1MHB4J30sXG4gICAgICAgICAgICB2YWx1ZUxhYmVsICAgIDogJ2JvdHRvbS1sZWZ0J1xuICAgICAgICB9LCB7XG4gICAgICAgICAgICBtb2R1bGUgICAgICAgIDogUmFkaW8sXG4gICAgICAgICAgICBjaGVja2VkICAgICAgIDogbWUuZ2V0QmFkZ2VUYWJIZWFkZXIoKS5iYWRnZVBvc2l0aW9uID09PSAnYm90dG9tLXJpZ2h0JyxcbiAgICAgICAgICAgIGhpZGVWYWx1ZUxhYmVsOiBmYWxzZSxcbiAgICAgICAgICAgIGxhYmVsVGV4dCAgICAgOiAnJyxcbiAgICAgICAgICAgIGxpc3RlbmVycyAgICAgOiB7Y2hhbmdlOiBtZS5vbkJhZGdlUmFkaW9DaGFuZ2UuYmluZChtZSwgJ2JhZGdlUG9zaXRpb24nLCAnYm90dG9tLXJpZ2h0Jyl9LFxuICAgICAgICAgICAgbmFtZSAgICAgICAgICA6ICdiYWRnZVBvc2l0aW9uJyxcbiAgICAgICAgICAgIHZhbHVlTGFiZWwgICAgOiAnYm90dG9tLXJpZ2h0J1xuICAgICAgICB9LCB7XG4gICAgICAgICAgICBtb2R1bGUgICAgICAgIDogUmFkaW8sXG4gICAgICAgICAgICBjaGVja2VkICAgICAgIDogbWUuZ2V0QmFkZ2VUYWJIZWFkZXIoKS5iYWRnZVBvc2l0aW9uID09PSAndG9wLWxlZnQnLFxuICAgICAgICAgICAgaGlkZVZhbHVlTGFiZWw6IGZhbHNlLFxuICAgICAgICAgICAgbGFiZWxUZXh0ICAgICA6ICcnLFxuICAgICAgICAgICAgbGlzdGVuZXJzICAgICA6IHtjaGFuZ2U6IG1lLm9uQmFkZ2VSYWRpb0NoYW5nZS5iaW5kKG1lLCAnYmFkZ2VQb3NpdGlvbicsICd0b3AtbGVmdCcpfSxcbiAgICAgICAgICAgIG5hbWUgICAgICAgICAgOiAnYmFkZ2VQb3NpdGlvbicsXG4gICAgICAgICAgICB2YWx1ZUxhYmVsICAgIDogJ3RvcC1sZWZ0J1xuICAgICAgICB9LCB7XG4gICAgICAgICAgICBtb2R1bGUgICAgICAgIDogUmFkaW8sXG4gICAgICAgICAgICBjaGVja2VkICAgICAgIDogbWUuZ2V0QmFkZ2VUYWJIZWFkZXIoKS5iYWRnZVBvc2l0aW9uID09PSAndG9wLXJpZ2h0JyxcbiAgICAgICAgICAgIGhpZGVWYWx1ZUxhYmVsOiBmYWxzZSxcbiAgICAgICAgICAgIGxhYmVsVGV4dCAgICAgOiAnJyxcbiAgICAgICAgICAgIGxpc3RlbmVycyAgICAgOiB7Y2hhbmdlOiBtZS5vbkJhZGdlUmFkaW9DaGFuZ2UuYmluZChtZSwgJ2JhZGdlUG9zaXRpb24nLCAndG9wLXJpZ2h0Jyl9LFxuICAgICAgICAgICAgbmFtZSAgICAgICAgICA6ICdiYWRnZVBvc2l0aW9uJyxcbiAgICAgICAgICAgIHZhbHVlTGFiZWwgICAgOiAndG9wLXJpZ2h0J1xuICAgICAgICB9LCB7XG4gICAgICAgICAgICBtb2R1bGUgICA6IFRleHRGaWVsZCxcbiAgICAgICAgICAgIGxhYmVsVGV4dDogJ2JhZGdlVGV4dCcsXG4gICAgICAgICAgICBsaXN0ZW5lcnM6IHtjaGFuZ2U6IG1lLm9uQmFkZ2VDb25maWdDaGFuZ2UuYmluZChtZSwgJ2JhZGdlVGV4dCcpfSxcbiAgICAgICAgICAgIHN0eWxlICAgIDoge21hcmdpblRvcDogJzEwcHgnfSxcbiAgICAgICAgICAgIHZhbHVlICAgIDogbWUuZ2V0QmFkZ2VUYWJIZWFkZXIoKS5iYWRnZVRleHRcbiAgICAgICAgfV1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBPdmVycmlkZGVuIGZyb20gYENvbmZpZ3VyYXRpb25WaWV3cG9ydGAuIFRoaXMgbWV0aG9kIGNyZWF0ZXMgdGhlIGFjdHVhbCBgVGFiQ29udGFpbmVyYCBpbnN0YW5jZVxuICAgICAqIHRvIGJlIGRlbW9uc3RyYXRlZC4gSXQgaXMgY29uZmlndXJlZCB3aXRoIHRocmVlIGluaXRpYWwgdGFicyBhbmQgYSBsaXN0ZW5lciB0byBzeW5jIHVzZXItZHJpdmVuXG4gICAgICogdGFiIGNoYW5nZXMgYmFjayB0byB0aGUgY29uZmlndXJhdGlvbiBwYW5lbC5cbiAgICAgKiBAcmV0dXJucyB7TmVvLnRhYi5Db250YWluZXJ9IFRoZSBjb25maWd1cmVkIFRhYkNvbnRhaW5lciBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBjcmVhdGVFeGFtcGxlQ29tcG9uZW50KCkge1xuICAgICAgICByZXR1cm4gTmVvLmNyZWF0ZShUYWJDb250YWluZXIsIHtcbiAgICAgICAgICAgIGRyYWdSZXNvcnRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgaGVpZ2h0ICAgICAgICA6IDMwMCxcbiAgICAgICAgICAgIHdpZHRoICAgICAgICAgOiA1MDAsXG4gICAgICAgICAgICBzdHlsZSAgICAgICAgIDoge21hcmdpbjogJzIwcHgnfSxcblxuICAgICAgICAgICAgaXRlbURlZmF1bHRzOiB7XG4gICAgICAgICAgICAgICAgbnR5cGU6ICdjb21wb25lbnQnLFxuICAgICAgICAgICAgICAgIGNscyAgOiBbJ25lby1leGFtcGxlcy10YWItY29tcG9uZW50J10sXG4gICAgICAgICAgICAgICAgc3R5bGU6IHtwYWRkaW5nOiAnMjBweCd9XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBpdGVtczogW3tcbiAgICAgICAgICAgICAgICBoZWFkZXI6IHtpY29uQ2xzOiAnZmEgZmEtaG9tZScsIHRleHQ6ICdUYWIgMScsIGZsYWc6ICd0YWIxJyx9LFxuICAgICAgICAgICAgICAgIHZkb20gIDoge2h0bWw6ICdUYWIgMSBDb250ZW50J31cbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBoZWFkZXI6IHtpY29uQ2xzOiAnZmEgZmEtcGxheS1jaXJjbGUnLCB0ZXh0OiAnVGFiIDInfSxcbiAgICAgICAgICAgICAgICB2ZG9tICA6IHtodG1sOiAnVGFiIDIgQ29udGVudCd9XG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgaGVhZGVyOiB7aWNvbkNsczogJ2ZhIGZhLXVzZXInLCB0ZXh0OiAnVGFiIDMnLCBiYWRnZVRleHQ6ICdoZWxsbyd9LFxuICAgICAgICAgICAgICAgIHZkb20gIDoge2h0bWw6ICdUYWIgMyBDb250ZW50J31cbiAgICAgICAgICAgIH1dLFxuXG4gICAgICAgICAgICBsaXN0ZW5lcnM6IHtcbiAgICAgICAgICAgICAgICBhY3RpdmVJbmRleENoYW5nZTogdGhpcy5vblVzZXJBY3RpdmVJbmRleENoYW5nZSxcbiAgICAgICAgICAgICAgICBzY29wZSAgICAgICAgICAgIDogdGhpc1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgaGVscGVyIG1ldGhvZCB0byByZXRyaWV2ZSB0aGUgaGVhZGVyIGJ1dHRvbiBmb3IgdGhlIHRoaXJkIHRhYiwgd2hpY2ggaXMgdXNlZCBmb3IgZGVtb25zdHJhdGluZ1xuICAgICAqIGJhZGdlIGZ1bmN0aW9uYWxpdHkuXG4gICAgICogQHJldHVybnMge05lby50YWIuaGVhZGVyLkJ1dHRvbn1cbiAgICAgKi9cbiAgICBnZXRCYWRnZVRhYkhlYWRlcigpIHtcbiAgICAgICAgbGV0IHRhYkhlYWRlcnMgPSB0aGlzLmV4YW1wbGVDb21wb25lbnQuZ2V0VGFiQmFyKCkuaXRlbXMsXG4gICAgICAgICAgICBpdGVtO1xuXG4gICAgICAgIGZvciAoaXRlbSBvZiB0YWJIZWFkZXJzKSB7XG4gICAgICAgICAgICBpZiAoaXRlbS50ZXh0ID09PSAnVGFiIDMnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgaGVscGVyIG1ldGhvZCB0byByZXRyaWV2ZSB0aGUgaGVhZGVyIGJ1dHRvbiBmb3IgdGhlIGZpcnN0IHRhYiwgaWRlbnRpZmllZCBieSBhIHVuaXF1ZSBgZmxhZ2AgcHJvcGVydHkuXG4gICAgICogVGhpcyBhbGxvd3MgZm9yIHN0YWJsZSB0YXJnZXRpbmcgb2YgdGhlIHRhYiBldmVuIGlmIGl0cyB0ZXh0IG9yIHBvc2l0aW9uIGNoYW5nZXMuXG4gICAgICogQHJldHVybnMge05lby50YWIuaGVhZGVyLkJ1dHRvbn1cbiAgICAgKi9cbiAgICBnZXRGaXJzdFRhYkhlYWRlcigpIHtcbiAgICAgICAgbGV0IHRhYkhlYWRlcnMgPSB0aGlzLmV4YW1wbGVDb21wb25lbnQuZ2V0VGFiQmFyKCkuaXRlbXMsXG4gICAgICAgICAgICBpdGVtO1xuXG4gICAgICAgIGZvciAoaXRlbSBvZiB0YWJIZWFkZXJzKSB7XG4gICAgICAgICAgICBpZiAoaXRlbS5mbGFnID09PSAndGFiMScpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGFuZGxlcyB0aGUgY2hhbmdlIGV2ZW50IGZyb20gdmFyaW91cyB0ZXh0IGZpZWxkcyBpbiB0aGUgY29uZmlndXJhdGlvbiBwYW5lbCB0aGF0IGNvbnRyb2wgdGhlXG4gICAgICogcHJvcGVydGllcyBvZiB0aGUgdGhpcmQgdGFiJ3MgaGVhZGVyICh0aGUgXCJiYWRnZSB0YWJcIikuXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGNvbmZpZyBUaGUgbmFtZSBvZiB0aGUgY29uZmlnIHByb3BlcnR5IHRvIGNoYW5nZSAoZS5nLiwgJ2JhZGdlVGV4dCcpLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIFRoZSBldmVudCBkYXRhIGZyb20gdGhlIGZpZWxkJ3MgY2hhbmdlIGV2ZW50LlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBvcHRzLnZhbHVlIFRoZSBuZXcgdmFsdWUgZm9yIHRoZSBjb25maWcuXG4gICAgICovXG4gICAgb25CYWRnZUNvbmZpZ0NoYW5nZShjb25maWcsIG9wdHMpIHtcbiAgICAgICAgdGhpcy5nZXRCYWRnZVRhYkhlYWRlcigpW2NvbmZpZ10gPSBvcHRzLnZhbHVlXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGFuZGxlcyB0aGUgY2hhbmdlIGV2ZW50IGZyb20gdGhlIHJhZGlvIGdyb3VwIGNvbnRyb2xsaW5nIHRoZSBgYmFkZ2VQb3NpdGlvbmAgY29uZmlnLlxuICAgICAqIEl0IGVuc3VyZXMgdGhlIGNvbmZpZyBpcyBvbmx5IHVwZGF0ZWQgd2hlbiBhIHJhZGlvIGJ1dHRvbiBpcyBjaGVja2VkLCBub3QgdW5jaGVja2VkLlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBjb25maWcgVGhlIG5hbWUgb2YgdGhlIGNvbmZpZyBwcm9wZXJ0eSB0byBjaGFuZ2UgKGFsd2F5cyAnYmFkZ2VQb3NpdGlvbicpLlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZSBUaGUgbmV3IHZhbHVlIGZvciB0aGUgYmFkZ2UgcG9zaXRpb24gKGUuZy4sICd0b3AtcmlnaHQnKS5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyBUaGUgZXZlbnQgZGF0YSBmcm9tIHRoZSByYWRpbydzIGNoYW5nZSBldmVudC5cbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IG9wdHMudmFsdWUgVGhlIGNoZWNrZWQgc3RhdGUgb2YgdGhlIHJhZGlvIGJ1dHRvbi5cbiAgICAgKi9cbiAgICBvbkJhZGdlUmFkaW9DaGFuZ2UoY29uZmlnLCB2YWx1ZSwgb3B0cykge1xuICAgICAgICBpZiAob3B0cy52YWx1ZSA9PT0gdHJ1ZSkgeyAvLyB3ZSBvbmx5IHdhbnQgdG8gbGlzdGVuIHRvIGNoZWNrIGV2ZW50cywgbm90IHVuY2hlY2tcbiAgICAgICAgICAgIHRoaXMuZ2V0QmFkZ2VUYWJIZWFkZXIoKVtjb25maWddID0gdmFsdWVcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEhhbmRsZXMgdGhlIGNoYW5nZSBldmVudCBmcm9tIHZhcmlvdXMgdGV4dCBmaWVsZHMgaW4gdGhlIGNvbmZpZ3VyYXRpb24gcGFuZWwgdGhhdCBjb250cm9sIHRoZVxuICAgICAqIHByb3BlcnRpZXMgb2YgdGhlIGZpcnN0IHRhYidzIGhlYWRlci5cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gY29uZmlnIFRoZSBuYW1lIG9mIHRoZSBjb25maWcgcHJvcGVydHkgdG8gY2hhbmdlIChlLmcuLCAndGV4dCcsICdpY29uQ2xzJykuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgVGhlIGV2ZW50IGRhdGEgZnJvbSB0aGUgZmllbGQncyBjaGFuZ2UgZXZlbnQuXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG9wdHMudmFsdWUgVGhlIG5ldyB2YWx1ZSBmb3IgdGhlIGNvbmZpZy5cbiAgICAgKi9cbiAgICBvbkZpcnN0VGFiSGVhZGVyQ29uZmlnQ2hhbmdlKGNvbmZpZywgb3B0cykge1xuICAgICAgICB0aGlzLmdldEZpcnN0VGFiSGVhZGVyKClbY29uZmlnXSA9IG9wdHMudmFsdWVcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIYW5kbGVzIHRoZSBjaGFuZ2UgZXZlbnQgZnJvbSB0aGUgJ3JldmVyc2VkIGxheW91dCBzb3J0LWRpcmVjdGlvbicgY2hlY2tib3guIFRoaXMgbWV0aG9kXG4gICAgICogZHluYW1pY2FsbHkgbW9kaWZpZXMgdGhlIGBkaXJlY3Rpb25gIG9mIHRoZSB0YWIgYmFyJ3MgbGF5b3V0IHRvIGRlbW9uc3RyYXRlIGhvdyB0aGUgdmlzdWFsXG4gICAgICogb3JkZXIgb2YgdGhlIHRhYnMgY2FuIGJlIHJldmVyc2VkLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhIFRoZSBldmVudCBkYXRhIGZyb20gdGhlIGNoZWNrYm94IGNoYW5nZSBldmVudC5cbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IGRhdGEudmFsdWUgVGhlIG5ldyBjaGVja2VkIHN0YXRlIG9mIHRoZSBjaGVja2JveC5cbiAgICAgKi9cbiAgICBvbkxheW91dFNvcnREaXJlY3Rpb25DaGFuZ2UoZGF0YSkge1xuICAgICAgICBsZXQgbGF5b3V0ICAgID0gdGhpcy5leGFtcGxlQ29tcG9uZW50LmdldFRhYkJhcigpLmxheW91dCxcbiAgICAgICAgICAgIGRpcmVjdGlvbiA9IGxheW91dC5kaXJlY3Rpb247XG5cbiAgICAgICAgaWYgKGRhdGEudmFsdWUgPT09IHRydWUpIHtcbiAgICAgICAgICAgIGlmICghZGlyZWN0aW9uLmluY2x1ZGVzKCctcmV2ZXJzZScpKSB7XG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uICs9ICctcmV2ZXJzZSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChkaXJlY3Rpb24uaW5jbHVkZXMoJy1yZXZlcnNlJykpIHtcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPSBkaXJlY3Rpb24uc3Vic3RyaW5nKDAsIGRpcmVjdGlvbi5pbmRleE9mKCctcmV2ZXJzZScpKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGF5b3V0LmRpcmVjdGlvbiA9IGRpcmVjdGlvblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEhhbmRsZXMgdGhlIGNoYW5nZSBldmVudCBmcm9tIHRoZSByYWRpbyBncm91cCBjb250cm9sbGluZyB0aGUgYHRhYkJhclBvc2l0aW9uYCBjb25maWcuXG4gICAgICogSXQgdXBkYXRlcyB0aGUgdGFiIGNvbnRhaW5lcidzIGNvbmZpZyBhbmQgYWxzbyBpbnRlbGxpZ2VudGx5IGFkanVzdHMgdGhlICdyZXZlcnNlZCBsYXlvdXQnXG4gICAgICogY2hlY2tib3gsIGFzIHRoZSBjb25jZXB0IG9mIGEgcmV2ZXJzZWQgZGlyZWN0aW9uIGlzIG9ubHkgbWVhbmluZ2Z1bCBmb3IgJ2xlZnQnIGFuZCAncmlnaHQnIHBvc2l0aW9ucy5cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdmFsdWUgVGhlIG5ldyB2YWx1ZSBmb3IgdGhlIHRhYiBiYXIgcG9zaXRpb24gKGUuZy4sICd0b3AnLCAncmlnaHQnKS5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyBUaGUgZXZlbnQgZGF0YSBmcm9tIHRoZSByYWRpbydzIGNoYW5nZSBldmVudC5cbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IG9wdHMudmFsdWUgVGhlIGNoZWNrZWQgc3RhdGUgb2YgdGhlIHJhZGlvIGJ1dHRvbi5cbiAgICAgKi9cbiAgICBvblRhYkJhclBvc2l0aW9uQ2hhbmdlKHZhbHVlLCBvcHRzKSB7XG4gICAgICAgIGlmIChvcHRzLnZhbHVlID09PSB0cnVlKSB7IC8vIHdlIG9ubHkgd2FudCB0byBsaXN0ZW4gdG8gY2hlY2sgZXZlbnRzLCBub3QgdW5jaGVja1xuICAgICAgICAgICAgdGhpcy5vblJhZGlvQ2hhbmdlKCd0YWJCYXJQb3NpdGlvbicsIHZhbHVlLCBvcHRzKTtcbiAgICAgICAgICAgIE5lby5nZXRDb21wb25lbnQoJ3JldmVyc2VMYXlvdXREaXJlY3Rpb24nKS5jaGVja2VkID0gdmFsdWUgPT09ICdsZWZ0J1xuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIGxpc3RlbmVyIHJlc3BvbmRzIHRvIHRoZSBgYWN0aXZlSW5kZXhDaGFuZ2VgIGV2ZW50IGZpcmVkIGJ5IHRoZSBgVGFiQ29udGFpbmVyYCB3aGVuIGEgdXNlclxuICAgICAqIGNsaWNrcyBvbiBhIHRhYi4gSXRzIHB1cnBvc2UgaXMgdG8gc3luY2hyb25pemUgdGhlIFVJLCBlbnN1cmluZyB0aGF0IHRoZSBgYWN0aXZlSW5kZXhgIG51bWJlciBmaWVsZFxuICAgICAqIGluIHRoZSBjb25maWd1cmF0aW9uIHBhbmVsIGFjY3VyYXRlbHkgcmVmbGVjdHMgdGhlIGN1cnJlbnRseSBhY3RpdmUgdGFiLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIFRoZSBldmVudCBkYXRhIGZyb20gdGhlIGBhY3RpdmVJbmRleENoYW5nZWAgZXZlbnQuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IG9wdHMudmFsdWUgVGhlIG5ldyBhY3RpdmUgaW5kZXguXG4gICAgICovXG4gICAgb25Vc2VyQWN0aXZlSW5kZXhDaGFuZ2Uob3B0cykge1xuICAgICAgICBOZW8uZ2V0Q29tcG9uZW50KCdhY3RpdmVJbmRleEZpZWxkJykudmFsdWUgPSBvcHRzLnZhbHVlXG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBOZW8uc2V0dXBDbGFzcyhNYWluQ29udGFpbmVyKTtcbiIsImltcG9ydCBNYWluQ29udGFpbmVyIGZyb20gJy4vTWFpbkNvbnRhaW5lci5tanMnO1xuXG5leHBvcnQgY29uc3Qgb25TdGFydCA9ICgpID0+IE5lby5hcHAoe1xuICAgIG1haW5WaWV3OiBNYWluQ29udGFpbmVyLFxuICAgIG5hbWUgICAgOiAnTmVvLmV4YW1wbGVzLnRhYi5jb250YWluZXInXG59KTtcbiIsImltcG9ydCBDaGVja0JveCAgICAgICAgIGZyb20gJy4vQ2hlY2tCb3gubWpzJztcbmltcG9ydCBDb21wb25lbnRNYW5hZ2VyIGZyb20gJy4uLy4uL21hbmFnZXIvQ29tcG9uZW50Lm1qcyc7XG5cbi8qKlxuICogQGNsYXNzIE5lby5mb3JtLmZpZWxkLlJhZGlvXG4gKiBAZXh0ZW5kcyBOZW8uZm9ybS5maWVsZC5DaGVja0JveFxuICovXG5jbGFzcyBSYWRpbyBleHRlbmRzIENoZWNrQm94IHtcbiAgICBzdGF0aWMgY29uZmlnID0ge1xuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfSBjbGFzc05hbWU9J05lby5mb3JtLmZpZWxkLlJhZGlvJ1xuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICBjbGFzc05hbWU6ICdOZW8uZm9ybS5maWVsZC5SYWRpbycsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtTdHJpbmd9IG50eXBlPSdyYWRpb2ZpZWxkJ1xuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICBudHlwZTogJ3JhZGlvZmllbGQnLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nW119IGJhc2VDbHM9WyduZW8tcmFkaW9maWVsZCcsJ25lby1jaGVja2JveGZpZWxkJ11cbiAgICAgICAgICovXG4gICAgICAgIGJhc2VDbHM6IFsnbmVvLXJhZGlvZmllbGQnLCAnbmVvLWNoZWNrYm94ZmllbGQnXSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ1tdfSBpY29uQ2xzPVsnZmFyJywnZmEtY2lyY2xlJ11cbiAgICAgICAgICovXG4gICAgICAgIGljb25DbHM6IFsnZmFyJywgJ2ZhLWNpcmNsZSddLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfSBpbnB1dFR5cGU9J3JhZGlvJ1xuICAgICAgICAgKiBAcmVhY3RpdmVcbiAgICAgICAgICovXG4gICAgICAgIGlucHV0VHlwZTogJ3JhZGlvJ1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCBhZnRlciB0aGUgY2hlY2tlZCBjb25maWcgZ290IGNoYW5nZWRcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IHZhbHVlXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBvbGRWYWx1ZVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBhZnRlclNldENoZWNrZWQodmFsdWUsIG9sZFZhbHVlKSB7XG4gICAgICAgIHN1cGVyLmFmdGVyU2V0Q2hlY2tlZCh2YWx1ZSwgb2xkVmFsdWUpO1xuXG4gICAgICAgIC8vIHVwZGF0ZSByYWRpb3Mgd2l0aCB0aGUgc2FtZSBuYW1lIHRvIGJlIHVuY2hlY2tlZFxuICAgICAgICB2YWx1ZSAmJiB0aGlzLnVuY2hlY2tHcm91cEl0ZW1zKClcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSYWRpb3Mgc2hvdWxkIG9ubHkgZmlyZSBjaGFuZ2UgJiBmaWVsZENoYW5nZSBldmVudHMgaWYgY2hlY2tlZC5cbiAgICAgKiBJZiB0aGVyZSB3YXMganVzdCAxIHJhZGlvLCB5b3UgY2FuIG5vdCB1bmNoZWNrIGl0LlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAgICAgKiBAcGFyYW0geyp9IG9sZFZhbHVlXG4gICAgICovXG4gICAgZmlyZUNoYW5nZUV2ZW50KHZhbHVlLCBvbGRWYWx1ZSkge1xuICAgICAgICB0aGlzLmNoZWNrZWQgJiYgc3VwZXIuZmlyZUNoYW5nZUV2ZW50KHZhbHVlLCBvbGRWYWx1ZSlcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyB7U3RyaW5nW119XG4gICAgICovXG4gICAgZ2V0R3JvdXBWYWx1ZSgpIHtcbiAgICAgICAgbGV0IHZhbHVlID0gc3VwZXIuZ2V0R3JvdXBWYWx1ZSgpO1xuXG4gICAgICAgIHJldHVybiB2YWx1ZS5sZW5ndGggPiAwID8gdmFsdWVbMF0gOiBbXVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJhZGlvcyBkbyBub3QgZmlyZSBhIGNoYW5nZSBldmVudCBmb3IgXCJ1bmNoZWNrXCIsIHNvIHdlIG5lZWQgdG8gaXRlcmF0ZSBvdmVyIG90aGVyIHJhZGlvcyB3aXRoIHRoZSBzYW1lIG5hbWUuXG4gICAgICovXG4gICAgdW5jaGVja0dyb3VwSXRlbXMoKSB7XG4gICAgICAgIGxldCBtZSA9IHRoaXMsXG4gICAgICAgICAgICByYWRpb3M7XG5cbiAgICAgICAgLy8gZGlzY3Vzczogd2UgY291bGQgbGltaXQgdGhpcyB0byByYWRpb3MgaW5zaWRlIHRoZSBzYW1lIGZvcm0sIElGIGEgdG9wIGxldmVsIGZvcm0gaXMgdXNlZFxuICAgICAgICByYWRpb3MgPSBDb21wb25lbnRNYW5hZ2VyLmZpbmQoe1xuICAgICAgICAgICAgbnR5cGU6ICdyYWRpb2ZpZWxkJyxcbiAgICAgICAgICAgIG5hbWUgOiBtZS5uYW1lXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJhZGlvcy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICAgICAgaWYgKGl0ZW0uaWQgIT09IG1lLmlkICYmIGl0ZW0uX2NoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICBpdGVtLmNoZWNrZWQgPSBmYWxzZVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTmVvLnNldHVwQ2xhc3MoUmFkaW8pO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9