"use strict";
(self["webpackChunkneo_mjs"] = self["webpackChunkneo_mjs"] || []).push([["vendors-examples_tab_container_app_mjs"],{

/***/ "./examples/tab/container/MainContainer.mjs":
/*!**************************************************!*\
  !*** ./examples/tab/container/MainContainer.mjs ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _src_form_field_CheckBox_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../src/form/field/CheckBox.mjs */ "./src/form/field/CheckBox.mjs");
/* harmony import */ var _ConfigurationViewport_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../ConfigurationViewport.mjs */ "./examples/ConfigurationViewport.mjs");
/* harmony import */ var _src_form_field_Number_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../src/form/field/Number.mjs */ "./src/form/field/Number.mjs");
/* harmony import */ var _src_form_field_Radio_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../src/form/field/Radio.mjs */ "./src/form/field/Radio.mjs");
/* harmony import */ var _src_form_field_Text_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../src/form/field/Text.mjs */ "./src/form/field/Text.mjs");
/* harmony import */ var _src_tab_Container_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../src/tab/Container.mjs */ "./src/tab/Container.mjs");







/**
 * @summary An interactive example demonstrating the Neo.tab.Container.
 *
 * This class creates a viewport that showcases the `Neo.tab.Container`, a component for managing
 * a collection of child components in a tabbed interface. It extends `ConfigurationViewport` to provide
 * a side-by-side view with the live tab container on one side and a configuration panel on the other.
 * The panel allows for dynamic manipulation of the container's properties, such as `activeIndex`,
 * `tabBarPosition`, and individual tab headers, to demonstrate the component's extensive features
 * and reactivity.
 *
 * @class Neo.examples.tab.container.MainContainer
 * @extends Neo.examples.ConfigurationViewport
 * @see Neo.tab.Container
 */
class MainContainer extends _ConfigurationViewport_mjs__WEBPACK_IMPORTED_MODULE_1__["default"] {
    static config = {
        /**
         * @member {String} className='Neo.examples.tab.container.MainContainer'
         * @protected
         */
        className: 'Neo.examples.tab.container.MainContainer',
        /**
         * @member {Boolean} autoMount=true
         */
        autoMount: true,
        /**
         * @member {Number} configItemLabelWidth=160
         */
        configItemLabelWidth: 160,
        /**
         * @member {Number} configItemWidth=280
         */
        configItemWidth: 280,
        /**
         * The layout for the viewport, arranging the configuration panel and the example component horizontally.
         * @member {Object} layout={ntype: 'hbox', align: 'stretch'}
         */
        layout: {ntype: 'hbox', align: 'stretch'}
    }

    /**
     * Overridden from `ConfigurationViewport`. This method defines the set of form fields that will be
     * displayed in the configuration panel. These fields are bound to the properties of the example
     * TabContainer, allowing for real-time manipulation of its appearance and behavior.
     * @returns {Object[]} An array of component configuration objects.
     */
    createConfigurationComponents() {
        let me           = this,
            tabContainer = me.exampleComponent,
            headerLayout = tabContainer.getTabBar().layout;

        return [{
            module   : _src_form_field_Number_mjs__WEBPACK_IMPORTED_MODULE_2__["default"],
            id       : 'activeIndexField',
            labelText: 'activeIndex',
            listeners: {change: me.onConfigChange.bind(me, 'activeIndex')},
            maxValue : 2,
            minValue : 0,
            value    : tabContainer.activeIndex
        }, {
            module   : _src_form_field_Number_mjs__WEBPACK_IMPORTED_MODULE_2__["default"],
            labelText: 'height',
            listeners: {change: me.onConfigChange.bind(me, 'height')},
            maxValue : 800,
            minValue : 300,
            stepSize : 5,
            value    : tabContainer.height
        }, {
            module        : _src_form_field_CheckBox_mjs__WEBPACK_IMPORTED_MODULE_0__["default"],
            checked       : headerLayout.direction === 'column-reverse' || headerLayout.direction === 'row-reverse',
            hideLabel     : true,
            hideValueLabel: false,
            id            : 'reverseLayoutDirection',
            listeners     : {change: me.onLayoutSortDirectionChange.bind(me)},
            style         : {marginTop: '10px'},
            valueLabelText: 'reversed layout sort-direction'
        }, {
            module        : _src_form_field_CheckBox_mjs__WEBPACK_IMPORTED_MODULE_0__["default"],
            checked       : tabContainer.sortable,
            hideLabel     : true,
            hideValueLabel: false,
            listeners     : {change: me.onConfigChange.bind(me, 'sortable')},
            style         : {marginTop: '10px'},
            valueLabelText: 'sortable'
        }, {
            module        : _src_form_field_Radio_mjs__WEBPACK_IMPORTED_MODULE_3__["default"],
            checked       : tabContainer.tabBarPosition === 'top',
            hideValueLabel: false,
            labelText     : 'tabBarPosition',
            listeners     : {change: me.onTabBarPositionChange.bind(me, 'top')},
            name          : 'tabBarPosition',
            style         : {marginTop: '10px'},
            valueLabelText: 'top'
        }, {
            module        : _src_form_field_Radio_mjs__WEBPACK_IMPORTED_MODULE_3__["default"],
            checked       : tabContainer.tabBarPosition === 'right',
            hideValueLabel: false,
            labelText     : '',
            listeners     : {change: me.onTabBarPositionChange.bind(me, 'right')},
            name          : 'tabBarPosition',
            valueLabelText: 'right'
        }, {
            module        : _src_form_field_Radio_mjs__WEBPACK_IMPORTED_MODULE_3__["default"],
            checked       : tabContainer.tabBarPosition === 'bottom',
            hideValueLabel: false,
            labelText     : '',
            listeners     : {change: me.onTabBarPositionChange.bind(me, 'bottom')},
            name          : 'tabBarPosition',
            valueLabelText: 'bottom'
        }, {
            module        : _src_form_field_Radio_mjs__WEBPACK_IMPORTED_MODULE_3__["default"],
            checked       : tabContainer.tabBarPosition === 'left',
            hideValueLabel: false,
            labelText     : '',
            listeners     : {change: me.onTabBarPositionChange.bind(me, 'left')},
            name          : 'tabBarPosition',
            valueLabelText: 'left'
        }, {
            module   : _src_form_field_Number_mjs__WEBPACK_IMPORTED_MODULE_2__["default"],
            labelText: 'width',
            listeners: {change: me.onConfigChange.bind(me, 'width')},
            maxValue : 800,
            minValue : 250,
            stepSize : 5,
            style    : {marginTop: '10px'},
            value    : tabContainer.width
        }, {
            module        : _src_form_field_CheckBox_mjs__WEBPACK_IMPORTED_MODULE_0__["default"],
            checked       : tabContainer.useActiveTabIndicator,
            hideLabel     : true,
            hideValueLabel: false,
            listeners     : {change: me.onConfigChange.bind(me, 'useActiveTabIndicator')},
            style         : {marginTop: '10px'},
            valueLabelText: 'useActiveTabIndicator'
        }, {
            module   : _src_form_field_Text_mjs__WEBPACK_IMPORTED_MODULE_4__["default"], // todo: SelectField
            labelText: 'Tab 1 iconCls',
            listeners: {change: me.onFirstTabHeaderConfigChange.bind(me, 'iconCls')},
            style    : {marginTop: '50px'},
            value    : me.getFirstTabHeader().iconCls
        }, {
            module   : _src_form_field_Text_mjs__WEBPACK_IMPORTED_MODULE_4__["default"], // todo: ColorPicker
            labelText: 'Tab 1 iconColor',
            listeners: {change: me.onFirstTabHeaderConfigChange.bind(me, 'iconColor')},
            value    : me.getFirstTabHeader().iconColor
        }, {
            module   : _src_form_field_Text_mjs__WEBPACK_IMPORTED_MODULE_4__["default"],
            labelText: 'Tab 1 text',
            listeners: {change: me.onFirstTabHeaderConfigChange.bind(me, 'text')},
            value    : me.getFirstTabHeader().text
        }, {
            module        : _src_form_field_Radio_mjs__WEBPACK_IMPORTED_MODULE_3__["default"],
            checked       : me.getBadgeTabHeader().badgePosition === 'bottom-left',
            hideValueLabel: false,
            labelText     : 'badgePosition',
            listeners     : {change: me.onBadgeRadioChange.bind(me, 'badgePosition', 'bottom-left')},
            name          : 'badgePosition',
            style         : {marginTop: '50px'},
            valueLabelText: 'bottom-left'
        }, {
            module        : _src_form_field_Radio_mjs__WEBPACK_IMPORTED_MODULE_3__["default"],
            checked       : me.getBadgeTabHeader().badgePosition === 'bottom-right',
            hideValueLabel: false,
            labelText     : '',
            listeners     : {change: me.onBadgeRadioChange.bind(me, 'badgePosition', 'bottom-right')},
            name          : 'badgePosition',
            valueLabelText: 'bottom-right'
        }, {
            module        : _src_form_field_Radio_mjs__WEBPACK_IMPORTED_MODULE_3__["default"],
            checked       : me.getBadgeTabHeader().badgePosition === 'top-left',
            hideValueLabel: false,
            labelText     : '',
            listeners     : {change: me.onBadgeRadioChange.bind(me, 'badgePosition', 'top-left')},
            name          : 'badgePosition',
            valueLabelText: 'top-left'
        }, {
            module        : _src_form_field_Radio_mjs__WEBPACK_IMPORTED_MODULE_3__["default"],
            checked       : me.getBadgeTabHeader().badgePosition === 'top-right',
            hideValueLabel: false,
            labelText     : '',
            listeners     : {change: me.onBadgeRadioChange.bind(me, 'badgePosition', 'top-right')},
            name          : 'badgePosition',
            valueLabelText: 'top-right'
        }, {
            module   : _src_form_field_Text_mjs__WEBPACK_IMPORTED_MODULE_4__["default"],
            labelText: 'badgeText',
            listeners: {change: me.onBadgeConfigChange.bind(me, 'badgeText')},
            style    : {marginTop: '10px'},
            value    : me.getBadgeTabHeader().badgeText
        }]
    }

    /**
     * Overridden from `ConfigurationViewport`. This method creates the actual `TabContainer` instance
     * to be demonstrated. It is configured with three initial tabs and a listener to sync user-driven
     * tab changes back to the configuration panel.
     * @returns {Neo.tab.Container} The configured TabContainer instance.
     */
    createExampleComponent() {
        return Neo.create(_src_tab_Container_mjs__WEBPACK_IMPORTED_MODULE_5__["default"], {
            height  : 300,
            width   : 500,
            sortable: true,
            style   : {margin: '20px'},

            itemDefaults: {
                ntype: 'component',
                cls  : ['neo-examples-tab-component'],
                style: {padding: '20px'}
            },

            items: [{
                header: {iconCls: 'fa fa-home', text: 'Tab 1', flag: 'tab1',},
                vdom  : {html: 'Tab 1 Content'}
            }, {
                header: {iconCls: 'fa fa-play-circle', text: 'Tab 2'},
                vdom  : {html: 'Tab 2 Content'}
            }, {
                header: {iconCls: 'fa fa-user', text: 'Tab 3', badgeText: 'hello'},
                vdom  : {html: 'Tab 3 Content'}
            }],

            listeners: {
                activeIndexChange: this.onUserActiveIndexChange,
                scope            : this
            }
        })
    }

    /**
     * A helper method to retrieve the header button for the third tab, which is used for demonstrating
     * badge functionality.
     * @returns {Neo.tab.header.Button}
     */
    getBadgeTabHeader() {
        let tabHeaders = this.exampleComponent.getTabBar().items,
            item;

        for (item of tabHeaders) {
            if (item.text === 'Tab 3') {
                return item
            }
        }
    }

    /**
     * A helper method to retrieve the header button for the first tab, identified by a unique `flag` property.
     * This allows for stable targeting of the tab even if its text or position changes.
     * @returns {Neo.tab.header.Button}
     */
    getFirstTabHeader() {
        let tabHeaders = this.exampleComponent.getTabBar().items,
            item;

        for (item of tabHeaders) {
            if (item.flag === 'tab1') {
                return item
            }
        }
    }

    /**
     * Handles the change event from various text fields in the configuration panel that control the
     * properties of the third tab's header (the "badge tab").
     * @param {String} config The name of the config property to change (e.g., 'badgeText').
     * @param {Object} opts The event data from the field's change event.
     * @param {String} opts.value The new value for the config.
     */
    onBadgeConfigChange(config, opts) {
        this.getBadgeTabHeader()[config] = opts.value
    }

    /**
     * Handles the change event from the radio group controlling the `badgePosition` config.
     * It ensures the config is only updated when a radio button is checked, not unchecked.
     * @param {String} config The name of the config property to change (always 'badgePosition').
     * @param {String} value The new value for the badge position (e.g., 'top-right').
     * @param {Object} opts The event data from the radio's change event.
     * @param {Boolean} opts.value The checked state of the radio button.
     */
    onBadgeRadioChange(config, value, opts) {
        if (opts.value === true) { // we only want to listen to check events, not uncheck
            this.getBadgeTabHeader()[config] = value
        }
    }

    /**
     * Handles the change event from various text fields in the configuration panel that control the
     * properties of the first tab's header.
     * @param {String} config The name of the config property to change (e.g., 'text', 'iconCls').
     * @param {Object} opts The event data from the field's change event.
     * @param {String} opts.value The new value for the config.
     */
    onFirstTabHeaderConfigChange(config, opts) {
        this.getFirstTabHeader()[config] = opts.value
    }

    /**
     * Handles the change event from the 'reversed layout sort-direction' checkbox. This method
     * dynamically modifies the `direction` of the tab bar's layout to demonstrate how the visual
     * order of the tabs can be reversed.
     * @param {Object} data The event data from the checkbox change event.
     * @param {Boolean} data.value The new checked state of the checkbox.
     */
    onLayoutSortDirectionChange(data) {
        let layout    = this.exampleComponent.getTabBar().layout,
            direction = layout.direction;

        if (data.value === true) {
            if (!direction.includes('-reverse')) {
                direction += '-reverse'
            }
        } else {
            if (direction.includes('-reverse')) {
                direction = direction.substring(0, direction.indexOf('-reverse'))
            }
        }

        layout.direction = direction
    }

    /**
     * Handles the change event from the radio group controlling the `tabBarPosition` config.
     * It updates the tab container's config and also intelligently adjusts the 'reversed layout'
     * checkbox, as the concept of a reversed direction is only meaningful for 'left' and 'right' positions.
     * @param {String} value The new value for the tab bar position (e.g., 'top', 'right').
     * @param {Object} opts The event data from the radio's change event.
     * @param {Boolean} opts.value The checked state of the radio button.
     */
    onTabBarPositionChange(value, opts) {
        if (opts.value === true) { // we only want to listen to check events, not uncheck
            this.onRadioChange('tabBarPosition', value, opts);
            Neo.getComponent('reverseLayoutDirection').checked = value === 'left'
        }

    }

    /**
     * This listener responds to the `activeIndexChange` event fired by the `TabContainer` when a user
     * clicks on a tab. Its purpose is to synchronize the UI, ensuring that the `activeIndex` number field
     * in the configuration panel accurately reflects the currently active tab.
     * @param {Object} opts The event data from the `activeIndexChange` event.
     * @param {Number} opts.value The new active index.
     */
    onUserActiveIndexChange(opts) {
        Neo.getComponent('activeIndexField').value = opts.value
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(MainContainer));


/***/ }),

/***/ "./examples/tab/container/app.mjs":
/*!****************************************!*\
  !*** ./examples/tab/container/app.mjs ***!
  \****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   onStart: () => (/* binding */ onStart)
/* harmony export */ });
/* harmony import */ var _MainContainer_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MainContainer.mjs */ "./examples/tab/container/MainContainer.mjs");


const onStart = () => Neo.app({
    mainView: _MainContainer_mjs__WEBPACK_IMPORTED_MODULE_0__["default"],
    name    : 'Neo.examples.tab.container'
});


/***/ }),

/***/ "./src/form/field/Radio.mjs":
/*!**********************************!*\
  !*** ./src/form/field/Radio.mjs ***!
  \**********************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _CheckBox_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CheckBox.mjs */ "./src/form/field/CheckBox.mjs");
/* harmony import */ var _manager_Component_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../manager/Component.mjs */ "./src/manager/Component.mjs");



/**
 * @class Neo.form.field.Radio
 * @extends Neo.form.field.CheckBox
 */
class Radio extends _CheckBox_mjs__WEBPACK_IMPORTED_MODULE_0__["default"] {
    static config = {
        /**
         * @member {String} className='Neo.form.field.Radio'
         * @protected
         */
        className: 'Neo.form.field.Radio',
        /**
         * @member {String} ntype='radiofield'
         * @protected
         */
        ntype: 'radiofield',
        /**
         * @member {String[]} baseCls=['neo-radiofield','neo-checkboxfield']
         */
        baseCls: ['neo-radiofield', 'neo-checkboxfield'],
        /**
         * @member {String[]} iconCls=['far','fa-circle']
         */
        iconCls: ['far', 'fa-circle'],
        /**
         * @member {String} inputType='radio'
         * @reactive
         */
        inputType: 'radio'
    }

    /**
     * Triggered after the checked config got changed
     * @param {Boolean} value
     * @param {Boolean} oldValue
     * @protected
     */
    afterSetChecked(value, oldValue) {
        super.afterSetChecked(value, oldValue);

        // update radios with the same name to be unchecked
        value && this.uncheckGroupItems()
    }

    /**
     * Radios should only fire change & fieldChange events if checked.
     * If there was just 1 radio, you can not uncheck it.
     * @param {*} value
     * @param {*} oldValue
     */
    fireChangeEvent(value, oldValue) {
        this.checked && super.fireChangeEvent(value, oldValue)
    }

    /**
     * @returns {String[]}
     */
    getGroupValue() {
        let value = super.getGroupValue();

        return value.length > 0 ? value[0] : []
    }

    /**
     * Radios do not fire a change event for "uncheck", so we need to iterate over other radios with the same name.
     */
    uncheckGroupItems() {
        let me = this,
            radios;

        // discuss: we could limit this to radios inside the same form, IF a top level form is used
        radios = _manager_Component_mjs__WEBPACK_IMPORTED_MODULE_1__["default"].find({
            ntype: 'radiofield',
            name : me.name
        });

        radios.forEach(item => {
            if (item.id !== me.id && item._checked) {
                item.checked = false
            }
        })
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(Radio));


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2h1bmtzL2FwcC92ZW5kb3JzLWV4YW1wbGVzX3RhYl9jb250YWluZXJfYXBwX21qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXlFO0FBQ0w7QUFDRztBQUNEO0FBQ0Q7QUFDRjs7QUFFbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixrRUFBcUI7QUFDakQ7QUFDQTtBQUNBLG9CQUFvQixRQUFRO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFNBQVM7QUFDN0I7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFFBQVE7QUFDNUI7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFFBQVE7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsUUFBUSxRQUFRO0FBQ3BDO0FBQ0EsaUJBQWlCO0FBQ2pCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLFVBQVU7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHVCQUF1QixrRUFBVztBQUNsQztBQUNBO0FBQ0Esd0JBQXdCLGtEQUFrRDtBQUMxRTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsdUJBQXVCLGtFQUFXO0FBQ2xDO0FBQ0Esd0JBQXdCLDZDQUE2QztBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCw0QkFBNEIsb0VBQVE7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsZ0RBQWdEO0FBQzdFLDZCQUE2QixrQkFBa0I7QUFDL0M7QUFDQSxTQUFTO0FBQ1QsNEJBQTRCLG9FQUFRO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QiwrQ0FBK0M7QUFDNUUsNkJBQTZCLGtCQUFrQjtBQUMvQztBQUNBLFNBQVM7QUFDVCw0QkFBNEIsaUVBQUs7QUFDakM7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLGtEQUFrRDtBQUMvRTtBQUNBLDZCQUE2Qixr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QUNqQztBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBLGlFQUFlLHFCQUFxQixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmVvLm1qcy8uL2V4YW1wbGVzL3RhYi9jb250YWluZXIvTWFpbkNvbnRhaW5lci5tanMiLCJ3ZWJwYWNrOi8vbmVvLm1qcy8uL2V4YW1wbGVzL3RhYi9jb250YWluZXIvYXBwLm1qcyIsIndlYnBhY2s6Ly9uZW8ubWpzLy4vc3JjL2Zvcm0vZmllbGQvUmFkaW8ubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDaGVja0JveCAgICAgICAgICAgICAgZnJvbSAnLi4vLi4vLi4vc3JjL2Zvcm0vZmllbGQvQ2hlY2tCb3gubWpzJztcbmltcG9ydCBDb25maWd1cmF0aW9uVmlld3BvcnQgZnJvbSAnLi4vLi4vQ29uZmlndXJhdGlvblZpZXdwb3J0Lm1qcyc7XG5pbXBvcnQgTnVtYmVyRmllbGQgICAgICAgICAgIGZyb20gJy4uLy4uLy4uL3NyYy9mb3JtL2ZpZWxkL051bWJlci5tanMnO1xuaW1wb3J0IFJhZGlvICAgICAgICAgICAgICAgICBmcm9tICcuLi8uLi8uLi9zcmMvZm9ybS9maWVsZC9SYWRpby5tanMnO1xuaW1wb3J0IFRleHRGaWVsZCAgICAgICAgICAgICBmcm9tICcuLi8uLi8uLi9zcmMvZm9ybS9maWVsZC9UZXh0Lm1qcyc7XG5pbXBvcnQgVGFiQ29udGFpbmVyICAgICAgICAgIGZyb20gJy4uLy4uLy4uL3NyYy90YWIvQ29udGFpbmVyLm1qcyc7XG5cbi8qKlxuICogQHN1bW1hcnkgQW4gaW50ZXJhY3RpdmUgZXhhbXBsZSBkZW1vbnN0cmF0aW5nIHRoZSBOZW8udGFiLkNvbnRhaW5lci5cbiAqXG4gKiBUaGlzIGNsYXNzIGNyZWF0ZXMgYSB2aWV3cG9ydCB0aGF0IHNob3djYXNlcyB0aGUgYE5lby50YWIuQ29udGFpbmVyYCwgYSBjb21wb25lbnQgZm9yIG1hbmFnaW5nXG4gKiBhIGNvbGxlY3Rpb24gb2YgY2hpbGQgY29tcG9uZW50cyBpbiBhIHRhYmJlZCBpbnRlcmZhY2UuIEl0IGV4dGVuZHMgYENvbmZpZ3VyYXRpb25WaWV3cG9ydGAgdG8gcHJvdmlkZVxuICogYSBzaWRlLWJ5LXNpZGUgdmlldyB3aXRoIHRoZSBsaXZlIHRhYiBjb250YWluZXIgb24gb25lIHNpZGUgYW5kIGEgY29uZmlndXJhdGlvbiBwYW5lbCBvbiB0aGUgb3RoZXIuXG4gKiBUaGUgcGFuZWwgYWxsb3dzIGZvciBkeW5hbWljIG1hbmlwdWxhdGlvbiBvZiB0aGUgY29udGFpbmVyJ3MgcHJvcGVydGllcywgc3VjaCBhcyBgYWN0aXZlSW5kZXhgLFxuICogYHRhYkJhclBvc2l0aW9uYCwgYW5kIGluZGl2aWR1YWwgdGFiIGhlYWRlcnMsIHRvIGRlbW9uc3RyYXRlIHRoZSBjb21wb25lbnQncyBleHRlbnNpdmUgZmVhdHVyZXNcbiAqIGFuZCByZWFjdGl2aXR5LlxuICpcbiAqIEBjbGFzcyBOZW8uZXhhbXBsZXMudGFiLmNvbnRhaW5lci5NYWluQ29udGFpbmVyXG4gKiBAZXh0ZW5kcyBOZW8uZXhhbXBsZXMuQ29uZmlndXJhdGlvblZpZXdwb3J0XG4gKiBAc2VlIE5lby50YWIuQ29udGFpbmVyXG4gKi9cbmNsYXNzIE1haW5Db250YWluZXIgZXh0ZW5kcyBDb25maWd1cmF0aW9uVmlld3BvcnQge1xuICAgIHN0YXRpYyBjb25maWcgPSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtTdHJpbmd9IGNsYXNzTmFtZT0nTmVvLmV4YW1wbGVzLnRhYi5jb250YWluZXIuTWFpbkNvbnRhaW5lcidcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgY2xhc3NOYW1lOiAnTmVvLmV4YW1wbGVzLnRhYi5jb250YWluZXIuTWFpbkNvbnRhaW5lcicsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtCb29sZWFufSBhdXRvTW91bnQ9dHJ1ZVxuICAgICAgICAgKi9cbiAgICAgICAgYXV0b01vdW50OiB0cnVlLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7TnVtYmVyfSBjb25maWdJdGVtTGFiZWxXaWR0aD0xNjBcbiAgICAgICAgICovXG4gICAgICAgIGNvbmZpZ0l0ZW1MYWJlbFdpZHRoOiAxNjAsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtOdW1iZXJ9IGNvbmZpZ0l0ZW1XaWR0aD0yODBcbiAgICAgICAgICovXG4gICAgICAgIGNvbmZpZ0l0ZW1XaWR0aDogMjgwLFxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGxheW91dCBmb3IgdGhlIHZpZXdwb3J0LCBhcnJhbmdpbmcgdGhlIGNvbmZpZ3VyYXRpb24gcGFuZWwgYW5kIHRoZSBleGFtcGxlIGNvbXBvbmVudCBob3Jpem9udGFsbHkuXG4gICAgICAgICAqIEBtZW1iZXIge09iamVjdH0gbGF5b3V0PXtudHlwZTogJ2hib3gnLCBhbGlnbjogJ3N0cmV0Y2gnfVxuICAgICAgICAgKi9cbiAgICAgICAgbGF5b3V0OiB7bnR5cGU6ICdoYm94JywgYWxpZ246ICdzdHJldGNoJ31cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBPdmVycmlkZGVuIGZyb20gYENvbmZpZ3VyYXRpb25WaWV3cG9ydGAuIFRoaXMgbWV0aG9kIGRlZmluZXMgdGhlIHNldCBvZiBmb3JtIGZpZWxkcyB0aGF0IHdpbGwgYmVcbiAgICAgKiBkaXNwbGF5ZWQgaW4gdGhlIGNvbmZpZ3VyYXRpb24gcGFuZWwuIFRoZXNlIGZpZWxkcyBhcmUgYm91bmQgdG8gdGhlIHByb3BlcnRpZXMgb2YgdGhlIGV4YW1wbGVcbiAgICAgKiBUYWJDb250YWluZXIsIGFsbG93aW5nIGZvciByZWFsLXRpbWUgbWFuaXB1bGF0aW9uIG9mIGl0cyBhcHBlYXJhbmNlIGFuZCBiZWhhdmlvci5cbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0W119IEFuIGFycmF5IG9mIGNvbXBvbmVudCBjb25maWd1cmF0aW9uIG9iamVjdHMuXG4gICAgICovXG4gICAgY3JlYXRlQ29uZmlndXJhdGlvbkNvbXBvbmVudHMoKSB7XG4gICAgICAgIGxldCBtZSAgICAgICAgICAgPSB0aGlzLFxuICAgICAgICAgICAgdGFiQ29udGFpbmVyID0gbWUuZXhhbXBsZUNvbXBvbmVudCxcbiAgICAgICAgICAgIGhlYWRlckxheW91dCA9IHRhYkNvbnRhaW5lci5nZXRUYWJCYXIoKS5sYXlvdXQ7XG5cbiAgICAgICAgcmV0dXJuIFt7XG4gICAgICAgICAgICBtb2R1bGUgICA6IE51bWJlckZpZWxkLFxuICAgICAgICAgICAgaWQgICAgICAgOiAnYWN0aXZlSW5kZXhGaWVsZCcsXG4gICAgICAgICAgICBsYWJlbFRleHQ6ICdhY3RpdmVJbmRleCcsXG4gICAgICAgICAgICBsaXN0ZW5lcnM6IHtjaGFuZ2U6IG1lLm9uQ29uZmlnQ2hhbmdlLmJpbmQobWUsICdhY3RpdmVJbmRleCcpfSxcbiAgICAgICAgICAgIG1heFZhbHVlIDogMixcbiAgICAgICAgICAgIG1pblZhbHVlIDogMCxcbiAgICAgICAgICAgIHZhbHVlICAgIDogdGFiQ29udGFpbmVyLmFjdGl2ZUluZGV4XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG1vZHVsZSAgIDogTnVtYmVyRmllbGQsXG4gICAgICAgICAgICBsYWJlbFRleHQ6ICdoZWlnaHQnLFxuICAgICAgICAgICAgbGlzdGVuZXJzOiB7Y2hhbmdlOiBtZS5vbkNvbmZpZ0NoYW5nZS5iaW5kKG1lLCAnaGVpZ2h0Jyl9LFxuICAgICAgICAgICAgbWF4VmFsdWUgOiA4MDAsXG4gICAgICAgICAgICBtaW5WYWx1ZSA6IDMwMCxcbiAgICAgICAgICAgIHN0ZXBTaXplIDogNSxcbiAgICAgICAgICAgIHZhbHVlICAgIDogdGFiQ29udGFpbmVyLmhlaWdodFxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBtb2R1bGUgICAgICAgIDogQ2hlY2tCb3gsXG4gICAgICAgICAgICBjaGVja2VkICAgICAgIDogaGVhZGVyTGF5b3V0LmRpcmVjdGlvbiA9PT0gJ2NvbHVtbi1yZXZlcnNlJyB8fCBoZWFkZXJMYXlvdXQuZGlyZWN0aW9uID09PSAncm93LXJldmVyc2UnLFxuICAgICAgICAgICAgaGlkZUxhYmVsICAgICA6IHRydWUsXG4gICAgICAgICAgICBoaWRlVmFsdWVMYWJlbDogZmFsc2UsXG4gICAgICAgICAgICBpZCAgICAgICAgICAgIDogJ3JldmVyc2VMYXlvdXREaXJlY3Rpb24nLFxuICAgICAgICAgICAgbGlzdGVuZXJzICAgICA6IHtjaGFuZ2U6IG1lLm9uTGF5b3V0U29ydERpcmVjdGlvbkNoYW5nZS5iaW5kKG1lKX0sXG4gICAgICAgICAgICBzdHlsZSAgICAgICAgIDoge21hcmdpblRvcDogJzEwcHgnfSxcbiAgICAgICAgICAgIHZhbHVlTGFiZWxUZXh0OiAncmV2ZXJzZWQgbGF5b3V0IHNvcnQtZGlyZWN0aW9uJ1xuICAgICAgICB9LCB7XG4gICAgICAgICAgICBtb2R1bGUgICAgICAgIDogQ2hlY2tCb3gsXG4gICAgICAgICAgICBjaGVja2VkICAgICAgIDogdGFiQ29udGFpbmVyLnNvcnRhYmxlLFxuICAgICAgICAgICAgaGlkZUxhYmVsICAgICA6IHRydWUsXG4gICAgICAgICAgICBoaWRlVmFsdWVMYWJlbDogZmFsc2UsXG4gICAgICAgICAgICBsaXN0ZW5lcnMgICAgIDoge2NoYW5nZTogbWUub25Db25maWdDaGFuZ2UuYmluZChtZSwgJ3NvcnRhYmxlJyl9LFxuICAgICAgICAgICAgc3R5bGUgICAgICAgICA6IHttYXJnaW5Ub3A6ICcxMHB4J30sXG4gICAgICAgICAgICB2YWx1ZUxhYmVsVGV4dDogJ3NvcnRhYmxlJ1xuICAgICAgICB9LCB7XG4gICAgICAgICAgICBtb2R1bGUgICAgICAgIDogUmFkaW8sXG4gICAgICAgICAgICBjaGVja2VkICAgICAgIDogdGFiQ29udGFpbmVyLnRhYkJhclBvc2l0aW9uID09PSAndG9wJyxcbiAgICAgICAgICAgIGhpZGVWYWx1ZUxhYmVsOiBmYWxzZSxcbiAgICAgICAgICAgIGxhYmVsVGV4dCAgICAgOiAndGFiQmFyUG9zaXRpb24nLFxuICAgICAgICAgICAgbGlzdGVuZXJzICAgICA6IHtjaGFuZ2U6IG1lLm9uVGFiQmFyUG9zaXRpb25DaGFuZ2UuYmluZChtZSwgJ3RvcCcpfSxcbiAgICAgICAgICAgIG5hbWUgICAgICAgICAgOiAndGFiQmFyUG9zaXRpb24nLFxuICAgICAgICAgICAgc3R5bGUgICAgICAgICA6IHttYXJnaW5Ub3A6ICcxMHB4J30sXG4gICAgICAgICAgICB2YWx1ZUxhYmVsVGV4dDogJ3RvcCdcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgbW9kdWxlICAgICAgICA6IFJhZGlvLFxuICAgICAgICAgICAgY2hlY2tlZCAgICAgICA6IHRhYkNvbnRhaW5lci50YWJCYXJQb3NpdGlvbiA9PT0gJ3JpZ2h0JyxcbiAgICAgICAgICAgIGhpZGVWYWx1ZUxhYmVsOiBmYWxzZSxcbiAgICAgICAgICAgIGxhYmVsVGV4dCAgICAgOiAnJyxcbiAgICAgICAgICAgIGxpc3RlbmVycyAgICAgOiB7Y2hhbmdlOiBtZS5vblRhYkJhclBvc2l0aW9uQ2hhbmdlLmJpbmQobWUsICdyaWdodCcpfSxcbiAgICAgICAgICAgIG5hbWUgICAgICAgICAgOiAndGFiQmFyUG9zaXRpb24nLFxuICAgICAgICAgICAgdmFsdWVMYWJlbFRleHQ6ICdyaWdodCdcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgbW9kdWxlICAgICAgICA6IFJhZGlvLFxuICAgICAgICAgICAgY2hlY2tlZCAgICAgICA6IHRhYkNvbnRhaW5lci50YWJCYXJQb3NpdGlvbiA9PT0gJ2JvdHRvbScsXG4gICAgICAgICAgICBoaWRlVmFsdWVMYWJlbDogZmFsc2UsXG4gICAgICAgICAgICBsYWJlbFRleHQgICAgIDogJycsXG4gICAgICAgICAgICBsaXN0ZW5lcnMgICAgIDoge2NoYW5nZTogbWUub25UYWJCYXJQb3NpdGlvbkNoYW5nZS5iaW5kKG1lLCAnYm90dG9tJyl9LFxuICAgICAgICAgICAgbmFtZSAgICAgICAgICA6ICd0YWJCYXJQb3NpdGlvbicsXG4gICAgICAgICAgICB2YWx1ZUxhYmVsVGV4dDogJ2JvdHRvbSdcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgbW9kdWxlICAgICAgICA6IFJhZGlvLFxuICAgICAgICAgICAgY2hlY2tlZCAgICAgICA6IHRhYkNvbnRhaW5lci50YWJCYXJQb3NpdGlvbiA9PT0gJ2xlZnQnLFxuICAgICAgICAgICAgaGlkZVZhbHVlTGFiZWw6IGZhbHNlLFxuICAgICAgICAgICAgbGFiZWxUZXh0ICAgICA6ICcnLFxuICAgICAgICAgICAgbGlzdGVuZXJzICAgICA6IHtjaGFuZ2U6IG1lLm9uVGFiQmFyUG9zaXRpb25DaGFuZ2UuYmluZChtZSwgJ2xlZnQnKX0sXG4gICAgICAgICAgICBuYW1lICAgICAgICAgIDogJ3RhYkJhclBvc2l0aW9uJyxcbiAgICAgICAgICAgIHZhbHVlTGFiZWxUZXh0OiAnbGVmdCdcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgbW9kdWxlICAgOiBOdW1iZXJGaWVsZCxcbiAgICAgICAgICAgIGxhYmVsVGV4dDogJ3dpZHRoJyxcbiAgICAgICAgICAgIGxpc3RlbmVyczoge2NoYW5nZTogbWUub25Db25maWdDaGFuZ2UuYmluZChtZSwgJ3dpZHRoJyl9LFxuICAgICAgICAgICAgbWF4VmFsdWUgOiA4MDAsXG4gICAgICAgICAgICBtaW5WYWx1ZSA6IDI1MCxcbiAgICAgICAgICAgIHN0ZXBTaXplIDogNSxcbiAgICAgICAgICAgIHN0eWxlICAgIDoge21hcmdpblRvcDogJzEwcHgnfSxcbiAgICAgICAgICAgIHZhbHVlICAgIDogdGFiQ29udGFpbmVyLndpZHRoXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG1vZHVsZSAgICAgICAgOiBDaGVja0JveCxcbiAgICAgICAgICAgIGNoZWNrZWQgICAgICAgOiB0YWJDb250YWluZXIudXNlQWN0aXZlVGFiSW5kaWNhdG9yLFxuICAgICAgICAgICAgaGlkZUxhYmVsICAgICA6IHRydWUsXG4gICAgICAgICAgICBoaWRlVmFsdWVMYWJlbDogZmFsc2UsXG4gICAgICAgICAgICBsaXN0ZW5lcnMgICAgIDoge2NoYW5nZTogbWUub25Db25maWdDaGFuZ2UuYmluZChtZSwgJ3VzZUFjdGl2ZVRhYkluZGljYXRvcicpfSxcbiAgICAgICAgICAgIHN0eWxlICAgICAgICAgOiB7bWFyZ2luVG9wOiAnMTBweCd9LFxuICAgICAgICAgICAgdmFsdWVMYWJlbFRleHQ6ICd1c2VBY3RpdmVUYWJJbmRpY2F0b3InXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG1vZHVsZSAgIDogVGV4dEZpZWxkLCAvLyB0b2RvOiBTZWxlY3RGaWVsZFxuICAgICAgICAgICAgbGFiZWxUZXh0OiAnVGFiIDEgaWNvbkNscycsXG4gICAgICAgICAgICBsaXN0ZW5lcnM6IHtjaGFuZ2U6IG1lLm9uRmlyc3RUYWJIZWFkZXJDb25maWdDaGFuZ2UuYmluZChtZSwgJ2ljb25DbHMnKX0sXG4gICAgICAgICAgICBzdHlsZSAgICA6IHttYXJnaW5Ub3A6ICc1MHB4J30sXG4gICAgICAgICAgICB2YWx1ZSAgICA6IG1lLmdldEZpcnN0VGFiSGVhZGVyKCkuaWNvbkNsc1xuICAgICAgICB9LCB7XG4gICAgICAgICAgICBtb2R1bGUgICA6IFRleHRGaWVsZCwgLy8gdG9kbzogQ29sb3JQaWNrZXJcbiAgICAgICAgICAgIGxhYmVsVGV4dDogJ1RhYiAxIGljb25Db2xvcicsXG4gICAgICAgICAgICBsaXN0ZW5lcnM6IHtjaGFuZ2U6IG1lLm9uRmlyc3RUYWJIZWFkZXJDb25maWdDaGFuZ2UuYmluZChtZSwgJ2ljb25Db2xvcicpfSxcbiAgICAgICAgICAgIHZhbHVlICAgIDogbWUuZ2V0Rmlyc3RUYWJIZWFkZXIoKS5pY29uQ29sb3JcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgbW9kdWxlICAgOiBUZXh0RmllbGQsXG4gICAgICAgICAgICBsYWJlbFRleHQ6ICdUYWIgMSB0ZXh0JyxcbiAgICAgICAgICAgIGxpc3RlbmVyczoge2NoYW5nZTogbWUub25GaXJzdFRhYkhlYWRlckNvbmZpZ0NoYW5nZS5iaW5kKG1lLCAndGV4dCcpfSxcbiAgICAgICAgICAgIHZhbHVlICAgIDogbWUuZ2V0Rmlyc3RUYWJIZWFkZXIoKS50ZXh0XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG1vZHVsZSAgICAgICAgOiBSYWRpbyxcbiAgICAgICAgICAgIGNoZWNrZWQgICAgICAgOiBtZS5nZXRCYWRnZVRhYkhlYWRlcigpLmJhZGdlUG9zaXRpb24gPT09ICdib3R0b20tbGVmdCcsXG4gICAgICAgICAgICBoaWRlVmFsdWVMYWJlbDogZmFsc2UsXG4gICAgICAgICAgICBsYWJlbFRleHQgICAgIDogJ2JhZGdlUG9zaXRpb24nLFxuICAgICAgICAgICAgbGlzdGVuZXJzICAgICA6IHtjaGFuZ2U6IG1lLm9uQmFkZ2VSYWRpb0NoYW5nZS5iaW5kKG1lLCAnYmFkZ2VQb3NpdGlvbicsICdib3R0b20tbGVmdCcpfSxcbiAgICAgICAgICAgIG5hbWUgICAgICAgICAgOiAnYmFkZ2VQb3NpdGlvbicsXG4gICAgICAgICAgICBzdHlsZSAgICAgICAgIDoge21hcmdpblRvcDogJzUwcHgnfSxcbiAgICAgICAgICAgIHZhbHVlTGFiZWxUZXh0OiAnYm90dG9tLWxlZnQnXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG1vZHVsZSAgICAgICAgOiBSYWRpbyxcbiAgICAgICAgICAgIGNoZWNrZWQgICAgICAgOiBtZS5nZXRCYWRnZVRhYkhlYWRlcigpLmJhZGdlUG9zaXRpb24gPT09ICdib3R0b20tcmlnaHQnLFxuICAgICAgICAgICAgaGlkZVZhbHVlTGFiZWw6IGZhbHNlLFxuICAgICAgICAgICAgbGFiZWxUZXh0ICAgICA6ICcnLFxuICAgICAgICAgICAgbGlzdGVuZXJzICAgICA6IHtjaGFuZ2U6IG1lLm9uQmFkZ2VSYWRpb0NoYW5nZS5iaW5kKG1lLCAnYmFkZ2VQb3NpdGlvbicsICdib3R0b20tcmlnaHQnKX0sXG4gICAgICAgICAgICBuYW1lICAgICAgICAgIDogJ2JhZGdlUG9zaXRpb24nLFxuICAgICAgICAgICAgdmFsdWVMYWJlbFRleHQ6ICdib3R0b20tcmlnaHQnXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG1vZHVsZSAgICAgICAgOiBSYWRpbyxcbiAgICAgICAgICAgIGNoZWNrZWQgICAgICAgOiBtZS5nZXRCYWRnZVRhYkhlYWRlcigpLmJhZGdlUG9zaXRpb24gPT09ICd0b3AtbGVmdCcsXG4gICAgICAgICAgICBoaWRlVmFsdWVMYWJlbDogZmFsc2UsXG4gICAgICAgICAgICBsYWJlbFRleHQgICAgIDogJycsXG4gICAgICAgICAgICBsaXN0ZW5lcnMgICAgIDoge2NoYW5nZTogbWUub25CYWRnZVJhZGlvQ2hhbmdlLmJpbmQobWUsICdiYWRnZVBvc2l0aW9uJywgJ3RvcC1sZWZ0Jyl9LFxuICAgICAgICAgICAgbmFtZSAgICAgICAgICA6ICdiYWRnZVBvc2l0aW9uJyxcbiAgICAgICAgICAgIHZhbHVlTGFiZWxUZXh0OiAndG9wLWxlZnQnXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG1vZHVsZSAgICAgICAgOiBSYWRpbyxcbiAgICAgICAgICAgIGNoZWNrZWQgICAgICAgOiBtZS5nZXRCYWRnZVRhYkhlYWRlcigpLmJhZGdlUG9zaXRpb24gPT09ICd0b3AtcmlnaHQnLFxuICAgICAgICAgICAgaGlkZVZhbHVlTGFiZWw6IGZhbHNlLFxuICAgICAgICAgICAgbGFiZWxUZXh0ICAgICA6ICcnLFxuICAgICAgICAgICAgbGlzdGVuZXJzICAgICA6IHtjaGFuZ2U6IG1lLm9uQmFkZ2VSYWRpb0NoYW5nZS5iaW5kKG1lLCAnYmFkZ2VQb3NpdGlvbicsICd0b3AtcmlnaHQnKX0sXG4gICAgICAgICAgICBuYW1lICAgICAgICAgIDogJ2JhZGdlUG9zaXRpb24nLFxuICAgICAgICAgICAgdmFsdWVMYWJlbFRleHQ6ICd0b3AtcmlnaHQnXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG1vZHVsZSAgIDogVGV4dEZpZWxkLFxuICAgICAgICAgICAgbGFiZWxUZXh0OiAnYmFkZ2VUZXh0JyxcbiAgICAgICAgICAgIGxpc3RlbmVyczoge2NoYW5nZTogbWUub25CYWRnZUNvbmZpZ0NoYW5nZS5iaW5kKG1lLCAnYmFkZ2VUZXh0Jyl9LFxuICAgICAgICAgICAgc3R5bGUgICAgOiB7bWFyZ2luVG9wOiAnMTBweCd9LFxuICAgICAgICAgICAgdmFsdWUgICAgOiBtZS5nZXRCYWRnZVRhYkhlYWRlcigpLmJhZGdlVGV4dFxuICAgICAgICB9XVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE92ZXJyaWRkZW4gZnJvbSBgQ29uZmlndXJhdGlvblZpZXdwb3J0YC4gVGhpcyBtZXRob2QgY3JlYXRlcyB0aGUgYWN0dWFsIGBUYWJDb250YWluZXJgIGluc3RhbmNlXG4gICAgICogdG8gYmUgZGVtb25zdHJhdGVkLiBJdCBpcyBjb25maWd1cmVkIHdpdGggdGhyZWUgaW5pdGlhbCB0YWJzIGFuZCBhIGxpc3RlbmVyIHRvIHN5bmMgdXNlci1kcml2ZW5cbiAgICAgKiB0YWIgY2hhbmdlcyBiYWNrIHRvIHRoZSBjb25maWd1cmF0aW9uIHBhbmVsLlxuICAgICAqIEByZXR1cm5zIHtOZW8udGFiLkNvbnRhaW5lcn0gVGhlIGNvbmZpZ3VyZWQgVGFiQ29udGFpbmVyIGluc3RhbmNlLlxuICAgICAqL1xuICAgIGNyZWF0ZUV4YW1wbGVDb21wb25lbnQoKSB7XG4gICAgICAgIHJldHVybiBOZW8uY3JlYXRlKFRhYkNvbnRhaW5lciwge1xuICAgICAgICAgICAgaGVpZ2h0ICA6IDMwMCxcbiAgICAgICAgICAgIHdpZHRoICAgOiA1MDAsXG4gICAgICAgICAgICBzb3J0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHN0eWxlICAgOiB7bWFyZ2luOiAnMjBweCd9LFxuXG4gICAgICAgICAgICBpdGVtRGVmYXVsdHM6IHtcbiAgICAgICAgICAgICAgICBudHlwZTogJ2NvbXBvbmVudCcsXG4gICAgICAgICAgICAgICAgY2xzICA6IFsnbmVvLWV4YW1wbGVzLXRhYi1jb21wb25lbnQnXSxcbiAgICAgICAgICAgICAgICBzdHlsZToge3BhZGRpbmc6ICcyMHB4J31cbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIGl0ZW1zOiBbe1xuICAgICAgICAgICAgICAgIGhlYWRlcjoge2ljb25DbHM6ICdmYSBmYS1ob21lJywgdGV4dDogJ1RhYiAxJywgZmxhZzogJ3RhYjEnLH0sXG4gICAgICAgICAgICAgICAgdmRvbSAgOiB7aHRtbDogJ1RhYiAxIENvbnRlbnQnfVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIGhlYWRlcjoge2ljb25DbHM6ICdmYSBmYS1wbGF5LWNpcmNsZScsIHRleHQ6ICdUYWIgMid9LFxuICAgICAgICAgICAgICAgIHZkb20gIDoge2h0bWw6ICdUYWIgMiBDb250ZW50J31cbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBoZWFkZXI6IHtpY29uQ2xzOiAnZmEgZmEtdXNlcicsIHRleHQ6ICdUYWIgMycsIGJhZGdlVGV4dDogJ2hlbGxvJ30sXG4gICAgICAgICAgICAgICAgdmRvbSAgOiB7aHRtbDogJ1RhYiAzIENvbnRlbnQnfVxuICAgICAgICAgICAgfV0sXG5cbiAgICAgICAgICAgIGxpc3RlbmVyczoge1xuICAgICAgICAgICAgICAgIGFjdGl2ZUluZGV4Q2hhbmdlOiB0aGlzLm9uVXNlckFjdGl2ZUluZGV4Q2hhbmdlLFxuICAgICAgICAgICAgICAgIHNjb3BlICAgICAgICAgICAgOiB0aGlzXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBoZWxwZXIgbWV0aG9kIHRvIHJldHJpZXZlIHRoZSBoZWFkZXIgYnV0dG9uIGZvciB0aGUgdGhpcmQgdGFiLCB3aGljaCBpcyB1c2VkIGZvciBkZW1vbnN0cmF0aW5nXG4gICAgICogYmFkZ2UgZnVuY3Rpb25hbGl0eS5cbiAgICAgKiBAcmV0dXJucyB7TmVvLnRhYi5oZWFkZXIuQnV0dG9ufVxuICAgICAqL1xuICAgIGdldEJhZGdlVGFiSGVhZGVyKCkge1xuICAgICAgICBsZXQgdGFiSGVhZGVycyA9IHRoaXMuZXhhbXBsZUNvbXBvbmVudC5nZXRUYWJCYXIoKS5pdGVtcyxcbiAgICAgICAgICAgIGl0ZW07XG5cbiAgICAgICAgZm9yIChpdGVtIG9mIHRhYkhlYWRlcnMpIHtcbiAgICAgICAgICAgIGlmIChpdGVtLnRleHQgPT09ICdUYWIgMycpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBoZWxwZXIgbWV0aG9kIHRvIHJldHJpZXZlIHRoZSBoZWFkZXIgYnV0dG9uIGZvciB0aGUgZmlyc3QgdGFiLCBpZGVudGlmaWVkIGJ5IGEgdW5pcXVlIGBmbGFnYCBwcm9wZXJ0eS5cbiAgICAgKiBUaGlzIGFsbG93cyBmb3Igc3RhYmxlIHRhcmdldGluZyBvZiB0aGUgdGFiIGV2ZW4gaWYgaXRzIHRleHQgb3IgcG9zaXRpb24gY2hhbmdlcy5cbiAgICAgKiBAcmV0dXJucyB7TmVvLnRhYi5oZWFkZXIuQnV0dG9ufVxuICAgICAqL1xuICAgIGdldEZpcnN0VGFiSGVhZGVyKCkge1xuICAgICAgICBsZXQgdGFiSGVhZGVycyA9IHRoaXMuZXhhbXBsZUNvbXBvbmVudC5nZXRUYWJCYXIoKS5pdGVtcyxcbiAgICAgICAgICAgIGl0ZW07XG5cbiAgICAgICAgZm9yIChpdGVtIG9mIHRhYkhlYWRlcnMpIHtcbiAgICAgICAgICAgIGlmIChpdGVtLmZsYWcgPT09ICd0YWIxJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBpdGVtXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIYW5kbGVzIHRoZSBjaGFuZ2UgZXZlbnQgZnJvbSB2YXJpb3VzIHRleHQgZmllbGRzIGluIHRoZSBjb25maWd1cmF0aW9uIHBhbmVsIHRoYXQgY29udHJvbCB0aGVcbiAgICAgKiBwcm9wZXJ0aWVzIG9mIHRoZSB0aGlyZCB0YWIncyBoZWFkZXIgKHRoZSBcImJhZGdlIHRhYlwiKS5cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gY29uZmlnIFRoZSBuYW1lIG9mIHRoZSBjb25maWcgcHJvcGVydHkgdG8gY2hhbmdlIChlLmcuLCAnYmFkZ2VUZXh0JykuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgVGhlIGV2ZW50IGRhdGEgZnJvbSB0aGUgZmllbGQncyBjaGFuZ2UgZXZlbnQuXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG9wdHMudmFsdWUgVGhlIG5ldyB2YWx1ZSBmb3IgdGhlIGNvbmZpZy5cbiAgICAgKi9cbiAgICBvbkJhZGdlQ29uZmlnQ2hhbmdlKGNvbmZpZywgb3B0cykge1xuICAgICAgICB0aGlzLmdldEJhZGdlVGFiSGVhZGVyKClbY29uZmlnXSA9IG9wdHMudmFsdWVcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIYW5kbGVzIHRoZSBjaGFuZ2UgZXZlbnQgZnJvbSB0aGUgcmFkaW8gZ3JvdXAgY29udHJvbGxpbmcgdGhlIGBiYWRnZVBvc2l0aW9uYCBjb25maWcuXG4gICAgICogSXQgZW5zdXJlcyB0aGUgY29uZmlnIGlzIG9ubHkgdXBkYXRlZCB3aGVuIGEgcmFkaW8gYnV0dG9uIGlzIGNoZWNrZWQsIG5vdCB1bmNoZWNrZWQuXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGNvbmZpZyBUaGUgbmFtZSBvZiB0aGUgY29uZmlnIHByb3BlcnR5IHRvIGNoYW5nZSAoYWx3YXlzICdiYWRnZVBvc2l0aW9uJykuXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlIFRoZSBuZXcgdmFsdWUgZm9yIHRoZSBiYWRnZSBwb3NpdGlvbiAoZS5nLiwgJ3RvcC1yaWdodCcpLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIFRoZSBldmVudCBkYXRhIGZyb20gdGhlIHJhZGlvJ3MgY2hhbmdlIGV2ZW50LlxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gb3B0cy52YWx1ZSBUaGUgY2hlY2tlZCBzdGF0ZSBvZiB0aGUgcmFkaW8gYnV0dG9uLlxuICAgICAqL1xuICAgIG9uQmFkZ2VSYWRpb0NoYW5nZShjb25maWcsIHZhbHVlLCBvcHRzKSB7XG4gICAgICAgIGlmIChvcHRzLnZhbHVlID09PSB0cnVlKSB7IC8vIHdlIG9ubHkgd2FudCB0byBsaXN0ZW4gdG8gY2hlY2sgZXZlbnRzLCBub3QgdW5jaGVja1xuICAgICAgICAgICAgdGhpcy5nZXRCYWRnZVRhYkhlYWRlcigpW2NvbmZpZ10gPSB2YWx1ZVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGFuZGxlcyB0aGUgY2hhbmdlIGV2ZW50IGZyb20gdmFyaW91cyB0ZXh0IGZpZWxkcyBpbiB0aGUgY29uZmlndXJhdGlvbiBwYW5lbCB0aGF0IGNvbnRyb2wgdGhlXG4gICAgICogcHJvcGVydGllcyBvZiB0aGUgZmlyc3QgdGFiJ3MgaGVhZGVyLlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBjb25maWcgVGhlIG5hbWUgb2YgdGhlIGNvbmZpZyBwcm9wZXJ0eSB0byBjaGFuZ2UgKGUuZy4sICd0ZXh0JywgJ2ljb25DbHMnKS5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyBUaGUgZXZlbnQgZGF0YSBmcm9tIHRoZSBmaWVsZCdzIGNoYW5nZSBldmVudC5cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gb3B0cy52YWx1ZSBUaGUgbmV3IHZhbHVlIGZvciB0aGUgY29uZmlnLlxuICAgICAqL1xuICAgIG9uRmlyc3RUYWJIZWFkZXJDb25maWdDaGFuZ2UoY29uZmlnLCBvcHRzKSB7XG4gICAgICAgIHRoaXMuZ2V0Rmlyc3RUYWJIZWFkZXIoKVtjb25maWddID0gb3B0cy52YWx1ZVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEhhbmRsZXMgdGhlIGNoYW5nZSBldmVudCBmcm9tIHRoZSAncmV2ZXJzZWQgbGF5b3V0IHNvcnQtZGlyZWN0aW9uJyBjaGVja2JveC4gVGhpcyBtZXRob2RcbiAgICAgKiBkeW5hbWljYWxseSBtb2RpZmllcyB0aGUgYGRpcmVjdGlvbmAgb2YgdGhlIHRhYiBiYXIncyBsYXlvdXQgdG8gZGVtb25zdHJhdGUgaG93IHRoZSB2aXN1YWxcbiAgICAgKiBvcmRlciBvZiB0aGUgdGFicyBjYW4gYmUgcmV2ZXJzZWQuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGEgVGhlIGV2ZW50IGRhdGEgZnJvbSB0aGUgY2hlY2tib3ggY2hhbmdlIGV2ZW50LlxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gZGF0YS52YWx1ZSBUaGUgbmV3IGNoZWNrZWQgc3RhdGUgb2YgdGhlIGNoZWNrYm94LlxuICAgICAqL1xuICAgIG9uTGF5b3V0U29ydERpcmVjdGlvbkNoYW5nZShkYXRhKSB7XG4gICAgICAgIGxldCBsYXlvdXQgICAgPSB0aGlzLmV4YW1wbGVDb21wb25lbnQuZ2V0VGFiQmFyKCkubGF5b3V0LFxuICAgICAgICAgICAgZGlyZWN0aW9uID0gbGF5b3V0LmRpcmVjdGlvbjtcblxuICAgICAgICBpZiAoZGF0YS52YWx1ZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgaWYgKCFkaXJlY3Rpb24uaW5jbHVkZXMoJy1yZXZlcnNlJykpIHtcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb24gKz0gJy1yZXZlcnNlJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKGRpcmVjdGlvbi5pbmNsdWRlcygnLXJldmVyc2UnKSkge1xuICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9IGRpcmVjdGlvbi5zdWJzdHJpbmcoMCwgZGlyZWN0aW9uLmluZGV4T2YoJy1yZXZlcnNlJykpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsYXlvdXQuZGlyZWN0aW9uID0gZGlyZWN0aW9uXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGFuZGxlcyB0aGUgY2hhbmdlIGV2ZW50IGZyb20gdGhlIHJhZGlvIGdyb3VwIGNvbnRyb2xsaW5nIHRoZSBgdGFiQmFyUG9zaXRpb25gIGNvbmZpZy5cbiAgICAgKiBJdCB1cGRhdGVzIHRoZSB0YWIgY29udGFpbmVyJ3MgY29uZmlnIGFuZCBhbHNvIGludGVsbGlnZW50bHkgYWRqdXN0cyB0aGUgJ3JldmVyc2VkIGxheW91dCdcbiAgICAgKiBjaGVja2JveCwgYXMgdGhlIGNvbmNlcHQgb2YgYSByZXZlcnNlZCBkaXJlY3Rpb24gaXMgb25seSBtZWFuaW5nZnVsIGZvciAnbGVmdCcgYW5kICdyaWdodCcgcG9zaXRpb25zLlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZSBUaGUgbmV3IHZhbHVlIGZvciB0aGUgdGFiIGJhciBwb3NpdGlvbiAoZS5nLiwgJ3RvcCcsICdyaWdodCcpLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIFRoZSBldmVudCBkYXRhIGZyb20gdGhlIHJhZGlvJ3MgY2hhbmdlIGV2ZW50LlxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gb3B0cy52YWx1ZSBUaGUgY2hlY2tlZCBzdGF0ZSBvZiB0aGUgcmFkaW8gYnV0dG9uLlxuICAgICAqL1xuICAgIG9uVGFiQmFyUG9zaXRpb25DaGFuZ2UodmFsdWUsIG9wdHMpIHtcbiAgICAgICAgaWYgKG9wdHMudmFsdWUgPT09IHRydWUpIHsgLy8gd2Ugb25seSB3YW50IHRvIGxpc3RlbiB0byBjaGVjayBldmVudHMsIG5vdCB1bmNoZWNrXG4gICAgICAgICAgICB0aGlzLm9uUmFkaW9DaGFuZ2UoJ3RhYkJhclBvc2l0aW9uJywgdmFsdWUsIG9wdHMpO1xuICAgICAgICAgICAgTmVvLmdldENvbXBvbmVudCgncmV2ZXJzZUxheW91dERpcmVjdGlvbicpLmNoZWNrZWQgPSB2YWx1ZSA9PT0gJ2xlZnQnXG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoaXMgbGlzdGVuZXIgcmVzcG9uZHMgdG8gdGhlIGBhY3RpdmVJbmRleENoYW5nZWAgZXZlbnQgZmlyZWQgYnkgdGhlIGBUYWJDb250YWluZXJgIHdoZW4gYSB1c2VyXG4gICAgICogY2xpY2tzIG9uIGEgdGFiLiBJdHMgcHVycG9zZSBpcyB0byBzeW5jaHJvbml6ZSB0aGUgVUksIGVuc3VyaW5nIHRoYXQgdGhlIGBhY3RpdmVJbmRleGAgbnVtYmVyIGZpZWxkXG4gICAgICogaW4gdGhlIGNvbmZpZ3VyYXRpb24gcGFuZWwgYWNjdXJhdGVseSByZWZsZWN0cyB0aGUgY3VycmVudGx5IGFjdGl2ZSB0YWIuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMgVGhlIGV2ZW50IGRhdGEgZnJvbSB0aGUgYGFjdGl2ZUluZGV4Q2hhbmdlYCBldmVudC5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gb3B0cy52YWx1ZSBUaGUgbmV3IGFjdGl2ZSBpbmRleC5cbiAgICAgKi9cbiAgICBvblVzZXJBY3RpdmVJbmRleENoYW5nZShvcHRzKSB7XG4gICAgICAgIE5lby5nZXRDb21wb25lbnQoJ2FjdGl2ZUluZGV4RmllbGQnKS52YWx1ZSA9IG9wdHMudmFsdWVcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IE5lby5zZXR1cENsYXNzKE1haW5Db250YWluZXIpO1xuIiwiaW1wb3J0IE1haW5Db250YWluZXIgZnJvbSAnLi9NYWluQ29udGFpbmVyLm1qcyc7XG5cbmV4cG9ydCBjb25zdCBvblN0YXJ0ID0gKCkgPT4gTmVvLmFwcCh7XG4gICAgbWFpblZpZXc6IE1haW5Db250YWluZXIsXG4gICAgbmFtZSAgICA6ICdOZW8uZXhhbXBsZXMudGFiLmNvbnRhaW5lcidcbn0pO1xuIiwiaW1wb3J0IENoZWNrQm94ICAgICAgICAgZnJvbSAnLi9DaGVja0JveC5tanMnO1xuaW1wb3J0IENvbXBvbmVudE1hbmFnZXIgZnJvbSAnLi4vLi4vbWFuYWdlci9Db21wb25lbnQubWpzJztcblxuLyoqXG4gKiBAY2xhc3MgTmVvLmZvcm0uZmllbGQuUmFkaW9cbiAqIEBleHRlbmRzIE5lby5mb3JtLmZpZWxkLkNoZWNrQm94XG4gKi9cbmNsYXNzIFJhZGlvIGV4dGVuZHMgQ2hlY2tCb3gge1xuICAgIHN0YXRpYyBjb25maWcgPSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtTdHJpbmd9IGNsYXNzTmFtZT0nTmVvLmZvcm0uZmllbGQuUmFkaW8nXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIGNsYXNzTmFtZTogJ05lby5mb3JtLmZpZWxkLlJhZGlvJyxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ30gbnR5cGU9J3JhZGlvZmllbGQnXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIG50eXBlOiAncmFkaW9maWVsZCcsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtTdHJpbmdbXX0gYmFzZUNscz1bJ25lby1yYWRpb2ZpZWxkJywnbmVvLWNoZWNrYm94ZmllbGQnXVxuICAgICAgICAgKi9cbiAgICAgICAgYmFzZUNsczogWyduZW8tcmFkaW9maWVsZCcsICduZW8tY2hlY2tib3hmaWVsZCddLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nW119IGljb25DbHM9WydmYXInLCdmYS1jaXJjbGUnXVxuICAgICAgICAgKi9cbiAgICAgICAgaWNvbkNsczogWydmYXInLCAnZmEtY2lyY2xlJ10sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtTdHJpbmd9IGlucHV0VHlwZT0ncmFkaW8nXG4gICAgICAgICAqIEByZWFjdGl2ZVxuICAgICAgICAgKi9cbiAgICAgICAgaW5wdXRUeXBlOiAncmFkaW8nXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIGFmdGVyIHRoZSBjaGVja2VkIGNvbmZpZyBnb3QgY2hhbmdlZFxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gdmFsdWVcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IG9sZFZhbHVlXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIGFmdGVyU2V0Q2hlY2tlZCh2YWx1ZSwgb2xkVmFsdWUpIHtcbiAgICAgICAgc3VwZXIuYWZ0ZXJTZXRDaGVja2VkKHZhbHVlLCBvbGRWYWx1ZSk7XG5cbiAgICAgICAgLy8gdXBkYXRlIHJhZGlvcyB3aXRoIHRoZSBzYW1lIG5hbWUgdG8gYmUgdW5jaGVja2VkXG4gICAgICAgIHZhbHVlICYmIHRoaXMudW5jaGVja0dyb3VwSXRlbXMoKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJhZGlvcyBzaG91bGQgb25seSBmaXJlIGNoYW5nZSAmIGZpZWxkQ2hhbmdlIGV2ZW50cyBpZiBjaGVja2VkLlxuICAgICAqIElmIHRoZXJlIHdhcyBqdXN0IDEgcmFkaW8sIHlvdSBjYW4gbm90IHVuY2hlY2sgaXQuXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZVxuICAgICAqIEBwYXJhbSB7Kn0gb2xkVmFsdWVcbiAgICAgKi9cbiAgICBmaXJlQ2hhbmdlRXZlbnQodmFsdWUsIG9sZFZhbHVlKSB7XG4gICAgICAgIHRoaXMuY2hlY2tlZCAmJiBzdXBlci5maXJlQ2hhbmdlRXZlbnQodmFsdWUsIG9sZFZhbHVlKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIHtTdHJpbmdbXX1cbiAgICAgKi9cbiAgICBnZXRHcm91cFZhbHVlKCkge1xuICAgICAgICBsZXQgdmFsdWUgPSBzdXBlci5nZXRHcm91cFZhbHVlKCk7XG5cbiAgICAgICAgcmV0dXJuIHZhbHVlLmxlbmd0aCA+IDAgPyB2YWx1ZVswXSA6IFtdXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmFkaW9zIGRvIG5vdCBmaXJlIGEgY2hhbmdlIGV2ZW50IGZvciBcInVuY2hlY2tcIiwgc28gd2UgbmVlZCB0byBpdGVyYXRlIG92ZXIgb3RoZXIgcmFkaW9zIHdpdGggdGhlIHNhbWUgbmFtZS5cbiAgICAgKi9cbiAgICB1bmNoZWNrR3JvdXBJdGVtcygpIHtcbiAgICAgICAgbGV0IG1lID0gdGhpcyxcbiAgICAgICAgICAgIHJhZGlvcztcblxuICAgICAgICAvLyBkaXNjdXNzOiB3ZSBjb3VsZCBsaW1pdCB0aGlzIHRvIHJhZGlvcyBpbnNpZGUgdGhlIHNhbWUgZm9ybSwgSUYgYSB0b3AgbGV2ZWwgZm9ybSBpcyB1c2VkXG4gICAgICAgIHJhZGlvcyA9IENvbXBvbmVudE1hbmFnZXIuZmluZCh7XG4gICAgICAgICAgICBudHlwZTogJ3JhZGlvZmllbGQnLFxuICAgICAgICAgICAgbmFtZSA6IG1lLm5hbWVcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmFkaW9zLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgICAgICBpZiAoaXRlbS5pZCAhPT0gbWUuaWQgJiYgaXRlbS5fY2hlY2tlZCkge1xuICAgICAgICAgICAgICAgIGl0ZW0uY2hlY2tlZCA9IGZhbHNlXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBOZW8uc2V0dXBDbGFzcyhSYWRpbyk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=