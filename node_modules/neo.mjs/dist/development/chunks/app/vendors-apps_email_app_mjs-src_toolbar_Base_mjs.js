"use strict";
(self["webpackChunkneo_mjs"] = self["webpackChunkneo_mjs"] || []).push([["vendors-apps_email_app_mjs-src_toolbar_Base_mjs"],{

/***/ "./apps/email/app.mjs"
/*!****************************!*\
  !*** ./apps/email/app.mjs ***!
  \****************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   onStart: () => (/* binding */ onStart)
/* harmony export */ });
/* harmony import */ var _view_Viewport_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./view/Viewport.mjs */ "./apps/email/view/Viewport.mjs");


const onStart = () => Neo.app({
    mainView: _view_Viewport_mjs__WEBPACK_IMPORTED_MODULE_0__["default"],
    name    : 'Email'
});


/***/ },

/***/ "./apps/email/model/Email.mjs"
/*!************************************!*\
  !*** ./apps/email/model/Email.mjs ***!
  \************************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _src_data_Model_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../src/data/Model.mjs */ "./src/data/Model.mjs");


/**
 * @class Email.model.Email
 * @extends Neo.data.Model
 */
class Email extends _src_data_Model_mjs__WEBPACK_IMPORTED_MODULE_0__["default"] {
    static config = {
        /**
         * @member {String} className='Email.model.Email'
         * @protected
         */
        className: 'Email.model.Email',
        /**
         * @member {Object[]} fields
         */
        fields: [{
            name: 'id',
            type: 'Int'
        }, {
            name: 'content',
            type: 'String'
        }, {
            name: 'dateSent',
            type: 'String'
        }, {
            name: 'recipients',
            type: 'Array'
        }, {
            name: 'sender',
            type: 'String'
        }, {
            name: 'title',
            type: 'String'
        }]
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(Email));


/***/ },

/***/ "./apps/email/store/Emails.mjs"
/*!*************************************!*\
  !*** ./apps/email/store/Emails.mjs ***!
  \*************************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _model_Email_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../model/Email.mjs */ "./apps/email/model/Email.mjs");
/* harmony import */ var _src_data_Store_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../src/data/Store.mjs */ "./src/data/Store.mjs");



/**
 * @class Email.store.Emails
 * @extends Neo.data.Store
 */
class Emails extends _src_data_Store_mjs__WEBPACK_IMPORTED_MODULE_1__["default"] {
    static config = {
        /**
         * @member {String} className='Email.store.Emails'
         * @protected
         */
        className: 'Email.store.Emails',
        /**
         * @member {Neo.data.Model} model=Email
         */
        model: _model_Email_mjs__WEBPACK_IMPORTED_MODULE_0__["default"],
        /**
         * @member {Object[]} data
         */
        data: [
            {id: 1, sender: 'John Doe', title: 'Hello World!', content: 'This is the first email.', dateSent: '2025-07-15T10:00:00Z'},
            {id: 2, sender: 'Jane Smith', title: 'Re: Project Update', content: 'Here is the project update you requested.', dateSent: '2025-07-15T11:30:00Z'},
            {id: 3, sender: 'Peter Jones', title: 'Lunch tomorrow?', content: 'Are we still on for lunch tomorrow at 12:30?', dateSent: '2025-07-15T12:15:00Z'},
            {id: 4, sender: 'Mary Williams', title: 'Your order has shipped', content: 'Your order #12345 has shipped and will arrive in 3-5 business days.', dateSent: '2025-07-14T15:45:00Z'},
            {id: 5, sender: 'David Brown', title: 'Quick question', content: 'I have a quick question about the new feature.', dateSent: '2025-07-14T09:20:00Z'}
        ]
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(Emails));


/***/ },

/***/ "./apps/email/view/ComposeView.mjs"
/*!*****************************************!*\
  !*** ./apps/email/view/ComposeView.mjs ***!
  \*****************************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _src_button_Base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../src/button/Base.mjs */ "./src/button/Base.mjs");
/* harmony import */ var _src_form_field_Text_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../src/form/field/Text.mjs */ "./src/form/field/Text.mjs");
/* harmony import */ var _src_form_field_TextArea_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../src/form/field/TextArea.mjs */ "./src/form/field/TextArea.mjs");
/* harmony import */ var _src_functional_export_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../src/functional/_export.mjs */ "./src/functional/_export.mjs");





/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_src_functional_export_mjs__WEBPACK_IMPORTED_MODULE_3__.defineComponent)({
    config: {
        className: 'Email.view.ComposeView',
        cls      : ['email-compose-view']
    },
    createVdom({onClose}) {
        const fieldStyle = {
            marginBottom: '10px'
        };

        return {
            cn: [{
                module    : _src_form_field_Text_mjs__WEBPACK_IMPORTED_MODULE_1__["default"],
                id        : 'compose-to',
                labelText : 'To:',
                labelWidth: 80,
                style     : fieldStyle
            }, {
                module    : _src_form_field_Text_mjs__WEBPACK_IMPORTED_MODULE_1__["default"],
                id        : 'compose-subject',
                labelText : 'Subject:',
                labelWidth: 80,
                style     : fieldStyle
            }, {
                module   : _src_form_field_TextArea_mjs__WEBPACK_IMPORTED_MODULE_2__["default"],
                id       : 'compose-body',
                labelText: 'Body:',
                height   : 200,
                style    : fieldStyle
            }, {
                module : _src_button_Base_mjs__WEBPACK_IMPORTED_MODULE_0__["default"],
                handler: onClose,
                id     : 'compose-close-button',
                style  : {alignSelf: 'flex-end'},
                text   : 'Close'
            }]
        }
    }
}));


/***/ },

/***/ "./apps/email/view/MainView.mjs"
/*!**************************************!*\
  !*** ./apps/email/view/MainView.mjs ***!
  \**************************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _src_button_Base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../src/button/Base.mjs */ "./src/button/Base.mjs");
/* harmony import */ var _ComposeView_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ComposeView.mjs */ "./apps/email/view/ComposeView.mjs");
/* harmony import */ var _store_Emails_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../store/Emails.mjs */ "./apps/email/store/Emails.mjs");
/* harmony import */ var _src_grid_Container_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../src/grid/Container.mjs */ "./src/grid/Container.mjs");
/* harmony import */ var _src_selection_grid_RowModel_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../src/selection/grid/RowModel.mjs */ "./src/selection/grid/RowModel.mjs");
/* harmony import */ var _src_functional_export_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../src/functional/_export.mjs */ "./src/functional/_export.mjs");







/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_src_functional_export_mjs__WEBPACK_IMPORTED_MODULE_5__.defineComponent)({
    config: {
        className: 'Email.view.MainView',
        cls      : ['email-main-view']
    },
    createVdom() {
        const
            [isComposing,   setIsComposing]   = (0,_src_functional_export_mjs__WEBPACK_IMPORTED_MODULE_5__.useConfig)(false),
            [selectedEmail, setSelectedEmail] = (0,_src_functional_export_mjs__WEBPACK_IMPORTED_MODULE_5__.useConfig)(null);

        const paneStyle = {
            border : '1px solid #c0c0c0',
            margin : '10px',
            padding: '10px'
        };

        const onComposeClick = () => {
            setIsComposing(true)
        };

        const onCloseCompose = () => {
            setIsComposing(false);
        };

        const onSelectionChange = ({records}) => {
            setSelectedEmail(records[0] || null)
        };

        return {
            cn: [{
                style: {...paneStyle, flex: '0 0 200px'},
                cn: [{
                    module : _src_button_Base_mjs__WEBPACK_IMPORTED_MODULE_0__["default"],
                    handler: onComposeClick,
                    id     : 'compose-button',
                    text   : 'Compose',
                    style  : {marginBottom: '10px', width: '100%'}
                }, {
                    text : 'Folders'
                }]
            }, {
                style: {...paneStyle, flex: '1 1 600px', padding: '0'},
                cn: [{
                    module      : _src_grid_Container_mjs__WEBPACK_IMPORTED_MODULE_3__["default"],
                    id          : 'email-grid',
                    store       : _store_Emails_mjs__WEBPACK_IMPORTED_MODULE_2__["default"],
                    wrapperStyle: {height: '100%', width: '100%'},
                    body: {
                        selectionModel: {
                            module   : _src_selection_grid_RowModel_mjs__WEBPACK_IMPORTED_MODULE_4__["default"],
                            listeners: {selectionChange: onSelectionChange}
                        }
                    },
                    columns: [
                        {dataField: 'sender', text: 'Sender', width: 150},
                        {dataField: 'title',  text: 'Title',  flex: 1, minWidth: 200},
                        {
                            cellAlign: 'right',
                            dataField: 'dateSent',
                            renderer : (({value}) => new Date(value).toLocaleDateString()),
                            text     : 'Date',
                            width    : 100
                        }
                    ]
                }]
            }, {
                style: {...paneStyle, flex: '1 1 600px'},
                cn: selectedEmail ? [
                    {tag: 'h2',  text: selectedEmail.title},
                    {tag: 'p',   text: `From: ${selectedEmail.sender}`},
                    {tag: 'div', style: {marginTop: '10px'}, text: selectedEmail.content}
                ] : [{
                    text: 'Select an email to read'
                }]
            }, isComposing && {
                module : _ComposeView_mjs__WEBPACK_IMPORTED_MODULE_1__["default"],
                id     : 'compose-view',
                onClose: onCloseCompose
            }]
        }
    }
}));


/***/ },

/***/ "./apps/email/view/Viewport.mjs"
/*!**************************************!*\
  !*** ./apps/email/view/Viewport.mjs ***!
  \**************************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _src_container_Viewport_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../src/container/Viewport.mjs */ "./src/container/Viewport.mjs");
/* harmony import */ var _MainView_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./MainView.mjs */ "./apps/email/view/MainView.mjs");



/**
 * @class Email.view.Viewport
 * @extends Neo.container.Viewport
 */
class Viewport extends _src_container_Viewport_mjs__WEBPACK_IMPORTED_MODULE_0__["default"] {
    static config = {
        /**
         * @member {String} className='Email.view.Viewport'
         * @protected
         */
        className: 'Email.view.Viewport',
        /**
         * @member {Object} layout={ntype:'fit'}
         */
        layout: {ntype: 'fit'},
        /**
         * @member {Object[]} items
         */
        items: [{
            module: _MainView_mjs__WEBPACK_IMPORTED_MODULE_1__["default"]
        }]
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(Viewport));


/***/ },

/***/ "./src/component/Label.mjs"
/*!*********************************!*\
  !*** ./src/component/Label.mjs ***!
  \*********************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _Base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Base.mjs */ "./src/component/Base.mjs");


/**
 * Convenience class to render a label with a text
 * @class Neo.component.Label
 * @extends Neo.component.Base
 */
class Label extends _Base_mjs__WEBPACK_IMPORTED_MODULE_0__["default"] {
    static config = {
        /**
         * @member {String} className='Neo.component.Label'
         * @protected
         */
        className: 'Neo.component.Label',
        /**
         * @member {String} ntype='label'
         * @protected
         */
        ntype: 'label',
        /**
         * @member {String[]} baseCls=['neo-label']
         */
        baseCls: ['neo-label'],
        /**
         * @member {String} tag='label'
         * @protected
         * @reactive
         */
        tag: 'label'
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(Label));


/***/ },

/***/ "./src/container/Viewport.mjs"
/*!************************************!*\
  !*** ./src/container/Viewport.mjs ***!
  \************************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _Base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Base.mjs */ "./src/container/Base.mjs");


/**
 * @class Neo.container.Viewport
 * @extends Neo.container.Base
 */
class Viewport extends _Base_mjs__WEBPACK_IMPORTED_MODULE_0__["default"] {
    static config = {
        /**
         * @member {String} className='Neo.container.Viewport'
         * @protected
         */
        className: 'Neo.container.Viewport',
        /**
         * @member {String} ntype='viewport'
         * @protected
         */
        ntype: 'viewport',
        /**
         * true applies 'neo-body-viewport' to the document.body
         * @member {Boolean} applyBodyCls=true
         */
        applyBodyCls: true,
        /**
         * Assuming that a Viewport is the top level view of your app, and you want to mount it right away.
         * Could be without any items. Use false otherwise.
         * @member {Boolean} autoMount=true
         */
        autoMount: true,
        /**
         * @member {String[]} baseCls=['neo-viewport']
         */
        baseCls: ['neo-viewport'],
        /**
         * true applies a main.addon.ResizeObserver and fires a custom resize event
         * which other instances can subscribe to.
         * @member {Boolean} monitorSize_=false
         * @reactive
         */
        monitorSize_: false
    }

    /**
     * Triggered after the mounted config got changed
     * @param {Boolean} value
     * @param {Boolean} oldValue
     * @protected
     */
    afterSetMounted(value, oldValue) {
        super.afterSetMounted(value, oldValue);

        let me = this;

        if (value && me.monitorSize) {
            me.addDomListeners([{resize: me.onDomResize, scope: me}])
        }
    }

    /**
     *
     */
    onConstructed() {
        super.onConstructed();

        let {windowId} = this;

        this.applyBodyCls && Neo.main.DomAccess.applyBodyCls({
            cls: ['neo-body-viewport'],
            windowId
        })
    }

    /**
     * @param {Object} data
     */
    onDomResize(data) {
        this.fire('resize', data)
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(Viewport));


/***/ },

/***/ "./src/form/field/TextArea.mjs"
/*!*************************************!*\
  !*** ./src/form/field/TextArea.mjs ***!
  \*************************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _Text_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Text.mjs */ "./src/form/field/Text.mjs");


/**
 *
 * @class Neo.form.field.TextArea
 * @extends Neo.form.field.Text
 * @abstract
 */
class TextArea extends _Text_mjs__WEBPACK_IMPORTED_MODULE_0__["default"] {
    /**
     * Valid values for wrap
     * @member {String[]} wrapValues=['hard', 'off', 'soft', null]
     * @protected
     * @static
     */
    static wrapValues = ['hard', 'off', 'soft', null]

    static config = {
        /**
         * @member {String} className='Neo.form.field.TextArea'
         * @protected
         */
        className: 'Neo.form.field.TextArea',
        /**
         * @member {String} ntype='textarea'
         * @protected
         */
        ntype: 'textarea',
        /**
         * Set this to `true` to have the text area grow and shrink to accommodate
         * any height of text. Bounds can be set using the `minHeight` and `maxHeight` settings.
         * @member {Boolean} autoGrow=false
         */
        autoGrow_: false,
        /**
         * @member {String[]} baseCls=['neo-textarea','neo-textfield']
         */
        baseCls: ['neo-textarea', 'neo-textfield'],
        /**
         * True shows a clear trigger in case the field has a non-empty value.
         * @member {Boolean} clearable=false
         * @reactive
         */
        clearable: false,
        /**
         * The visible width of the text control, in average character widths.
         * If it is specified, it must be a positive integer.
         * If it is not specified, the default value is 20.
         * @member {Number|null} cols_=null
         * @reactive
         */
        cols_: null,
        /**
         * @member {String} inputTag_='textarea'
         * @reactive
         */
        inputTag_: 'textarea',
        /**
         * Disabling to set a type for the textarea tag
         * See: inputTag_
         * @member {String|null} inputType=null
         * @protected
         * @reactive
         */
        inputType: null,
        /**
         * Use false to disable the browsers default resizing feature
         * @member {Boolean} resizable_=false
         * @reactive
         */
        resizable_: false,
        /**
         * An integer > 0 or null
         * @member {Number|null} rows_=3
         * @reactive
         */
        rows_: 3,
        /**
         * Indicates how the control wraps text. Possible values are: hard, soft, off
         * If this attribute is not specified, soft is its default value.
         * https://developer.mozilla.org/en-US/docs/Web/HTML/Element/textarea
         * @member {String|null} wrap_=null
         * @reactive
         */
        wrap_: null
    }

    /**
     * Triggered after the autoGrow config got changed
     * @param {Boolean} value
     * @param {Boolean} oldValue
     * @protected
     */
    afterSetAutoGrow(value, oldValue) {
        let me = this;

        value && me.syncAutoGrowMonitor();

        // Restore any configured height if autoGrow turned off
        if (!value) {
            me.afterSetHeight(me._height)
        }
    }

    /**
     * Triggered after the cols config got changed
     * @param {Number|null} value
     * @param {Number|null} oldValue
     * @protected
     */
    afterSetCols(value, oldValue) {
        this.changeInputElKey('cols', value)
    }

    /**
     * Triggered after the inputTag config got changed
     * @param {String} value
     * @param {String} oldValue
     * @protected
     */
    afterSetInputTag(value, oldValue) {
        this.changeInputElKey('tag', value)
    }

    /**
     * Triggered after the mounted config got changed
     * @param {Boolean} value
     * @param {Boolean} oldValue
     * @protected
     */
    afterSetMounted(value, oldValue) {
        super.afterSetMounted(value, oldValue);
        this.syncAutoGrowMonitor()
    }

    /**
     * Triggered after the resizable config got changed
     * @param {Boolean} value
     * @param {Boolean} oldValue
     * @protected
     */
    afterSetResizable(value, oldValue) {
        let me    = this,
            style = this.getInputEl().style;

        style.resize = value ? null : 'none';
        me.update()
    }

    /**
     * Triggered after the rows config got changed
     * @param {Number|null} value
     * @param {Number|null} oldValue
     * @protected
     */
    afterSetRows(value, oldValue) {
        this.changeInputElKey('rows', value)
    }

    /**
     * Triggered after the value config got changed
     * @param {String} value
     * @param {String} oldValue
     * @protected
     */
    afterSetValue(value, oldValue) {
        let me      = this,
            inputEl = me.getInputEl();

        if (inputEl) {
            inputEl.text = value
        }

        super.afterSetValue(value, oldValue);

        if (me.autoGrow && me.mounted && me.readOnly) {
            me.timeout(50).then(() => {
                Neo.main.DomAccess.monitorAutoGrowHandler({
                    id      : inputEl.id,
                    windowId: me.windowId
                })
            })
        }
    }

    /**
     * Triggered after the wrap config got changed
     * @param {Number|null} value
     * @param {Number|null} oldValue
     * @protected
     */
    afterSetWrap(value, oldValue) {
        this.changeInputElKey('wrap', value)
    }

    /**
     * Checks if the new wrap value matches a value of the static wrapValues config
     * @param {String} value
     * @param {String} oldValue
     * @returns {String} value
     * @protected
     */
    beforeSetWrap(value, oldValue) {
        return this.beforeSetEnumValue(value, oldValue, 'wrap', 'wrapValues')
    }

    /**
     *
     */
    async syncAutoGrowMonitor() {
        let me = this;

        if (me.mounted && me.autoGrow) {
            // Delegate monitoring of sizes to the main thread.
            Neo.main.DomAccess.monitorAutoGrow({
                id       : me.getInputElId(),
                autoGrow : me.autoGrow,
                windowId : me.windowId
            })
        }
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(TextArea));


/***/ },

/***/ "./src/functional/_export.mjs"
/*!************************************!*\
  !*** ./src/functional/_export.mjs ***!
  \************************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Component: () => (/* reexport safe */ _component_Base_mjs__WEBPACK_IMPORTED_MODULE_0__["default"]),
/* harmony export */   defineComponent: () => (/* reexport safe */ _defineComponent_mjs__WEBPACK_IMPORTED_MODULE_1__["default"]),
/* harmony export */   html: () => (/* reexport safe */ _util_html_mjs__WEBPACK_IMPORTED_MODULE_2__.html),
/* harmony export */   useConfig: () => (/* reexport safe */ _useConfig_mjs__WEBPACK_IMPORTED_MODULE_3__["default"]),
/* harmony export */   useEvent: () => (/* reexport safe */ _useEvent_mjs__WEBPACK_IMPORTED_MODULE_4__["default"])
/* harmony export */ });
/* harmony import */ var _component_Base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./component/Base.mjs */ "./src/functional/component/Base.mjs");
/* harmony import */ var _defineComponent_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./defineComponent.mjs */ "./src/functional/defineComponent.mjs");
/* harmony import */ var _util_html_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./util/html.mjs */ "./src/functional/util/html.mjs");
/* harmony import */ var _useConfig_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./useConfig.mjs */ "./src/functional/useConfig.mjs");
/* harmony import */ var _useEvent_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./useEvent.mjs */ "./src/functional/useEvent.mjs");









/***/ },

/***/ "./src/functional/defineComponent.mjs"
/*!********************************************!*\
  !*** ./src/functional/defineComponent.mjs ***!
  \********************************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   defineComponent: () => (/* binding */ defineComponent)
/* harmony export */ });
/* harmony import */ var _component_Base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./component/Base.mjs */ "./src/functional/component/Base.mjs");


/**
 * Factory function to create a functional component class from a specification object.
 * This enables a "Beginner Mode" for creating components without writing a class,
 * while still providing access to the full class-based feature set.
 *
 * It's important to understand the two ways of managing state:
 *
 * 1.  **Named Configs (Public API):** Defined in the `config` object (e.g., `text_`).
 *     - **Purpose:** Defines the component's public API for external control, similar to props.
 *     - **Use Case:** For data that a parent component will set or change.
 *     - **Features:** Integrates with the full config system (e.g., `afterSetText()` hooks).
 *
 * 2.  **`useConfig()` (Internal State):** Used inside `createVdom` or other methods.
 *     - **Purpose:** Manages private, encapsulated state that is internal to the component.
 *     - **Use Case:** For state that the component manages itself and is not controlled by the parent.
 *     - **Features:** Provides a simple, concise way to handle local reactive state.
 *
 * @param {Object} spec - The specification object for the component.
 * @returns {Neo.functional.component.Base} The generated component class.
 *
 * @example
 * import { defineComponent } from 'neo/functional/defineComponent.mjs';
 * import { useConfig }       from 'neo/functional/useConfig.mjs';
 *
 * const MyComponent = defineComponent({
 *     // 1. Define the Public API via the `config` object.
 *     config: {
 *         className: 'MyApp.MyFunctionalComponent',
 *         ntype    : 'my-functional-component',
 *
 *         // `text_` is a NAMED CONFIG. It's part of the component's public API.
 *         // A parent can create this component with a `text` config.
 *         // It is reactive and will generate `afterSetText()` and `beforeSetText()` hooks.
 *         text_: 'Hello World'
 *     },
 *
 *     // 2. Define the component's logic and VDOM.
 *     createVdom(config) {
 *         // `useConfig` creates ANONYMOUS, INTERNAL STATE.
 *         // The `count` state is private to this component and cannot be set by a parent.
 *         const [count, setCount] = useConfig(0);
 *
 *         return {
 *             tag: 'div',
 *             cn: [{
 *                 tag: 'h1',
 *                 // Access the public, named config via the `config` parameter.
 *                 text: config.text
 *             }, {
 *                 tag: 'p',
 *                 // Access the private, internal state directly.
 *                 text: `You clicked ${count} times`
 *             }, {
 *                 tag: 'button',
 *                 text: 'Click me',
 *                 // The setter from `useConfig` updates the internal state.
 *                 onclick: () => setCount(count + 1)
 *             }]
 *         };
 *     },
 *
 *     // 3. Lifecycle hooks for named configs work automatically.
 *     afterSetText(newValue, oldValue) {
 *         console.log(`Text changed from '${oldValue}' to '${newValue}'`);
 *     }
 * });
 *
 * // The returned MyComponent is a class constructor that can be used with Neo.create()
 * // const instance = Neo.create(MyComponent, {
 * //     text: 'Welcome to Neo.mjs!' // Set the public config on creation.
 * // });
 */
function defineComponent(spec) {
    const configSpec = spec.config;
    delete spec.config;

    if (!configSpec?.className) {
        throw new Error('defineComponent requires a config object with a className.');
    }

    class FunctionalComponent extends _component_Base_mjs__WEBPACK_IMPORTED_MODULE_0__["default"] {
        static config = {
            ...configSpec
            // We can add our own configurations here
        }
    }

    // Assign instance methods
    Object.entries(spec).forEach(([key, value]) => {
        FunctionalComponent.prototype[key] = value
    });

    // To support multiple envs (like `devmode`, `dist/esm`, `dist/production` in parallel,
    // we must re-assign FunctionalComponent to the setupClass() output.
    FunctionalComponent = Neo.setupClass(FunctionalComponent);

    return FunctionalComponent
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (defineComponent);


/***/ },

/***/ "./src/functional/useConfig.mjs"
/*!**************************************!*\
  !*** ./src/functional/useConfig.mjs ***!
  \**************************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   useConfig: () => (/* binding */ useConfig)
/* harmony export */ });
/* harmony import */ var _core_Config_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/Config.mjs */ "./src/core/Config.mjs");
/* harmony import */ var _core_EffectManager_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/EffectManager.mjs */ "./src/core/EffectManager.mjs");



const
    hookIndexSymbol = Symbol.for('hookIndex'),
    hooksSymbol     = Symbol.for('hooks');

/**
 * A hook for managing reactive state within a functional component's `createVdom` method.
 * It mirrors the behavior of React's `useState` but is powered by `Neo.core.Config` for reactivity.
 * @param {*} initialValue The initial value for the state.
 * @returns {Array<any>} A tuple containing the current value and a setter function.
 */
function useConfig(initialValue) {
    _core_EffectManager_mjs__WEBPACK_IMPORTED_MODULE_1__["default"].pause();

    const
        effect    = _core_EffectManager_mjs__WEBPACK_IMPORTED_MODULE_1__["default"].getActiveEffect(),
        component = effect && Neo.getComponent(effect.componentId);

    if (!component) {
        throw new Error('useConfig must be called from within a functional component\'s createVdom method.')
    }

    const currentIndex = component[hookIndexSymbol];

    // Increment the index for the next hook call within the same component render cycle.
    component[hookIndexSymbol]++;

    // If this is the first time this hook is being called for this component, initialize its state.
    if (!component[hooksSymbol][currentIndex]) {
        const config = new _core_Config_mjs__WEBPACK_IMPORTED_MODULE_0__["default"](initialValue);

        const customSetter = (newValue) => {
            if (typeof newValue === 'function') {
                newValue = newValue(config.get())
            }
            config.set(newValue)
        };

        component[hooksSymbol][currentIndex] = [config, customSetter]
    }

    const [config, setter] = component[hooksSymbol][currentIndex];

    _core_EffectManager_mjs__WEBPACK_IMPORTED_MODULE_1__["default"].resume();

    // Call config.get() to ensure this component's effect tracks this config as a dependency.
    return [config.get(), setter]
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (useConfig);


/***/ },

/***/ "./src/functional/useEvent.mjs"
/*!*************************************!*\
  !*** ./src/functional/useEvent.mjs ***!
  \*************************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   useEvent: () => (/* binding */ useEvent)
/* harmony export */ });
/* harmony import */ var _core_EffectManager_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/EffectManager.mjs */ "./src/core/EffectManager.mjs");


const pendingDomEventsSymbol = Symbol.for('pendingDomEvents');

/**
 * A hook for registering DOM event listeners within a functional component.
 * Event listeners registered via this hook will be managed by Neo.mjs's
 * delegated DOM event system, ensuring efficient and proper lifecycle handling.
 *
 * @param {String} eventType - The type of DOM event to listen for (e.g., 'click', 'input').
 * @param {Function} handler - The event handler function. It will receive the event data as its argument.
 * @param {String} [delegate] - An optional CSS selector for event delegation. If provided,
 *                               the handler will only fire if the event target matches this selector.
 */
function useEvent(eventType, handler, delegate) {
    const
        activeEffect = _core_EffectManager_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].getActiveEffect(),
        componentId  = activeEffect?.componentId;

    if (!componentId) {
        throw new Error('useEvent must be called from within a functional component\'s createVdom method.')
    }

    _core_EffectManager_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].pause();
    const component = Neo.getComponent(componentId);
    _core_EffectManager_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].resume();

    if (!component) {
        throw new Error(`Component with id ${componentId} not found for useEvent hook.`);
    }

    // Ensure pendingDomEventsSymbol exists on the component instance
    component[pendingDomEventsSymbol] ??= [];

    // Add the event listener configuration to the component's pending list
    component[pendingDomEventsSymbol].push({
        [eventType]: handler,
        delegate,
        scope      : component // The component instance itself will be the scope
    })
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (useEvent);


/***/ },

/***/ "./src/toolbar/Base.mjs"
/*!******************************!*\
  !*** ./src/toolbar/Base.mjs ***!
  \******************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _button_Base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../button/Base.mjs */ "./src/button/Base.mjs");
/* harmony import */ var _component_Base_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../component/Base.mjs */ "./src/component/Base.mjs");
/* harmony import */ var _container_Base_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../container/Base.mjs */ "./src/container/Base.mjs");
/* harmony import */ var _component_Label_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../component/Label.mjs */ "./src/component/Label.mjs");
/* harmony import */ var _util_Array_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../util/Array.mjs */ "./src/util/Array.mjs");






/**
 * @class Neo.toolbar.Base
 * @extends Neo.container.Base
 */
class Toolbar extends _container_Base_mjs__WEBPACK_IMPORTED_MODULE_2__["default"] {
    /**
     * Valid values for dock
     * @member {String[]} dockPositions=['top','right','bottom','left', null]
     * @static
     */
    static dockPositions = ['top', 'right', 'bottom', 'left', null]

    static config = {
        /**
         * @member {String} className='Neo.toolbar.Base'
         * @protected
         */
        className: 'Neo.toolbar.Base',
        /**
         * @member {String} ntype='toolbar'
         * @protected
         */
        ntype: 'toolbar',
        /**
         * @member {String[]} baseCls=['neo-toolbar']
         */
        baseCls: ['neo-toolbar'],
        /**
         * @member {String|null} dock_=null
         * @reactive
         */
        dock_: null,
        /**
         * @member {Object} itemDefaults={ntype:'button'}
         * @reactive
         */
        itemDefaults: {
            ntype: 'button'
        },
        /**
         * @member {Object} layout={ntype:'flexbox',align:'center',direction: 'row', pack:'start'}
         * @reactive
         */
        layout: {
            ntype    : 'flexbox',
            align    : 'center',
            direction: 'row',
            pack     : 'start'
        }
    }

    /**
     * Triggered after the dock config got changed
     * @param {String} value
     * @param {String} oldValue
     * @protected
     */
    afterSetDock(value, oldValue) {
        if (!value && !oldValue) {
            return
        }

        let me            = this,
            {cls}         = me,
            dockPositions = me.getStaticConfig('dockPositions'),
            layoutConfig  = me.getLayoutConfig();

        dockPositions.forEach(key => {
            key !== null && _util_Array_mjs__WEBPACK_IMPORTED_MODULE_4__["default"].toggle(cls, 'neo-dock-' + key, key === value)
        });

        if (!me.layout) {
            layoutConfig.ntype = 'flexbox';
            me.set({cls, layout: layoutConfig})
        } else {
            me.layout.set(layoutConfig);
            me.cls = cls;
        }
    }

    /**
     * Checks if the new dock position matches a value of the static dockPositions config
     * @param {String} value
     * @param {String} oldValue
     * @returns {String} value
     * @protected
     */
    beforeSetDock(value, oldValue) {
        return this.beforeSetEnumValue(value, oldValue, 'dock', 'dockPositions')
    }

    /**
     *
     */
    createItems() {
        let items = this._items;

        if (Array.isArray(items)) {
            this._items = items.map(item => this.replaceSpacer(item))
        }

        return super.createItems()
    }

    /**
     * Creates a layout config depending on this.dock
     * @returns {Object} layoutConfig
     */
    getLayoutConfig() {
        let me = this,
            layoutConfig;

        if (me.dock) {
            switch (me.dock) {
                case 'bottom':
                case 'top':
                    layoutConfig = {
                        align    : 'center',
                        direction: 'row',
                        pack     : 'start'
                    };
                    break
                case 'left':
                    layoutConfig = {
                        align    : 'center',
                        direction: 'column-reverse',
                        pack     : 'start'
                    };
                    break
                case 'right':
                    layoutConfig = {
                        align    : 'center',
                        direction: 'column',
                        pack     : 'start'
                    };
                    break
            }
        }

        return layoutConfig || me.layout
    }

    /**
     * Inserts an item or array of items at a specific index
     * @param {Number} index
     * @param {Array|Object} item
     * @param {Boolean} [silent=false]
     * @returns {Neo.component.Base|Neo.component.Base[]}
     */
    insert(index, item, silent=false) {
        if (Array.isArray(item)) {
            item = item.map(item => this.replaceSpacer(item))
        } else {
            item = this.replaceSpacer(item)
        }

        return super.insert(index, item, silent)
    }

    /**
     * @param {Array|Object|String} item
     * @returns {Array|Object}
     */
    replaceSpacer(item) {
        return item === '->' ? {module: _component_Base_mjs__WEBPACK_IMPORTED_MODULE_1__["default"], flex: 1} : item
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(Toolbar));


/***/ }

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2h1bmtzL2FwcC92ZW5kb3JzLWFwcHNfZW1haWxfYXBwX21qcy1zcmNfdG9vbGJhcl9CYXNlX21qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUEyQzs7QUFFcEM7QUFDUCxjQUFjLDBEQUFRO0FBQ3RCO0FBQ0EsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7OztBQ0wrQzs7QUFFaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsMkRBQUs7QUFDekI7QUFDQTtBQUNBLG9CQUFvQixRQUFRO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFVBQVU7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUEsaUVBQWUscUJBQXFCLEVBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDdENPO0FBQ1M7O0FBRXJEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLDJEQUFLO0FBQzFCO0FBQ0E7QUFDQSxvQkFBb0IsUUFBUTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixnQkFBZ0I7QUFDcEM7QUFDQSxlQUFlLHdEQUFVO0FBQ3pCO0FBQ0Esb0JBQW9CLFVBQVU7QUFDOUI7QUFDQTtBQUNBLGFBQWEsd0hBQXdIO0FBQ3JJLGFBQWEsaUpBQWlKO0FBQzlKLGFBQWEsa0pBQWtKO0FBQy9KLGFBQWEsa0xBQWtMO0FBQy9MLGFBQWE7QUFDYjtBQUNBO0FBQ0E7O0FBRUEsaUVBQWUsc0JBQXNCLEVBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUMvQnVCO0FBQ0k7QUFDSTtBQUNEOztBQUVwRSxpRUFBZSwyRUFBZTtBQUM5QjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsZ0JBQWdCLFFBQVE7QUFDeEI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0QkFBNEIs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QixlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsYUFBYSxhQUFhO0FBQzFCO0FBQ0E7O0FBRUE7QUFDQSw0QkFBNEIsdURBQVE7QUFDcEMsU0FBUzs7QUFFVDtBQUNBO0FBQ0Esb0JBQW9CLDBCQUEwQjtBQUM5QyxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkIsaUJBQWlCLFFBQVE7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUIsUUFBUTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLGNBQWM7QUFDN0IsZUFBZSxTQUFTO0FBQ3hCLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLHFCQUFxQjtBQUNwQyxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGdDQUFnQyxRQUFRLDJEQUFTLFdBQVc7QUFDNUQ7QUFDQTs7QUFFQSxpRUFBZSx1QkFBdUIsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL25lby5tanMvLi9hcHBzL2VtYWlsL2FwcC5tanMiLCJ3ZWJwYWNrOi8vbmVvLm1qcy8uL2FwcHMvZW1haWwvbW9kZWwvRW1haWwubWpzIiwid2VicGFjazovL25lby5tanMvLi9hcHBzL2VtYWlsL3N0b3JlL0VtYWlscy5tanMiLCJ3ZWJwYWNrOi8vbmVvLm1qcy8uL2FwcHMvZW1haWwvdmlldy9Db21wb3NlVmlldy5tanMiLCJ3ZWJwYWNrOi8vbmVvLm1qcy8uL2FwcHMvZW1haWwvdmlldy9NYWluVmlldy5tanMiLCJ3ZWJwYWNrOi8vbmVvLm1qcy8uL2FwcHMvZW1haWwvdmlldy9WaWV3cG9ydC5tanMiLCJ3ZWJwYWNrOi8vbmVvLm1qcy8uL3NyYy9jb21wb25lbnQvTGFiZWwubWpzIiwid2VicGFjazovL25lby5tanMvLi9zcmMvY29udGFpbmVyL1ZpZXdwb3J0Lm1qcyIsIndlYnBhY2s6Ly9uZW8ubWpzLy4vc3JjL2Zvcm0vZmllbGQvVGV4dEFyZWEubWpzIiwid2VicGFjazovL25lby5tanMvLi9zcmMvZnVuY3Rpb25hbC9fZXhwb3J0Lm1qcyIsIndlYnBhY2s6Ly9uZW8ubWpzLy4vc3JjL2Z1bmN0aW9uYWwvZGVmaW5lQ29tcG9uZW50Lm1qcyIsIndlYnBhY2s6Ly9uZW8ubWpzLy4vc3JjL2Z1bmN0aW9uYWwvdXNlQ29uZmlnLm1qcyIsIndlYnBhY2s6Ly9uZW8ubWpzLy4vc3JjL2Z1bmN0aW9uYWwvdXNlRXZlbnQubWpzIiwid2VicGFjazovL25lby5tanMvLi9zcmMvdG9vbGJhci9CYXNlLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgVmlld3BvcnQgZnJvbSAnLi92aWV3L1ZpZXdwb3J0Lm1qcyc7XG5cbmV4cG9ydCBjb25zdCBvblN0YXJ0ID0gKCkgPT4gTmVvLmFwcCh7XG4gICAgbWFpblZpZXc6IFZpZXdwb3J0LFxuICAgIG5hbWUgICAgOiAnRW1haWwnXG59KTtcbiIsImltcG9ydCBNb2RlbCBmcm9tICcuLi8uLi8uLi9zcmMvZGF0YS9Nb2RlbC5tanMnO1xuXG4vKipcbiAqIEBjbGFzcyBFbWFpbC5tb2RlbC5FbWFpbFxuICogQGV4dGVuZHMgTmVvLmRhdGEuTW9kZWxcbiAqL1xuY2xhc3MgRW1haWwgZXh0ZW5kcyBNb2RlbCB7XG4gICAgc3RhdGljIGNvbmZpZyA9IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ30gY2xhc3NOYW1lPSdFbWFpbC5tb2RlbC5FbWFpbCdcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgY2xhc3NOYW1lOiAnRW1haWwubW9kZWwuRW1haWwnLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7T2JqZWN0W119IGZpZWxkc1xuICAgICAgICAgKi9cbiAgICAgICAgZmllbGRzOiBbe1xuICAgICAgICAgICAgbmFtZTogJ2lkJyxcbiAgICAgICAgICAgIHR5cGU6ICdJbnQnXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG5hbWU6ICdjb250ZW50JyxcbiAgICAgICAgICAgIHR5cGU6ICdTdHJpbmcnXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG5hbWU6ICdkYXRlU2VudCcsXG4gICAgICAgICAgICB0eXBlOiAnU3RyaW5nJ1xuICAgICAgICB9LCB7XG4gICAgICAgICAgICBuYW1lOiAncmVjaXBpZW50cycsXG4gICAgICAgICAgICB0eXBlOiAnQXJyYXknXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG5hbWU6ICdzZW5kZXInLFxuICAgICAgICAgICAgdHlwZTogJ1N0cmluZydcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgbmFtZTogJ3RpdGxlJyxcbiAgICAgICAgICAgIHR5cGU6ICdTdHJpbmcnXG4gICAgICAgIH1dXG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBOZW8uc2V0dXBDbGFzcyhFbWFpbCk7XG4iLCJpbXBvcnQgRW1haWxNb2RlbCBmcm9tICcuLi9tb2RlbC9FbWFpbC5tanMnO1xuaW1wb3J0IFN0b3JlICAgICAgZnJvbSAnLi4vLi4vLi4vc3JjL2RhdGEvU3RvcmUubWpzJztcblxuLyoqXG4gKiBAY2xhc3MgRW1haWwuc3RvcmUuRW1haWxzXG4gKiBAZXh0ZW5kcyBOZW8uZGF0YS5TdG9yZVxuICovXG5jbGFzcyBFbWFpbHMgZXh0ZW5kcyBTdG9yZSB7XG4gICAgc3RhdGljIGNvbmZpZyA9IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ30gY2xhc3NOYW1lPSdFbWFpbC5zdG9yZS5FbWFpbHMnXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIGNsYXNzTmFtZTogJ0VtYWlsLnN0b3JlLkVtYWlscycsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtOZW8uZGF0YS5Nb2RlbH0gbW9kZWw9RW1haWxcbiAgICAgICAgICovXG4gICAgICAgIG1vZGVsOiBFbWFpbE1vZGVsLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7T2JqZWN0W119IGRhdGFcbiAgICAgICAgICovXG4gICAgICAgIGRhdGE6IFtcbiAgICAgICAgICAgIHtpZDogMSwgc2VuZGVyOiAnSm9obiBEb2UnLCB0aXRsZTogJ0hlbGxvIFdvcmxkIScsIGNvbnRlbnQ6ICdUaGlzIGlzIHRoZSBmaXJzdCBlbWFpbC4nLCBkYXRlU2VudDogJzIwMjUtMDctMTVUMTA6MDA6MDBaJ30sXG4gICAgICAgICAgICB7aWQ6IDIsIHNlbmRlcjogJ0phbmUgU21pdGgnLCB0aXRsZTogJ1JlOiBQcm9qZWN0IFVwZGF0ZScsIGNvbnRlbnQ6ICdIZXJlIGlzIHRoZSBwcm9qZWN0IHVwZGF0ZSB5b3UgcmVxdWVzdGVkLicsIGRhdGVTZW50OiAnMjAyNS0wNy0xNVQxMTozMDowMFonfSxcbiAgICAgICAgICAgIHtpZDogMywgc2VuZGVyOiAnUGV0ZXIgSm9uZXMnLCB0aXRsZTogJ0x1bmNoIHRvbW9ycm93PycsIGNvbnRlbnQ6ICdBcmUgd2Ugc3RpbGwgb24gZm9yIGx1bmNoIHRvbW9ycm93IGF0IDEyOjMwPycsIGRhdGVTZW50OiAnMjAyNS0wNy0xNVQxMjoxNTowMFonfSxcbiAgICAgICAgICAgIHtpZDogNCwgc2VuZGVyOiAnTWFyeSBXaWxsaWFtcycsIHRpdGxlOiAnWW91ciBvcmRlciBoYXMgc2hpcHBlZCcsIGNvbnRlbnQ6ICdZb3VyIG9yZGVyICMxMjM0NSBoYXMgc2hpcHBlZCBhbmQgd2lsbCBhcnJpdmUgaW4gMy01IGJ1c2luZXNzIGRheXMuJywgZGF0ZVNlbnQ6ICcyMDI1LTA3LTE0VDE1OjQ1OjAwWid9LFxuICAgICAgICAgICAge2lkOiA1LCBzZW5kZXI6ICdEYXZpZCBCcm93bicsIHRpdGxlOiAnUXVpY2sgcXVlc3Rpb24nLCBjb250ZW50OiAnSSBoYXZlIGEgcXVpY2sgcXVlc3Rpb24gYWJvdXQgdGhlIG5ldyBmZWF0dXJlLicsIGRhdGVTZW50OiAnMjAyNS0wNy0xNFQwOToyMDowMFonfVxuICAgICAgICBdXG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBOZW8uc2V0dXBDbGFzcyhFbWFpbHMpO1xuIiwiaW1wb3J0IEJ1dHRvbiAgICAgICAgICAgIGZyb20gJy4uLy4uLy4uL3NyYy9idXR0b24vQmFzZS5tanMnO1xuaW1wb3J0IFRleHRGaWVsZCAgICAgICAgIGZyb20gJy4uLy4uLy4uL3NyYy9mb3JtL2ZpZWxkL1RleHQubWpzJztcbmltcG9ydCBUZXh0QXJlYUZpZWxkICAgICBmcm9tICcuLi8uLi8uLi9zcmMvZm9ybS9maWVsZC9UZXh0QXJlYS5tanMnO1xuaW1wb3J0IHtkZWZpbmVDb21wb25lbnR9IGZyb20gJy4uLy4uLy4uL3NyYy9mdW5jdGlvbmFsL19leHBvcnQubWpzJztcblxuZXhwb3J0IGRlZmF1bHQgZGVmaW5lQ29tcG9uZW50KHtcbiAgICBjb25maWc6IHtcbiAgICAgICAgY2xhc3NOYW1lOiAnRW1haWwudmlldy5Db21wb3NlVmlldycsXG4gICAgICAgIGNscyAgICAgIDogWydlbWFpbC1jb21wb3NlLXZpZXcnXVxuICAgIH0sXG4gICAgY3JlYXRlVmRvbSh7b25DbG9zZX0pIHtcbiAgICAgICAgY29uc3QgZmllbGRTdHlsZSA9IHtcbiAgICAgICAgICAgIG1hcmdpbkJvdHRvbTogJzEwcHgnXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNuOiBbe1xuICAgICAgICAgICAgICAgIG1vZHVsZSAgICA6IFRleHRGaWVsZCxcbiAgICAgICAgICAgICAgICBpZCAgICAgICAgOiAnY29tcG9zZS10bycsXG4gICAgICAgICAgICAgICAgbGFiZWxUZXh0IDogJ1RvOicsXG4gICAgICAgICAgICAgICAgbGFiZWxXaWR0aDogODAsXG4gICAgICAgICAgICAgICAgc3R5bGUgICAgIDogZmllbGRTdHlsZVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIG1vZHVsZSAgICA6IFRleHRGaWVsZCxcbiAgICAgICAgICAgICAgICBpZCAgICAgICAgOiAnY29tcG9zZS1zdWJqZWN0JyxcbiAgICAgICAgICAgICAgICBsYWJlbFRleHQgOiAnU3ViamVjdDonLFxuICAgICAgICAgICAgICAgIGxhYmVsV2lkdGg6IDgwLFxuICAgICAgICAgICAgICAgIHN0eWxlICAgICA6IGZpZWxkU3R5bGVcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBtb2R1bGUgICA6IFRleHRBcmVhRmllbGQsXG4gICAgICAgICAgICAgICAgaWQgICAgICAgOiAnY29tcG9zZS1ib2R5JyxcbiAgICAgICAgICAgICAgICBsYWJlbFRleHQ6ICdCb2R5OicsXG4gICAgICAgICAgICAgICAgaGVpZ2h0ICAgOiAyMDAsXG4gICAgICAgICAgICAgICAgc3R5bGUgICAgOiBmaWVsZFN0eWxlXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgbW9kdWxlIDogQnV0dG9uLFxuICAgICAgICAgICAgICAgIGhhbmRsZXI6IG9uQ2xvc2UsXG4gICAgICAgICAgICAgICAgaWQgICAgIDogJ2NvbXBvc2UtY2xvc2UtYnV0dG9uJyxcbiAgICAgICAgICAgICAgICBzdHlsZSAgOiB7YWxpZ25TZWxmOiAnZmxleC1lbmQnfSxcbiAgICAgICAgICAgICAgICB0ZXh0ICAgOiAnQ2xvc2UnXG4gICAgICAgICAgICB9XVxuICAgICAgICB9XG4gICAgfVxufSk7XG4iLCJpbXBvcnQgQnV0dG9uICAgICAgICAgICAgICAgICAgICAgICBmcm9tICcuLi8uLi8uLi9zcmMvYnV0dG9uL0Jhc2UubWpzJztcbmltcG9ydCBDb21wb3NlVmlldyAgICAgICAgICAgICAgICAgIGZyb20gJy4vQ29tcG9zZVZpZXcubWpzJztcbmltcG9ydCBFbWFpbHNTdG9yZSAgICAgICAgICAgICAgICAgIGZyb20gJy4uL3N0b3JlL0VtYWlscy5tanMnO1xuaW1wb3J0IEdyaWRDb250YWluZXIgICAgICAgICAgICAgICAgZnJvbSAnLi4vLi4vLi4vc3JjL2dyaWQvQ29udGFpbmVyLm1qcyc7XG5pbXBvcnQgUm93TW9kZWwgICAgICAgICAgICAgICAgICAgICBmcm9tICcuLi8uLi8uLi9zcmMvc2VsZWN0aW9uL2dyaWQvUm93TW9kZWwubWpzJztcbmltcG9ydCB7ZGVmaW5lQ29tcG9uZW50LCB1c2VDb25maWd9IGZyb20gJy4uLy4uLy4uL3NyYy9mdW5jdGlvbmFsL19leHBvcnQubWpzJztcblxuZXhwb3J0IGRlZmF1bHQgZGVmaW5lQ29tcG9uZW50KHtcbiAgICBjb25maWc6IHtcbiAgICAgICAgY2xhc3NOYW1lOiAnRW1haWwudmlldy5NYWluVmlldycsXG4gICAgICAgIGNscyAgICAgIDogWydlbWFpbC1tYWluLXZpZXcnXVxuICAgIH0sXG4gICAgY3JlYXRlVmRvbSgpIHtcbiAgICAgICAgY29uc3RcbiAgICAgICAgICAgIFtpc0NvbXBvc2luZywgICBzZXRJc0NvbXBvc2luZ10gICA9IHVzZUNvbmZpZyhmYWxzZSksXG4gICAgICAgICAgICBbc2VsZWN0ZWRFbWFpbCwgc2V0U2VsZWN0ZWRFbWFpbF0gPSB1c2VDb25maWcobnVsbCk7XG5cbiAgICAgICAgY29uc3QgcGFuZVN0eWxlID0ge1xuICAgICAgICAgICAgYm9yZGVyIDogJzFweCBzb2xpZCAjYzBjMGMwJyxcbiAgICAgICAgICAgIG1hcmdpbiA6ICcxMHB4JyxcbiAgICAgICAgICAgIHBhZGRpbmc6ICcxMHB4J1xuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IG9uQ29tcG9zZUNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgc2V0SXNDb21wb3NpbmcodHJ1ZSlcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBvbkNsb3NlQ29tcG9zZSA9ICgpID0+IHtcbiAgICAgICAgICAgIHNldElzQ29tcG9zaW5nKGZhbHNlKTtcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBvblNlbGVjdGlvbkNoYW5nZSA9ICh7cmVjb3Jkc30pID0+IHtcbiAgICAgICAgICAgIHNldFNlbGVjdGVkRW1haWwocmVjb3Jkc1swXSB8fCBudWxsKVxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjbjogW3tcbiAgICAgICAgICAgICAgICBzdHlsZTogey4uLnBhbmVTdHlsZSwgZmxleDogJzAgMCAyMDBweCd9LFxuICAgICAgICAgICAgICAgIGNuOiBbe1xuICAgICAgICAgICAgICAgICAgICBtb2R1bGUgOiBCdXR0b24sXG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZXI6IG9uQ29tcG9zZUNsaWNrLFxuICAgICAgICAgICAgICAgICAgICBpZCAgICAgOiAnY29tcG9zZS1idXR0b24nLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0ICAgOiAnQ29tcG9zZScsXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlICA6IHttYXJnaW5Cb3R0b206ICcxMHB4Jywgd2lkdGg6ICcxMDAlJ31cbiAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgIHRleHQgOiAnRm9sZGVycydcbiAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIHN0eWxlOiB7Li4ucGFuZVN0eWxlLCBmbGV4OiAnMSAxIDYwMHB4JywgcGFkZGluZzogJzAnfSxcbiAgICAgICAgICAgICAgICBjbjogW3tcbiAgICAgICAgICAgICAgICAgICAgbW9kdWxlICAgICAgOiBHcmlkQ29udGFpbmVyLFxuICAgICAgICAgICAgICAgICAgICBpZCAgICAgICAgICA6ICdlbWFpbC1ncmlkJyxcbiAgICAgICAgICAgICAgICAgICAgc3RvcmUgICAgICAgOiBFbWFpbHNTdG9yZSxcbiAgICAgICAgICAgICAgICAgICAgd3JhcHBlclN0eWxlOiB7aGVpZ2h0OiAnMTAwJScsIHdpZHRoOiAnMTAwJSd9LFxuICAgICAgICAgICAgICAgICAgICBib2R5OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb25Nb2RlbDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZHVsZSAgIDogUm93TW9kZWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdGVuZXJzOiB7c2VsZWN0aW9uQ2hhbmdlOiBvblNlbGVjdGlvbkNoYW5nZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uczogW1xuICAgICAgICAgICAgICAgICAgICAgICAge2RhdGFGaWVsZDogJ3NlbmRlcicsIHRleHQ6ICdTZW5kZXInLCB3aWR0aDogMTUwfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHtkYXRhRmllbGQ6ICd0aXRsZScsICB0ZXh0OiAnVGl0bGUnLCAgZmxleDogMSwgbWluV2lkdGg6IDIwMH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbEFsaWduOiAncmlnaHQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFGaWVsZDogJ2RhdGVTZW50JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJlciA6ICgoe3ZhbHVlfSkgPT4gbmV3IERhdGUodmFsdWUpLnRvTG9jYWxlRGF0ZVN0cmluZygpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ICAgICA6ICdEYXRlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aCAgICA6IDEwMFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBzdHlsZTogey4uLnBhbmVTdHlsZSwgZmxleDogJzEgMSA2MDBweCd9LFxuICAgICAgICAgICAgICAgIGNuOiBzZWxlY3RlZEVtYWlsID8gW1xuICAgICAgICAgICAgICAgICAgICB7dGFnOiAnaDInLCAgdGV4dDogc2VsZWN0ZWRFbWFpbC50aXRsZX0sXG4gICAgICAgICAgICAgICAgICAgIHt0YWc6ICdwJywgICB0ZXh0OiBgRnJvbTogJHtzZWxlY3RlZEVtYWlsLnNlbmRlcn1gfSxcbiAgICAgICAgICAgICAgICAgICAge3RhZzogJ2RpdicsIHN0eWxlOiB7bWFyZ2luVG9wOiAnMTBweCd9LCB0ZXh0OiBzZWxlY3RlZEVtYWlsLmNvbnRlbnR9XG4gICAgICAgICAgICAgICAgXSA6IFt7XG4gICAgICAgICAgICAgICAgICAgIHRleHQ6ICdTZWxlY3QgYW4gZW1haWwgdG8gcmVhZCdcbiAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgfSwgaXNDb21wb3NpbmcgJiYge1xuICAgICAgICAgICAgICAgIG1vZHVsZSA6IENvbXBvc2VWaWV3LFxuICAgICAgICAgICAgICAgIGlkICAgICA6ICdjb21wb3NlLXZpZXcnLFxuICAgICAgICAgICAgICAgIG9uQ2xvc2U6IG9uQ2xvc2VDb21wb3NlXG4gICAgICAgICAgICB9XVxuICAgICAgICB9XG4gICAgfVxufSk7XG4iLCJpbXBvcnQgQmFzZVZpZXdwb3J0IGZyb20gJy4uLy4uLy4uL3NyYy9jb250YWluZXIvVmlld3BvcnQubWpzJztcbmltcG9ydCBNYWluVmlldyAgICAgZnJvbSAnLi9NYWluVmlldy5tanMnO1xuXG4vKipcbiAqIEBjbGFzcyBFbWFpbC52aWV3LlZpZXdwb3J0XG4gKiBAZXh0ZW5kcyBOZW8uY29udGFpbmVyLlZpZXdwb3J0XG4gKi9cbmNsYXNzIFZpZXdwb3J0IGV4dGVuZHMgQmFzZVZpZXdwb3J0IHtcbiAgICBzdGF0aWMgY29uZmlnID0ge1xuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfSBjbGFzc05hbWU9J0VtYWlsLnZpZXcuVmlld3BvcnQnXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIGNsYXNzTmFtZTogJ0VtYWlsLnZpZXcuVmlld3BvcnQnLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7T2JqZWN0fSBsYXlvdXQ9e250eXBlOidmaXQnfVxuICAgICAgICAgKi9cbiAgICAgICAgbGF5b3V0OiB7bnR5cGU6ICdmaXQnfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge09iamVjdFtdfSBpdGVtc1xuICAgICAgICAgKi9cbiAgICAgICAgaXRlbXM6IFt7XG4gICAgICAgICAgICBtb2R1bGU6IE1haW5WaWV3XG4gICAgICAgIH1dXG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBOZW8uc2V0dXBDbGFzcyhWaWV3cG9ydCk7XG4iLCJpbXBvcnQgQ29tcG9uZW50IGZyb20gJy4vQmFzZS5tanMnO1xuXG4vKipcbiAqIENvbnZlbmllbmNlIGNsYXNzIHRvIHJlbmRlciBhIGxhYmVsIHdpdGggYSB0ZXh0XG4gKiBAY2xhc3MgTmVvLmNvbXBvbmVudC5MYWJlbFxuICogQGV4dGVuZHMgTmVvLmNvbXBvbmVudC5CYXNlXG4gKi9cbmNsYXNzIExhYmVsIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgY29uZmlnID0ge1xuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfSBjbGFzc05hbWU9J05lby5jb21wb25lbnQuTGFiZWwnXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIGNsYXNzTmFtZTogJ05lby5jb21wb25lbnQuTGFiZWwnLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfSBudHlwZT0nbGFiZWwnXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIG50eXBlOiAnbGFiZWwnLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nW119IGJhc2VDbHM9WyduZW8tbGFiZWwnXVxuICAgICAgICAgKi9cbiAgICAgICAgYmFzZUNsczogWyduZW8tbGFiZWwnXSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ30gdGFnPSdsYWJlbCdcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAcmVhY3RpdmVcbiAgICAgICAgICovXG4gICAgICAgIHRhZzogJ2xhYmVsJ1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTmVvLnNldHVwQ2xhc3MoTGFiZWwpO1xuIiwiaW1wb3J0IENvbnRhaW5lciBmcm9tICcuL0Jhc2UubWpzJztcblxuLyoqXG4gKiBAY2xhc3MgTmVvLmNvbnRhaW5lci5WaWV3cG9ydFxuICogQGV4dGVuZHMgTmVvLmNvbnRhaW5lci5CYXNlXG4gKi9cbmNsYXNzIFZpZXdwb3J0IGV4dGVuZHMgQ29udGFpbmVyIHtcbiAgICBzdGF0aWMgY29uZmlnID0ge1xuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfSBjbGFzc05hbWU9J05lby5jb250YWluZXIuVmlld3BvcnQnXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIGNsYXNzTmFtZTogJ05lby5jb250YWluZXIuVmlld3BvcnQnLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfSBudHlwZT0ndmlld3BvcnQnXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIG50eXBlOiAndmlld3BvcnQnLFxuICAgICAgICAvKipcbiAgICAgICAgICogdHJ1ZSBhcHBsaWVzICduZW8tYm9keS12aWV3cG9ydCcgdG8gdGhlIGRvY3VtZW50LmJvZHlcbiAgICAgICAgICogQG1lbWJlciB7Qm9vbGVhbn0gYXBwbHlCb2R5Q2xzPXRydWVcbiAgICAgICAgICovXG4gICAgICAgIGFwcGx5Qm9keUNsczogdHJ1ZSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFzc3VtaW5nIHRoYXQgYSBWaWV3cG9ydCBpcyB0aGUgdG9wIGxldmVsIHZpZXcgb2YgeW91ciBhcHAsIGFuZCB5b3Ugd2FudCB0byBtb3VudCBpdCByaWdodCBhd2F5LlxuICAgICAgICAgKiBDb3VsZCBiZSB3aXRob3V0IGFueSBpdGVtcy4gVXNlIGZhbHNlIG90aGVyd2lzZS5cbiAgICAgICAgICogQG1lbWJlciB7Qm9vbGVhbn0gYXV0b01vdW50PXRydWVcbiAgICAgICAgICovXG4gICAgICAgIGF1dG9Nb3VudDogdHJ1ZSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ1tdfSBiYXNlQ2xzPVsnbmVvLXZpZXdwb3J0J11cbiAgICAgICAgICovXG4gICAgICAgIGJhc2VDbHM6IFsnbmVvLXZpZXdwb3J0J10sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiB0cnVlIGFwcGxpZXMgYSBtYWluLmFkZG9uLlJlc2l6ZU9ic2VydmVyIGFuZCBmaXJlcyBhIGN1c3RvbSByZXNpemUgZXZlbnRcbiAgICAgICAgICogd2hpY2ggb3RoZXIgaW5zdGFuY2VzIGNhbiBzdWJzY3JpYmUgdG8uXG4gICAgICAgICAqIEBtZW1iZXIge0Jvb2xlYW59IG1vbml0b3JTaXplXz1mYWxzZVxuICAgICAgICAgKiBAcmVhY3RpdmVcbiAgICAgICAgICovXG4gICAgICAgIG1vbml0b3JTaXplXzogZmFsc2VcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgYWZ0ZXIgdGhlIG1vdW50ZWQgY29uZmlnIGdvdCBjaGFuZ2VkXG4gICAgICogQHBhcmFtIHtCb29sZWFufSB2YWx1ZVxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gb2xkVmFsdWVcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgYWZ0ZXJTZXRNb3VudGVkKHZhbHVlLCBvbGRWYWx1ZSkge1xuICAgICAgICBzdXBlci5hZnRlclNldE1vdW50ZWQodmFsdWUsIG9sZFZhbHVlKTtcblxuICAgICAgICBsZXQgbWUgPSB0aGlzO1xuXG4gICAgICAgIGlmICh2YWx1ZSAmJiBtZS5tb25pdG9yU2l6ZSkge1xuICAgICAgICAgICAgbWUuYWRkRG9tTGlzdGVuZXJzKFt7cmVzaXplOiBtZS5vbkRvbVJlc2l6ZSwgc2NvcGU6IG1lfV0pXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqL1xuICAgIG9uQ29uc3RydWN0ZWQoKSB7XG4gICAgICAgIHN1cGVyLm9uQ29uc3RydWN0ZWQoKTtcblxuICAgICAgICBsZXQge3dpbmRvd0lkfSA9IHRoaXM7XG5cbiAgICAgICAgdGhpcy5hcHBseUJvZHlDbHMgJiYgTmVvLm1haW4uRG9tQWNjZXNzLmFwcGx5Qm9keUNscyh7XG4gICAgICAgICAgICBjbHM6IFsnbmVvLWJvZHktdmlld3BvcnQnXSxcbiAgICAgICAgICAgIHdpbmRvd0lkXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGFcbiAgICAgKi9cbiAgICBvbkRvbVJlc2l6ZShkYXRhKSB7XG4gICAgICAgIHRoaXMuZmlyZSgncmVzaXplJywgZGF0YSlcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IE5lby5zZXR1cENsYXNzKFZpZXdwb3J0KTtcbiIsImltcG9ydCBUZXh0IGZyb20gJy4vVGV4dC5tanMnO1xuXG4vKipcbiAqXG4gKiBAY2xhc3MgTmVvLmZvcm0uZmllbGQuVGV4dEFyZWFcbiAqIEBleHRlbmRzIE5lby5mb3JtLmZpZWxkLlRleHRcbiAqIEBhYnN0cmFjdFxuICovXG5jbGFzcyBUZXh0QXJlYSBleHRlbmRzIFRleHQge1xuICAgIC8qKlxuICAgICAqIFZhbGlkIHZhbHVlcyBmb3Igd3JhcFxuICAgICAqIEBtZW1iZXIge1N0cmluZ1tdfSB3cmFwVmFsdWVzPVsnaGFyZCcsICdvZmYnLCAnc29mdCcsIG51bGxdXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBzdGF0aWNcbiAgICAgKi9cbiAgICBzdGF0aWMgd3JhcFZhbHVlcyA9IFsnaGFyZCcsICdvZmYnLCAnc29mdCcsIG51bGxdXG5cbiAgICBzdGF0aWMgY29uZmlnID0ge1xuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfSBjbGFzc05hbWU9J05lby5mb3JtLmZpZWxkLlRleHRBcmVhJ1xuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICBjbGFzc05hbWU6ICdOZW8uZm9ybS5maWVsZC5UZXh0QXJlYScsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtTdHJpbmd9IG50eXBlPSd0ZXh0YXJlYSdcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgbnR5cGU6ICd0ZXh0YXJlYScsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXQgdGhpcyB0byBgdHJ1ZWAgdG8gaGF2ZSB0aGUgdGV4dCBhcmVhIGdyb3cgYW5kIHNocmluayB0byBhY2NvbW1vZGF0ZVxuICAgICAgICAgKiBhbnkgaGVpZ2h0IG9mIHRleHQuIEJvdW5kcyBjYW4gYmUgc2V0IHVzaW5nIHRoZSBgbWluSGVpZ2h0YCBhbmQgYG1heEhlaWdodGAgc2V0dGluZ3MuXG4gICAgICAgICAqIEBtZW1iZXIge0Jvb2xlYW59IGF1dG9Hcm93PWZhbHNlXG4gICAgICAgICAqL1xuICAgICAgICBhdXRvR3Jvd186IGZhbHNlLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nW119IGJhc2VDbHM9WyduZW8tdGV4dGFyZWEnLCduZW8tdGV4dGZpZWxkJ11cbiAgICAgICAgICovXG4gICAgICAgIGJhc2VDbHM6IFsnbmVvLXRleHRhcmVhJywgJ25lby10ZXh0ZmllbGQnXSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRydWUgc2hvd3MgYSBjbGVhciB0cmlnZ2VyIGluIGNhc2UgdGhlIGZpZWxkIGhhcyBhIG5vbi1lbXB0eSB2YWx1ZS5cbiAgICAgICAgICogQG1lbWJlciB7Qm9vbGVhbn0gY2xlYXJhYmxlPWZhbHNlXG4gICAgICAgICAqIEByZWFjdGl2ZVxuICAgICAgICAgKi9cbiAgICAgICAgY2xlYXJhYmxlOiBmYWxzZSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSB2aXNpYmxlIHdpZHRoIG9mIHRoZSB0ZXh0IGNvbnRyb2wsIGluIGF2ZXJhZ2UgY2hhcmFjdGVyIHdpZHRocy5cbiAgICAgICAgICogSWYgaXQgaXMgc3BlY2lmaWVkLCBpdCBtdXN0IGJlIGEgcG9zaXRpdmUgaW50ZWdlci5cbiAgICAgICAgICogSWYgaXQgaXMgbm90IHNwZWNpZmllZCwgdGhlIGRlZmF1bHQgdmFsdWUgaXMgMjAuXG4gICAgICAgICAqIEBtZW1iZXIge051bWJlcnxudWxsfSBjb2xzXz1udWxsXG4gICAgICAgICAqIEByZWFjdGl2ZVxuICAgICAgICAgKi9cbiAgICAgICAgY29sc186IG51bGwsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtTdHJpbmd9IGlucHV0VGFnXz0ndGV4dGFyZWEnXG4gICAgICAgICAqIEByZWFjdGl2ZVxuICAgICAgICAgKi9cbiAgICAgICAgaW5wdXRUYWdfOiAndGV4dGFyZWEnLFxuICAgICAgICAvKipcbiAgICAgICAgICogRGlzYWJsaW5nIHRvIHNldCBhIHR5cGUgZm9yIHRoZSB0ZXh0YXJlYSB0YWdcbiAgICAgICAgICogU2VlOiBpbnB1dFRhZ19cbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfG51bGx9IGlucHV0VHlwZT1udWxsXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHJlYWN0aXZlXG4gICAgICAgICAqL1xuICAgICAgICBpbnB1dFR5cGU6IG51bGwsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBVc2UgZmFsc2UgdG8gZGlzYWJsZSB0aGUgYnJvd3NlcnMgZGVmYXVsdCByZXNpemluZyBmZWF0dXJlXG4gICAgICAgICAqIEBtZW1iZXIge0Jvb2xlYW59IHJlc2l6YWJsZV89ZmFsc2VcbiAgICAgICAgICogQHJlYWN0aXZlXG4gICAgICAgICAqL1xuICAgICAgICByZXNpemFibGVfOiBmYWxzZSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFuIGludGVnZXIgPiAwIG9yIG51bGxcbiAgICAgICAgICogQG1lbWJlciB7TnVtYmVyfG51bGx9IHJvd3NfPTNcbiAgICAgICAgICogQHJlYWN0aXZlXG4gICAgICAgICAqL1xuICAgICAgICByb3dzXzogMyxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluZGljYXRlcyBob3cgdGhlIGNvbnRyb2wgd3JhcHMgdGV4dC4gUG9zc2libGUgdmFsdWVzIGFyZTogaGFyZCwgc29mdCwgb2ZmXG4gICAgICAgICAqIElmIHRoaXMgYXR0cmlidXRlIGlzIG5vdCBzcGVjaWZpZWQsIHNvZnQgaXMgaXRzIGRlZmF1bHQgdmFsdWUuXG4gICAgICAgICAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0hUTUwvRWxlbWVudC90ZXh0YXJlYVxuICAgICAgICAgKiBAbWVtYmVyIHtTdHJpbmd8bnVsbH0gd3JhcF89bnVsbFxuICAgICAgICAgKiBAcmVhY3RpdmVcbiAgICAgICAgICovXG4gICAgICAgIHdyYXBfOiBudWxsXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIGFmdGVyIHRoZSBhdXRvR3JvdyBjb25maWcgZ290IGNoYW5nZWRcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IHZhbHVlXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBvbGRWYWx1ZVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBhZnRlclNldEF1dG9Hcm93KHZhbHVlLCBvbGRWYWx1ZSkge1xuICAgICAgICBsZXQgbWUgPSB0aGlzO1xuXG4gICAgICAgIHZhbHVlICYmIG1lLnN5bmNBdXRvR3Jvd01vbml0b3IoKTtcblxuICAgICAgICAvLyBSZXN0b3JlIGFueSBjb25maWd1cmVkIGhlaWdodCBpZiBhdXRvR3JvdyB0dXJuZWQgb2ZmXG4gICAgICAgIGlmICghdmFsdWUpIHtcbiAgICAgICAgICAgIG1lLmFmdGVyU2V0SGVpZ2h0KG1lLl9oZWlnaHQpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgYWZ0ZXIgdGhlIGNvbHMgY29uZmlnIGdvdCBjaGFuZ2VkXG4gICAgICogQHBhcmFtIHtOdW1iZXJ8bnVsbH0gdmFsdWVcbiAgICAgKiBAcGFyYW0ge051bWJlcnxudWxsfSBvbGRWYWx1ZVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBhZnRlclNldENvbHModmFsdWUsIG9sZFZhbHVlKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlSW5wdXRFbEtleSgnY29scycsIHZhbHVlKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCBhZnRlciB0aGUgaW5wdXRUYWcgY29uZmlnIGdvdCBjaGFuZ2VkXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG9sZFZhbHVlXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIGFmdGVyU2V0SW5wdXRUYWcodmFsdWUsIG9sZFZhbHVlKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlSW5wdXRFbEtleSgndGFnJywgdmFsdWUpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIGFmdGVyIHRoZSBtb3VudGVkIGNvbmZpZyBnb3QgY2hhbmdlZFxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gdmFsdWVcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IG9sZFZhbHVlXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIGFmdGVyU2V0TW91bnRlZCh2YWx1ZSwgb2xkVmFsdWUpIHtcbiAgICAgICAgc3VwZXIuYWZ0ZXJTZXRNb3VudGVkKHZhbHVlLCBvbGRWYWx1ZSk7XG4gICAgICAgIHRoaXMuc3luY0F1dG9Hcm93TW9uaXRvcigpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIGFmdGVyIHRoZSByZXNpemFibGUgY29uZmlnIGdvdCBjaGFuZ2VkXG4gICAgICogQHBhcmFtIHtCb29sZWFufSB2YWx1ZVxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gb2xkVmFsdWVcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgYWZ0ZXJTZXRSZXNpemFibGUodmFsdWUsIG9sZFZhbHVlKSB7XG4gICAgICAgIGxldCBtZSAgICA9IHRoaXMsXG4gICAgICAgICAgICBzdHlsZSA9IHRoaXMuZ2V0SW5wdXRFbCgpLnN0eWxlO1xuXG4gICAgICAgIHN0eWxlLnJlc2l6ZSA9IHZhbHVlID8gbnVsbCA6ICdub25lJztcbiAgICAgICAgbWUudXBkYXRlKClcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgYWZ0ZXIgdGhlIHJvd3MgY29uZmlnIGdvdCBjaGFuZ2VkXG4gICAgICogQHBhcmFtIHtOdW1iZXJ8bnVsbH0gdmFsdWVcbiAgICAgKiBAcGFyYW0ge051bWJlcnxudWxsfSBvbGRWYWx1ZVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBhZnRlclNldFJvd3ModmFsdWUsIG9sZFZhbHVlKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlSW5wdXRFbEtleSgncm93cycsIHZhbHVlKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCBhZnRlciB0aGUgdmFsdWUgY29uZmlnIGdvdCBjaGFuZ2VkXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG9sZFZhbHVlXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIGFmdGVyU2V0VmFsdWUodmFsdWUsIG9sZFZhbHVlKSB7XG4gICAgICAgIGxldCBtZSAgICAgID0gdGhpcyxcbiAgICAgICAgICAgIGlucHV0RWwgPSBtZS5nZXRJbnB1dEVsKCk7XG5cbiAgICAgICAgaWYgKGlucHV0RWwpIHtcbiAgICAgICAgICAgIGlucHV0RWwudGV4dCA9IHZhbHVlXG4gICAgICAgIH1cblxuICAgICAgICBzdXBlci5hZnRlclNldFZhbHVlKHZhbHVlLCBvbGRWYWx1ZSk7XG5cbiAgICAgICAgaWYgKG1lLmF1dG9Hcm93ICYmIG1lLm1vdW50ZWQgJiYgbWUucmVhZE9ubHkpIHtcbiAgICAgICAgICAgIG1lLnRpbWVvdXQoNTApLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIE5lby5tYWluLkRvbUFjY2Vzcy5tb25pdG9yQXV0b0dyb3dIYW5kbGVyKHtcbiAgICAgICAgICAgICAgICAgICAgaWQgICAgICA6IGlucHV0RWwuaWQsXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvd0lkOiBtZS53aW5kb3dJZFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIGFmdGVyIHRoZSB3cmFwIGNvbmZpZyBnb3QgY2hhbmdlZFxuICAgICAqIEBwYXJhbSB7TnVtYmVyfG51bGx9IHZhbHVlXG4gICAgICogQHBhcmFtIHtOdW1iZXJ8bnVsbH0gb2xkVmFsdWVcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgYWZ0ZXJTZXRXcmFwKHZhbHVlLCBvbGRWYWx1ZSkge1xuICAgICAgICB0aGlzLmNoYW5nZUlucHV0RWxLZXkoJ3dyYXAnLCB2YWx1ZSlcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgdGhlIG5ldyB3cmFwIHZhbHVlIG1hdGNoZXMgYSB2YWx1ZSBvZiB0aGUgc3RhdGljIHdyYXBWYWx1ZXMgY29uZmlnXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG9sZFZhbHVlXG4gICAgICogQHJldHVybnMge1N0cmluZ30gdmFsdWVcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgYmVmb3JlU2V0V3JhcCh2YWx1ZSwgb2xkVmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmVmb3JlU2V0RW51bVZhbHVlKHZhbHVlLCBvbGRWYWx1ZSwgJ3dyYXAnLCAnd3JhcFZhbHVlcycpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKi9cbiAgICBhc3luYyBzeW5jQXV0b0dyb3dNb25pdG9yKCkge1xuICAgICAgICBsZXQgbWUgPSB0aGlzO1xuXG4gICAgICAgIGlmIChtZS5tb3VudGVkICYmIG1lLmF1dG9Hcm93KSB7XG4gICAgICAgICAgICAvLyBEZWxlZ2F0ZSBtb25pdG9yaW5nIG9mIHNpemVzIHRvIHRoZSBtYWluIHRocmVhZC5cbiAgICAgICAgICAgIE5lby5tYWluLkRvbUFjY2Vzcy5tb25pdG9yQXV0b0dyb3coe1xuICAgICAgICAgICAgICAgIGlkICAgICAgIDogbWUuZ2V0SW5wdXRFbElkKCksXG4gICAgICAgICAgICAgICAgYXV0b0dyb3cgOiBtZS5hdXRvR3JvdyxcbiAgICAgICAgICAgICAgICB3aW5kb3dJZCA6IG1lLndpbmRvd0lkXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBOZW8uc2V0dXBDbGFzcyhUZXh0QXJlYSk7XG4iLCJpbXBvcnQgQ29tcG9uZW50ICAgICAgIGZyb20gJy4vY29tcG9uZW50L0Jhc2UubWpzJztcbmltcG9ydCBkZWZpbmVDb21wb25lbnQgZnJvbSAnLi9kZWZpbmVDb21wb25lbnQubWpzJztcbmltcG9ydCB7aHRtbH0gICAgICAgICAgZnJvbSAnLi91dGlsL2h0bWwubWpzJztcbmltcG9ydCB1c2VDb25maWcgICAgICAgZnJvbSAnLi91c2VDb25maWcubWpzJztcbmltcG9ydCB1c2VFdmVudCAgICAgICAgZnJvbSAnLi91c2VFdmVudC5tanMnO1xuXG5leHBvcnQge0NvbXBvbmVudCwgZGVmaW5lQ29tcG9uZW50LCBodG1sLCB1c2VDb25maWcsIHVzZUV2ZW50fTtcbiIsImltcG9ydCBGdW5jdGlvbmFsQmFzZSBmcm9tICcuL2NvbXBvbmVudC9CYXNlLm1qcyc7XG5cbi8qKlxuICogRmFjdG9yeSBmdW5jdGlvbiB0byBjcmVhdGUgYSBmdW5jdGlvbmFsIGNvbXBvbmVudCBjbGFzcyBmcm9tIGEgc3BlY2lmaWNhdGlvbiBvYmplY3QuXG4gKiBUaGlzIGVuYWJsZXMgYSBcIkJlZ2lubmVyIE1vZGVcIiBmb3IgY3JlYXRpbmcgY29tcG9uZW50cyB3aXRob3V0IHdyaXRpbmcgYSBjbGFzcyxcbiAqIHdoaWxlIHN0aWxsIHByb3ZpZGluZyBhY2Nlc3MgdG8gdGhlIGZ1bGwgY2xhc3MtYmFzZWQgZmVhdHVyZSBzZXQuXG4gKlxuICogSXQncyBpbXBvcnRhbnQgdG8gdW5kZXJzdGFuZCB0aGUgdHdvIHdheXMgb2YgbWFuYWdpbmcgc3RhdGU6XG4gKlxuICogMS4gICoqTmFtZWQgQ29uZmlncyAoUHVibGljIEFQSSk6KiogRGVmaW5lZCBpbiB0aGUgYGNvbmZpZ2Agb2JqZWN0IChlLmcuLCBgdGV4dF9gKS5cbiAqICAgICAtICoqUHVycG9zZToqKiBEZWZpbmVzIHRoZSBjb21wb25lbnQncyBwdWJsaWMgQVBJIGZvciBleHRlcm5hbCBjb250cm9sLCBzaW1pbGFyIHRvIHByb3BzLlxuICogICAgIC0gKipVc2UgQ2FzZToqKiBGb3IgZGF0YSB0aGF0IGEgcGFyZW50IGNvbXBvbmVudCB3aWxsIHNldCBvciBjaGFuZ2UuXG4gKiAgICAgLSAqKkZlYXR1cmVzOioqIEludGVncmF0ZXMgd2l0aCB0aGUgZnVsbCBjb25maWcgc3lzdGVtIChlLmcuLCBgYWZ0ZXJTZXRUZXh0KClgIGhvb2tzKS5cbiAqXG4gKiAyLiAgKipgdXNlQ29uZmlnKClgIChJbnRlcm5hbCBTdGF0ZSk6KiogVXNlZCBpbnNpZGUgYGNyZWF0ZVZkb21gIG9yIG90aGVyIG1ldGhvZHMuXG4gKiAgICAgLSAqKlB1cnBvc2U6KiogTWFuYWdlcyBwcml2YXRlLCBlbmNhcHN1bGF0ZWQgc3RhdGUgdGhhdCBpcyBpbnRlcm5hbCB0byB0aGUgY29tcG9uZW50LlxuICogICAgIC0gKipVc2UgQ2FzZToqKiBGb3Igc3RhdGUgdGhhdCB0aGUgY29tcG9uZW50IG1hbmFnZXMgaXRzZWxmIGFuZCBpcyBub3QgY29udHJvbGxlZCBieSB0aGUgcGFyZW50LlxuICogICAgIC0gKipGZWF0dXJlczoqKiBQcm92aWRlcyBhIHNpbXBsZSwgY29uY2lzZSB3YXkgdG8gaGFuZGxlIGxvY2FsIHJlYWN0aXZlIHN0YXRlLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBzcGVjIC0gVGhlIHNwZWNpZmljYXRpb24gb2JqZWN0IGZvciB0aGUgY29tcG9uZW50LlxuICogQHJldHVybnMge05lby5mdW5jdGlvbmFsLmNvbXBvbmVudC5CYXNlfSBUaGUgZ2VuZXJhdGVkIGNvbXBvbmVudCBjbGFzcy5cbiAqXG4gKiBAZXhhbXBsZVxuICogaW1wb3J0IHsgZGVmaW5lQ29tcG9uZW50IH0gZnJvbSAnbmVvL2Z1bmN0aW9uYWwvZGVmaW5lQ29tcG9uZW50Lm1qcyc7XG4gKiBpbXBvcnQgeyB1c2VDb25maWcgfSAgICAgICBmcm9tICduZW8vZnVuY3Rpb25hbC91c2VDb25maWcubWpzJztcbiAqXG4gKiBjb25zdCBNeUNvbXBvbmVudCA9IGRlZmluZUNvbXBvbmVudCh7XG4gKiAgICAgLy8gMS4gRGVmaW5lIHRoZSBQdWJsaWMgQVBJIHZpYSB0aGUgYGNvbmZpZ2Agb2JqZWN0LlxuICogICAgIGNvbmZpZzoge1xuICogICAgICAgICBjbGFzc05hbWU6ICdNeUFwcC5NeUZ1bmN0aW9uYWxDb21wb25lbnQnLFxuICogICAgICAgICBudHlwZSAgICA6ICdteS1mdW5jdGlvbmFsLWNvbXBvbmVudCcsXG4gKlxuICogICAgICAgICAvLyBgdGV4dF9gIGlzIGEgTkFNRUQgQ09ORklHLiBJdCdzIHBhcnQgb2YgdGhlIGNvbXBvbmVudCdzIHB1YmxpYyBBUEkuXG4gKiAgICAgICAgIC8vIEEgcGFyZW50IGNhbiBjcmVhdGUgdGhpcyBjb21wb25lbnQgd2l0aCBhIGB0ZXh0YCBjb25maWcuXG4gKiAgICAgICAgIC8vIEl0IGlzIHJlYWN0aXZlIGFuZCB3aWxsIGdlbmVyYXRlIGBhZnRlclNldFRleHQoKWAgYW5kIGBiZWZvcmVTZXRUZXh0KClgIGhvb2tzLlxuICogICAgICAgICB0ZXh0XzogJ0hlbGxvIFdvcmxkJ1xuICogICAgIH0sXG4gKlxuICogICAgIC8vIDIuIERlZmluZSB0aGUgY29tcG9uZW50J3MgbG9naWMgYW5kIFZET00uXG4gKiAgICAgY3JlYXRlVmRvbShjb25maWcpIHtcbiAqICAgICAgICAgLy8gYHVzZUNvbmZpZ2AgY3JlYXRlcyBBTk9OWU1PVVMsIElOVEVSTkFMIFNUQVRFLlxuICogICAgICAgICAvLyBUaGUgYGNvdW50YCBzdGF0ZSBpcyBwcml2YXRlIHRvIHRoaXMgY29tcG9uZW50IGFuZCBjYW5ub3QgYmUgc2V0IGJ5IGEgcGFyZW50LlxuICogICAgICAgICBjb25zdCBbY291bnQsIHNldENvdW50XSA9IHVzZUNvbmZpZygwKTtcbiAqXG4gKiAgICAgICAgIHJldHVybiB7XG4gKiAgICAgICAgICAgICB0YWc6ICdkaXYnLFxuICogICAgICAgICAgICAgY246IFt7XG4gKiAgICAgICAgICAgICAgICAgdGFnOiAnaDEnLFxuICogICAgICAgICAgICAgICAgIC8vIEFjY2VzcyB0aGUgcHVibGljLCBuYW1lZCBjb25maWcgdmlhIHRoZSBgY29uZmlnYCBwYXJhbWV0ZXIuXG4gKiAgICAgICAgICAgICAgICAgdGV4dDogY29uZmlnLnRleHRcbiAqICAgICAgICAgICAgIH0sIHtcbiAqICAgICAgICAgICAgICAgICB0YWc6ICdwJyxcbiAqICAgICAgICAgICAgICAgICAvLyBBY2Nlc3MgdGhlIHByaXZhdGUsIGludGVybmFsIHN0YXRlIGRpcmVjdGx5LlxuICogICAgICAgICAgICAgICAgIHRleHQ6IGBZb3UgY2xpY2tlZCAke2NvdW50fSB0aW1lc2BcbiAqICAgICAgICAgICAgIH0sIHtcbiAqICAgICAgICAgICAgICAgICB0YWc6ICdidXR0b24nLFxuICogICAgICAgICAgICAgICAgIHRleHQ6ICdDbGljayBtZScsXG4gKiAgICAgICAgICAgICAgICAgLy8gVGhlIHNldHRlciBmcm9tIGB1c2VDb25maWdgIHVwZGF0ZXMgdGhlIGludGVybmFsIHN0YXRlLlxuICogICAgICAgICAgICAgICAgIG9uY2xpY2s6ICgpID0+IHNldENvdW50KGNvdW50ICsgMSlcbiAqICAgICAgICAgICAgIH1dXG4gKiAgICAgICAgIH07XG4gKiAgICAgfSxcbiAqXG4gKiAgICAgLy8gMy4gTGlmZWN5Y2xlIGhvb2tzIGZvciBuYW1lZCBjb25maWdzIHdvcmsgYXV0b21hdGljYWxseS5cbiAqICAgICBhZnRlclNldFRleHQobmV3VmFsdWUsIG9sZFZhbHVlKSB7XG4gKiAgICAgICAgIGNvbnNvbGUubG9nKGBUZXh0IGNoYW5nZWQgZnJvbSAnJHtvbGRWYWx1ZX0nIHRvICcke25ld1ZhbHVlfSdgKTtcbiAqICAgICB9XG4gKiB9KTtcbiAqXG4gKiAvLyBUaGUgcmV0dXJuZWQgTXlDb21wb25lbnQgaXMgYSBjbGFzcyBjb25zdHJ1Y3RvciB0aGF0IGNhbiBiZSB1c2VkIHdpdGggTmVvLmNyZWF0ZSgpXG4gKiAvLyBjb25zdCBpbnN0YW5jZSA9IE5lby5jcmVhdGUoTXlDb21wb25lbnQsIHtcbiAqIC8vICAgICB0ZXh0OiAnV2VsY29tZSB0byBOZW8ubWpzIScgLy8gU2V0IHRoZSBwdWJsaWMgY29uZmlnIG9uIGNyZWF0aW9uLlxuICogLy8gfSk7XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWZpbmVDb21wb25lbnQoc3BlYykge1xuICAgIGNvbnN0IGNvbmZpZ1NwZWMgPSBzcGVjLmNvbmZpZztcbiAgICBkZWxldGUgc3BlYy5jb25maWc7XG5cbiAgICBpZiAoIWNvbmZpZ1NwZWM/LmNsYXNzTmFtZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2RlZmluZUNvbXBvbmVudCByZXF1aXJlcyBhIGNvbmZpZyBvYmplY3Qgd2l0aCBhIGNsYXNzTmFtZS4nKTtcbiAgICB9XG5cbiAgICBjbGFzcyBGdW5jdGlvbmFsQ29tcG9uZW50IGV4dGVuZHMgRnVuY3Rpb25hbEJhc2Uge1xuICAgICAgICBzdGF0aWMgY29uZmlnID0ge1xuICAgICAgICAgICAgLi4uY29uZmlnU3BlY1xuICAgICAgICAgICAgLy8gV2UgY2FuIGFkZCBvdXIgb3duIGNvbmZpZ3VyYXRpb25zIGhlcmVcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIEFzc2lnbiBpbnN0YW5jZSBtZXRob2RzXG4gICAgT2JqZWN0LmVudHJpZXMoc3BlYykuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICAgIEZ1bmN0aW9uYWxDb21wb25lbnQucHJvdG90eXBlW2tleV0gPSB2YWx1ZVxuICAgIH0pO1xuXG4gICAgLy8gVG8gc3VwcG9ydCBtdWx0aXBsZSBlbnZzIChsaWtlIGBkZXZtb2RlYCwgYGRpc3QvZXNtYCwgYGRpc3QvcHJvZHVjdGlvbmAgaW4gcGFyYWxsZWwsXG4gICAgLy8gd2UgbXVzdCByZS1hc3NpZ24gRnVuY3Rpb25hbENvbXBvbmVudCB0byB0aGUgc2V0dXBDbGFzcygpIG91dHB1dC5cbiAgICBGdW5jdGlvbmFsQ29tcG9uZW50ID0gTmVvLnNldHVwQ2xhc3MoRnVuY3Rpb25hbENvbXBvbmVudCk7XG5cbiAgICByZXR1cm4gRnVuY3Rpb25hbENvbXBvbmVudFxufVxuXG5leHBvcnQgZGVmYXVsdCBkZWZpbmVDb21wb25lbnQ7XG4iLCJpbXBvcnQgQ29uZmlnICAgICAgICBmcm9tICcuLi9jb3JlL0NvbmZpZy5tanMnO1xuaW1wb3J0IEVmZmVjdE1hbmFnZXIgZnJvbSAnLi4vY29yZS9FZmZlY3RNYW5hZ2VyLm1qcyc7XG5cbmNvbnN0XG4gICAgaG9va0luZGV4U3ltYm9sID0gU3ltYm9sLmZvcignaG9va0luZGV4JyksXG4gICAgaG9va3NTeW1ib2wgICAgID0gU3ltYm9sLmZvcignaG9va3MnKTtcblxuLyoqXG4gKiBBIGhvb2sgZm9yIG1hbmFnaW5nIHJlYWN0aXZlIHN0YXRlIHdpdGhpbiBhIGZ1bmN0aW9uYWwgY29tcG9uZW50J3MgYGNyZWF0ZVZkb21gIG1ldGhvZC5cbiAqIEl0IG1pcnJvcnMgdGhlIGJlaGF2aW9yIG9mIFJlYWN0J3MgYHVzZVN0YXRlYCBidXQgaXMgcG93ZXJlZCBieSBgTmVvLmNvcmUuQ29uZmlnYCBmb3IgcmVhY3Rpdml0eS5cbiAqIEBwYXJhbSB7Kn0gaW5pdGlhbFZhbHVlIFRoZSBpbml0aWFsIHZhbHVlIGZvciB0aGUgc3RhdGUuXG4gKiBAcmV0dXJucyB7QXJyYXk8YW55Pn0gQSB0dXBsZSBjb250YWluaW5nIHRoZSBjdXJyZW50IHZhbHVlIGFuZCBhIHNldHRlciBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZUNvbmZpZyhpbml0aWFsVmFsdWUpIHtcbiAgICBFZmZlY3RNYW5hZ2VyLnBhdXNlKCk7XG5cbiAgICBjb25zdFxuICAgICAgICBlZmZlY3QgICAgPSBFZmZlY3RNYW5hZ2VyLmdldEFjdGl2ZUVmZmVjdCgpLFxuICAgICAgICBjb21wb25lbnQgPSBlZmZlY3QgJiYgTmVvLmdldENvbXBvbmVudChlZmZlY3QuY29tcG9uZW50SWQpO1xuXG4gICAgaWYgKCFjb21wb25lbnQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd1c2VDb25maWcgbXVzdCBiZSBjYWxsZWQgZnJvbSB3aXRoaW4gYSBmdW5jdGlvbmFsIGNvbXBvbmVudFxcJ3MgY3JlYXRlVmRvbSBtZXRob2QuJylcbiAgICB9XG5cbiAgICBjb25zdCBjdXJyZW50SW5kZXggPSBjb21wb25lbnRbaG9va0luZGV4U3ltYm9sXTtcblxuICAgIC8vIEluY3JlbWVudCB0aGUgaW5kZXggZm9yIHRoZSBuZXh0IGhvb2sgY2FsbCB3aXRoaW4gdGhlIHNhbWUgY29tcG9uZW50IHJlbmRlciBjeWNsZS5cbiAgICBjb21wb25lbnRbaG9va0luZGV4U3ltYm9sXSsrO1xuXG4gICAgLy8gSWYgdGhpcyBpcyB0aGUgZmlyc3QgdGltZSB0aGlzIGhvb2sgaXMgYmVpbmcgY2FsbGVkIGZvciB0aGlzIGNvbXBvbmVudCwgaW5pdGlhbGl6ZSBpdHMgc3RhdGUuXG4gICAgaWYgKCFjb21wb25lbnRbaG9va3NTeW1ib2xdW2N1cnJlbnRJbmRleF0pIHtcbiAgICAgICAgY29uc3QgY29uZmlnID0gbmV3IENvbmZpZyhpbml0aWFsVmFsdWUpO1xuXG4gICAgICAgIGNvbnN0IGN1c3RvbVNldHRlciA9IChuZXdWYWx1ZSkgPT4ge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBuZXdWYWx1ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIG5ld1ZhbHVlID0gbmV3VmFsdWUoY29uZmlnLmdldCgpKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uZmlnLnNldChuZXdWYWx1ZSlcbiAgICAgICAgfTtcblxuICAgICAgICBjb21wb25lbnRbaG9va3NTeW1ib2xdW2N1cnJlbnRJbmRleF0gPSBbY29uZmlnLCBjdXN0b21TZXR0ZXJdXG4gICAgfVxuXG4gICAgY29uc3QgW2NvbmZpZywgc2V0dGVyXSA9IGNvbXBvbmVudFtob29rc1N5bWJvbF1bY3VycmVudEluZGV4XTtcblxuICAgIEVmZmVjdE1hbmFnZXIucmVzdW1lKCk7XG5cbiAgICAvLyBDYWxsIGNvbmZpZy5nZXQoKSB0byBlbnN1cmUgdGhpcyBjb21wb25lbnQncyBlZmZlY3QgdHJhY2tzIHRoaXMgY29uZmlnIGFzIGEgZGVwZW5kZW5jeS5cbiAgICByZXR1cm4gW2NvbmZpZy5nZXQoKSwgc2V0dGVyXVxufVxuXG5leHBvcnQgZGVmYXVsdCB1c2VDb25maWc7XG4iLCJpbXBvcnQgRWZmZWN0TWFuYWdlciBmcm9tICcuLi9jb3JlL0VmZmVjdE1hbmFnZXIubWpzJztcblxuY29uc3QgcGVuZGluZ0RvbUV2ZW50c1N5bWJvbCA9IFN5bWJvbC5mb3IoJ3BlbmRpbmdEb21FdmVudHMnKTtcblxuLyoqXG4gKiBBIGhvb2sgZm9yIHJlZ2lzdGVyaW5nIERPTSBldmVudCBsaXN0ZW5lcnMgd2l0aGluIGEgZnVuY3Rpb25hbCBjb21wb25lbnQuXG4gKiBFdmVudCBsaXN0ZW5lcnMgcmVnaXN0ZXJlZCB2aWEgdGhpcyBob29rIHdpbGwgYmUgbWFuYWdlZCBieSBOZW8ubWpzJ3NcbiAqIGRlbGVnYXRlZCBET00gZXZlbnQgc3lzdGVtLCBlbnN1cmluZyBlZmZpY2llbnQgYW5kIHByb3BlciBsaWZlY3ljbGUgaGFuZGxpbmcuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50VHlwZSAtIFRoZSB0eXBlIG9mIERPTSBldmVudCB0byBsaXN0ZW4gZm9yIChlLmcuLCAnY2xpY2snLCAnaW5wdXQnKS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXIgLSBUaGUgZXZlbnQgaGFuZGxlciBmdW5jdGlvbi4gSXQgd2lsbCByZWNlaXZlIHRoZSBldmVudCBkYXRhIGFzIGl0cyBhcmd1bWVudC5cbiAqIEBwYXJhbSB7U3RyaW5nfSBbZGVsZWdhdGVdIC0gQW4gb3B0aW9uYWwgQ1NTIHNlbGVjdG9yIGZvciBldmVudCBkZWxlZ2F0aW9uLiBJZiBwcm92aWRlZCxcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZSBoYW5kbGVyIHdpbGwgb25seSBmaXJlIGlmIHRoZSBldmVudCB0YXJnZXQgbWF0Y2hlcyB0aGlzIHNlbGVjdG9yLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdXNlRXZlbnQoZXZlbnRUeXBlLCBoYW5kbGVyLCBkZWxlZ2F0ZSkge1xuICAgIGNvbnN0XG4gICAgICAgIGFjdGl2ZUVmZmVjdCA9IEVmZmVjdE1hbmFnZXIuZ2V0QWN0aXZlRWZmZWN0KCksXG4gICAgICAgIGNvbXBvbmVudElkICA9IGFjdGl2ZUVmZmVjdD8uY29tcG9uZW50SWQ7XG5cbiAgICBpZiAoIWNvbXBvbmVudElkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcigndXNlRXZlbnQgbXVzdCBiZSBjYWxsZWQgZnJvbSB3aXRoaW4gYSBmdW5jdGlvbmFsIGNvbXBvbmVudFxcJ3MgY3JlYXRlVmRvbSBtZXRob2QuJylcbiAgICB9XG5cbiAgICBFZmZlY3RNYW5hZ2VyLnBhdXNlKCk7XG4gICAgY29uc3QgY29tcG9uZW50ID0gTmVvLmdldENvbXBvbmVudChjb21wb25lbnRJZCk7XG4gICAgRWZmZWN0TWFuYWdlci5yZXN1bWUoKTtcblxuICAgIGlmICghY29tcG9uZW50KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQ29tcG9uZW50IHdpdGggaWQgJHtjb21wb25lbnRJZH0gbm90IGZvdW5kIGZvciB1c2VFdmVudCBob29rLmApO1xuICAgIH1cblxuICAgIC8vIEVuc3VyZSBwZW5kaW5nRG9tRXZlbnRzU3ltYm9sIGV4aXN0cyBvbiB0aGUgY29tcG9uZW50IGluc3RhbmNlXG4gICAgY29tcG9uZW50W3BlbmRpbmdEb21FdmVudHNTeW1ib2xdID8/PSBbXTtcblxuICAgIC8vIEFkZCB0aGUgZXZlbnQgbGlzdGVuZXIgY29uZmlndXJhdGlvbiB0byB0aGUgY29tcG9uZW50J3MgcGVuZGluZyBsaXN0XG4gICAgY29tcG9uZW50W3BlbmRpbmdEb21FdmVudHNTeW1ib2xdLnB1c2goe1xuICAgICAgICBbZXZlbnRUeXBlXTogaGFuZGxlcixcbiAgICAgICAgZGVsZWdhdGUsXG4gICAgICAgIHNjb3BlICAgICAgOiBjb21wb25lbnQgLy8gVGhlIGNvbXBvbmVudCBpbnN0YW5jZSBpdHNlbGYgd2lsbCBiZSB0aGUgc2NvcGVcbiAgICB9KVxufVxuXG5leHBvcnQgZGVmYXVsdCB1c2VFdmVudDtcbiIsImltcG9ydCBCdXR0b24gICAgZnJvbSAnLi4vYnV0dG9uL0Jhc2UubWpzJztcbmltcG9ydCBDb21wb25lbnQgZnJvbSAnLi4vY29tcG9uZW50L0Jhc2UubWpzJztcbmltcG9ydCBDb250YWluZXIgZnJvbSAnLi4vY29udGFpbmVyL0Jhc2UubWpzJztcbmltcG9ydCBMYWJlbCAgICAgZnJvbSAnLi4vY29tcG9uZW50L0xhYmVsLm1qcyc7XG5pbXBvcnQgTmVvQXJyYXkgIGZyb20gJy4uL3V0aWwvQXJyYXkubWpzJztcblxuLyoqXG4gKiBAY2xhc3MgTmVvLnRvb2xiYXIuQmFzZVxuICogQGV4dGVuZHMgTmVvLmNvbnRhaW5lci5CYXNlXG4gKi9cbmNsYXNzIFRvb2xiYXIgZXh0ZW5kcyBDb250YWluZXIge1xuICAgIC8qKlxuICAgICAqIFZhbGlkIHZhbHVlcyBmb3IgZG9ja1xuICAgICAqIEBtZW1iZXIge1N0cmluZ1tdfSBkb2NrUG9zaXRpb25zPVsndG9wJywncmlnaHQnLCdib3R0b20nLCdsZWZ0JywgbnVsbF1cbiAgICAgKiBAc3RhdGljXG4gICAgICovXG4gICAgc3RhdGljIGRvY2tQb3NpdGlvbnMgPSBbJ3RvcCcsICdyaWdodCcsICdib3R0b20nLCAnbGVmdCcsIG51bGxdXG5cbiAgICBzdGF0aWMgY29uZmlnID0ge1xuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfSBjbGFzc05hbWU9J05lby50b29sYmFyLkJhc2UnXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIGNsYXNzTmFtZTogJ05lby50b29sYmFyLkJhc2UnLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfSBudHlwZT0ndG9vbGJhcidcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgbnR5cGU6ICd0b29sYmFyJyxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ1tdfSBiYXNlQ2xzPVsnbmVvLXRvb2xiYXInXVxuICAgICAgICAgKi9cbiAgICAgICAgYmFzZUNsczogWyduZW8tdG9vbGJhciddLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfG51bGx9IGRvY2tfPW51bGxcbiAgICAgICAgICogQHJlYWN0aXZlXG4gICAgICAgICAqL1xuICAgICAgICBkb2NrXzogbnVsbCxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge09iamVjdH0gaXRlbURlZmF1bHRzPXtudHlwZTonYnV0dG9uJ31cbiAgICAgICAgICogQHJlYWN0aXZlXG4gICAgICAgICAqL1xuICAgICAgICBpdGVtRGVmYXVsdHM6IHtcbiAgICAgICAgICAgIG50eXBlOiAnYnV0dG9uJ1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7T2JqZWN0fSBsYXlvdXQ9e250eXBlOidmbGV4Ym94JyxhbGlnbjonY2VudGVyJyxkaXJlY3Rpb246ICdyb3cnLCBwYWNrOidzdGFydCd9XG4gICAgICAgICAqIEByZWFjdGl2ZVxuICAgICAgICAgKi9cbiAgICAgICAgbGF5b3V0OiB7XG4gICAgICAgICAgICBudHlwZSAgICA6ICdmbGV4Ym94JyxcbiAgICAgICAgICAgIGFsaWduICAgIDogJ2NlbnRlcicsXG4gICAgICAgICAgICBkaXJlY3Rpb246ICdyb3cnLFxuICAgICAgICAgICAgcGFjayAgICAgOiAnc3RhcnQnXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgYWZ0ZXIgdGhlIGRvY2sgY29uZmlnIGdvdCBjaGFuZ2VkXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG9sZFZhbHVlXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIGFmdGVyU2V0RG9jayh2YWx1ZSwgb2xkVmFsdWUpIHtcbiAgICAgICAgaWYgKCF2YWx1ZSAmJiAhb2xkVmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IG1lICAgICAgICAgICAgPSB0aGlzLFxuICAgICAgICAgICAge2Nsc30gICAgICAgICA9IG1lLFxuICAgICAgICAgICAgZG9ja1Bvc2l0aW9ucyA9IG1lLmdldFN0YXRpY0NvbmZpZygnZG9ja1Bvc2l0aW9ucycpLFxuICAgICAgICAgICAgbGF5b3V0Q29uZmlnICA9IG1lLmdldExheW91dENvbmZpZygpO1xuXG4gICAgICAgIGRvY2tQb3NpdGlvbnMuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICAgICAga2V5ICE9PSBudWxsICYmIE5lb0FycmF5LnRvZ2dsZShjbHMsICduZW8tZG9jay0nICsga2V5LCBrZXkgPT09IHZhbHVlKVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoIW1lLmxheW91dCkge1xuICAgICAgICAgICAgbGF5b3V0Q29uZmlnLm50eXBlID0gJ2ZsZXhib3gnO1xuICAgICAgICAgICAgbWUuc2V0KHtjbHMsIGxheW91dDogbGF5b3V0Q29uZmlnfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG1lLmxheW91dC5zZXQobGF5b3V0Q29uZmlnKTtcbiAgICAgICAgICAgIG1lLmNscyA9IGNscztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiB0aGUgbmV3IGRvY2sgcG9zaXRpb24gbWF0Y2hlcyBhIHZhbHVlIG9mIHRoZSBzdGF0aWMgZG9ja1Bvc2l0aW9ucyBjb25maWdcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdmFsdWVcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gb2xkVmFsdWVcbiAgICAgKiBAcmV0dXJucyB7U3RyaW5nfSB2YWx1ZVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBiZWZvcmVTZXREb2NrKHZhbHVlLCBvbGRWYWx1ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5iZWZvcmVTZXRFbnVtVmFsdWUodmFsdWUsIG9sZFZhbHVlLCAnZG9jaycsICdkb2NrUG9zaXRpb25zJylcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqL1xuICAgIGNyZWF0ZUl0ZW1zKCkge1xuICAgICAgICBsZXQgaXRlbXMgPSB0aGlzLl9pdGVtcztcblxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShpdGVtcykpIHtcbiAgICAgICAgICAgIHRoaXMuX2l0ZW1zID0gaXRlbXMubWFwKGl0ZW0gPT4gdGhpcy5yZXBsYWNlU3BhY2VyKGl0ZW0pKVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHN1cGVyLmNyZWF0ZUl0ZW1zKClcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbGF5b3V0IGNvbmZpZyBkZXBlbmRpbmcgb24gdGhpcy5kb2NrXG4gICAgICogQHJldHVybnMge09iamVjdH0gbGF5b3V0Q29uZmlnXG4gICAgICovXG4gICAgZ2V0TGF5b3V0Q29uZmlnKCkge1xuICAgICAgICBsZXQgbWUgPSB0aGlzLFxuICAgICAgICAgICAgbGF5b3V0Q29uZmlnO1xuXG4gICAgICAgIGlmIChtZS5kb2NrKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKG1lLmRvY2spIHtcbiAgICAgICAgICAgICAgICBjYXNlICdib3R0b20nOlxuICAgICAgICAgICAgICAgIGNhc2UgJ3RvcCc6XG4gICAgICAgICAgICAgICAgICAgIGxheW91dENvbmZpZyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsaWduICAgIDogJ2NlbnRlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb246ICdyb3cnLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFjayAgICAgOiAnc3RhcnQnXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgY2FzZSAnbGVmdCc6XG4gICAgICAgICAgICAgICAgICAgIGxheW91dENvbmZpZyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsaWduICAgIDogJ2NlbnRlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb246ICdjb2x1bW4tcmV2ZXJzZScsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWNrICAgICA6ICdzdGFydCdcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICBjYXNlICdyaWdodCc6XG4gICAgICAgICAgICAgICAgICAgIGxheW91dENvbmZpZyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsaWduICAgIDogJ2NlbnRlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb246ICdjb2x1bW4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFjayAgICAgOiAnc3RhcnQnXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbGF5b3V0Q29uZmlnIHx8IG1lLmxheW91dFxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEluc2VydHMgYW4gaXRlbSBvciBhcnJheSBvZiBpdGVtcyBhdCBhIHNwZWNpZmljIGluZGV4XG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R9IGl0ZW1cbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtzaWxlbnQ9ZmFsc2VdXG4gICAgICogQHJldHVybnMge05lby5jb21wb25lbnQuQmFzZXxOZW8uY29tcG9uZW50LkJhc2VbXX1cbiAgICAgKi9cbiAgICBpbnNlcnQoaW5kZXgsIGl0ZW0sIHNpbGVudD1mYWxzZSkge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShpdGVtKSkge1xuICAgICAgICAgICAgaXRlbSA9IGl0ZW0ubWFwKGl0ZW0gPT4gdGhpcy5yZXBsYWNlU3BhY2VyKGl0ZW0pKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaXRlbSA9IHRoaXMucmVwbGFjZVNwYWNlcihpdGVtKVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHN1cGVyLmluc2VydChpbmRleCwgaXRlbSwgc2lsZW50KVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fFN0cmluZ30gaXRlbVxuICAgICAqIEByZXR1cm5zIHtBcnJheXxPYmplY3R9XG4gICAgICovXG4gICAgcmVwbGFjZVNwYWNlcihpdGVtKSB7XG4gICAgICAgIHJldHVybiBpdGVtID09PSAnLT4nID8ge21vZHVsZTogQ29tcG9uZW50LCBmbGV4OiAxfSA6IGl0ZW1cbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IE5lby5zZXR1cENsYXNzKFRvb2xiYXIpO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==