"use strict";
(self["webpackChunkneo_mjs"] = self["webpackChunkneo_mjs"] || []).push([["vendors-apps_email_app_mjs-src_toolbar_Base_mjs"],{

/***/ "./apps/email/app.mjs":
/*!****************************!*\
  !*** ./apps/email/app.mjs ***!
  \****************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   onStart: () => (/* binding */ onStart)
/* harmony export */ });
/* harmony import */ var _view_Viewport_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./view/Viewport.mjs */ "./apps/email/view/Viewport.mjs");


const onStart = () => Neo.app({
    mainView: _view_Viewport_mjs__WEBPACK_IMPORTED_MODULE_0__["default"],
    name    : 'Email'
});


/***/ }),

/***/ "./apps/email/model/Email.mjs":
/*!************************************!*\
  !*** ./apps/email/model/Email.mjs ***!
  \************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _src_data_Model_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../src/data/Model.mjs */ "./src/data/Model.mjs");


/**
 * @class Email.model.Email
 * @extends Neo.data.Model
 */
class Email extends _src_data_Model_mjs__WEBPACK_IMPORTED_MODULE_0__["default"] {
    static config = {
        /**
         * @member {String} className='Email.model.Email'
         * @protected
         */
        className: 'Email.model.Email',
        /**
         * @member {Object[]} fields
         */
        fields: [{
            name: 'id',
            type: 'Int'
        }, {
            name: 'content',
            type: 'String'
        }, {
            name: 'dateSent',
            type: 'String'
        }, {
            name: 'recipients',
            type: 'Array'
        }, {
            name: 'sender',
            type: 'String'
        }, {
            name: 'title',
            type: 'String'
        }]
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(Email));


/***/ }),

/***/ "./apps/email/store/Emails.mjs":
/*!*************************************!*\
  !*** ./apps/email/store/Emails.mjs ***!
  \*************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _model_Email_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../model/Email.mjs */ "./apps/email/model/Email.mjs");
/* harmony import */ var _src_data_Store_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../src/data/Store.mjs */ "./src/data/Store.mjs");



/**
 * @class Email.store.Emails
 * @extends Neo.data.Store
 */
class Emails extends _src_data_Store_mjs__WEBPACK_IMPORTED_MODULE_1__["default"] {
    static config = {
        /**
         * @member {String} className='Email.store.Emails'
         * @protected
         */
        className: 'Email.store.Emails',
        /**
         * @member {Neo.data.Model} model=Email
         */
        model: _model_Email_mjs__WEBPACK_IMPORTED_MODULE_0__["default"],
        /**
         * @member {Object[]} data
         */
        data: [
            {id: 1, sender: 'John Doe', title: 'Hello World!', content: 'This is the first email.', dateSent: '2025-07-15T10:00:00Z'},
            {id: 2, sender: 'Jane Smith', title: 'Re: Project Update', content: 'Here is the project update you requested.', dateSent: '2025-07-15T11:30:00Z'},
            {id: 3, sender: 'Peter Jones', title: 'Lunch tomorrow?', content: 'Are we still on for lunch tomorrow at 12:30?', dateSent: '2025-07-15T12:15:00Z'},
            {id: 4, sender: 'Mary Williams', title: 'Your order has shipped', content: 'Your order #12345 has shipped and will arrive in 3-5 business days.', dateSent: '2025-07-14T15:45:00Z'},
            {id: 5, sender: 'David Brown', title: 'Quick question', content: 'I have a quick question about the new feature.', dateSent: '2025-07-14T09:20:00Z'}
        ]
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(Emails));


/***/ }),

/***/ "./apps/email/view/ComposeView.mjs":
/*!*****************************************!*\
  !*** ./apps/email/view/ComposeView.mjs ***!
  \*****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _src_button_Base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../src/button/Base.mjs */ "./src/button/Base.mjs");
/* harmony import */ var _src_form_field_Text_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../src/form/field/Text.mjs */ "./src/form/field/Text.mjs");
/* harmony import */ var _src_form_field_TextArea_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../src/form/field/TextArea.mjs */ "./src/form/field/TextArea.mjs");
/* harmony import */ var _src_functional_export_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../src/functional/_export.mjs */ "./src/functional/_export.mjs");





/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_src_functional_export_mjs__WEBPACK_IMPORTED_MODULE_3__.defineComponent)({
    config: {
        className: 'Email.view.ComposeView',
        cls      : ['email-compose-view']
    },
    createVdom({onClose}) {
        const fieldStyle = {
            marginBottom: '10px'
        };

        return {
            cn: [{
                module    : _src_form_field_Text_mjs__WEBPACK_IMPORTED_MODULE_1__["default"],
                id        : 'compose-to',
                labelText : 'To:',
                labelWidth: 80,
                style     : fieldStyle
            }, {
                module    : _src_form_field_Text_mjs__WEBPACK_IMPORTED_MODULE_1__["default"],
                id        : 'compose-subject',
                labelText : 'Subject:',
                labelWidth: 80,
                style     : fieldStyle
            }, {
                module   : _src_form_field_TextArea_mjs__WEBPACK_IMPORTED_MODULE_2__["default"],
                id       : 'compose-body',
                labelText: 'Body:',
                height   : 200,
                style    : fieldStyle
            }, {
                module : _src_button_Base_mjs__WEBPACK_IMPORTED_MODULE_0__["default"],
                handler: onClose,
                id     : 'compose-close-button',
                style  : {alignSelf: 'flex-end'},
                text   : 'Close'
            }]
        }
    }
}));


/***/ }),

/***/ "./apps/email/view/MainView.mjs":
/*!**************************************!*\
  !*** ./apps/email/view/MainView.mjs ***!
  \**************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _src_button_Base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../src/button/Base.mjs */ "./src/button/Base.mjs");
/* harmony import */ var _ComposeView_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ComposeView.mjs */ "./apps/email/view/ComposeView.mjs");
/* harmony import */ var _store_Emails_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../store/Emails.mjs */ "./apps/email/store/Emails.mjs");
/* harmony import */ var _src_grid_Container_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../src/grid/Container.mjs */ "./src/grid/Container.mjs");
/* harmony import */ var _src_selection_grid_RowModel_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../src/selection/grid/RowModel.mjs */ "./src/selection/grid/RowModel.mjs");
/* harmony import */ var _src_functional_export_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../src/functional/_export.mjs */ "./src/functional/_export.mjs");







/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_src_functional_export_mjs__WEBPACK_IMPORTED_MODULE_5__.defineComponent)({
    config: {
        className: 'Email.view.MainView',
        cls      : ['email-main-view']
    },
    createVdom() {
        const
            [isComposing,   setIsComposing]   = (0,_src_functional_export_mjs__WEBPACK_IMPORTED_MODULE_5__.useConfig)(false),
            [selectedEmail, setSelectedEmail] = (0,_src_functional_export_mjs__WEBPACK_IMPORTED_MODULE_5__.useConfig)(null);

        const paneStyle = {
            border : '1px solid #c0c0c0',
            margin : '10px',
            padding: '10px'
        };

        const onComposeClick = () => {
            setIsComposing(true)
        };

        const onCloseCompose = () => {
            setIsComposing(false);
        };

        const onSelectionChange = ({records}) => {
            setSelectedEmail(records[0] || null)
        };

        return {
            cn: [{
                style: {...paneStyle, flex: '0 0 200px'},
                cn: [{
                    module : _src_button_Base_mjs__WEBPACK_IMPORTED_MODULE_0__["default"],
                    handler: onComposeClick,
                    id     : 'compose-button',
                    text   : 'Compose',
                    style  : {marginBottom: '10px', width: '100%'}
                }, {
                    text : 'Folders'
                }]
            }, {
                style: {...paneStyle, flex: '1 1 600px', padding: '0'},
                cn: [{
                    module      : _src_grid_Container_mjs__WEBPACK_IMPORTED_MODULE_3__["default"],
                    id          : 'email-grid',
                    store       : _store_Emails_mjs__WEBPACK_IMPORTED_MODULE_2__["default"],
                    wrapperStyle: {height: '100%', width: '100%'},
                    body: {
                        selectionModel: {
                            module   : _src_selection_grid_RowModel_mjs__WEBPACK_IMPORTED_MODULE_4__["default"],
                            listeners: {selectionChange: onSelectionChange}
                        }
                    },
                    columns: [
                        {dataField: 'sender', text: 'Sender', width: 150},
                        {dataField: 'title',  text: 'Title',  flex: 1, minWidth: 200},
                        {
                            cellAlign: 'right',
                            dataField: 'dateSent',
                            renderer : (({value}) => new Date(value).toLocaleDateString()),
                            text     : 'Date',
                            width    : 100
                        }
                    ]
                }]
            }, {
                style: {...paneStyle, flex: '1 1 600px'},
                cn: selectedEmail ? [
                    {tag: 'h2',  text: selectedEmail.title},
                    {tag: 'p',   text: `From: ${selectedEmail.sender}`},
                    {tag: 'div', style: {marginTop: '10px'}, text: selectedEmail.content}
                ] : [{
                    text: 'Select an email to read'
                }]
            }, isComposing && {
                module : _ComposeView_mjs__WEBPACK_IMPORTED_MODULE_1__["default"],
                id     : 'compose-view',
                onClose: onCloseCompose
            }]
        }
    }
}));


/***/ }),

/***/ "./apps/email/view/Viewport.mjs":
/*!**************************************!*\
  !*** ./apps/email/view/Viewport.mjs ***!
  \**************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _src_container_Viewport_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../src/container/Viewport.mjs */ "./src/container/Viewport.mjs");
/* harmony import */ var _MainView_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./MainView.mjs */ "./apps/email/view/MainView.mjs");



/**
 * @class Email.view.Viewport
 * @extends Neo.container.Viewport
 */
class Viewport extends _src_container_Viewport_mjs__WEBPACK_IMPORTED_MODULE_0__["default"] {
    static config = {
        /**
         * @member {String} className='Email.view.Viewport'
         * @protected
         */
        className: 'Email.view.Viewport',
        /**
         * @member {Object} layout={ntype:'fit'}
         */
        layout: {ntype: 'fit'},
        /**
         * @member {Object[]} items
         */
        items: [{
            module: _MainView_mjs__WEBPACK_IMPORTED_MODULE_1__["default"]
        }]
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(Viewport));


/***/ }),

/***/ "./src/component/Label.mjs":
/*!*********************************!*\
  !*** ./src/component/Label.mjs ***!
  \*********************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _Base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Base.mjs */ "./src/component/Base.mjs");


/**
 * Convenience class to render a label with a text
 * @class Neo.component.Label
 * @extends Neo.component.Base
 */
class Label extends _Base_mjs__WEBPACK_IMPORTED_MODULE_0__["default"] {
    static config = {
        /**
         * @member {String} className='Neo.component.Label'
         * @protected
         */
        className: 'Neo.component.Label',
        /**
         * @member {String} ntype='label'
         * @protected
         */
        ntype: 'label',
        /**
         * @member {String[]} baseCls=['neo-label']
         */
        baseCls: ['neo-label'],
        /**
         * @member {String} tag='label'
         * @protected
         * @reactive
         */
        tag: 'label'
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(Label));


/***/ }),

/***/ "./src/container/Viewport.mjs":
/*!************************************!*\
  !*** ./src/container/Viewport.mjs ***!
  \************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _Base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Base.mjs */ "./src/container/Base.mjs");


/**
 * @class Neo.container.Viewport
 * @extends Neo.container.Base
 */
class Viewport extends _Base_mjs__WEBPACK_IMPORTED_MODULE_0__["default"] {
    static config = {
        /**
         * @member {String} className='Neo.container.Viewport'
         * @protected
         */
        className: 'Neo.container.Viewport',
        /**
         * @member {String} ntype='viewport'
         * @protected
         */
        ntype: 'viewport',
        /**
         * true applies 'neo-body-viewport' to the document.body
         * @member {Boolean} applyBodyCls=true
         */
        applyBodyCls: true,
        /**
         * Assuming that a Viewport is the top level view of your app, and you want to mount it right away.
         * Could be without any items. Use false otherwise.
         * @member {Boolean} autoMount=true
         */
        autoMount: true,
        /**
         * @member {String[]} baseCls=['neo-viewport']
         */
        baseCls: ['neo-viewport'],
        /**
         * true applies a main.addon.ResizeObserver and fires a custom resize event
         * which other instances can subscribe to.
         * @member {Boolean} monitorSize_=false
         * @reactive
         */
        monitorSize_: false
    }

    /**
     * Triggered after the mounted config got changed
     * @param {Boolean} value
     * @param {Boolean} oldValue
     * @protected
     */
    afterSetMounted(value, oldValue) {
        super.afterSetMounted(value, oldValue);

        let me = this;

        if (value && me.monitorSize) {
            me.addDomListeners([{resize: me.onDomResize, scope: me}])
        }
    }

    /**
     *
     */
    onConstructed() {
        super.onConstructed();

        let {appName, windowId} = this;

        this.applyBodyCls && Neo.main.DomAccess.applyBodyCls({
            appName,
            cls: ['neo-body-viewport'],
            windowId
        })
    }

    /**
     * @param {Object} data
     */
    onDomResize(data) {
        this.fire('resize', data)
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(Viewport));


/***/ }),

/***/ "./src/form/field/TextArea.mjs":
/*!*************************************!*\
  !*** ./src/form/field/TextArea.mjs ***!
  \*************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _Text_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Text.mjs */ "./src/form/field/Text.mjs");


/**
 *
 * @class Neo.form.field.TextArea
 * @extends Neo.form.field.Text
 * @abstract
 */
class TextArea extends _Text_mjs__WEBPACK_IMPORTED_MODULE_0__["default"] {
    /**
     * Valid values for wrap
     * @member {String[]} wrapValues=['hard', 'off', 'soft', null]
     * @protected
     * @static
     */
    static wrapValues = ['hard', 'off', 'soft', null]

    static config = {
        /**
         * @member {String} className='Neo.form.field.TextArea'
         * @protected
         */
        className: 'Neo.form.field.TextArea',
        /**
         * @member {String} ntype='textarea'
         * @protected
         */
        ntype: 'textarea',
        /**
         * Set this to `true` to have the text area grow and shrink to accommodate
         * any height of text. Bounds can be set using the `minHeight` and `maxHeight` settings.
         * @member {Boolean} autoGrow=false
         */
        autoGrow_: false,
        /**
         * @member {String[]} baseCls=['neo-textarea','neo-textfield']
         */
        baseCls: ['neo-textarea', 'neo-textfield'],
        /**
         * True shows a clear trigger in case the field has a non-empty value.
         * @member {Boolean} clearable=false
         * @reactive
         */
        clearable: false,
        /**
         * The visible width of the text control, in average character widths.
         * If it is specified, it must be a positive integer.
         * If it is not specified, the default value is 20.
         * @member {Number|null} cols_=null
         * @reactive
         */
        cols_: null,
        /**
         * @member {String} inputTag_='textarea'
         * @reactive
         */
        inputTag_: 'textarea',
        /**
         * Disabling to set a type for the textarea tag
         * See: inputTag_
         * @member {String|null} inputType=null
         * @protected
         * @reactive
         */
        inputType: null,
        /**
         * Use false to disable the browsers default resizing feature
         * @member {Boolean} resizable_=false
         * @reactive
         */
        resizable_: false,
        /**
         * An integer > 0 or null
         * @member {Number|null} rows_=3
         * @reactive
         */
        rows_: 3,
        /**
         * Indicates how the control wraps text. Possible values are: hard, soft, off
         * If this attribute is not specified, soft is its default value.
         * https://developer.mozilla.org/en-US/docs/Web/HTML/Element/textarea
         * @member {String|null} wrap_=null
         * @reactive
         */
        wrap_: null
    }

    /**
     * Triggered after the autoGrow config got changed
     * @param {Boolean} value
     * @param {Boolean} oldValue
     * @protected
     */
    afterSetAutoGrow(value, oldValue) {
        let me = this;

        value && me.syncAutoGrowMonitor();

        // Restore any configured height if autoGrow turned off
        if (!value) {
            me.afterSetHeight(me._height)
        }
    }

    /**
     * Triggered after the cols config got changed
     * @param {Number|null} value
     * @param {Number|null} oldValue
     * @protected
     */
    afterSetCols(value, oldValue) {
        this.changeInputElKey('cols', value)
    }

    /**
     * Triggered after the inputTag config got changed
     * @param {String} value
     * @param {String} oldValue
     * @protected
     */
    afterSetInputTag(value, oldValue) {
        this.changeInputElKey('tag', value)
    }

    /**
     * Triggered after the mounted config got changed
     * @param {Boolean} value
     * @param {Boolean} oldValue
     * @protected
     */
    afterSetMounted(value, oldValue) {
        super.afterSetMounted(value, oldValue);
        this.syncAutoGrowMonitor()
    }

    /**
     * Triggered after the resizable config got changed
     * @param {Boolean} value
     * @param {Boolean} oldValue
     * @protected
     */
    afterSetResizable(value, oldValue) {
        let me    = this,
            style = this.getInputEl().style;

        style.resize = value ? null : 'none';
        me.update()
    }

    /**
     * Triggered after the rows config got changed
     * @param {Number|null} value
     * @param {Number|null} oldValue
     * @protected
     */
    afterSetRows(value, oldValue) {
        this.changeInputElKey('rows', value)
    }

    /**
     * Triggered after the value config got changed
     * @param {String} value
     * @param {String} oldValue
     * @protected
     */
    afterSetValue(value, oldValue) {
        let me      = this,
            inputEl = me.getInputEl();

        if (inputEl) {
            inputEl.text = value
        }

        super.afterSetValue(value, oldValue);

        if (me.autoGrow && me.mounted && me.readOnly) {
            me.timeout(50).then(() => {
                Neo.main.DomAccess.monitorAutoGrowHandler({
                    appName : me.appName,
                    id      : inputEl.id,
                    windowId: me.windowId
                })
            })
        }
    }

    /**
     * Triggered after the wrap config got changed
     * @param {Number|null} value
     * @param {Number|null} oldValue
     * @protected
     */
    afterSetWrap(value, oldValue) {
        this.changeInputElKey('wrap', value)
    }

    /**
     * Checks if the new wrap value matches a value of the static wrapValues config
     * @param {String} value
     * @param {String} oldValue
     * @returns {String} value
     * @protected
     */
    beforeSetWrap(value, oldValue) {
        return this.beforeSetEnumValue(value, oldValue, 'wrap', 'wrapValues')
    }

    /**
     *
     */
    async syncAutoGrowMonitor() {
        let me = this;

        if (me.mounted && me.autoGrow) {
            // Delegate monitoring of sizes to the main thread.
            Neo.main.DomAccess.monitorAutoGrow({
                appName  : me.appName,
                id       : me.getInputElId(),
                autoGrow : me.autoGrow
            })
        }
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(TextArea));


/***/ }),

/***/ "./src/functional/_export.mjs":
/*!************************************!*\
  !*** ./src/functional/_export.mjs ***!
  \************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Component: () => (/* reexport safe */ _component_Base_mjs__WEBPACK_IMPORTED_MODULE_0__["default"]),
/* harmony export */   defineComponent: () => (/* reexport safe */ _defineComponent_mjs__WEBPACK_IMPORTED_MODULE_1__["default"]),
/* harmony export */   useConfig: () => (/* reexport safe */ _useConfig_mjs__WEBPACK_IMPORTED_MODULE_2__["default"]),
/* harmony export */   useEvent: () => (/* reexport safe */ _useEvent_mjs__WEBPACK_IMPORTED_MODULE_3__["default"])
/* harmony export */ });
/* harmony import */ var _component_Base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./component/Base.mjs */ "./src/functional/component/Base.mjs");
/* harmony import */ var _defineComponent_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./defineComponent.mjs */ "./src/functional/defineComponent.mjs");
/* harmony import */ var _useConfig_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useConfig.mjs */ "./src/functional/useConfig.mjs");
/* harmony import */ var _useEvent_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./useEvent.mjs */ "./src/functional/useEvent.mjs");








/***/ }),

/***/ "./src/functional/defineComponent.mjs":
/*!********************************************!*\
  !*** ./src/functional/defineComponent.mjs ***!
  \********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   defineComponent: () => (/* binding */ defineComponent)
/* harmony export */ });
/* harmony import */ var _component_Base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./component/Base.mjs */ "./src/functional/component/Base.mjs");


/**
 * Factory function to create a functional component class from a specification object.
 * This enables a "Beginner Mode" for creating components without writing a class,
 * while still providing access to the full class-based feature set.
 *
 * It's important to understand the two ways of managing state:
 *
 * 1.  **Named Configs (Public API):** Defined in the `config` object (e.g., `text_`).
 *     - **Purpose:** Defines the component's public API for external control, similar to props.
 *     - **Use Case:** For data that a parent component will set or change.
 *     - **Features:** Integrates with the full config system (e.g., `afterSetText()` hooks).
 *
 * 2.  **`useConfig()` (Internal State):** Used inside `createVdom` or other methods.
 *     - **Purpose:** Manages private, encapsulated state that is internal to the component.
 *     - **Use Case:** For state that the component manages itself and is not controlled by the parent.
 *     - **Features:** Provides a simple, concise way to handle local reactive state.
 *
 * @param {Object} spec - The specification object for the component.
 * @returns {Neo.functional.component.Base} The generated component class.
 *
 * @example
 * import { defineComponent } from 'neo/functional/defineComponent.mjs';
 * import { useConfig }       from 'neo/functional/useConfig.mjs';
 *
 * const MyComponent = defineComponent({
 *     // 1. Define the Public API via the `config` object.
 *     config: {
 *         className: 'MyApp.MyFunctionalComponent',
 *         ntype    : 'my-functional-component',
 *
 *         // `text_` is a NAMED CONFIG. It's part of the component's public API.
 *         // A parent can create this component with a `text` config.
 *         // It is reactive and will generate `afterSetText()` and `beforeSetText()` hooks.
 *         text_: 'Hello World'
 *     },
 *
 *     // 2. Define the component's logic and VDOM.
 *     createVdom(config) {
 *         // `useConfig` creates ANONYMOUS, INTERNAL STATE.
 *         // The `count` state is private to this component and cannot be set by a parent.
 *         const [count, setCount] = useConfig(0);
 *
 *         return {
 *             tag: 'div',
 *             cn: [{
 *                 tag: 'h1',
 *                 // Access the public, named config via the `config` parameter.
 *                 text: config.text
 *             }, {
 *                 tag: 'p',
 *                 // Access the private, internal state directly.
 *                 text: `You clicked ${count} times`
 *             }, {
 *                 tag: 'button',
 *                 text: 'Click me',
 *                 // The setter from `useConfig` updates the internal state.
 *                 onclick: () => setCount(count + 1)
 *             }]
 *         };
 *     },
 *
 *     // 3. Lifecycle hooks for named configs work automatically.
 *     afterSetText(newValue, oldValue) {
 *         console.log(`Text changed from '${oldValue}' to '${newValue}'`);
 *     }
 * });
 *
 * // The returned MyComponent is a class constructor that can be used with Neo.create()
 * // const instance = Neo.create(MyComponent, {
 * //     text: 'Welcome to Neo.mjs!' // Set the public config on creation.
 * // });
 */
function defineComponent(spec) {
    const configSpec = spec.config;
    delete spec.config;

    if (!configSpec?.className) {
        throw new Error('defineComponent requires a config object with a className.');
    }

    class FunctionalComponent extends _component_Base_mjs__WEBPACK_IMPORTED_MODULE_0__["default"] {
        static config = {
            ...configSpec
            // We can add our own configurations here
        }
    }

    // Assign instance methods
    Object.entries(spec).forEach(([key, value]) => {
        FunctionalComponent.prototype[key] = value
    });

    // To support multiple envs (like `devmode`, `dist/esm`, `dist/production` in parallel,
    // we must re-assign FunctionalComponent to the setupClass() output.
    FunctionalComponent = Neo.setupClass(FunctionalComponent);

    return FunctionalComponent
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (defineComponent);


/***/ }),

/***/ "./src/functional/useConfig.mjs":
/*!**************************************!*\
  !*** ./src/functional/useConfig.mjs ***!
  \**************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   useConfig: () => (/* binding */ useConfig)
/* harmony export */ });
/* harmony import */ var _core_Config_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/Config.mjs */ "./src/core/Config.mjs");
/* harmony import */ var _core_EffectManager_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/EffectManager.mjs */ "./src/core/EffectManager.mjs");



const
    hookIndexSymbol = Symbol.for('hookIndex'),
    hooksSymbol     = Symbol.for('hooks');

/**
 * A hook for managing reactive state within a functional component's `createVdom` method.
 * It mirrors the behavior of React's `useState` but is powered by `Neo.core.Config` for reactivity.
 * @param {*} initialValue The initial value for the state.
 * @returns {Array<any>} A tuple containing the current value and a setter function.
 */
function useConfig(initialValue) {
    _core_EffectManager_mjs__WEBPACK_IMPORTED_MODULE_1__["default"].pause();

    const
        effect    = _core_EffectManager_mjs__WEBPACK_IMPORTED_MODULE_1__["default"].getActiveEffect(),
        component = effect && Neo.getComponent(effect.componentId);

    if (!component) {
        throw new Error('useConfig must be called from within a functional component\'s createVdom method.')
    }

    const currentIndex = component[hookIndexSymbol];

    // Increment the index for the next hook call within the same component render cycle.
    component[hookIndexSymbol]++;

    // If this is the first time this hook is being called for this component, initialize its state.
    if (!component[hooksSymbol][currentIndex]) {
        const config = new _core_Config_mjs__WEBPACK_IMPORTED_MODULE_0__["default"](initialValue);

        const customSetter = (newValue) => {
            if (typeof newValue === 'function') {
                newValue = newValue(config.get())
            }
            config.set(newValue)
        };

        component[hooksSymbol][currentIndex] = [config, customSetter]
    }

    const [config, setter] = component[hooksSymbol][currentIndex];

    _core_EffectManager_mjs__WEBPACK_IMPORTED_MODULE_1__["default"].resume();

    // Call config.get() to ensure this component's effect tracks this config as a dependency.
    return [config.get(), setter]
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (useConfig);


/***/ }),

/***/ "./src/functional/useEvent.mjs":
/*!*************************************!*\
  !*** ./src/functional/useEvent.mjs ***!
  \*************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   useEvent: () => (/* binding */ useEvent)
/* harmony export */ });
/* harmony import */ var _core_EffectManager_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/EffectManager.mjs */ "./src/core/EffectManager.mjs");


const pendingDomEventsSymbol = Symbol.for('pendingDomEvents');

/**
 * A hook for registering DOM event listeners within a functional component.
 * Event listeners registered via this hook will be managed by Neo.mjs's
 * delegated DOM event system, ensuring efficient and proper lifecycle handling.
 *
 * @param {String} eventType - The type of DOM event to listen for (e.g., 'click', 'input').
 * @param {Function} handler - The event handler function. It will receive the event data as its argument.
 * @param {String} [delegate] - An optional CSS selector for event delegation. If provided,
 *                               the handler will only fire if the event target matches this selector.
 */
function useEvent(eventType, handler, delegate) {
    const
        activeEffect = _core_EffectManager_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].getActiveEffect(),
        componentId  = activeEffect?.componentId;

    if (!componentId) {
        throw new Error('useEvent must be called from within a functional component\'s createVdom method.')
    }

    _core_EffectManager_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].pause();
    const component = Neo.getComponent(componentId);
    _core_EffectManager_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].resume();

    if (!component) {
        throw new Error(`Component with id ${componentId} not found for useEvent hook.`);
    }

    // Ensure pendingDomEventsSymbol exists on the component instance
    component[pendingDomEventsSymbol] ??= [];

    // Add the event listener configuration to the component's pending list
    component[pendingDomEventsSymbol].push({
        [eventType]: handler,
        delegate,
        scope      : component // The component instance itself will be the scope
    })
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (useEvent);


/***/ }),

/***/ "./src/toolbar/Base.mjs":
/*!******************************!*\
  !*** ./src/toolbar/Base.mjs ***!
  \******************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _button_Base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../button/Base.mjs */ "./src/button/Base.mjs");
/* harmony import */ var _component_Base_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../component/Base.mjs */ "./src/component/Base.mjs");
/* harmony import */ var _container_Base_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../container/Base.mjs */ "./src/container/Base.mjs");
/* harmony import */ var _component_Label_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../component/Label.mjs */ "./src/component/Label.mjs");
/* harmony import */ var _util_Array_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../util/Array.mjs */ "./src/util/Array.mjs");






/**
 * @class Neo.toolbar.Base
 * @extends Neo.container.Base
 */
class Toolbar extends _container_Base_mjs__WEBPACK_IMPORTED_MODULE_2__["default"] {
    /**
     * Valid values for dock
     * @member {String[]} dockPositions=['top','right','bottom','left', null]
     * @static
     */
    static dockPositions = ['top', 'right', 'bottom', 'left', null]

    static config = {
        /**
         * @member {String} className='Neo.toolbar.Base'
         * @protected
         */
        className: 'Neo.toolbar.Base',
        /**
         * @member {String} ntype='toolbar'
         * @protected
         */
        ntype: 'toolbar',
        /**
         * @member {String[]} baseCls=['neo-toolbar']
         */
        baseCls: ['neo-toolbar'],
        /**
         * @member {String|null} dock_=null
         * @reactive
         */
        dock_: null,
        /**
         * @member {Object} itemDefaults={ntype:'button'}
         * @reactive
         */
        itemDefaults: {
            ntype: 'button'
        },
        /**
         * @member {Object} layout={ntype:'flexbox',align:'center',direction: 'row', pack:'start'}
         * @reactive
         */
        layout: {
            ntype    : 'flexbox',
            align    : 'center',
            direction: 'row',
            pack     : 'start'
        },
        /**
         * @member {Boolean} sortable_=false
         * @reactive
         */
        sortable_: false,
        /**
         * @member {Neo.draggable.toolbar.SortZone|null} sortZone=null
         */
        sortZone: null,
        /**
         * @member {Object} sortZoneConfig=null
         */
        sortZoneConfig: null
    }

    /**
     * Triggered after the appName config got changed
     * @param {String|null} value
     * @param {String|null} oldValue
     * @protected
     */
    afterSetAppName(value, oldValue) {
        super.afterSetAppName(value, oldValue);

        if (this.sortZone) {
            this.sortZone.appName = value
        }
    }

    /**
     * Triggered after the dock config got changed
     * @param {String} value
     * @param {String} oldValue
     * @protected
     */
    afterSetDock(value, oldValue) {
        if (!value && !oldValue) {
            return
        }

        let me            = this,
            {cls}         = me,
            dockPositions = me.getStaticConfig('dockPositions'),
            layoutConfig  = me.getLayoutConfig();

        dockPositions.forEach(key => {
            key !== null && _util_Array_mjs__WEBPACK_IMPORTED_MODULE_4__["default"].toggle(cls, 'neo-dock-' + key, key === value)
        });

        if (!me.layout) {
            layoutConfig.ntype = 'flexbox';
            me.set({cls, layout: layoutConfig})
        } else {
            me.layout.set(layoutConfig);
            me.cls = cls;
        }
    }

    /**
     * Triggered after the sortable config got changed
     * @param {Boolean} value
     * @param {Boolean} oldValue
     * @protected
     */
    afterSetSortable(value, oldValue) {
        let me = this;

        if (value && !me.sortZone) {
            Promise.all(/*! import() */[__webpack_require__.e("vendors-src_draggable_DragZone_mjs"), __webpack_require__.e("vendors-src_draggable_toolbar_SortZone_mjs")]).then(__webpack_require__.bind(__webpack_require__, /*! ../draggable/toolbar/SortZone.mjs */ "./src/draggable/toolbar/SortZone.mjs")).then(module => {
                me.sortZone = Neo.create({
                    module             : module.default,
                    appName            : me.appName,
                    boundaryContainerId: me.id,
                    owner              : me,
                    windowId           : me.windowId,
                    ...me.sortZoneConfig
                })
            })
        }
    }

    /**
     * Triggered after the windowId config got changed
     * @param {Number|null} value
     * @param {Number|null} oldValue
     * @protected
     */
    afterSetWindowId(value, oldValue) {
        super.afterSetWindowId(value, oldValue);

        if (this.sortZone) {
            this.sortZone.windowId = value
        }
    }

    /**
     * Checks if the new dock position matches a value of the static dockPositions config
     * @param {String} value
     * @param {String} oldValue
     * @returns {String} value
     * @protected
     */
    beforeSetDock(value, oldValue) {
        return this.beforeSetEnumValue(value, oldValue, 'dock', 'dockPositions')
    }

    /**
     *
     */
    createItems() {
        let items = this._items;

        if (Array.isArray(items)) {
            this._items = items.map(item => this.replaceSpacer(item))
        }

        return super.createItems()
    }

    /**
     * Creates a layout config depending on this.dock
     * @returns {Object} layoutConfig
     */
    getLayoutConfig() {
        let me = this,
            layoutConfig;

        if (me.dock) {
            switch (me.dock) {
                case 'bottom':
                case 'top':
                    layoutConfig = {
                        align    : 'center',
                        direction: 'row',
                        pack     : 'start'
                    };
                    break
                case 'left':
                    layoutConfig = {
                        align    : 'center',
                        direction: 'column-reverse',
                        pack     : 'start'
                    };
                    break
                case 'right':
                    layoutConfig = {
                        align    : 'center',
                        direction: 'column',
                        pack     : 'start'
                    };
                    break
            }
        }

        return layoutConfig || me.layout
    }

    /**
     * Inserts an item or array of items at a specific index
     * @param {Number} index
     * @param {Array|Object} item
     * @param {Boolean} [silent=false]
     * @returns {Neo.component.Base|Neo.component.Base[]}
     */
    insert(index, item, silent=false) {
        if (Array.isArray(item)) {
            item = item.map(item => this.replaceSpacer(item))
        } else {
            item = this.replaceSpacer(item)
        }

        return super.insert(index, item, silent)
    }

    /**
     * @param {Array|Object|String} item
     * @returns {Array|Object}
     */
    replaceSpacer(item) {
        return item === '->' ? {module: _component_Base_mjs__WEBPACK_IMPORTED_MODULE_1__["default"], flex: 1} : item
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(Toolbar));


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2h1bmtzL2FwcC92ZW5kb3JzLWFwcHNfZW1haWxfYXBwX21qcy1zcmNfdG9vbGJhcl9CYXNlX21qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUEyQzs7QUFFcEM7QUFDUCxjQUFjLDBEQUFRO0FBQ3RCO0FBQ0EsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7OztBQ0wrQzs7QUFFaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsMkRBQUs7QUFDekI7QUFDQTtBQUNBLG9CQUFvQixRQUFRO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFVBQVU7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUEsaUVBQWUscUJBQXFCLEVBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDdENPO0FBQ1M7O0FBRXJEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLDJEQUFLO0FBQzFCO0FBQ0E7QUFDQSxvQkFBb0IsUUFBUTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixnQkFBZ0I7QUFDcEM7QUFDQSxlQUFlLHdEQUFVO0FBQ3pCO0FBQ0Esb0JBQW9CLFVBQVU7QUFDOUI7QUFDQTtBQUNBLGFBQWEsd0hBQXdIO0FBQ3JJLGFBQWEsaUpBQWlKO0FBQzlKLGFBQWEsa0pBQWtKO0FBQy9KLGFBQWEsa0xBQWtMO0FBQy9MLGFBQWE7QUFDYjtBQUNBO0FBQ0E7O0FBRUEsaUVBQWUsc0JBQXNCLEVBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUMvQnVCO0FBQ0k7QUFDSTtBQUNEOztBQUVwRSxpRUFBZSwyRUFBZTtBQUM5QjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsZ0JBQWdCLFFBQVE7QUFDeEI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0QkFBNEIs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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLGNBQWM7QUFDN0IsZUFBZSxTQUFTO0FBQ3hCLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxlQUFlLHFCQUFxQjtBQUNwQyxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGdDQUFnQyxRQUFRLDJEQUFTLFdBQVc7QUFDNUQ7QUFDQTs7QUFFQSxpRUFBZSx1QkFBdUIsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL25lby5tanMvLi9hcHBzL2VtYWlsL2FwcC5tanMiLCJ3ZWJwYWNrOi8vbmVvLm1qcy8uL2FwcHMvZW1haWwvbW9kZWwvRW1haWwubWpzIiwid2VicGFjazovL25lby5tanMvLi9hcHBzL2VtYWlsL3N0b3JlL0VtYWlscy5tanMiLCJ3ZWJwYWNrOi8vbmVvLm1qcy8uL2FwcHMvZW1haWwvdmlldy9Db21wb3NlVmlldy5tanMiLCJ3ZWJwYWNrOi8vbmVvLm1qcy8uL2FwcHMvZW1haWwvdmlldy9NYWluVmlldy5tanMiLCJ3ZWJwYWNrOi8vbmVvLm1qcy8uL2FwcHMvZW1haWwvdmlldy9WaWV3cG9ydC5tanMiLCJ3ZWJwYWNrOi8vbmVvLm1qcy8uL3NyYy9jb21wb25lbnQvTGFiZWwubWpzIiwid2VicGFjazovL25lby5tanMvLi9zcmMvY29udGFpbmVyL1ZpZXdwb3J0Lm1qcyIsIndlYnBhY2s6Ly9uZW8ubWpzLy4vc3JjL2Zvcm0vZmllbGQvVGV4dEFyZWEubWpzIiwid2VicGFjazovL25lby5tanMvLi9zcmMvZnVuY3Rpb25hbC9fZXhwb3J0Lm1qcyIsIndlYnBhY2s6Ly9uZW8ubWpzLy4vc3JjL2Z1bmN0aW9uYWwvZGVmaW5lQ29tcG9uZW50Lm1qcyIsIndlYnBhY2s6Ly9uZW8ubWpzLy4vc3JjL2Z1bmN0aW9uYWwvdXNlQ29uZmlnLm1qcyIsIndlYnBhY2s6Ly9uZW8ubWpzLy4vc3JjL2Z1bmN0aW9uYWwvdXNlRXZlbnQubWpzIiwid2VicGFjazovL25lby5tanMvLi9zcmMvdG9vbGJhci9CYXNlLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgVmlld3BvcnQgZnJvbSAnLi92aWV3L1ZpZXdwb3J0Lm1qcyc7XG5cbmV4cG9ydCBjb25zdCBvblN0YXJ0ID0gKCkgPT4gTmVvLmFwcCh7XG4gICAgbWFpblZpZXc6IFZpZXdwb3J0LFxuICAgIG5hbWUgICAgOiAnRW1haWwnXG59KTtcbiIsImltcG9ydCBNb2RlbCBmcm9tICcuLi8uLi8uLi9zcmMvZGF0YS9Nb2RlbC5tanMnO1xuXG4vKipcbiAqIEBjbGFzcyBFbWFpbC5tb2RlbC5FbWFpbFxuICogQGV4dGVuZHMgTmVvLmRhdGEuTW9kZWxcbiAqL1xuY2xhc3MgRW1haWwgZXh0ZW5kcyBNb2RlbCB7XG4gICAgc3RhdGljIGNvbmZpZyA9IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ30gY2xhc3NOYW1lPSdFbWFpbC5tb2RlbC5FbWFpbCdcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgY2xhc3NOYW1lOiAnRW1haWwubW9kZWwuRW1haWwnLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7T2JqZWN0W119IGZpZWxkc1xuICAgICAgICAgKi9cbiAgICAgICAgZmllbGRzOiBbe1xuICAgICAgICAgICAgbmFtZTogJ2lkJyxcbiAgICAgICAgICAgIHR5cGU6ICdJbnQnXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG5hbWU6ICdjb250ZW50JyxcbiAgICAgICAgICAgIHR5cGU6ICdTdHJpbmcnXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG5hbWU6ICdkYXRlU2VudCcsXG4gICAgICAgICAgICB0eXBlOiAnU3RyaW5nJ1xuICAgICAgICB9LCB7XG4gICAgICAgICAgICBuYW1lOiAncmVjaXBpZW50cycsXG4gICAgICAgICAgICB0eXBlOiAnQXJyYXknXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG5hbWU6ICdzZW5kZXInLFxuICAgICAgICAgICAgdHlwZTogJ1N0cmluZydcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgbmFtZTogJ3RpdGxlJyxcbiAgICAgICAgICAgIHR5cGU6ICdTdHJpbmcnXG4gICAgICAgIH1dXG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBOZW8uc2V0dXBDbGFzcyhFbWFpbCk7XG4iLCJpbXBvcnQgRW1haWxNb2RlbCBmcm9tICcuLi9tb2RlbC9FbWFpbC5tanMnO1xuaW1wb3J0IFN0b3JlICAgICAgZnJvbSAnLi4vLi4vLi4vc3JjL2RhdGEvU3RvcmUubWpzJztcblxuLyoqXG4gKiBAY2xhc3MgRW1haWwuc3RvcmUuRW1haWxzXG4gKiBAZXh0ZW5kcyBOZW8uZGF0YS5TdG9yZVxuICovXG5jbGFzcyBFbWFpbHMgZXh0ZW5kcyBTdG9yZSB7XG4gICAgc3RhdGljIGNvbmZpZyA9IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ30gY2xhc3NOYW1lPSdFbWFpbC5zdG9yZS5FbWFpbHMnXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIGNsYXNzTmFtZTogJ0VtYWlsLnN0b3JlLkVtYWlscycsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtOZW8uZGF0YS5Nb2RlbH0gbW9kZWw9RW1haWxcbiAgICAgICAgICovXG4gICAgICAgIG1vZGVsOiBFbWFpbE1vZGVsLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7T2JqZWN0W119IGRhdGFcbiAgICAgICAgICovXG4gICAgICAgIGRhdGE6IFtcbiAgICAgICAgICAgIHtpZDogMSwgc2VuZGVyOiAnSm9obiBEb2UnLCB0aXRsZTogJ0hlbGxvIFdvcmxkIScsIGNvbnRlbnQ6ICdUaGlzIGlzIHRoZSBmaXJzdCBlbWFpbC4nLCBkYXRlU2VudDogJzIwMjUtMDctMTVUMTA6MDA6MDBaJ30sXG4gICAgICAgICAgICB7aWQ6IDIsIHNlbmRlcjogJ0phbmUgU21pdGgnLCB0aXRsZTogJ1JlOiBQcm9qZWN0IFVwZGF0ZScsIGNvbnRlbnQ6ICdIZXJlIGlzIHRoZSBwcm9qZWN0IHVwZGF0ZSB5b3UgcmVxdWVzdGVkLicsIGRhdGVTZW50OiAnMjAyNS0wNy0xNVQxMTozMDowMFonfSxcbiAgICAgICAgICAgIHtpZDogMywgc2VuZGVyOiAnUGV0ZXIgSm9uZXMnLCB0aXRsZTogJ0x1bmNoIHRvbW9ycm93PycsIGNvbnRlbnQ6ICdBcmUgd2Ugc3RpbGwgb24gZm9yIGx1bmNoIHRvbW9ycm93IGF0IDEyOjMwPycsIGRhdGVTZW50OiAnMjAyNS0wNy0xNVQxMjoxNTowMFonfSxcbiAgICAgICAgICAgIHtpZDogNCwgc2VuZGVyOiAnTWFyeSBXaWxsaWFtcycsIHRpdGxlOiAnWW91ciBvcmRlciBoYXMgc2hpcHBlZCcsIGNvbnRlbnQ6ICdZb3VyIG9yZGVyICMxMjM0NSBoYXMgc2hpcHBlZCBhbmQgd2lsbCBhcnJpdmUgaW4gMy01IGJ1c2luZXNzIGRheXMuJywgZGF0ZVNlbnQ6ICcyMDI1LTA3LTE0VDE1OjQ1OjAwWid9LFxuICAgICAgICAgICAge2lkOiA1LCBzZW5kZXI6ICdEYXZpZCBCcm93bicsIHRpdGxlOiAnUXVpY2sgcXVlc3Rpb24nLCBjb250ZW50OiAnSSBoYXZlIGEgcXVpY2sgcXVlc3Rpb24gYWJvdXQgdGhlIG5ldyBmZWF0dXJlLicsIGRhdGVTZW50OiAnMjAyNS0wNy0xNFQwOToyMDowMFonfVxuICAgICAgICBdXG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBOZW8uc2V0dXBDbGFzcyhFbWFpbHMpO1xuIiwiaW1wb3J0IEJ1dHRvbiAgICAgICAgICAgIGZyb20gJy4uLy4uLy4uL3NyYy9idXR0b24vQmFzZS5tanMnO1xuaW1wb3J0IFRleHRGaWVsZCAgICAgICAgIGZyb20gJy4uLy4uLy4uL3NyYy9mb3JtL2ZpZWxkL1RleHQubWpzJztcbmltcG9ydCBUZXh0QXJlYUZpZWxkICAgICBmcm9tICcuLi8uLi8uLi9zcmMvZm9ybS9maWVsZC9UZXh0QXJlYS5tanMnO1xuaW1wb3J0IHtkZWZpbmVDb21wb25lbnR9IGZyb20gJy4uLy4uLy4uL3NyYy9mdW5jdGlvbmFsL19leHBvcnQubWpzJztcblxuZXhwb3J0IGRlZmF1bHQgZGVmaW5lQ29tcG9uZW50KHtcbiAgICBjb25maWc6IHtcbiAgICAgICAgY2xhc3NOYW1lOiAnRW1haWwudmlldy5Db21wb3NlVmlldycsXG4gICAgICAgIGNscyAgICAgIDogWydlbWFpbC1jb21wb3NlLXZpZXcnXVxuICAgIH0sXG4gICAgY3JlYXRlVmRvbSh7b25DbG9zZX0pIHtcbiAgICAgICAgY29uc3QgZmllbGRTdHlsZSA9IHtcbiAgICAgICAgICAgIG1hcmdpbkJvdHRvbTogJzEwcHgnXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNuOiBbe1xuICAgICAgICAgICAgICAgIG1vZHVsZSAgICA6IFRleHRGaWVsZCxcbiAgICAgICAgICAgICAgICBpZCAgICAgICAgOiAnY29tcG9zZS10bycsXG4gICAgICAgICAgICAgICAgbGFiZWxUZXh0IDogJ1RvOicsXG4gICAgICAgICAgICAgICAgbGFiZWxXaWR0aDogODAsXG4gICAgICAgICAgICAgICAgc3R5bGUgICAgIDogZmllbGRTdHlsZVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIG1vZHVsZSAgICA6IFRleHRGaWVsZCxcbiAgICAgICAgICAgICAgICBpZCAgICAgICAgOiAnY29tcG9zZS1zdWJqZWN0JyxcbiAgICAgICAgICAgICAgICBsYWJlbFRleHQgOiAnU3ViamVjdDonLFxuICAgICAgICAgICAgICAgIGxhYmVsV2lkdGg6IDgwLFxuICAgICAgICAgICAgICAgIHN0eWxlICAgICA6IGZpZWxkU3R5bGVcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBtb2R1bGUgICA6IFRleHRBcmVhRmllbGQsXG4gICAgICAgICAgICAgICAgaWQgICAgICAgOiAnY29tcG9zZS1ib2R5JyxcbiAgICAgICAgICAgICAgICBsYWJlbFRleHQ6ICdCb2R5OicsXG4gICAgICAgICAgICAgICAgaGVpZ2h0ICAgOiAyMDAsXG4gICAgICAgICAgICAgICAgc3R5bGUgICAgOiBmaWVsZFN0eWxlXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgbW9kdWxlIDogQnV0dG9uLFxuICAgICAgICAgICAgICAgIGhhbmRsZXI6IG9uQ2xvc2UsXG4gICAgICAgICAgICAgICAgaWQgICAgIDogJ2NvbXBvc2UtY2xvc2UtYnV0dG9uJyxcbiAgICAgICAgICAgICAgICBzdHlsZSAgOiB7YWxpZ25TZWxmOiAnZmxleC1lbmQnfSxcbiAgICAgICAgICAgICAgICB0ZXh0ICAgOiAnQ2xvc2UnXG4gICAgICAgICAgICB9XVxuICAgICAgICB9XG4gICAgfVxufSk7XG4iLCJpbXBvcnQgQnV0dG9uICAgICAgICAgICAgICAgICAgICAgICBmcm9tICcuLi8uLi8uLi9zcmMvYnV0dG9uL0Jhc2UubWpzJztcbmltcG9ydCBDb21wb3NlVmlldyAgICAgICAgICAgICAgICAgIGZyb20gJy4vQ29tcG9zZVZpZXcubWpzJztcbmltcG9ydCBFbWFpbHNTdG9yZSAgICAgICAgICAgICAgICAgIGZyb20gJy4uL3N0b3JlL0VtYWlscy5tanMnO1xuaW1wb3J0IEdyaWRDb250YWluZXIgICAgICAgICAgICAgICAgZnJvbSAnLi4vLi4vLi4vc3JjL2dyaWQvQ29udGFpbmVyLm1qcyc7XG5pbXBvcnQgUm93TW9kZWwgICAgICAgICAgICAgICAgICAgICBmcm9tICcuLi8uLi8uLi9zcmMvc2VsZWN0aW9uL2dyaWQvUm93TW9kZWwubWpzJztcbmltcG9ydCB7ZGVmaW5lQ29tcG9uZW50LCB1c2VDb25maWd9IGZyb20gJy4uLy4uLy4uL3NyYy9mdW5jdGlvbmFsL19leHBvcnQubWpzJztcblxuZXhwb3J0IGRlZmF1bHQgZGVmaW5lQ29tcG9uZW50KHtcbiAgICBjb25maWc6IHtcbiAgICAgICAgY2xhc3NOYW1lOiAnRW1haWwudmlldy5NYWluVmlldycsXG4gICAgICAgIGNscyAgICAgIDogWydlbWFpbC1tYWluLXZpZXcnXVxuICAgIH0sXG4gICAgY3JlYXRlVmRvbSgpIHtcbiAgICAgICAgY29uc3RcbiAgICAgICAgICAgIFtpc0NvbXBvc2luZywgICBzZXRJc0NvbXBvc2luZ10gICA9IHVzZUNvbmZpZyhmYWxzZSksXG4gICAgICAgICAgICBbc2VsZWN0ZWRFbWFpbCwgc2V0U2VsZWN0ZWRFbWFpbF0gPSB1c2VDb25maWcobnVsbCk7XG5cbiAgICAgICAgY29uc3QgcGFuZVN0eWxlID0ge1xuICAgICAgICAgICAgYm9yZGVyIDogJzFweCBzb2xpZCAjYzBjMGMwJyxcbiAgICAgICAgICAgIG1hcmdpbiA6ICcxMHB4JyxcbiAgICAgICAgICAgIHBhZGRpbmc6ICcxMHB4J1xuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IG9uQ29tcG9zZUNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgc2V0SXNDb21wb3NpbmcodHJ1ZSlcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBvbkNsb3NlQ29tcG9zZSA9ICgpID0+IHtcbiAgICAgICAgICAgIHNldElzQ29tcG9zaW5nKGZhbHNlKTtcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBvblNlbGVjdGlvbkNoYW5nZSA9ICh7cmVjb3Jkc30pID0+IHtcbiAgICAgICAgICAgIHNldFNlbGVjdGVkRW1haWwocmVjb3Jkc1swXSB8fCBudWxsKVxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjbjogW3tcbiAgICAgICAgICAgICAgICBzdHlsZTogey4uLnBhbmVTdHlsZSwgZmxleDogJzAgMCAyMDBweCd9LFxuICAgICAgICAgICAgICAgIGNuOiBbe1xuICAgICAgICAgICAgICAgICAgICBtb2R1bGUgOiBCdXR0b24sXG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZXI6IG9uQ29tcG9zZUNsaWNrLFxuICAgICAgICAgICAgICAgICAgICBpZCAgICAgOiAnY29tcG9zZS1idXR0b24nLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0ICAgOiAnQ29tcG9zZScsXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlICA6IHttYXJnaW5Cb3R0b206ICcxMHB4Jywgd2lkdGg6ICcxMDAlJ31cbiAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgIHRleHQgOiAnRm9sZGVycydcbiAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIHN0eWxlOiB7Li4ucGFuZVN0eWxlLCBmbGV4OiAnMSAxIDYwMHB4JywgcGFkZGluZzogJzAnfSxcbiAgICAgICAgICAgICAgICBjbjogW3tcbiAgICAgICAgICAgICAgICAgICAgbW9kdWxlICAgICAgOiBHcmlkQ29udGFpbmVyLFxuICAgICAgICAgICAgICAgICAgICBpZCAgICAgICAgICA6ICdlbWFpbC1ncmlkJyxcbiAgICAgICAgICAgICAgICAgICAgc3RvcmUgICAgICAgOiBFbWFpbHNTdG9yZSxcbiAgICAgICAgICAgICAgICAgICAgd3JhcHBlclN0eWxlOiB7aGVpZ2h0OiAnMTAwJScsIHdpZHRoOiAnMTAwJSd9LFxuICAgICAgICAgICAgICAgICAgICBib2R5OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb25Nb2RlbDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZHVsZSAgIDogUm93TW9kZWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdGVuZXJzOiB7c2VsZWN0aW9uQ2hhbmdlOiBvblNlbGVjdGlvbkNoYW5nZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uczogW1xuICAgICAgICAgICAgICAgICAgICAgICAge2RhdGFGaWVsZDogJ3NlbmRlcicsIHRleHQ6ICdTZW5kZXInLCB3aWR0aDogMTUwfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHtkYXRhRmllbGQ6ICd0aXRsZScsICB0ZXh0OiAnVGl0bGUnLCAgZmxleDogMSwgbWluV2lkdGg6IDIwMH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbEFsaWduOiAncmlnaHQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFGaWVsZDogJ2RhdGVTZW50JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJlciA6ICgoe3ZhbHVlfSkgPT4gbmV3IERhdGUodmFsdWUpLnRvTG9jYWxlRGF0ZVN0cmluZygpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ICAgICA6ICdEYXRlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aCAgICA6IDEwMFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBzdHlsZTogey4uLnBhbmVTdHlsZSwgZmxleDogJzEgMSA2MDBweCd9LFxuICAgICAgICAgICAgICAgIGNuOiBzZWxlY3RlZEVtYWlsID8gW1xuICAgICAgICAgICAgICAgICAgICB7dGFnOiAnaDInLCAgdGV4dDogc2VsZWN0ZWRFbWFpbC50aXRsZX0sXG4gICAgICAgICAgICAgICAgICAgIHt0YWc6ICdwJywgICB0ZXh0OiBgRnJvbTogJHtzZWxlY3RlZEVtYWlsLnNlbmRlcn1gfSxcbiAgICAgICAgICAgICAgICAgICAge3RhZzogJ2RpdicsIHN0eWxlOiB7bWFyZ2luVG9wOiAnMTBweCd9LCB0ZXh0OiBzZWxlY3RlZEVtYWlsLmNvbnRlbnR9XG4gICAgICAgICAgICAgICAgXSA6IFt7XG4gICAgICAgICAgICAgICAgICAgIHRleHQ6ICdTZWxlY3QgYW4gZW1haWwgdG8gcmVhZCdcbiAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgfSwgaXNDb21wb3NpbmcgJiYge1xuICAgICAgICAgICAgICAgIG1vZHVsZSA6IENvbXBvc2VWaWV3LFxuICAgICAgICAgICAgICAgIGlkICAgICA6ICdjb21wb3NlLXZpZXcnLFxuICAgICAgICAgICAgICAgIG9uQ2xvc2U6IG9uQ2xvc2VDb21wb3NlXG4gICAgICAgICAgICB9XVxuICAgICAgICB9XG4gICAgfVxufSk7XG4iLCJpbXBvcnQgQmFzZVZpZXdwb3J0IGZyb20gJy4uLy4uLy4uL3NyYy9jb250YWluZXIvVmlld3BvcnQubWpzJztcbmltcG9ydCBNYWluVmlldyAgICAgZnJvbSAnLi9NYWluVmlldy5tanMnO1xuXG4vKipcbiAqIEBjbGFzcyBFbWFpbC52aWV3LlZpZXdwb3J0XG4gKiBAZXh0ZW5kcyBOZW8uY29udGFpbmVyLlZpZXdwb3J0XG4gKi9cbmNsYXNzIFZpZXdwb3J0IGV4dGVuZHMgQmFzZVZpZXdwb3J0IHtcbiAgICBzdGF0aWMgY29uZmlnID0ge1xuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfSBjbGFzc05hbWU9J0VtYWlsLnZpZXcuVmlld3BvcnQnXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIGNsYXNzTmFtZTogJ0VtYWlsLnZpZXcuVmlld3BvcnQnLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7T2JqZWN0fSBsYXlvdXQ9e250eXBlOidmaXQnfVxuICAgICAgICAgKi9cbiAgICAgICAgbGF5b3V0OiB7bnR5cGU6ICdmaXQnfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge09iamVjdFtdfSBpdGVtc1xuICAgICAgICAgKi9cbiAgICAgICAgaXRlbXM6IFt7XG4gICAgICAgICAgICBtb2R1bGU6IE1haW5WaWV3XG4gICAgICAgIH1dXG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBOZW8uc2V0dXBDbGFzcyhWaWV3cG9ydCk7XG4iLCJpbXBvcnQgQ29tcG9uZW50IGZyb20gJy4vQmFzZS5tanMnO1xuXG4vKipcbiAqIENvbnZlbmllbmNlIGNsYXNzIHRvIHJlbmRlciBhIGxhYmVsIHdpdGggYSB0ZXh0XG4gKiBAY2xhc3MgTmVvLmNvbXBvbmVudC5MYWJlbFxuICogQGV4dGVuZHMgTmVvLmNvbXBvbmVudC5CYXNlXG4gKi9cbmNsYXNzIExhYmVsIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBzdGF0aWMgY29uZmlnID0ge1xuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfSBjbGFzc05hbWU9J05lby5jb21wb25lbnQuTGFiZWwnXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIGNsYXNzTmFtZTogJ05lby5jb21wb25lbnQuTGFiZWwnLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfSBudHlwZT0nbGFiZWwnXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIG50eXBlOiAnbGFiZWwnLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nW119IGJhc2VDbHM9WyduZW8tbGFiZWwnXVxuICAgICAgICAgKi9cbiAgICAgICAgYmFzZUNsczogWyduZW8tbGFiZWwnXSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ30gdGFnPSdsYWJlbCdcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAcmVhY3RpdmVcbiAgICAgICAgICovXG4gICAgICAgIHRhZzogJ2xhYmVsJ1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTmVvLnNldHVwQ2xhc3MoTGFiZWwpO1xuIiwiaW1wb3J0IENvbnRhaW5lciBmcm9tICcuL0Jhc2UubWpzJztcblxuLyoqXG4gKiBAY2xhc3MgTmVvLmNvbnRhaW5lci5WaWV3cG9ydFxuICogQGV4dGVuZHMgTmVvLmNvbnRhaW5lci5CYXNlXG4gKi9cbmNsYXNzIFZpZXdwb3J0IGV4dGVuZHMgQ29udGFpbmVyIHtcbiAgICBzdGF0aWMgY29uZmlnID0ge1xuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfSBjbGFzc05hbWU9J05lby5jb250YWluZXIuVmlld3BvcnQnXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIGNsYXNzTmFtZTogJ05lby5jb250YWluZXIuVmlld3BvcnQnLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfSBudHlwZT0ndmlld3BvcnQnXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIG50eXBlOiAndmlld3BvcnQnLFxuICAgICAgICAvKipcbiAgICAgICAgICogdHJ1ZSBhcHBsaWVzICduZW8tYm9keS12aWV3cG9ydCcgdG8gdGhlIGRvY3VtZW50LmJvZHlcbiAgICAgICAgICogQG1lbWJlciB7Qm9vbGVhbn0gYXBwbHlCb2R5Q2xzPXRydWVcbiAgICAgICAgICovXG4gICAgICAgIGFwcGx5Qm9keUNsczogdHJ1ZSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFzc3VtaW5nIHRoYXQgYSBWaWV3cG9ydCBpcyB0aGUgdG9wIGxldmVsIHZpZXcgb2YgeW91ciBhcHAsIGFuZCB5b3Ugd2FudCB0byBtb3VudCBpdCByaWdodCBhd2F5LlxuICAgICAgICAgKiBDb3VsZCBiZSB3aXRob3V0IGFueSBpdGVtcy4gVXNlIGZhbHNlIG90aGVyd2lzZS5cbiAgICAgICAgICogQG1lbWJlciB7Qm9vbGVhbn0gYXV0b01vdW50PXRydWVcbiAgICAgICAgICovXG4gICAgICAgIGF1dG9Nb3VudDogdHJ1ZSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ1tdfSBiYXNlQ2xzPVsnbmVvLXZpZXdwb3J0J11cbiAgICAgICAgICovXG4gICAgICAgIGJhc2VDbHM6IFsnbmVvLXZpZXdwb3J0J10sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiB0cnVlIGFwcGxpZXMgYSBtYWluLmFkZG9uLlJlc2l6ZU9ic2VydmVyIGFuZCBmaXJlcyBhIGN1c3RvbSByZXNpemUgZXZlbnRcbiAgICAgICAgICogd2hpY2ggb3RoZXIgaW5zdGFuY2VzIGNhbiBzdWJzY3JpYmUgdG8uXG4gICAgICAgICAqIEBtZW1iZXIge0Jvb2xlYW59IG1vbml0b3JTaXplXz1mYWxzZVxuICAgICAgICAgKiBAcmVhY3RpdmVcbiAgICAgICAgICovXG4gICAgICAgIG1vbml0b3JTaXplXzogZmFsc2VcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgYWZ0ZXIgdGhlIG1vdW50ZWQgY29uZmlnIGdvdCBjaGFuZ2VkXG4gICAgICogQHBhcmFtIHtCb29sZWFufSB2YWx1ZVxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gb2xkVmFsdWVcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgYWZ0ZXJTZXRNb3VudGVkKHZhbHVlLCBvbGRWYWx1ZSkge1xuICAgICAgICBzdXBlci5hZnRlclNldE1vdW50ZWQodmFsdWUsIG9sZFZhbHVlKTtcblxuICAgICAgICBsZXQgbWUgPSB0aGlzO1xuXG4gICAgICAgIGlmICh2YWx1ZSAmJiBtZS5tb25pdG9yU2l6ZSkge1xuICAgICAgICAgICAgbWUuYWRkRG9tTGlzdGVuZXJzKFt7cmVzaXplOiBtZS5vbkRvbVJlc2l6ZSwgc2NvcGU6IG1lfV0pXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqL1xuICAgIG9uQ29uc3RydWN0ZWQoKSB7XG4gICAgICAgIHN1cGVyLm9uQ29uc3RydWN0ZWQoKTtcblxuICAgICAgICBsZXQge2FwcE5hbWUsIHdpbmRvd0lkfSA9IHRoaXM7XG5cbiAgICAgICAgdGhpcy5hcHBseUJvZHlDbHMgJiYgTmVvLm1haW4uRG9tQWNjZXNzLmFwcGx5Qm9keUNscyh7XG4gICAgICAgICAgICBhcHBOYW1lLFxuICAgICAgICAgICAgY2xzOiBbJ25lby1ib2R5LXZpZXdwb3J0J10sXG4gICAgICAgICAgICB3aW5kb3dJZFxuICAgICAgICB9KVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhXG4gICAgICovXG4gICAgb25Eb21SZXNpemUoZGF0YSkge1xuICAgICAgICB0aGlzLmZpcmUoJ3Jlc2l6ZScsIGRhdGEpXG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBOZW8uc2V0dXBDbGFzcyhWaWV3cG9ydCk7XG4iLCJpbXBvcnQgVGV4dCBmcm9tICcuL1RleHQubWpzJztcblxuLyoqXG4gKlxuICogQGNsYXNzIE5lby5mb3JtLmZpZWxkLlRleHRBcmVhXG4gKiBAZXh0ZW5kcyBOZW8uZm9ybS5maWVsZC5UZXh0XG4gKiBAYWJzdHJhY3RcbiAqL1xuY2xhc3MgVGV4dEFyZWEgZXh0ZW5kcyBUZXh0IHtcbiAgICAvKipcbiAgICAgKiBWYWxpZCB2YWx1ZXMgZm9yIHdyYXBcbiAgICAgKiBAbWVtYmVyIHtTdHJpbmdbXX0gd3JhcFZhbHVlcz1bJ2hhcmQnLCAnb2ZmJywgJ3NvZnQnLCBudWxsXVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAc3RhdGljXG4gICAgICovXG4gICAgc3RhdGljIHdyYXBWYWx1ZXMgPSBbJ2hhcmQnLCAnb2ZmJywgJ3NvZnQnLCBudWxsXVxuXG4gICAgc3RhdGljIGNvbmZpZyA9IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ30gY2xhc3NOYW1lPSdOZW8uZm9ybS5maWVsZC5UZXh0QXJlYSdcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgY2xhc3NOYW1lOiAnTmVvLmZvcm0uZmllbGQuVGV4dEFyZWEnLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfSBudHlwZT0ndGV4dGFyZWEnXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIG50eXBlOiAndGV4dGFyZWEnLFxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0IHRoaXMgdG8gYHRydWVgIHRvIGhhdmUgdGhlIHRleHQgYXJlYSBncm93IGFuZCBzaHJpbmsgdG8gYWNjb21tb2RhdGVcbiAgICAgICAgICogYW55IGhlaWdodCBvZiB0ZXh0LiBCb3VuZHMgY2FuIGJlIHNldCB1c2luZyB0aGUgYG1pbkhlaWdodGAgYW5kIGBtYXhIZWlnaHRgIHNldHRpbmdzLlxuICAgICAgICAgKiBAbWVtYmVyIHtCb29sZWFufSBhdXRvR3Jvdz1mYWxzZVxuICAgICAgICAgKi9cbiAgICAgICAgYXV0b0dyb3dfOiBmYWxzZSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ1tdfSBiYXNlQ2xzPVsnbmVvLXRleHRhcmVhJywnbmVvLXRleHRmaWVsZCddXG4gICAgICAgICAqL1xuICAgICAgICBiYXNlQ2xzOiBbJ25lby10ZXh0YXJlYScsICduZW8tdGV4dGZpZWxkJ10sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUcnVlIHNob3dzIGEgY2xlYXIgdHJpZ2dlciBpbiBjYXNlIHRoZSBmaWVsZCBoYXMgYSBub24tZW1wdHkgdmFsdWUuXG4gICAgICAgICAqIEBtZW1iZXIge0Jvb2xlYW59IGNsZWFyYWJsZT1mYWxzZVxuICAgICAgICAgKiBAcmVhY3RpdmVcbiAgICAgICAgICovXG4gICAgICAgIGNsZWFyYWJsZTogZmFsc2UsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgdmlzaWJsZSB3aWR0aCBvZiB0aGUgdGV4dCBjb250cm9sLCBpbiBhdmVyYWdlIGNoYXJhY3RlciB3aWR0aHMuXG4gICAgICAgICAqIElmIGl0IGlzIHNwZWNpZmllZCwgaXQgbXVzdCBiZSBhIHBvc2l0aXZlIGludGVnZXIuXG4gICAgICAgICAqIElmIGl0IGlzIG5vdCBzcGVjaWZpZWQsIHRoZSBkZWZhdWx0IHZhbHVlIGlzIDIwLlxuICAgICAgICAgKiBAbWVtYmVyIHtOdW1iZXJ8bnVsbH0gY29sc189bnVsbFxuICAgICAgICAgKiBAcmVhY3RpdmVcbiAgICAgICAgICovXG4gICAgICAgIGNvbHNfOiBudWxsLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfSBpbnB1dFRhZ189J3RleHRhcmVhJ1xuICAgICAgICAgKiBAcmVhY3RpdmVcbiAgICAgICAgICovXG4gICAgICAgIGlucHV0VGFnXzogJ3RleHRhcmVhJyxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIERpc2FibGluZyB0byBzZXQgYSB0eXBlIGZvciB0aGUgdGV4dGFyZWEgdGFnXG4gICAgICAgICAqIFNlZTogaW5wdXRUYWdfXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ3xudWxsfSBpbnB1dFR5cGU9bnVsbFxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEByZWFjdGl2ZVxuICAgICAgICAgKi9cbiAgICAgICAgaW5wdXRUeXBlOiBudWxsLFxuICAgICAgICAvKipcbiAgICAgICAgICogVXNlIGZhbHNlIHRvIGRpc2FibGUgdGhlIGJyb3dzZXJzIGRlZmF1bHQgcmVzaXppbmcgZmVhdHVyZVxuICAgICAgICAgKiBAbWVtYmVyIHtCb29sZWFufSByZXNpemFibGVfPWZhbHNlXG4gICAgICAgICAqIEByZWFjdGl2ZVxuICAgICAgICAgKi9cbiAgICAgICAgcmVzaXphYmxlXzogZmFsc2UsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBbiBpbnRlZ2VyID4gMCBvciBudWxsXG4gICAgICAgICAqIEBtZW1iZXIge051bWJlcnxudWxsfSByb3dzXz0zXG4gICAgICAgICAqIEByZWFjdGl2ZVxuICAgICAgICAgKi9cbiAgICAgICAgcm93c186IDMsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbmRpY2F0ZXMgaG93IHRoZSBjb250cm9sIHdyYXBzIHRleHQuIFBvc3NpYmxlIHZhbHVlcyBhcmU6IGhhcmQsIHNvZnQsIG9mZlxuICAgICAgICAgKiBJZiB0aGlzIGF0dHJpYnV0ZSBpcyBub3Qgc3BlY2lmaWVkLCBzb2Z0IGlzIGl0cyBkZWZhdWx0IHZhbHVlLlxuICAgICAgICAgKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVE1ML0VsZW1lbnQvdGV4dGFyZWFcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfG51bGx9IHdyYXBfPW51bGxcbiAgICAgICAgICogQHJlYWN0aXZlXG4gICAgICAgICAqL1xuICAgICAgICB3cmFwXzogbnVsbFxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCBhZnRlciB0aGUgYXV0b0dyb3cgY29uZmlnIGdvdCBjaGFuZ2VkXG4gICAgICogQHBhcmFtIHtCb29sZWFufSB2YWx1ZVxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gb2xkVmFsdWVcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgYWZ0ZXJTZXRBdXRvR3Jvdyh2YWx1ZSwgb2xkVmFsdWUpIHtcbiAgICAgICAgbGV0IG1lID0gdGhpcztcblxuICAgICAgICB2YWx1ZSAmJiBtZS5zeW5jQXV0b0dyb3dNb25pdG9yKCk7XG5cbiAgICAgICAgLy8gUmVzdG9yZSBhbnkgY29uZmlndXJlZCBoZWlnaHQgaWYgYXV0b0dyb3cgdHVybmVkIG9mZlxuICAgICAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAgICAgICBtZS5hZnRlclNldEhlaWdodChtZS5faGVpZ2h0KVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIGFmdGVyIHRoZSBjb2xzIGNvbmZpZyBnb3QgY2hhbmdlZFxuICAgICAqIEBwYXJhbSB7TnVtYmVyfG51bGx9IHZhbHVlXG4gICAgICogQHBhcmFtIHtOdW1iZXJ8bnVsbH0gb2xkVmFsdWVcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgYWZ0ZXJTZXRDb2xzKHZhbHVlLCBvbGRWYWx1ZSkge1xuICAgICAgICB0aGlzLmNoYW5nZUlucHV0RWxLZXkoJ2NvbHMnLCB2YWx1ZSlcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgYWZ0ZXIgdGhlIGlucHV0VGFnIGNvbmZpZyBnb3QgY2hhbmdlZFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBvbGRWYWx1ZVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBhZnRlclNldElucHV0VGFnKHZhbHVlLCBvbGRWYWx1ZSkge1xuICAgICAgICB0aGlzLmNoYW5nZUlucHV0RWxLZXkoJ3RhZycsIHZhbHVlKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCBhZnRlciB0aGUgbW91bnRlZCBjb25maWcgZ290IGNoYW5nZWRcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IHZhbHVlXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBvbGRWYWx1ZVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBhZnRlclNldE1vdW50ZWQodmFsdWUsIG9sZFZhbHVlKSB7XG4gICAgICAgIHN1cGVyLmFmdGVyU2V0TW91bnRlZCh2YWx1ZSwgb2xkVmFsdWUpO1xuICAgICAgICB0aGlzLnN5bmNBdXRvR3Jvd01vbml0b3IoKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCBhZnRlciB0aGUgcmVzaXphYmxlIGNvbmZpZyBnb3QgY2hhbmdlZFxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gdmFsdWVcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IG9sZFZhbHVlXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIGFmdGVyU2V0UmVzaXphYmxlKHZhbHVlLCBvbGRWYWx1ZSkge1xuICAgICAgICBsZXQgbWUgICAgPSB0aGlzLFxuICAgICAgICAgICAgc3R5bGUgPSB0aGlzLmdldElucHV0RWwoKS5zdHlsZTtcblxuICAgICAgICBzdHlsZS5yZXNpemUgPSB2YWx1ZSA/IG51bGwgOiAnbm9uZSc7XG4gICAgICAgIG1lLnVwZGF0ZSgpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIGFmdGVyIHRoZSByb3dzIGNvbmZpZyBnb3QgY2hhbmdlZFxuICAgICAqIEBwYXJhbSB7TnVtYmVyfG51bGx9IHZhbHVlXG4gICAgICogQHBhcmFtIHtOdW1iZXJ8bnVsbH0gb2xkVmFsdWVcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgYWZ0ZXJTZXRSb3dzKHZhbHVlLCBvbGRWYWx1ZSkge1xuICAgICAgICB0aGlzLmNoYW5nZUlucHV0RWxLZXkoJ3Jvd3MnLCB2YWx1ZSlcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgYWZ0ZXIgdGhlIHZhbHVlIGNvbmZpZyBnb3QgY2hhbmdlZFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBvbGRWYWx1ZVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBhZnRlclNldFZhbHVlKHZhbHVlLCBvbGRWYWx1ZSkge1xuICAgICAgICBsZXQgbWUgICAgICA9IHRoaXMsXG4gICAgICAgICAgICBpbnB1dEVsID0gbWUuZ2V0SW5wdXRFbCgpO1xuXG4gICAgICAgIGlmIChpbnB1dEVsKSB7XG4gICAgICAgICAgICBpbnB1dEVsLnRleHQgPSB2YWx1ZVxuICAgICAgICB9XG5cbiAgICAgICAgc3VwZXIuYWZ0ZXJTZXRWYWx1ZSh2YWx1ZSwgb2xkVmFsdWUpO1xuXG4gICAgICAgIGlmIChtZS5hdXRvR3JvdyAmJiBtZS5tb3VudGVkICYmIG1lLnJlYWRPbmx5KSB7XG4gICAgICAgICAgICBtZS50aW1lb3V0KDUwKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICBOZW8ubWFpbi5Eb21BY2Nlc3MubW9uaXRvckF1dG9Hcm93SGFuZGxlcih7XG4gICAgICAgICAgICAgICAgICAgIGFwcE5hbWUgOiBtZS5hcHBOYW1lLFxuICAgICAgICAgICAgICAgICAgICBpZCAgICAgIDogaW5wdXRFbC5pZCxcbiAgICAgICAgICAgICAgICAgICAgd2luZG93SWQ6IG1lLndpbmRvd0lkXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgYWZ0ZXIgdGhlIHdyYXAgY29uZmlnIGdvdCBjaGFuZ2VkXG4gICAgICogQHBhcmFtIHtOdW1iZXJ8bnVsbH0gdmFsdWVcbiAgICAgKiBAcGFyYW0ge051bWJlcnxudWxsfSBvbGRWYWx1ZVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBhZnRlclNldFdyYXAodmFsdWUsIG9sZFZhbHVlKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlSW5wdXRFbEtleSgnd3JhcCcsIHZhbHVlKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiB0aGUgbmV3IHdyYXAgdmFsdWUgbWF0Y2hlcyBhIHZhbHVlIG9mIHRoZSBzdGF0aWMgd3JhcFZhbHVlcyBjb25maWdcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdmFsdWVcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gb2xkVmFsdWVcbiAgICAgKiBAcmV0dXJucyB7U3RyaW5nfSB2YWx1ZVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBiZWZvcmVTZXRXcmFwKHZhbHVlLCBvbGRWYWx1ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5iZWZvcmVTZXRFbnVtVmFsdWUodmFsdWUsIG9sZFZhbHVlLCAnd3JhcCcsICd3cmFwVmFsdWVzJylcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqL1xuICAgIGFzeW5jIHN5bmNBdXRvR3Jvd01vbml0b3IoKSB7XG4gICAgICAgIGxldCBtZSA9IHRoaXM7XG5cbiAgICAgICAgaWYgKG1lLm1vdW50ZWQgJiYgbWUuYXV0b0dyb3cpIHtcbiAgICAgICAgICAgIC8vIERlbGVnYXRlIG1vbml0b3Jpbmcgb2Ygc2l6ZXMgdG8gdGhlIG1haW4gdGhyZWFkLlxuICAgICAgICAgICAgTmVvLm1haW4uRG9tQWNjZXNzLm1vbml0b3JBdXRvR3Jvdyh7XG4gICAgICAgICAgICAgICAgYXBwTmFtZSAgOiBtZS5hcHBOYW1lLFxuICAgICAgICAgICAgICAgIGlkICAgICAgIDogbWUuZ2V0SW5wdXRFbElkKCksXG4gICAgICAgICAgICAgICAgYXV0b0dyb3cgOiBtZS5hdXRvR3Jvd1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTmVvLnNldHVwQ2xhc3MoVGV4dEFyZWEpO1xuIiwiaW1wb3J0IENvbXBvbmVudCAgICAgICBmcm9tICcuL2NvbXBvbmVudC9CYXNlLm1qcyc7XG5pbXBvcnQgZGVmaW5lQ29tcG9uZW50IGZyb20gJy4vZGVmaW5lQ29tcG9uZW50Lm1qcyc7XG5pbXBvcnQgdXNlQ29uZmlnICAgICAgIGZyb20gJy4vdXNlQ29uZmlnLm1qcyc7XG5pbXBvcnQgdXNlRXZlbnQgICAgICAgIGZyb20gJy4vdXNlRXZlbnQubWpzJztcblxuZXhwb3J0IHtDb21wb25lbnQsIGRlZmluZUNvbXBvbmVudCwgdXNlQ29uZmlnLCB1c2VFdmVudH07XG4iLCJpbXBvcnQgRnVuY3Rpb25hbEJhc2UgZnJvbSAnLi9jb21wb25lbnQvQmFzZS5tanMnO1xuXG4vKipcbiAqIEZhY3RvcnkgZnVuY3Rpb24gdG8gY3JlYXRlIGEgZnVuY3Rpb25hbCBjb21wb25lbnQgY2xhc3MgZnJvbSBhIHNwZWNpZmljYXRpb24gb2JqZWN0LlxuICogVGhpcyBlbmFibGVzIGEgXCJCZWdpbm5lciBNb2RlXCIgZm9yIGNyZWF0aW5nIGNvbXBvbmVudHMgd2l0aG91dCB3cml0aW5nIGEgY2xhc3MsXG4gKiB3aGlsZSBzdGlsbCBwcm92aWRpbmcgYWNjZXNzIHRvIHRoZSBmdWxsIGNsYXNzLWJhc2VkIGZlYXR1cmUgc2V0LlxuICpcbiAqIEl0J3MgaW1wb3J0YW50IHRvIHVuZGVyc3RhbmQgdGhlIHR3byB3YXlzIG9mIG1hbmFnaW5nIHN0YXRlOlxuICpcbiAqIDEuICAqKk5hbWVkIENvbmZpZ3MgKFB1YmxpYyBBUEkpOioqIERlZmluZWQgaW4gdGhlIGBjb25maWdgIG9iamVjdCAoZS5nLiwgYHRleHRfYCkuXG4gKiAgICAgLSAqKlB1cnBvc2U6KiogRGVmaW5lcyB0aGUgY29tcG9uZW50J3MgcHVibGljIEFQSSBmb3IgZXh0ZXJuYWwgY29udHJvbCwgc2ltaWxhciB0byBwcm9wcy5cbiAqICAgICAtICoqVXNlIENhc2U6KiogRm9yIGRhdGEgdGhhdCBhIHBhcmVudCBjb21wb25lbnQgd2lsbCBzZXQgb3IgY2hhbmdlLlxuICogICAgIC0gKipGZWF0dXJlczoqKiBJbnRlZ3JhdGVzIHdpdGggdGhlIGZ1bGwgY29uZmlnIHN5c3RlbSAoZS5nLiwgYGFmdGVyU2V0VGV4dCgpYCBob29rcykuXG4gKlxuICogMi4gICoqYHVzZUNvbmZpZygpYCAoSW50ZXJuYWwgU3RhdGUpOioqIFVzZWQgaW5zaWRlIGBjcmVhdGVWZG9tYCBvciBvdGhlciBtZXRob2RzLlxuICogICAgIC0gKipQdXJwb3NlOioqIE1hbmFnZXMgcHJpdmF0ZSwgZW5jYXBzdWxhdGVkIHN0YXRlIHRoYXQgaXMgaW50ZXJuYWwgdG8gdGhlIGNvbXBvbmVudC5cbiAqICAgICAtICoqVXNlIENhc2U6KiogRm9yIHN0YXRlIHRoYXQgdGhlIGNvbXBvbmVudCBtYW5hZ2VzIGl0c2VsZiBhbmQgaXMgbm90IGNvbnRyb2xsZWQgYnkgdGhlIHBhcmVudC5cbiAqICAgICAtICoqRmVhdHVyZXM6KiogUHJvdmlkZXMgYSBzaW1wbGUsIGNvbmNpc2Ugd2F5IHRvIGhhbmRsZSBsb2NhbCByZWFjdGl2ZSBzdGF0ZS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gc3BlYyAtIFRoZSBzcGVjaWZpY2F0aW9uIG9iamVjdCBmb3IgdGhlIGNvbXBvbmVudC5cbiAqIEByZXR1cm5zIHtOZW8uZnVuY3Rpb25hbC5jb21wb25lbnQuQmFzZX0gVGhlIGdlbmVyYXRlZCBjb21wb25lbnQgY2xhc3MuXG4gKlxuICogQGV4YW1wbGVcbiAqIGltcG9ydCB7IGRlZmluZUNvbXBvbmVudCB9IGZyb20gJ25lby9mdW5jdGlvbmFsL2RlZmluZUNvbXBvbmVudC5tanMnO1xuICogaW1wb3J0IHsgdXNlQ29uZmlnIH0gICAgICAgZnJvbSAnbmVvL2Z1bmN0aW9uYWwvdXNlQ29uZmlnLm1qcyc7XG4gKlxuICogY29uc3QgTXlDb21wb25lbnQgPSBkZWZpbmVDb21wb25lbnQoe1xuICogICAgIC8vIDEuIERlZmluZSB0aGUgUHVibGljIEFQSSB2aWEgdGhlIGBjb25maWdgIG9iamVjdC5cbiAqICAgICBjb25maWc6IHtcbiAqICAgICAgICAgY2xhc3NOYW1lOiAnTXlBcHAuTXlGdW5jdGlvbmFsQ29tcG9uZW50JyxcbiAqICAgICAgICAgbnR5cGUgICAgOiAnbXktZnVuY3Rpb25hbC1jb21wb25lbnQnLFxuICpcbiAqICAgICAgICAgLy8gYHRleHRfYCBpcyBhIE5BTUVEIENPTkZJRy4gSXQncyBwYXJ0IG9mIHRoZSBjb21wb25lbnQncyBwdWJsaWMgQVBJLlxuICogICAgICAgICAvLyBBIHBhcmVudCBjYW4gY3JlYXRlIHRoaXMgY29tcG9uZW50IHdpdGggYSBgdGV4dGAgY29uZmlnLlxuICogICAgICAgICAvLyBJdCBpcyByZWFjdGl2ZSBhbmQgd2lsbCBnZW5lcmF0ZSBgYWZ0ZXJTZXRUZXh0KClgIGFuZCBgYmVmb3JlU2V0VGV4dCgpYCBob29rcy5cbiAqICAgICAgICAgdGV4dF86ICdIZWxsbyBXb3JsZCdcbiAqICAgICB9LFxuICpcbiAqICAgICAvLyAyLiBEZWZpbmUgdGhlIGNvbXBvbmVudCdzIGxvZ2ljIGFuZCBWRE9NLlxuICogICAgIGNyZWF0ZVZkb20oY29uZmlnKSB7XG4gKiAgICAgICAgIC8vIGB1c2VDb25maWdgIGNyZWF0ZXMgQU5PTllNT1VTLCBJTlRFUk5BTCBTVEFURS5cbiAqICAgICAgICAgLy8gVGhlIGBjb3VudGAgc3RhdGUgaXMgcHJpdmF0ZSB0byB0aGlzIGNvbXBvbmVudCBhbmQgY2Fubm90IGJlIHNldCBieSBhIHBhcmVudC5cbiAqICAgICAgICAgY29uc3QgW2NvdW50LCBzZXRDb3VudF0gPSB1c2VDb25maWcoMCk7XG4gKlxuICogICAgICAgICByZXR1cm4ge1xuICogICAgICAgICAgICAgdGFnOiAnZGl2JyxcbiAqICAgICAgICAgICAgIGNuOiBbe1xuICogICAgICAgICAgICAgICAgIHRhZzogJ2gxJyxcbiAqICAgICAgICAgICAgICAgICAvLyBBY2Nlc3MgdGhlIHB1YmxpYywgbmFtZWQgY29uZmlnIHZpYSB0aGUgYGNvbmZpZ2AgcGFyYW1ldGVyLlxuICogICAgICAgICAgICAgICAgIHRleHQ6IGNvbmZpZy50ZXh0XG4gKiAgICAgICAgICAgICB9LCB7XG4gKiAgICAgICAgICAgICAgICAgdGFnOiAncCcsXG4gKiAgICAgICAgICAgICAgICAgLy8gQWNjZXNzIHRoZSBwcml2YXRlLCBpbnRlcm5hbCBzdGF0ZSBkaXJlY3RseS5cbiAqICAgICAgICAgICAgICAgICB0ZXh0OiBgWW91IGNsaWNrZWQgJHtjb3VudH0gdGltZXNgXG4gKiAgICAgICAgICAgICB9LCB7XG4gKiAgICAgICAgICAgICAgICAgdGFnOiAnYnV0dG9uJyxcbiAqICAgICAgICAgICAgICAgICB0ZXh0OiAnQ2xpY2sgbWUnLFxuICogICAgICAgICAgICAgICAgIC8vIFRoZSBzZXR0ZXIgZnJvbSBgdXNlQ29uZmlnYCB1cGRhdGVzIHRoZSBpbnRlcm5hbCBzdGF0ZS5cbiAqICAgICAgICAgICAgICAgICBvbmNsaWNrOiAoKSA9PiBzZXRDb3VudChjb3VudCArIDEpXG4gKiAgICAgICAgICAgICB9XVxuICogICAgICAgICB9O1xuICogICAgIH0sXG4gKlxuICogICAgIC8vIDMuIExpZmVjeWNsZSBob29rcyBmb3IgbmFtZWQgY29uZmlncyB3b3JrIGF1dG9tYXRpY2FsbHkuXG4gKiAgICAgYWZ0ZXJTZXRUZXh0KG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xuICogICAgICAgICBjb25zb2xlLmxvZyhgVGV4dCBjaGFuZ2VkIGZyb20gJyR7b2xkVmFsdWV9JyB0byAnJHtuZXdWYWx1ZX0nYCk7XG4gKiAgICAgfVxuICogfSk7XG4gKlxuICogLy8gVGhlIHJldHVybmVkIE15Q29tcG9uZW50IGlzIGEgY2xhc3MgY29uc3RydWN0b3IgdGhhdCBjYW4gYmUgdXNlZCB3aXRoIE5lby5jcmVhdGUoKVxuICogLy8gY29uc3QgaW5zdGFuY2UgPSBOZW8uY3JlYXRlKE15Q29tcG9uZW50LCB7XG4gKiAvLyAgICAgdGV4dDogJ1dlbGNvbWUgdG8gTmVvLm1qcyEnIC8vIFNldCB0aGUgcHVibGljIGNvbmZpZyBvbiBjcmVhdGlvbi5cbiAqIC8vIH0pO1xuICovXG5leHBvcnQgZnVuY3Rpb24gZGVmaW5lQ29tcG9uZW50KHNwZWMpIHtcbiAgICBjb25zdCBjb25maWdTcGVjID0gc3BlYy5jb25maWc7XG4gICAgZGVsZXRlIHNwZWMuY29uZmlnO1xuXG4gICAgaWYgKCFjb25maWdTcGVjPy5jbGFzc05hbWUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdkZWZpbmVDb21wb25lbnQgcmVxdWlyZXMgYSBjb25maWcgb2JqZWN0IHdpdGggYSBjbGFzc05hbWUuJyk7XG4gICAgfVxuXG4gICAgY2xhc3MgRnVuY3Rpb25hbENvbXBvbmVudCBleHRlbmRzIEZ1bmN0aW9uYWxCYXNlIHtcbiAgICAgICAgc3RhdGljIGNvbmZpZyA9IHtcbiAgICAgICAgICAgIC4uLmNvbmZpZ1NwZWNcbiAgICAgICAgICAgIC8vIFdlIGNhbiBhZGQgb3VyIG93biBjb25maWd1cmF0aW9ucyBoZXJlXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBBc3NpZ24gaW5zdGFuY2UgbWV0aG9kc1xuICAgIE9iamVjdC5lbnRyaWVzKHNwZWMpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgICBGdW5jdGlvbmFsQ29tcG9uZW50LnByb3RvdHlwZVtrZXldID0gdmFsdWVcbiAgICB9KTtcblxuICAgIC8vIFRvIHN1cHBvcnQgbXVsdGlwbGUgZW52cyAobGlrZSBgZGV2bW9kZWAsIGBkaXN0L2VzbWAsIGBkaXN0L3Byb2R1Y3Rpb25gIGluIHBhcmFsbGVsLFxuICAgIC8vIHdlIG11c3QgcmUtYXNzaWduIEZ1bmN0aW9uYWxDb21wb25lbnQgdG8gdGhlIHNldHVwQ2xhc3MoKSBvdXRwdXQuXG4gICAgRnVuY3Rpb25hbENvbXBvbmVudCA9IE5lby5zZXR1cENsYXNzKEZ1bmN0aW9uYWxDb21wb25lbnQpO1xuXG4gICAgcmV0dXJuIEZ1bmN0aW9uYWxDb21wb25lbnRcbn1cblxuZXhwb3J0IGRlZmF1bHQgZGVmaW5lQ29tcG9uZW50O1xuIiwiaW1wb3J0IENvbmZpZyAgICAgICAgZnJvbSAnLi4vY29yZS9Db25maWcubWpzJztcbmltcG9ydCBFZmZlY3RNYW5hZ2VyIGZyb20gJy4uL2NvcmUvRWZmZWN0TWFuYWdlci5tanMnO1xuXG5jb25zdFxuICAgIGhvb2tJbmRleFN5bWJvbCA9IFN5bWJvbC5mb3IoJ2hvb2tJbmRleCcpLFxuICAgIGhvb2tzU3ltYm9sICAgICA9IFN5bWJvbC5mb3IoJ2hvb2tzJyk7XG5cbi8qKlxuICogQSBob29rIGZvciBtYW5hZ2luZyByZWFjdGl2ZSBzdGF0ZSB3aXRoaW4gYSBmdW5jdGlvbmFsIGNvbXBvbmVudCdzIGBjcmVhdGVWZG9tYCBtZXRob2QuXG4gKiBJdCBtaXJyb3JzIHRoZSBiZWhhdmlvciBvZiBSZWFjdCdzIGB1c2VTdGF0ZWAgYnV0IGlzIHBvd2VyZWQgYnkgYE5lby5jb3JlLkNvbmZpZ2AgZm9yIHJlYWN0aXZpdHkuXG4gKiBAcGFyYW0geyp9IGluaXRpYWxWYWx1ZSBUaGUgaW5pdGlhbCB2YWx1ZSBmb3IgdGhlIHN0YXRlLlxuICogQHJldHVybnMge0FycmF5PGFueT59IEEgdHVwbGUgY29udGFpbmluZyB0aGUgY3VycmVudCB2YWx1ZSBhbmQgYSBzZXR0ZXIgZnVuY3Rpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VDb25maWcoaW5pdGlhbFZhbHVlKSB7XG4gICAgRWZmZWN0TWFuYWdlci5wYXVzZSgpO1xuXG4gICAgY29uc3RcbiAgICAgICAgZWZmZWN0ICAgID0gRWZmZWN0TWFuYWdlci5nZXRBY3RpdmVFZmZlY3QoKSxcbiAgICAgICAgY29tcG9uZW50ID0gZWZmZWN0ICYmIE5lby5nZXRDb21wb25lbnQoZWZmZWN0LmNvbXBvbmVudElkKTtcblxuICAgIGlmICghY29tcG9uZW50KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcigndXNlQ29uZmlnIG11c3QgYmUgY2FsbGVkIGZyb20gd2l0aGluIGEgZnVuY3Rpb25hbCBjb21wb25lbnRcXCdzIGNyZWF0ZVZkb20gbWV0aG9kLicpXG4gICAgfVxuXG4gICAgY29uc3QgY3VycmVudEluZGV4ID0gY29tcG9uZW50W2hvb2tJbmRleFN5bWJvbF07XG5cbiAgICAvLyBJbmNyZW1lbnQgdGhlIGluZGV4IGZvciB0aGUgbmV4dCBob29rIGNhbGwgd2l0aGluIHRoZSBzYW1lIGNvbXBvbmVudCByZW5kZXIgY3ljbGUuXG4gICAgY29tcG9uZW50W2hvb2tJbmRleFN5bWJvbF0rKztcblxuICAgIC8vIElmIHRoaXMgaXMgdGhlIGZpcnN0IHRpbWUgdGhpcyBob29rIGlzIGJlaW5nIGNhbGxlZCBmb3IgdGhpcyBjb21wb25lbnQsIGluaXRpYWxpemUgaXRzIHN0YXRlLlxuICAgIGlmICghY29tcG9uZW50W2hvb2tzU3ltYm9sXVtjdXJyZW50SW5kZXhdKSB7XG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IG5ldyBDb25maWcoaW5pdGlhbFZhbHVlKTtcblxuICAgICAgICBjb25zdCBjdXN0b21TZXR0ZXIgPSAobmV3VmFsdWUpID0+IHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbmV3VmFsdWUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBuZXdWYWx1ZSA9IG5ld1ZhbHVlKGNvbmZpZy5nZXQoKSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbmZpZy5zZXQobmV3VmFsdWUpXG4gICAgICAgIH07XG5cbiAgICAgICAgY29tcG9uZW50W2hvb2tzU3ltYm9sXVtjdXJyZW50SW5kZXhdID0gW2NvbmZpZywgY3VzdG9tU2V0dGVyXVxuICAgIH1cblxuICAgIGNvbnN0IFtjb25maWcsIHNldHRlcl0gPSBjb21wb25lbnRbaG9va3NTeW1ib2xdW2N1cnJlbnRJbmRleF07XG5cbiAgICBFZmZlY3RNYW5hZ2VyLnJlc3VtZSgpO1xuXG4gICAgLy8gQ2FsbCBjb25maWcuZ2V0KCkgdG8gZW5zdXJlIHRoaXMgY29tcG9uZW50J3MgZWZmZWN0IHRyYWNrcyB0aGlzIGNvbmZpZyBhcyBhIGRlcGVuZGVuY3kuXG4gICAgcmV0dXJuIFtjb25maWcuZ2V0KCksIHNldHRlcl1cbn1cblxuZXhwb3J0IGRlZmF1bHQgdXNlQ29uZmlnO1xuIiwiaW1wb3J0IEVmZmVjdE1hbmFnZXIgZnJvbSAnLi4vY29yZS9FZmZlY3RNYW5hZ2VyLm1qcyc7XG5cbmNvbnN0IHBlbmRpbmdEb21FdmVudHNTeW1ib2wgPSBTeW1ib2wuZm9yKCdwZW5kaW5nRG9tRXZlbnRzJyk7XG5cbi8qKlxuICogQSBob29rIGZvciByZWdpc3RlcmluZyBET00gZXZlbnQgbGlzdGVuZXJzIHdpdGhpbiBhIGZ1bmN0aW9uYWwgY29tcG9uZW50LlxuICogRXZlbnQgbGlzdGVuZXJzIHJlZ2lzdGVyZWQgdmlhIHRoaXMgaG9vayB3aWxsIGJlIG1hbmFnZWQgYnkgTmVvLm1qcydzXG4gKiBkZWxlZ2F0ZWQgRE9NIGV2ZW50IHN5c3RlbSwgZW5zdXJpbmcgZWZmaWNpZW50IGFuZCBwcm9wZXIgbGlmZWN5Y2xlIGhhbmRsaW5nLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFR5cGUgLSBUaGUgdHlwZSBvZiBET00gZXZlbnQgdG8gbGlzdGVuIGZvciAoZS5nLiwgJ2NsaWNrJywgJ2lucHV0JykuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyIC0gVGhlIGV2ZW50IGhhbmRsZXIgZnVuY3Rpb24uIEl0IHdpbGwgcmVjZWl2ZSB0aGUgZXZlbnQgZGF0YSBhcyBpdHMgYXJndW1lbnQuXG4gKiBAcGFyYW0ge1N0cmluZ30gW2RlbGVnYXRlXSAtIEFuIG9wdGlvbmFsIENTUyBzZWxlY3RvciBmb3IgZXZlbnQgZGVsZWdhdGlvbi4gSWYgcHJvdmlkZWQsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGUgaGFuZGxlciB3aWxsIG9ubHkgZmlyZSBpZiB0aGUgZXZlbnQgdGFyZ2V0IG1hdGNoZXMgdGhpcyBzZWxlY3Rvci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZUV2ZW50KGV2ZW50VHlwZSwgaGFuZGxlciwgZGVsZWdhdGUpIHtcbiAgICBjb25zdFxuICAgICAgICBhY3RpdmVFZmZlY3QgPSBFZmZlY3RNYW5hZ2VyLmdldEFjdGl2ZUVmZmVjdCgpLFxuICAgICAgICBjb21wb25lbnRJZCAgPSBhY3RpdmVFZmZlY3Q/LmNvbXBvbmVudElkO1xuXG4gICAgaWYgKCFjb21wb25lbnRJZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3VzZUV2ZW50IG11c3QgYmUgY2FsbGVkIGZyb20gd2l0aGluIGEgZnVuY3Rpb25hbCBjb21wb25lbnRcXCdzIGNyZWF0ZVZkb20gbWV0aG9kLicpXG4gICAgfVxuXG4gICAgRWZmZWN0TWFuYWdlci5wYXVzZSgpO1xuICAgIGNvbnN0IGNvbXBvbmVudCA9IE5lby5nZXRDb21wb25lbnQoY29tcG9uZW50SWQpO1xuICAgIEVmZmVjdE1hbmFnZXIucmVzdW1lKCk7XG5cbiAgICBpZiAoIWNvbXBvbmVudCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENvbXBvbmVudCB3aXRoIGlkICR7Y29tcG9uZW50SWR9IG5vdCBmb3VuZCBmb3IgdXNlRXZlbnQgaG9vay5gKTtcbiAgICB9XG5cbiAgICAvLyBFbnN1cmUgcGVuZGluZ0RvbUV2ZW50c1N5bWJvbCBleGlzdHMgb24gdGhlIGNvbXBvbmVudCBpbnN0YW5jZVxuICAgIGNvbXBvbmVudFtwZW5kaW5nRG9tRXZlbnRzU3ltYm9sXSA/Pz0gW107XG5cbiAgICAvLyBBZGQgdGhlIGV2ZW50IGxpc3RlbmVyIGNvbmZpZ3VyYXRpb24gdG8gdGhlIGNvbXBvbmVudCdzIHBlbmRpbmcgbGlzdFxuICAgIGNvbXBvbmVudFtwZW5kaW5nRG9tRXZlbnRzU3ltYm9sXS5wdXNoKHtcbiAgICAgICAgW2V2ZW50VHlwZV06IGhhbmRsZXIsXG4gICAgICAgIGRlbGVnYXRlLFxuICAgICAgICBzY29wZSAgICAgIDogY29tcG9uZW50IC8vIFRoZSBjb21wb25lbnQgaW5zdGFuY2UgaXRzZWxmIHdpbGwgYmUgdGhlIHNjb3BlXG4gICAgfSlcbn1cblxuZXhwb3J0IGRlZmF1bHQgdXNlRXZlbnQ7XG4iLCJpbXBvcnQgQnV0dG9uICAgIGZyb20gJy4uL2J1dHRvbi9CYXNlLm1qcyc7XG5pbXBvcnQgQ29tcG9uZW50IGZyb20gJy4uL2NvbXBvbmVudC9CYXNlLm1qcyc7XG5pbXBvcnQgQ29udGFpbmVyIGZyb20gJy4uL2NvbnRhaW5lci9CYXNlLm1qcyc7XG5pbXBvcnQgTGFiZWwgICAgIGZyb20gJy4uL2NvbXBvbmVudC9MYWJlbC5tanMnO1xuaW1wb3J0IE5lb0FycmF5ICBmcm9tICcuLi91dGlsL0FycmF5Lm1qcyc7XG5cbi8qKlxuICogQGNsYXNzIE5lby50b29sYmFyLkJhc2VcbiAqIEBleHRlbmRzIE5lby5jb250YWluZXIuQmFzZVxuICovXG5jbGFzcyBUb29sYmFyIGV4dGVuZHMgQ29udGFpbmVyIHtcbiAgICAvKipcbiAgICAgKiBWYWxpZCB2YWx1ZXMgZm9yIGRvY2tcbiAgICAgKiBAbWVtYmVyIHtTdHJpbmdbXX0gZG9ja1Bvc2l0aW9ucz1bJ3RvcCcsJ3JpZ2h0JywnYm90dG9tJywnbGVmdCcsIG51bGxdXG4gICAgICogQHN0YXRpY1xuICAgICAqL1xuICAgIHN0YXRpYyBkb2NrUG9zaXRpb25zID0gWyd0b3AnLCAncmlnaHQnLCAnYm90dG9tJywgJ2xlZnQnLCBudWxsXVxuXG4gICAgc3RhdGljIGNvbmZpZyA9IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ30gY2xhc3NOYW1lPSdOZW8udG9vbGJhci5CYXNlJ1xuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICBjbGFzc05hbWU6ICdOZW8udG9vbGJhci5CYXNlJyxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ30gbnR5cGU9J3Rvb2xiYXInXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIG50eXBlOiAndG9vbGJhcicsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtTdHJpbmdbXX0gYmFzZUNscz1bJ25lby10b29sYmFyJ11cbiAgICAgICAgICovXG4gICAgICAgIGJhc2VDbHM6IFsnbmVvLXRvb2xiYXInXSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ3xudWxsfSBkb2NrXz1udWxsXG4gICAgICAgICAqIEByZWFjdGl2ZVxuICAgICAgICAgKi9cbiAgICAgICAgZG9ja186IG51bGwsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtPYmplY3R9IGl0ZW1EZWZhdWx0cz17bnR5cGU6J2J1dHRvbid9XG4gICAgICAgICAqIEByZWFjdGl2ZVxuICAgICAgICAgKi9cbiAgICAgICAgaXRlbURlZmF1bHRzOiB7XG4gICAgICAgICAgICBudHlwZTogJ2J1dHRvbidcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge09iamVjdH0gbGF5b3V0PXtudHlwZTonZmxleGJveCcsYWxpZ246J2NlbnRlcicsZGlyZWN0aW9uOiAncm93JywgcGFjazonc3RhcnQnfVxuICAgICAgICAgKiBAcmVhY3RpdmVcbiAgICAgICAgICovXG4gICAgICAgIGxheW91dDoge1xuICAgICAgICAgICAgbnR5cGUgICAgOiAnZmxleGJveCcsXG4gICAgICAgICAgICBhbGlnbiAgICA6ICdjZW50ZXInLFxuICAgICAgICAgICAgZGlyZWN0aW9uOiAncm93JyxcbiAgICAgICAgICAgIHBhY2sgICAgIDogJ3N0YXJ0J1xuICAgICAgICB9LFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7Qm9vbGVhbn0gc29ydGFibGVfPWZhbHNlXG4gICAgICAgICAqIEByZWFjdGl2ZVxuICAgICAgICAgKi9cbiAgICAgICAgc29ydGFibGVfOiBmYWxzZSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge05lby5kcmFnZ2FibGUudG9vbGJhci5Tb3J0Wm9uZXxudWxsfSBzb3J0Wm9uZT1udWxsXG4gICAgICAgICAqL1xuICAgICAgICBzb3J0Wm9uZTogbnVsbCxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge09iamVjdH0gc29ydFpvbmVDb25maWc9bnVsbFxuICAgICAgICAgKi9cbiAgICAgICAgc29ydFpvbmVDb25maWc6IG51bGxcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgYWZ0ZXIgdGhlIGFwcE5hbWUgY29uZmlnIGdvdCBjaGFuZ2VkXG4gICAgICogQHBhcmFtIHtTdHJpbmd8bnVsbH0gdmFsdWVcbiAgICAgKiBAcGFyYW0ge1N0cmluZ3xudWxsfSBvbGRWYWx1ZVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBhZnRlclNldEFwcE5hbWUodmFsdWUsIG9sZFZhbHVlKSB7XG4gICAgICAgIHN1cGVyLmFmdGVyU2V0QXBwTmFtZSh2YWx1ZSwgb2xkVmFsdWUpO1xuXG4gICAgICAgIGlmICh0aGlzLnNvcnRab25lKSB7XG4gICAgICAgICAgICB0aGlzLnNvcnRab25lLmFwcE5hbWUgPSB2YWx1ZVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIGFmdGVyIHRoZSBkb2NrIGNvbmZpZyBnb3QgY2hhbmdlZFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBvbGRWYWx1ZVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBhZnRlclNldERvY2sodmFsdWUsIG9sZFZhbHVlKSB7XG4gICAgICAgIGlmICghdmFsdWUgJiYgIW9sZFZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBtZSAgICAgICAgICAgID0gdGhpcyxcbiAgICAgICAgICAgIHtjbHN9ICAgICAgICAgPSBtZSxcbiAgICAgICAgICAgIGRvY2tQb3NpdGlvbnMgPSBtZS5nZXRTdGF0aWNDb25maWcoJ2RvY2tQb3NpdGlvbnMnKSxcbiAgICAgICAgICAgIGxheW91dENvbmZpZyAgPSBtZS5nZXRMYXlvdXRDb25maWcoKTtcblxuICAgICAgICBkb2NrUG9zaXRpb25zLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgICAgIGtleSAhPT0gbnVsbCAmJiBOZW9BcnJheS50b2dnbGUoY2xzLCAnbmVvLWRvY2stJyArIGtleSwga2V5ID09PSB2YWx1ZSlcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCFtZS5sYXlvdXQpIHtcbiAgICAgICAgICAgIGxheW91dENvbmZpZy5udHlwZSA9ICdmbGV4Ym94JztcbiAgICAgICAgICAgIG1lLnNldCh7Y2xzLCBsYXlvdXQ6IGxheW91dENvbmZpZ30pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBtZS5sYXlvdXQuc2V0KGxheW91dENvbmZpZyk7XG4gICAgICAgICAgICBtZS5jbHMgPSBjbHM7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgYWZ0ZXIgdGhlIHNvcnRhYmxlIGNvbmZpZyBnb3QgY2hhbmdlZFxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gdmFsdWVcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IG9sZFZhbHVlXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIGFmdGVyU2V0U29ydGFibGUodmFsdWUsIG9sZFZhbHVlKSB7XG4gICAgICAgIGxldCBtZSA9IHRoaXM7XG5cbiAgICAgICAgaWYgKHZhbHVlICYmICFtZS5zb3J0Wm9uZSkge1xuICAgICAgICAgICAgaW1wb3J0KCcuLi9kcmFnZ2FibGUvdG9vbGJhci9Tb3J0Wm9uZS5tanMnKS50aGVuKG1vZHVsZSA9PiB7XG4gICAgICAgICAgICAgICAgbWUuc29ydFpvbmUgPSBOZW8uY3JlYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgbW9kdWxlICAgICAgICAgICAgIDogbW9kdWxlLmRlZmF1bHQsXG4gICAgICAgICAgICAgICAgICAgIGFwcE5hbWUgICAgICAgICAgICA6IG1lLmFwcE5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGJvdW5kYXJ5Q29udGFpbmVySWQ6IG1lLmlkLFxuICAgICAgICAgICAgICAgICAgICBvd25lciAgICAgICAgICAgICAgOiBtZSxcbiAgICAgICAgICAgICAgICAgICAgd2luZG93SWQgICAgICAgICAgIDogbWUud2luZG93SWQsXG4gICAgICAgICAgICAgICAgICAgIC4uLm1lLnNvcnRab25lQ29uZmlnXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgYWZ0ZXIgdGhlIHdpbmRvd0lkIGNvbmZpZyBnb3QgY2hhbmdlZFxuICAgICAqIEBwYXJhbSB7TnVtYmVyfG51bGx9IHZhbHVlXG4gICAgICogQHBhcmFtIHtOdW1iZXJ8bnVsbH0gb2xkVmFsdWVcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgYWZ0ZXJTZXRXaW5kb3dJZCh2YWx1ZSwgb2xkVmFsdWUpIHtcbiAgICAgICAgc3VwZXIuYWZ0ZXJTZXRXaW5kb3dJZCh2YWx1ZSwgb2xkVmFsdWUpO1xuXG4gICAgICAgIGlmICh0aGlzLnNvcnRab25lKSB7XG4gICAgICAgICAgICB0aGlzLnNvcnRab25lLndpbmRvd0lkID0gdmFsdWVcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiB0aGUgbmV3IGRvY2sgcG9zaXRpb24gbWF0Y2hlcyBhIHZhbHVlIG9mIHRoZSBzdGF0aWMgZG9ja1Bvc2l0aW9ucyBjb25maWdcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdmFsdWVcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gb2xkVmFsdWVcbiAgICAgKiBAcmV0dXJucyB7U3RyaW5nfSB2YWx1ZVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBiZWZvcmVTZXREb2NrKHZhbHVlLCBvbGRWYWx1ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5iZWZvcmVTZXRFbnVtVmFsdWUodmFsdWUsIG9sZFZhbHVlLCAnZG9jaycsICdkb2NrUG9zaXRpb25zJylcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqL1xuICAgIGNyZWF0ZUl0ZW1zKCkge1xuICAgICAgICBsZXQgaXRlbXMgPSB0aGlzLl9pdGVtcztcblxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShpdGVtcykpIHtcbiAgICAgICAgICAgIHRoaXMuX2l0ZW1zID0gaXRlbXMubWFwKGl0ZW0gPT4gdGhpcy5yZXBsYWNlU3BhY2VyKGl0ZW0pKVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHN1cGVyLmNyZWF0ZUl0ZW1zKClcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbGF5b3V0IGNvbmZpZyBkZXBlbmRpbmcgb24gdGhpcy5kb2NrXG4gICAgICogQHJldHVybnMge09iamVjdH0gbGF5b3V0Q29uZmlnXG4gICAgICovXG4gICAgZ2V0TGF5b3V0Q29uZmlnKCkge1xuICAgICAgICBsZXQgbWUgPSB0aGlzLFxuICAgICAgICAgICAgbGF5b3V0Q29uZmlnO1xuXG4gICAgICAgIGlmIChtZS5kb2NrKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKG1lLmRvY2spIHtcbiAgICAgICAgICAgICAgICBjYXNlICdib3R0b20nOlxuICAgICAgICAgICAgICAgIGNhc2UgJ3RvcCc6XG4gICAgICAgICAgICAgICAgICAgIGxheW91dENvbmZpZyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsaWduICAgIDogJ2NlbnRlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb246ICdyb3cnLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFjayAgICAgOiAnc3RhcnQnXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgY2FzZSAnbGVmdCc6XG4gICAgICAgICAgICAgICAgICAgIGxheW91dENvbmZpZyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsaWduICAgIDogJ2NlbnRlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb246ICdjb2x1bW4tcmV2ZXJzZScsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWNrICAgICA6ICdzdGFydCdcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICBjYXNlICdyaWdodCc6XG4gICAgICAgICAgICAgICAgICAgIGxheW91dENvbmZpZyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsaWduICAgIDogJ2NlbnRlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb246ICdjb2x1bW4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFjayAgICAgOiAnc3RhcnQnXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbGF5b3V0Q29uZmlnIHx8IG1lLmxheW91dFxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEluc2VydHMgYW4gaXRlbSBvciBhcnJheSBvZiBpdGVtcyBhdCBhIHNwZWNpZmljIGluZGV4XG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG4gICAgICogQHBhcmFtIHtBcnJheXxPYmplY3R9IGl0ZW1cbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtzaWxlbnQ9ZmFsc2VdXG4gICAgICogQHJldHVybnMge05lby5jb21wb25lbnQuQmFzZXxOZW8uY29tcG9uZW50LkJhc2VbXX1cbiAgICAgKi9cbiAgICBpbnNlcnQoaW5kZXgsIGl0ZW0sIHNpbGVudD1mYWxzZSkge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShpdGVtKSkge1xuICAgICAgICAgICAgaXRlbSA9IGl0ZW0ubWFwKGl0ZW0gPT4gdGhpcy5yZXBsYWNlU3BhY2VyKGl0ZW0pKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaXRlbSA9IHRoaXMucmVwbGFjZVNwYWNlcihpdGVtKVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHN1cGVyLmluc2VydChpbmRleCwgaXRlbSwgc2lsZW50KVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fFN0cmluZ30gaXRlbVxuICAgICAqIEByZXR1cm5zIHtBcnJheXxPYmplY3R9XG4gICAgICovXG4gICAgcmVwbGFjZVNwYWNlcihpdGVtKSB7XG4gICAgICAgIHJldHVybiBpdGVtID09PSAnLT4nID8ge21vZHVsZTogQ29tcG9uZW50LCBmbGV4OiAxfSA6IGl0ZW1cbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IE5lby5zZXR1cENsYXNzKFRvb2xiYXIpO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9