export const __webpack_esm_id__ = "vendors-examples_container_accordion_app_mjs";
export const __webpack_esm_ids__ = ["vendors-examples_container_accordion_app_mjs"];
export const __webpack_esm_modules__ = {

/***/ "./examples/container/accordion/MainContainer.mjs"
/*!********************************************************!*\
  !*** ./examples/container/accordion/MainContainer.mjs ***!
  \********************************************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _src_container_Accordion_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../src/container/Accordion.mjs */ "./src/container/Accordion.mjs");
/* harmony import */ var _ConfigurationViewport_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../ConfigurationViewport.mjs */ "./examples/ConfigurationViewport.mjs");
/* harmony import */ var _src_container_Base_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../src/container/Base.mjs */ "./src/container/Base.mjs");




/**
 * @class Neo.examples.button.base.MainContainer
 * @extends Neo.examples.ConfigurationViewport
 */
class MainContainer extends _ConfigurationViewport_mjs__WEBPACK_IMPORTED_MODULE_1__["default"] {
    static config = {
        className           : 'Neo.examples.button.base.MainContainer',
        configItemLabelWidth: 160,
        configItemWidth     : 280,
        layout              : {ntype: 'hbox', align: 'stretch'}
    }

    createConfigurationComponents() {
        return [{
            ntype: 'component',
            html : '<u><b>TOP ACCORDION</b></u>',
            style: {marginTop: '10px'},
        }, {
            ntype: 'component',
            html : '<b>maxExpandedItems:</b> 2',
            style: {marginTop: '10px'},
        }, {
            ntype: 'component',
            html : '<b>initialOpen:</b> [0, 1]',
            style: {marginTop: '10px'},
        }, {
            ntype: 'component',
            html : '<u><b>BOTTOM ACCORDION</b></u>',
            style: {marginTop: '10px'},
        }, {
            ntype: 'component',
            html : '<b>maxExpandedItems:</b> 1',
            style: {marginTop: '10px'},
        }, {
            ntype: 'component',
            html : '<b>initialOpen:</b> [0]',
            style: {marginTop: '10px'},
        }]
    }

    createExampleComponent() {
        return Neo.create({
            module: _src_container_Base_mjs__WEBPACK_IMPORTED_MODULE_2__["default"],
            items : [{
                module: _src_container_Accordion_mjs__WEBPACK_IMPORTED_MODULE_0__["default"],

                title           : 'TOP',
                maxExpandedItems: 2,
                initialOpen     : [0, 1],

                height: 550,
                style : {
                    backgroundColor: 'grey',
                    padding        : '15px'
                },

                items: [{
                    iconCls: 'fa fa-dice-one',
                    title  : 'First Headerbar',
                    items  : [{
                        ntype: 'component',
                        html : 'Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Maecenas porttitor congue massa. Fusce posuere, magna sed pulvinar ultricies, purus lectus malesuada libero, sit amet commodo magna eros quis urna.'
                    }]
                }, {
                    iconCls: 'fa-dice-two',
                    title  : 'Second Headerbar',
                    items  : [{
                        html: 'Nunc viverra imperdiet enim. Fusce est. Vivamus a tellus.'
                    }]
                }, {
                    iconCls: 'fa-dice-three',
                    title  : 'Third Headerbar',
                    items  : [{
                        html: 'Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Proin pharetra nonummy pede. Mauris et orci.'
                    }]
                }]
            }, {
                module: _src_container_Accordion_mjs__WEBPACK_IMPORTED_MODULE_0__["default"],

                title           : 'bottom',
                maxExpandedItems: 1,
                initialOpen     : [0],

                height: 550,
                style : {
                    backgroundColor: 'darkgrey',
                    padding        : '15px'
                },

                items: [{
                    iconCls: 'fa fa-1',
                    title  : 'Define Content',
                    items  : [{
                        ntype: 'component',
                        html : 'Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Maecenas porttitor congue massa. Fusce posuere, magna sed pulvinar ultricies, purus lectus malesuada libero, sit amet commodo magna eros quis urna.'
                    }]
                }, {
                    iconCls: 'fa-2',
                    title  : 'Mark Best Fit',
                    items  : [{
                        html: 'Nunc viverra imperdiet enim. Fusce est. Vivamus a tellus.'
                    }]
                }, {
                    iconCls: 'fa-3',
                    title  : 'Create Invoice',
                    items  : [{
                        html: 'Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Proin pharetra nonummy pede. Mauris et orci.'
                    }]
                }]
            }]
        })
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(MainContainer));


/***/ },

/***/ "./examples/container/accordion/app.mjs"
/*!**********************************************!*\
  !*** ./examples/container/accordion/app.mjs ***!
  \**********************************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   onStart: () => (/* binding */ onStart)
/* harmony export */ });
/* harmony import */ var _MainContainer_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MainContainer.mjs */ "./examples/container/accordion/MainContainer.mjs");


const onStart = () => Neo.app({
    mainView: _MainContainer_mjs__WEBPACK_IMPORTED_MODULE_0__["default"],
    name    : 'Neo.examples.container.accordion'
});

/***/ },

/***/ "./src/container/Accordion.mjs"
/*!*************************************!*\
  !*** ./src/container/Accordion.mjs ***!
  \*************************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _AccordionItem_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AccordionItem.mjs */ "./src/container/AccordionItem.mjs");
/* harmony import */ var _util_Array_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../util/Array.mjs */ "./src/util/Array.mjs");
/* harmony import */ var _Panel_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Panel.mjs */ "./src/container/Panel.mjs");




/**
 * @class Neo.container.Accordion
 * @extends Neo.container.Panel
 */
class Accordion extends _Panel_mjs__WEBPACK_IMPORTED_MODULE_2__["default"] {
    static config = {
        /**
         * @member {String} className='Neo.container.Accordion'
         * @protected
         */
        className: 'Neo.container.Accordion',
        /**
         * @member {String} ntype='accordion'
         * @protected
         */
        ntype: 'accordion',
        /**
         * @member {String[]} baseCls=['neo-accordion']
         */
        baseCls: ['neo-accordion'],
        /**
         * Add zero based numbers, which accordion items you want initially expanded
         * @member {Number[]} initialOpen=[]
         */
        initialOpen_: [],
        /**
         * @member {Object} itemDefaults={ntype:'accordionitem'}
         * @reactive
         */
        itemDefaults: {ntype: 'accordionitem'},
        /**
         * @member {Object[]} items=[]
         * @reactive
         */
        items: [],
        /**
         * Max number of accordion items, which can be expanded at the same time
         * @member {Number} maxExpandedItems=1
         */
        maxExpandedItems: 1,
        /**
         * Keep track of currently open items
         * @member {String[]} expandedItems=[]
         * @private
         */
        expandedItems_: [],
        /**
         * Creates a top header
         * @member {String|null} title=null
         */
        title_: null
    }

    /**
     * @param {Number[]} value
     * @param {Number[]} oldValue
     */
    afterSetInitialOpen(value, oldValue) {
        let me                     = this,
            {expandedItems, items} = me,
            id, item;

        value.forEach((itemNo) => {
            id   = Neo.getId(me.itemDefaults.ntype),
            item = items[itemNo];

            item.expanded = true;
            item.id       = id;
            _util_Array_mjs__WEBPACK_IMPORTED_MODULE_1__["default"].add(expandedItems, id)
        });

        me.expandedItems = expandedItems
    }

    /**
     * After changes to title config, we add a header
     * @param {String|null} value
     * @param {String|null} oldValue
     */
    afterSetTitle(value, oldValue) {
        let me      = this,
            titleEl = me.down({flag: 'titleEl'});

        if (value && !titleEl) {
            me.headers = [{
                baseCls: 'neo-accordion-title',
                cls    : ['neo-accordion-title'],
                dock   : 'top',
                text   : value
            }]
        }
    }

    /**
     * Called by accordion items.
     * Checks for maxExpandedItems
     * @param {Object}                      data
     * @param {Boolean}                     data.expanded newState
     * @param {Neo.container.AccordionItem} data.target   accordion item
     * @protected
     */
    childExpandChange(data) {
        let me                                = this,
            {expandedItems, maxExpandedItems} = me,
            {expanded, target}                = data,
            curNoOpenItems                    = expandedItems.length,
            targetId                          = target.id;

        if (expanded
            && maxExpandedItems !== 0
            && curNoOpenItems === maxExpandedItems
        ) {
            Neo.get(expandedItems[0]).expanded = false;
            _util_Array_mjs__WEBPACK_IMPORTED_MODULE_1__["default"].remove(expandedItems, expandedItems[0])
        }

        target.expanded = expanded;
        _util_Array_mjs__WEBPACK_IMPORTED_MODULE_1__["default"].toggle(expandedItems, targetId);

        me.expandedItems = expandedItems
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(Accordion));


/***/ },

/***/ "./src/container/AccordionItem.mjs"
/*!*****************************************!*\
  !*** ./src/container/AccordionItem.mjs ***!
  \*****************************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _Base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Base.mjs */ "./src/container/Base.mjs");
/* harmony import */ var _toolbar_Base_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../toolbar/Base.mjs */ "./src/toolbar/Base.mjs");
/* harmony import */ var _util_Array_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../util/Array.mjs */ "./src/util/Array.mjs");




/**
 * @class Neo.container.AccordionItem
 * @extends Neo.container.Base
 */
class AccordionContainer extends _Base_mjs__WEBPACK_IMPORTED_MODULE_0__["default"] {
    static config = {
        /**
         * @member {String} className='Neo.container.AccordionItem'
         * @protected
         */
        className: 'Neo.container.AccordionItem',
        /**
         * @member {String} ntype='accordionitem'
         * @protected
         */
        ntype: 'accordionitem',
        /**
         * @member {String[]} baseCls=['neo-accordion-component']
         */
        baseCls: ['neo-accordion-item'],

        /**
         * Additional cls for the arrow, in case you need to customize it
         * @member {String[]|String|null} arrowCls=null
         */
        arrowCls: null,
        /**
         * Expand or collapse (true/false) this value
         * @member {Boolean} expanded=false
         */
        expanded_: false,
        /**
         * cls for the icon in front of the title
         * May be empty. 'fa' is preset,
         * so if you use fontawesome you do not have to add it.
         *
         * @member {String[]|String|null} iconCls=null
         */
        iconCls_: null,
        /**
         * Title for Headerbar
         * @member {String|null} title=null
         */
        title_: null
    }

    /**
     * Runs after afterSetTitle, so that the title component does not exist prior.
     * @protected
     */
    createItems() {
        let me       = this,
            arrowCls = me.arrowCls || 'fa-caret-down',
            iconCls  = me.iconCls  || ['no-icon'],
            {items, title} = me,
            header, content;

        if (!Neo.isArray(iconCls)) {
            iconCls = iconCls.split(' ')
        }

        if (!Neo.isArray(arrowCls)) {
            arrowCls = arrowCls.split(' ')
        }

        header = Neo.create({
            module: _toolbar_Base_mjs__WEBPACK_IMPORTED_MODULE_1__["default"],
            items : [{
                flag   : 'iconEl',
                ntype  : 'component',
                baseCls: ['neo-accordion-header-icon'],
                cls    : ['fa', ...iconCls],
            }, {
                flag   : 'titleEl',
                ntype  : 'component',
                baseCls: ['neo-accordion-header-title'],
                text   : title
            }, {
                ntype  : 'component',
                baseCls: ['neo-accordion-header-arrow'],
                cls    : ['fa', ...arrowCls]
            }]
        });

        content = {
            ntype  : 'container',
            flag   : 'content',
            baseCls: ['neo-accordion-content', 'neo-container'],
            items  : items
        };

        me.items = [header, content];

        super.createItems();

        me.addDomListeners([
            {click: me.onExpandClick, delegate: 'neo-accordion-header-arrow'}
        ])
    }

    /**
     * After changing expanded, we expand/collapse via CSS
     * @param {Boolean} isExpanded
     */
    afterSetExpanded(isExpanded) {
        let me    = this,
            {cls} = me,
            fn    = isExpanded ? 'add' : 'remove';

        _util_Array_mjs__WEBPACK_IMPORTED_MODULE_2__["default"][fn](cls, 'neo-expanded');
        me.cls = cls;

        // Ensure scrollbars are not flipping in and out
        me.timeout(450).then(() => {
            _util_Array_mjs__WEBPACK_IMPORTED_MODULE_2__["default"][fn](cls, 'neo-scrollable');
            me.cls = cls
        })
    }

    /**
     * The initial title is set before the component is created,
     * so we have to check if it exists.
     *
     * @param {String[]|String} newValue
     * @param {String[]} oldValue
     */
    afterSetIconCls(newValue, oldValue) {
        let iconEl = this.down({flag: 'iconEl'});

        if (iconEl) {
            let cls = iconEl.cls;

            if (!Neo.isArray(newValue)) {
                newValue = newValue.split(' ')
            }

            _util_Array_mjs__WEBPACK_IMPORTED_MODULE_2__["default"].remove(cls, oldValue);
            _util_Array_mjs__WEBPACK_IMPORTED_MODULE_2__["default"].add(cls, newValue);
            iconEl.cls = cls
        }
    }

    /**
     * The initial title is set before the component is created,
     * so we have to check if it exists.
     *
     * @param {String} newValue
     */
    afterSetTitle(newValue) {
        let titleEl = this.down({flag: 'titleEl'});

        if (titleEl) {
            titleEl.text = newValue
        }
    }

    /**
     * If the parent is an AccordionContainer, we run the parent function.
     * Otherwise we set this.expanded to the new value.
     */
    onExpandClick() {
        let me           = this,
            currentState = me.expanded,
            parent       = me.up('accordion');

        if (parent.ntype === 'accordion') {
            parent.childExpandChange({
                expanded: !currentState,
                target  : me
            })
        } else {
            me.expanded = !currentState
        }
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(AccordionContainer));


/***/ }

};

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2h1bmtzL2FwcC92ZW5kb3JzLWV4YW1wbGVzX2NvbnRhaW5lcl9hY2NvcmRpb25fYXBwX21qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUF5RTtBQUNMO0FBQ0E7O0FBRXBFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGtFQUFxQjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixrQkFBa0I7QUFDdEMsU0FBUztBQUNUO0FBQ0E7QUFDQSxvQkFBb0Isa0JBQWtCO0FBQ3RDLFNBQVM7QUFDVDtBQUNBO0FBQ0Esb0JBQW9CLGtCQUFrQjtBQUN0QyxTQUFTO0FBQ1Q7QUFDQTtBQUNBLG9CQUFvQixrQkFBa0I7QUFDdEMsU0FBUztBQUNUO0FBQ0E7QUFDQSxvQkFBb0Isa0JBQWtCO0FBQ3RDLFNBQVM7QUFDVDtBQUNBO0FBQ0Esb0JBQW9CLGtCQUFrQjtBQUN0QyxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBLG9CQUFvQiwrREFBUztBQUM3QjtBQUNBLHdCQUF3QixvRUFBUzs7QUFFakM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCOztBQUVqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixpQkFBaUI7QUFDakIsYUFBYTtBQUNiLHdCQUF3QixvRUFBUzs7QUFFakM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCOztBQUVqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLGlCQUFpQjtBQUNq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QUFDeEI7QUFDQTtBQUNBO0FBQ0EsYUFBYSxLQUFLO0FBQ2xCOztBQUVBLFFBQVEsdURBQVE7QUFDaEI7O0FBRUE7QUFDQTtBQUNBLFlBQVksdURBQVE7QUFDcEI7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGlCQUFpQjtBQUNoQyxlQUFlLFVBQVU7QUFDekI7QUFDQTtBQUNBLGdDQUFnQyxlQUFlOztBQUUvQztBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxZQUFZLHVEQUFRO0FBQ3BCLFlBQVksdURBQVE7QUFDcEI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQSxpQ0FBaUMsZ0JBQWdCOztBQUVqRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxpRUFBZSxrQ0FBa0MsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL25lby5tanMvLi9leGFtcGxlcy9jb250YWluZXIvYWNjb3JkaW9uL01haW5Db250YWluZXIubWpzIiwid2VicGFjazovL25lby5tanMvLi9leGFtcGxlcy9jb250YWluZXIvYWNjb3JkaW9uL2FwcC5tanMiLCJ3ZWJwYWNrOi8vbmVvLm1qcy8uL3NyYy9jb250YWluZXIvQWNjb3JkaW9uLm1qcyIsIndlYnBhY2s6Ly9uZW8ubWpzLy4vc3JjL2NvbnRhaW5lci9BY2NvcmRpb25JdGVtLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQWNjb3JkaW9uICAgICAgICAgICAgIGZyb20gJy4uLy4uLy4uL3NyYy9jb250YWluZXIvQWNjb3JkaW9uLm1qcyc7XG5pbXBvcnQgQ29uZmlndXJhdGlvblZpZXdwb3J0IGZyb20gJy4uLy4uL0NvbmZpZ3VyYXRpb25WaWV3cG9ydC5tanMnO1xuaW1wb3J0IENvbnRhaW5lciAgICAgICAgICAgICBmcm9tICcuLi8uLi8uLi9zcmMvY29udGFpbmVyL0Jhc2UubWpzJztcblxuLyoqXG4gKiBAY2xhc3MgTmVvLmV4YW1wbGVzLmJ1dHRvbi5iYXNlLk1haW5Db250YWluZXJcbiAqIEBleHRlbmRzIE5lby5leGFtcGxlcy5Db25maWd1cmF0aW9uVmlld3BvcnRcbiAqL1xuY2xhc3MgTWFpbkNvbnRhaW5lciBleHRlbmRzIENvbmZpZ3VyYXRpb25WaWV3cG9ydCB7XG4gICAgc3RhdGljIGNvbmZpZyA9IHtcbiAgICAgICAgY2xhc3NOYW1lICAgICAgICAgICA6ICdOZW8uZXhhbXBsZXMuYnV0dG9uLmJhc2UuTWFpbkNvbnRhaW5lcicsXG4gICAgICAgIGNvbmZpZ0l0ZW1MYWJlbFdpZHRoOiAxNjAsXG4gICAgICAgIGNvbmZpZ0l0ZW1XaWR0aCAgICAgOiAyODAsXG4gICAgICAgIGxheW91dCAgICAgICAgICAgICAgOiB7bnR5cGU6ICdoYm94JywgYWxpZ246ICdzdHJldGNoJ31cbiAgICB9XG5cbiAgICBjcmVhdGVDb25maWd1cmF0aW9uQ29tcG9uZW50cygpIHtcbiAgICAgICAgcmV0dXJuIFt7XG4gICAgICAgICAgICBudHlwZTogJ2NvbXBvbmVudCcsXG4gICAgICAgICAgICBodG1sIDogJzx1PjxiPlRPUCBBQ0NPUkRJT048L2I+PC91PicsXG4gICAgICAgICAgICBzdHlsZToge21hcmdpblRvcDogJzEwcHgnfSxcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgbnR5cGU6ICdjb21wb25lbnQnLFxuICAgICAgICAgICAgaHRtbCA6ICc8Yj5tYXhFeHBhbmRlZEl0ZW1zOjwvYj4gMicsXG4gICAgICAgICAgICBzdHlsZToge21hcmdpblRvcDogJzEwcHgnfSxcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgbnR5cGU6ICdjb21wb25lbnQnLFxuICAgICAgICAgICAgaHRtbCA6ICc8Yj5pbml0aWFsT3Blbjo8L2I+IFswLCAxXScsXG4gICAgICAgICAgICBzdHlsZToge21hcmdpblRvcDogJzEwcHgnfSxcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgbnR5cGU6ICdjb21wb25lbnQnLFxuICAgICAgICAgICAgaHRtbCA6ICc8dT48Yj5CT1RUT00gQUNDT1JESU9OPC9iPjwvdT4nLFxuICAgICAgICAgICAgc3R5bGU6IHttYXJnaW5Ub3A6ICcxMHB4J30sXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG50eXBlOiAnY29tcG9uZW50JyxcbiAgICAgICAgICAgIGh0bWwgOiAnPGI+bWF4RXhwYW5kZWRJdGVtczo8L2I+IDEnLFxuICAgICAgICAgICAgc3R5bGU6IHttYXJnaW5Ub3A6ICcxMHB4J30sXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG50eXBlOiAnY29tcG9uZW50JyxcbiAgICAgICAgICAgIGh0bWwgOiAnPGI+aW5pdGlhbE9wZW46PC9iPiBbMF0nLFxuICAgICAgICAgICAgc3R5bGU6IHttYXJnaW5Ub3A6ICcxMHB4J30sXG4gICAgICAgIH1dXG4gICAgfVxuXG4gICAgY3JlYXRlRXhhbXBsZUNvbXBvbmVudCgpIHtcbiAgICAgICAgcmV0dXJuIE5lby5jcmVhdGUoe1xuICAgICAgICAgICAgbW9kdWxlOiBDb250YWluZXIsXG4gICAgICAgICAgICBpdGVtcyA6IFt7XG4gICAgICAgICAgICAgICAgbW9kdWxlOiBBY2NvcmRpb24sXG5cbiAgICAgICAgICAgICAgICB0aXRsZSAgICAgICAgICAgOiAnVE9QJyxcbiAgICAgICAgICAgICAgICBtYXhFeHBhbmRlZEl0ZW1zOiAyLFxuICAgICAgICAgICAgICAgIGluaXRpYWxPcGVuICAgICA6IFswLCAxXSxcblxuICAgICAgICAgICAgICAgIGhlaWdodDogNTUwLFxuICAgICAgICAgICAgICAgIHN0eWxlIDoge1xuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICdncmV5JyxcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZyAgICAgICAgOiAnMTVweCdcbiAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgaXRlbXM6IFt7XG4gICAgICAgICAgICAgICAgICAgIGljb25DbHM6ICdmYSBmYS1kaWNlLW9uZScsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlICA6ICdGaXJzdCBIZWFkZXJiYXInLFxuICAgICAgICAgICAgICAgICAgICBpdGVtcyAgOiBbe1xuICAgICAgICAgICAgICAgICAgICAgICAgbnR5cGU6ICdjb21wb25lbnQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCA6ICdMb3JlbSBpcHN1bSBkb2xvciBzaXQgYW1ldCwgY29uc2VjdGV0dWVyIGFkaXBpc2NpbmcgZWxpdC4gTWFlY2VuYXMgcG9ydHRpdG9yIGNvbmd1ZSBtYXNzYS4gRnVzY2UgcG9zdWVyZSwgbWFnbmEgc2VkIHB1bHZpbmFyIHVsdHJpY2llcywgcHVydXMgbGVjdHVzIG1hbGVzdWFkYSBsaWJlcm8sIHNpdCBhbWV0IGNvbW1vZG8gbWFnbmEgZXJvcyBxdWlzIHVybmEuJ1xuICAgICAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgaWNvbkNsczogJ2ZhLWRpY2UtdHdvJyxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGUgIDogJ1NlY29uZCBIZWFkZXJiYXInLFxuICAgICAgICAgICAgICAgICAgICBpdGVtcyAgOiBbe1xuICAgICAgICAgICAgICAgICAgICAgICAgaHRtbDogJ051bmMgdml2ZXJyYSBpbXBlcmRpZXQgZW5pbS4gRnVzY2UgZXN0LiBWaXZhbXVzIGEgdGVsbHVzLidcbiAgICAgICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgIGljb25DbHM6ICdmYS1kaWNlLXRocmVlJyxcbiAgICAgICAgICAgICAgICAgICAgdGl0bGUgIDogJ1RoaXJkIEhlYWRlcmJhcicsXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zICA6IFt7XG4gICAgICAgICAgICAgICAgICAgICAgICBodG1sOiAnUGVsbGVudGVzcXVlIGhhYml0YW50IG1vcmJpIHRyaXN0aXF1ZSBzZW5lY3R1cyBldCBuZXR1cyBldCBtYWxlc3VhZGEgZmFtZXMgYWMgdHVycGlzIGVnZXN0YXMuIFByb2luIHBoYXJldHJhIG5vbnVtbXkgcGVkZS4gTWF1cmlzIGV0IG9yY2kuJ1xuICAgICAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgbW9kdWxlOiBBY2NvcmRpb24sXG5cbiAgICAgICAgICAgICAgICB0aXRsZSAgICAgICAgICAgOiAnYm90dG9tJyxcbiAgICAgICAgICAgICAgICBtYXhFeHBhbmRlZEl0ZW1zOiAxLFxuICAgICAgICAgICAgICAgIGluaXRpYWxPcGVuICAgICA6IFswXSxcblxuICAgICAgICAgICAgICAgIGhlaWdodDogNTUwLFxuICAgICAgICAgICAgICAgIHN0eWxlIDoge1xuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICdkYXJrZ3JleScsXG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmcgICAgICAgIDogJzE1cHgnXG4gICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgIGl0ZW1zOiBbe1xuICAgICAgICAgICAgICAgICAgICBpY29uQ2xzOiAnZmEgZmEtMScsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlICA6ICdEZWZpbmUgQ29udGVudCcsXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zICA6IFt7XG4gICAgICAgICAgICAgICAgICAgICAgICBudHlwZTogJ2NvbXBvbmVudCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBodG1sIDogJ0xvcmVtIGlwc3VtIGRvbG9yIHNpdCBhbWV0LCBjb25zZWN0ZXR1ZXIgYWRpcGlzY2luZyBlbGl0LiBNYWVjZW5hcyBwb3J0dGl0b3IgY29uZ3VlIG1hc3NhLiBGdXNjZSBwb3N1ZXJlLCBtYWduYSBzZWQgcHVsdmluYXIgdWx0cmljaWVzLCBwdXJ1cyBsZWN0dXMgbWFsZXN1YWRhIGxpYmVybywgc2l0IGFtZXQgY29tbW9kbyBtYWduYSBlcm9zIHF1aXMgdXJuYS4nXG4gICAgICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICBpY29uQ2xzOiAnZmEtMicsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlICA6ICdNYXJrIEJlc3QgRml0JyxcbiAgICAgICAgICAgICAgICAgICAgaXRlbXMgIDogW3tcbiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWw6ICdOdW5jIHZpdmVycmEgaW1wZXJkaWV0IGVuaW0uIEZ1c2NlIGVzdC4gVml2YW11cyBhIHRlbGx1cy4nXG4gICAgICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICBpY29uQ2xzOiAnZmEtMycsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlICA6ICdDcmVhdGUgSW52b2ljZScsXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zICA6IFt7XG4gICAgICAgICAgICAgICAgICAgICAgICBodG1sOiAnUGVsbGVudGVzcXVlIGhhYml0YW50IG1vcmJpIHRyaXN0aXF1ZSBzZW5lY3R1cyBldCBuZXR1cyBldCBtYWxlc3VhZGEgZmFtZXMgYWMgdHVycGlzIGVnZXN0YXMuIFByb2luIHBoYXJldHJhIG5vbnVtbXkgcGVkZS4gTWF1cmlzIGV0IG9yY2kuJ1xuICAgICAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICB9XVxuICAgICAgICB9KVxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTmVvLnNldHVwQ2xhc3MoTWFpbkNvbnRhaW5lcik7XG4iLCJpbXBvcnQgTWFpbkNvbnRhaW5lciBmcm9tICcuL01haW5Db250YWluZXIubWpzJztcblxuZXhwb3J0IGNvbnN0IG9uU3RhcnQgPSAoKSA9PiBOZW8uYXBwKHtcbiAgICBtYWluVmlldzogTWFpbkNvbnRhaW5lcixcbiAgICBuYW1lICAgIDogJ05lby5leGFtcGxlcy5jb250YWluZXIuYWNjb3JkaW9uJ1xufSk7IiwiaW1wb3J0IEFjY29yZGlvbkl0ZW0gZnJvbSAnLi9BY2NvcmRpb25JdGVtLm1qcyc7XG5pbXBvcnQgTmVvQXJyYXkgICAgICBmcm9tICcuLi91dGlsL0FycmF5Lm1qcyc7XG5pbXBvcnQgUGFuZWwgICAgICAgICBmcm9tICcuL1BhbmVsLm1qcyc7XG5cbi8qKlxuICogQGNsYXNzIE5lby5jb250YWluZXIuQWNjb3JkaW9uXG4gKiBAZXh0ZW5kcyBOZW8uY29udGFpbmVyLlBhbmVsXG4gKi9cbmNsYXNzIEFjY29yZGlvbiBleHRlbmRzIFBhbmVsIHtcbiAgICBzdGF0aWMgY29uZmlnID0ge1xuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfSBjbGFzc05hbWU9J05lby5jb250YWluZXIuQWNjb3JkaW9uJ1xuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICBjbGFzc05hbWU6ICdOZW8uY29udGFpbmVyLkFjY29yZGlvbicsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtTdHJpbmd9IG50eXBlPSdhY2NvcmRpb24nXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIG50eXBlOiAnYWNjb3JkaW9uJyxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ1tdfSBiYXNlQ2xzPVsnbmVvLWFjY29yZGlvbiddXG4gICAgICAgICAqL1xuICAgICAgICBiYXNlQ2xzOiBbJ25lby1hY2NvcmRpb24nXSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFkZCB6ZXJvIGJhc2VkIG51bWJlcnMsIHdoaWNoIGFjY29yZGlvbiBpdGVtcyB5b3Ugd2FudCBpbml0aWFsbHkgZXhwYW5kZWRcbiAgICAgICAgICogQG1lbWJlciB7TnVtYmVyW119IGluaXRpYWxPcGVuPVtdXG4gICAgICAgICAqL1xuICAgICAgICBpbml0aWFsT3Blbl86IFtdLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7T2JqZWN0fSBpdGVtRGVmYXVsdHM9e250eXBlOidhY2NvcmRpb25pdGVtJ31cbiAgICAgICAgICogQHJlYWN0aXZlXG4gICAgICAgICAqL1xuICAgICAgICBpdGVtRGVmYXVsdHM6IHtudHlwZTogJ2FjY29yZGlvbml0ZW0nfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge09iamVjdFtdfSBpdGVtcz1bXVxuICAgICAgICAgKiBAcmVhY3RpdmVcbiAgICAgICAgICovXG4gICAgICAgIGl0ZW1zOiBbXSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1heCBudW1iZXIgb2YgYWNjb3JkaW9uIGl0ZW1zLCB3aGljaCBjYW4gYmUgZXhwYW5kZWQgYXQgdGhlIHNhbWUgdGltZVxuICAgICAgICAgKiBAbWVtYmVyIHtOdW1iZXJ9IG1heEV4cGFuZGVkSXRlbXM9MVxuICAgICAgICAgKi9cbiAgICAgICAgbWF4RXhwYW5kZWRJdGVtczogMSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEtlZXAgdHJhY2sgb2YgY3VycmVudGx5IG9wZW4gaXRlbXNcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nW119IGV4cGFuZGVkSXRlbXM9W11cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIGV4cGFuZGVkSXRlbXNfOiBbXSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZXMgYSB0b3AgaGVhZGVyXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ3xudWxsfSB0aXRsZT1udWxsXG4gICAgICAgICAqL1xuICAgICAgICB0aXRsZV86IG51bGxcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge051bWJlcltdfSB2YWx1ZVxuICAgICAqIEBwYXJhbSB7TnVtYmVyW119IG9sZFZhbHVlXG4gICAgICovXG4gICAgYWZ0ZXJTZXRJbml0aWFsT3Blbih2YWx1ZSwgb2xkVmFsdWUpIHtcbiAgICAgICAgbGV0IG1lICAgICAgICAgICAgICAgICAgICAgPSB0aGlzLFxuICAgICAgICAgICAge2V4cGFuZGVkSXRlbXMsIGl0ZW1zfSA9IG1lLFxuICAgICAgICAgICAgaWQsIGl0ZW07XG5cbiAgICAgICAgdmFsdWUuZm9yRWFjaCgoaXRlbU5vKSA9PiB7XG4gICAgICAgICAgICBpZCAgID0gTmVvLmdldElkKG1lLml0ZW1EZWZhdWx0cy5udHlwZSksXG4gICAgICAgICAgICBpdGVtID0gaXRlbXNbaXRlbU5vXTtcblxuICAgICAgICAgICAgaXRlbS5leHBhbmRlZCA9IHRydWU7XG4gICAgICAgICAgICBpdGVtLmlkICAgICAgID0gaWQ7XG4gICAgICAgICAgICBOZW9BcnJheS5hZGQoZXhwYW5kZWRJdGVtcywgaWQpXG4gICAgICAgIH0pO1xuXG4gICAgICAgIG1lLmV4cGFuZGVkSXRlbXMgPSBleHBhbmRlZEl0ZW1zXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWZ0ZXIgY2hhbmdlcyB0byB0aXRsZSBjb25maWcsIHdlIGFkZCBhIGhlYWRlclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfG51bGx9IHZhbHVlXG4gICAgICogQHBhcmFtIHtTdHJpbmd8bnVsbH0gb2xkVmFsdWVcbiAgICAgKi9cbiAgICBhZnRlclNldFRpdGxlKHZhbHVlLCBvbGRWYWx1ZSkge1xuICAgICAgICBsZXQgbWUgICAgICA9IHRoaXMsXG4gICAgICAgICAgICB0aXRsZUVsID0gbWUuZG93bih7ZmxhZzogJ3RpdGxlRWwnfSk7XG5cbiAgICAgICAgaWYgKHZhbHVlICYmICF0aXRsZUVsKSB7XG4gICAgICAgICAgICBtZS5oZWFkZXJzID0gW3tcbiAgICAgICAgICAgICAgICBiYXNlQ2xzOiAnbmVvLWFjY29yZGlvbi10aXRsZScsXG4gICAgICAgICAgICAgICAgY2xzICAgIDogWyduZW8tYWNjb3JkaW9uLXRpdGxlJ10sXG4gICAgICAgICAgICAgICAgZG9jayAgIDogJ3RvcCcsXG4gICAgICAgICAgICAgICAgdGV4dCAgIDogdmFsdWVcbiAgICAgICAgICAgIH1dXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgYnkgYWNjb3JkaW9uIGl0ZW1zLlxuICAgICAqIENoZWNrcyBmb3IgbWF4RXhwYW5kZWRJdGVtc1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSAgICAgICAgICAgICAgICAgICAgICBkYXRhXG4gICAgICogQHBhcmFtIHtCb29sZWFufSAgICAgICAgICAgICAgICAgICAgIGRhdGEuZXhwYW5kZWQgbmV3U3RhdGVcbiAgICAgKiBAcGFyYW0ge05lby5jb250YWluZXIuQWNjb3JkaW9uSXRlbX0gZGF0YS50YXJnZXQgICBhY2NvcmRpb24gaXRlbVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBjaGlsZEV4cGFuZENoYW5nZShkYXRhKSB7XG4gICAgICAgIGxldCBtZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSB0aGlzLFxuICAgICAgICAgICAge2V4cGFuZGVkSXRlbXMsIG1heEV4cGFuZGVkSXRlbXN9ID0gbWUsXG4gICAgICAgICAgICB7ZXhwYW5kZWQsIHRhcmdldH0gICAgICAgICAgICAgICAgPSBkYXRhLFxuICAgICAgICAgICAgY3VyTm9PcGVuSXRlbXMgICAgICAgICAgICAgICAgICAgID0gZXhwYW5kZWRJdGVtcy5sZW5ndGgsXG4gICAgICAgICAgICB0YXJnZXRJZCAgICAgICAgICAgICAgICAgICAgICAgICAgPSB0YXJnZXQuaWQ7XG5cbiAgICAgICAgaWYgKGV4cGFuZGVkXG4gICAgICAgICAgICAmJiBtYXhFeHBhbmRlZEl0ZW1zICE9PSAwXG4gICAgICAgICAgICAmJiBjdXJOb09wZW5JdGVtcyA9PT0gbWF4RXhwYW5kZWRJdGVtc1xuICAgICAgICApIHtcbiAgICAgICAgICAgIE5lby5nZXQoZXhwYW5kZWRJdGVtc1swXSkuZXhwYW5kZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIE5lb0FycmF5LnJlbW92ZShleHBhbmRlZEl0ZW1zLCBleHBhbmRlZEl0ZW1zWzBdKVxuICAgICAgICB9XG5cbiAgICAgICAgdGFyZ2V0LmV4cGFuZGVkID0gZXhwYW5kZWQ7XG4gICAgICAgIE5lb0FycmF5LnRvZ2dsZShleHBhbmRlZEl0ZW1zLCB0YXJnZXRJZCk7XG5cbiAgICAgICAgbWUuZXhwYW5kZWRJdGVtcyA9IGV4cGFuZGVkSXRlbXNcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IE5lby5zZXR1cENsYXNzKEFjY29yZGlvbik7XG4iLCJpbXBvcnQgQmFzZSAgICAgZnJvbSAnLi9CYXNlLm1qcyc7XG5pbXBvcnQgVG9vbGJhciAgZnJvbSAnLi4vdG9vbGJhci9CYXNlLm1qcyc7XG5pbXBvcnQgTmVvQXJyYXkgZnJvbSAnLi4vdXRpbC9BcnJheS5tanMnO1xuXG4vKipcbiAqIEBjbGFzcyBOZW8uY29udGFpbmVyLkFjY29yZGlvbkl0ZW1cbiAqIEBleHRlbmRzIE5lby5jb250YWluZXIuQmFzZVxuICovXG5jbGFzcyBBY2NvcmRpb25Db250YWluZXIgZXh0ZW5kcyBCYXNlIHtcbiAgICBzdGF0aWMgY29uZmlnID0ge1xuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfSBjbGFzc05hbWU9J05lby5jb250YWluZXIuQWNjb3JkaW9uSXRlbSdcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgY2xhc3NOYW1lOiAnTmVvLmNvbnRhaW5lci5BY2NvcmRpb25JdGVtJyxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ30gbnR5cGU9J2FjY29yZGlvbml0ZW0nXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIG50eXBlOiAnYWNjb3JkaW9uaXRlbScsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtTdHJpbmdbXX0gYmFzZUNscz1bJ25lby1hY2NvcmRpb24tY29tcG9uZW50J11cbiAgICAgICAgICovXG4gICAgICAgIGJhc2VDbHM6IFsnbmVvLWFjY29yZGlvbi1pdGVtJ10sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFkZGl0aW9uYWwgY2xzIGZvciB0aGUgYXJyb3csIGluIGNhc2UgeW91IG5lZWQgdG8gY3VzdG9taXplIGl0XG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ1tdfFN0cmluZ3xudWxsfSBhcnJvd0Nscz1udWxsXG4gICAgICAgICAqL1xuICAgICAgICBhcnJvd0NsczogbnVsbCxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEV4cGFuZCBvciBjb2xsYXBzZSAodHJ1ZS9mYWxzZSkgdGhpcyB2YWx1ZVxuICAgICAgICAgKiBAbWVtYmVyIHtCb29sZWFufSBleHBhbmRlZD1mYWxzZVxuICAgICAgICAgKi9cbiAgICAgICAgZXhwYW5kZWRfOiBmYWxzZSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIGNscyBmb3IgdGhlIGljb24gaW4gZnJvbnQgb2YgdGhlIHRpdGxlXG4gICAgICAgICAqIE1heSBiZSBlbXB0eS4gJ2ZhJyBpcyBwcmVzZXQsXG4gICAgICAgICAqIHNvIGlmIHlvdSB1c2UgZm9udGF3ZXNvbWUgeW91IGRvIG5vdCBoYXZlIHRvIGFkZCBpdC5cbiAgICAgICAgICpcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nW118U3RyaW5nfG51bGx9IGljb25DbHM9bnVsbFxuICAgICAgICAgKi9cbiAgICAgICAgaWNvbkNsc186IG51bGwsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaXRsZSBmb3IgSGVhZGVyYmFyXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ3xudWxsfSB0aXRsZT1udWxsXG4gICAgICAgICAqL1xuICAgICAgICB0aXRsZV86IG51bGxcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSdW5zIGFmdGVyIGFmdGVyU2V0VGl0bGUsIHNvIHRoYXQgdGhlIHRpdGxlIGNvbXBvbmVudCBkb2VzIG5vdCBleGlzdCBwcmlvci5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgY3JlYXRlSXRlbXMoKSB7XG4gICAgICAgIGxldCBtZSAgICAgICA9IHRoaXMsXG4gICAgICAgICAgICBhcnJvd0NscyA9IG1lLmFycm93Q2xzIHx8ICdmYS1jYXJldC1kb3duJyxcbiAgICAgICAgICAgIGljb25DbHMgID0gbWUuaWNvbkNscyAgfHwgWyduby1pY29uJ10sXG4gICAgICAgICAgICB7aXRlbXMsIHRpdGxlfSA9IG1lLFxuICAgICAgICAgICAgaGVhZGVyLCBjb250ZW50O1xuXG4gICAgICAgIGlmICghTmVvLmlzQXJyYXkoaWNvbkNscykpIHtcbiAgICAgICAgICAgIGljb25DbHMgPSBpY29uQ2xzLnNwbGl0KCcgJylcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghTmVvLmlzQXJyYXkoYXJyb3dDbHMpKSB7XG4gICAgICAgICAgICBhcnJvd0NscyA9IGFycm93Q2xzLnNwbGl0KCcgJylcbiAgICAgICAgfVxuXG4gICAgICAgIGhlYWRlciA9IE5lby5jcmVhdGUoe1xuICAgICAgICAgICAgbW9kdWxlOiBUb29sYmFyLFxuICAgICAgICAgICAgaXRlbXMgOiBbe1xuICAgICAgICAgICAgICAgIGZsYWcgICA6ICdpY29uRWwnLFxuICAgICAgICAgICAgICAgIG50eXBlICA6ICdjb21wb25lbnQnLFxuICAgICAgICAgICAgICAgIGJhc2VDbHM6IFsnbmVvLWFjY29yZGlvbi1oZWFkZXItaWNvbiddLFxuICAgICAgICAgICAgICAgIGNscyAgICA6IFsnZmEnLCAuLi5pY29uQ2xzXSxcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBmbGFnICAgOiAndGl0bGVFbCcsXG4gICAgICAgICAgICAgICAgbnR5cGUgIDogJ2NvbXBvbmVudCcsXG4gICAgICAgICAgICAgICAgYmFzZUNsczogWyduZW8tYWNjb3JkaW9uLWhlYWRlci10aXRsZSddLFxuICAgICAgICAgICAgICAgIHRleHQgICA6IHRpdGxlXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgbnR5cGUgIDogJ2NvbXBvbmVudCcsXG4gICAgICAgICAgICAgICAgYmFzZUNsczogWyduZW8tYWNjb3JkaW9uLWhlYWRlci1hcnJvdyddLFxuICAgICAgICAgICAgICAgIGNscyAgICA6IFsnZmEnLCAuLi5hcnJvd0Nsc11cbiAgICAgICAgICAgIH1dXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnRlbnQgPSB7XG4gICAgICAgICAgICBudHlwZSAgOiAnY29udGFpbmVyJyxcbiAgICAgICAgICAgIGZsYWcgICA6ICdjb250ZW50JyxcbiAgICAgICAgICAgIGJhc2VDbHM6IFsnbmVvLWFjY29yZGlvbi1jb250ZW50JywgJ25lby1jb250YWluZXInXSxcbiAgICAgICAgICAgIGl0ZW1zICA6IGl0ZW1zXG4gICAgICAgIH07XG5cbiAgICAgICAgbWUuaXRlbXMgPSBbaGVhZGVyLCBjb250ZW50XTtcblxuICAgICAgICBzdXBlci5jcmVhdGVJdGVtcygpO1xuXG4gICAgICAgIG1lLmFkZERvbUxpc3RlbmVycyhbXG4gICAgICAgICAgICB7Y2xpY2s6IG1lLm9uRXhwYW5kQ2xpY2ssIGRlbGVnYXRlOiAnbmVvLWFjY29yZGlvbi1oZWFkZXItYXJyb3cnfVxuICAgICAgICBdKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFmdGVyIGNoYW5naW5nIGV4cGFuZGVkLCB3ZSBleHBhbmQvY29sbGFwc2UgdmlhIENTU1xuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gaXNFeHBhbmRlZFxuICAgICAqL1xuICAgIGFmdGVyU2V0RXhwYW5kZWQoaXNFeHBhbmRlZCkge1xuICAgICAgICBsZXQgbWUgICAgPSB0aGlzLFxuICAgICAgICAgICAge2Nsc30gPSBtZSxcbiAgICAgICAgICAgIGZuICAgID0gaXNFeHBhbmRlZCA/ICdhZGQnIDogJ3JlbW92ZSc7XG5cbiAgICAgICAgTmVvQXJyYXlbZm5dKGNscywgJ25lby1leHBhbmRlZCcpO1xuICAgICAgICBtZS5jbHMgPSBjbHM7XG5cbiAgICAgICAgLy8gRW5zdXJlIHNjcm9sbGJhcnMgYXJlIG5vdCBmbGlwcGluZyBpbiBhbmQgb3V0XG4gICAgICAgIG1lLnRpbWVvdXQoNDUwKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIE5lb0FycmF5W2ZuXShjbHMsICduZW8tc2Nyb2xsYWJsZScpO1xuICAgICAgICAgICAgbWUuY2xzID0gY2xzXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGluaXRpYWwgdGl0bGUgaXMgc2V0IGJlZm9yZSB0aGUgY29tcG9uZW50IGlzIGNyZWF0ZWQsXG4gICAgICogc28gd2UgaGF2ZSB0byBjaGVjayBpZiBpdCBleGlzdHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ1tdfFN0cmluZ30gbmV3VmFsdWVcbiAgICAgKiBAcGFyYW0ge1N0cmluZ1tdfSBvbGRWYWx1ZVxuICAgICAqL1xuICAgIGFmdGVyU2V0SWNvbkNscyhuZXdWYWx1ZSwgb2xkVmFsdWUpIHtcbiAgICAgICAgbGV0IGljb25FbCA9IHRoaXMuZG93bih7ZmxhZzogJ2ljb25FbCd9KTtcblxuICAgICAgICBpZiAoaWNvbkVsKSB7XG4gICAgICAgICAgICBsZXQgY2xzID0gaWNvbkVsLmNscztcblxuICAgICAgICAgICAgaWYgKCFOZW8uaXNBcnJheShuZXdWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBuZXdWYWx1ZSA9IG5ld1ZhbHVlLnNwbGl0KCcgJylcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgTmVvQXJyYXkucmVtb3ZlKGNscywgb2xkVmFsdWUpO1xuICAgICAgICAgICAgTmVvQXJyYXkuYWRkKGNscywgbmV3VmFsdWUpO1xuICAgICAgICAgICAgaWNvbkVsLmNscyA9IGNsc1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGluaXRpYWwgdGl0bGUgaXMgc2V0IGJlZm9yZSB0aGUgY29tcG9uZW50IGlzIGNyZWF0ZWQsXG4gICAgICogc28gd2UgaGF2ZSB0byBjaGVjayBpZiBpdCBleGlzdHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbmV3VmFsdWVcbiAgICAgKi9cbiAgICBhZnRlclNldFRpdGxlKG5ld1ZhbHVlKSB7XG4gICAgICAgIGxldCB0aXRsZUVsID0gdGhpcy5kb3duKHtmbGFnOiAndGl0bGVFbCd9KTtcblxuICAgICAgICBpZiAodGl0bGVFbCkge1xuICAgICAgICAgICAgdGl0bGVFbC50ZXh0ID0gbmV3VmFsdWVcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIElmIHRoZSBwYXJlbnQgaXMgYW4gQWNjb3JkaW9uQ29udGFpbmVyLCB3ZSBydW4gdGhlIHBhcmVudCBmdW5jdGlvbi5cbiAgICAgKiBPdGhlcndpc2Ugd2Ugc2V0IHRoaXMuZXhwYW5kZWQgdG8gdGhlIG5ldyB2YWx1ZS5cbiAgICAgKi9cbiAgICBvbkV4cGFuZENsaWNrKCkge1xuICAgICAgICBsZXQgbWUgICAgICAgICAgID0gdGhpcyxcbiAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSA9IG1lLmV4cGFuZGVkLFxuICAgICAgICAgICAgcGFyZW50ICAgICAgID0gbWUudXAoJ2FjY29yZGlvbicpO1xuXG4gICAgICAgIGlmIChwYXJlbnQubnR5cGUgPT09ICdhY2NvcmRpb24nKSB7XG4gICAgICAgICAgICBwYXJlbnQuY2hpbGRFeHBhbmRDaGFuZ2Uoe1xuICAgICAgICAgICAgICAgIGV4cGFuZGVkOiAhY3VycmVudFN0YXRlLFxuICAgICAgICAgICAgICAgIHRhcmdldCAgOiBtZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG1lLmV4cGFuZGVkID0gIWN1cnJlbnRTdGF0ZVxuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBOZW8uc2V0dXBDbGFzcyhBY2NvcmRpb25Db250YWluZXIpO1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==