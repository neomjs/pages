"use strict";
(self["webpackChunkneo_mjs"] = self["webpackChunkneo_mjs"] || []).push([["vendors-examples_container_accordion_app_mjs"],{

/***/ "./examples/container/accordion/MainContainer.mjs":
/*!********************************************************!*\
  !*** ./examples/container/accordion/MainContainer.mjs ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _src_container_Accordion_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../src/container/Accordion.mjs */ "./src/container/Accordion.mjs");
/* harmony import */ var _ConfigurationViewport_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../ConfigurationViewport.mjs */ "./examples/ConfigurationViewport.mjs");
/* harmony import */ var _src_container_Base_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../src/container/Base.mjs */ "./src/container/Base.mjs");




/**
 * @class Neo.examples.button.base.MainContainer
 * @extends Neo.examples.ConfigurationViewport
 */
class MainContainer extends _ConfigurationViewport_mjs__WEBPACK_IMPORTED_MODULE_1__["default"] {
    static config = {
        className           : 'Neo.examples.button.base.MainContainer',
        configItemLabelWidth: 160,
        configItemWidth     : 280,
        layout              : {ntype: 'hbox', align: 'stretch'}
    }

    createConfigurationComponents() {
        return [{
            ntype: 'component',
            html : '<u><b>TOP ACCORDION</b></u>',
            style: {marginTop: '10px'},
        }, {
            ntype: 'component',
            html : '<b>maxExpandedItems:</b> 2',
            style: {marginTop: '10px'},
        }, {
            ntype: 'component',
            html : '<b>initialOpen:</b> [0, 1]',
            style: {marginTop: '10px'},
        }, {
            ntype: 'component',
            html : '<u><b>BOTTOM ACCORDION</b></u>',
            style: {marginTop: '10px'},
        }, {
            ntype: 'component',
            html : '<b>maxExpandedItems:</b> 1',
            style: {marginTop: '10px'},
        }, {
            ntype: 'component',
            html : '<b>initialOpen:</b> [0]',
            style: {marginTop: '10px'},
        }]
    }

    createExampleComponent() {
        return Neo.create({
            module: _src_container_Base_mjs__WEBPACK_IMPORTED_MODULE_2__["default"],
            items : [{
                module: _src_container_Accordion_mjs__WEBPACK_IMPORTED_MODULE_0__["default"],

                title           : 'TOP',
                maxExpandedItems: 2,
                initialOpen     : [0, 1],

                height: 550,
                style : {
                    backgroundColor: 'grey',
                    padding        : '15px'
                },

                items: [{
                    iconCls: 'fa fa-dice-one',
                    title  : 'First Headerbar',
                    items  : [{
                        ntype: 'component',
                        html : 'Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Maecenas porttitor congue massa. Fusce posuere, magna sed pulvinar ultricies, purus lectus malesuada libero, sit amet commodo magna eros quis urna.'
                    }]
                }, {
                    iconCls: 'fa-dice-two',
                    title  : 'Second Headerbar',
                    items  : [{
                        html: 'Nunc viverra imperdiet enim. Fusce est. Vivamus a tellus.'
                    }]
                }, {
                    iconCls: 'fa-dice-three',
                    title  : 'Third Headerbar',
                    items  : [{
                        html: 'Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Proin pharetra nonummy pede. Mauris et orci.'
                    }]
                }]
            }, {
                module: _src_container_Accordion_mjs__WEBPACK_IMPORTED_MODULE_0__["default"],

                title           : 'bottom',
                maxExpandedItems: 1,
                initialOpen     : [0],

                height: 550,
                style : {
                    backgroundColor: 'darkgrey',
                    padding        : '15px'
                },

                items: [{
                    iconCls: 'fa fa-1',
                    title  : 'Define Content',
                    items  : [{
                        ntype: 'component',
                        html : 'Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Maecenas porttitor congue massa. Fusce posuere, magna sed pulvinar ultricies, purus lectus malesuada libero, sit amet commodo magna eros quis urna.'
                    }]
                }, {
                    iconCls: 'fa-2',
                    title  : 'Mark Best Fit',
                    items  : [{
                        html: 'Nunc viverra imperdiet enim. Fusce est. Vivamus a tellus.'
                    }]
                }, {
                    iconCls: 'fa-3',
                    title  : 'Create Invoice',
                    items  : [{
                        html: 'Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Proin pharetra nonummy pede. Mauris et orci.'
                    }]
                }]
            }]
        })
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(MainContainer));


/***/ }),

/***/ "./examples/container/accordion/app.mjs":
/*!**********************************************!*\
  !*** ./examples/container/accordion/app.mjs ***!
  \**********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   onStart: () => (/* binding */ onStart)
/* harmony export */ });
/* harmony import */ var _MainContainer_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MainContainer.mjs */ "./examples/container/accordion/MainContainer.mjs");


const onStart = () => Neo.app({
    mainView: _MainContainer_mjs__WEBPACK_IMPORTED_MODULE_0__["default"],
    name    : 'Neo.examples.container.accordion'
});

/***/ }),

/***/ "./src/container/Accordion.mjs":
/*!*************************************!*\
  !*** ./src/container/Accordion.mjs ***!
  \*************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _AccordionItem_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./AccordionItem.mjs */ "./src/container/AccordionItem.mjs");
/* harmony import */ var _util_Array_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../util/Array.mjs */ "./src/util/Array.mjs");
/* harmony import */ var _Panel_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Panel.mjs */ "./src/container/Panel.mjs");




/**
 * @class Neo.container.Accordion
 * @extends Neo.container.Panel
 */
class Accordion extends _Panel_mjs__WEBPACK_IMPORTED_MODULE_2__["default"] {
    static config = {
        /**
         * @member {String} className='Neo.container.Accordion'
         * @protected
         */
        className: 'Neo.container.Accordion',
        /**
         * @member {String} ntype='accordion'
         * @protected
         */
        ntype: 'accordion',
        /**
         * @member {String[]} baseCls=['neo-accordion']
         */
        baseCls: ['neo-accordion'],
        /**
         * Add zero based numbers, which accordion items you want initially expanded
         * @member {Number[]} initialOpen=[]
         */
        initialOpen_: [],
        /**
         * @member {Object} itemDefaults={ntype:'accordionitem'}
         */
        itemDefaults: {ntype: 'accordionitem'},
        /**
         * @member {Object[]} items=[]
         */
        items: [],
        /**
         * Max number of accordion items, which can be expanded at the same time
         * @member {Number} maxExpandedItems=1
         */
        maxExpandedItems: 1,
        /**
         * Keep track of currently open items
         * @member {String[]} expandedItems=[]
         * @private
         */
        expandedItems_: [],
        /**
         * Creates a top header
         * @member {String|null} title=null
         */
        title_: null
    }

    /**
     * @param {Number[]} value
     * @param {Number[]} oldValue
     */
    afterSetInitialOpen(value, oldValue) {
        let me                     = this,
            {expandedItems, items} = me,
            id, item;

        value.forEach((itemNo) => {
            id   = Neo.getId(me.itemDefaults.ntype),
            item = items[itemNo];

            item.expanded = true;
            item.id       = id;
            _util_Array_mjs__WEBPACK_IMPORTED_MODULE_1__["default"].add(expandedItems, id)
        });

        me.expandedItems = expandedItems
    }

    /**
     * After changes to title config, we add a header
     * @param {String|null} value
     * @param {String|null} oldValue
     */
    afterSetTitle(value, oldValue) {
        let me      = this,
            titleEl = me.down({flag: 'titleEl'});

        if (value && !titleEl) {
            me.headers = [{
                baseCls: 'neo-accordion-title',
                cls    : ['neo-accordion-title'],
                dock   : 'top',
                text   : value
            }]
        }
    }

    /**
     * Called by accordion items.
     * Checks for maxExpandedItems
     * @param {Object}                      data
     * @param {Boolean}                     data.expanded newState
     * @param {Neo.container.AccordionItem} data.target   accordion item
     * @protected
     */
    childExpandChange(data) {
        let me                                = this,
            {expandedItems, maxExpandedItems} = me,
            {expanded, target}                = data,
            curNoOpenItems                    = expandedItems.length,
            targetId                          = target.id;

        if (expanded
            && maxExpandedItems !== 0
            && curNoOpenItems === maxExpandedItems
        ) {
            Neo.get(expandedItems[0]).expanded = false;
            _util_Array_mjs__WEBPACK_IMPORTED_MODULE_1__["default"].remove(expandedItems, expandedItems[0])
        }

        target.expanded = expanded;
        _util_Array_mjs__WEBPACK_IMPORTED_MODULE_1__["default"].toggle(expandedItems, targetId);

        me.expandedItems = expandedItems
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(Accordion));


/***/ }),

/***/ "./src/container/AccordionItem.mjs":
/*!*****************************************!*\
  !*** ./src/container/AccordionItem.mjs ***!
  \*****************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _Base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Base.mjs */ "./src/container/Base.mjs");
/* harmony import */ var _toolbar_Base_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../toolbar/Base.mjs */ "./src/toolbar/Base.mjs");
/* harmony import */ var _util_Array_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../util/Array.mjs */ "./src/util/Array.mjs");




/**
 * @class Neo.container.AccordionItem
 * @extends Neo.container.Base
 */
class AccordionContainer extends _Base_mjs__WEBPACK_IMPORTED_MODULE_0__["default"] {
    static config = {
        /**
         * @member {String} className='Neo.container.AccordionItem'
         * @protected
         */
        className: 'Neo.container.AccordionItem',
        /**
         * @member {String} ntype='accordionitem'
         * @protected
         */
        ntype: 'accordionitem',
        /**
         * @member {String[]} baseCls=['neo-accordion-component']
         */
        baseCls: ['neo-accordion-item'],

        /**
         * Additional cls for the arrow, in case you need to customize it
         * @member {String[]|String|null} arrowCls=null
         */
        arrowCls: null,
        /**
         * Expand or collapse (true/false) this value
         * @member {Boolean} expanded=false
         */
        expanded_: false,
        /**
         * cls for the icon in front of the title
         * May be empty. 'fa' is preset,
         * so if you use fontawesome you do not have to add it.
         *
         * @member {String[]|String|null} iconCls=null
         */
        iconCls_: null,
        /**
         * Title for Headerbar
         * @member {String|null} title=null
         */
        title_: null
    }

    /**
     * Runs after afterSetTitle, so that the title component does not exist prior.
     * @protected
     */
    createItems() {
        let me       = this,
            arrowCls = me.arrowCls || 'fa-caret-down',
            iconCls  = me.iconCls  || ['no-icon'],
            {items, title} = me,
            header, content;

        if (!Neo.isArray(iconCls)) {
            iconCls = iconCls.split(' ')
        }

        if (!Neo.isArray(arrowCls)) {
            arrowCls = arrowCls.split(' ')
        }

        header = Neo.create({
            module: _toolbar_Base_mjs__WEBPACK_IMPORTED_MODULE_1__["default"],
            items : [{
                flag   : 'iconEl',
                ntype  : 'component',
                baseCls: ['neo-accordion-header-icon'],
                cls    : ['fa', ...iconCls],
            }, {
                flag   : 'titleEl',
                ntype  : 'component',
                baseCls: ['neo-accordion-header-title'],
                html   : title
            }, {
                ntype  : 'component',
                baseCls: ['neo-accordion-header-arrow'],
                cls    : ['fa', ...arrowCls]
            }]
        });

        content = {
            ntype  : 'container',
            flag   : 'content',
            baseCls: ['neo-accordion-content', 'neo-container'],
            items  : items
        };

        me.items = [header, content];

        super.createItems();

        me.addDomListeners([
            {click: me.onExpandClick, delegate: 'neo-accordion-header-arrow'}
        ])
    }

    /**
     * After changing expanded, we expand/collapse via CSS
     * @param {Boolean} isExpanded
     */
    afterSetExpanded(isExpanded) {
        let me    = this,
            {cls} = me,
            fn    = isExpanded ? 'add' : 'remove';

        _util_Array_mjs__WEBPACK_IMPORTED_MODULE_2__["default"][fn](cls, 'neo-expanded');
        me.cls = cls;

        // Ensure scrollbars are not flipping in and out
        me.timeout(450).then(() => {
            _util_Array_mjs__WEBPACK_IMPORTED_MODULE_2__["default"][fn](cls, 'neo-scrollable');
            me.cls = cls
        })
    }

    /**
     * The initial title is set before the component is created,
     * so we have to check if it exists.
     *
     * @param {String[]|String} newValue
     * @param {String[]} oldValue
     */
    afterSetIconCls(newValue, oldValue) {
        let iconEl = this.down({flag: 'iconEl'});

        if (iconEl) {
            let cls = iconEl.cls;

            if (!Neo.isArray(newValue)) {
                newValue = newValue.split(' ')
            }

            _util_Array_mjs__WEBPACK_IMPORTED_MODULE_2__["default"].remove(cls, oldValue);
            _util_Array_mjs__WEBPACK_IMPORTED_MODULE_2__["default"].add(cls, newValue);
            iconEl.cls = cls
        }
    }

    /**
     * The initial title is set before the component is created,
     * so we have to check if it exists.
     *
     * @param {String} newValue
     */
    afterSetTitle(newValue) {
        let titleEl = this.down({flag: 'titleEl'});

        if (titleEl) {
            titleEl.html = newValue
        }
    }

    /**
     * If the parent is an AccordionContainer, we run the parent function.
     * Otherwise we set this.expanded to the new value.
     */
    onExpandClick() {
        let me           = this,
            currentState = me.expanded,
            parent       = me.up('accordion');

        if (parent.ntype === 'accordion') {
            parent.childExpandChange({
                expanded: !currentState,
                target  : me
            })
        } else {
            me.expanded = !currentState
        }
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(AccordionContainer));


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2h1bmtzL2FwcC92ZW5kb3JzLWV4YW1wbGVzX2NvbnRhaW5lcl9hY2NvcmRpb25fYXBwX21qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQXlFO0FBQ0w7QUFDQTs7QUFFcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsa0VBQXFCO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9COztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGtCQUFrQjtBQUN0QyxTQUFTO0FBQ1Q7QUFDQTtBQUNBLG9CQUFvQixrQkFBa0I7QUFDdEMsU0FBUztBQUNUO0FBQ0E7QUFDQSxvQkFBb0Isa0JBQWtCO0FBQ3RDLFNBQVM7QUFDVDtBQUNBO0FBQ0Esb0JBQW9CLGtCQUFrQjtBQUN0QyxTQUFTO0FBQ1Q7QUFDQTtBQUNBLG9CQUFvQixrQkFBa0I7QUFDdEMsU0FBUztBQUNUO0FBQ0E7QUFDQSxvQkFBb0Isa0JBQWtCO0FBQ3RDLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0Esb0JBQW9CLCtEQUFTO0FBQzdCO0FBQ0Esd0JBQXdCLG9FQUFTOztBQUVqQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7O0FBRWpCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2Isd0JBQXdCLG9FQUFTOztBQUVqQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7O0FBRWpCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsaUJBQWlCO0FBQ2pC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QUFDQTtBQUNBLGFBQWEsS0FBSztBQUNsQjs7QUFFQSxRQUFRLHVEQUFRO0FBQ2hCOztBQUVBO0FBQ0E7QUFDQSxZQUFZLHVEQUFRO0FBQ3BCO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxpQkFBaUI7QUFDaEMsZUFBZSxVQUFVO0FBQ3pCO0FBQ0E7QUFDQSxnQ0FBZ0MsZUFBZTs7QUFFL0M7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsWUFBWSx1REFBUTtBQUNwQixZQUFZLHVEQUFRO0FBQ3BCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0EsaUNBQWlDLGdCQUFnQjs7QUFFakQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsaUVBQWUsa0NBQWtDLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZW8ubWpzLy4vZXhhbXBsZXMvY29udGFpbmVyL2FjY29yZGlvbi9NYWluQ29udGFpbmVyLm1qcyIsIndlYnBhY2s6Ly9uZW8ubWpzLy4vZXhhbXBsZXMvY29udGFpbmVyL2FjY29yZGlvbi9hcHAubWpzIiwid2VicGFjazovL25lby5tanMvLi9zcmMvY29udGFpbmVyL0FjY29yZGlvbi5tanMiLCJ3ZWJwYWNrOi8vbmVvLm1qcy8uL3NyYy9jb250YWluZXIvQWNjb3JkaW9uSXRlbS5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEFjY29yZGlvbiAgICAgICAgICAgICBmcm9tICcuLi8uLi8uLi9zcmMvY29udGFpbmVyL0FjY29yZGlvbi5tanMnO1xuaW1wb3J0IENvbmZpZ3VyYXRpb25WaWV3cG9ydCBmcm9tICcuLi8uLi9Db25maWd1cmF0aW9uVmlld3BvcnQubWpzJztcbmltcG9ydCBDb250YWluZXIgICAgICAgICAgICAgZnJvbSAnLi4vLi4vLi4vc3JjL2NvbnRhaW5lci9CYXNlLm1qcyc7XG5cbi8qKlxuICogQGNsYXNzIE5lby5leGFtcGxlcy5idXR0b24uYmFzZS5NYWluQ29udGFpbmVyXG4gKiBAZXh0ZW5kcyBOZW8uZXhhbXBsZXMuQ29uZmlndXJhdGlvblZpZXdwb3J0XG4gKi9cbmNsYXNzIE1haW5Db250YWluZXIgZXh0ZW5kcyBDb25maWd1cmF0aW9uVmlld3BvcnQge1xuICAgIHN0YXRpYyBjb25maWcgPSB7XG4gICAgICAgIGNsYXNzTmFtZSAgICAgICAgICAgOiAnTmVvLmV4YW1wbGVzLmJ1dHRvbi5iYXNlLk1haW5Db250YWluZXInLFxuICAgICAgICBjb25maWdJdGVtTGFiZWxXaWR0aDogMTYwLFxuICAgICAgICBjb25maWdJdGVtV2lkdGggICAgIDogMjgwLFxuICAgICAgICBsYXlvdXQgICAgICAgICAgICAgIDoge250eXBlOiAnaGJveCcsIGFsaWduOiAnc3RyZXRjaCd9XG4gICAgfVxuXG4gICAgY3JlYXRlQ29uZmlndXJhdGlvbkNvbXBvbmVudHMoKSB7XG4gICAgICAgIHJldHVybiBbe1xuICAgICAgICAgICAgbnR5cGU6ICdjb21wb25lbnQnLFxuICAgICAgICAgICAgaHRtbCA6ICc8dT48Yj5UT1AgQUNDT1JESU9OPC9iPjwvdT4nLFxuICAgICAgICAgICAgc3R5bGU6IHttYXJnaW5Ub3A6ICcxMHB4J30sXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG50eXBlOiAnY29tcG9uZW50JyxcbiAgICAgICAgICAgIGh0bWwgOiAnPGI+bWF4RXhwYW5kZWRJdGVtczo8L2I+IDInLFxuICAgICAgICAgICAgc3R5bGU6IHttYXJnaW5Ub3A6ICcxMHB4J30sXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG50eXBlOiAnY29tcG9uZW50JyxcbiAgICAgICAgICAgIGh0bWwgOiAnPGI+aW5pdGlhbE9wZW46PC9iPiBbMCwgMV0nLFxuICAgICAgICAgICAgc3R5bGU6IHttYXJnaW5Ub3A6ICcxMHB4J30sXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIG50eXBlOiAnY29tcG9uZW50JyxcbiAgICAgICAgICAgIGh0bWwgOiAnPHU+PGI+Qk9UVE9NIEFDQ09SRElPTjwvYj48L3U+JyxcbiAgICAgICAgICAgIHN0eWxlOiB7bWFyZ2luVG9wOiAnMTBweCd9LFxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBudHlwZTogJ2NvbXBvbmVudCcsXG4gICAgICAgICAgICBodG1sIDogJzxiPm1heEV4cGFuZGVkSXRlbXM6PC9iPiAxJyxcbiAgICAgICAgICAgIHN0eWxlOiB7bWFyZ2luVG9wOiAnMTBweCd9LFxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBudHlwZTogJ2NvbXBvbmVudCcsXG4gICAgICAgICAgICBodG1sIDogJzxiPmluaXRpYWxPcGVuOjwvYj4gWzBdJyxcbiAgICAgICAgICAgIHN0eWxlOiB7bWFyZ2luVG9wOiAnMTBweCd9LFxuICAgICAgICB9XVxuICAgIH1cblxuICAgIGNyZWF0ZUV4YW1wbGVDb21wb25lbnQoKSB7XG4gICAgICAgIHJldHVybiBOZW8uY3JlYXRlKHtcbiAgICAgICAgICAgIG1vZHVsZTogQ29udGFpbmVyLFxuICAgICAgICAgICAgaXRlbXMgOiBbe1xuICAgICAgICAgICAgICAgIG1vZHVsZTogQWNjb3JkaW9uLFxuXG4gICAgICAgICAgICAgICAgdGl0bGUgICAgICAgICAgIDogJ1RPUCcsXG4gICAgICAgICAgICAgICAgbWF4RXhwYW5kZWRJdGVtczogMixcbiAgICAgICAgICAgICAgICBpbml0aWFsT3BlbiAgICAgOiBbMCwgMV0sXG5cbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDU1MCxcbiAgICAgICAgICAgICAgICBzdHlsZSA6IHtcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnZ3JleScsXG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmcgICAgICAgIDogJzE1cHgnXG4gICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgIGl0ZW1zOiBbe1xuICAgICAgICAgICAgICAgICAgICBpY29uQ2xzOiAnZmEgZmEtZGljZS1vbmUnLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZSAgOiAnRmlyc3QgSGVhZGVyYmFyJyxcbiAgICAgICAgICAgICAgICAgICAgaXRlbXMgIDogW3tcbiAgICAgICAgICAgICAgICAgICAgICAgIG50eXBlOiAnY29tcG9uZW50JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgOiAnTG9yZW0gaXBzdW0gZG9sb3Igc2l0IGFtZXQsIGNvbnNlY3RldHVlciBhZGlwaXNjaW5nIGVsaXQuIE1hZWNlbmFzIHBvcnR0aXRvciBjb25ndWUgbWFzc2EuIEZ1c2NlIHBvc3VlcmUsIG1hZ25hIHNlZCBwdWx2aW5hciB1bHRyaWNpZXMsIHB1cnVzIGxlY3R1cyBtYWxlc3VhZGEgbGliZXJvLCBzaXQgYW1ldCBjb21tb2RvIG1hZ25hIGVyb3MgcXVpcyB1cm5hLidcbiAgICAgICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgIGljb25DbHM6ICdmYS1kaWNlLXR3bycsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlICA6ICdTZWNvbmQgSGVhZGVyYmFyJyxcbiAgICAgICAgICAgICAgICAgICAgaXRlbXMgIDogW3tcbiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWw6ICdOdW5jIHZpdmVycmEgaW1wZXJkaWV0IGVuaW0uIEZ1c2NlIGVzdC4gVml2YW11cyBhIHRlbGx1cy4nXG4gICAgICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICBpY29uQ2xzOiAnZmEtZGljZS10aHJlZScsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlICA6ICdUaGlyZCBIZWFkZXJiYXInLFxuICAgICAgICAgICAgICAgICAgICBpdGVtcyAgOiBbe1xuICAgICAgICAgICAgICAgICAgICAgICAgaHRtbDogJ1BlbGxlbnRlc3F1ZSBoYWJpdGFudCBtb3JiaSB0cmlzdGlxdWUgc2VuZWN0dXMgZXQgbmV0dXMgZXQgbWFsZXN1YWRhIGZhbWVzIGFjIHR1cnBpcyBlZ2VzdGFzLiBQcm9pbiBwaGFyZXRyYSBub251bW15IHBlZGUuIE1hdXJpcyBldCBvcmNpLidcbiAgICAgICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIG1vZHVsZTogQWNjb3JkaW9uLFxuXG4gICAgICAgICAgICAgICAgdGl0bGUgICAgICAgICAgIDogJ2JvdHRvbScsXG4gICAgICAgICAgICAgICAgbWF4RXhwYW5kZWRJdGVtczogMSxcbiAgICAgICAgICAgICAgICBpbml0aWFsT3BlbiAgICAgOiBbMF0sXG5cbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDU1MCxcbiAgICAgICAgICAgICAgICBzdHlsZSA6IHtcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnZGFya2dyZXknLFxuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nICAgICAgICA6ICcxNXB4J1xuICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICBpdGVtczogW3tcbiAgICAgICAgICAgICAgICAgICAgaWNvbkNsczogJ2ZhIGZhLTEnLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZSAgOiAnRGVmaW5lIENvbnRlbnQnLFxuICAgICAgICAgICAgICAgICAgICBpdGVtcyAgOiBbe1xuICAgICAgICAgICAgICAgICAgICAgICAgbnR5cGU6ICdjb21wb25lbnQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCA6ICdMb3JlbSBpcHN1bSBkb2xvciBzaXQgYW1ldCwgY29uc2VjdGV0dWVyIGFkaXBpc2NpbmcgZWxpdC4gTWFlY2VuYXMgcG9ydHRpdG9yIGNvbmd1ZSBtYXNzYS4gRnVzY2UgcG9zdWVyZSwgbWFnbmEgc2VkIHB1bHZpbmFyIHVsdHJpY2llcywgcHVydXMgbGVjdHVzIG1hbGVzdWFkYSBsaWJlcm8sIHNpdCBhbWV0IGNvbW1vZG8gbWFnbmEgZXJvcyBxdWlzIHVybmEuJ1xuICAgICAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgaWNvbkNsczogJ2ZhLTInLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZSAgOiAnTWFyayBCZXN0IEZpdCcsXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zICA6IFt7XG4gICAgICAgICAgICAgICAgICAgICAgICBodG1sOiAnTnVuYyB2aXZlcnJhIGltcGVyZGlldCBlbmltLiBGdXNjZSBlc3QuIFZpdmFtdXMgYSB0ZWxsdXMuJ1xuICAgICAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgaWNvbkNsczogJ2ZhLTMnLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZSAgOiAnQ3JlYXRlIEludm9pY2UnLFxuICAgICAgICAgICAgICAgICAgICBpdGVtcyAgOiBbe1xuICAgICAgICAgICAgICAgICAgICAgICAgaHRtbDogJ1BlbGxlbnRlc3F1ZSBoYWJpdGFudCBtb3JiaSB0cmlzdGlxdWUgc2VuZWN0dXMgZXQgbmV0dXMgZXQgbWFsZXN1YWRhIGZhbWVzIGFjIHR1cnBpcyBlZ2VzdGFzLiBQcm9pbiBwaGFyZXRyYSBub251bW15IHBlZGUuIE1hdXJpcyBldCBvcmNpLidcbiAgICAgICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgfV1cbiAgICAgICAgfSlcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IE5lby5zZXR1cENsYXNzKE1haW5Db250YWluZXIpO1xuIiwiaW1wb3J0IE1haW5Db250YWluZXIgZnJvbSAnLi9NYWluQ29udGFpbmVyLm1qcyc7XG5cbmV4cG9ydCBjb25zdCBvblN0YXJ0ID0gKCkgPT4gTmVvLmFwcCh7XG4gICAgbWFpblZpZXc6IE1haW5Db250YWluZXIsXG4gICAgbmFtZSAgICA6ICdOZW8uZXhhbXBsZXMuY29udGFpbmVyLmFjY29yZGlvbidcbn0pOyIsImltcG9ydCBBY2NvcmRpb25JdGVtIGZyb20gJy4vQWNjb3JkaW9uSXRlbS5tanMnO1xuaW1wb3J0IE5lb0FycmF5ICAgICAgZnJvbSAnLi4vdXRpbC9BcnJheS5tanMnO1xuaW1wb3J0IFBhbmVsICAgICAgICAgZnJvbSAnLi9QYW5lbC5tanMnO1xuXG4vKipcbiAqIEBjbGFzcyBOZW8uY29udGFpbmVyLkFjY29yZGlvblxuICogQGV4dGVuZHMgTmVvLmNvbnRhaW5lci5QYW5lbFxuICovXG5jbGFzcyBBY2NvcmRpb24gZXh0ZW5kcyBQYW5lbCB7XG4gICAgc3RhdGljIGNvbmZpZyA9IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ30gY2xhc3NOYW1lPSdOZW8uY29udGFpbmVyLkFjY29yZGlvbidcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgY2xhc3NOYW1lOiAnTmVvLmNvbnRhaW5lci5BY2NvcmRpb24nLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfSBudHlwZT0nYWNjb3JkaW9uJ1xuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICBudHlwZTogJ2FjY29yZGlvbicsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtTdHJpbmdbXX0gYmFzZUNscz1bJ25lby1hY2NvcmRpb24nXVxuICAgICAgICAgKi9cbiAgICAgICAgYmFzZUNsczogWyduZW8tYWNjb3JkaW9uJ10sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBZGQgemVybyBiYXNlZCBudW1iZXJzLCB3aGljaCBhY2NvcmRpb24gaXRlbXMgeW91IHdhbnQgaW5pdGlhbGx5IGV4cGFuZGVkXG4gICAgICAgICAqIEBtZW1iZXIge051bWJlcltdfSBpbml0aWFsT3Blbj1bXVxuICAgICAgICAgKi9cbiAgICAgICAgaW5pdGlhbE9wZW5fOiBbXSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge09iamVjdH0gaXRlbURlZmF1bHRzPXtudHlwZTonYWNjb3JkaW9uaXRlbSd9XG4gICAgICAgICAqL1xuICAgICAgICBpdGVtRGVmYXVsdHM6IHtudHlwZTogJ2FjY29yZGlvbml0ZW0nfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge09iamVjdFtdfSBpdGVtcz1bXVxuICAgICAgICAgKi9cbiAgICAgICAgaXRlbXM6IFtdLFxuICAgICAgICAvKipcbiAgICAgICAgICogTWF4IG51bWJlciBvZiBhY2NvcmRpb24gaXRlbXMsIHdoaWNoIGNhbiBiZSBleHBhbmRlZCBhdCB0aGUgc2FtZSB0aW1lXG4gICAgICAgICAqIEBtZW1iZXIge051bWJlcn0gbWF4RXhwYW5kZWRJdGVtcz0xXG4gICAgICAgICAqL1xuICAgICAgICBtYXhFeHBhbmRlZEl0ZW1zOiAxLFxuICAgICAgICAvKipcbiAgICAgICAgICogS2VlcCB0cmFjayBvZiBjdXJyZW50bHkgb3BlbiBpdGVtc1xuICAgICAgICAgKiBAbWVtYmVyIHtTdHJpbmdbXX0gZXhwYW5kZWRJdGVtcz1bXVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgZXhwYW5kZWRJdGVtc186IFtdLFxuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlcyBhIHRvcCBoZWFkZXJcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfG51bGx9IHRpdGxlPW51bGxcbiAgICAgICAgICovXG4gICAgICAgIHRpdGxlXzogbnVsbFxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7TnVtYmVyW119IHZhbHVlXG4gICAgICogQHBhcmFtIHtOdW1iZXJbXX0gb2xkVmFsdWVcbiAgICAgKi9cbiAgICBhZnRlclNldEluaXRpYWxPcGVuKHZhbHVlLCBvbGRWYWx1ZSkge1xuICAgICAgICBsZXQgbWUgICAgICAgICAgICAgICAgICAgICA9IHRoaXMsXG4gICAgICAgICAgICB7ZXhwYW5kZWRJdGVtcywgaXRlbXN9ID0gbWUsXG4gICAgICAgICAgICBpZCwgaXRlbTtcblxuICAgICAgICB2YWx1ZS5mb3JFYWNoKChpdGVtTm8pID0+IHtcbiAgICAgICAgICAgIGlkICAgPSBOZW8uZ2V0SWQobWUuaXRlbURlZmF1bHRzLm50eXBlKSxcbiAgICAgICAgICAgIGl0ZW0gPSBpdGVtc1tpdGVtTm9dO1xuXG4gICAgICAgICAgICBpdGVtLmV4cGFuZGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGl0ZW0uaWQgICAgICAgPSBpZDtcbiAgICAgICAgICAgIE5lb0FycmF5LmFkZChleHBhbmRlZEl0ZW1zLCBpZClcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbWUuZXhwYW5kZWRJdGVtcyA9IGV4cGFuZGVkSXRlbXNcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZnRlciBjaGFuZ2VzIHRvIHRpdGxlIGNvbmZpZywgd2UgYWRkIGEgaGVhZGVyXG4gICAgICogQHBhcmFtIHtTdHJpbmd8bnVsbH0gdmFsdWVcbiAgICAgKiBAcGFyYW0ge1N0cmluZ3xudWxsfSBvbGRWYWx1ZVxuICAgICAqL1xuICAgIGFmdGVyU2V0VGl0bGUodmFsdWUsIG9sZFZhbHVlKSB7XG4gICAgICAgIGxldCBtZSAgICAgID0gdGhpcyxcbiAgICAgICAgICAgIHRpdGxlRWwgPSBtZS5kb3duKHtmbGFnOiAndGl0bGVFbCd9KTtcblxuICAgICAgICBpZiAodmFsdWUgJiYgIXRpdGxlRWwpIHtcbiAgICAgICAgICAgIG1lLmhlYWRlcnMgPSBbe1xuICAgICAgICAgICAgICAgIGJhc2VDbHM6ICduZW8tYWNjb3JkaW9uLXRpdGxlJyxcbiAgICAgICAgICAgICAgICBjbHMgICAgOiBbJ25lby1hY2NvcmRpb24tdGl0bGUnXSxcbiAgICAgICAgICAgICAgICBkb2NrICAgOiAndG9wJyxcbiAgICAgICAgICAgICAgICB0ZXh0ICAgOiB2YWx1ZVxuICAgICAgICAgICAgfV1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhbGxlZCBieSBhY2NvcmRpb24gaXRlbXMuXG4gICAgICogQ2hlY2tzIGZvciBtYXhFeHBhbmRlZEl0ZW1zXG4gICAgICogQHBhcmFtIHtPYmplY3R9ICAgICAgICAgICAgICAgICAgICAgIGRhdGFcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59ICAgICAgICAgICAgICAgICAgICAgZGF0YS5leHBhbmRlZCBuZXdTdGF0ZVxuICAgICAqIEBwYXJhbSB7TmVvLmNvbnRhaW5lci5BY2NvcmRpb25JdGVtfSBkYXRhLnRhcmdldCAgIGFjY29yZGlvbiBpdGVtXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIGNoaWxkRXhwYW5kQ2hhbmdlKGRhdGEpIHtcbiAgICAgICAgbGV0IG1lICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IHRoaXMsXG4gICAgICAgICAgICB7ZXhwYW5kZWRJdGVtcywgbWF4RXhwYW5kZWRJdGVtc30gPSBtZSxcbiAgICAgICAgICAgIHtleHBhbmRlZCwgdGFyZ2V0fSAgICAgICAgICAgICAgICA9IGRhdGEsXG4gICAgICAgICAgICBjdXJOb09wZW5JdGVtcyAgICAgICAgICAgICAgICAgICAgPSBleHBhbmRlZEl0ZW1zLmxlbmd0aCxcbiAgICAgICAgICAgIHRhcmdldElkICAgICAgICAgICAgICAgICAgICAgICAgICA9IHRhcmdldC5pZDtcblxuICAgICAgICBpZiAoZXhwYW5kZWRcbiAgICAgICAgICAgICYmIG1heEV4cGFuZGVkSXRlbXMgIT09IDBcbiAgICAgICAgICAgICYmIGN1ck5vT3Blbkl0ZW1zID09PSBtYXhFeHBhbmRlZEl0ZW1zXG4gICAgICAgICkge1xuICAgICAgICAgICAgTmVvLmdldChleHBhbmRlZEl0ZW1zWzBdKS5leHBhbmRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgTmVvQXJyYXkucmVtb3ZlKGV4cGFuZGVkSXRlbXMsIGV4cGFuZGVkSXRlbXNbMF0pXG4gICAgICAgIH1cblxuICAgICAgICB0YXJnZXQuZXhwYW5kZWQgPSBleHBhbmRlZDtcbiAgICAgICAgTmVvQXJyYXkudG9nZ2xlKGV4cGFuZGVkSXRlbXMsIHRhcmdldElkKTtcblxuICAgICAgICBtZS5leHBhbmRlZEl0ZW1zID0gZXhwYW5kZWRJdGVtc1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTmVvLnNldHVwQ2xhc3MoQWNjb3JkaW9uKTtcbiIsImltcG9ydCBCYXNlICAgICBmcm9tICcuL0Jhc2UubWpzJztcbmltcG9ydCBUb29sYmFyICBmcm9tICcuLi90b29sYmFyL0Jhc2UubWpzJztcbmltcG9ydCBOZW9BcnJheSBmcm9tICcuLi91dGlsL0FycmF5Lm1qcyc7XG5cbi8qKlxuICogQGNsYXNzIE5lby5jb250YWluZXIuQWNjb3JkaW9uSXRlbVxuICogQGV4dGVuZHMgTmVvLmNvbnRhaW5lci5CYXNlXG4gKi9cbmNsYXNzIEFjY29yZGlvbkNvbnRhaW5lciBleHRlbmRzIEJhc2Uge1xuICAgIHN0YXRpYyBjb25maWcgPSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtTdHJpbmd9IGNsYXNzTmFtZT0nTmVvLmNvbnRhaW5lci5BY2NvcmRpb25JdGVtJ1xuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICBjbGFzc05hbWU6ICdOZW8uY29udGFpbmVyLkFjY29yZGlvbkl0ZW0nLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfSBudHlwZT0nYWNjb3JkaW9uaXRlbSdcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgbnR5cGU6ICdhY2NvcmRpb25pdGVtJyxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ1tdfSBiYXNlQ2xzPVsnbmVvLWFjY29yZGlvbi1jb21wb25lbnQnXVxuICAgICAgICAgKi9cbiAgICAgICAgYmFzZUNsczogWyduZW8tYWNjb3JkaW9uLWl0ZW0nXSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQWRkaXRpb25hbCBjbHMgZm9yIHRoZSBhcnJvdywgaW4gY2FzZSB5b3UgbmVlZCB0byBjdXN0b21pemUgaXRcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nW118U3RyaW5nfG51bGx9IGFycm93Q2xzPW51bGxcbiAgICAgICAgICovXG4gICAgICAgIGFycm93Q2xzOiBudWxsLFxuICAgICAgICAvKipcbiAgICAgICAgICogRXhwYW5kIG9yIGNvbGxhcHNlICh0cnVlL2ZhbHNlKSB0aGlzIHZhbHVlXG4gICAgICAgICAqIEBtZW1iZXIge0Jvb2xlYW59IGV4cGFuZGVkPWZhbHNlXG4gICAgICAgICAqL1xuICAgICAgICBleHBhbmRlZF86IGZhbHNlLFxuICAgICAgICAvKipcbiAgICAgICAgICogY2xzIGZvciB0aGUgaWNvbiBpbiBmcm9udCBvZiB0aGUgdGl0bGVcbiAgICAgICAgICogTWF5IGJlIGVtcHR5LiAnZmEnIGlzIHByZXNldCxcbiAgICAgICAgICogc28gaWYgeW91IHVzZSBmb250YXdlc29tZSB5b3UgZG8gbm90IGhhdmUgdG8gYWRkIGl0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAbWVtYmVyIHtTdHJpbmdbXXxTdHJpbmd8bnVsbH0gaWNvbkNscz1udWxsXG4gICAgICAgICAqL1xuICAgICAgICBpY29uQ2xzXzogbnVsbCxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRpdGxlIGZvciBIZWFkZXJiYXJcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfG51bGx9IHRpdGxlPW51bGxcbiAgICAgICAgICovXG4gICAgICAgIHRpdGxlXzogbnVsbFxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJ1bnMgYWZ0ZXIgYWZ0ZXJTZXRUaXRsZSwgc28gdGhhdCB0aGUgdGl0bGUgY29tcG9uZW50IGRvZXMgbm90IGV4aXN0IHByaW9yLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBjcmVhdGVJdGVtcygpIHtcbiAgICAgICAgbGV0IG1lICAgICAgID0gdGhpcyxcbiAgICAgICAgICAgIGFycm93Q2xzID0gbWUuYXJyb3dDbHMgfHwgJ2ZhLWNhcmV0LWRvd24nLFxuICAgICAgICAgICAgaWNvbkNscyAgPSBtZS5pY29uQ2xzICB8fCBbJ25vLWljb24nXSxcbiAgICAgICAgICAgIHtpdGVtcywgdGl0bGV9ID0gbWUsXG4gICAgICAgICAgICBoZWFkZXIsIGNvbnRlbnQ7XG5cbiAgICAgICAgaWYgKCFOZW8uaXNBcnJheShpY29uQ2xzKSkge1xuICAgICAgICAgICAgaWNvbkNscyA9IGljb25DbHMuc3BsaXQoJyAnKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFOZW8uaXNBcnJheShhcnJvd0NscykpIHtcbiAgICAgICAgICAgIGFycm93Q2xzID0gYXJyb3dDbHMuc3BsaXQoJyAnKVxuICAgICAgICB9XG5cbiAgICAgICAgaGVhZGVyID0gTmVvLmNyZWF0ZSh7XG4gICAgICAgICAgICBtb2R1bGU6IFRvb2xiYXIsXG4gICAgICAgICAgICBpdGVtcyA6IFt7XG4gICAgICAgICAgICAgICAgZmxhZyAgIDogJ2ljb25FbCcsXG4gICAgICAgICAgICAgICAgbnR5cGUgIDogJ2NvbXBvbmVudCcsXG4gICAgICAgICAgICAgICAgYmFzZUNsczogWyduZW8tYWNjb3JkaW9uLWhlYWRlci1pY29uJ10sXG4gICAgICAgICAgICAgICAgY2xzICAgIDogWydmYScsIC4uLmljb25DbHNdLFxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIGZsYWcgICA6ICd0aXRsZUVsJyxcbiAgICAgICAgICAgICAgICBudHlwZSAgOiAnY29tcG9uZW50JyxcbiAgICAgICAgICAgICAgICBiYXNlQ2xzOiBbJ25lby1hY2NvcmRpb24taGVhZGVyLXRpdGxlJ10sXG4gICAgICAgICAgICAgICAgaHRtbCAgIDogdGl0bGVcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBudHlwZSAgOiAnY29tcG9uZW50JyxcbiAgICAgICAgICAgICAgICBiYXNlQ2xzOiBbJ25lby1hY2NvcmRpb24taGVhZGVyLWFycm93J10sXG4gICAgICAgICAgICAgICAgY2xzICAgIDogWydmYScsIC4uLmFycm93Q2xzXVxuICAgICAgICAgICAgfV1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29udGVudCA9IHtcbiAgICAgICAgICAgIG50eXBlICA6ICdjb250YWluZXInLFxuICAgICAgICAgICAgZmxhZyAgIDogJ2NvbnRlbnQnLFxuICAgICAgICAgICAgYmFzZUNsczogWyduZW8tYWNjb3JkaW9uLWNvbnRlbnQnLCAnbmVvLWNvbnRhaW5lciddLFxuICAgICAgICAgICAgaXRlbXMgIDogaXRlbXNcbiAgICAgICAgfTtcblxuICAgICAgICBtZS5pdGVtcyA9IFtoZWFkZXIsIGNvbnRlbnRdO1xuXG4gICAgICAgIHN1cGVyLmNyZWF0ZUl0ZW1zKCk7XG5cbiAgICAgICAgbWUuYWRkRG9tTGlzdGVuZXJzKFtcbiAgICAgICAgICAgIHtjbGljazogbWUub25FeHBhbmRDbGljaywgZGVsZWdhdGU6ICduZW8tYWNjb3JkaW9uLWhlYWRlci1hcnJvdyd9XG4gICAgICAgIF0pXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWZ0ZXIgY2hhbmdpbmcgZXhwYW5kZWQsIHdlIGV4cGFuZC9jb2xsYXBzZSB2aWEgQ1NTXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBpc0V4cGFuZGVkXG4gICAgICovXG4gICAgYWZ0ZXJTZXRFeHBhbmRlZChpc0V4cGFuZGVkKSB7XG4gICAgICAgIGxldCBtZSAgICA9IHRoaXMsXG4gICAgICAgICAgICB7Y2xzfSA9IG1lLFxuICAgICAgICAgICAgZm4gICAgPSBpc0V4cGFuZGVkID8gJ2FkZCcgOiAncmVtb3ZlJztcblxuICAgICAgICBOZW9BcnJheVtmbl0oY2xzLCAnbmVvLWV4cGFuZGVkJyk7XG4gICAgICAgIG1lLmNscyA9IGNscztcblxuICAgICAgICAvLyBFbnN1cmUgc2Nyb2xsYmFycyBhcmUgbm90IGZsaXBwaW5nIGluIGFuZCBvdXRcbiAgICAgICAgbWUudGltZW91dCg0NTApLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgTmVvQXJyYXlbZm5dKGNscywgJ25lby1zY3JvbGxhYmxlJyk7XG4gICAgICAgICAgICBtZS5jbHMgPSBjbHNcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgaW5pdGlhbCB0aXRsZSBpcyBzZXQgYmVmb3JlIHRoZSBjb21wb25lbnQgaXMgY3JlYXRlZCxcbiAgICAgKiBzbyB3ZSBoYXZlIHRvIGNoZWNrIGlmIGl0IGV4aXN0cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nW118U3RyaW5nfSBuZXdWYWx1ZVxuICAgICAqIEBwYXJhbSB7U3RyaW5nW119IG9sZFZhbHVlXG4gICAgICovXG4gICAgYWZ0ZXJTZXRJY29uQ2xzKG5ld1ZhbHVlLCBvbGRWYWx1ZSkge1xuICAgICAgICBsZXQgaWNvbkVsID0gdGhpcy5kb3duKHtmbGFnOiAnaWNvbkVsJ30pO1xuXG4gICAgICAgIGlmIChpY29uRWwpIHtcbiAgICAgICAgICAgIGxldCBjbHMgPSBpY29uRWwuY2xzO1xuXG4gICAgICAgICAgICBpZiAoIU5lby5pc0FycmF5KG5ld1ZhbHVlKSkge1xuICAgICAgICAgICAgICAgIG5ld1ZhbHVlID0gbmV3VmFsdWUuc3BsaXQoJyAnKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBOZW9BcnJheS5yZW1vdmUoY2xzLCBvbGRWYWx1ZSk7XG4gICAgICAgICAgICBOZW9BcnJheS5hZGQoY2xzLCBuZXdWYWx1ZSk7XG4gICAgICAgICAgICBpY29uRWwuY2xzID0gY2xzXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgaW5pdGlhbCB0aXRsZSBpcyBzZXQgYmVmb3JlIHRoZSBjb21wb25lbnQgaXMgY3JlYXRlZCxcbiAgICAgKiBzbyB3ZSBoYXZlIHRvIGNoZWNrIGlmIGl0IGV4aXN0cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBuZXdWYWx1ZVxuICAgICAqL1xuICAgIGFmdGVyU2V0VGl0bGUobmV3VmFsdWUpIHtcbiAgICAgICAgbGV0IHRpdGxlRWwgPSB0aGlzLmRvd24oe2ZsYWc6ICd0aXRsZUVsJ30pO1xuXG4gICAgICAgIGlmICh0aXRsZUVsKSB7XG4gICAgICAgICAgICB0aXRsZUVsLmh0bWwgPSBuZXdWYWx1ZVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSWYgdGhlIHBhcmVudCBpcyBhbiBBY2NvcmRpb25Db250YWluZXIsIHdlIHJ1biB0aGUgcGFyZW50IGZ1bmN0aW9uLlxuICAgICAqIE90aGVyd2lzZSB3ZSBzZXQgdGhpcy5leHBhbmRlZCB0byB0aGUgbmV3IHZhbHVlLlxuICAgICAqL1xuICAgIG9uRXhwYW5kQ2xpY2soKSB7XG4gICAgICAgIGxldCBtZSAgICAgICAgICAgPSB0aGlzLFxuICAgICAgICAgICAgY3VycmVudFN0YXRlID0gbWUuZXhwYW5kZWQsXG4gICAgICAgICAgICBwYXJlbnQgICAgICAgPSBtZS51cCgnYWNjb3JkaW9uJyk7XG5cbiAgICAgICAgaWYgKHBhcmVudC5udHlwZSA9PT0gJ2FjY29yZGlvbicpIHtcbiAgICAgICAgICAgIHBhcmVudC5jaGlsZEV4cGFuZENoYW5nZSh7XG4gICAgICAgICAgICAgICAgZXhwYW5kZWQ6ICFjdXJyZW50U3RhdGUsXG4gICAgICAgICAgICAgICAgdGFyZ2V0ICA6IG1lXG4gICAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbWUuZXhwYW5kZWQgPSAhY3VycmVudFN0YXRlXG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IE5lby5zZXR1cENsYXNzKEFjY29yZGlvbkNvbnRhaW5lcik7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=