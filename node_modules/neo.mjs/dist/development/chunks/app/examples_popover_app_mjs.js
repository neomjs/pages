"use strict";
(self["webpackChunkneo_mjs"] = self["webpackChunkneo_mjs"] || []).push([["examples_popover_app_mjs"],{

/***/ "./examples/popover/MainContainer.mjs":
/*!********************************************!*\
  !*** ./examples/popover/MainContainer.mjs ***!
  \********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _src_component_Base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../src/component/Base.mjs */ "./src/component/Base.mjs");
/* harmony import */ var _ConfigurationViewport_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ConfigurationViewport.mjs */ "./examples/ConfigurationViewport.mjs");
/* harmony import */ var _src_plugin_Popover_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../src/plugin/Popover.mjs */ "./src/plugin/Popover.mjs");
/* harmony import */ var _src_button_Base_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../src/button/Base.mjs */ "./src/button/Base.mjs");





/**
 * @class Neo.examples.popover.MainContainer
 * @extends Neo.examples.ConfigurationViewport
 */
class MainContainer extends _ConfigurationViewport_mjs__WEBPACK_IMPORTED_MODULE_1__["default"] {
    static config = {
        className           : 'Neo.examples.popover.MainContainer',
        autoMount           : true,
        configItemLabelWidth: 100,
        configItemWidth     : 230,
        layout              : {ntype: 'hbox', align: 'stretch'},
        cls                 : ['examples-container-accordion']
    }

    /**
     * @returns {*}
     */
    createExampleComponent() {
        return Neo.ntype({
            ntype : 'container',
            height: '30%',
            layout: {ntype: 'vbox', align: 'center', pack: 'center'},
            items : [{
                module: _src_component_Base_mjs__WEBPACK_IMPORTED_MODULE_0__["default"],
                height: 10
            }, {
                module : _src_button_Base_mjs__WEBPACK_IMPORTED_MODULE_3__["default"],
                width  : 200,
                text   : 'Click Me',
                plugins: [{
                    module: _src_plugin_Popover_mjs__WEBPACK_IMPORTED_MODULE_2__["default"],
                    align : 'bc-tc',
                    items : [{
                        ntype  : 'panel',
                        headers: [{
                            dock: 'top',
                            html: 'HEADER'
                        }],
                        items  : [{
                            html: 'This is a comment about the button'
                        }]
                    }]
                }]
            }]
        })
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(MainContainer));


/***/ }),

/***/ "./examples/popover/app.mjs":
/*!**********************************!*\
  !*** ./examples/popover/app.mjs ***!
  \**********************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   onStart: () => (/* binding */ onStart)
/* harmony export */ });
/* harmony import */ var _MainContainer_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./MainContainer.mjs */ "./examples/popover/MainContainer.mjs");


const onStart = () => Neo.app({
    mainView: _MainContainer_mjs__WEBPACK_IMPORTED_MODULE_0__["default"],
    name    : 'Neo.examples.popover'
});


/***/ }),

/***/ "./src/plugin/Base.mjs":
/*!*****************************!*\
  !*** ./src/plugin/Base.mjs ***!
  \*****************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _core_Base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/Base.mjs */ "./src/core/Base.mjs");


/**
 * Abstract base class for plugin implementations.
 * Plugins are intended to get put into the plugins config of component.Base
 * to enhance them or add additional features
 * @class Neo.plugin.Base
 * @extends Neo.core.Base
 */
class Plugin extends _core_Base_mjs__WEBPACK_IMPORTED_MODULE_0__["default"] {
    static config = {
        /**
         * @member {String} className='Neo.plugin.Base'
         * @protected
         */
        className: 'Neo.plugin.Base',
        /**
         * All plugin ntypes need to start with 'plugin-' to ensure that component.Base: getPlugin() can find them
         * @member {String} ntype='plugin'
         * @protected
         */
        ntype: 'plugin',
        /**
         * @member {Neo.component.Base} owner=null
         * @protected
         */
        owner: null,
        /**
         * @member {Number|null} windowId_=null
         */
        windowId_: null
    }

    /**
     * @param {Object} config
     */
    construct(config) {
        super.construct(config);

        let me = this;

        if (me.owner.mounted) {
            me.onOwnerMounted();
        } else {
            me.owner.on('mounted', me.onOwnerMounted, me);
        }
    }

    /**
     * Triggered after the windowId config got changed
     * @param {Number|null} value
     * @param {Number|null} oldValue
     * @protected
     */
    afterSetWindowId(value, oldValue) {
        value && Neo.currentWorker.insertThemeFiles(value, this.__proto__)
    }

    /**
     * Override this method to apply changes to the owner Component when it does get mounted
     */
    onOwnerMounted() {

    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(Plugin));


/***/ }),

/***/ "./src/plugin/Popover.mjs":
/*!********************************!*\
  !*** ./src/plugin/Popover.mjs ***!
  \********************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _container_Base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../container/Base.mjs */ "./src/container/Base.mjs");
/* harmony import */ var _util_Array_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../util/Array.mjs */ "./src/util/Array.mjs");
/* harmony import */ var _Base_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Base.mjs */ "./src/plugin/Base.mjs");




/**
 * Popover usable as tooltip
 * @class Neo.plugin.Popover
 * @extends Neo.plugin.Base
 *
 * @example
 *     module : Button,
 *     width  : 200,
 *     text   : 'Click Me',
 *     plugins: [{
 *         module: PopoverPlugin,
 *         align : 'bc-tc',
 *         items : [{
 *             ntype  : 'panel',
 *             headers: [{
 *                 dock: 'top',
 *                 html: 'HEADER'
 *             }],
 *             items  : [{
 *                 html: 'This is a comment about the button'
 *             }]
 *         }]
 *     }]
 */
class Popover extends _Base_mjs__WEBPACK_IMPORTED_MODULE_2__["default"] {
    /**
     * Valid values for align
     * @member {String[]} alignValues=['bc-tc','tc-bc','tl-tr','tr-tl','cl-cr','cr-cl',null]
     * @protected
     * @static
     *
     * todo: add more
     */
    static alignValues = ['bc-tc', 'tc-bc', 'tl-tr', 'tr-tl', 'cl-cr', 'cr-cl', null]

    static config = {
        /**
         * @member {String} className='Neo.plugin.Popover'
         * @protected
         */
        className: 'Neo.plugin.Popover',
        /**
         * @member {String} ntype='plugin-popover'
         * @protected
         */
        ntype: 'plugin-popover',
        /**
         * Define popover to popover target alignment
         * Defaults to bottom center of popover is aligned to top center of owner
         * @member {String} align='bc-tc'
         */
        align_: 'bc-tc',
        /**
         * Custom cls to add to the owner component
         * @member {String} popoverBaseCls='neo-popover'
         */
        popoverBaseCls: 'neo-popover',
        /**
         * Custom cls to add to the owner component
         * @member {String} popovertargetCls='neo-popover-target'
         */
        popovertargetCls: 'neo-popover-target'
    }

    /**
     * @param {Object} config
     */
    construct(config) {
        let me = this;

        super.construct(config);

        me.popoverId = Neo.getId('popover');

        // prepare owner
        me.preparePopoverTarget();
        me.addPopover();

        me.addListeners()
    }

    /**
     * @protected
     */
    addListeners() {
        const me = this;

        me.owner.addDomListeners([
            {mouseover: me.onTargetMouseOver, scope: me},
            {mouseout : me.onTargetMouseOut,  scope: me}
        ])
    }

    /**
     * Create the popover and add it to the parent component of the owner
     * @protected
     */
    addPopover() {
        const me      = this,
              {owner} = me,
              parent  = Neo.get(me.owner.parentId),
              popover = {
                  module: _container_Base_mjs__WEBPACK_IMPORTED_MODULE_0__["default"],
                  id    : me.popoverId,

                  baseCls: [me.popoverBaseCls],
                  cls    : [me.align],

                  layout: 'base',
                  items : me.items || [],

                  vdom: {
                      // Possible Values are auto, manual.
                      popover: 'auto',
                      anchor : owner.id
                  }
              };

        parent.add(popover)
    }

    /**
     * Checks if the new value for "align" is valid
     * @param {String|null} value
     * @param {String|null} oldValue
     * @protected
     * @returns {String|null} value
     */
    beforeSetAlign(value, oldValue) {
        return this.testInputValue(value, oldValue, 'alignValues', 'align')
    }

    /**
     * @event mouseout
     * @param {Object} data
     * @protected
     */
    onTargetMouseOut(data) {
        Neo.main.addon.Popover.hide({id: data.component.id})
    }

    /**
     * @event mouseover
     * @param {Object} data
     * @protected
     */
    onTargetMouseOver(data) {
        Neo.main.addon.Popover.show({id: data.component.id})
    }

    /**
     * @protected
     */
    preparePopoverTarget() {
        const me         = this,
              target     = me.owner,
              targetVdom = target.vdom;

        target.addCls(me.popovertargetCls);
        targetVdom.popovertarget = me.popoverId
    }

    /**
     * Checks if the new value for propertyName is valid
     * @param {String|null} value
     * @param {String|null} oldValue
     * @param {String} validValuesName
     * @param {String} propertyName
     * @protected
     * @returns {String|null} value
     */
    testInputValue(value, oldValue, validValuesName, propertyName) {
        const validValues = this.getStaticConfig(validValuesName);

        if (!_util_Array_mjs__WEBPACK_IMPORTED_MODULE_1__["default"].hasItem(validValues, value)) {
            Neo.logError(this.id + ' -> layout: supported values for "' + propertyName + '" are', validValues);
            return oldValue
        }

        return value
    }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(Popover));


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2h1bmtzL2FwcC9leGFtcGxlc19wb3BvdmVyX2FwcF9tanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBaUU7QUFDQTtBQUNBO0FBQ0g7O0FBRTlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGtFQUFxQjtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLGdDQUFnQztBQUMvRDtBQUNBOztBQUVBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsK0NBQStDO0FBQ3BFO0FBQ0Esd0JBQXdCLCtEQUFTO0FBQ2pDO0FBQ0EsYUFBYTtBQUNiLHlCQUF5Qiw0REFBTTtBQUMvQjtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsK0RBQWE7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekIscUJBQXFCO0FBQ3JCLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7O0FBRUEsaUVBQWUsNkJBQTZCLEVBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7QUNyREc7O0FBRXpDO0FBQ1AsY0FBYywwREFBYTtBQUMzQjtBQUNBLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7QUNMbUM7O0FBRXBDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLHNEQUFJO0FBQ3pCO0FBQ0E7QUFDQSxvQkFBb0IsUUFBUTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFFBQVE7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0Isb0JBQW9CO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGFBQWE7QUFDakM7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxhQUFhO0FBQzVCLGVBQWUsYUFBYTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsaUVBQWUsc0JBQXNCLEVBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ2xFTztBQUNIO0FBQ1A7O0FBRW5DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQixZQUFZO0FBQ1osUUFBUTtBQUNSO0FBQ0Esc0JBQXNCLGlEQUFNO0FBQzVCO0FBQ0E7QUFDQSxnQkFBZ0IsVUFBVTtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG9CQUFvQixRQUFRO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFFBQVE7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFFBQVE7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsUUFBUTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixRQUFRO0FBQzVCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGVBQWUsUUFBUTtBQUN2QjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGFBQWEsMkNBQTJDO0FBQ3hELGFBQWE7QUFDYjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsT0FBTztBQUN0QjtBQUNBO0FBQ0EsMEJBQTBCLDJEQUFTO0FBQ25DOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxhQUFhO0FBQzVCLGVBQWUsYUFBYTtBQUM1QjtBQUNBLGlCQUFpQixhQUFhO0FBQzlCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLHNCQUFzQjtBQUMzRDs7QUFFQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxzQkFBc0I7QUFDM0Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxlQUFlLGFBQWE7QUFDNUIsZUFBZSxhQUFhO0FBQzVCLGVBQWUsUUFBUTtBQUN2QixlQUFlLFFBQVE7QUFDdkI7QUFDQSxpQkFBaUIsYUFBYTtBQUM5QjtBQUNBO0FBQ0E7O0FBRUEsYUFBYSx1REFBUTtBQUNyQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLGlFQUFlLHVCQUF1QixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmVvLm1qcy8uL2V4YW1wbGVzL3BvcG92ZXIvTWFpbkNvbnRhaW5lci5tanMiLCJ3ZWJwYWNrOi8vbmVvLm1qcy8uL2V4YW1wbGVzL3BvcG92ZXIvYXBwLm1qcyIsIndlYnBhY2s6Ly9uZW8ubWpzLy4vc3JjL3BsdWdpbi9CYXNlLm1qcyIsIndlYnBhY2s6Ly9uZW8ubWpzLy4vc3JjL3BsdWdpbi9Qb3BvdmVyLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQ29tcG9uZW50ICAgICAgICAgICAgIGZyb20gJy4uLy4uL3NyYy9jb21wb25lbnQvQmFzZS5tanMnO1xuaW1wb3J0IENvbmZpZ3VyYXRpb25WaWV3cG9ydCBmcm9tICcuLi9Db25maWd1cmF0aW9uVmlld3BvcnQubWpzJztcbmltcG9ydCBQb3BvdmVyUGx1Z2luICAgICAgICAgZnJvbSAnLi4vLi4vc3JjL3BsdWdpbi9Qb3BvdmVyLm1qcyc7XG5pbXBvcnQgQnV0dG9uICAgICAgICAgICAgICAgIGZyb20gJy4uLy4uL3NyYy9idXR0b24vQmFzZS5tanMnO1xuXG4vKipcbiAqIEBjbGFzcyBOZW8uZXhhbXBsZXMucG9wb3Zlci5NYWluQ29udGFpbmVyXG4gKiBAZXh0ZW5kcyBOZW8uZXhhbXBsZXMuQ29uZmlndXJhdGlvblZpZXdwb3J0XG4gKi9cbmNsYXNzIE1haW5Db250YWluZXIgZXh0ZW5kcyBDb25maWd1cmF0aW9uVmlld3BvcnQge1xuICAgIHN0YXRpYyBjb25maWcgPSB7XG4gICAgICAgIGNsYXNzTmFtZSAgICAgICAgICAgOiAnTmVvLmV4YW1wbGVzLnBvcG92ZXIuTWFpbkNvbnRhaW5lcicsXG4gICAgICAgIGF1dG9Nb3VudCAgICAgICAgICAgOiB0cnVlLFxuICAgICAgICBjb25maWdJdGVtTGFiZWxXaWR0aDogMTAwLFxuICAgICAgICBjb25maWdJdGVtV2lkdGggICAgIDogMjMwLFxuICAgICAgICBsYXlvdXQgICAgICAgICAgICAgIDoge250eXBlOiAnaGJveCcsIGFsaWduOiAnc3RyZXRjaCd9LFxuICAgICAgICBjbHMgICAgICAgICAgICAgICAgIDogWydleGFtcGxlcy1jb250YWluZXItYWNjb3JkaW9uJ11cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyB7Kn1cbiAgICAgKi9cbiAgICBjcmVhdGVFeGFtcGxlQ29tcG9uZW50KCkge1xuICAgICAgICByZXR1cm4gTmVvLm50eXBlKHtcbiAgICAgICAgICAgIG50eXBlIDogJ2NvbnRhaW5lcicsXG4gICAgICAgICAgICBoZWlnaHQ6ICczMCUnLFxuICAgICAgICAgICAgbGF5b3V0OiB7bnR5cGU6ICd2Ym94JywgYWxpZ246ICdjZW50ZXInLCBwYWNrOiAnY2VudGVyJ30sXG4gICAgICAgICAgICBpdGVtcyA6IFt7XG4gICAgICAgICAgICAgICAgbW9kdWxlOiBDb21wb25lbnQsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAxMFxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIG1vZHVsZSA6IEJ1dHRvbixcbiAgICAgICAgICAgICAgICB3aWR0aCAgOiAyMDAsXG4gICAgICAgICAgICAgICAgdGV4dCAgIDogJ0NsaWNrIE1lJyxcbiAgICAgICAgICAgICAgICBwbHVnaW5zOiBbe1xuICAgICAgICAgICAgICAgICAgICBtb2R1bGU6IFBvcG92ZXJQbHVnaW4sXG4gICAgICAgICAgICAgICAgICAgIGFsaWduIDogJ2JjLXRjJyxcbiAgICAgICAgICAgICAgICAgICAgaXRlbXMgOiBbe1xuICAgICAgICAgICAgICAgICAgICAgICAgbnR5cGUgIDogJ3BhbmVsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IFt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jazogJ3RvcCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbDogJ0hFQURFUidcbiAgICAgICAgICAgICAgICAgICAgICAgIH1dLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXMgIDogW3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sOiAnVGhpcyBpcyBhIGNvbW1lbnQgYWJvdXQgdGhlIGJ1dHRvbidcbiAgICAgICAgICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgIH1dXG4gICAgICAgIH0pXG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBOZW8uc2V0dXBDbGFzcyhNYWluQ29udGFpbmVyKTtcbiIsImltcG9ydCBNYWluQ29udGFpbmVyIGZyb20gJy4vTWFpbkNvbnRhaW5lci5tanMnO1xuXG5leHBvcnQgY29uc3Qgb25TdGFydCA9ICgpID0+IE5lby5hcHAoe1xuICAgIG1haW5WaWV3OiBNYWluQ29udGFpbmVyLFxuICAgIG5hbWUgICAgOiAnTmVvLmV4YW1wbGVzLnBvcG92ZXInXG59KTtcbiIsImltcG9ydCBCYXNlIGZyb20gJy4uL2NvcmUvQmFzZS5tanMnO1xuXG4vKipcbiAqIEFic3RyYWN0IGJhc2UgY2xhc3MgZm9yIHBsdWdpbiBpbXBsZW1lbnRhdGlvbnMuXG4gKiBQbHVnaW5zIGFyZSBpbnRlbmRlZCB0byBnZXQgcHV0IGludG8gdGhlIHBsdWdpbnMgY29uZmlnIG9mIGNvbXBvbmVudC5CYXNlXG4gKiB0byBlbmhhbmNlIHRoZW0gb3IgYWRkIGFkZGl0aW9uYWwgZmVhdHVyZXNcbiAqIEBjbGFzcyBOZW8ucGx1Z2luLkJhc2VcbiAqIEBleHRlbmRzIE5lby5jb3JlLkJhc2VcbiAqL1xuY2xhc3MgUGx1Z2luIGV4dGVuZHMgQmFzZSB7XG4gICAgc3RhdGljIGNvbmZpZyA9IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ30gY2xhc3NOYW1lPSdOZW8ucGx1Z2luLkJhc2UnXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIGNsYXNzTmFtZTogJ05lby5wbHVnaW4uQmFzZScsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBbGwgcGx1Z2luIG50eXBlcyBuZWVkIHRvIHN0YXJ0IHdpdGggJ3BsdWdpbi0nIHRvIGVuc3VyZSB0aGF0IGNvbXBvbmVudC5CYXNlOiBnZXRQbHVnaW4oKSBjYW4gZmluZCB0aGVtXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ30gbnR5cGU9J3BsdWdpbidcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgbnR5cGU6ICdwbHVnaW4nLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7TmVvLmNvbXBvbmVudC5CYXNlfSBvd25lcj1udWxsXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIG93bmVyOiBudWxsLFxuICAgICAgICAvKipcbiAgICAgICAgICogQG1lbWJlciB7TnVtYmVyfG51bGx9IHdpbmRvd0lkXz1udWxsXG4gICAgICAgICAqL1xuICAgICAgICB3aW5kb3dJZF86IG51bGxcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gY29uZmlnXG4gICAgICovXG4gICAgY29uc3RydWN0KGNvbmZpZykge1xuICAgICAgICBzdXBlci5jb25zdHJ1Y3QoY29uZmlnKTtcblxuICAgICAgICBsZXQgbWUgPSB0aGlzO1xuXG4gICAgICAgIGlmIChtZS5vd25lci5tb3VudGVkKSB7XG4gICAgICAgICAgICBtZS5vbk93bmVyTW91bnRlZCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbWUub3duZXIub24oJ21vdW50ZWQnLCBtZS5vbk93bmVyTW91bnRlZCwgbWUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIGFmdGVyIHRoZSB3aW5kb3dJZCBjb25maWcgZ290IGNoYW5nZWRcbiAgICAgKiBAcGFyYW0ge051bWJlcnxudWxsfSB2YWx1ZVxuICAgICAqIEBwYXJhbSB7TnVtYmVyfG51bGx9IG9sZFZhbHVlXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIGFmdGVyU2V0V2luZG93SWQodmFsdWUsIG9sZFZhbHVlKSB7XG4gICAgICAgIHZhbHVlICYmIE5lby5jdXJyZW50V29ya2VyLmluc2VydFRoZW1lRmlsZXModmFsdWUsIHRoaXMuX19wcm90b19fKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE92ZXJyaWRlIHRoaXMgbWV0aG9kIHRvIGFwcGx5IGNoYW5nZXMgdG8gdGhlIG93bmVyIENvbXBvbmVudCB3aGVuIGl0IGRvZXMgZ2V0IG1vdW50ZWRcbiAgICAgKi9cbiAgICBvbk93bmVyTW91bnRlZCgpIHtcblxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTmVvLnNldHVwQ2xhc3MoUGx1Z2luKTtcbiIsImltcG9ydCBDb250YWluZXIgZnJvbSAnLi4vY29udGFpbmVyL0Jhc2UubWpzJ1xuaW1wb3J0IE5lb0FycmF5ICBmcm9tICcuLi91dGlsL0FycmF5Lm1qcyc7XG5pbXBvcnQgUGx1Z2luICAgIGZyb20gJy4vQmFzZS5tanMnO1xuXG4vKipcbiAqIFBvcG92ZXIgdXNhYmxlIGFzIHRvb2x0aXBcbiAqIEBjbGFzcyBOZW8ucGx1Z2luLlBvcG92ZXJcbiAqIEBleHRlbmRzIE5lby5wbHVnaW4uQmFzZVxuICpcbiAqIEBleGFtcGxlXG4gKiAgICAgbW9kdWxlIDogQnV0dG9uLFxuICogICAgIHdpZHRoICA6IDIwMCxcbiAqICAgICB0ZXh0ICAgOiAnQ2xpY2sgTWUnLFxuICogICAgIHBsdWdpbnM6IFt7XG4gKiAgICAgICAgIG1vZHVsZTogUG9wb3ZlclBsdWdpbixcbiAqICAgICAgICAgYWxpZ24gOiAnYmMtdGMnLFxuICogICAgICAgICBpdGVtcyA6IFt7XG4gKiAgICAgICAgICAgICBudHlwZSAgOiAncGFuZWwnLFxuICogICAgICAgICAgICAgaGVhZGVyczogW3tcbiAqICAgICAgICAgICAgICAgICBkb2NrOiAndG9wJyxcbiAqICAgICAgICAgICAgICAgICBodG1sOiAnSEVBREVSJ1xuICogICAgICAgICAgICAgfV0sXG4gKiAgICAgICAgICAgICBpdGVtcyAgOiBbe1xuICogICAgICAgICAgICAgICAgIGh0bWw6ICdUaGlzIGlzIGEgY29tbWVudCBhYm91dCB0aGUgYnV0dG9uJ1xuICogICAgICAgICAgICAgfV1cbiAqICAgICAgICAgfV1cbiAqICAgICB9XVxuICovXG5jbGFzcyBQb3BvdmVyIGV4dGVuZHMgUGx1Z2luIHtcbiAgICAvKipcbiAgICAgKiBWYWxpZCB2YWx1ZXMgZm9yIGFsaWduXG4gICAgICogQG1lbWJlciB7U3RyaW5nW119IGFsaWduVmFsdWVzPVsnYmMtdGMnLCd0Yy1iYycsJ3RsLXRyJywndHItdGwnLCdjbC1jcicsJ2NyLWNsJyxudWxsXVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAc3RhdGljXG4gICAgICpcbiAgICAgKiB0b2RvOiBhZGQgbW9yZVxuICAgICAqL1xuICAgIHN0YXRpYyBhbGlnblZhbHVlcyA9IFsnYmMtdGMnLCAndGMtYmMnLCAndGwtdHInLCAndHItdGwnLCAnY2wtY3InLCAnY3ItY2wnLCBudWxsXVxuXG4gICAgc3RhdGljIGNvbmZpZyA9IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBtZW1iZXIge1N0cmluZ30gY2xhc3NOYW1lPSdOZW8ucGx1Z2luLlBvcG92ZXInXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIGNsYXNzTmFtZTogJ05lby5wbHVnaW4uUG9wb3ZlcicsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbWVtYmVyIHtTdHJpbmd9IG50eXBlPSdwbHVnaW4tcG9wb3ZlcidcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgbnR5cGU6ICdwbHVnaW4tcG9wb3ZlcicsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZWZpbmUgcG9wb3ZlciB0byBwb3BvdmVyIHRhcmdldCBhbGlnbm1lbnRcbiAgICAgICAgICogRGVmYXVsdHMgdG8gYm90dG9tIGNlbnRlciBvZiBwb3BvdmVyIGlzIGFsaWduZWQgdG8gdG9wIGNlbnRlciBvZiBvd25lclxuICAgICAgICAgKiBAbWVtYmVyIHtTdHJpbmd9IGFsaWduPSdiYy10YydcbiAgICAgICAgICovXG4gICAgICAgIGFsaWduXzogJ2JjLXRjJyxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEN1c3RvbSBjbHMgdG8gYWRkIHRvIHRoZSBvd25lciBjb21wb25lbnRcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfSBwb3BvdmVyQmFzZUNscz0nbmVvLXBvcG92ZXInXG4gICAgICAgICAqL1xuICAgICAgICBwb3BvdmVyQmFzZUNsczogJ25lby1wb3BvdmVyJyxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEN1c3RvbSBjbHMgdG8gYWRkIHRvIHRoZSBvd25lciBjb21wb25lbnRcbiAgICAgICAgICogQG1lbWJlciB7U3RyaW5nfSBwb3BvdmVydGFyZ2V0Q2xzPSduZW8tcG9wb3Zlci10YXJnZXQnXG4gICAgICAgICAqL1xuICAgICAgICBwb3BvdmVydGFyZ2V0Q2xzOiAnbmVvLXBvcG92ZXItdGFyZ2V0J1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWdcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3QoY29uZmlnKSB7XG4gICAgICAgIGxldCBtZSA9IHRoaXM7XG5cbiAgICAgICAgc3VwZXIuY29uc3RydWN0KGNvbmZpZyk7XG5cbiAgICAgICAgbWUucG9wb3ZlcklkID0gTmVvLmdldElkKCdwb3BvdmVyJyk7XG5cbiAgICAgICAgLy8gcHJlcGFyZSBvd25lclxuICAgICAgICBtZS5wcmVwYXJlUG9wb3ZlclRhcmdldCgpO1xuICAgICAgICBtZS5hZGRQb3BvdmVyKCk7XG5cbiAgICAgICAgbWUuYWRkTGlzdGVuZXJzKClcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgYWRkTGlzdGVuZXJzKCkge1xuICAgICAgICBjb25zdCBtZSA9IHRoaXM7XG5cbiAgICAgICAgbWUub3duZXIuYWRkRG9tTGlzdGVuZXJzKFtcbiAgICAgICAgICAgIHttb3VzZW92ZXI6IG1lLm9uVGFyZ2V0TW91c2VPdmVyLCBzY29wZTogbWV9LFxuICAgICAgICAgICAge21vdXNlb3V0IDogbWUub25UYXJnZXRNb3VzZU91dCwgIHNjb3BlOiBtZX1cbiAgICAgICAgXSlcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgdGhlIHBvcG92ZXIgYW5kIGFkZCBpdCB0byB0aGUgcGFyZW50IGNvbXBvbmVudCBvZiB0aGUgb3duZXJcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgYWRkUG9wb3ZlcigpIHtcbiAgICAgICAgY29uc3QgbWUgICAgICA9IHRoaXMsXG4gICAgICAgICAgICAgIHtvd25lcn0gPSBtZSxcbiAgICAgICAgICAgICAgcGFyZW50ICA9IE5lby5nZXQobWUub3duZXIucGFyZW50SWQpLFxuICAgICAgICAgICAgICBwb3BvdmVyID0ge1xuICAgICAgICAgICAgICAgICAgbW9kdWxlOiBDb250YWluZXIsXG4gICAgICAgICAgICAgICAgICBpZCAgICA6IG1lLnBvcG92ZXJJZCxcblxuICAgICAgICAgICAgICAgICAgYmFzZUNsczogW21lLnBvcG92ZXJCYXNlQ2xzXSxcbiAgICAgICAgICAgICAgICAgIGNscyAgICA6IFttZS5hbGlnbl0sXG5cbiAgICAgICAgICAgICAgICAgIGxheW91dDogJ2Jhc2UnLFxuICAgICAgICAgICAgICAgICAgaXRlbXMgOiBtZS5pdGVtcyB8fCBbXSxcblxuICAgICAgICAgICAgICAgICAgdmRvbToge1xuICAgICAgICAgICAgICAgICAgICAgIC8vIFBvc3NpYmxlIFZhbHVlcyBhcmUgYXV0bywgbWFudWFsLlxuICAgICAgICAgICAgICAgICAgICAgIHBvcG92ZXI6ICdhdXRvJyxcbiAgICAgICAgICAgICAgICAgICAgICBhbmNob3IgOiBvd25lci5pZFxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9O1xuXG4gICAgICAgIHBhcmVudC5hZGQocG9wb3ZlcilcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgdGhlIG5ldyB2YWx1ZSBmb3IgXCJhbGlnblwiIGlzIHZhbGlkXG4gICAgICogQHBhcmFtIHtTdHJpbmd8bnVsbH0gdmFsdWVcbiAgICAgKiBAcGFyYW0ge1N0cmluZ3xudWxsfSBvbGRWYWx1ZVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAcmV0dXJucyB7U3RyaW5nfG51bGx9IHZhbHVlXG4gICAgICovXG4gICAgYmVmb3JlU2V0QWxpZ24odmFsdWUsIG9sZFZhbHVlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRlc3RJbnB1dFZhbHVlKHZhbHVlLCBvbGRWYWx1ZSwgJ2FsaWduVmFsdWVzJywgJ2FsaWduJylcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAZXZlbnQgbW91c2VvdXRcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBvblRhcmdldE1vdXNlT3V0KGRhdGEpIHtcbiAgICAgICAgTmVvLm1haW4uYWRkb24uUG9wb3Zlci5oaWRlKHtpZDogZGF0YS5jb21wb25lbnQuaWR9KVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBldmVudCBtb3VzZW92ZXJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBvblRhcmdldE1vdXNlT3ZlcihkYXRhKSB7XG4gICAgICAgIE5lby5tYWluLmFkZG9uLlBvcG92ZXIuc2hvdyh7aWQ6IGRhdGEuY29tcG9uZW50LmlkfSlcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgcHJlcGFyZVBvcG92ZXJUYXJnZXQoKSB7XG4gICAgICAgIGNvbnN0IG1lICAgICAgICAgPSB0aGlzLFxuICAgICAgICAgICAgICB0YXJnZXQgICAgID0gbWUub3duZXIsXG4gICAgICAgICAgICAgIHRhcmdldFZkb20gPSB0YXJnZXQudmRvbTtcblxuICAgICAgICB0YXJnZXQuYWRkQ2xzKG1lLnBvcG92ZXJ0YXJnZXRDbHMpO1xuICAgICAgICB0YXJnZXRWZG9tLnBvcG92ZXJ0YXJnZXQgPSBtZS5wb3BvdmVySWRcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgdGhlIG5ldyB2YWx1ZSBmb3IgcHJvcGVydHlOYW1lIGlzIHZhbGlkXG4gICAgICogQHBhcmFtIHtTdHJpbmd8bnVsbH0gdmFsdWVcbiAgICAgKiBAcGFyYW0ge1N0cmluZ3xudWxsfSBvbGRWYWx1ZVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB2YWxpZFZhbHVlc05hbWVcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHlOYW1lXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEByZXR1cm5zIHtTdHJpbmd8bnVsbH0gdmFsdWVcbiAgICAgKi9cbiAgICB0ZXN0SW5wdXRWYWx1ZSh2YWx1ZSwgb2xkVmFsdWUsIHZhbGlkVmFsdWVzTmFtZSwgcHJvcGVydHlOYW1lKSB7XG4gICAgICAgIGNvbnN0IHZhbGlkVmFsdWVzID0gdGhpcy5nZXRTdGF0aWNDb25maWcodmFsaWRWYWx1ZXNOYW1lKTtcblxuICAgICAgICBpZiAoIU5lb0FycmF5Lmhhc0l0ZW0odmFsaWRWYWx1ZXMsIHZhbHVlKSkge1xuICAgICAgICAgICAgTmVvLmxvZ0Vycm9yKHRoaXMuaWQgKyAnIC0+IGxheW91dDogc3VwcG9ydGVkIHZhbHVlcyBmb3IgXCInICsgcHJvcGVydHlOYW1lICsgJ1wiIGFyZScsIHZhbGlkVmFsdWVzKTtcbiAgICAgICAgICAgIHJldHVybiBvbGRWYWx1ZVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHZhbHVlXG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBOZW8uc2V0dXBDbGFzcyhQb3BvdmVyKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==