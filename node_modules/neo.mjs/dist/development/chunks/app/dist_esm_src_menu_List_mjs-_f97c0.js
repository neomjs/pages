"use strict";
(self["webpackChunkneo_mjs"] = self["webpackChunkneo_mjs"] || []).push([["dist_esm_src_menu_List_mjs-_f97c0"],{

/***/ "./dist/esm/src/list/Base.mjs"
/*!************************************!*\
  !*** ./dist/esm/src/list/Base.mjs ***!
  \************************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _util_ClassSystem_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/ClassSystem.mjs */ "./dist/esm/src/util/ClassSystem.mjs");
/* harmony import */ var _component_Base_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../component/Base.mjs */ "./dist/esm/src/component/Base.mjs");
/* harmony import */ var _selection_ListModel_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../selection/ListModel.mjs */ "./dist/esm/src/selection/ListModel.mjs");
/* harmony import */ var _util_Array_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../util/Array.mjs */ "./dist/esm/src/util/Array.mjs");
/* harmony import */ var _data_Store_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../data/Store.mjs */ "./dist/esm/src/data/Store.mjs");
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(class extends _component_Base_mjs__WEBPACK_IMPORTED_MODULE_1__["default"]{static config={className:"Neo.list.Base",ntype:"list",animate_:!1,autoDestroyStore:!0,baseCls:["neo-list"],disabledField:"disabled",disableSelection_:!1,displayField:"name",draggable_:!1,dragZone:null,dragZoneConfig:null,focusIndex_:null,headerlessSelectedIndex_:null,highlightFilterValue:!0,itemCls:"neo-list-item",itemHeight_:null,itemTagName:"li",itemWidth_:null,itemsFocusable:!0,keepFocusIndex:!1,keys:{},pluginAnimateConfig:null,selectedIndex_:null,selectionModel_:null,selectOnFocus:!1,silentSelect:!1,store_:null,useCheckBoxes_:!1,useHeaders_:!1,useWrapperNode_:!1,_vdom:{tag:"ul",cn:[]}};itemRole=null;navigator={};scrollIntoViewOnFocus=!0;construct(e){super.construct(e);let t=this;t.useHeaders&&(t.scrollIntoViewOnFocus=!1),t.addDomListeners({click:t.onClick,scope:t})}afterSetAnimate(e,t){e&&!this.getPlugin("list-animate")&&__webpack_require__.e(/*! import() */ "dist_esm_src_list_plugin_Animate_mjs").then(__webpack_require__.bind(__webpack_require__, /*! ./plugin/Animate.mjs */ "./dist/esm/src/list/plugin/Animate.mjs")).then(e=>{let t=this,s=t.plugins||[];s.push({module:e.default,...t.pluginAnimateConfig}),t.plugins=s})}afterSetDisableSelection(e,t){e&&this.vnodeInitialized&&this.selectionModel?.deselectAll()}afterSetDraggable(e,t){let s=this;e&&!s.dragZone&&__webpack_require__.e(/*! import() */ "dist_esm_src_draggable_list_DragZone_mjs").then(__webpack_require__.bind(__webpack_require__, /*! ../draggable/list/DragZone.mjs */ "./dist/esm/src/draggable/list/DragZone.mjs")).then(e=>{s.dragZone=Neo.create({module:e.default,appName:s.appName,owner:s,windowId:s.windowId,...s.dragZoneConfig})})}afterSetFocusIndex(e,t){null!==e&&this.updateItemFocus(e)}afterSetHeaderlessSelectedIndex(e,t){let s=this;Neo.isNumber(e)?s.selectedIndex=s.store.getCount()?s.getSelectedIndex(e):null:Neo.isNumber(t)&&(s.selectedIndex=null)}afterSetMounted(e,t){let s=this;!e&&s.hasNavigator&&(Neo.main.addon.Navigator.unsubscribe(s.navigator),s.hasNavigator=!1,s.selectedIndex=null),e&&(s.hasNavigator||(s.navigator=Neo.merge({appName:s.appName,autoClick:s.selectOnFocus,id:s.id,keepFocusIndex:s.keepFocusIndex,selector:`.${s.itemCls}:not(.neo-disabled,.neo-list-header)`,windowId:s.windowId},s.navigator),s.hasNavigator=!0),Neo.main.addon.Navigator.subscribe(s.navigator)),super.afterSetMounted(e,t)}afterSetSelectedIndex(e,t){let s=this,{selectionModel:o}=s;Neo.isNumber(e)?(o?.selectAt(e),s.headerlessSelectedIndex=s.getHeaderlessIndex(e)):Neo.isNumber(t)&&(o.deselectAll(),s.headerlessSelectedIndex=null)}afterSetSelectionModel(e,t){this.vnodeInitialized&&e.register(this)}afterSetStore(e,t){e?.on({filter:"onStoreFilter",load:"onStoreLoad",recordChange:"onStoreRecordChange",sort:"onStoreSort",scope:this}),e?.getCount()>0&&this.onStoreLoad()}afterSetUseCheckBoxes(e,t){let{cls:s}=this;_util_Array_mjs__WEBPACK_IMPORTED_MODULE_3__["default"].toggle(s,"neo-use-checkicons",!!e),this.cls=s}afterSetUseHeaders(e,t){if(e){let e=this;e.vdom.tag="dl",e.itemTagName="dd"}}afterSetUseWrapperNode(e,t){let s=this,{cls:i,wrapperCls:r}=s;_util_Array_mjs__WEBPACK_IMPORTED_MODULE_3__["default"][e?"add":"remove"](i,"neo-use-wrapper-node"),_util_Array_mjs__WEBPACK_IMPORTED_MODULE_3__["default"][e?"add":"remove"](r,"neo-list-wrapper"),s.wrapperCls=r,s.cls=i}afterSetWindowId(e,t){super.afterSetWindowId(e,t);let{navigator:s}=this;e&&s&&(s.windowId=e)}beforeSetSelectionModel(t,o){return o?.destroy(),_util_ClassSystem_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].beforeSetInstance(t,_selection_ListModel_mjs__WEBPACK_IMPORTED_MODULE_2__["default"])}beforeSetStore(t,s){return s?.destroy(),_util_ClassSystem_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].beforeSetInstance(t,_data_Store_mjs__WEBPACK_IMPORTED_MODULE_4__["default"])}createItem(e,t){let s,i,r=this,l=[r.itemCls],n=null!==r.itemHeight,a=null!==r.itemWidth,d=r.useHeaders&&e.isHeader,c=r.createItemContent(e,t),u=r.getItemId(e[r.getKeyProperty()]),{selectionModel:m}=r,h=!r.disableSelection&&m?.isSelected(u);switch(d&&l.push("neo-list-header"),h&&l.push(m.selectedCls),e.cls&&_util_Array_mjs__WEBPACK_IMPORTED_MODULE_3__["default"].add(l,e.cls),e[r.disabledField]&&l.push("neo-disabled"),s={id:u,tag:d?"dt":r.itemTagName,"aria-selected":h,cls:l},r.itemsFocusable&&(s.tabIndex=-1),(e.hidden||c.removeDom)&&(s.removeDom=!0),r.itemRole&&(s.role=r.itemRole),Neo.typeOf(c)){case null:return null;case"Array":s.cn=c,i=!0,c.forEach(e=>{e.removeDom||(i=!1)}),i&&(s.removeDom=!0);break;case"Object":c.cls&&(_util_Array_mjs__WEBPACK_IMPORTED_MODULE_3__["default"].add(s.cls,c.cls),delete c.cls),Object.assign(s,c);break;case"Number":case"String":s.html=c}return(n||a)&&(s.style=s.style||{},n&&!s.hasOwnProperty("height")&&(s.style.height=`${r.itemHeight}px`),a&&!s.hasOwnProperty("width")&&(s.style.width=`${r.itemWidth}px`)),s}createItemContent(e,t){let s,o=this,i=e[o.displayField];return o.highlightFilterValue&&(s=o.store.getFilter(o.displayField),s&&null!==s.value&&""!==s.value&&(i=i.replace(new RegExp(s.value,"gi"),function(e){return'<span class="neo-highlight-search">'+e+"</span>"}))),i}createItems(e=!1){let t,s=this,{headerlessSelectedIndex:o}=s,i=s.getVdomRoot();Neo.isNumber(o)&&!Neo.isNumber(s.selectedIndex)&&s.afterSetHeaderlessSelectedIndex(o,null),s.animate&&!s.getPlugin("list-animate")||(i.cn=[],s.store.forEach((e,o)=>{t=s.createItem(e,o),t&&i.cn.push(t)}),!e&&s.promiseUpdate().then(()=>{s.fire("createItems")}))}destroy(...e){let t=this;t.selectionModel?.destroy(),t.autoDestroyStore&&t.store?.destroy(),super.destroy(...e)}focus(e=this.id){this.mounted&&Neo.main.addon.Navigator.navigateTo({data:this.navigator,target:e,windowId:this.windowId})}getSelectedIndex(e){let t=0,s=0,o=this.store.items,i=e;if(o.length<1)return null;for(;s<=i;s++)o[s].isHeader&&(t++,i++);return e+t}getHeaderlessIndex(e){let t=0,s=0,o=this.store.items;for(;s<e;s++)o[s].isHeader||t++;return t}getItemId(e){return`${this.id}__${e.isRecord?e[this.getKeyProperty()]:e}`}getItemRecordId(e){let t=e.split("__")[1],{model:s}=this.store,o=s?.getField(this.getKeyProperty()),i=o?.type?.toLowerCase();return"int"!==i&&"integer"!==i||(t=parseInt(t)),t}getKeyProperty(){return this.store.keyProperty||this.store.model.keyProperty}onClick(e){let t,s=this;if(e.path[0].id===s.id)s.onContainerClick(e);else for(t of e.path)if(t.cls.includes(s.itemCls)){s.onItemClick(t,e);break}}onConstructed(){super.onConstructed(),this.selectionModel?.register(this)}onContainerClick(e){this.fire("containerClick",e)}onItemClick(e,t){let s=this,o=s.store.get(s.getItemRecordId(e.id));t.record=o,s.fire("itemClick",{record:o})}onStoreFilter(){this.createItems()}onStoreLoad(){let e=this;!e.mounted&&e.isVnodeInitializing?e.on("mounted",()=>{e.createItems()},e,{once:!0}):e.createItems()}onStoreRecordChange(e){let t=this,{index:s}=e;s>-1&&(t.vdom.cn[s]=t.createItem(e.record,s),t.update())}onStoreSort(e){this.createItems()}selectItem(e){let t=this;t.disableSelection||(Neo.isNumber(e)?t.selectionModel?.selectAt(e):e&&t.selectionModel?.selectAt(t.store.indexOf(e)))}async updateItemFocus(e){let t=this,{navigateTo:s}=Neo.main.addon.Navigator;t.mounted?Neo.isNumber(e)?s({data:t.navigator,target:t.getHeaderlessIndex(e),windowId:t.windowId}):e&&s({data:t.navigator,target:t.getItemId(e[t.getKeyProperty()]),windowId:t.windowId}):t.on("mounted",()=>{e===t.focusIndex&&t.updateItemFocus(t.focusIndex)},t,{once:!0})}}));

/***/ },

/***/ "./dist/esm/src/menu/List.mjs"
/*!************************************!*\
  !*** ./dist/esm/src/menu/List.mjs ***!
  \************************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _list_Base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../list/Base.mjs */ "./dist/esm/src/list/Base.mjs");
/* harmony import */ var _selection_menu_ListModel_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../selection/menu/ListModel.mjs */ "./dist/esm/src/selection/menu/ListModel.mjs");
/* harmony import */ var _Store_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Store.mjs */ "./dist/esm/src/menu/Store.mjs");
class u extends _list_Base_mjs__WEBPACK_IMPORTED_MODULE_0__["default"]{static config={className:"Neo.menu.List",ntype:"menu-list",activeSubMenu:null,baseCls:["neo-menu-list","neo-list"],focusTimeoutId:null,hideOnLeafItemClick:!0,items_:null,menuFocus_:!1,isRoot:!0,parentIndex:0,parentMenu:null,selectionModel:_selection_menu_ListModel_mjs__WEBPACK_IMPORTED_MODULE_1__["default"],store:_Store_mjs__WEBPACK_IMPORTED_MODULE_2__["default"],subMenuGap:0,subMenuMap:null,zIndex_:100,_vdom:{tag:"ul",cn:[]}};parentComponent=null;afterSetItems(e,t){let{store:n}=this;t&&n.clear(),e&&n.add(e)}afterSetMenuFocus(e,t){if(void 0!==t){let t=this;t.isRoot?e?(clearTimeout(t.focusTimeoutId),t.focusTimeoutId=null):t.focusTimeoutId=setTimeout(()=>{t[t.floating?"unmount":"hideSubMenu"]()},20):t.parentMenu.menuFocus=e}}afterSetTheme(e,t){super.afterSetTheme(e,t),Object.values(this.subMenuMap||{}).forEach(t=>{t.theme=e})}afterSetZIndex(e,t){this.style={...this.style,zIndex:e}}createItemContent(e,t){let n=this,{iconCls:u}=e,o=e[n.store.keyProperty],s=[{tag:"span",cls:["neo-content"],text:e[n.displayField]}];return u&&""!==u&&s.unshift({tag:"i",cls:["neo-menu-icon","neo-icon",u],id:n.getIconId(o)}),n.hasChildren(e)&&s.push({tag:"i",cls:["neo-arrow-icon","neo-icon","fas fa-chevron-right"],id:n.getArrowIconId(o)}),s}destroy(...e){let{activeSubMenu:t}=this,n=this.subMenuMap||{};t?.unmount(),Object.entries(n).forEach(([e,t])=>{t.destroy(),n[e]=null}),super.destroy(...e)}getArrowIconId(e){return`${this.id}__arrow_icon__${e}`}getIconId(e){return`${this.id}__icon__${e}`}getMenuMapId(e){return`menu__${e}`}hasChildren(e){return Array.isArray(e.items)&&e.items.length>0}hideSubMenu(){let{activeSubMenu:e}=this;e&&(e.unmount(),this.activeSubMenu=null)}onFocusEnter(e){super.onFocusEnter(e),this.menuFocus=!0}onFocusLeave(e){super.onFocusLeave(e);let t,n=!1,u=this.parentComponent?.id;if(u)for(t of e.oldPath)if(t.id===u){n=!0;break}n||(this.menuFocus=!1)}onItemClick(e,t){super.onItemClick(e,t),this.onKeyDownEnter(e.id)}onKeyDownEnter(e){if(e){let t,n=this,u=n.getItemRecordId(e),o=n.store.get(u);n.callback(o.handler,n,[o]),o.route&&Neo.Main.setRoute({appName:n.appName,value:o.route}),n.hideOnLeafItemClick&&!o.items&&n.unmount(),o.items&&(t=n.subMenuMap?.[n.getMenuMapId(u)],t&&n.toggleSubMenu(e,o))}}onKeyDownEscape(e){this.floating&&this.unmount()}onSelect(e){let t=this,n=e[0],u=t.getItemRecordId(n),o=t.store.get(u);t.activeSubMenu!==t.subMenuMap?.[t.getMenuMapId(u)]&&(t.hideSubMenu(),t.hasChildren(o)&&t.showSubMenu(n,o))}showSubMenu(e,t){const n=this,{store:o}=n,s=t[o.keyProperty],i=n.subMenuMap||(n.subMenuMap={}),a=n.getMenuMapId(s),r=i[a]||(i[a]=Neo.create({module:u,align:{target:e,edgeAlign:"l0-r0",axisLock:!0,targetMargin:n.subMenuGap},appName:n.appName,displayField:n.displayField,floating:!0,items:t.items,isRoot:!1,parentComponent:n.parentComponent,parentId:n.app.mainView.id,parentIndex:o.indexOf(t),parentMenu:n,theme:n.theme,zIndex:n.zIndex+1}));n.activeSubMenu!==r&&(n.activeSubMenu=r,r.initVnode(!0))}toggleSubMenu(e,t){let n=this,u=t[n.getKeyProperty()],o=n.subMenuMap?.[n.getMenuMapId(u)];o?.mounted?n.hideSubMenu():n.showSubMenu(e,t)}unmount(){this.selectionModel?.deselectAll(!0),this.hideSubMenu(),super.unmount()}}/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(u));

/***/ },

/***/ "./dist/esm/src/menu/Model.mjs"
/*!*************************************!*\
  !*** ./dist/esm/src/menu/Model.mjs ***!
  \*************************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _src_data_Model_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../src/data/Model.mjs */ "./dist/esm/src/data/Model.mjs");
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(class extends _src_data_Model_mjs__WEBPACK_IMPORTED_MODULE_0__["default"]{static config={className:"Neo.menu.Model",keyProperty:"id",fields:[{name:"cls",type:"Array"},{name:"handler",type:"Function"},{name:"hidden",type:"Boolean"},{name:"iconCls",type:"String"},{name:"id",type:"Integer"},{name:"items",type:"Array"},{name:"route",type:"String"},{name:"text",type:"String"}]}}));

/***/ },

/***/ "./dist/esm/src/menu/Store.mjs"
/*!*************************************!*\
  !*** ./dist/esm/src/menu/Store.mjs ***!
  \*************************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _Model_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Model.mjs */ "./dist/esm/src/menu/Model.mjs");
/* harmony import */ var _src_data_Store_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../src/data/Store.mjs */ "./dist/esm/src/data/Store.mjs");
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(class extends _src_data_Store_mjs__WEBPACK_IMPORTED_MODULE_1__["default"]{static config={className:"Neo.menu.Store",model:_Model_mjs__WEBPACK_IMPORTED_MODULE_0__["default"]}}));

/***/ },

/***/ "./dist/esm/src/selection/ListModel.mjs"
/*!**********************************************!*\
  !*** ./dist/esm/src/selection/ListModel.mjs ***!
  \**********************************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _Model_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Model.mjs */ "./dist/esm/src/selection/Model.mjs");
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(class extends _Model_mjs__WEBPACK_IMPORTED_MODULE_0__["default"]{static config={className:"Neo.selection.ListModel",ntype:"selection-listmodel"};onKeyDownEscape(e){}onKeyDownDown(e){}onKeyDownEnter(e){}onKeyDownLeft(e){}onKeyDownRight(e){}onKeyDownUp(e){}onListClick({currentTarget:e}){let t,{view:n}=this;n.disableSelection||(t=n.store.get(n.getItemRecordId(e)),t&&this.select(t))}onListNavigate(e){let t,{view:n}=this,{store:o}=n;e.activeItem&&(t=o.get(n.getItemRecordId(e.activeItem))),t||(t=o.getAt(Math.min(e.activeIndex,o.getCount()))),e.record=t,n._focusIndex=o.indexOf(t),n.fire("itemNavigate",e)}register(e){super.register(e);let t=this,{id:n,view:o}=t;o.addDomListeners([{click:t.onListClick,scope:t,delegate:e=>{for(let t=0,{length:n}=e;t<n;t++){const{cls:n}=e[t];if(n.includes(o.itemCls)&&!n.includes("neo-disabled")&&!n.includes("neo-list-header"))return t}}},{neonavigate:t.onListNavigate,scope:t}]),o.keys?._keys.push({fn:"onKeyDownDown",key:"Down",scope:n},{fn:"onKeyDownEnter",key:"Enter",scope:n},{fn:"onKeyDownEscape",key:"Escape",scope:n},{fn:"onKeyDownLeft",key:"Left",scope:n},{fn:"onKeyDownRight",key:"Right",scope:n},{fn:"onKeyDownUp",key:"Up",scope:n})}selectAt(e){let{view:t}=this,n=t?.store.getKeyAt(e),o=n&&t.getItemId(n);o&&this.select(o)}unregister(){let{id:e,view:t}=this;t.keys?.removeKeys([{fn:"onKeyDownDown",key:"Down",scope:e},{fn:"onKeyDownEnter",key:"Enter",scope:e},{fn:"onKeyDownEscape",key:"Escape",scope:e},{fn:"onKeyDownLeft",key:"Left",scope:e},{fn:"onKeyDownRight",key:"Right",scope:e},{fn:"onKeyDownUp",key:"Up",scope:e}]),super.unregister()}}));

/***/ },

/***/ "./dist/esm/src/selection/Model.mjs"
/*!******************************************!*\
  !*** ./dist/esm/src/selection/Model.mjs ***!
  \******************************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _core_Base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/Base.mjs */ "./dist/esm/src/core/Base.mjs");
/* harmony import */ var _util_Array_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../util/Array.mjs */ "./dist/esm/src/util/Array.mjs");
/* harmony import */ var _core_Observable_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/Observable.mjs */ "./dist/esm/src/core/Observable.mjs");
/* harmony import */ var _core_ConfigSymbols_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/ConfigSymbols.mjs */ "./dist/esm/src/core/ConfigSymbols.mjs");
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(class extends _core_Base_mjs__WEBPACK_IMPORTED_MODULE_0__["default"]{static observable=!0;static config={className:"Neo.selection.Model",ntype:"selection-model",cls:null,items_:{[_core_ConfigSymbols_mjs__WEBPACK_IMPORTED_MODULE_3__.isDescriptor]:!0,clone:"shallow",cloneOnGet:"none",isEqual:()=>!1,value:[]},selectedCls:"neo-selected",singleSelect:!0,view_:null};beforeGetView(e){return Neo.getComponent(this._view)}beforeSetView(e){return e&&e.id}addDomListener(){}deselect(e,s,l=this.items,i){let r,o=this,{view:c}=o;e=e.isRecord?c.getItemId(e):Neo.isObject(e)?e.id:e,l.includes(e)?(r=c.getVdomChild(e),r&&(r.cls=_util_Array_mjs__WEBPACK_IMPORTED_MODULE_1__["default"].remove(r.cls||[],i||o.selectedCls),delete r["aria-selected"]),_util_Array_mjs__WEBPACK_IMPORTED_MODULE_1__["default"].remove(l,e),s||(c.update(),c.parent?.onDeselect?.(),c.onDeselect?.(),o.fire("selectionChange",{selection:l}))):s||o.fire("noChange")}deselectAll(e,t=this.items){let s=this,l=[...t],{view:i}=s;l.length?(l.forEach(e=>{s.deselect(e,!0)}),!e&&l.length>0&&i.update(),s.fire("selectionChange",{selection:this.items})):e||s.fire("noChange")}destroy(...e){this.unregister(),super.destroy(...e)}getController(){return this.view.getController()}getSelection(){return this.items}hasSelection(){return this.items.length>0}isSelected(e){return this.items.includes(e)}register(e){let t=this,s=e.wrapperCls||[];t.cls&&!s.includes(t.cls)&&(s.push(t.cls),e.wrapperCls=s),t.view=e,t.addDomListener(),e.fire("selectionModelChange",{value:t})}removeDomListeners(){let e=this,s=e.view,l=[...s.domListeners];s.domListeners.forEach(s=>{s.scope===e&&_util_Array_mjs__WEBPACK_IMPORTED_MODULE_1__["default"].remove(l,s)}),s.domListeners=l}select(e,s=this.items,l){Array.isArray(e)||(e=[e]);let i=this,{view:r}=i,o=e.map(e=>{if(e.isRecord)return e;const t=r.getItemRecordId?.(e);return t&&r.store?.get(t)||e});e=e.map(e=>e.isRecord?r.getItemId(e):Neo.isObject(e)?e.id:e),Neo.isEqual(s,e)?i.fire("noChange"):(i.singleSelect&&s===i.items&&i.deselectAll(!0,s),e.forEach(e=>{(e=r.getVdomChild(e))&&(e.cls=_util_Array_mjs__WEBPACK_IMPORTED_MODULE_1__["default"].add(e.cls||[],l||i.selectedCls),e["aria-selected"]=!0)}),_util_Array_mjs__WEBPACK_IMPORTED_MODULE_1__["default"].add(s,e),r.silentSelect||r.update(),r.parent?.onSelect?.(e),r.onSelect?.(e),r.fire("select",{records:o,selection:s}),i.fire("selectionChange",{records:o,selection:s}))}toggleSelection(e){let t=this;t.isSelected(e)?t.deselect(e):t.select(e)}toJSON(){const e=this,t=(e.items||[]).map(e=>Neo.isRecord(e)?e.toJSON():e);return{...super.toJSON(),items:t,selectedCls:e.selectedCls,singleSelect:e.singleSelect}}unregister(){let e=this,{view:s}=e;if(!s.isDestroying){let l=s.wrapperCls||[];e.cls&&l.includes(e.cls)&&(_util_Array_mjs__WEBPACK_IMPORTED_MODULE_1__["default"].remove(l,e.cls),s.wrapperCls=l),e.deselectAll(),e.removeDomListeners()}}}));

/***/ },

/***/ "./dist/esm/src/selection/menu/ListModel.mjs"
/*!***************************************************!*\
  !*** ./dist/esm/src/selection/menu/ListModel.mjs ***!
  \***************************************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _ListModel_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../ListModel.mjs */ "./dist/esm/src/selection/ListModel.mjs");
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(class extends _ListModel_mjs__WEBPACK_IMPORTED_MODULE_0__["default"]{static config={className:"Neo.selection.menu.ListModel",ntype:"selection-menu-listmodel"};onKeyDownEscape(e){this.view.onKeyDownEscape(e)}onKeyDownLeft(e){let{view:t}=this,{parentMenu:s}=t;s&&(t.hideSubMenu(),t.selectionModel.deselectAll(),s.selectionModel.selectAt(t.parentIndex))}onKeyDownRight(e){this.view.activeSubMenu?.selectionModel.selectAt(0)}}));

/***/ }

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2h1bmtzL2FwcC9kaXN0X2VzbV9zcmNfbWVudV9MaXN0X21qcy1fZjk3YzAuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXdMLGlFQUFlLDZCQUE2QiwyREFBQyxDQUFDLGVBQWUsMFlBQTBZLDJLQUEySyxpQkFBaUIsY0FBYyxhQUFhLHlCQUF5QixhQUFhLG1CQUFtQixXQUFXLDhEQUE4RCx3QkFBd0IsRUFBRSxxQkFBcUIsb0NBQW9DLHVNQUE4QixVQUFVLDJCQUEyQixRQUFRLDBDQUEwQyxjQUFjLEVBQUUsOEJBQThCLDZEQUE2RCx1QkFBdUIsV0FBVyxnQkFBZ0IseU5BQXdDLFVBQVUsdUJBQXVCLG1GQUFtRixFQUFFLEVBQUUsd0JBQXdCLGtDQUFrQyxxQ0FBcUMsV0FBVyxzSEFBc0gscUJBQXFCLFdBQVcsMkpBQTJKLGlHQUFpRyxVQUFVLDBEQUEwRCw2R0FBNkcsMkJBQTJCLFlBQVksaUJBQWlCLEdBQUcscUpBQXFKLDRCQUE0Qix3Q0FBd0MsbUJBQW1CLE9BQU8sMkdBQTJHLHNDQUFzQywyQkFBMkIsSUFBSSxNQUFNLE1BQU0sdURBQUMsK0NBQStDLHdCQUF3QixNQUFNLFdBQVcsb0NBQW9DLDRCQUE0QixZQUFZLG1CQUFtQixHQUFHLHVEQUFDLDZDQUE2Qyx1REFBQyxnRUFBZ0Usc0JBQXNCLDRCQUE0QixJQUFJLFlBQVksTUFBTSxxQkFBcUIsNkJBQTZCLG9CQUFvQiw2REFBQyxxQkFBcUIsZ0VBQUMsRUFBRSxvQkFBb0Isb0JBQW9CLDZEQUFDLHFCQUFxQix1REFBQyxFQUFFLGdCQUFnQixvS0FBb0ssaUJBQWlCLDJDQUEyQyxvRUFBb0UsdURBQUMsNERBQTRELHNEQUFzRCw0SEFBNEgsc0JBQXNCLHNDQUFzQyxvQkFBb0Isc0JBQXNCLE1BQU0scUJBQXFCLHVEQUFDLG1EQUFtRCxNQUFNLG1DQUFtQyxrQ0FBa0Msb0RBQW9ELGFBQWEsc0RBQXNELFlBQVksUUFBUSx1QkFBdUIsaUNBQWlDLHVKQUF1Six3REFBd0QsTUFBTSxr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QUFHLDZGQUE2RixrQkFBa0IscURBQXFELENBQUMsRSIsInNvdXJjZXMiOlsid2VicGFjazovL25lby5tanMvLi9kaXN0L2VzbS9zcmMvbGlzdC9CYXNlLm1qcyIsIndlYnBhY2s6Ly9uZW8ubWpzLy4vZGlzdC9lc20vc3JjL21lbnUvTGlzdC5tanMiLCJ3ZWJwYWNrOi8vbmVvLm1qcy8uL2Rpc3QvZXNtL3NyYy9tZW51L01vZGVsLm1qcyIsIndlYnBhY2s6Ly9uZW8ubWpzLy4vZGlzdC9lc20vc3JjL21lbnUvU3RvcmUubWpzIiwid2VicGFjazovL25lby5tanMvLi9kaXN0L2VzbS9zcmMvc2VsZWN0aW9uL0xpc3RNb2RlbC5tanMiLCJ3ZWJwYWNrOi8vbmVvLm1qcy8uL2Rpc3QvZXNtL3NyYy9zZWxlY3Rpb24vTW9kZWwubWpzIiwid2VicGFjazovL25lby5tanMvLi9kaXN0L2VzbS9zcmMvc2VsZWN0aW9uL21lbnUvTGlzdE1vZGVsLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZSBmcm9tXCIuLi91dGlsL0NsYXNzU3lzdGVtLm1qc1wiO2ltcG9ydCB0IGZyb21cIi4uL2NvbXBvbmVudC9CYXNlLm1qc1wiO2ltcG9ydCBzIGZyb21cIi4uL3NlbGVjdGlvbi9MaXN0TW9kZWwubWpzXCI7aW1wb3J0IG8gZnJvbVwiLi4vdXRpbC9BcnJheS5tanNcIjtpbXBvcnQgaSBmcm9tXCIuLi9kYXRhL1N0b3JlLm1qc1wiO2V4cG9ydCBkZWZhdWx0IE5lby5zZXR1cENsYXNzKGNsYXNzIGV4dGVuZHMgdHtzdGF0aWMgY29uZmlnPXtjbGFzc05hbWU6XCJOZW8ubGlzdC5CYXNlXCIsbnR5cGU6XCJsaXN0XCIsYW5pbWF0ZV86ITEsYXV0b0Rlc3Ryb3lTdG9yZTohMCxiYXNlQ2xzOltcIm5lby1saXN0XCJdLGRpc2FibGVkRmllbGQ6XCJkaXNhYmxlZFwiLGRpc2FibGVTZWxlY3Rpb25fOiExLGRpc3BsYXlGaWVsZDpcIm5hbWVcIixkcmFnZ2FibGVfOiExLGRyYWdab25lOm51bGwsZHJhZ1pvbmVDb25maWc6bnVsbCxmb2N1c0luZGV4XzpudWxsLGhlYWRlcmxlc3NTZWxlY3RlZEluZGV4XzpudWxsLGhpZ2hsaWdodEZpbHRlclZhbHVlOiEwLGl0ZW1DbHM6XCJuZW8tbGlzdC1pdGVtXCIsaXRlbUhlaWdodF86bnVsbCxpdGVtVGFnTmFtZTpcImxpXCIsaXRlbVdpZHRoXzpudWxsLGl0ZW1zRm9jdXNhYmxlOiEwLGtlZXBGb2N1c0luZGV4OiExLGtleXM6e30scGx1Z2luQW5pbWF0ZUNvbmZpZzpudWxsLHNlbGVjdGVkSW5kZXhfOm51bGwsc2VsZWN0aW9uTW9kZWxfOm51bGwsc2VsZWN0T25Gb2N1czohMSxzaWxlbnRTZWxlY3Q6ITEsc3RvcmVfOm51bGwsdXNlQ2hlY2tCb3hlc186ITEsdXNlSGVhZGVyc186ITEsdXNlV3JhcHBlck5vZGVfOiExLF92ZG9tOnt0YWc6XCJ1bFwiLGNuOltdfX07aXRlbVJvbGU9bnVsbDtuYXZpZ2F0b3I9e307c2Nyb2xsSW50b1ZpZXdPbkZvY3VzPSEwO2NvbnN0cnVjdChlKXtzdXBlci5jb25zdHJ1Y3QoZSk7bGV0IHQ9dGhpczt0LnVzZUhlYWRlcnMmJih0LnNjcm9sbEludG9WaWV3T25Gb2N1cz0hMSksdC5hZGREb21MaXN0ZW5lcnMoe2NsaWNrOnQub25DbGljayxzY29wZTp0fSl9YWZ0ZXJTZXRBbmltYXRlKGUsdCl7ZSYmIXRoaXMuZ2V0UGx1Z2luKFwibGlzdC1hbmltYXRlXCIpJiZpbXBvcnQoXCIuL3BsdWdpbi9BbmltYXRlLm1qc1wiKS50aGVuKGU9PntsZXQgdD10aGlzLHM9dC5wbHVnaW5zfHxbXTtzLnB1c2goe21vZHVsZTplLmRlZmF1bHQsLi4udC5wbHVnaW5BbmltYXRlQ29uZmlnfSksdC5wbHVnaW5zPXN9KX1hZnRlclNldERpc2FibGVTZWxlY3Rpb24oZSx0KXtlJiZ0aGlzLnZub2RlSW5pdGlhbGl6ZWQmJnRoaXMuc2VsZWN0aW9uTW9kZWw/LmRlc2VsZWN0QWxsKCl9YWZ0ZXJTZXREcmFnZ2FibGUoZSx0KXtsZXQgcz10aGlzO2UmJiFzLmRyYWdab25lJiZpbXBvcnQoXCIuLi9kcmFnZ2FibGUvbGlzdC9EcmFnWm9uZS5tanNcIikudGhlbihlPT57cy5kcmFnWm9uZT1OZW8uY3JlYXRlKHttb2R1bGU6ZS5kZWZhdWx0LGFwcE5hbWU6cy5hcHBOYW1lLG93bmVyOnMsd2luZG93SWQ6cy53aW5kb3dJZCwuLi5zLmRyYWdab25lQ29uZmlnfSl9KX1hZnRlclNldEZvY3VzSW5kZXgoZSx0KXtudWxsIT09ZSYmdGhpcy51cGRhdGVJdGVtRm9jdXMoZSl9YWZ0ZXJTZXRIZWFkZXJsZXNzU2VsZWN0ZWRJbmRleChlLHQpe2xldCBzPXRoaXM7TmVvLmlzTnVtYmVyKGUpP3Muc2VsZWN0ZWRJbmRleD1zLnN0b3JlLmdldENvdW50KCk/cy5nZXRTZWxlY3RlZEluZGV4KGUpOm51bGw6TmVvLmlzTnVtYmVyKHQpJiYocy5zZWxlY3RlZEluZGV4PW51bGwpfWFmdGVyU2V0TW91bnRlZChlLHQpe2xldCBzPXRoaXM7IWUmJnMuaGFzTmF2aWdhdG9yJiYoTmVvLm1haW4uYWRkb24uTmF2aWdhdG9yLnVuc3Vic2NyaWJlKHMubmF2aWdhdG9yKSxzLmhhc05hdmlnYXRvcj0hMSxzLnNlbGVjdGVkSW5kZXg9bnVsbCksZSYmKHMuaGFzTmF2aWdhdG9yfHwocy5uYXZpZ2F0b3I9TmVvLm1lcmdlKHthcHBOYW1lOnMuYXBwTmFtZSxhdXRvQ2xpY2s6cy5zZWxlY3RPbkZvY3VzLGlkOnMuaWQsa2VlcEZvY3VzSW5kZXg6cy5rZWVwRm9jdXNJbmRleCxzZWxlY3RvcjpgLiR7cy5pdGVtQ2xzfTpub3QoLm5lby1kaXNhYmxlZCwubmVvLWxpc3QtaGVhZGVyKWAsd2luZG93SWQ6cy53aW5kb3dJZH0scy5uYXZpZ2F0b3IpLHMuaGFzTmF2aWdhdG9yPSEwKSxOZW8ubWFpbi5hZGRvbi5OYXZpZ2F0b3Iuc3Vic2NyaWJlKHMubmF2aWdhdG9yKSksc3VwZXIuYWZ0ZXJTZXRNb3VudGVkKGUsdCl9YWZ0ZXJTZXRTZWxlY3RlZEluZGV4KGUsdCl7bGV0IHM9dGhpcyx7c2VsZWN0aW9uTW9kZWw6b309cztOZW8uaXNOdW1iZXIoZSk/KG8/LnNlbGVjdEF0KGUpLHMuaGVhZGVybGVzc1NlbGVjdGVkSW5kZXg9cy5nZXRIZWFkZXJsZXNzSW5kZXgoZSkpOk5lby5pc051bWJlcih0KSYmKG8uZGVzZWxlY3RBbGwoKSxzLmhlYWRlcmxlc3NTZWxlY3RlZEluZGV4PW51bGwpfWFmdGVyU2V0U2VsZWN0aW9uTW9kZWwoZSx0KXt0aGlzLnZub2RlSW5pdGlhbGl6ZWQmJmUucmVnaXN0ZXIodGhpcyl9YWZ0ZXJTZXRTdG9yZShlLHQpe2U/Lm9uKHtmaWx0ZXI6XCJvblN0b3JlRmlsdGVyXCIsbG9hZDpcIm9uU3RvcmVMb2FkXCIscmVjb3JkQ2hhbmdlOlwib25TdG9yZVJlY29yZENoYW5nZVwiLHNvcnQ6XCJvblN0b3JlU29ydFwiLHNjb3BlOnRoaXN9KSxlPy5nZXRDb3VudCgpPjAmJnRoaXMub25TdG9yZUxvYWQoKX1hZnRlclNldFVzZUNoZWNrQm94ZXMoZSx0KXtsZXR7Y2xzOnN9PXRoaXM7by50b2dnbGUocyxcIm5lby11c2UtY2hlY2tpY29uc1wiLCEhZSksdGhpcy5jbHM9c31hZnRlclNldFVzZUhlYWRlcnMoZSx0KXtpZihlKXtsZXQgZT10aGlzO2UudmRvbS50YWc9XCJkbFwiLGUuaXRlbVRhZ05hbWU9XCJkZFwifX1hZnRlclNldFVzZVdyYXBwZXJOb2RlKGUsdCl7bGV0IHM9dGhpcyx7Y2xzOmksd3JhcHBlckNsczpyfT1zO29bZT9cImFkZFwiOlwicmVtb3ZlXCJdKGksXCJuZW8tdXNlLXdyYXBwZXItbm9kZVwiKSxvW2U/XCJhZGRcIjpcInJlbW92ZVwiXShyLFwibmVvLWxpc3Qtd3JhcHBlclwiKSxzLndyYXBwZXJDbHM9cixzLmNscz1pfWFmdGVyU2V0V2luZG93SWQoZSx0KXtzdXBlci5hZnRlclNldFdpbmRvd0lkKGUsdCk7bGV0e25hdmlnYXRvcjpzfT10aGlzO2UmJnMmJihzLndpbmRvd0lkPWUpfWJlZm9yZVNldFNlbGVjdGlvbk1vZGVsKHQsbyl7cmV0dXJuIG8/LmRlc3Ryb3koKSxlLmJlZm9yZVNldEluc3RhbmNlKHQscyl9YmVmb3JlU2V0U3RvcmUodCxzKXtyZXR1cm4gcz8uZGVzdHJveSgpLGUuYmVmb3JlU2V0SW5zdGFuY2UodCxpKX1jcmVhdGVJdGVtKGUsdCl7bGV0IHMsaSxyPXRoaXMsbD1bci5pdGVtQ2xzXSxuPW51bGwhPT1yLml0ZW1IZWlnaHQsYT1udWxsIT09ci5pdGVtV2lkdGgsZD1yLnVzZUhlYWRlcnMmJmUuaXNIZWFkZXIsYz1yLmNyZWF0ZUl0ZW1Db250ZW50KGUsdCksdT1yLmdldEl0ZW1JZChlW3IuZ2V0S2V5UHJvcGVydHkoKV0pLHtzZWxlY3Rpb25Nb2RlbDptfT1yLGg9IXIuZGlzYWJsZVNlbGVjdGlvbiYmbT8uaXNTZWxlY3RlZCh1KTtzd2l0Y2goZCYmbC5wdXNoKFwibmVvLWxpc3QtaGVhZGVyXCIpLGgmJmwucHVzaChtLnNlbGVjdGVkQ2xzKSxlLmNscyYmby5hZGQobCxlLmNscyksZVtyLmRpc2FibGVkRmllbGRdJiZsLnB1c2goXCJuZW8tZGlzYWJsZWRcIikscz17aWQ6dSx0YWc6ZD9cImR0XCI6ci5pdGVtVGFnTmFtZSxcImFyaWEtc2VsZWN0ZWRcIjpoLGNsczpsfSxyLml0ZW1zRm9jdXNhYmxlJiYocy50YWJJbmRleD0tMSksKGUuaGlkZGVufHxjLnJlbW92ZURvbSkmJihzLnJlbW92ZURvbT0hMCksci5pdGVtUm9sZSYmKHMucm9sZT1yLml0ZW1Sb2xlKSxOZW8udHlwZU9mKGMpKXtjYXNlIG51bGw6cmV0dXJuIG51bGw7Y2FzZVwiQXJyYXlcIjpzLmNuPWMsaT0hMCxjLmZvckVhY2goZT0+e2UucmVtb3ZlRG9tfHwoaT0hMSl9KSxpJiYocy5yZW1vdmVEb209ITApO2JyZWFrO2Nhc2VcIk9iamVjdFwiOmMuY2xzJiYoby5hZGQocy5jbHMsYy5jbHMpLGRlbGV0ZSBjLmNscyksT2JqZWN0LmFzc2lnbihzLGMpO2JyZWFrO2Nhc2VcIk51bWJlclwiOmNhc2VcIlN0cmluZ1wiOnMuaHRtbD1jfXJldHVybihufHxhKSYmKHMuc3R5bGU9cy5zdHlsZXx8e30sbiYmIXMuaGFzT3duUHJvcGVydHkoXCJoZWlnaHRcIikmJihzLnN0eWxlLmhlaWdodD1gJHtyLml0ZW1IZWlnaHR9cHhgKSxhJiYhcy5oYXNPd25Qcm9wZXJ0eShcIndpZHRoXCIpJiYocy5zdHlsZS53aWR0aD1gJHtyLml0ZW1XaWR0aH1weGApKSxzfWNyZWF0ZUl0ZW1Db250ZW50KGUsdCl7bGV0IHMsbz10aGlzLGk9ZVtvLmRpc3BsYXlGaWVsZF07cmV0dXJuIG8uaGlnaGxpZ2h0RmlsdGVyVmFsdWUmJihzPW8uc3RvcmUuZ2V0RmlsdGVyKG8uZGlzcGxheUZpZWxkKSxzJiZudWxsIT09cy52YWx1ZSYmXCJcIiE9PXMudmFsdWUmJihpPWkucmVwbGFjZShuZXcgUmVnRXhwKHMudmFsdWUsXCJnaVwiKSxmdW5jdGlvbihlKXtyZXR1cm4nPHNwYW4gY2xhc3M9XCJuZW8taGlnaGxpZ2h0LXNlYXJjaFwiPicrZStcIjwvc3Bhbj5cIn0pKSksaX1jcmVhdGVJdGVtcyhlPSExKXtsZXQgdCxzPXRoaXMse2hlYWRlcmxlc3NTZWxlY3RlZEluZGV4Om99PXMsaT1zLmdldFZkb21Sb290KCk7TmVvLmlzTnVtYmVyKG8pJiYhTmVvLmlzTnVtYmVyKHMuc2VsZWN0ZWRJbmRleCkmJnMuYWZ0ZXJTZXRIZWFkZXJsZXNzU2VsZWN0ZWRJbmRleChvLG51bGwpLHMuYW5pbWF0ZSYmIXMuZ2V0UGx1Z2luKFwibGlzdC1hbmltYXRlXCIpfHwoaS5jbj1bXSxzLnN0b3JlLmZvckVhY2goKGUsbyk9Pnt0PXMuY3JlYXRlSXRlbShlLG8pLHQmJmkuY24ucHVzaCh0KX0pLCFlJiZzLnByb21pc2VVcGRhdGUoKS50aGVuKCgpPT57cy5maXJlKFwiY3JlYXRlSXRlbXNcIil9KSl9ZGVzdHJveSguLi5lKXtsZXQgdD10aGlzO3Quc2VsZWN0aW9uTW9kZWw/LmRlc3Ryb3koKSx0LmF1dG9EZXN0cm95U3RvcmUmJnQuc3RvcmU/LmRlc3Ryb3koKSxzdXBlci5kZXN0cm95KC4uLmUpfWZvY3VzKGU9dGhpcy5pZCl7dGhpcy5tb3VudGVkJiZOZW8ubWFpbi5hZGRvbi5OYXZpZ2F0b3IubmF2aWdhdGVUbyh7ZGF0YTp0aGlzLm5hdmlnYXRvcix0YXJnZXQ6ZSx3aW5kb3dJZDp0aGlzLndpbmRvd0lkfSl9Z2V0U2VsZWN0ZWRJbmRleChlKXtsZXQgdD0wLHM9MCxvPXRoaXMuc3RvcmUuaXRlbXMsaT1lO2lmKG8ubGVuZ3RoPDEpcmV0dXJuIG51bGw7Zm9yKDtzPD1pO3MrKylvW3NdLmlzSGVhZGVyJiYodCsrLGkrKyk7cmV0dXJuIGUrdH1nZXRIZWFkZXJsZXNzSW5kZXgoZSl7bGV0IHQ9MCxzPTAsbz10aGlzLnN0b3JlLml0ZW1zO2Zvcig7czxlO3MrKylvW3NdLmlzSGVhZGVyfHx0Kys7cmV0dXJuIHR9Z2V0SXRlbUlkKGUpe3JldHVybmAke3RoaXMuaWR9X18ke2UuaXNSZWNvcmQ/ZVt0aGlzLmdldEtleVByb3BlcnR5KCldOmV9YH1nZXRJdGVtUmVjb3JkSWQoZSl7bGV0IHQ9ZS5zcGxpdChcIl9fXCIpWzFdLHttb2RlbDpzfT10aGlzLnN0b3JlLG89cz8uZ2V0RmllbGQodGhpcy5nZXRLZXlQcm9wZXJ0eSgpKSxpPW8/LnR5cGU/LnRvTG93ZXJDYXNlKCk7cmV0dXJuXCJpbnRcIiE9PWkmJlwiaW50ZWdlclwiIT09aXx8KHQ9cGFyc2VJbnQodCkpLHR9Z2V0S2V5UHJvcGVydHkoKXtyZXR1cm4gdGhpcy5zdG9yZS5rZXlQcm9wZXJ0eXx8dGhpcy5zdG9yZS5tb2RlbC5rZXlQcm9wZXJ0eX1vbkNsaWNrKGUpe2xldCB0LHM9dGhpcztpZihlLnBhdGhbMF0uaWQ9PT1zLmlkKXMub25Db250YWluZXJDbGljayhlKTtlbHNlIGZvcih0IG9mIGUucGF0aClpZih0LmNscy5pbmNsdWRlcyhzLml0ZW1DbHMpKXtzLm9uSXRlbUNsaWNrKHQsZSk7YnJlYWt9fW9uQ29uc3RydWN0ZWQoKXtzdXBlci5vbkNvbnN0cnVjdGVkKCksdGhpcy5zZWxlY3Rpb25Nb2RlbD8ucmVnaXN0ZXIodGhpcyl9b25Db250YWluZXJDbGljayhlKXt0aGlzLmZpcmUoXCJjb250YWluZXJDbGlja1wiLGUpfW9uSXRlbUNsaWNrKGUsdCl7bGV0IHM9dGhpcyxvPXMuc3RvcmUuZ2V0KHMuZ2V0SXRlbVJlY29yZElkKGUuaWQpKTt0LnJlY29yZD1vLHMuZmlyZShcIml0ZW1DbGlja1wiLHtyZWNvcmQ6b30pfW9uU3RvcmVGaWx0ZXIoKXt0aGlzLmNyZWF0ZUl0ZW1zKCl9b25TdG9yZUxvYWQoKXtsZXQgZT10aGlzOyFlLm1vdW50ZWQmJmUuaXNWbm9kZUluaXRpYWxpemluZz9lLm9uKFwibW91bnRlZFwiLCgpPT57ZS5jcmVhdGVJdGVtcygpfSxlLHtvbmNlOiEwfSk6ZS5jcmVhdGVJdGVtcygpfW9uU3RvcmVSZWNvcmRDaGFuZ2UoZSl7bGV0IHQ9dGhpcyx7aW5kZXg6c309ZTtzPi0xJiYodC52ZG9tLmNuW3NdPXQuY3JlYXRlSXRlbShlLnJlY29yZCxzKSx0LnVwZGF0ZSgpKX1vblN0b3JlU29ydChlKXt0aGlzLmNyZWF0ZUl0ZW1zKCl9c2VsZWN0SXRlbShlKXtsZXQgdD10aGlzO3QuZGlzYWJsZVNlbGVjdGlvbnx8KE5lby5pc051bWJlcihlKT90LnNlbGVjdGlvbk1vZGVsPy5zZWxlY3RBdChlKTplJiZ0LnNlbGVjdGlvbk1vZGVsPy5zZWxlY3RBdCh0LnN0b3JlLmluZGV4T2YoZSkpKX1hc3luYyB1cGRhdGVJdGVtRm9jdXMoZSl7bGV0IHQ9dGhpcyx7bmF2aWdhdGVUbzpzfT1OZW8ubWFpbi5hZGRvbi5OYXZpZ2F0b3I7dC5tb3VudGVkP05lby5pc051bWJlcihlKT9zKHtkYXRhOnQubmF2aWdhdG9yLHRhcmdldDp0LmdldEhlYWRlcmxlc3NJbmRleChlKSx3aW5kb3dJZDp0LndpbmRvd0lkfSk6ZSYmcyh7ZGF0YTp0Lm5hdmlnYXRvcix0YXJnZXQ6dC5nZXRJdGVtSWQoZVt0LmdldEtleVByb3BlcnR5KCldKSx3aW5kb3dJZDp0LndpbmRvd0lkfSk6dC5vbihcIm1vdW50ZWRcIiwoKT0+e2U9PT10LmZvY3VzSW5kZXgmJnQudXBkYXRlSXRlbUZvY3VzKHQuZm9jdXNJbmRleCl9LHQse29uY2U6ITB9KX19KTsiLCJpbXBvcnQgZSBmcm9tXCIuLi9saXN0L0Jhc2UubWpzXCI7aW1wb3J0IHQgZnJvbVwiLi4vc2VsZWN0aW9uL21lbnUvTGlzdE1vZGVsLm1qc1wiO2ltcG9ydCBuIGZyb21cIi4vU3RvcmUubWpzXCI7Y2xhc3MgdSBleHRlbmRzIGV7c3RhdGljIGNvbmZpZz17Y2xhc3NOYW1lOlwiTmVvLm1lbnUuTGlzdFwiLG50eXBlOlwibWVudS1saXN0XCIsYWN0aXZlU3ViTWVudTpudWxsLGJhc2VDbHM6W1wibmVvLW1lbnUtbGlzdFwiLFwibmVvLWxpc3RcIl0sZm9jdXNUaW1lb3V0SWQ6bnVsbCxoaWRlT25MZWFmSXRlbUNsaWNrOiEwLGl0ZW1zXzpudWxsLG1lbnVGb2N1c186ITEsaXNSb290OiEwLHBhcmVudEluZGV4OjAscGFyZW50TWVudTpudWxsLHNlbGVjdGlvbk1vZGVsOnQsc3RvcmU6bixzdWJNZW51R2FwOjAsc3ViTWVudU1hcDpudWxsLHpJbmRleF86MTAwLF92ZG9tOnt0YWc6XCJ1bFwiLGNuOltdfX07cGFyZW50Q29tcG9uZW50PW51bGw7YWZ0ZXJTZXRJdGVtcyhlLHQpe2xldHtzdG9yZTpufT10aGlzO3QmJm4uY2xlYXIoKSxlJiZuLmFkZChlKX1hZnRlclNldE1lbnVGb2N1cyhlLHQpe2lmKHZvaWQgMCE9PXQpe2xldCB0PXRoaXM7dC5pc1Jvb3Q/ZT8oY2xlYXJUaW1lb3V0KHQuZm9jdXNUaW1lb3V0SWQpLHQuZm9jdXNUaW1lb3V0SWQ9bnVsbCk6dC5mb2N1c1RpbWVvdXRJZD1zZXRUaW1lb3V0KCgpPT57dFt0LmZsb2F0aW5nP1widW5tb3VudFwiOlwiaGlkZVN1Yk1lbnVcIl0oKX0sMjApOnQucGFyZW50TWVudS5tZW51Rm9jdXM9ZX19YWZ0ZXJTZXRUaGVtZShlLHQpe3N1cGVyLmFmdGVyU2V0VGhlbWUoZSx0KSxPYmplY3QudmFsdWVzKHRoaXMuc3ViTWVudU1hcHx8e30pLmZvckVhY2godD0+e3QudGhlbWU9ZX0pfWFmdGVyU2V0WkluZGV4KGUsdCl7dGhpcy5zdHlsZT17Li4udGhpcy5zdHlsZSx6SW5kZXg6ZX19Y3JlYXRlSXRlbUNvbnRlbnQoZSx0KXtsZXQgbj10aGlzLHtpY29uQ2xzOnV9PWUsbz1lW24uc3RvcmUua2V5UHJvcGVydHldLHM9W3t0YWc6XCJzcGFuXCIsY2xzOltcIm5lby1jb250ZW50XCJdLHRleHQ6ZVtuLmRpc3BsYXlGaWVsZF19XTtyZXR1cm4gdSYmXCJcIiE9PXUmJnMudW5zaGlmdCh7dGFnOlwiaVwiLGNsczpbXCJuZW8tbWVudS1pY29uXCIsXCJuZW8taWNvblwiLHVdLGlkOm4uZ2V0SWNvbklkKG8pfSksbi5oYXNDaGlsZHJlbihlKSYmcy5wdXNoKHt0YWc6XCJpXCIsY2xzOltcIm5lby1hcnJvdy1pY29uXCIsXCJuZW8taWNvblwiLFwiZmFzIGZhLWNoZXZyb24tcmlnaHRcIl0saWQ6bi5nZXRBcnJvd0ljb25JZChvKX0pLHN9ZGVzdHJveSguLi5lKXtsZXR7YWN0aXZlU3ViTWVudTp0fT10aGlzLG49dGhpcy5zdWJNZW51TWFwfHx7fTt0Py51bm1vdW50KCksT2JqZWN0LmVudHJpZXMobikuZm9yRWFjaCgoW2UsdF0pPT57dC5kZXN0cm95KCksbltlXT1udWxsfSksc3VwZXIuZGVzdHJveSguLi5lKX1nZXRBcnJvd0ljb25JZChlKXtyZXR1cm5gJHt0aGlzLmlkfV9fYXJyb3dfaWNvbl9fJHtlfWB9Z2V0SWNvbklkKGUpe3JldHVybmAke3RoaXMuaWR9X19pY29uX18ke2V9YH1nZXRNZW51TWFwSWQoZSl7cmV0dXJuYG1lbnVfXyR7ZX1gfWhhc0NoaWxkcmVuKGUpe3JldHVybiBBcnJheS5pc0FycmF5KGUuaXRlbXMpJiZlLml0ZW1zLmxlbmd0aD4wfWhpZGVTdWJNZW51KCl7bGV0e2FjdGl2ZVN1Yk1lbnU6ZX09dGhpcztlJiYoZS51bm1vdW50KCksdGhpcy5hY3RpdmVTdWJNZW51PW51bGwpfW9uRm9jdXNFbnRlcihlKXtzdXBlci5vbkZvY3VzRW50ZXIoZSksdGhpcy5tZW51Rm9jdXM9ITB9b25Gb2N1c0xlYXZlKGUpe3N1cGVyLm9uRm9jdXNMZWF2ZShlKTtsZXQgdCxuPSExLHU9dGhpcy5wYXJlbnRDb21wb25lbnQ/LmlkO2lmKHUpZm9yKHQgb2YgZS5vbGRQYXRoKWlmKHQuaWQ9PT11KXtuPSEwO2JyZWFrfW58fCh0aGlzLm1lbnVGb2N1cz0hMSl9b25JdGVtQ2xpY2soZSx0KXtzdXBlci5vbkl0ZW1DbGljayhlLHQpLHRoaXMub25LZXlEb3duRW50ZXIoZS5pZCl9b25LZXlEb3duRW50ZXIoZSl7aWYoZSl7bGV0IHQsbj10aGlzLHU9bi5nZXRJdGVtUmVjb3JkSWQoZSksbz1uLnN0b3JlLmdldCh1KTtuLmNhbGxiYWNrKG8uaGFuZGxlcixuLFtvXSksby5yb3V0ZSYmTmVvLk1haW4uc2V0Um91dGUoe2FwcE5hbWU6bi5hcHBOYW1lLHZhbHVlOm8ucm91dGV9KSxuLmhpZGVPbkxlYWZJdGVtQ2xpY2smJiFvLml0ZW1zJiZuLnVubW91bnQoKSxvLml0ZW1zJiYodD1uLnN1Yk1lbnVNYXA/LltuLmdldE1lbnVNYXBJZCh1KV0sdCYmbi50b2dnbGVTdWJNZW51KGUsbykpfX1vbktleURvd25Fc2NhcGUoZSl7dGhpcy5mbG9hdGluZyYmdGhpcy51bm1vdW50KCl9b25TZWxlY3QoZSl7bGV0IHQ9dGhpcyxuPWVbMF0sdT10LmdldEl0ZW1SZWNvcmRJZChuKSxvPXQuc3RvcmUuZ2V0KHUpO3QuYWN0aXZlU3ViTWVudSE9PXQuc3ViTWVudU1hcD8uW3QuZ2V0TWVudU1hcElkKHUpXSYmKHQuaGlkZVN1Yk1lbnUoKSx0Lmhhc0NoaWxkcmVuKG8pJiZ0LnNob3dTdWJNZW51KG4sbykpfXNob3dTdWJNZW51KGUsdCl7Y29uc3Qgbj10aGlzLHtzdG9yZTpvfT1uLHM9dFtvLmtleVByb3BlcnR5XSxpPW4uc3ViTWVudU1hcHx8KG4uc3ViTWVudU1hcD17fSksYT1uLmdldE1lbnVNYXBJZChzKSxyPWlbYV18fChpW2FdPU5lby5jcmVhdGUoe21vZHVsZTp1LGFsaWduOnt0YXJnZXQ6ZSxlZGdlQWxpZ246XCJsMC1yMFwiLGF4aXNMb2NrOiEwLHRhcmdldE1hcmdpbjpuLnN1Yk1lbnVHYXB9LGFwcE5hbWU6bi5hcHBOYW1lLGRpc3BsYXlGaWVsZDpuLmRpc3BsYXlGaWVsZCxmbG9hdGluZzohMCxpdGVtczp0Lml0ZW1zLGlzUm9vdDohMSxwYXJlbnRDb21wb25lbnQ6bi5wYXJlbnRDb21wb25lbnQscGFyZW50SWQ6bi5hcHAubWFpblZpZXcuaWQscGFyZW50SW5kZXg6by5pbmRleE9mKHQpLHBhcmVudE1lbnU6bix0aGVtZTpuLnRoZW1lLHpJbmRleDpuLnpJbmRleCsxfSkpO24uYWN0aXZlU3ViTWVudSE9PXImJihuLmFjdGl2ZVN1Yk1lbnU9cixyLmluaXRWbm9kZSghMCkpfXRvZ2dsZVN1Yk1lbnUoZSx0KXtsZXQgbj10aGlzLHU9dFtuLmdldEtleVByb3BlcnR5KCldLG89bi5zdWJNZW51TWFwPy5bbi5nZXRNZW51TWFwSWQodSldO28/Lm1vdW50ZWQ/bi5oaWRlU3ViTWVudSgpOm4uc2hvd1N1Yk1lbnUoZSx0KX11bm1vdW50KCl7dGhpcy5zZWxlY3Rpb25Nb2RlbD8uZGVzZWxlY3RBbGwoITApLHRoaXMuaGlkZVN1Yk1lbnUoKSxzdXBlci51bm1vdW50KCl9fWV4cG9ydCBkZWZhdWx0IE5lby5zZXR1cENsYXNzKHUpOyIsImltcG9ydCBlIGZyb21cIi4uLy4uL3NyYy9kYXRhL01vZGVsLm1qc1wiO2V4cG9ydCBkZWZhdWx0IE5lby5zZXR1cENsYXNzKGNsYXNzIGV4dGVuZHMgZXtzdGF0aWMgY29uZmlnPXtjbGFzc05hbWU6XCJOZW8ubWVudS5Nb2RlbFwiLGtleVByb3BlcnR5OlwiaWRcIixmaWVsZHM6W3tuYW1lOlwiY2xzXCIsdHlwZTpcIkFycmF5XCJ9LHtuYW1lOlwiaGFuZGxlclwiLHR5cGU6XCJGdW5jdGlvblwifSx7bmFtZTpcImhpZGRlblwiLHR5cGU6XCJCb29sZWFuXCJ9LHtuYW1lOlwiaWNvbkNsc1wiLHR5cGU6XCJTdHJpbmdcIn0se25hbWU6XCJpZFwiLHR5cGU6XCJJbnRlZ2VyXCJ9LHtuYW1lOlwiaXRlbXNcIix0eXBlOlwiQXJyYXlcIn0se25hbWU6XCJyb3V0ZVwiLHR5cGU6XCJTdHJpbmdcIn0se25hbWU6XCJ0ZXh0XCIsdHlwZTpcIlN0cmluZ1wifV19fSk7IiwiaW1wb3J0IGUgZnJvbVwiLi9Nb2RlbC5tanNcIjtpbXBvcnQgbyBmcm9tXCIuLi8uLi9zcmMvZGF0YS9TdG9yZS5tanNcIjtleHBvcnQgZGVmYXVsdCBOZW8uc2V0dXBDbGFzcyhjbGFzcyBleHRlbmRzIG97c3RhdGljIGNvbmZpZz17Y2xhc3NOYW1lOlwiTmVvLm1lbnUuU3RvcmVcIixtb2RlbDplfX0pOyIsImltcG9ydCBlIGZyb21cIi4vTW9kZWwubWpzXCI7ZXhwb3J0IGRlZmF1bHQgTmVvLnNldHVwQ2xhc3MoY2xhc3MgZXh0ZW5kcyBle3N0YXRpYyBjb25maWc9e2NsYXNzTmFtZTpcIk5lby5zZWxlY3Rpb24uTGlzdE1vZGVsXCIsbnR5cGU6XCJzZWxlY3Rpb24tbGlzdG1vZGVsXCJ9O29uS2V5RG93bkVzY2FwZShlKXt9b25LZXlEb3duRG93bihlKXt9b25LZXlEb3duRW50ZXIoZSl7fW9uS2V5RG93bkxlZnQoZSl7fW9uS2V5RG93blJpZ2h0KGUpe31vbktleURvd25VcChlKXt9b25MaXN0Q2xpY2soe2N1cnJlbnRUYXJnZXQ6ZX0pe2xldCB0LHt2aWV3Om59PXRoaXM7bi5kaXNhYmxlU2VsZWN0aW9ufHwodD1uLnN0b3JlLmdldChuLmdldEl0ZW1SZWNvcmRJZChlKSksdCYmdGhpcy5zZWxlY3QodCkpfW9uTGlzdE5hdmlnYXRlKGUpe2xldCB0LHt2aWV3Om59PXRoaXMse3N0b3JlOm99PW47ZS5hY3RpdmVJdGVtJiYodD1vLmdldChuLmdldEl0ZW1SZWNvcmRJZChlLmFjdGl2ZUl0ZW0pKSksdHx8KHQ9by5nZXRBdChNYXRoLm1pbihlLmFjdGl2ZUluZGV4LG8uZ2V0Q291bnQoKSkpKSxlLnJlY29yZD10LG4uX2ZvY3VzSW5kZXg9by5pbmRleE9mKHQpLG4uZmlyZShcIml0ZW1OYXZpZ2F0ZVwiLGUpfXJlZ2lzdGVyKGUpe3N1cGVyLnJlZ2lzdGVyKGUpO2xldCB0PXRoaXMse2lkOm4sdmlldzpvfT10O28uYWRkRG9tTGlzdGVuZXJzKFt7Y2xpY2s6dC5vbkxpc3RDbGljayxzY29wZTp0LGRlbGVnYXRlOmU9Pntmb3IobGV0IHQ9MCx7bGVuZ3RoOm59PWU7dDxuO3QrKyl7Y29uc3R7Y2xzOm59PWVbdF07aWYobi5pbmNsdWRlcyhvLml0ZW1DbHMpJiYhbi5pbmNsdWRlcyhcIm5lby1kaXNhYmxlZFwiKSYmIW4uaW5jbHVkZXMoXCJuZW8tbGlzdC1oZWFkZXJcIikpcmV0dXJuIHR9fX0se25lb25hdmlnYXRlOnQub25MaXN0TmF2aWdhdGUsc2NvcGU6dH1dKSxvLmtleXM/Ll9rZXlzLnB1c2goe2ZuOlwib25LZXlEb3duRG93blwiLGtleTpcIkRvd25cIixzY29wZTpufSx7Zm46XCJvbktleURvd25FbnRlclwiLGtleTpcIkVudGVyXCIsc2NvcGU6bn0se2ZuOlwib25LZXlEb3duRXNjYXBlXCIsa2V5OlwiRXNjYXBlXCIsc2NvcGU6bn0se2ZuOlwib25LZXlEb3duTGVmdFwiLGtleTpcIkxlZnRcIixzY29wZTpufSx7Zm46XCJvbktleURvd25SaWdodFwiLGtleTpcIlJpZ2h0XCIsc2NvcGU6bn0se2ZuOlwib25LZXlEb3duVXBcIixrZXk6XCJVcFwiLHNjb3BlOm59KX1zZWxlY3RBdChlKXtsZXR7dmlldzp0fT10aGlzLG49dD8uc3RvcmUuZ2V0S2V5QXQoZSksbz1uJiZ0LmdldEl0ZW1JZChuKTtvJiZ0aGlzLnNlbGVjdChvKX11bnJlZ2lzdGVyKCl7bGV0e2lkOmUsdmlldzp0fT10aGlzO3Qua2V5cz8ucmVtb3ZlS2V5cyhbe2ZuOlwib25LZXlEb3duRG93blwiLGtleTpcIkRvd25cIixzY29wZTplfSx7Zm46XCJvbktleURvd25FbnRlclwiLGtleTpcIkVudGVyXCIsc2NvcGU6ZX0se2ZuOlwib25LZXlEb3duRXNjYXBlXCIsa2V5OlwiRXNjYXBlXCIsc2NvcGU6ZX0se2ZuOlwib25LZXlEb3duTGVmdFwiLGtleTpcIkxlZnRcIixzY29wZTplfSx7Zm46XCJvbktleURvd25SaWdodFwiLGtleTpcIlJpZ2h0XCIsc2NvcGU6ZX0se2ZuOlwib25LZXlEb3duVXBcIixrZXk6XCJVcFwiLHNjb3BlOmV9XSksc3VwZXIudW5yZWdpc3RlcigpfX0pOyIsImltcG9ydCBlIGZyb21cIi4uL2NvcmUvQmFzZS5tanNcIjtpbXBvcnQgdCBmcm9tXCIuLi91dGlsL0FycmF5Lm1qc1wiO2ltcG9ydCBzIGZyb21cIi4uL2NvcmUvT2JzZXJ2YWJsZS5tanNcIjtpbXBvcnR7aXNEZXNjcmlwdG9yIGFzIGx9ZnJvbVwiLi4vY29yZS9Db25maWdTeW1ib2xzLm1qc1wiO2V4cG9ydCBkZWZhdWx0IE5lby5zZXR1cENsYXNzKGNsYXNzIGV4dGVuZHMgZXtzdGF0aWMgb2JzZXJ2YWJsZT0hMDtzdGF0aWMgY29uZmlnPXtjbGFzc05hbWU6XCJOZW8uc2VsZWN0aW9uLk1vZGVsXCIsbnR5cGU6XCJzZWxlY3Rpb24tbW9kZWxcIixjbHM6bnVsbCxpdGVtc186e1tsXTohMCxjbG9uZTpcInNoYWxsb3dcIixjbG9uZU9uR2V0Olwibm9uZVwiLGlzRXF1YWw6KCk9PiExLHZhbHVlOltdfSxzZWxlY3RlZENsczpcIm5lby1zZWxlY3RlZFwiLHNpbmdsZVNlbGVjdDohMCx2aWV3XzpudWxsfTtiZWZvcmVHZXRWaWV3KGUpe3JldHVybiBOZW8uZ2V0Q29tcG9uZW50KHRoaXMuX3ZpZXcpfWJlZm9yZVNldFZpZXcoZSl7cmV0dXJuIGUmJmUuaWR9YWRkRG9tTGlzdGVuZXIoKXt9ZGVzZWxlY3QoZSxzLGw9dGhpcy5pdGVtcyxpKXtsZXQgcixvPXRoaXMse3ZpZXc6Y309bztlPWUuaXNSZWNvcmQ/Yy5nZXRJdGVtSWQoZSk6TmVvLmlzT2JqZWN0KGUpP2UuaWQ6ZSxsLmluY2x1ZGVzKGUpPyhyPWMuZ2V0VmRvbUNoaWxkKGUpLHImJihyLmNscz10LnJlbW92ZShyLmNsc3x8W10saXx8by5zZWxlY3RlZENscyksZGVsZXRlIHJbXCJhcmlhLXNlbGVjdGVkXCJdKSx0LnJlbW92ZShsLGUpLHN8fChjLnVwZGF0ZSgpLGMucGFyZW50Py5vbkRlc2VsZWN0Py4oKSxjLm9uRGVzZWxlY3Q/LigpLG8uZmlyZShcInNlbGVjdGlvbkNoYW5nZVwiLHtzZWxlY3Rpb246bH0pKSk6c3x8by5maXJlKFwibm9DaGFuZ2VcIil9ZGVzZWxlY3RBbGwoZSx0PXRoaXMuaXRlbXMpe2xldCBzPXRoaXMsbD1bLi4udF0se3ZpZXc6aX09cztsLmxlbmd0aD8obC5mb3JFYWNoKGU9PntzLmRlc2VsZWN0KGUsITApfSksIWUmJmwubGVuZ3RoPjAmJmkudXBkYXRlKCkscy5maXJlKFwic2VsZWN0aW9uQ2hhbmdlXCIse3NlbGVjdGlvbjp0aGlzLml0ZW1zfSkpOmV8fHMuZmlyZShcIm5vQ2hhbmdlXCIpfWRlc3Ryb3koLi4uZSl7dGhpcy51bnJlZ2lzdGVyKCksc3VwZXIuZGVzdHJveSguLi5lKX1nZXRDb250cm9sbGVyKCl7cmV0dXJuIHRoaXMudmlldy5nZXRDb250cm9sbGVyKCl9Z2V0U2VsZWN0aW9uKCl7cmV0dXJuIHRoaXMuaXRlbXN9aGFzU2VsZWN0aW9uKCl7cmV0dXJuIHRoaXMuaXRlbXMubGVuZ3RoPjB9aXNTZWxlY3RlZChlKXtyZXR1cm4gdGhpcy5pdGVtcy5pbmNsdWRlcyhlKX1yZWdpc3RlcihlKXtsZXQgdD10aGlzLHM9ZS53cmFwcGVyQ2xzfHxbXTt0LmNscyYmIXMuaW5jbHVkZXModC5jbHMpJiYocy5wdXNoKHQuY2xzKSxlLndyYXBwZXJDbHM9cyksdC52aWV3PWUsdC5hZGREb21MaXN0ZW5lcigpLGUuZmlyZShcInNlbGVjdGlvbk1vZGVsQ2hhbmdlXCIse3ZhbHVlOnR9KX1yZW1vdmVEb21MaXN0ZW5lcnMoKXtsZXQgZT10aGlzLHM9ZS52aWV3LGw9Wy4uLnMuZG9tTGlzdGVuZXJzXTtzLmRvbUxpc3RlbmVycy5mb3JFYWNoKHM9PntzLnNjb3BlPT09ZSYmdC5yZW1vdmUobCxzKX0pLHMuZG9tTGlzdGVuZXJzPWx9c2VsZWN0KGUscz10aGlzLml0ZW1zLGwpe0FycmF5LmlzQXJyYXkoZSl8fChlPVtlXSk7bGV0IGk9dGhpcyx7dmlldzpyfT1pLG89ZS5tYXAoZT0+e2lmKGUuaXNSZWNvcmQpcmV0dXJuIGU7Y29uc3QgdD1yLmdldEl0ZW1SZWNvcmRJZD8uKGUpO3JldHVybiB0JiZyLnN0b3JlPy5nZXQodCl8fGV9KTtlPWUubWFwKGU9PmUuaXNSZWNvcmQ/ci5nZXRJdGVtSWQoZSk6TmVvLmlzT2JqZWN0KGUpP2UuaWQ6ZSksTmVvLmlzRXF1YWwocyxlKT9pLmZpcmUoXCJub0NoYW5nZVwiKTooaS5zaW5nbGVTZWxlY3QmJnM9PT1pLml0ZW1zJiZpLmRlc2VsZWN0QWxsKCEwLHMpLGUuZm9yRWFjaChlPT57KGU9ci5nZXRWZG9tQ2hpbGQoZSkpJiYoZS5jbHM9dC5hZGQoZS5jbHN8fFtdLGx8fGkuc2VsZWN0ZWRDbHMpLGVbXCJhcmlhLXNlbGVjdGVkXCJdPSEwKX0pLHQuYWRkKHMsZSksci5zaWxlbnRTZWxlY3R8fHIudXBkYXRlKCksci5wYXJlbnQ/Lm9uU2VsZWN0Py4oZSksci5vblNlbGVjdD8uKGUpLHIuZmlyZShcInNlbGVjdFwiLHtyZWNvcmRzOm8sc2VsZWN0aW9uOnN9KSxpLmZpcmUoXCJzZWxlY3Rpb25DaGFuZ2VcIix7cmVjb3JkczpvLHNlbGVjdGlvbjpzfSkpfXRvZ2dsZVNlbGVjdGlvbihlKXtsZXQgdD10aGlzO3QuaXNTZWxlY3RlZChlKT90LmRlc2VsZWN0KGUpOnQuc2VsZWN0KGUpfXRvSlNPTigpe2NvbnN0IGU9dGhpcyx0PShlLml0ZW1zfHxbXSkubWFwKGU9Pk5lby5pc1JlY29yZChlKT9lLnRvSlNPTigpOmUpO3JldHVybnsuLi5zdXBlci50b0pTT04oKSxpdGVtczp0LHNlbGVjdGVkQ2xzOmUuc2VsZWN0ZWRDbHMsc2luZ2xlU2VsZWN0OmUuc2luZ2xlU2VsZWN0fX11bnJlZ2lzdGVyKCl7bGV0IGU9dGhpcyx7dmlldzpzfT1lO2lmKCFzLmlzRGVzdHJveWluZyl7bGV0IGw9cy53cmFwcGVyQ2xzfHxbXTtlLmNscyYmbC5pbmNsdWRlcyhlLmNscykmJih0LnJlbW92ZShsLGUuY2xzKSxzLndyYXBwZXJDbHM9bCksZS5kZXNlbGVjdEFsbCgpLGUucmVtb3ZlRG9tTGlzdGVuZXJzKCl9fX0pOyIsImltcG9ydCBlIGZyb21cIi4uL0xpc3RNb2RlbC5tanNcIjtleHBvcnQgZGVmYXVsdCBOZW8uc2V0dXBDbGFzcyhjbGFzcyBleHRlbmRzIGV7c3RhdGljIGNvbmZpZz17Y2xhc3NOYW1lOlwiTmVvLnNlbGVjdGlvbi5tZW51Lkxpc3RNb2RlbFwiLG50eXBlOlwic2VsZWN0aW9uLW1lbnUtbGlzdG1vZGVsXCJ9O29uS2V5RG93bkVzY2FwZShlKXt0aGlzLnZpZXcub25LZXlEb3duRXNjYXBlKGUpfW9uS2V5RG93bkxlZnQoZSl7bGV0e3ZpZXc6dH09dGhpcyx7cGFyZW50TWVudTpzfT10O3MmJih0LmhpZGVTdWJNZW51KCksdC5zZWxlY3Rpb25Nb2RlbC5kZXNlbGVjdEFsbCgpLHMuc2VsZWN0aW9uTW9kZWwuc2VsZWN0QXQodC5wYXJlbnRJbmRleCkpfW9uS2V5RG93blJpZ2h0KGUpe3RoaXMudmlldy5hY3RpdmVTdWJNZW51Py5zZWxlY3Rpb25Nb2RlbC5zZWxlY3RBdCgwKX19KTsiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9