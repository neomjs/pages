"use strict";
(self["webpackChunkneo_mjs"] = self["webpackChunkneo_mjs"] || []).push([["vendors-dist_esm_src_data_Store_mjs"],{

/***/ "./dist/esm/src/data/Model.mjs"
/*!*************************************!*\
  !*** ./dist/esm/src/data/Model.mjs ***!
  \*************************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _core_Base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/Base.mjs */ "./dist/esm/src/core/Base.mjs");
/* harmony import */ var _RecordFactory_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./RecordFactory.mjs */ "./dist/esm/src/data/RecordFactory.mjs");
/* harmony import */ var _core_ConfigSymbols_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/ConfigSymbols.mjs */ "./dist/esm/src/core/ConfigSymbols.mjs");
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(class extends _core_Base_mjs__WEBPACK_IMPORTED_MODULE_0__["default"]{static config={className:"Neo.data.Model",ntype:"model",fields_:{[_core_ConfigSymbols_mjs__WEBPACK_IMPORTED_MODULE_2__.isDescriptor]:!0,merge:"deepArrays",value:null},keyProperty_:"id",storeId:null,trackModifiedFields:!1};calculatedFieldsMap=new Map;fieldsMap=new Map;hasNestedFields=!1;afterSetFields(e,t){if(e){let t=this;t.updateFieldsMap(e),t.isConstructed&&_RecordFactory_mjs__WEBPACK_IMPORTED_MODULE_1__["default"].createRecordClass(t,!0)}}getField(e){return this.fieldsMap.get(e)||null}getFieldType(e){return this.getField(e)?.type?.toLowerCase()||null}toJSON(){let e=this;return{...super.toJSON(),fields:e.serializeConfig(e.fields),keyProperty:e.keyProperty,storeId:e.storeId,trackModifiedFields:e.trackModifiedFields}}updateFieldsMap(e,s=!0,t=""){let l,d=this,{calculatedFieldsMap:a,fieldsMap:i}=d;s&&(a.clear(),i.clear(),d.hasNestedFields=!1),e.forEach(e=>{l=t+e.name,e.fields?(d.hasNestedFields=!0,d.updateFieldsMap(e.fields,!1,e.name+".")):(i.set(l,e),e.calculate&&a.set(l,e))})}}));

/***/ },

/***/ "./dist/esm/src/data/RecordFactory.mjs"
/*!*********************************************!*\
  !*** ./dist/esm/src/data/RecordFactory.mjs ***!
  \*********************************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _core_Base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/Base.mjs */ "./dist/esm/src/core/Base.mjs");
/* harmony import */ var _Model_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Model.mjs */ "./dist/esm/src/data/Model.mjs");
const l=Symbol.for("data"),i=Symbol.for("initialIndex"),s=Symbol.for("isModified"),a=Symbol.for("originalData");let r;r=Neo.setupClass(class extends _core_Base_mjs__WEBPACK_IMPORTED_MODULE_0__["default"]{static config={className:"Neo.data.RecordFactory",recordNamespace:"Neo.data.record",singleton:!0};assignDefaultValues(e,t){return t.fieldsMap.forEach((l,i)=>{if(Object.hasOwn(l,"defaultValue")){const s=Neo.isFunction(l.defaultValue)?l.defaultValue():l.defaultValue;t.hasNestedFields?Neo.assignToNs(i,s,e,!1):void 0===e[i]&&(e[i]=s)}}),e}createField({field:e,model:t,path:i="",proto:s}){let a,o=e.name,d=""===i?o:`${i}.${o}`;e.fields?e.fields.forEach(e=>{this.createField({field:e,model:t,path:d,proto:s})}):(a={[d]:{configurable:!0,enumerable:!0,get(){return t.hasNestedFields?Neo.ns(d,!1,this[l]):this[l][o]},set(l){this.notifyChange({fields:{[d]:r.parseRecordValue({record:this,field:e,value:l})},model:t,record:this})}}},Object.defineProperties(s,a))}createRecord(e,t){let l=Neo.ns(`${this.recordNamespace}.${e.className}.${e.id}`);return l||(l=this.createRecordClass(e)),new l(t)}createRecordClass(e,o=!1){if(e instanceof _Model_mjs__WEBPACK_IMPORTED_MODULE_1__["default"]){let t,d,n,c=`${this.recordNamespace}.${e.className}.${e.id}`,u=Neo.ns(c);return!u||o?(d=c.split("."),t=d.pop(),u=Neo.ns(d,!0),n=u[t]=class{static name="Record";[l]={};[i]=null;get isModified(){let t=this;return e.trackModifiedFields?!Neo.isEqual(t[l],t[a]):t[s]}constructor(t){let l=this;Object.hasOwn(t,i)&&(l[i]=t[i],delete t[i]),t=r.assignDefaultValues(t,e),e.trackModifiedFields?(l[a]={},l.setOriginal(t)):l[s]=!1,l.setSilent(t)}isModifiedField(t){let i=this;if(e.trackModifiedFields){let s,r;if(e.hasNestedFields&&t?.includes(".")){let e=t.split(".");t=e.pop(),s=Neo.ns(e,!1,i[l]),r=Neo.ns(e,!1,i[a])}else s=i[l],r=i[a];return e.getField(t)||Object.hasOwn(s,t)||console.error("The record does not contain the field",t,i),!Neo.isEqual(s[t],r[t])}return null}notifyChange(e,t=!1){const l={...e,silent:t};return r.setRecordFields(l),l}reset(e){this.setOriginal(e),this.set(e)}set(t){this.notifyChange({fields:t,model:e,record:this})}setOriginal(t){r.setRecordFields({fields:t,model:e,record:this,silent:!0,useOriginalData:!0})}setSilent(t){this.notifyChange({fields:t,model:e,record:this},!0)}toJSON(){return structuredClone(this[l])}},Array.isArray(e.fields)&&e.fields.forEach(t=>{r.createField({field:t,model:e,proto:n.prototype})}),Object.defineProperty(n.prototype,"isRecord",{value:!0}),Object.defineProperty(n,"isClass",{value:!0}),u[t]):u}}isRecord(e){return e?.isRecord||!1}onRecordChange(e){Neo.get(e.model.storeId)?.onRecordChange(e)}parseRecordValue({record:e,field:t,value:i=null,recordConfig:s=null,useOriginalData:r=!1}){if(t.calculate)return t.calculate(e[r?a:l],t);t.convert&&(i=t.convert(i,e));let o=t.name,{mapping:d,maxLength:n,minLength:c,nullable:u}=t,f=s?.[o]||e[o],h=t.type?.toLowerCase();if(d&&s){let e=d.split("."),t=e.pop();e=Neo.ns(e,!0,s),i=e[t]}return Object.hasOwn(t,"maxLength")&&i?.toString().length>n?(console.warn(`Setting record field: ${o} value: ${i} conflicts with maxLength: ${n}`),f):Object.hasOwn(t,"minLength")&&i?.toString().length<c?(console.warn(`Setting record field: ${o} value: ${i} conflicts with minLength: ${c}`),f):Object.hasOwn(t,"nullable")&&!1===u&&null===i?(console.warn(`Setting record field: ${o} value: ${i} conflicts with nullable: ${u}`),f):"date"===h&&"Date"!==Neo.typeOf(i)?new Date(i):("float"===h&&i?i=parseFloat(i):"html"===h&&i?i+="":"int"!==h&&"integer"!==h||!i?"string"===h&&i&&(i=(i+="").replace(/(<([^>]+)>)/gi,"")):i=parseInt(i),i)}setRecordData({fieldName:e,model:t,record:i,useOriginalData:s=!1,value:r}){if(s&&!t.trackModifiedFields)return;let o=s?a:l;if(t.hasNestedFields&&e.includes(".")){let t,l;l=e.split("."),e=l.pop(),t=Neo.ns(l,!0,i[o]),t[e]=r}else i[o][e]=r}setRecordFields({changedFields:e=[],fields:t,model:l,record:i,silent:a=!1,useOriginalData:r=!1}){let o,d,n,c=this,{calculatedFieldsMap:u,fieldsMap:f,trackModifiedFields:h}=l;!h&&r||(Object.entries(t).forEach(([t,a])=>{o=f.has(t),Neo.isObject(a)&&!o?Object.entries(a).forEach(([s,a])=>{c.setRecordFields({changedFields:e,fields:{[`${t}.${s}`]:a},model:l,record:i,silent:!0,useOriginalData:r})}):o&&(n=i[t],a=c.parseRecordValue({record:i,field:l.getField(t),value:a}),Neo.isEqual(n,a)||(c.setRecordData({fieldName:t,model:l,record:i,useOriginalData:r,value:a}),h||r||(i[s]=!0),e.push({name:t,oldValue:n,value:a})))}),d=Object.keys(e).length>0,d&&u.forEach((t,s)=>{n=i[s],t=c.parseRecordValue({record:i,field:l.getField(s),useOriginalData:r}),Neo.isEqual(n,t)||(c.setRecordData({fieldName:s,model:l,record:i,useOriginalData:r,value:t}),e.push({name:s,oldValue:n,value:t}))}),a||r||!d||c.onRecordChange({fields:e,model:l,record:i}))}});/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (r);

/***/ },

/***/ "./dist/esm/src/data/Store.mjs"
/*!*************************************!*\
  !*** ./dist/esm/src/data/Store.mjs ***!
  \*************************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _util_ClassSystem_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../util/ClassSystem.mjs */ "./dist/esm/src/util/ClassSystem.mjs");
/* harmony import */ var _collection_Base_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../collection/Base.mjs */ "./dist/esm/src/collection/Base.mjs");
/* harmony import */ var _Model_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Model.mjs */ "./dist/esm/src/data/Model.mjs");
/* harmony import */ var _core_Observable_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/Observable.mjs */ "./dist/esm/src/core/Observable.mjs");
/* harmony import */ var _RecordFactory_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./RecordFactory.mjs */ "./dist/esm/src/data/RecordFactory.mjs");
/* harmony import */ var _manager_Store_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../manager/Store.mjs */ "./dist/esm/src/manager/Store.mjs");
const a=Symbol.for("initialIndex");/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(class extends _collection_Base_mjs__WEBPACK_IMPORTED_MODULE_1__["default"]{static observable=!0;static config={className:"Neo.data.Store",ntype:"store",api_:null,autoInitRecords:!0,autoLoad:!1,currentPage_:1,data_:null,initialChunkSize:0,isGrouped:!1,isLoaded:!1,isLoading:!1,model_:null,pageSize_:0,remoteFilter:!1,remoteSort:!1,responseRoot:"data",totalCount:0,url:null};construct(e){super.construct(e);let t=this;t.on({mutate:t.onCollectionMutate,sort:t.onCollectionSort,scope:t}),_manager_Store_mjs__WEBPACK_IMPORTED_MODULE_5__["default"].register(t)}destroy(){_manager_Store_mjs__WEBPACK_IMPORTED_MODULE_5__["default"].unregister(this),super.destroy()}add(e,t=this.autoInitRecords){let r=this,o=Array.isArray(e)?e:[e],s=r.initialChunkSize;if(t)return super.add(o),r.isLoaded=!0,o.map(e=>r.get(e[r.getKeyProperty()]));if(s>0&&o.length>s){const e=r.count+o.length,t=o.splice(0,s);return r.chunkingTotal=e,super.add(t),r.suspendEvents=!0,super.add(o),r.suspendEvents=!1,r.fire("load",{items:r.items,postChunkLoad:!0,total:r.chunkingTotal}),delete r.chunkingTotal,r.count}const i=super.add(o);return r.isLoaded=!0,i}afterSetCurrentPage(e,t){t&&this.load()}afterSetData(e,t){let r=this;r.configsApplied&&e&&(t&&r.clear(),r.isLoading=!1,r.add(e,r.autoInitRecords))}afterSetFilters(e,t){super.afterSetFilters(e,t);let r=this;r._currentPage=1,t&&r.remoteFilter&&r.load()}afterSetModel(e,t){e&&(e.storeId=this.id)}afterSetPageSize(e,t){t&&(this._currentPage=1,this.load())}afterSetSorters(e,t){super.afterSetSorters(e,t);let r=this;r._currentPage=1,t&&r.remoteSort&&r.load()}beforeSetApi(e,t){return"String"===Neo.typeOf(e)&&(e={create:e+".create",destroy:e+".destroy",read:e+".read",update:e+".update"}),e}beforeSetData(e,t){return e&&(this.isLoading=!0),e}beforeSetModel(t,o){return o?.destroy(),_util_ClassSystem_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].beforeSetInstance(t,_Model_mjs__WEBPACK_IMPORTED_MODULE_2__["default"])}createRecord(e){let t=!0;if(e){Array.isArray(e)||(t=!1,e=[e]);let r,o=this,i=0,a=e.length;for(;i<a;i++)r=e[i],_RecordFactory_mjs__WEBPACK_IMPORTED_MODULE_4__["default"].isRecord(r)||(e[i]=_RecordFactory_mjs__WEBPACK_IMPORTED_MODULE_4__["default"].createRecord(o.model,r))}return t?e:e[0]}find(e,t,r=!1){const o=super.find(e,t,r);return r?o?this.get(o[this.keyProperty]):null:o.map(e=>this.get(e[this.keyProperty]))}findBy(e,t=this,r=0,o=this.count){return super.findBy(e,t,r,o).map(e=>this.get(e[this.keyProperty]))}forEach(e,t){const r=this;for(let o=0;o<r.count;o++)e.call(t||r,r.getAt(o),o,r.items)}get(e){let t=this,r=super.get(e);if(r&&!_RecordFactory_mjs__WEBPACK_IMPORTED_MODULE_4__["default"].isRecord(r)){const o=_RecordFactory_mjs__WEBPACK_IMPORTED_MODULE_4__["default"].createRecord(t.model,r),i=t.indexOf(r);if(t.map.set(e,o),-1!==i&&(t._items[i]=o),t.allItems){const s=t.allItems.indexOf(r);-1!==s&&(t.allItems.map.set(e,o),t.allItems._items[s]=o)}return o}return r}getAt(e){let t=this,r=super.getAt(e);if(r&&!_RecordFactory_mjs__WEBPACK_IMPORTED_MODULE_4__["default"].isRecord(r)){const o=_RecordFactory_mjs__WEBPACK_IMPORTED_MODULE_4__["default"].createRecord(t.model,r);if(t.map.set(o[t.keyProperty],o),t._items[e]=o,t.allItems){const e=t.allItems.indexOf(r);-1!==e&&(t.allItems.map.set(o[t.keyProperty],o),t.allItems._items[e]=o)}return o}return r}getKeyProperty(){return this.keyProperty||this.model.keyProperty}getKeyType(){let{model:e}=this,t=e?.getField(this.getKeyProperty());return t?.type?.toLowerCase()||null}initRecord(e){return _RecordFactory_mjs__WEBPACK_IMPORTED_MODULE_4__["default"].isRecord(e)?e:this.get(e[this.getKeyProperty()])}insert(e,t,r=this.autoInitRecords){let o=this,s=super.insert(e,t);return r?s.map(e=>o.get(e[o.getKeyProperty()])):s}async load(e={}){let t=this,r={page:t.currentPage,pageSize:t.pageSize,...e.params};if(t.remoteFilter&&(r.filters=t.exportFilters()),t.remoteSort&&(r.sorters=t.exportSorters()),t.api){let e=t.api.read.split("."),o=e.pop(),s=Neo.ns(e.join("."));if(s){const e=await s[o](r);return e.success?(t.totalCount=e.totalCount,t.data=Neo.ns(t.responseRoot,!1,e),t.isLoaded=!0,t.data):null}console.error("Api is not defined",this)}else{e.url??=t.url;try{let r;if(globalThis.process?.release){const{readFile:t}=await Promise.resolve().then(function webpackMissingModule() { var e = new Error("Cannot find module 'fs/promises'"); e.code = 'MODULE_NOT_FOUND'; throw e; }),o=await t(e.url,"utf-8");r={json:JSON.parse(o)}}else r=await Neo.Xhr.promiseJson(e);return r&&(t.data=Neo.ns(t.responseRoot,!1,r.json)||r.json),t.isLoaded=!0,r?.json||null}catch(r){return console.error("Error for Neo.Xhr.request",{id:t.id,error:r,url:e.url}),null}}}onCollectionMutate(e){let t=this;t.isConstructed&&!t.isLoading&&t.fire("load",{items:t.items,total:t.chunkingTotal})}onCollectionSort(){let e=this;e.isConstructed&&e.fire("load",{items:e.items})}onConstructed(){super.onConstructed();let e=this;e.data&&e.afterSetData(e.data),Promise.resolve().then(()=>{e.isLoaded?e.fire("load",{items:e.items}):e.autoLoad&&e.load()})}onFilterChange(e){let t=this;t.remoteFilter?(t._currentPage=1,t.load()):super.onFilterChange(e)}onRecordChange(e){this.fire("recordChange",{...e,index:this.indexOf(e.record)})}sort(e={}){let t=this;t._currentPage=1,t.configsApplied&&(e.direction?t.sorters=[{direction:e.direction,property:e.property}]:t.remoteSort||(t.sorters=[{direction:"ASC",property:a}]))}toJSON(){let e=this;return{...super.toJSON(),autoInitRecords:e.autoInitRecords,autoLoad:e.autoLoad,currentPage:e.currentPage,initialChunkSize:e.initialChunkSize,isGrouped:e.isGrouped,isLoaded:e.isLoaded,isLoading:e.isLoading,model:e.model?.toJSON(),pageSize:e.pageSize,remoteFilter:e.remoteFilter,remoteSort:e.remoteSort,totalCount:e.totalCount,url:e.url}}}));

/***/ },

/***/ "./dist/esm/src/manager/Store.mjs"
/*!****************************************!*\
  !*** ./dist/esm/src/manager/Store.mjs ***!
  \****************************************/
(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _Base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Base.mjs */ "./dist/esm/src/manager/Base.mjs");
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(class extends _Base_mjs__WEBPACK_IMPORTED_MODULE_0__["default"]{static config={className:"Neo.manager.Store",singleton:!0};construct(s){super.construct(s)}}));

/***/ }

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2h1bmtzL2FwcC92ZW5kb3JzLWRpc3RfZXNtX3NyY19kYXRhX1N0b3JlX21qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQTRILGlFQUFlLDZCQUE2QixzREFBQyxDQUFDLGVBQWUsa0RBQWtELENBQUMsaUVBQUMsbUNBQW1DLHdEQUF3RCw0QkFBNEIsa0JBQWtCLG1CQUFtQixvQkFBb0IsTUFBTSxXQUFXLHNDQUFzQywwREFBQywwQkFBMEIsWUFBWSxtQ0FBbUMsZ0JBQWdCLG1EQUFtRCxTQUFTLFdBQVcsT0FBTyw0SUFBNEksNkJBQTZCLGNBQWMsa0NBQWtDLEdBQUcsNERBQTRELDBIQUEwSCxHQUFHLENBQUMsRTs7Ozs7Ozs7Ozs7Ozs7OztBQ0F2OUIsZ0hBQWdILE1BQU0sK0JBQStCLHNEQUFDLENBQUMsZUFBZSxtRkFBbUYseUJBQXlCLG1DQUFtQyxvQ0FBb0MsdUVBQXVFLG9FQUFvRSxJQUFJLGFBQWEsa0NBQWtDLEVBQUUsNkJBQTZCLEVBQUUsR0FBRyxFQUFFLEVBQUUsOEJBQThCLGtCQUFrQiwrQkFBK0IsRUFBRSxNQUFNLEtBQUssb0NBQW9DLHlEQUF5RCxRQUFRLG1CQUFtQixRQUFRLHdCQUF3Qiw0QkFBNEIsRUFBRSxxQkFBcUIsSUFBSSwrQkFBK0Isa0JBQWtCLGdCQUFnQixxQkFBcUIsR0FBRyxZQUFZLEdBQUcsS0FBSyxHQUFHLGlEQUFpRCwwQkFBMEIsZ0JBQWdCLGtEQUFDLEVBQUUsZUFBZSxxQkFBcUIsR0FBRyxZQUFZLEdBQUcsS0FBSyxjQUFjLGtFQUFrRSxxQkFBcUIsT0FBTyxTQUFTLGlCQUFpQixXQUFXLDBEQUEwRCxlQUFlLFdBQVcsdUdBQXVHLDBDQUEwQyxtQkFBbUIsV0FBVywwQkFBMEIsUUFBUSx3Q0FBd0MsbUJBQW1CLGtEQUFrRCxtQkFBbUIsNkhBQTZILFlBQVkscUJBQXFCLFNBQVMsZUFBZSw4QkFBOEIsU0FBUyxnQ0FBZ0MsT0FBTyxtQkFBbUIsNkJBQTZCLEVBQUUsZUFBZSxtQkFBbUIsMERBQTBE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QUE2QixpREFBQyxDQUFDLGVBQWUsNENBQTRDLGFBQWEsb0JBQW9CLENBQUMsRSIsInNvdXJjZXMiOlsid2VicGFjazovL25lby5tanMvLi9kaXN0L2VzbS9zcmMvZGF0YS9Nb2RlbC5tanMiLCJ3ZWJwYWNrOi8vbmVvLm1qcy8uL2Rpc3QvZXNtL3NyYy9kYXRhL1JlY29yZEZhY3RvcnkubWpzIiwid2VicGFjazovL25lby5tanMvLi9kaXN0L2VzbS9zcmMvZGF0YS9TdG9yZS5tanMiLCJ3ZWJwYWNrOi8vbmVvLm1qcy8uL2Rpc3QvZXNtL3NyYy9tYW5hZ2VyL1N0b3JlLm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZSBmcm9tXCIuLi9jb3JlL0Jhc2UubWpzXCI7aW1wb3J0IHMgZnJvbVwiLi9SZWNvcmRGYWN0b3J5Lm1qc1wiO2ltcG9ydHtpc0Rlc2NyaXB0b3IgYXMgdH1mcm9tXCIuLi9jb3JlL0NvbmZpZ1N5bWJvbHMubWpzXCI7ZXhwb3J0IGRlZmF1bHQgTmVvLnNldHVwQ2xhc3MoY2xhc3MgZXh0ZW5kcyBle3N0YXRpYyBjb25maWc9e2NsYXNzTmFtZTpcIk5lby5kYXRhLk1vZGVsXCIsbnR5cGU6XCJtb2RlbFwiLGZpZWxkc186e1t0XTohMCxtZXJnZTpcImRlZXBBcnJheXNcIix2YWx1ZTpudWxsfSxrZXlQcm9wZXJ0eV86XCJpZFwiLHN0b3JlSWQ6bnVsbCx0cmFja01vZGlmaWVkRmllbGRzOiExfTtjYWxjdWxhdGVkRmllbGRzTWFwPW5ldyBNYXA7ZmllbGRzTWFwPW5ldyBNYXA7aGFzTmVzdGVkRmllbGRzPSExO2FmdGVyU2V0RmllbGRzKGUsdCl7aWYoZSl7bGV0IHQ9dGhpczt0LnVwZGF0ZUZpZWxkc01hcChlKSx0LmlzQ29uc3RydWN0ZWQmJnMuY3JlYXRlUmVjb3JkQ2xhc3ModCwhMCl9fWdldEZpZWxkKGUpe3JldHVybiB0aGlzLmZpZWxkc01hcC5nZXQoZSl8fG51bGx9Z2V0RmllbGRUeXBlKGUpe3JldHVybiB0aGlzLmdldEZpZWxkKGUpPy50eXBlPy50b0xvd2VyQ2FzZSgpfHxudWxsfXRvSlNPTigpe2xldCBlPXRoaXM7cmV0dXJuey4uLnN1cGVyLnRvSlNPTigpLGZpZWxkczplLnNlcmlhbGl6ZUNvbmZpZyhlLmZpZWxkcyksa2V5UHJvcGVydHk6ZS5rZXlQcm9wZXJ0eSxzdG9yZUlkOmUuc3RvcmVJZCx0cmFja01vZGlmaWVkRmllbGRzOmUudHJhY2tNb2RpZmllZEZpZWxkc319dXBkYXRlRmllbGRzTWFwKGUscz0hMCx0PVwiXCIpe2xldCBsLGQ9dGhpcyx7Y2FsY3VsYXRlZEZpZWxkc01hcDphLGZpZWxkc01hcDppfT1kO3MmJihhLmNsZWFyKCksaS5jbGVhcigpLGQuaGFzTmVzdGVkRmllbGRzPSExKSxlLmZvckVhY2goZT0+e2w9dCtlLm5hbWUsZS5maWVsZHM/KGQuaGFzTmVzdGVkRmllbGRzPSEwLGQudXBkYXRlRmllbGRzTWFwKGUuZmllbGRzLCExLGUubmFtZStcIi5cIikpOihpLnNldChsLGUpLGUuY2FsY3VsYXRlJiZhLnNldChsLGUpKX0pfX0pOyIsImltcG9ydCBlIGZyb21cIi4uL2NvcmUvQmFzZS5tanNcIjtpbXBvcnQgdCBmcm9tXCIuL01vZGVsLm1qc1wiO2NvbnN0IGw9U3ltYm9sLmZvcihcImRhdGFcIiksaT1TeW1ib2wuZm9yKFwiaW5pdGlhbEluZGV4XCIpLHM9U3ltYm9sLmZvcihcImlzTW9kaWZpZWRcIiksYT1TeW1ib2wuZm9yKFwib3JpZ2luYWxEYXRhXCIpO2xldCByO3I9TmVvLnNldHVwQ2xhc3MoY2xhc3MgZXh0ZW5kcyBle3N0YXRpYyBjb25maWc9e2NsYXNzTmFtZTpcIk5lby5kYXRhLlJlY29yZEZhY3RvcnlcIixyZWNvcmROYW1lc3BhY2U6XCJOZW8uZGF0YS5yZWNvcmRcIixzaW5nbGV0b246ITB9O2Fzc2lnbkRlZmF1bHRWYWx1ZXMoZSx0KXtyZXR1cm4gdC5maWVsZHNNYXAuZm9yRWFjaCgobCxpKT0+e2lmKE9iamVjdC5oYXNPd24obCxcImRlZmF1bHRWYWx1ZVwiKSl7Y29uc3Qgcz1OZW8uaXNGdW5jdGlvbihsLmRlZmF1bHRWYWx1ZSk/bC5kZWZhdWx0VmFsdWUoKTpsLmRlZmF1bHRWYWx1ZTt0Lmhhc05lc3RlZEZpZWxkcz9OZW8uYXNzaWduVG9OcyhpLHMsZSwhMSk6dm9pZCAwPT09ZVtpXSYmKGVbaV09cyl9fSksZX1jcmVhdGVGaWVsZCh7ZmllbGQ6ZSxtb2RlbDp0LHBhdGg6aT1cIlwiLHByb3RvOnN9KXtsZXQgYSxvPWUubmFtZSxkPVwiXCI9PT1pP286YCR7aX0uJHtvfWA7ZS5maWVsZHM/ZS5maWVsZHMuZm9yRWFjaChlPT57dGhpcy5jcmVhdGVGaWVsZCh7ZmllbGQ6ZSxtb2RlbDp0LHBhdGg6ZCxwcm90bzpzfSl9KTooYT17W2RdOntjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMCxnZXQoKXtyZXR1cm4gdC5oYXNOZXN0ZWRGaWVsZHM/TmVvLm5zKGQsITEsdGhpc1tsXSk6dGhpc1tsXVtvXX0sc2V0KGwpe3RoaXMubm90aWZ5Q2hhbmdlKHtmaWVsZHM6e1tkXTpyLnBhcnNlUmVjb3JkVmFsdWUoe3JlY29yZDp0aGlzLGZpZWxkOmUsdmFsdWU6bH0pfSxtb2RlbDp0LHJlY29yZDp0aGlzfSl9fX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMocyxhKSl9Y3JlYXRlUmVjb3JkKGUsdCl7bGV0IGw9TmVvLm5zKGAke3RoaXMucmVjb3JkTmFtZXNwYWNlfS4ke2UuY2xhc3NOYW1lfS4ke2UuaWR9YCk7cmV0dXJuIGx8fChsPXRoaXMuY3JlYXRlUmVjb3JkQ2xhc3MoZSkpLG5ldyBsKHQpfWNyZWF0ZVJlY29yZENsYXNzKGUsbz0hMSl7aWYoZSBpbnN0YW5jZW9mIHQpe2xldCB0LGQsbixjPWAke3RoaXMucmVjb3JkTmFtZXNwYWNlfS4ke2UuY2xhc3NOYW1lfS4ke2UuaWR9YCx1PU5lby5ucyhjKTtyZXR1cm4hdXx8bz8oZD1jLnNwbGl0KFwiLlwiKSx0PWQucG9wKCksdT1OZW8ubnMoZCwhMCksbj11W3RdPWNsYXNze3N0YXRpYyBuYW1lPVwiUmVjb3JkXCI7W2xdPXt9O1tpXT1udWxsO2dldCBpc01vZGlmaWVkKCl7bGV0IHQ9dGhpcztyZXR1cm4gZS50cmFja01vZGlmaWVkRmllbGRzPyFOZW8uaXNFcXVhbCh0W2xdLHRbYV0pOnRbc119Y29uc3RydWN0b3IodCl7bGV0IGw9dGhpcztPYmplY3QuaGFzT3duKHQsaSkmJihsW2ldPXRbaV0sZGVsZXRlIHRbaV0pLHQ9ci5hc3NpZ25EZWZhdWx0VmFsdWVzKHQsZSksZS50cmFja01vZGlmaWVkRmllbGRzPyhsW2FdPXt9LGwuc2V0T3JpZ2luYWwodCkpOmxbc109ITEsbC5zZXRTaWxlbnQodCl9aXNNb2RpZmllZEZpZWxkKHQpe2xldCBpPXRoaXM7aWYoZS50cmFja01vZGlmaWVkRmllbGRzKXtsZXQgcyxyO2lmKGUuaGFzTmVzdGVkRmllbGRzJiZ0Py5pbmNsdWRlcyhcIi5cIikpe2xldCBlPXQuc3BsaXQoXCIuXCIpO3Q9ZS5wb3AoKSxzPU5lby5ucyhlLCExLGlbbF0pLHI9TmVvLm5zKGUsITEsaVthXSl9ZWxzZSBzPWlbbF0scj1pW2FdO3JldHVybiBlLmdldEZpZWxkKHQpfHxPYmplY3QuaGFzT3duKHMsdCl8fGNvbnNvbGUuZXJyb3IoXCJUaGUgcmVjb3JkIGRvZXMgbm90IGNvbnRhaW4gdGhlIGZpZWxkXCIsdCxpKSwhTmVvLmlzRXF1YWwoc1t0XSxyW3RdKX1yZXR1cm4gbnVsbH1ub3RpZnlDaGFuZ2UoZSx0PSExKXtjb25zdCBsPXsuLi5lLHNpbGVudDp0fTtyZXR1cm4gci5zZXRSZWNvcmRGaWVsZHMobCksbH1yZXNldChlKXt0aGlzLnNldE9yaWdpbmFsKGUpLHRoaXMuc2V0KGUpfXNldCh0KXt0aGlzLm5vdGlmeUNoYW5nZSh7ZmllbGRzOnQsbW9kZWw6ZSxyZWNvcmQ6dGhpc30pfXNldE9yaWdpbmFsKHQpe3Iuc2V0UmVjb3JkRmllbGRzKHtmaWVsZHM6dCxtb2RlbDplLHJlY29yZDp0aGlzLHNpbGVudDohMCx1c2VPcmlnaW5hbERhdGE6ITB9KX1zZXRTaWxlbnQodCl7dGhpcy5ub3RpZnlDaGFuZ2Uoe2ZpZWxkczp0LG1vZGVsOmUscmVjb3JkOnRoaXN9LCEwKX10b0pTT04oKXtyZXR1cm4gc3RydWN0dXJlZENsb25lKHRoaXNbbF0pfX0sQXJyYXkuaXNBcnJheShlLmZpZWxkcykmJmUuZmllbGRzLmZvckVhY2godD0+e3IuY3JlYXRlRmllbGQoe2ZpZWxkOnQsbW9kZWw6ZSxwcm90bzpuLnByb3RvdHlwZX0pfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KG4ucHJvdG90eXBlLFwiaXNSZWNvcmRcIix7dmFsdWU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkobixcImlzQ2xhc3NcIix7dmFsdWU6ITB9KSx1W3RdKTp1fX1pc1JlY29yZChlKXtyZXR1cm4gZT8uaXNSZWNvcmR8fCExfW9uUmVjb3JkQ2hhbmdlKGUpe05lby5nZXQoZS5tb2RlbC5zdG9yZUlkKT8ub25SZWNvcmRDaGFuZ2UoZSl9cGFyc2VSZWNvcmRWYWx1ZSh7cmVjb3JkOmUsZmllbGQ6dCx2YWx1ZTppPW51bGwscmVjb3JkQ29uZmlnOnM9bnVsbCx1c2VPcmlnaW5hbERhdGE6cj0hMX0pe2lmKHQuY2FsY3VsYXRlKXJldHVybiB0LmNhbGN1bGF0ZShlW3I/YTpsXSx0KTt0LmNvbnZlcnQmJihpPXQuY29udmVydChpLGUpKTtsZXQgbz10Lm5hbWUse21hcHBpbmc6ZCxtYXhMZW5ndGg6bixtaW5MZW5ndGg6YyxudWxsYWJsZTp1fT10LGY9cz8uW29dfHxlW29dLGg9dC50eXBlPy50b0xvd2VyQ2FzZSgpO2lmKGQmJnMpe2xldCBlPWQuc3BsaXQoXCIuXCIpLHQ9ZS5wb3AoKTtlPU5lby5ucyhlLCEwLHMpLGk9ZVt0XX1yZXR1cm4gT2JqZWN0Lmhhc093bih0LFwibWF4TGVuZ3RoXCIpJiZpPy50b1N0cmluZygpLmxlbmd0aD5uPyhjb25zb2xlLndhcm4oYFNldHRpbmcgcmVjb3JkIGZpZWxkOiAke299IHZhbHVlOiAke2l9IGNvbmZsaWN0cyB3aXRoIG1heExlbmd0aDogJHtufWApLGYpOk9iamVjdC5oYXNPd24odCxcIm1pbkxlbmd0aFwiKSYmaT8udG9TdHJpbmcoKS5sZW5ndGg8Yz8oY29uc29sZS53YXJuKGBTZXR0aW5nIHJlY29yZCBmaWVsZDogJHtvfSB2YWx1ZTogJHtpfSBjb25mbGljdHMgd2l0aCBtaW5MZW5ndGg6ICR7Y31gKSxmKTpPYmplY3QuaGFzT3duKHQsXCJudWxsYWJsZVwiKSYmITE9PT11JiZudWxsPT09aT8oY29uc29sZS53YXJuKGBTZXR0aW5nIHJlY29yZCBmaWVsZDogJHtvfSB2YWx1ZTogJHtpfSBjb25mbGljdHMgd2l0aCBudWxsYWJsZTogJHt1fWApLGYpOlwiZGF0ZVwiPT09aCYmXCJEYXRlXCIhPT1OZW8udHlwZU9mKGkpP25ldyBEYXRlKGkpOihcImZsb2F0XCI9PT1oJiZpP2k9cGFyc2VGbG9hdChpKTpcImh0bWxcIj09PWgmJmk/aSs9XCJcIjpcImludFwiIT09aCYmXCJpbnRlZ2VyXCIhPT1ofHwhaT9cInN0cmluZ1wiPT09aCYmaSYmKGk9KGkrPVwiXCIpLnJlcGxhY2UoLyg8KFtePl0rKT4pL2dpLFwiXCIpKTppPXBhcnNlSW50KGkpLGkpfXNldFJlY29yZERhdGEoe2ZpZWxkTmFtZTplLG1vZGVsOnQscmVjb3JkOmksdXNlT3JpZ2luYWxEYXRhOnM9ITEsdmFsdWU6cn0pe2lmKHMmJiF0LnRyYWNrTW9kaWZpZWRGaWVsZHMpcmV0dXJuO2xldCBvPXM/YTpsO2lmKHQuaGFzTmVzdGVkRmllbGRzJiZlLmluY2x1ZGVzKFwiLlwiKSl7bGV0IHQsbDtsPWUuc3BsaXQoXCIuXCIpLGU9bC5wb3AoKSx0PU5lby5ucyhsLCEwLGlbb10pLHRbZV09cn1lbHNlIGlbb11bZV09cn1zZXRSZWNvcmRGaWVsZHMoe2NoYW5nZWRGaWVsZHM6ZT1bXSxmaWVsZHM6dCxtb2RlbDpsLHJlY29yZDppLHNpbGVudDphPSExLHVzZU9yaWdpbmFsRGF0YTpyPSExfSl7bGV0IG8sZCxuLGM9dGhpcyx7Y2FsY3VsYXRlZEZpZWxkc01hcDp1LGZpZWxkc01hcDpmLHRyYWNrTW9kaWZpZWRGaWVsZHM6aH09bDshaCYmcnx8KE9iamVjdC5lbnRyaWVzKHQpLmZvckVhY2goKFt0LGFdKT0+e289Zi5oYXModCksTmVvLmlzT2JqZWN0KGEpJiYhbz9PYmplY3QuZW50cmllcyhhKS5mb3JFYWNoKChbcyxhXSk9PntjLnNldFJlY29yZEZpZWxkcyh7Y2hhbmdlZEZpZWxkczplLGZpZWxkczp7W2Ake3R9LiR7c31gXTphfSxtb2RlbDpsLHJlY29yZDppLHNpbGVudDohMCx1c2VPcmlnaW5hbERhdGE6cn0pfSk6byYmKG49aVt0XSxhPWMucGFyc2VSZWNvcmRWYWx1ZSh7cmVjb3JkOmksZmllbGQ6bC5nZXRGaWVsZCh0KSx2YWx1ZTphfSksTmVvLmlzRXF1YWwobixhKXx8KGMuc2V0UmVjb3JkRGF0YSh7ZmllbGROYW1lOnQsbW9kZWw6bCxyZWNvcmQ6aSx1c2VPcmlnaW5hbERhdGE6cix2YWx1ZTphfSksaHx8cnx8KGlbc109ITApLGUucHVzaCh7bmFtZTp0LG9sZFZhbHVlOm4sdmFsdWU6YX0pKSl9KSxkPU9iamVjdC5rZXlzKGUpLmxlbmd0aD4wLGQmJnUuZm9yRWFjaCgodCxzKT0+e249aVtzXSx0PWMucGFyc2VSZWNvcmRWYWx1ZSh7cmVjb3JkOmksZmllbGQ6bC5nZXRGaWVsZChzKSx1c2VPcmlnaW5hbERhdGE6cn0pLE5lby5pc0VxdWFsKG4sdCl8fChjLnNldFJlY29yZERhdGEoe2ZpZWxkTmFtZTpzLG1vZGVsOmwscmVjb3JkOmksdXNlT3JpZ2luYWxEYXRhOnIsdmFsdWU6dH0pLGUucHVzaCh7bmFtZTpzLG9sZFZhbHVlOm4sdmFsdWU6dH0pKX0pLGF8fHJ8fCFkfHxjLm9uUmVjb3JkQ2hhbmdlKHtmaWVsZHM6ZSxtb2RlbDpsLHJlY29yZDppfSkpfX0pO2V4cG9ydCBkZWZhdWx0IHI7IiwiaW1wb3J0IGUgZnJvbVwiLi4vdXRpbC9DbGFzc1N5c3RlbS5tanNcIjtpbXBvcnQgdCBmcm9tXCIuLi9jb2xsZWN0aW9uL0Jhc2UubWpzXCI7aW1wb3J0IHIgZnJvbVwiLi9Nb2RlbC5tanNcIjtpbXBvcnQgbyBmcm9tXCIuLi9jb3JlL09ic2VydmFibGUubWpzXCI7aW1wb3J0IHMgZnJvbVwiLi9SZWNvcmRGYWN0b3J5Lm1qc1wiO2ltcG9ydCBpIGZyb21cIi4uL21hbmFnZXIvU3RvcmUubWpzXCI7Y29uc3QgYT1TeW1ib2wuZm9yKFwiaW5pdGlhbEluZGV4XCIpO2V4cG9ydCBkZWZhdWx0IE5lby5zZXR1cENsYXNzKGNsYXNzIGV4dGVuZHMgdHtzdGF0aWMgb2JzZXJ2YWJsZT0hMDtzdGF0aWMgY29uZmlnPXtjbGFzc05hbWU6XCJOZW8uZGF0YS5TdG9yZVwiLG50eXBlOlwic3RvcmVcIixhcGlfOm51bGwsYXV0b0luaXRSZWNvcmRzOiEwLGF1dG9Mb2FkOiExLGN1cnJlbnRQYWdlXzoxLGRhdGFfOm51bGwsaW5pdGlhbENodW5rU2l6ZTowLGlzR3JvdXBlZDohMSxpc0xvYWRlZDohMSxpc0xvYWRpbmc6ITEsbW9kZWxfOm51bGwscGFnZVNpemVfOjAscmVtb3RlRmlsdGVyOiExLHJlbW90ZVNvcnQ6ITEscmVzcG9uc2VSb290OlwiZGF0YVwiLHRvdGFsQ291bnQ6MCx1cmw6bnVsbH07Y29uc3RydWN0KGUpe3N1cGVyLmNvbnN0cnVjdChlKTtsZXQgdD10aGlzO3Qub24oe211dGF0ZTp0Lm9uQ29sbGVjdGlvbk11dGF0ZSxzb3J0OnQub25Db2xsZWN0aW9uU29ydCxzY29wZTp0fSksaS5yZWdpc3Rlcih0KX1kZXN0cm95KCl7aS51bnJlZ2lzdGVyKHRoaXMpLHN1cGVyLmRlc3Ryb3koKX1hZGQoZSx0PXRoaXMuYXV0b0luaXRSZWNvcmRzKXtsZXQgcj10aGlzLG89QXJyYXkuaXNBcnJheShlKT9lOltlXSxzPXIuaW5pdGlhbENodW5rU2l6ZTtpZih0KXJldHVybiBzdXBlci5hZGQobyksci5pc0xvYWRlZD0hMCxvLm1hcChlPT5yLmdldChlW3IuZ2V0S2V5UHJvcGVydHkoKV0pKTtpZihzPjAmJm8ubGVuZ3RoPnMpe2NvbnN0IGU9ci5jb3VudCtvLmxlbmd0aCx0PW8uc3BsaWNlKDAscyk7cmV0dXJuIHIuY2h1bmtpbmdUb3RhbD1lLHN1cGVyLmFkZCh0KSxyLnN1c3BlbmRFdmVudHM9ITAsc3VwZXIuYWRkKG8pLHIuc3VzcGVuZEV2ZW50cz0hMSxyLmZpcmUoXCJsb2FkXCIse2l0ZW1zOnIuaXRlbXMscG9zdENodW5rTG9hZDohMCx0b3RhbDpyLmNodW5raW5nVG90YWx9KSxkZWxldGUgci5jaHVua2luZ1RvdGFsLHIuY291bnR9Y29uc3QgaT1zdXBlci5hZGQobyk7cmV0dXJuIHIuaXNMb2FkZWQ9ITAsaX1hZnRlclNldEN1cnJlbnRQYWdlKGUsdCl7dCYmdGhpcy5sb2FkKCl9YWZ0ZXJTZXREYXRhKGUsdCl7bGV0IHI9dGhpcztyLmNvbmZpZ3NBcHBsaWVkJiZlJiYodCYmci5jbGVhcigpLHIuaXNMb2FkaW5nPSExLHIuYWRkKGUsci5hdXRvSW5pdFJlY29yZHMpKX1hZnRlclNldEZpbHRlcnMoZSx0KXtzdXBlci5hZnRlclNldEZpbHRlcnMoZSx0KTtsZXQgcj10aGlzO3IuX2N1cnJlbnRQYWdlPTEsdCYmci5yZW1vdGVGaWx0ZXImJnIubG9hZCgpfWFmdGVyU2V0TW9kZWwoZSx0KXtlJiYoZS5zdG9yZUlkPXRoaXMuaWQpfWFmdGVyU2V0UGFnZVNpemUoZSx0KXt0JiYodGhpcy5fY3VycmVudFBhZ2U9MSx0aGlzLmxvYWQoKSl9YWZ0ZXJTZXRTb3J0ZXJzKGUsdCl7c3VwZXIuYWZ0ZXJTZXRTb3J0ZXJzKGUsdCk7bGV0IHI9dGhpcztyLl9jdXJyZW50UGFnZT0xLHQmJnIucmVtb3RlU29ydCYmci5sb2FkKCl9YmVmb3JlU2V0QXBpKGUsdCl7cmV0dXJuXCJTdHJpbmdcIj09PU5lby50eXBlT2YoZSkmJihlPXtjcmVhdGU6ZStcIi5jcmVhdGVcIixkZXN0cm95OmUrXCIuZGVzdHJveVwiLHJlYWQ6ZStcIi5yZWFkXCIsdXBkYXRlOmUrXCIudXBkYXRlXCJ9KSxlfWJlZm9yZVNldERhdGEoZSx0KXtyZXR1cm4gZSYmKHRoaXMuaXNMb2FkaW5nPSEwKSxlfWJlZm9yZVNldE1vZGVsKHQsbyl7cmV0dXJuIG8/LmRlc3Ryb3koKSxlLmJlZm9yZVNldEluc3RhbmNlKHQscil9Y3JlYXRlUmVjb3JkKGUpe2xldCB0PSEwO2lmKGUpe0FycmF5LmlzQXJyYXkoZSl8fCh0PSExLGU9W2VdKTtsZXQgcixvPXRoaXMsaT0wLGE9ZS5sZW5ndGg7Zm9yKDtpPGE7aSsrKXI9ZVtpXSxzLmlzUmVjb3JkKHIpfHwoZVtpXT1zLmNyZWF0ZVJlY29yZChvLm1vZGVsLHIpKX1yZXR1cm4gdD9lOmVbMF19ZmluZChlLHQscj0hMSl7Y29uc3Qgbz1zdXBlci5maW5kKGUsdCxyKTtyZXR1cm4gcj9vP3RoaXMuZ2V0KG9bdGhpcy5rZXlQcm9wZXJ0eV0pOm51bGw6by5tYXAoZT0+dGhpcy5nZXQoZVt0aGlzLmtleVByb3BlcnR5XSkpfWZpbmRCeShlLHQ9dGhpcyxyPTAsbz10aGlzLmNvdW50KXtyZXR1cm4gc3VwZXIuZmluZEJ5KGUsdCxyLG8pLm1hcChlPT50aGlzLmdldChlW3RoaXMua2V5UHJvcGVydHldKSl9Zm9yRWFjaChlLHQpe2NvbnN0IHI9dGhpcztmb3IobGV0IG89MDtvPHIuY291bnQ7bysrKWUuY2FsbCh0fHxyLHIuZ2V0QXQobyksbyxyLml0ZW1zKX1nZXQoZSl7bGV0IHQ9dGhpcyxyPXN1cGVyLmdldChlKTtpZihyJiYhcy5pc1JlY29yZChyKSl7Y29uc3Qgbz1zLmNyZWF0ZVJlY29yZCh0Lm1vZGVsLHIpLGk9dC5pbmRleE9mKHIpO2lmKHQubWFwLnNldChlLG8pLC0xIT09aSYmKHQuX2l0ZW1zW2ldPW8pLHQuYWxsSXRlbXMpe2NvbnN0IHM9dC5hbGxJdGVtcy5pbmRleE9mKHIpOy0xIT09cyYmKHQuYWxsSXRlbXMubWFwLnNldChlLG8pLHQuYWxsSXRlbXMuX2l0ZW1zW3NdPW8pfXJldHVybiBvfXJldHVybiByfWdldEF0KGUpe2xldCB0PXRoaXMscj1zdXBlci5nZXRBdChlKTtpZihyJiYhcy5pc1JlY29yZChyKSl7Y29uc3Qgbz1zLmNyZWF0ZVJlY29yZCh0Lm1vZGVsLHIpO2lmKHQubWFwLnNldChvW3Qua2V5UHJvcGVydHldLG8pLHQuX2l0ZW1zW2VdPW8sdC5hbGxJdGVtcyl7Y29uc3QgZT10LmFsbEl0ZW1zLmluZGV4T2Yocik7LTEhPT1lJiYodC5hbGxJdGVtcy5tYXAuc2V0KG9bdC5rZXlQcm9wZXJ0eV0sbyksdC5hbGxJdGVtcy5faXRlbXNbZV09byl9cmV0dXJuIG99cmV0dXJuIHJ9Z2V0S2V5UHJvcGVydHkoKXtyZXR1cm4gdGhpcy5rZXlQcm9wZXJ0eXx8dGhpcy5tb2RlbC5rZXlQcm9wZXJ0eX1nZXRLZXlUeXBlKCl7bGV0e21vZGVsOmV9PXRoaXMsdD1lPy5nZXRGaWVsZCh0aGlzLmdldEtleVByb3BlcnR5KCkpO3JldHVybiB0Py50eXBlPy50b0xvd2VyQ2FzZSgpfHxudWxsfWluaXRSZWNvcmQoZSl7cmV0dXJuIHMuaXNSZWNvcmQoZSk/ZTp0aGlzLmdldChlW3RoaXMuZ2V0S2V5UHJvcGVydHkoKV0pfWluc2VydChlLHQscj10aGlzLmF1dG9Jbml0UmVjb3Jkcyl7bGV0IG89dGhpcyxzPXN1cGVyLmluc2VydChlLHQpO3JldHVybiByP3MubWFwKGU9Pm8uZ2V0KGVbby5nZXRLZXlQcm9wZXJ0eSgpXSkpOnN9YXN5bmMgbG9hZChlPXt9KXtsZXQgdD10aGlzLHI9e3BhZ2U6dC5jdXJyZW50UGFnZSxwYWdlU2l6ZTp0LnBhZ2VTaXplLC4uLmUucGFyYW1zfTtpZih0LnJlbW90ZUZpbHRlciYmKHIuZmlsdGVycz10LmV4cG9ydEZpbHRlcnMoKSksdC5yZW1vdGVTb3J0JiYoci5zb3J0ZXJzPXQuZXhwb3J0U29ydGVycygpKSx0LmFwaSl7bGV0IGU9dC5hcGkucmVhZC5zcGxpdChcIi5cIiksbz1lLnBvcCgpLHM9TmVvLm5zKGUuam9pbihcIi5cIikpO2lmKHMpe2NvbnN0IGU9YXdhaXQgc1tvXShyKTtyZXR1cm4gZS5zdWNjZXNzPyh0LnRvdGFsQ291bnQ9ZS50b3RhbENvdW50LHQuZGF0YT1OZW8ubnModC5yZXNwb25zZVJvb3QsITEsZSksdC5pc0xvYWRlZD0hMCx0LmRhdGEpOm51bGx9Y29uc29sZS5lcnJvcihcIkFwaSBpcyBub3QgZGVmaW5lZFwiLHRoaXMpfWVsc2V7ZS51cmw/Pz10LnVybDt0cnl7bGV0IHI7aWYoZ2xvYmFsVGhpcy5wcm9jZXNzPy5yZWxlYXNlKXtjb25zdHtyZWFkRmlsZTp0fT1hd2FpdCBpbXBvcnQoXCJmcy9wcm9taXNlc1wiKSxvPWF3YWl0IHQoZS51cmwsXCJ1dGYtOFwiKTtyPXtqc29uOkpTT04ucGFyc2Uobyl9fWVsc2Ugcj1hd2FpdCBOZW8uWGhyLnByb21pc2VKc29uKGUpO3JldHVybiByJiYodC5kYXRhPU5lby5ucyh0LnJlc3BvbnNlUm9vdCwhMSxyLmpzb24pfHxyLmpzb24pLHQuaXNMb2FkZWQ9ITAscj8uanNvbnx8bnVsbH1jYXRjaChyKXtyZXR1cm4gY29uc29sZS5lcnJvcihcIkVycm9yIGZvciBOZW8uWGhyLnJlcXVlc3RcIix7aWQ6dC5pZCxlcnJvcjpyLHVybDplLnVybH0pLG51bGx9fX1vbkNvbGxlY3Rpb25NdXRhdGUoZSl7bGV0IHQ9dGhpczt0LmlzQ29uc3RydWN0ZWQmJiF0LmlzTG9hZGluZyYmdC5maXJlKFwibG9hZFwiLHtpdGVtczp0Lml0ZW1zLHRvdGFsOnQuY2h1bmtpbmdUb3RhbH0pfW9uQ29sbGVjdGlvblNvcnQoKXtsZXQgZT10aGlzO2UuaXNDb25zdHJ1Y3RlZCYmZS5maXJlKFwibG9hZFwiLHtpdGVtczplLml0ZW1zfSl9b25Db25zdHJ1Y3RlZCgpe3N1cGVyLm9uQ29uc3RydWN0ZWQoKTtsZXQgZT10aGlzO2UuZGF0YSYmZS5hZnRlclNldERhdGEoZS5kYXRhKSxQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpPT57ZS5pc0xvYWRlZD9lLmZpcmUoXCJsb2FkXCIse2l0ZW1zOmUuaXRlbXN9KTplLmF1dG9Mb2FkJiZlLmxvYWQoKX0pfW9uRmlsdGVyQ2hhbmdlKGUpe2xldCB0PXRoaXM7dC5yZW1vdGVGaWx0ZXI/KHQuX2N1cnJlbnRQYWdlPTEsdC5sb2FkKCkpOnN1cGVyLm9uRmlsdGVyQ2hhbmdlKGUpfW9uUmVjb3JkQ2hhbmdlKGUpe3RoaXMuZmlyZShcInJlY29yZENoYW5nZVwiLHsuLi5lLGluZGV4OnRoaXMuaW5kZXhPZihlLnJlY29yZCl9KX1zb3J0KGU9e30pe2xldCB0PXRoaXM7dC5fY3VycmVudFBhZ2U9MSx0LmNvbmZpZ3NBcHBsaWVkJiYoZS5kaXJlY3Rpb24/dC5zb3J0ZXJzPVt7ZGlyZWN0aW9uOmUuZGlyZWN0aW9uLHByb3BlcnR5OmUucHJvcGVydHl9XTp0LnJlbW90ZVNvcnR8fCh0LnNvcnRlcnM9W3tkaXJlY3Rpb246XCJBU0NcIixwcm9wZXJ0eTphfV0pKX10b0pTT04oKXtsZXQgZT10aGlzO3JldHVybnsuLi5zdXBlci50b0pTT04oKSxhdXRvSW5pdFJlY29yZHM6ZS5hdXRvSW5pdFJlY29yZHMsYXV0b0xvYWQ6ZS5hdXRvTG9hZCxjdXJyZW50UGFnZTplLmN1cnJlbnRQYWdlLGluaXRpYWxDaHVua1NpemU6ZS5pbml0aWFsQ2h1bmtTaXplLGlzR3JvdXBlZDplLmlzR3JvdXBlZCxpc0xvYWRlZDplLmlzTG9hZGVkLGlzTG9hZGluZzplLmlzTG9hZGluZyxtb2RlbDplLm1vZGVsPy50b0pTT04oKSxwYWdlU2l6ZTplLnBhZ2VTaXplLHJlbW90ZUZpbHRlcjplLnJlbW90ZUZpbHRlcixyZW1vdGVTb3J0OmUucmVtb3RlU29ydCx0b3RhbENvdW50OmUudG90YWxDb3VudCx1cmw6ZS51cmx9fX0pOyIsImltcG9ydCBzIGZyb21cIi4vQmFzZS5tanNcIjtleHBvcnQgZGVmYXVsdCBOZW8uc2V0dXBDbGFzcyhjbGFzcyBleHRlbmRzIHN7c3RhdGljIGNvbmZpZz17Y2xhc3NOYW1lOlwiTmVvLm1hbmFnZXIuU3RvcmVcIixzaW5nbGV0b246ITB9O2NvbnN0cnVjdChzKXtzdXBlci5jb25zdHJ1Y3Qocyl9fSk7Il0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==