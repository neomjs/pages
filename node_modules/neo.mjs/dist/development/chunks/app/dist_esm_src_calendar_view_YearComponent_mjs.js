"use strict";
(self["webpackChunkneo_mjs"] = self["webpackChunkneo_mjs"] || []).push([["dist_esm_src_calendar_view_YearComponent_mjs"],{

/***/ "./dist/esm/src/calendar/view/YearComponent.mjs":
/*!******************************************************!*\
  !*** ./dist/esm/src/calendar/view/YearComponent.mjs ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _component_Base_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../component/Base.mjs */ "./dist/esm/src/component/Base.mjs");
/* harmony import */ var _util_Date_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../util/Date.mjs */ "./dist/esm/src/util/Date.mjs");
/* harmony import */ var _util_Array_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../util/Array.mjs */ "./dist/esm/src/util/Array.mjs");
const o=new Date,a=o.getDate(),r=o.getMonth(),s=o.getFullYear();class l extends _component_Base_mjs__WEBPACK_IMPORTED_MODULE_0__["default"]{static config={className:"Neo.calendar.view.YearComponent",baseCls:["neo-calendar-yearcomponent"],bind:{calendarStore:"stores.calendars",currentDate:e=>e.currentDate,eventStore:"stores.events",locale:e=>e.locale,scrollNewYearFromTop:e=>e.scrollNewYearFromTop,showWeekends:e=>e.showWeekends,weekStartDay:e=>e.weekStartDay},cachedUpdate:null,calendarStore_:null,currentDate_:null,dayNameFormat_:"narrow",eventIndicatorHigh_:3,eventIndicatorLow_:1,eventIndicatorMedium_:2,eventStore_:null,intlFormat_day:null,intlFormat_month:null,isUpdating_:!1,locale_:Neo.config.locale,monthNameFormat_:"long",needsEventUpdate:!1,owner:null,scrollNewYearFromTop:!1,showCellBorders_:!1,showDisabledDays_:!0,showWeekends_:!0,showWeekNumbers_:!0,sixWeeksPerMonth_:!1,useAnimations:!0,vdom:{cn:[{cls:["neo-content-wrapper"],cn:[{cls:["neo-year-header"],cn:[{},{cls:["neo-nav-button","neo-prev-button"]},{cls:["neo-nav-button","neo-next-button"]}]},{cls:["neo-months-container"]}]}]},weekStartDay_:0};construct(e){super.construct(e);let t=this;t.addDomListeners([{click:t.onNavButtonClick,delegate:".neo-nav-button",scope:t},{wheel:t.onWheel,scope:t}]),t.calendarStore.getCount()>0&&t.eventStore.getCount()>0&&t.createMonths(!0),t.updateHeaderYear()}afterSetCalendarStore(e,t){let n=this,o={load:n.onCalendarStoreLoad,recordChange:n.onCalendarStoreRecordChange,scope:n};t?.un(o),e?.on(o)}afterSetCurrentDate(e,t){if(this.isConstructed){let n=t.getFullYear(),o=e.getFullYear();o!==n&&this.changeYear(o-n)}}afterSetDayNameFormat(e,t){this.updateDayNamesRows(e,t)}afterSetEventIndicatorHigh(e,t){void 0!==t&&this.createMonths()}afterSetEventIndicatorLow(e,t){void 0!==t&&this.createMonths()}afterSetEventIndicatorMedium(e,t){void 0!==t&&this.createMonths()}afterSetEventStore(e,t){let n=this,o={load:n.onEventStoreLoad,recordChange:n.onEventStoreRecordChange,scope:n};t?.un(o),e?.on(o)}afterSetLocale(e,t){if(void 0!==t){let e=this;e.updateDayNamesRows(e.dayNameFormat,"",!0),e.updateMonthNameFormat(e.monthNameFormat,"")}}afterSetMonthNameFormat(e,t){this.updateMonthNameFormat(e,t)}afterSetMounted(e,t){super.afterSetMounted(e,t);let n=this;e&&n.needsEventUpdate&&(n.createMonths(),n.needsEventUpdate=!1)}afterSetShowCellBorders(e,t){let o=this.cls;_util_Array_mjs__WEBPACK_IMPORTED_MODULE_2__["default"][e?"add":"remove"](o,"neo-show-cell-borders"),this.cls=o}afterSetShowWeekends(e,t){if(void 0!==t){let t,n,o,a,r,s=this,{vdom:l}=s,c=0;for(;c<12;c++)for(n=l.cn[0].cn[1].cn[c].cn,r=n.length,o=1;o<r;o++)for(a=1;a<8;a++)t=n[o].cn[a],t.cls.includes("neo-weekend")&&(e?delete t.removeDom:t.removeDom=!0);s.updateDayNamesRows(s.dayNameFormat,"")}}afterSetShowWeekNumbers(e,t){if(void 0!==t){let t,n,o,a=this,r=0;for(;r<12;r++)for(t=a.vdom.cn[0].cn[1].cn[r].cn,o=t.length,n=1;n<o;n++)t[n].cn[0].removeDom=!e;a.update()}}afterSetSixWeeksPerMonth(e,n){if(void 0!==n){let n=this,o=n.currentDate,a=0;for(o.setMonth(0),o.setDate(1);a<12;a++)n.vdom.cn[0].cn[1].cn[a].cn[7].removeDom=5===_util_Date_mjs__WEBPACK_IMPORTED_MODULE_1__["default"].getWeeksOfMonth(o,n.weekStartDay)&&!e,o.setMonth(o.getMonth()+1);n.update()}}afterSetWeekStartDay(e,t){void 0!==t&&this.createMonths()}beforeSetDayNameFormat(e,n){return this.beforeSetEnumValue(e,n,"dayNameFormat",_util_Date_mjs__WEBPACK_IMPORTED_MODULE_1__["default"].prototype.dayNameFormats)}beforeSetMonthNameFormat(e,n){return this.beforeSetEnumValue(e,n,"monthNameFormat",_util_Date_mjs__WEBPACK_IMPORTED_MODULE_1__["default"].prototype.monthNameFormats)}cacheUpdate(e=this.currentDate){this.cachedUpdate=e}changeYear(e){let t,n,o,a=this;a.useAnimations&&(a.isUpdating||(a.isUpdating=!0,a.getDomRect().then(r=>{t=a.scrollNewYearFromTop&&e<0||!a.scrollNewYearFromTop&&e>0,n=a.vdom,o=t?0:-r.height,n.cn.push({cls:["neo-relative"],cn:[{cls:["neo-animation-wrapper"],cn:[{cls:["neo-content-wrapper"],cn:[{cls:["neo-year-header"],cn:[{html:a.currentDate.getFullYear()},{cls:["neo-nav-button","neo-prev-button"]},{cls:["neo-nav-button","neo-next-button"]}]},{cls:["neo-months-container"]}]}],style:{height:2*r.height+"px",transform:`translateY(${o}px)`,width:`${r.width}px`}}]}),a.createMonths(!0,n.cn[1].cn[0].cn[0].cn[1]),n.cn[1].cn[0].cn[t?"unshift":"push"](n.cn[0]),n.cn.splice(0,1),a.promiseUpdate().then(()=>{o=t?-r.height:0,n.cn[0].cn[0].style.transform=`translateY(${o}px)`,a.update(),a.timeout(300).then(()=>{n.cn[0]=n.cn[0].cn[0].cn[t?1:0],a.triggerVdomUpdate()})})})))}createDayNamesRow(){let e,t,n=this,o=n.currentDate,a=0,r={cls:["neo-calendar-week"],cn:[{cls:["neo-cell","neo-top-left-spacer"]}]};for(o.setDate(n.currentDate.getDate()-n.currentDate.getDay()+n.weekStartDay);a<7;a++)t={cls:["neo-cell","neo-weekday-cell"],html:n.intlFormat_day.format(o)},e=o.getDay(),n.showWeekends||0!==e&&6!==e||(t.removeDom=!0),r.cn.push(t),o.setDate(o.getDate()+1);return r}createMonthContent(e,n){let o,l,c,h,d,i,m,u,D,p,g=this,{calendarStore:v,eventStore:f}=g,w=n.getDate(),S=n.getMonth(),y=n.getFullYear(),F=_util_Date_mjs__WEBPACK_IMPORTED_MODULE_1__["default"].clone(n),M=g.currentDate,N=M.getMonth(),k=M.getFullYear(),C=_util_Date_mjs__WEBPACK_IMPORTED_MODULE_1__["default"].getDaysInMonth(n),b=_util_Date_mjs__WEBPACK_IMPORTED_MODULE_1__["default"].getFirstDayOffset(n,g.weekStartDay),Y=0,_=_util_Date_mjs__WEBPACK_IMPORTED_MODULE_1__["default"].clone(n);for(p=(C+b)/7>5?6:5,d=1-b,F.setDate(d),_.setDate(d+7);Y<6;Y++){for(D={cls:["neo-calendar-week"],removeDom:Y===p&&!g.sixWeeksPerMonth,cn:[{cls:["neo-cell","neo-weeknumber-cell"],html:_util_Date_mjs__WEBPACK_IMPORTED_MODULE_1__["default"].getWeekOfYear(_),removeDom:!g.showWeekNumbers}]},_.setDate(_.getDate()+7),u=0;u<7;u++)m=d>0&&d<=C,o=g.getCellId(y,S+1,d),h=F.getDay(),l={id:o,cls:m?["neo-cell"]:["neo-cell","neo-disabled"],tabIndex:m?-1:null,cn:[{cls:["neo-cell-content"],html:m?d:g.showDisabledDays?F.getDate():""}]},c=l.cls,0!==h&&6!==h||(c.push("neo-weekend"),g.showWeekends||(l.removeDom=!0)),s===y&&r===S&&a===d&&l.cn[0].cls.push("neo-today"),k===y&&N===S&&d===w&&c.push("neo-selected"),l.removeDom||(i=f.getDayRecords(F),i=i.filter(e=>v.get(e.calendarId).active),i.length>=g.eventIndicatorHigh?c.push("neo-events-high"):i.length>=g.eventIndicatorMedium?c.push("neo-events-medium"):i.length>=g.eventIndicatorLow&&c.push("neo-events-low")),D.cn.push(l),F.setDate(F.getDate()+1),d++;e.cn.push(D)}return e}createMonths(e=!1,n){let o=this;if(o.mounted){let a,r=o.currentDate,{vdom:s}=o,l=n||s.cn[0].cn[1],c=0;for(l.cn=[];c<12;c++)r.setMonth(c),r.setDate(1),a={cls:["neo-month"],cn:[{cls:["neo-month-name"],html:o.intlFormat_month.format(r)},o.createDayNamesRow()]},a=o.createMonthContent(a,_util_Date_mjs__WEBPACK_IMPORTED_MODULE_1__["default"].clone(r)),l.cn.push(a);!e&&o.update()}else o.needsEventUpdate=!0}getCellId(e,t,n){return(n=n.toString()).length<2&&(n="0"+n),(t=t.toString()).length<2&&(t="0"+t),this.id+"__"+e+"-"+t+"-"+n}onCalendarStoreLoad(e){this.eventStore.getCount()>0&&this.createMonths()}onCalendarStoreRecordChange(e){this.createMonths()}onEventStoreLoad(e){this.calendarStore.getCount()>0&&this.createMonths()}onEventStoreRecordChange(e){this.createMonths()}onNavButtonClick(e){let{currentDate:t}=this;t.setFullYear(t.getFullYear()+(e.path[0].cls.includes("neo-next-button")?1:-1)),this.currentDate=t}onWheel(e){if(Math.abs(e.deltaY)>Math.abs(e.deltaX)){let t=this,{currentDate:n}=t;n.setFullYear(n.getFullYear()+(e.deltaY>0?1:-1)),t.currentDate=n}}triggerVdomUpdate(e=!1){if(!e){let e=this;e.isUpdating=!0,e.promiseUpdate().then(()=>{e.isUpdating=!1})}}updateDayNamesRows(e,t,n=!1){let o=this;if(o.intlFormat_day=new Intl.DateTimeFormat(o.locale,{weekday:e}),void 0!==t){let e,t,a,r=o.currentDate,{vdom:s}=o,l=1;for(r.setDate(o.currentDate.getDate()-o.currentDate.getDay()+o.weekStartDay);l<8;l++){for(t=0;t<12;t++)e=r.getDay(),a=s.cn[0].cn[1].cn[t].cn[1].cn[l],a.html=o.intlFormat_day.format(r),o.showWeekends||0!==e&&6!==e?delete a.removeDom:a.removeDom=!0;r.setDate(r.getDate()+1)}!n&&o.update()}}updateHeaderYear(){this.vdom.cn[0].cn[0].cn[0].html=this.currentDate.getFullYear()}updateMonthNameFormat(e,t,n=!1){let o=this;if(o.intlFormat_month=new Intl.DateTimeFormat(o.locale,{month:e}),void 0!==t){let{currentDate:e,vdom:t}=o,a=0;for(;a<12;a++)e.setMonth(a),e.setDate(1),t.cn[0].cn[1].cn[a].cn[0].html=o.intlFormat_month.format(e);!n&&o.update()}}}/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Neo.setupClass(l));

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2h1bmtzL2FwcC9kaXN0X2VzbV9zcmNfY2FsZW5kYXJfdmlld19ZZWFyQ29tcG9uZW50X21qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQStHLGdFQUFnRSxnQkFBZ0IsMkRBQUMsQ0FBQyxlQUFlLHlGQUF5Rix5TkFBeU4saWNBQWljLEtBQUssaUNBQWlDLDhCQUE4QixFQUFFLHlDQUF5QyxFQUFFLHlDQUF5QyxFQUFFLEVBQUUsNkJBQTZCLEVBQUUsRUFBRSxrQkFBa0IsYUFBYSxtQkFBbUIsV0FBVyxvQkFBb0IsNERBQTRELEVBQUUsd0JBQXdCLG9HQUFvRywyQkFBMkIsY0FBYywrRUFBK0Usa0JBQWtCLHlCQUF5Qix1QkFBdUIsd0NBQXdDLDZCQUE2QiwyQkFBMkIsNkJBQTZCLGdDQUFnQyxnQ0FBZ0MsK0JBQStCLGdDQUFnQyxrQ0FBa0MsZ0NBQWdDLHdCQUF3QixjQUFjLHlFQUF5RSxrQkFBa0Isb0JBQW9CLGVBQWUsV0FBVywyRkFBMkYsNkJBQTZCLGdDQUFnQyxxQkFBcUIsMkJBQTJCLFdBQVcsZ0VBQWdFLDZCQUE2QixlQUFlLHVEQUFDLHlEQUF5RCwwQkFBMEIsZUFBZSxzQkFBc0IsT0FBTyxPQUFPLEtBQUssS0FBSyxnREFBZ0QsSUFBSSxZQUFZLElBQUksc0ZBQXNGLDBDQUEwQyw2QkFBNkIsZUFBZSxxQkFBcUIsS0FBSyxLQUFLLHFEQUFxRCxJQUFJLDRCQUE0QixZQUFZLDhCQUE4QixlQUFlLCtCQUErQiwrQkFBK0IsS0FBSyxpREFBaUQsc0RBQUMsa0VBQWtFLFlBQVksMEJBQTBCLGdDQUFnQyw0QkFBNEIsbURBQW1ELHNEQUFDLDJCQUEyQiw4QkFBOEIscURBQXFELHNEQUFDLDZCQUE2QixnQ0FBZ0Msb0JBQW9CLGNBQWMsaUJBQWlCLHlFQUF5RSxnR0FBZ0csMEJBQTBCLG1DQUFtQyxpQ0FBaUMsNkJBQTZCLGlDQUFpQyxFQUFFLHlDQUF5QyxFQUFFLHlDQUF5QyxFQUFFLEVBQUUsNkJBQTZCLEVBQUUsU0FBUywrQ0FBK0MsRUFBRSxjQUFjLFFBQVEsS0FBSyxFQUFFLDBJQUEwSSw0REFBNEQsRUFBRSx5Q0FBeUMsc0RBQXNELEVBQUUsRUFBRSxJQUFJLG9CQUFvQixzQ0FBc0MsK0JBQStCLHVDQUF1QyxHQUFHLDZFQUE2RSxJQUFJLE9BQU8sb0VBQW9FLG1HQUFtRyxTQUFTLHdCQUF3QixnQ0FBZ0MsNkJBQTZCLG9EQUFvRCxzREFBQyw2REFBNkQsc0RBQUMscUJBQXFCLHNEQUFDLDJDQUEyQyxzREFBQyxVQUFVLHNEQUFzRCxJQUFJLEtBQUssT0FBTyxvRUFBb0UsNENBQTRDLHNEQUFDLCtDQUErQyxFQUFFLDhCQUE4QixJQUFJLHVEQUF1RCw0RUFBNEUsb0VBQW9FLEVBQUUscWRBQXFkLGFBQWEsU0FBUyxxQkFBcUIsV0FBVyxjQUFjLHVCQUF1QixPQUFPLDBCQUEwQixZQUFZLEtBQUssa0NBQWtDLHVCQUF1Qix5REFBeUQsd0JBQXdCLDBCQUEwQixzREFBQyx3QkFBd0IsZUFBZSwyQkFBMkIsaUJBQWlCLDJHQUEyRyx1QkFBdUIsa0RBQWtELCtCQUErQixvQkFBb0Isb0JBQW9CLHFEQUFxRCw0QkFBNEIsb0JBQW9CLG9CQUFvQixJQUFJLGNBQWMsTUFBTSxtR0FBbUcsV0FBVywwQ0FBMEMsWUFBWSxjQUFjLEdBQUcsa0VBQWtFLHdCQUF3QixPQUFPLFdBQVcsNENBQTRDLGdCQUFnQixHQUFHLDZCQUE2QixXQUFXLHNEQUFzRCxVQUFVLGNBQWMsMkJBQTJCLE9BQU8sT0FBTyw2RUFBNkUsSUFBSSxLQUFLLFFBQVEsS0FBSyxvSkFBb0oseUJBQXlCLGdCQUFnQixtQkFBbUIsZ0VBQWdFLGdDQUFnQyxXQUFXLHdEQUF3RCxRQUFRLGNBQWMsSUFBSSxxQkFBcUIsT0FBTyxLQUFLLEtBQUssMkZBQTJGLGlCQUFpQixpRUFBZSxpQkFBaUIsRSIsInNvdXJjZXMiOlsid2VicGFjazovL25lby5tanMvLi9kaXN0L2VzbS9zcmMvY2FsZW5kYXIvdmlldy9ZZWFyQ29tcG9uZW50Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZSBmcm9tXCIuLi8uLi9jb21wb25lbnQvQmFzZS5tanNcIjtpbXBvcnQgdCBmcm9tXCIuLi8uLi91dGlsL0RhdGUubWpzXCI7aW1wb3J0IG4gZnJvbVwiLi4vLi4vdXRpbC9BcnJheS5tanNcIjtjb25zdCBvPW5ldyBEYXRlLGE9by5nZXREYXRlKCkscj1vLmdldE1vbnRoKCkscz1vLmdldEZ1bGxZZWFyKCk7Y2xhc3MgbCBleHRlbmRzIGV7c3RhdGljIGNvbmZpZz17Y2xhc3NOYW1lOlwiTmVvLmNhbGVuZGFyLnZpZXcuWWVhckNvbXBvbmVudFwiLGJhc2VDbHM6W1wibmVvLWNhbGVuZGFyLXllYXJjb21wb25lbnRcIl0sYmluZDp7Y2FsZW5kYXJTdG9yZTpcInN0b3Jlcy5jYWxlbmRhcnNcIixjdXJyZW50RGF0ZTplPT5lLmN1cnJlbnREYXRlLGV2ZW50U3RvcmU6XCJzdG9yZXMuZXZlbnRzXCIsbG9jYWxlOmU9PmUubG9jYWxlLHNjcm9sbE5ld1llYXJGcm9tVG9wOmU9PmUuc2Nyb2xsTmV3WWVhckZyb21Ub3Asc2hvd1dlZWtlbmRzOmU9PmUuc2hvd1dlZWtlbmRzLHdlZWtTdGFydERheTplPT5lLndlZWtTdGFydERheX0sY2FjaGVkVXBkYXRlOm51bGwsY2FsZW5kYXJTdG9yZV86bnVsbCxjdXJyZW50RGF0ZV86bnVsbCxkYXlOYW1lRm9ybWF0XzpcIm5hcnJvd1wiLGV2ZW50SW5kaWNhdG9ySGlnaF86MyxldmVudEluZGljYXRvckxvd186MSxldmVudEluZGljYXRvck1lZGl1bV86MixldmVudFN0b3JlXzpudWxsLGludGxGb3JtYXRfZGF5Om51bGwsaW50bEZvcm1hdF9tb250aDpudWxsLGlzVXBkYXRpbmdfOiExLGxvY2FsZV86TmVvLmNvbmZpZy5sb2NhbGUsbW9udGhOYW1lRm9ybWF0XzpcImxvbmdcIixuZWVkc0V2ZW50VXBkYXRlOiExLG93bmVyOm51bGwsc2Nyb2xsTmV3WWVhckZyb21Ub3A6ITEsc2hvd0NlbGxCb3JkZXJzXzohMSxzaG93RGlzYWJsZWREYXlzXzohMCxzaG93V2Vla2VuZHNfOiEwLHNob3dXZWVrTnVtYmVyc186ITAsc2l4V2Vla3NQZXJNb250aF86ITEsdXNlQW5pbWF0aW9uczohMCx2ZG9tOntjbjpbe2NsczpbXCJuZW8tY29udGVudC13cmFwcGVyXCJdLGNuOlt7Y2xzOltcIm5lby15ZWFyLWhlYWRlclwiXSxjbjpbe30se2NsczpbXCJuZW8tbmF2LWJ1dHRvblwiLFwibmVvLXByZXYtYnV0dG9uXCJdfSx7Y2xzOltcIm5lby1uYXYtYnV0dG9uXCIsXCJuZW8tbmV4dC1idXR0b25cIl19XX0se2NsczpbXCJuZW8tbW9udGhzLWNvbnRhaW5lclwiXX1dfV19LHdlZWtTdGFydERheV86MH07Y29uc3RydWN0KGUpe3N1cGVyLmNvbnN0cnVjdChlKTtsZXQgdD10aGlzO3QuYWRkRG9tTGlzdGVuZXJzKFt7Y2xpY2s6dC5vbk5hdkJ1dHRvbkNsaWNrLGRlbGVnYXRlOlwiLm5lby1uYXYtYnV0dG9uXCIsc2NvcGU6dH0se3doZWVsOnQub25XaGVlbCxzY29wZTp0fV0pLHQuY2FsZW5kYXJTdG9yZS5nZXRDb3VudCgpPjAmJnQuZXZlbnRTdG9yZS5nZXRDb3VudCgpPjAmJnQuY3JlYXRlTW9udGhzKCEwKSx0LnVwZGF0ZUhlYWRlclllYXIoKX1hZnRlclNldENhbGVuZGFyU3RvcmUoZSx0KXtsZXQgbj10aGlzLG89e2xvYWQ6bi5vbkNhbGVuZGFyU3RvcmVMb2FkLHJlY29yZENoYW5nZTpuLm9uQ2FsZW5kYXJTdG9yZVJlY29yZENoYW5nZSxzY29wZTpufTt0Py51bihvKSxlPy5vbihvKX1hZnRlclNldEN1cnJlbnREYXRlKGUsdCl7aWYodGhpcy5pc0NvbnN0cnVjdGVkKXtsZXQgbj10LmdldEZ1bGxZZWFyKCksbz1lLmdldEZ1bGxZZWFyKCk7byE9PW4mJnRoaXMuY2hhbmdlWWVhcihvLW4pfX1hZnRlclNldERheU5hbWVGb3JtYXQoZSx0KXt0aGlzLnVwZGF0ZURheU5hbWVzUm93cyhlLHQpfWFmdGVyU2V0RXZlbnRJbmRpY2F0b3JIaWdoKGUsdCl7dm9pZCAwIT09dCYmdGhpcy5jcmVhdGVNb250aHMoKX1hZnRlclNldEV2ZW50SW5kaWNhdG9yTG93KGUsdCl7dm9pZCAwIT09dCYmdGhpcy5jcmVhdGVNb250aHMoKX1hZnRlclNldEV2ZW50SW5kaWNhdG9yTWVkaXVtKGUsdCl7dm9pZCAwIT09dCYmdGhpcy5jcmVhdGVNb250aHMoKX1hZnRlclNldEV2ZW50U3RvcmUoZSx0KXtsZXQgbj10aGlzLG89e2xvYWQ6bi5vbkV2ZW50U3RvcmVMb2FkLHJlY29yZENoYW5nZTpuLm9uRXZlbnRTdG9yZVJlY29yZENoYW5nZSxzY29wZTpufTt0Py51bihvKSxlPy5vbihvKX1hZnRlclNldExvY2FsZShlLHQpe2lmKHZvaWQgMCE9PXQpe2xldCBlPXRoaXM7ZS51cGRhdGVEYXlOYW1lc1Jvd3MoZS5kYXlOYW1lRm9ybWF0LFwiXCIsITApLGUudXBkYXRlTW9udGhOYW1lRm9ybWF0KGUubW9udGhOYW1lRm9ybWF0LFwiXCIpfX1hZnRlclNldE1vbnRoTmFtZUZvcm1hdChlLHQpe3RoaXMudXBkYXRlTW9udGhOYW1lRm9ybWF0KGUsdCl9YWZ0ZXJTZXRNb3VudGVkKGUsdCl7c3VwZXIuYWZ0ZXJTZXRNb3VudGVkKGUsdCk7bGV0IG49dGhpcztlJiZuLm5lZWRzRXZlbnRVcGRhdGUmJihuLmNyZWF0ZU1vbnRocygpLG4ubmVlZHNFdmVudFVwZGF0ZT0hMSl9YWZ0ZXJTZXRTaG93Q2VsbEJvcmRlcnMoZSx0KXtsZXQgbz10aGlzLmNscztuW2U/XCJhZGRcIjpcInJlbW92ZVwiXShvLFwibmVvLXNob3ctY2VsbC1ib3JkZXJzXCIpLHRoaXMuY2xzPW99YWZ0ZXJTZXRTaG93V2Vla2VuZHMoZSx0KXtpZih2b2lkIDAhPT10KXtsZXQgdCxuLG8sYSxyLHM9dGhpcyx7dmRvbTpsfT1zLGM9MDtmb3IoO2M8MTI7YysrKWZvcihuPWwuY25bMF0uY25bMV0uY25bY10uY24scj1uLmxlbmd0aCxvPTE7bzxyO28rKylmb3IoYT0xO2E8ODthKyspdD1uW29dLmNuW2FdLHQuY2xzLmluY2x1ZGVzKFwibmVvLXdlZWtlbmRcIikmJihlP2RlbGV0ZSB0LnJlbW92ZURvbTp0LnJlbW92ZURvbT0hMCk7cy51cGRhdGVEYXlOYW1lc1Jvd3Mocy5kYXlOYW1lRm9ybWF0LFwiXCIpfX1hZnRlclNldFNob3dXZWVrTnVtYmVycyhlLHQpe2lmKHZvaWQgMCE9PXQpe2xldCB0LG4sbyxhPXRoaXMscj0wO2Zvcig7cjwxMjtyKyspZm9yKHQ9YS52ZG9tLmNuWzBdLmNuWzFdLmNuW3JdLmNuLG89dC5sZW5ndGgsbj0xO248bztuKyspdFtuXS5jblswXS5yZW1vdmVEb209IWU7YS51cGRhdGUoKX19YWZ0ZXJTZXRTaXhXZWVrc1Blck1vbnRoKGUsbil7aWYodm9pZCAwIT09bil7bGV0IG49dGhpcyxvPW4uY3VycmVudERhdGUsYT0wO2ZvcihvLnNldE1vbnRoKDApLG8uc2V0RGF0ZSgxKTthPDEyO2ErKyluLnZkb20uY25bMF0uY25bMV0uY25bYV0uY25bN10ucmVtb3ZlRG9tPTU9PT10LmdldFdlZWtzT2ZNb250aChvLG4ud2Vla1N0YXJ0RGF5KSYmIWUsby5zZXRNb250aChvLmdldE1vbnRoKCkrMSk7bi51cGRhdGUoKX19YWZ0ZXJTZXRXZWVrU3RhcnREYXkoZSx0KXt2b2lkIDAhPT10JiZ0aGlzLmNyZWF0ZU1vbnRocygpfWJlZm9yZVNldERheU5hbWVGb3JtYXQoZSxuKXtyZXR1cm4gdGhpcy5iZWZvcmVTZXRFbnVtVmFsdWUoZSxuLFwiZGF5TmFtZUZvcm1hdFwiLHQucHJvdG90eXBlLmRheU5hbWVGb3JtYXRzKX1iZWZvcmVTZXRNb250aE5hbWVGb3JtYXQoZSxuKXtyZXR1cm4gdGhpcy5iZWZvcmVTZXRFbnVtVmFsdWUoZSxuLFwibW9udGhOYW1lRm9ybWF0XCIsdC5wcm90b3R5cGUubW9udGhOYW1lRm9ybWF0cyl9Y2FjaGVVcGRhdGUoZT10aGlzLmN1cnJlbnREYXRlKXt0aGlzLmNhY2hlZFVwZGF0ZT1lfWNoYW5nZVllYXIoZSl7bGV0IHQsbixvLGE9dGhpczthLnVzZUFuaW1hdGlvbnMmJihhLmlzVXBkYXRpbmd8fChhLmlzVXBkYXRpbmc9ITAsYS5nZXREb21SZWN0KCkudGhlbihyPT57dD1hLnNjcm9sbE5ld1llYXJGcm9tVG9wJiZlPDB8fCFhLnNjcm9sbE5ld1llYXJGcm9tVG9wJiZlPjAsbj1hLnZkb20sbz10PzA6LXIuaGVpZ2h0LG4uY24ucHVzaCh7Y2xzOltcIm5lby1yZWxhdGl2ZVwiXSxjbjpbe2NsczpbXCJuZW8tYW5pbWF0aW9uLXdyYXBwZXJcIl0sY246W3tjbHM6W1wibmVvLWNvbnRlbnQtd3JhcHBlclwiXSxjbjpbe2NsczpbXCJuZW8teWVhci1oZWFkZXJcIl0sY246W3todG1sOmEuY3VycmVudERhdGUuZ2V0RnVsbFllYXIoKX0se2NsczpbXCJuZW8tbmF2LWJ1dHRvblwiLFwibmVvLXByZXYtYnV0dG9uXCJdfSx7Y2xzOltcIm5lby1uYXYtYnV0dG9uXCIsXCJuZW8tbmV4dC1idXR0b25cIl19XX0se2NsczpbXCJuZW8tbW9udGhzLWNvbnRhaW5lclwiXX1dfV0sc3R5bGU6e2hlaWdodDoyKnIuaGVpZ2h0K1wicHhcIix0cmFuc2Zvcm06YHRyYW5zbGF0ZVkoJHtvfXB4KWAsd2lkdGg6YCR7ci53aWR0aH1weGB9fV19KSxhLmNyZWF0ZU1vbnRocyghMCxuLmNuWzFdLmNuWzBdLmNuWzBdLmNuWzFdKSxuLmNuWzFdLmNuWzBdLmNuW3Q/XCJ1bnNoaWZ0XCI6XCJwdXNoXCJdKG4uY25bMF0pLG4uY24uc3BsaWNlKDAsMSksYS5wcm9taXNlVXBkYXRlKCkudGhlbigoKT0+e289dD8tci5oZWlnaHQ6MCxuLmNuWzBdLmNuWzBdLnN0eWxlLnRyYW5zZm9ybT1gdHJhbnNsYXRlWSgke299cHgpYCxhLnVwZGF0ZSgpLGEudGltZW91dCgzMDApLnRoZW4oKCk9PntuLmNuWzBdPW4uY25bMF0uY25bMF0uY25bdD8xOjBdLGEudHJpZ2dlclZkb21VcGRhdGUoKX0pfSl9KSkpfWNyZWF0ZURheU5hbWVzUm93KCl7bGV0IGUsdCxuPXRoaXMsbz1uLmN1cnJlbnREYXRlLGE9MCxyPXtjbHM6W1wibmVvLWNhbGVuZGFyLXdlZWtcIl0sY246W3tjbHM6W1wibmVvLWNlbGxcIixcIm5lby10b3AtbGVmdC1zcGFjZXJcIl19XX07Zm9yKG8uc2V0RGF0ZShuLmN1cnJlbnREYXRlLmdldERhdGUoKS1uLmN1cnJlbnREYXRlLmdldERheSgpK24ud2Vla1N0YXJ0RGF5KTthPDc7YSsrKXQ9e2NsczpbXCJuZW8tY2VsbFwiLFwibmVvLXdlZWtkYXktY2VsbFwiXSxodG1sOm4uaW50bEZvcm1hdF9kYXkuZm9ybWF0KG8pfSxlPW8uZ2V0RGF5KCksbi5zaG93V2Vla2VuZHN8fDAhPT1lJiY2IT09ZXx8KHQucmVtb3ZlRG9tPSEwKSxyLmNuLnB1c2godCksby5zZXREYXRlKG8uZ2V0RGF0ZSgpKzEpO3JldHVybiByfWNyZWF0ZU1vbnRoQ29udGVudChlLG4pe2xldCBvLGwsYyxoLGQsaSxtLHUsRCxwLGc9dGhpcyx7Y2FsZW5kYXJTdG9yZTp2LGV2ZW50U3RvcmU6Zn09Zyx3PW4uZ2V0RGF0ZSgpLFM9bi5nZXRNb250aCgpLHk9bi5nZXRGdWxsWWVhcigpLEY9dC5jbG9uZShuKSxNPWcuY3VycmVudERhdGUsTj1NLmdldE1vbnRoKCksaz1NLmdldEZ1bGxZZWFyKCksQz10LmdldERheXNJbk1vbnRoKG4pLGI9dC5nZXRGaXJzdERheU9mZnNldChuLGcud2Vla1N0YXJ0RGF5KSxZPTAsXz10LmNsb25lKG4pO2ZvcihwPShDK2IpLzc+NT82OjUsZD0xLWIsRi5zZXREYXRlKGQpLF8uc2V0RGF0ZShkKzcpO1k8NjtZKyspe2ZvcihEPXtjbHM6W1wibmVvLWNhbGVuZGFyLXdlZWtcIl0scmVtb3ZlRG9tOlk9PT1wJiYhZy5zaXhXZWVrc1Blck1vbnRoLGNuOlt7Y2xzOltcIm5lby1jZWxsXCIsXCJuZW8td2Vla251bWJlci1jZWxsXCJdLGh0bWw6dC5nZXRXZWVrT2ZZZWFyKF8pLHJlbW92ZURvbTohZy5zaG93V2Vla051bWJlcnN9XX0sXy5zZXREYXRlKF8uZ2V0RGF0ZSgpKzcpLHU9MDt1PDc7dSsrKW09ZD4wJiZkPD1DLG89Zy5nZXRDZWxsSWQoeSxTKzEsZCksaD1GLmdldERheSgpLGw9e2lkOm8sY2xzOm0/W1wibmVvLWNlbGxcIl06W1wibmVvLWNlbGxcIixcIm5lby1kaXNhYmxlZFwiXSx0YWJJbmRleDptPy0xOm51bGwsY246W3tjbHM6W1wibmVvLWNlbGwtY29udGVudFwiXSxodG1sOm0/ZDpnLnNob3dEaXNhYmxlZERheXM/Ri5nZXREYXRlKCk6XCJcIn1dfSxjPWwuY2xzLDAhPT1oJiY2IT09aHx8KGMucHVzaChcIm5lby13ZWVrZW5kXCIpLGcuc2hvd1dlZWtlbmRzfHwobC5yZW1vdmVEb209ITApKSxzPT09eSYmcj09PVMmJmE9PT1kJiZsLmNuWzBdLmNscy5wdXNoKFwibmVvLXRvZGF5XCIpLGs9PT15JiZOPT09UyYmZD09PXcmJmMucHVzaChcIm5lby1zZWxlY3RlZFwiKSxsLnJlbW92ZURvbXx8KGk9Zi5nZXREYXlSZWNvcmRzKEYpLGk9aS5maWx0ZXIoZT0+di5nZXQoZS5jYWxlbmRhcklkKS5hY3RpdmUpLGkubGVuZ3RoPj1nLmV2ZW50SW5kaWNhdG9ySGlnaD9jLnB1c2goXCJuZW8tZXZlbnRzLWhpZ2hcIik6aS5sZW5ndGg+PWcuZXZlbnRJbmRpY2F0b3JNZWRpdW0/Yy5wdXNoKFwibmVvLWV2ZW50cy1tZWRpdW1cIik6aS5sZW5ndGg+PWcuZXZlbnRJbmRpY2F0b3JMb3cmJmMucHVzaChcIm5lby1ldmVudHMtbG93XCIpKSxELmNuLnB1c2gobCksRi5zZXREYXRlKEYuZ2V0RGF0ZSgpKzEpLGQrKztlLmNuLnB1c2goRCl9cmV0dXJuIGV9Y3JlYXRlTW9udGhzKGU9ITEsbil7bGV0IG89dGhpcztpZihvLm1vdW50ZWQpe2xldCBhLHI9by5jdXJyZW50RGF0ZSx7dmRvbTpzfT1vLGw9bnx8cy5jblswXS5jblsxXSxjPTA7Zm9yKGwuY249W107YzwxMjtjKyspci5zZXRNb250aChjKSxyLnNldERhdGUoMSksYT17Y2xzOltcIm5lby1tb250aFwiXSxjbjpbe2NsczpbXCJuZW8tbW9udGgtbmFtZVwiXSxodG1sOm8uaW50bEZvcm1hdF9tb250aC5mb3JtYXQocil9LG8uY3JlYXRlRGF5TmFtZXNSb3coKV19LGE9by5jcmVhdGVNb250aENvbnRlbnQoYSx0LmNsb25lKHIpKSxsLmNuLnB1c2goYSk7IWUmJm8udXBkYXRlKCl9ZWxzZSBvLm5lZWRzRXZlbnRVcGRhdGU9ITB9Z2V0Q2VsbElkKGUsdCxuKXtyZXR1cm4obj1uLnRvU3RyaW5nKCkpLmxlbmd0aDwyJiYobj1cIjBcIituKSwodD10LnRvU3RyaW5nKCkpLmxlbmd0aDwyJiYodD1cIjBcIit0KSx0aGlzLmlkK1wiX19cIitlK1wiLVwiK3QrXCItXCIrbn1vbkNhbGVuZGFyU3RvcmVMb2FkKGUpe3RoaXMuZXZlbnRTdG9yZS5nZXRDb3VudCgpPjAmJnRoaXMuY3JlYXRlTW9udGhzKCl9b25DYWxlbmRhclN0b3JlUmVjb3JkQ2hhbmdlKGUpe3RoaXMuY3JlYXRlTW9udGhzKCl9b25FdmVudFN0b3JlTG9hZChlKXt0aGlzLmNhbGVuZGFyU3RvcmUuZ2V0Q291bnQoKT4wJiZ0aGlzLmNyZWF0ZU1vbnRocygpfW9uRXZlbnRTdG9yZVJlY29yZENoYW5nZShlKXt0aGlzLmNyZWF0ZU1vbnRocygpfW9uTmF2QnV0dG9uQ2xpY2soZSl7bGV0e2N1cnJlbnREYXRlOnR9PXRoaXM7dC5zZXRGdWxsWWVhcih0LmdldEZ1bGxZZWFyKCkrKGUucGF0aFswXS5jbHMuaW5jbHVkZXMoXCJuZW8tbmV4dC1idXR0b25cIik/MTotMSkpLHRoaXMuY3VycmVudERhdGU9dH1vbldoZWVsKGUpe2lmKE1hdGguYWJzKGUuZGVsdGFZKT5NYXRoLmFicyhlLmRlbHRhWCkpe2xldCB0PXRoaXMse2N1cnJlbnREYXRlOm59PXQ7bi5zZXRGdWxsWWVhcihuLmdldEZ1bGxZZWFyKCkrKGUuZGVsdGFZPjA/MTotMSkpLHQuY3VycmVudERhdGU9bn19dHJpZ2dlclZkb21VcGRhdGUoZT0hMSl7aWYoIWUpe2xldCBlPXRoaXM7ZS5pc1VwZGF0aW5nPSEwLGUucHJvbWlzZVVwZGF0ZSgpLnRoZW4oKCk9PntlLmlzVXBkYXRpbmc9ITF9KX19dXBkYXRlRGF5TmFtZXNSb3dzKGUsdCxuPSExKXtsZXQgbz10aGlzO2lmKG8uaW50bEZvcm1hdF9kYXk9bmV3IEludGwuRGF0ZVRpbWVGb3JtYXQoby5sb2NhbGUse3dlZWtkYXk6ZX0pLHZvaWQgMCE9PXQpe2xldCBlLHQsYSxyPW8uY3VycmVudERhdGUse3Zkb206c309byxsPTE7Zm9yKHIuc2V0RGF0ZShvLmN1cnJlbnREYXRlLmdldERhdGUoKS1vLmN1cnJlbnREYXRlLmdldERheSgpK28ud2Vla1N0YXJ0RGF5KTtsPDg7bCsrKXtmb3IodD0wO3Q8MTI7dCsrKWU9ci5nZXREYXkoKSxhPXMuY25bMF0uY25bMV0uY25bdF0uY25bMV0uY25bbF0sYS5odG1sPW8uaW50bEZvcm1hdF9kYXkuZm9ybWF0KHIpLG8uc2hvd1dlZWtlbmRzfHwwIT09ZSYmNiE9PWU/ZGVsZXRlIGEucmVtb3ZlRG9tOmEucmVtb3ZlRG9tPSEwO3Iuc2V0RGF0ZShyLmdldERhdGUoKSsxKX0hbiYmby51cGRhdGUoKX19dXBkYXRlSGVhZGVyWWVhcigpe3RoaXMudmRvbS5jblswXS5jblswXS5jblswXS5odG1sPXRoaXMuY3VycmVudERhdGUuZ2V0RnVsbFllYXIoKX11cGRhdGVNb250aE5hbWVGb3JtYXQoZSx0LG49ITEpe2xldCBvPXRoaXM7aWYoby5pbnRsRm9ybWF0X21vbnRoPW5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KG8ubG9jYWxlLHttb250aDplfSksdm9pZCAwIT09dCl7bGV0e2N1cnJlbnREYXRlOmUsdmRvbTp0fT1vLGE9MDtmb3IoO2E8MTI7YSsrKWUuc2V0TW9udGgoYSksZS5zZXREYXRlKDEpLHQuY25bMF0uY25bMV0uY25bYV0uY25bMF0uaHRtbD1vLmludGxGb3JtYXRfbW9udGguZm9ybWF0KGUpOyFuJiZvLnVwZGF0ZSgpfX19ZXhwb3J0IGRlZmF1bHQgTmVvLnNldHVwQ2xhc3MobCk7Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9