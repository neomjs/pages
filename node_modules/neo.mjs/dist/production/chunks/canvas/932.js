export const __webpack_esm_id__=932;export const __webpack_esm_ids__=[932];export const __webpack_esm_modules__={855(e,t,r){r.d(t,{A:()=>n});var a=r(247);class l extends a.A{static config={className:"Portal.canvas.Base",remote:{app:["clearGraph","initGraph","pause","resume","setTheme","updateMouseState","updateSize"]},theme_:"light"};animationId=null;canvasId=null;canvasSize=null;context=null;gradients={};isPaused=!1;mouse={x:-1e3,y:-1e3};time=0;renderLoop=this.render.bind(this);afterSetTheme(e,t){e&&this.canvasSize&&this.updateResources?.(this.canvasSize.width,this.canvasSize.height)}get canRender(){return!(!this.context||this.isPaused)}clearGraph(){let e=this;e.context=null,e.canvasId=null,e.canvasSize=null,e.animationId=null,e.isPaused=!1,e.gradients={},e.mouse={x:-1e3,y:-1e3},e.time=0}initGraph({canvasId:e,windowId:t}){let r=this,a=r.canvasId!==e;r.canvasId=e,r.waitForCanvas(e,t,a)}onMouseClick(e){}pause(){this.isPaused=!0}render(){}resume(){let e=this;e.isPaused&&(e.isPaused=!1,e.renderLoop())}setTheme(e){this.theme=e}updateMouseState(e){let t=this;e.leave?(t.mouse.x=-1e3,t.mouse.y=-1e3):(void 0!==e.x&&(t.mouse.x=e.x),void 0!==e.y&&(t.mouse.y=e.y),e.click&&t.onMouseClick(e))}updateSize(e){let t=this;t.canvasSize=e,t.context&&(t.context.canvas.width=e.width,t.context.canvas.height=e.height,t.updateResources?.(e.width,e.height))}waitForCanvas(e,t,r){let a=this,l=Neo.currentWorker.canvasWindowMap[e]?.[t];l?(a.context=l.getContext("2d"),a.updateSize({width:l.width,height:l.height}),a.onGraphMounted?.(l.width,l.height),r&&!a.animationId&&a.renderLoop()):setTimeout(a.waitForCanvas.bind(a,e,t,r),50)}}const n=Neo.setupClass(l)},932(e,t,r){r.d(t,{default:()=>s});var a=r(855);const l="function"==typeof requestAnimationFrame,n=30;class i extends a.A{static colors={dark:{background:["rgba(30, 30, 35, 1)","rgba(20, 20, 25, 1)"],particlePalette:["#E0E0E0","#00BFFF","#3E63DD","#8BA6FF"],hexLine:"rgba(139, 166, 255, 0.1)",hexActive:"rgba(0, 191, 255, 0.15)",activePalette:["#00BFFF","#536DFE","#3E63DD","#00E5FF"],kernel:"rgba(62, 99, 221, 0.08)",runner:"#00BFFF",runnerPalette:["#00BFFF","#536DFE","#3E63DD","#00E5FF"],agentHead:"#FFFFFF",superHex:"rgba(62, 99, 221, 0.3)",strata:"rgba(139, 166, 255, 0.08)"},light:{background:["rgba(255, 255, 255, 1)","rgba(245, 247, 255, 1)"],particlePalette:["#3E63DD","#00BFFF","#536DFE","#283593"],hexLine:"rgba(62, 99, 221, 0.25)",hexActive:"rgba(0, 191, 255, 0.2)",activePalette:["#00BFFF","#536DFE","#3E63DD","#00E5FF"],kernel:"rgba(62, 99, 221, 0.08)",runner:"#00BFFF",runnerPalette:["#00BFFF","#536DFE","#3E63DD","#00E5FF"],agentHead:"#3E63DD",superHex:"rgba(62, 99, 221, 0.3)",strata:"rgba(62, 99, 221, 0.05)"}};static config={className:"Portal.canvas.ServicesCanvas",remote:{app:["updateSize"]},singleton:!0};animationId=null;canvasId=null;canvasSize=null;context=null;cellBuffer=null;runnerBuffer=null;kernelBuffer=null;strataBuffer=null;particleBuffer=null;projectionPoint={x:0,y:0,scale:0,visible:!1};projectionMatrix={cx:0,cy:0,cosX:0,sinX:0,cosY:0,sinY:0};superHexes=[];scale=1;rotation={x:-.4,y:0};clearGraph(){let e=this;super.clearGraph(),e.cellBuffer=null,e.runnerBuffer=null,e.kernelBuffer=null,e.strataBuffer=null,e.particleBuffer=null,e.superHexes=[],e.scale=1}onGraphMounted(e,t){this.updateSize({width:e,height:t})}drawHex(e,t,r,a,l){let n,i=this,s=!0;e.beginPath();for(let o=0;o<6;o++){const c=60*o+30,h=Math.PI/180*c,u=t+l*Math.cos(h),f=r+l*Math.sin(h);n=i.project(u,f,a),s?(e.moveTo(n.x,n.y),s=!1):e.lineTo(n.x,n.y)}e.closePath()}drawKernel(e,t,r){let a=this;if(!a.kernelBuffer)return;const l=a.kernelBuffer,n=l.length/2,i=a.scale,s=120*i,o=a.constructor.colors[a.theme];e.strokeStyle=o.kernel,e.lineWidth=2*i,e.lineJoin="round";let c=20*Math.sin(.2*a.time)*i,h=20*Math.cos(.2*a.time)*i;e.beginPath();for(let t=0;t<n;t++){let r=l[2*t]+c,n=l[2*t+1]+h;a.drawHex(e,r,n,400,s)}e.stroke()}drawStrata(e,t,r){let a=this;if(!a.strataBuffer)return;const l=a.strataBuffer,n=a.scale,i=a.constructor.colors[a.theme];e.fillStyle=i.strata;let s=30*Math.sin(.15*a.time)*n,o=30*Math.cos(.15*a.time)*n;for(let t=0;t<15;t++){let r=4*t,i=l[r]+s,c=l[r+1]+o,h=l[r+2],u=l[r+3]*n;a.drawHex(e,i,c,h,u),e.fill()}}drawGraph(e,t,r){let a=this;if(!a.cellBuffer)return;const l=a.cellBuffer,i=l.length/8,s=a.constructor.colors[a.theme],o=a.scale,c=n*o;e.lineWidth=1*o,e.lineJoin="round",e.beginPath(),e.strokeStyle=s.hexLine;for(let t=0;t<i;t++){let r=8*t,n=l[r+2],i=l[r+3],s=l[r+4];if(l[r+5]<=.01&&s>.1){let t=.95*c*s;a.drawHex(e,n,i,0,t)}}e.stroke(),e.lineWidth=2*o;for(let t of a.superHexes){let r=t.centerIdx,n=l[r+2],i=l[r+3],h=l[r+7],u=0;if(u=0===t.state?t.age/30:1===t.state?1:1-t.age/30,u>0){let t=s.activePalette[h];e.beginPath(),a.drawHex(e,n,i,0,2.5*c*u),e.strokeStyle=t,e.globalAlpha=.3*u,e.stroke(),e.fillStyle=s.superHex,e.fill();let r=a.project(n,i,0);e.beginPath(),e.arc(r.x,r.y,4*o*u*r.scale,0,2*Math.PI),e.fillStyle=t,e.globalAlpha=.8*u,e.fill()}}e.globalAlpha=1,e.lineWidth=1*o;for(let t=0;t<i;t++){let r=8*t,n=l[r+2],i=l[r+3],h=l[r+4],u=l[r+5],f=l[r+7];if(u>.01&&h>.5){let t=c*(.95+.1*u),r=s.activePalette[f];if(e.beginPath(),a.drawHex(e,n,i,0,t),e.fillStyle=s.hexActive,e.globalAlpha=.4*u,e.fill(),e.strokeStyle=r,e.lineWidth=(1+u)*o,e.globalAlpha=.8*u,e.stroke(),u>.3){e.beginPath();let l=-50*u;a.drawHex(e,n,i,l,t),e.strokeStyle=r,e.globalAlpha=.4*u,e.lineWidth=1*o,e.stroke()}e.globalAlpha=1,e.lineWidth=1*o}}}drawRunners(e){let t=this;if(!t.runnerBuffer)return;const r=t.runnerBuffer,a=t.constructor.colors[t.theme],l=t.scale,i=t.projectionPoint;e.lineCap="round";for(let s=0;s<30;s++){let o=10*s,c=r[o],h=r[o+1],u=r[o+2],f=r[o+3],d=r[o+5],p=r[o+7],g=r[o+8],x=r[o+9];if(t.project(c,h,0),!i.visible)continue;let m=i.x,B=i.y,M=i.scale,b=a.runnerPalette[p];if(0===g){let r=u-c,n=f-h,s=Math.sqrt(r*r+n*n);if(s>0){let o=12*d*l,u=c-r/s*o,f=h-n/s*o;t.project(u,f,0);let p=i.x,g=i.y,x=e.createLinearGradient(p,g,m,B);x.addColorStop(0,"rgba(0,0,0,0)"),x.addColorStop(.2,b),x.addColorStop(.6,b),x.addColorStop(1,a.agentHead),e.beginPath(),e.strokeStyle=x,e.lineWidth=3*l*M,e.moveTo(p,g),e.lineTo(m,B),e.stroke()}}else if(1===g){let t=n*l*1.5*x*M;e.beginPath(),e.arc(m,B,t,0,2*Math.PI),e.strokeStyle=b,e.lineWidth=2*l*M*(1-x),e.stroke(),e.beginPath(),e.moveTo(m,B),e.lineTo(m,B-30*l*M*Math.sin(x*Math.PI)),e.strokeStyle=a.agentHead,e.lineWidth=2*l*M,e.stroke()}e.beginPath(),e.fillStyle=a.agentHead;let F=4*l*M;e.moveTo(m,B-F),e.lineTo(m+F,B),e.lineTo(m,B+F),e.lineTo(m-F,B),e.closePath(),e.fill(),e.shadowBlur=10*l,e.shadowColor=b,e.shadowBlur=0}}drawParticles(e){let t=this;if(!t.particleBuffer)return;const r=t.particleBuffer,a=t.constructor.colors[t.theme],l=t.scale,n=t.projectionPoint;for(let i=0;i<200;i++){let s=8*i,o=r[s+6];if(o>0){let i=r[s],c=r[s+1],h=r[s+2],u=3*l*o;if(t.project(i,c,h),n.visible){let t=u*n.scale,l=r[s+7];e.fillStyle=a.particlePalette[l],e.globalAlpha=o,e.fillRect(n.x-t/2,n.y-t/2,t,t)}}}e.globalAlpha=1}initParticles(){this.particleBuffer||(this.particleBuffer=new Float32Array(1600))}initKernel(e,t){let r=this;const a=120*r.scale,l=1.5*a,n=a*Math.sqrt(3),i=Math.ceil(e/l)+4,s=Math.ceil(t/n)+4,o=i*s;r.kernelBuffer=new Float32Array(2*o);let c=0,h=-2*l,u=-2*n;for(let e=0;e<i;e++)for(let t=0;t<s;t++){let a=h+e*l,i=u+t*n;e%2==1&&(i+=n/2),r.kernelBuffer[2*c]=a,r.kernelBuffer[2*c+1]=i,c++}}initNodes(e,t){let r=this;const a=r.scale,l=n*a,i=1.5*l,s=l*Math.sqrt(3),o=Math.ceil(e/i)+2,c=Math.ceil(t/s)+12,h=o*c;r.cellBuffer&&r.cellBuffer.length===8*h||(r.cellBuffer=new Float32Array(8*h));const u=r.cellBuffer;let f=0;for(let e=-1;e<o;e++)for(let t=-10;t<c-10;t++){let r=e*i,a=t*s;e%2==1&&(a+=s/2);let l=8*f;if(u[l]=e,u[l+1]=t,u[l+2]=r,u[l+3]=a,u[l+4]=1,u[l+5]=0,u[l+6]=0,u[l+7]=Math.floor(4*Math.random()),f++,f>=h)break}}initRunners(e,t){let r=this;r.runnerBuffer||(r.runnerBuffer=new Float32Array(300));const a=r.runnerBuffer;for(let l=0;l<30;l++){r.resetRunner(l,e,t);let n=10*l;a[n+4]=Math.random(),a[n+8]=0,a[n+9]=0}}initStrata(e,t){this.strataBuffer=new Float32Array(60);const r=this.strataBuffer;for(let a=0;a<15;a++){let l=4*a;r[l]=(Math.random()-.5)*e*2,r[l+1]=(Math.random()-.5)*t*3,r[l+2]=150+150*Math.random(),r[l+3]=90+Math.random()*n*4}}findNearestNode(e,t){let r=this.cellBuffer,a=r.length/8,l=1/0,n=-1;for(let i=0;i<a;i++){let a=8*i,s=(r[a+2]-e)**2+(r[a+3]-t)**2;s<l&&(l=s,n=a)}return n}resetRunner(e,t,r){let a=this,l=a.runnerBuffer,n=a.cellBuffer,i=10*e,s=n.length/8,o=8*Math.floor(Math.random()*s);l[i]=n[o+2],l[i+1]=n[o+3],l[i+2]=l[i],l[i+3]=l[i+1],l[i+4]=1,l[i+5]=(4*Math.random()+5)*a.scale,l[i+6]=o,l[i+7]=Math.floor(4*Math.random()),l[i+8]=0,l[i+9]=0}spawnParticles(e,t,r,a){let l=this;if(!l.particleBuffer)return;const n=l.particleBuffer,i=l.scale;let s=0;for(let l=0;l<200;l++){let o=8*l;if(n[o+6]<=0){let l=Math.random()*Math.PI*2,c=(3*Math.random()+2)*i;if("implode"===a){let r=60*i;n[o]=e+Math.cos(l)*r,n[o+1]=t+Math.sin(l)*r,n[o+2]=0,n[o+3]=-Math.cos(l)*c,n[o+4]=-Math.sin(l)*c,n[o+5]=0}else"upload"===a?(n[o]=e+20*(Math.random()-.5)*i,n[o+1]=t+20*(Math.random()-.5)*i,n[o+2]=0,n[o+3]=0,n[o+4]=0,n[o+5]=1.5*-c,n[o+4]=-1*i,n[o+5]=-5*i):(n[o]=e,n[o+1]=t,n[o+2]=0,n[o+3]=Math.cos(l)*c,n[o+4]=Math.sin(l)*c,n[o+5]=0);if(n[o+6]=1,n[o+7]=Math.floor(4*Math.random()),s++,s>=r)break}}}render(){let e=this;if(!e.canRender)return;const t=e.context,r=e.canvasSize?.width||100,a=e.canvasSize?.height||50;e.time+=.01,e.cellBuffer||e.initNodes(r,a),e.kernelBuffer||e.initKernel(r,a),e.strataBuffer||e.initStrata(r,a),e.runnerBuffer||e.initRunners(r,a),e.particleBuffer||e.initParticles(),e.updatePhysics(r,a),e.updateRotation(r,a),e.updateSuperHexes(r,a),e.updateRunners(r,a),e.updateParticles(),e.updateProjection(r,a),t.clearRect(0,0,r,a),e.gradients.bgGradient&&(t.fillStyle=e.gradients.bgGradient,t.fillRect(0,0,r,a)),e.drawKernel(t,r,a),e.drawStrata(t,r,a),e.drawGraph(t,r,a),e.drawRunners(t),e.drawParticles(t),e.animationId=l?requestAnimationFrame(e.renderLoop):setTimeout(e.renderLoop,1e3/60)}updateParticles(){if(!this.particleBuffer)return;const e=this.particleBuffer;for(let t=0;t<200;t++){let r=8*t;e[r+6]>0&&(e[r]+=e[r+3],e[r+1]+=e[r+4],e[r+2]+=e[r+5],e[r+6]-=.03)}}updateSuperHexes(e,t){let r=this;if(r.cellBuffer){if(r.superHexes.length<5){const e=r.cellBuffer,t=e.length/8;for(let a=0;a<20;a++){let a=8*Math.floor(Math.random()*t);if(e[a+6]>3){r.superHexes.push({centerIdx:a,age:0,state:0,neighbors:r.findNeighbors(a)});let t=e[a+2],l=e[a+3];r.spawnParticles(t,l,12,"implode"),e[a+6]=0;break}}}for(let e=r.superHexes.length-1;e>=0;e--){let t=r.superHexes[e];if(t.age++,0===t.state&&t.age>30)t.state=1,t.age=0;else if(1===t.state&&t.age>120)t.state=2,t.age=0;else if(2===t.state&&t.age>30){let a=t.centerIdx,l=r.cellBuffer[a+2],n=r.cellBuffer[a+3];r.spawnParticles(l,n,12,"upload"),t.neighbors.forEach(e=>{r.cellBuffer[e+4]=1}),r.superHexes.splice(e,1);continue}let a=1;a=0===t.state?1-t.age/30:1===t.state?0:t.age/30,t.neighbors.forEach(e=>{r.cellBuffer[e+4]=a})}}}findNeighbors(e){let t=this.cellBuffer,r=t[e+2],a=t[e+3],l=[e],i=t.length/8,s=this.scale,o=n*s*2.1;for(let n=0;n<i;n++){let i=8*n;if(i===e)continue;let s=t[i+2],c=t[i+3];Math.sqrt((s-r)**2+(c-a)**2)<o&&l.push(i)}return l}updatePhysics(e,t){let r=this;if(!r.cellBuffer)return;const a=r.cellBuffer,l=a.length/8,n=r.mouse.x,i=r.mouse.y,s=r.scale;for(let e=0;e<l;e++){let t=8*e,r=a[t+2],l=a[t+3],o=0;if(-1e3!==n){let e=r-n,t=l-i,a=e*e+t*t,c=250*s;a<c*c&&(o=(c-Math.sqrt(a))/c,o=Math.pow(o,2))}let c=a[t+5],h=.8*o;c>h?a[t+5]*=.9:a[t+5]+=.3*(h-c),a[t+5]<.001&&(a[t+5]=0),a[t+6]>0&&(a[t+6]-=.05,a[t+6]<0&&(a[t+6]=0))}}updateRunners(e,t){let r=this;if(!r.runnerBuffer)return;const a=r.runnerBuffer,l=r.cellBuffer,i=r.scale;for(let s=0;s<30;s++){let o=10*s,c=a[o+8];if(0===c){let c=a[o+4],h=a[o+5];if(c<1){let e=a[o],t=a[o+1],n=a[o+2],i=a[o+3],s=n-e,c=i-t,u=Math.sqrt(s*s+c*c);if(u<h){a[o]=n,a[o+1]=i,a[o+4]=1;let e=r.findNearestNode(n,i);-1!==e&&Math.random()>.8?(a[o+8]=1,a[o+9]=0,a[o+6]=e):-1!==e&&(l[e+5]=1,l[e+6]+=.5,l[e+7]=a[o+7],a[o+6]=e)}else a[o]+=s/u*h,a[o+1]+=c/u*h}else{let l=a[o+6];if(void 0!==l&&-1!==l){let l=[1,1,1,1,1,1];if(-1e3!==r.mouse.x){let e=a[o],t=a[o+1];for(let a=0;a<6;a++){let s=(30+60*a)*Math.PI/180,o=n*i*Math.sqrt(3),c=e+Math.cos(s)*o,h=t+Math.sin(s)*o,u=(c-r.mouse.x)**2+(h-r.mouse.y)**2;l[a]+=1e5/(u+100)*5}}let c=l.reduce((e,t)=>e+t,0),h=Math.random()*c,u=0,f=0;for(let e=0;e<6;e++)if(u+=l[e],h<=u){f=e;break}let d=(30+60*f)*Math.PI/180,p=n*i*Math.sqrt(3),g=a[o],x=a[o+1],m=g+Math.cos(d)*p,B=x+Math.sin(d)*p;if(m<-50||m>e+50||B<-500||B>t+50){r.resetRunner(s,e,t);continue}a[o+2]=m,a[o+3]=B,a[o+4]=0}else r.resetRunner(s,e,t)}}else if(1===c){a[o+9]+=.02;let e=a[o+6];-1!==e&&(l[e+5]=.5+.5*Math.sin(10*a[o+9])),a[o+9]>=1&&(a[o+8]=0,-1!==e&&(l[e+6]+=5,l[e+5]=1,l[e+7]=a[o+7]))}}}updateRotation(e,t){let r=this,a=r.mouse.x,l=r.mouse.y,n=-.4,i=0;-1e3!==a&&(i=.4*(a/e-.5),n=.4*(l/t-.5)-.4),r.rotation.x+=.05*(n-r.rotation.x),r.rotation.y+=.05*(i-r.rotation.y)}updateProjection(e,t){let r=this,a=r.projectionMatrix;a.cx=e/2,a.cy=t/2,a.cosX=Math.cos(r.rotation.x),a.sinX=Math.sin(r.rotation.x),a.cosY=Math.cos(r.rotation.y),a.sinY=Math.sin(r.rotation.y)}project(e,t,r){let a=this.projectionMatrix,l=this.projectionPoint,n=1e3,i=e-a.cx,s=t-a.cy,o=r,c=i*a.cosY-o*a.sinY,h=o*a.cosY+i*a.sinY,u=s*a.cosX-h*a.sinX,f=h*a.cosX+s*a.sinX,d=n/(n+f);return l.x=c*d+a.cx,l.y=u*d+a.cy,l.scale=d,l.visible=f>-n,l}updateResources(e,t){let r=this,a=r.context;if(!a)return;const l=r.constructor.colors[r.theme],n=a.createLinearGradient(0,0,e,t);n.addColorStop(0,l.background[0]),n.addColorStop(1,l.background[1]),r.gradients.bgGradient=n}updateSize(e){let t=this;t.canvasSize=e,t.scale=Math.sqrt(e.width*e.height/2073600),t.context&&(t.context.canvas.width=e.width,t.context.canvas.height=e.height,t.cellBuffer=null,t.runnerBuffer=null,t.kernelBuffer=null,t.strataBuffer=null,t.debrisBuffer=null,t.initNodes(e.width,e.height),t.updateResources(e.width,e.height))}}const s=Neo.setupClass(i)}};