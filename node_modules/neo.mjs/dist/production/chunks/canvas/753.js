export const __webpack_esm_id__=753;export const __webpack_esm_ids__=[753];export const __webpack_esm_modules__={753(e,t,a){a.d(t,{default:()=>d});var s=a(855);const o="function"==typeof requestAnimationFrame,l="#3E63DD",r="#536DFE",n="#00BFFF",i=150;class h extends s.A{static colors={dark:{agentHead:"#FFFFFF",background:["rgba(62, 99, 221, 0.15)","rgba(139, 166, 255, 0.15)"],nodeHigh:"#FFFFFF",packet:"#FFFFFF",shockwave:"#FFFFFF",spark:"#4B0082"},light:{agentHead:"#3E63DD",background:["rgba(62, 99, 221, 0.05)","rgba(139, 166, 255, 0.05)"],nodeHigh:"#3E63DD",packet:"#3E63DD",shockwave:"#3E63DD",spark:"#4B0082"}};static config={className:"Portal.canvas.HomeCanvas",singleton:!0};agentBuffer=null;nodeBuffer=null;packetBuffer=null;shockwaves=[];sparks=[];scale=1;clearGraph(){let e=this;super.clearGraph(),e.nodeBuffer=null,e.agentBuffer=null,e.packetBuffer=null,e.shockwaves=[],e.sparks=[],e.scale=1}onGraphMounted(e,t){this.updateSize({width:e,height:t})}drawAgents(e){let t=this;if(!t.agentBuffer)return;const a=t.agentBuffer,s=t.constructor.colors[t.theme],o=t.scale;e.strokeStyle=n,e.fillStyle=s.agentHead,e.lineCap="round";for(let s=0;s<20;s++){let l=6*s,r=a[l],n=a[l+1],i=a[l+2],h=a[l+3],d=a[l+5];Math.sqrt(i*i+h*h)>.1*o&&(e.beginPath(),e.lineWidth=2*o,e.globalAlpha=.6,e.moveTo(r,n),e.lineTo(r-4*i,n-4*h),e.stroke()),e.beginPath(),e.globalAlpha=1===d?1:.8;let c=(1===d?3:2)*o;e.arc(r,n,c,0,2*Math.PI),e.fill(),1===d&&(e.beginPath(),e.lineWidth=1*o,e.globalAlpha=.3,e.arc(r,n,(8+2*Math.sin(10*t.time))*o,0,2*Math.PI),e.stroke())}e.globalAlpha=1}drawNetwork(e,t,a){let s=this;if(!s.nodeBuffer)return;const o=s.nodeBuffer,h=i,d=s.mouse.x,c=s.mouse.y,f=t/2,u=a/2,p=s.constructor.colors[s.theme],g=s.scale;e.lineWidth=1*g;for(let t=0;t<h;t++){let a=9*t,s=o[a+5],i=o[a+6],p=2===s?.05:1===s?.02:.01,m=(-1e3!==d?d-f:0)*p,M=(-1e3!==c?c-u:0)*p,k=o[a]+m,w=o[a+1]+M;for(let a=t+1;a<h;a++){let h=9*a,p=o[h+5],m=o[h+6];if(!(i===m&&-1!==i||i===a||m===t||-1===i&&-1===m))continue;let M=2===p?.05:1===p?.02:.01,v=(-1e3!==d?d-f:0)*M,b=(-1e3!==c?c-u:0)*M,x=o[h]+v,y=o[h+1]+b,B=k-x,S=w-y,A=B*B+S*S;if(A<4e4*g*g){let t=Math.sqrt(A),a=1-t/(200*g);a*=.2+.1*s;let o=(k+x)/2-d,i=(w+y)/2-c;o*o+i*i<1e4*g*g?(a=Math.min(a+.5,1),e.strokeStyle=n,e.lineWidth=1.5*g):(e.strokeStyle=2===s?l:r,e.lineWidth=(1-t/(200*g)+.5)*g),e.beginPath(),e.globalAlpha=.5*a,e.moveTo(k,w),e.lineTo(x,y),e.stroke()}}}for(let t=0;t<h;t++){let a=9*t,i=o[a+4],h=o[a+5],m=o[a+6],M=o[a+7],k=o[a+8];if(g<.5&&0===h)continue;let w=2===h?.05:1===h?.02:.01,v=(-1e3!==d?d-f:0)*w,b=(-1e3!==c?c-u:0)*w,x=o[a]+v,y=o[a+1]+b,B=x-d,S=y-c,A=Math.sqrt(B*B+S*S)<50*g;s.shockwaves.length>0&&s.shockwaves.forEach(e=>{let t=Math.sqrt((x-e.x)**2+(y-e.y)**2),a=e.age*e.speed;Math.abs(t-a)<20*g&&(A=!0)}),e.beginPath();let P=-1===m?1.5*i:i;P*=1+.15*Math.sin(2*s.time+M)+k,A&&(P*=1.5),e.arc(x,y,P,0,2*Math.PI),k>.1?(e.fillStyle=n,e.globalAlpha=Math.min(1,.5+k)):2===h?(e.fillStyle=A?p.nodeHigh:l,e.globalAlpha=A?1:.8):-2===m?(e.fillStyle=n,e.globalAlpha=.6+.3*Math.sin(10*s.time+M)):1===h?(e.fillStyle=A?n:r,e.globalAlpha=.5):(e.fillStyle="#808080",e.globalAlpha=.2),e.fill()}e.globalAlpha=1}drawPackets(e){let t=this;if(!t.packetBuffer)return;const a=t.packetBuffer,s=t.constructor.colors[t.theme];e.fillStyle=s.packet,e.shadowBlur=5,e.shadowColor=n;for(let t=0;t<20;t++){let s=5*t,o=a[s+4];if(o>0){let t=a[s],l=a[s+1];e.beginPath(),e.globalAlpha=Math.min(2*o,1),e.arc(t,l,2,0,2*Math.PI),e.fill()}}e.shadowBlur=0,e.globalAlpha=1}drawShockwaves(e){let t=this;if(0===t.shockwaves.length)return;const a=t.constructor.colors[t.theme],s=t.scale;e.lineCap="round";for(let o=t.shockwaves.length-1;o>=0;o--){let r=t.shockwaves[o];r.age++;let i=r.age/r.maxAge;if(i>=1){t.shockwaves.splice(o,1);continue}let h=(1-Math.pow(1-i,3))*r.maxRadius,d=1-i;e.beginPath(),e.strokeStyle=n,e.globalAlpha=.8*d,e.lineWidth=4*(1-i)*s,e.shadowBlur=10*s,e.shadowColor=n,e.arc(r.x,r.y,.99*h,0,2*Math.PI),e.stroke(),e.beginPath(),e.strokeStyle=l,e.globalAlpha=.8*d,e.lineWidth=4*(1-i)*s,e.shadowBlur=10*s,e.shadowColor=l,e.arc(r.x,r.y,1.01*h,0,2*Math.PI),e.stroke(),e.beginPath(),e.strokeStyle=a.shockwave,e.globalAlpha=d,e.lineWidth=6*(1-i)*s,e.shadowBlur=20*s,e.shadowColor=a.shockwave,e.arc(r.x,r.y,h,0,2*Math.PI),e.stroke(),e.fillStyle=l,e.globalAlpha=.05*d,e.fill()}e.shadowBlur=0,e.globalAlpha=1}drawSparks(e){let t=this;if(0===t.sparks.length)return;const a=t.constructor.colors[t.theme],s=t.scale;e.strokeStyle=a.spark,e.shadowBlur=0,e.lineWidth=2*s;for(let a of t.sparks)e.globalAlpha=a.life,e.beginPath(),e.moveTo(a.x,a.y),e.lineTo(a.x-2*a.vx,a.y-2*a.vy),e.stroke();e.globalAlpha=1}initAgents(e,t){let a=this;a.agentBuffer||(a.agentBuffer=new Float32Array(120));const s=a.agentBuffer,o=a.scale;for(let a=0;a<20;a++){let l=6*a;s[l]=Math.random()*e,s[l+1]=Math.random()*t,s[l+2]=4*(Math.random()-.5)*o,s[l+3]=4*(Math.random()-.5)*o,s[l+4]=-1,s[l+5]=0}}initNodes(e,t){let a=this;a.nodeBuffer||(a.nodeBuffer=new Float32Array(1350));const s=a.nodeBuffer,o=e/2,l=t/2,r=(1+Math.sqrt(5))/2,n=.8*Math.sqrt(e*t/i),h=Math.floor(15),d=a.scale;let c=[];for(let a=0;a<i;a++){let i=9*a,f=a<h;f&&c.push(a);let u=2*a*Math.PI*r,p=Math.sqrt(a)*n,g=o+p*Math.cos(u),m=l+p*Math.sin(u);g=(g%e+e)%e,m=(m%t+t)%t,s[i]=g,s[i+1]=m,s[i+2]=.2*(Math.random()-.5)*d,s[i+3]=.2*(Math.random()-.5)*d;let M=Math.floor(3*Math.random());s[i+5]=M,s[i+4]=(f?4+2*M:2+1.5*M)*d,s[i+6]=f?-1:-2,s[i+7]=Math.random()*Math.PI*2,s[i+8]=0}for(let e=h;e<i;e++){let t=9*e,a=s[t],o=s[t+1],l=1/0,r=-1;for(let e of c){let t=9*e,n=a-s[t],i=o-s[t+1],h=n*n+i*i;h<l&&(l=h,r=e)}s[t+6]=r}}initPackets(){this.packetBuffer||(this.packetBuffer=new Float32Array(100))}renderLoop=this.render.bind(this);render(){let e=this;if(!e.canRender)return;const t=e.context,a=e.canvasSize?.width||100,s=e.canvasSize?.height||50;e.time+=.01,e.nodeBuffer||e.initNodes(a,s),e.agentBuffer||e.initAgents(a,s),e.packetBuffer||e.initPackets(),e.updatePhysics(a,s),e.updateAgents(a,s),e.updatePackets(),e.updateSparks(),t.clearRect(0,0,a,s),e.gradients.bgGradient&&(t.fillStyle=e.gradients.bgGradient,t.fillRect(0,0,a,s)),e.drawNetwork(t,a,s),e.drawPackets(t),e.drawAgents(t),e.drawShockwaves(t),e.drawSparks(t),e.animationId=o?requestAnimationFrame(e.renderLoop):setTimeout(e.renderLoop,1e3/60)}onMouseClick(e){let t=this,a=t.scale;t.shockwaves.push({x:e.x,y:e.y,age:0,maxAge:40,maxRadius:300*a});for(let s=0;s<40;s++){let s=Math.random()*Math.PI*2,o=(15*Math.random()+5)*a;t.sparks.push({x:e.x,y:e.y,vx:Math.cos(s)*o,vy:Math.sin(s)*o,life:1,decay:.02+.03*Math.random()})}}updatePackets(){let e=this;if(!e.packetBuffer||!e.nodeBuffer)return;const t=e.packetBuffer,a=e.nodeBuffer,s=e.scale;for(let e=0;e<20;e++){let o=5*e;if(t[o+4]<=0){if(Math.random()<.02){let e=9*Math.floor(150*Math.random()),l=a[e+6];if(-1!==l){let r=9*l,n=a[e],i=a[e+1],h=a[r]-n,d=a[r+1]-i,c=Math.sqrt(h*h+d*d);if(c<200*s){t[o]=n,t[o+1]=i;let e=4*s;t[o+2]=h/c*e,t[o+3]=d/c*e,t[o+4]=c/e}}}}else t[o]+=t[o+2],t[o+1]+=t[o+3],t[o+4]--}}updateSparks(){let e=this;for(let t=e.sparks.length-1;t>=0;t--){let a=e.sparks[t];a.x+=a.vx,a.y+=a.vy,a.vx*=.9,a.vy*=.9,a.life-=a.decay,a.life<=0&&e.sparks.splice(t,1)}}updateAgents(e,t){let a=this;if(!a.agentBuffer||!a.nodeBuffer)return;const s=a.agentBuffer,o=a.nodeBuffer,l=a.mouse.x,r=a.mouse.y,n=a.scale;for(let a=0;a<20;a++){let i=6*a,h=s[i+4],d=s[i+5];if(-1===h||Math.random()<.005){const e=Math.floor(15);s[i+4]=Math.floor(Math.random()*e),h=s[i+4],s[i+5]=0}if(-1!==h&&0===d){let e=9*h,t=o[e],a=o[e+1],l=t-s[i],r=a-s[i+1],d=Math.sqrt(l*l+r*r);if(d<10*n)s[i+5]=1,s[i+2]*=.1,s[i+3]*=.1,o[e+8]=1;else{let e=.05*n;s[i+2]+=l/d*e,s[i+3]+=r/d*e}}else 1===d&&Math.random()<.02&&(s[i+4]=-1,s[i+5]=0,s[i+2]+=4*(Math.random()-.5)*n,s[i+3]+=4*(Math.random()-.5)*n);if(-1e3!==l){let e=s[i]-l,t=s[i+1]-r,a=e*e+t*t;if(a<1e4*n*n){let o=Math.sqrt(a),l=(100*n-o)/(100*n);s[i+2]+=e/o*l*1.5*n,s[i+3]+=t/o*l*1.5*n,s[i+5]=0}}let c=Math.sqrt(s[i+2]**2+s[i+3]**2);c>4*n&&(s[i+2]*=4*n/c,s[i+3]*=4*n/c),s[i]+=s[i+2],s[i+1]+=s[i+3],s[i]<0&&(s[i]=e),s[i]>e&&(s[i]=0),s[i+1]<0&&(s[i+1]=t),s[i+1]>t&&(s[i+1]=0)}}updatePhysics(e,t){let a=this;if(!a.nodeBuffer)return;const s=a.nodeBuffer,o=a.mouse.x,l=a.mouse.y,r=Math.floor(15),n=a.scale;for(let h=0;h<i;h++){let i=9*h,d=s[i+6],c=-1===d;if(!c&&(-2!==d&&Math.random()<5e-4&&(s[i+6]=-2,s[i+2]+=2*(Math.random()-.5)*n,s[i+3]+=2*(Math.random()-.5)*n),-2===d)){s[i+2]+=.1*(Math.random()-.5)*n,s[i+3]+=.1*(Math.random()-.5)*n;for(let e=0;e<r;e++){let t=9*e,a=s[t],o=s[t+1];if(Math.sqrt((a-s[i])**2+(o-s[i+1])**2)<60*n){s[i+6]=e;break}}}if(!c&&-2!==s[i+6]){let e=9*d,t=s[e],a=s[e+1],o=t-s[i],l=a-s[i+1],r=Math.sqrt(o*o+l*l);if(r>50*n){let e=5e-4*(r-50*n);s[i+2]+=o*e,s[i+3]+=l*e}}if(-1e3!==o){let e=s[i]-o,t=s[i+1]-l,a=e*e+t*t;if(a<22500*n*n){let o=Math.sqrt(a),l=(150*n-o)/(150*n);s[i+2]+=e/o*l*.5*n,s[i+3]+=t/o*l*.5*n}}if(a.shockwaves.length>0&&a.shockwaves.forEach(e=>{let t=e.age/e.maxAge;if(t<1){let a=(1-Math.pow(1-t,3))*e.maxRadius,o=s[i]-e.x,l=s[i+1]-e.y,r=Math.sqrt(o*o+l*l);if(Math.abs(r-a)<20*n){let e=1-t;s[i+2]+=o/r*e*10*n,s[i+3]+=l/r*e*10*n}}}),s[i+2]*=.95,s[i+3]*=.95,s[i+8]*=.99,c){let o=(Math.cos(.002*s[i]/n+.5*a.time)+Math.sin(.002*s[i+1]/n+.5*a.time))*Math.PI;s[i+2]+=.05*Math.cos(o)*n,s[i+3]+=.05*Math.sin(o)*n;let l=t/2,r=e/2-s[i],h=l-s[i+1],d=Math.sqrt(r*r+h*h),c=.4*Math.min(e,t);if(d>c){let e=.001*(d-c);s[i+2]+=r/d*e,s[i+3]+=h/d*e}}else Math.abs(s[i+2])<.2*n&&(s[i+2]+=.02*(Math.random()-.5)*n),Math.abs(s[i+3])<.2*n&&(s[i+3]+=.02*(Math.random()-.5)*n);s[i]+=s[i+2],s[i+1]+=s[i+3];const f=20*n;s[i]<f&&(s[i]=f,s[i+2]*=-1),s[i]>e-f&&(s[i]=e-f,s[i+2]*=-1),s[i+1]<f&&(s[i+1]=f,s[i+3]*=-1),s[i+1]>t-f&&(s[i+1]=t-f,s[i+3]*=-1)}}updateResources(e,t){let a=this,s=a.context;if(!s)return;const o=a.constructor.colors[a.theme],l=s.createLinearGradient(0,0,e,t);l.addColorStop(0,o.background[0]),l.addColorStop(1,o.background[1]),a.gradients.bgGradient=l}updateSize(e){let t=this;t.canvasSize=e,t.scale=Math.sqrt(e.width*e.height/2073600),t.context&&(t.context.canvas.width=e.width,t.context.canvas.height=e.height,t.initNodes(e.width,e.height),t.initAgents(e.width,e.height),t.updateResources(e.width,e.height))}}const d=Neo.setupClass(h)},855(e,t,a){a.d(t,{A:()=>l});var s=a(247);class o extends s.A{static config={className:"Portal.canvas.Base",remote:{app:["clearGraph","initGraph","pause","resume","setTheme","updateMouseState","updateSize"]},theme_:"light"};animationId=null;canvasId=null;canvasSize=null;context=null;gradients={};isPaused=!1;mouse={x:-1e3,y:-1e3};time=0;renderLoop=this.render.bind(this);afterSetTheme(e,t){e&&this.canvasSize&&this.updateResources?.(this.canvasSize.width,this.canvasSize.height)}get canRender(){return!(!this.context||this.isPaused)}clearGraph(){let e=this;e.context=null,e.canvasId=null,e.canvasSize=null,e.animationId=null,e.isPaused=!1,e.gradients={},e.mouse={x:-1e3,y:-1e3},e.time=0}initGraph({canvasId:e,windowId:t}){let a=this,s=a.canvasId!==e;a.canvasId=e,a.waitForCanvas(e,t,s)}onMouseClick(e){}pause(){this.isPaused=!0}render(){}resume(){let e=this;e.isPaused&&(e.isPaused=!1,e.renderLoop())}setTheme(e){this.theme=e}updateMouseState(e){let t=this;e.leave?(t.mouse.x=-1e3,t.mouse.y=-1e3):(void 0!==e.x&&(t.mouse.x=e.x),void 0!==e.y&&(t.mouse.y=e.y),e.click&&t.onMouseClick(e))}updateSize(e){let t=this;t.canvasSize=e,t.context&&(t.context.canvas.width=e.width,t.context.canvas.height=e.height,t.updateResources?.(e.width,e.height))}waitForCanvas(e,t,a){let s=this,o=Neo.currentWorker.canvasWindowMap[e]?.[t];o?(s.context=o.getContext("2d"),s.updateSize({width:o.width,height:o.height}),s.onGraphMounted?.(o.width,o.height),a&&!s.animationId&&s.renderLoop()):setTimeout(s.waitForCanvas.bind(s,e,t,a),50)}}const l=Neo.setupClass(o)}};