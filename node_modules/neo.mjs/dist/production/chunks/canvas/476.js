export const __webpack_esm_id__=476;export const __webpack_esm_ids__=[124,476];export const __webpack_esm_modules__={476(e,t,s){s.r(t),s.d(t,{default:()=>u});var a=s(124);const o="function"==typeof requestAnimationFrame,n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,i=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,r={r:64,g:196,b:255},d={influenceRange:150,minMod:.2,maxMod:1.5,pulseBounds:-200};class l extends a.default{static colors={dark:{spine:["rgba(62, 99, 221, 0.2)","rgba(64, 196, 255, 0.4)","rgba(62, 99, 221, 0.2)"]},light:{spine:["rgba(150, 150, 150, 0.1)","rgba(150, 150, 150, 0.3)","rgba(150, 150, 150, 0.1)"]}};static config={className:"Portal.canvas.TicketCanvas",remote:{app:["clearGraph","initGraph","setTheme","updateGraphData","updateSize"]},singleton:!0,theme:"light"};baseSpeed=.5;lastFrameTime=0;nodes=[];pulseY=0;pulseBottom=100;startY=0;clearGraph(){let e=this;super.clearGraph(),e.nodes=[],e.lastFrameTime=0,e.pulseBottom=0}getXAtY(e){let t=this;if(t.nodes.length<2)return t.nodes[0]?.x||38;if(e<t.nodes[0].y)return t.nodes[0].x;for(let s=0;s<t.nodes.length-1;s++){let a=t.nodes[s],o=t.nodes[s+1];if(e>=a.y&&e<=o.y){let t=(e-a.y)/(o.y-a.y);return a.x+(o.x-a.x)*t}}return t.nodes[t.nodes.length-1].x}getPhysics(e){let t=1/0,s=null;this.nodes.forEach(a=>{let o=Math.abs(e-a.y);o<t&&(t=o,s=a)});const{influenceRange:a,minMod:o,maxMod:n}=d;let i=n;if(t<a){let e=t/a;i=o+e*e*(n-o)}return{speedModifier:i,nearNode:s,minDist:t}}hexToRgb(e){e=e.replace(i,function(e,t,s,a){return t+t+s+s+a+a});const t=n.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}updateGraphData(e){let t=this;t.nodes=e.nodes||[],void 0!==e.startY&&(t.startY=e.startY),e.reset&&(t.pulseY=d.pulseBounds,t.pulseBottom=d.pulseBounds+100,t.lastFrameTime=0),t.nodes.length>0&&!t.animationId&&t.context&&t.renderLoop()}render(){let e=this;if(!e.canRender)return;const t=e.context,s=e.canvasSize?.width||800,a=e.canvasSize?.height||600,n=Date.now();let i=a;e.nodes.length>0&&(i=e.nodes[e.nodes.length-1].y);let l=n-(e.lastFrameTime||n);e.lastFrameTime=n,l>100&&(l=16);const u=e.getPhysics(e.pulseY),h=e.getPhysics(e.pulseBottom),{nearNode:c,minDist:p}=u;e.pulseY+=e.baseSpeed*u.speedModifier*l,e.pulseBottom+=e.baseSpeed*h.speedModifier*l,e.pulseBottom<e.pulseY+15&&(e.pulseBottom=e.pulseY+15),e.pulseY>i-d.pulseBounds&&(e.pulseY=d.pulseBounds,e.pulseBottom=d.pulseBounds+100);const m=e.pulseBottom-e.pulseY;let{r:g,g:f,b:x}=r;if(c&&c.color&&p<100){let t=e.hexToRgb(c.color);if(t){let e=1-p/100;g+=(t.r-g)*e,f+=(t.g-f)*e,x+=(t.b-x)*e}}const v=`rgba(${Math.round(g)}, ${Math.round(f)}, ${Math.round(x)}`;t.clearRect(0,0,s,a);const b=e.constructor.colors[e.theme],S=t.createLinearGradient(0,0,0,a);if(S.addColorStop(0,b.spine[0]),S.addColorStop(.5,b.spine[1]),S.addColorStop(1,b.spine[2]),t.strokeStyle=S,t.lineWidth=2,t.beginPath(),e.nodes.length>0){let s=e.nodes[0];t.moveTo(s.x,s.y);for(let s=1;s<e.nodes.length;s++){let a=e.nodes[s];t.lineTo(a.x,a.y)}}t.stroke();const y=e.pulseY;if(e.nodes.length>0&&y>e.nodes[0].y-m&&y<i){const s=t.createLinearGradient(0,y,0,y+m);s.addColorStop(0,`${v}, 0)`),s.addColorStop(.5,`${v}, 1)`),s.addColorStop(1,`${v}, 0)`),t.strokeStyle=s,t.lineWidth=4,t.beginPath();let a=e.getXAtY(y);t.moveTo(a,y),t.lineTo(e.getXAtY(y+m),Math.min(y+m,i)),t.stroke()}t.globalCompositeOperation="destination-out",t.fillStyle="#000",e.nodes.forEach(e=>{e.radius&&(t.beginPath(),t.arc(e.x,e.y,e.radius,0,2*Math.PI),t.fill())}),t.globalCompositeOperation="source-over",e.nodes.forEach(e=>{const s=e.radius||20,a=e.x,o=e.y,n=y+m;if(n>o-s&&y<o+s){const e=e=>{let t=e-o;return t=Math.max(-s,Math.min(s,t)),Math.asin(t/s)},i=e(y),r=e(n);t.strokeStyle=`${v}, 1)`,t.lineWidth=2,t.beginPath(),t.arc(a,o,s+2,i,r,!1),t.stroke();const d=Math.PI-i,l=Math.PI-r;t.beginPath(),t.arc(a,o,s+2,d,l,!0),t.stroke()}}),e.animationId=o?requestAnimationFrame(e.renderLoop):setTimeout(e.renderLoop,1e3/60)}}const u=Neo.setupClass(l)},124(e,t,s){s.r(t),s.d(t,{default:()=>n});var a=s(247);class o extends a.A{static config={className:"Neo.canvas.Base",remote:{app:["clearGraph","initGraph","pause","resume","setTheme","updateMouseState","updateSize"]},theme_:"light"};animationId=null;canvasId=null;canvasSize=null;context=null;gradients={};isPaused=!1;mouse={x:-1e3,y:-1e3};time=0;renderLoop=this.render.bind(this);afterSetTheme(e,t){e&&this.canvasSize&&this.updateResources?.(this.canvasSize.width,this.canvasSize.height)}get canRender(){return!(!this.context||this.isPaused)}clearGraph(){let e=this;e.context=null,e.canvasId=null,e.canvasSize=null,e.animationId=null,e.isPaused=!1,e.gradients={},e.mouse={x:-1e3,y:-1e3},e.time=0}initGraph({canvasId:e,windowId:t}){let s=this,a=s.canvasId!==e;s.canvasId=e,s.waitForCanvas(e,t,a)}onMouseClick(e){}pause(){this.isPaused=!0}render(){}resume(){let e=this;e.isPaused&&(e.isPaused=!1,e.renderLoop())}setTheme(e){this.theme=e}updateMouseState(e){let t=this;e.leave?(t.mouse.x=-1e3,t.mouse.y=-1e3):(void 0!==e.x&&(t.mouse.x=e.x),void 0!==e.y&&(t.mouse.y=e.y),e.click&&t.onMouseClick(e))}updateSize(e){let t=this;t.canvasSize=e,t.context&&(t.context.canvas.width=e.width,t.context.canvas.height=e.height,t.updateResources?.(e.width,e.height))}waitForCanvas(e,t,s){let a=this,o=Neo.currentWorker.canvasWindowMap[e]?.[t];o?(a.context=o.getContext("2d"),a.updateSize({width:o.width,height:o.height}),a.onGraphMounted?.(o.width,o.height),s&&!a.animationId&&a.renderLoop()):setTimeout(a.waitForCanvas.bind(a,e,t,s),50)}}const n=Neo.setupClass(o)}};