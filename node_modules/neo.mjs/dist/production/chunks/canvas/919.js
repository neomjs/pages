"use strict";(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[919],{919(e,a,t){t.d(a,{default:()=>n});var r=t(247);const o="#3E63DD",s="#8BA6FF",i="#40C4FF";class l extends r.A{static config={className:"Portal.canvas.HeaderCanvas",remote:{app:["clearGraph","initGraph","updateActiveId","updateGraphData","updateMouseState","updateNavRects","updateSize"]},singleton:!0};activeId=null;animationId=null;canvasId=null;canvasSize=null;context=null;gradients={};mouse={x:-1e3,y:-1e3};navRects=[];particles=[];shockwaves=[];time=0;waveBuffers={bgA:null,bgB:null,fgA:null,fgB:null};clearGraph(){let e=this;e.context=null,e.canvasId=null,e.canvasSize=null,e.navRects=[],e.particles=[],e.shockwaves=[],e.waveBuffers={bgA:null,bgB:null,fgA:null,fgB:null},e.gradients={}}initGraph({canvasId:e,windowId:a}){let t=this,r=t.canvasId!==e;t.canvasId=e;const o=()=>{const s=Neo.currentWorker.canvasWindowMap[e]?.[a];s?(t.context=s.getContext("2d"),t.initParticles(s.width,s.height),t.updateResources(s.width,s.height),r&&t.renderLoop()):setTimeout(o,50)};o()}initParticles(e,a){let t=this;t.particles=[];for(let r=0;r<60;r++){let r=Math.random()>.8;t.particles.push({isNebula:r,x:Math.random()*e,y:Math.random()*a,vx:r?.2*Math.random()+.05:.5*Math.random()+.1,vy:.2*(Math.random()-.5),size:r?30*Math.random()+20:2*Math.random()+.5,alpha:r?.15*Math.random()+.2:.4*Math.random()+.2,baseAlpha:r?.15*Math.random()+.2:.4*Math.random()+.2})}}renderLoop=this.render.bind(this);render(){let e=this;if(!e.context)return;const a=e.context,t=e.canvasSize?.width||100,r=e.canvasSize?.height||50;e.time+=.05,60!==e.particles.length&&e.initParticles(t,r),a.clearRect(0,0,t,r),e.drawAmbientBackground(a,t,r),e.drawParticles(a,t,r),e.drawAuras(a,t,r),e.drawActiveOverlay(a,t),e.drawShockwaves(a,t),setTimeout(e.renderLoop,1e3/60)}calculateStrandGeometry(e,a){let t=this;if(!Array.isArray(t.navRects)||!t.waveBuffers.fgA)return null;const r=t.waveBuffers.fgA,o=t.waveBuffers.fgB,s=Math.ceil(e/2),i=a/2,l=(a-20)/2,n=2*Math.sin(.5*t.time),h=Math.min(6+n,l);let d=.75+.25*Math.sin(.5*t.time+Math.PI/2),c=.75+.25*Math.sin(.5*t.time+Math.PI/2+Math.PI/3);for(let e=0;e<s;e++){let s=2*e,{offsetY:l,intensity:n,isIconZone:d}=t.getStreamOffset(s,a),c=Math.sin(.002*s+.1*t.time)*(20+10*n),u=2*t.time,f=h*(1-.6*d),g=4*(Math.random()-.5)*n,p=4*(Math.random()-.5)*n,v=Math.sin(.04*(s+c)-u)*f,m=Math.sin(.04*(s+c)-u+Math.PI)*f,w=0;t.shockwaves.length>0&&t.shockwaves.forEach(e=>{let a=e.age*e.speed,t=s-e.x;if(Math.abs(t)<a&&Math.abs(t)>a-60){let r=Math.sin(t/a*Math.PI*10)*(1-e.age/e.life)*20;w+=r}}),r[e]=i+v-l+g+w,o[e]=i+m+l+p+w}return{shimmerA:d,shimmerB:c,count:s}}drawParticles(e,a,t){let r=this;r.particles.forEach(o=>{o.x+=o.vx,o.y+=o.vy,o.x>a+o.size&&(o.x=-o.size),o.x<-o.size&&(o.x=a+o.size),o.y>t+o.size&&(o.y=-o.size),o.y<-o.size&&(o.y=t+o.size);let s=o.x-r.mouse.x,l=o.y-r.mouse.y,n=Math.sqrt(s*s+l*l),h=o.isNebula?150:100;if(n<h&&n>0){let e=(h-n)/h,a=o.isNebula?5:1;o.x+=s/n*e*(2/a),o.y+=l/n*e*(2/a),o.alpha=Math.min(o.baseAlpha+e*(o.isNebula?.05:.5),.8)}if(r.shockwaves.length>0&&r.shockwaves.forEach(e=>{let a=o.x-e.x,t=o.y-e.y,r=Math.sqrt(a*a+t*t),s=e.age*e.speed;if(r<s&&r>s-40){let s=2*(1-e.age/e.life);o.x+=a/r*s*5,o.y+=t/r*s*5,o.alpha=Math.min(o.alpha+.3,1)}}),o.alpha>o.baseAlpha&&(o.alpha-=.005),e.globalAlpha=o.alpha,e.beginPath(),o.isNebula){let a=e.createRadialGradient(o.x,o.y,0,o.x,o.y,o.size);a.addColorStop(0,i),a.addColorStop(1,"rgba(255,255,255,0)"),e.fillStyle=a,e.arc(o.x,o.y,o.size,0,2*Math.PI),e.fill()}else e.fillStyle=i,e.arc(o.x,o.y,o.size,0,2*Math.PI),e.fill()}),e.globalAlpha=1}drawActiveOverlay(e,a){let t=this;if(!t.activeId||!t.waveBuffers.fgA)return;const r=t.navRects.find(e=>e.id===t.activeId);if(!r)return;const o=Math.max(0,r.x-10),s=Math.min(a,r.x+r.width+10),i=Math.floor(o/2),l=Math.ceil(s/2),n=t.waveBuffers.fgA,h=t.waveBuffers.fgB;e.save(),e.lineCap="round",e.lineJoin="round",e.shadowBlur=20,e.shadowColor="#FFFFFF",e.strokeStyle="#FFFFFF",e.lineWidth=2,e.globalAlpha=.6+.2*Math.sin(3*t.time);const d=a=>{e.beginPath(),e.moveTo(2*i,a[i]);for(let t=i+1;t<=l;t++)e.lineTo(2*t,a[t]);e.stroke()};d(n),d(h),e.restore()}drawAmbientBackground(e,a,t){let r=this;if(!r.waveBuffers.bgA)return;let o=.5*r.time,s=t/2,i=.4*t,l=Math.ceil(a/10),n=r.waveBuffers.bgA,h=r.waveBuffers.bgB;for(let e=0;e<l;e++){let a=10*e;n[e]=s+Math.sin(.01*a+o)*i,h[e]=s+Math.sin(.01*a+o+Math.PI)*i}e.fillStyle=r.gradients.bgRibbon,e.beginPath(),e.moveTo(0,n[0]);for(let a=1;a<l;a++)e.lineTo(10*a,n[a]);for(let a=l-1;a>=0;a--)e.lineTo(10*a,h[a]);e.closePath(),e.fill(),e.lineWidth=15,e.lineCap="round",e.lineJoin="round";const d=(a,t)=>{e.strokeStyle=t,e.beginPath(),e.moveTo(0,a[0]);for(let t=1;t<l;t++)e.lineTo(10*t,a[t]);e.stroke()};d(n,r.gradients.bgGrad1),d(h,r.gradients.bgGrad2)}drawAuras(e,a,t){let r=this;if(!Array.isArray(r.navRects))return;const i=r.calculateStrandGeometry(a,t);if(!i)return;const{shimmerA:l,shimmerB:n,count:h}=i,d=r.waveBuffers.fgA,c=r.waveBuffers.fgB;e.fillStyle=r.gradients.fgRibbon,e.beginPath(),e.moveTo(0,d[0]);for(let a=1;a<h;a++)e.lineTo(2*a,d[a]);for(let a=h-1;a>=0;a--)e.lineTo(2*a,c[a]);e.closePath(),e.fill(),e.lineCap="round",e.lineJoin="round";const u=(a,t,r,o,s)=>{e.beginPath(),e.strokeStyle=s?"#FFFFFF":t,e.lineWidth=s?1:3,e.globalAlpha=s?r+.2:r,s?e.shadowBlur=0:(e.shadowBlur=10,e.shadowColor=o),e.moveTo(0,a[0]);for(let t=1;t<h;t++)e.lineTo(2*t,a[t]);e.stroke()};u(d,r.gradients.grad1,l,o,!1),u(c,r.gradients.grad2,n,s,!1),u(d,null,l,null,!0),u(c,null,n,null,!0),e.shadowBlur=0,e.globalAlpha=1}getStreamOffset(e,a){let t=this,r=0,o=0,s=0;const i=a/2-10;for(const a of t.navRects){const l=40;if(e>=a.x-l&&e<=a.x+a.width+l){const n=a.width/a.height<1.5,h=a.x+a.width/2,d=a.width/2+l,c=Math.abs(e-h);if(c<d){let e;if(n){let a=c/d;e=Math.pow((1+Math.cos(Math.PI*a))/2,3),s=Math.max(s,e)}else e=(1+Math.cos(Math.PI*c/d))/2;let l=n?a.height/2:a.height/2+4,u=Math.min(l,i);r=Math.max(r,u*e);let f=t.mouse.x-h,g=t.mouse.y-(a.y+a.height/2),p=Math.sqrt(f*f+g*g);p<Math.max(a.width,a.height)&&(o=Math.max(o,1-p/150))}}}return{offsetY:r,intensity:o,isIconZone:s}}drawShockwaves(e,a){let t=this;for(let r=t.shockwaves.length-1;r>=0;r--){let o=t.shockwaves[r];o.age+=1;let s=o.age/o.life;if(s>=1){t.shockwaves.splice(r,1);continue}let l=o.x-o.speed*o.age,n=o.x+o.speed*o.age,h=1-s,{height:d}=t.canvasSize;e.beginPath(),e.strokeStyle=i,e.globalAlpha=h,e.lineWidth=4*(1-s),l>0&&(e.moveTo(l,0),e.quadraticCurveTo(l-20,d/2,l,d)),n<a&&(e.moveTo(n,0),e.quadraticCurveTo(n+20,d/2,n,d)),e.stroke(),e.globalAlpha=1}}updateActiveId(e){this.activeId=e?.id||null}updateGraphData(e){}updateMouseState(e){let a=this;e.leave?(a.mouse.x=-1e3,a.mouse.y=-1e3):(void 0!==e.x&&(a.mouse.x=e.x),void 0!==e.y&&(a.mouse.y=e.y),e.click&&a.shockwaves.push({x:e.x,y:e.y,age:0,life:60,speed:15}))}updateNavRects(e){let a=e?.rects;Array.isArray(a)?this.navRects=a:this.navRects=[]}updateResources(e,a){let t=this,r=t.context;const l=Math.ceil(e/10)+1;t.waveBuffers.bgA=new Float32Array(l),t.waveBuffers.bgB=new Float32Array(l);const n=Math.ceil(e/2)+1;if(t.waveBuffers.fgA=new Float32Array(n),t.waveBuffers.fgB=new Float32Array(n),!r)return;const h=r.createLinearGradient(0,0,e,0);h.addColorStop(0,o),h.addColorStop(.5,i),h.addColorStop(1,o),t.gradients.grad1=h;const d=r.createLinearGradient(0,0,e,0);d.addColorStop(0,s),d.addColorStop(.5,i),d.addColorStop(1,s),t.gradients.grad2=d;const c=r.createLinearGradient(0,0,e,0);c.addColorStop(0,"rgba(62, 99, 221, 0.05)"),c.addColorStop(.5,"rgba(64, 196, 255, 0.1)"),c.addColorStop(1,"rgba(62, 99, 221, 0.05)"),t.gradients.fgRibbon=c;const u=r.createLinearGradient(0,0,e,0);u.addColorStop(0,"rgba(62, 99, 221, 0.1)"),u.addColorStop(.5,"rgba(64, 196, 255, 0.2)"),u.addColorStop(1,"rgba(62, 99, 221, 0.1)"),t.gradients.bgGrad1=u;const f=r.createLinearGradient(0,0,e,0);f.addColorStop(0,"rgba(139, 166, 255, 0.1)"),f.addColorStop(.5,"rgba(64, 196, 255, 0.2)"),f.addColorStop(1,"rgba(139, 166, 255, 0.1)"),t.gradients.bgGrad2=f;const g=r.createLinearGradient(0,0,e,0);g.addColorStop(0,"rgba(62, 99, 221, 0.02)"),g.addColorStop(.5,"rgba(64, 196, 255, 0.05)"),g.addColorStop(1,"rgba(62, 99, 221, 0.02)"),t.gradients.bgRibbon=g}updateSize(e){let a=this;a.canvasSize=e,a.context&&(a.context.canvas.width=e.width,a.context.canvas.height=e.height,a.updateResources(e.width,e.height))}}const n=Neo.setupClass(l)}}]);