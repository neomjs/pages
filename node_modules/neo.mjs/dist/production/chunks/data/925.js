export const __webpack_esm_id__=925;export const __webpack_esm_ids__=[925];export const __webpack_esm_modules__={925(e,s,t){var o=t(703),r=t(270);class a extends o.A{static config={className:"Neo.manager.rpc.Message",singleton:!0,sorters:[{direction:"ASC",property:"id"}]};endPointTimeouts=[];messageId=1;requestBuffer=20;socketConnections={};transactionId=1;onMessage(e){let s=Neo.manager.rpc.Api.get(`${e.service}.${e.method}`);return this[`onMessage${Neo.capitalize(s.type)}`](e,s)}onMessageAjax(e,s){return new Promise((t,o)=>{let r=this,{url:a}=s;r.register({id:r.messageId,method:e.method,params:e.params,reject:o,resolve:t,service:e.service,transactionId:0,url:a}),r.messageId++,r.endPointTimeouts.includes(a)||(r.endPointTimeouts.push(a),r.timeout(r.requestBuffer).then(()=>{r.resolveBufferTimeout(a)}))})}async onMessageWebsocket(e,s){let o=this,{url:r}=s,a=o.socketConnections[r];if(!a){let e=await t.e(827).then(t.bind(t,827));o.socketConnections[r]=a=Neo.create(e.default,{serverAddress:r})}return await a.promiseMessage(e)}async resolveBufferTimeout(e){let s,t=this,o=[],a=t.find({transactionId:0,url:e}),i=[],{transactionId:n}=t;a.forEach(e=>{e.transactionId=n,o.push(e.id),i.push({id:e.id,method:e.method,params:e.params,service:e.service})}),r.A.remove(t.endPointTimeouts,e),t.transactionId++,s=await Neo.Fetch.request(e,{},"post",JSON.stringify({tid:n,requests:i})),a.forEach(e=>{e.resolve()}),t.remove(o)}}Neo.setupClass(a)}};