"use strict";(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[703],{703:(e,t,r)=>{r.d(t,{A:()=>S});var s=r(583);r(691);class i extends s.A{static observable=!0;static operators=["==","===","!=","!==","<","<=",">",">=","endsWith","excluded","included","isDefined","isUndefined","like","startsWith"];static config={className:"Neo.collection.Filter",ntype:"filter",disabled_:!1,filterBy_:null,includeEmptyValues:!0,isUpdating_:!1,listenerApplied:!1,operator_:"===",property_:"id",scope:null,value_:null};afterSetDisabled(...e){this.fireChangeEvent(...e)}afterSetFilterBy(e,t){}afterSetIsUpdating(e,t){!1===e&&this.fireChangeEvent(e,t)}afterSetOperator(...e){this.fireChangeEvent(...e)}afterSetProperty(...e){this.fireChangeEvent(...e)}afterSetValue(...e){this.fireChangeEvent(...e)}beforeSetFilterBy(e,t){return e&&"function"!=typeof e?(Neo.logError("filterBy has to be a function",this),t):e}beforeSetOperator(e,t){return this.beforeSetEnumValue(e,t,"operator")}export(){let{operator:e,property:t,value:r}=this;return this.filterBy?null:{operator:e,property:t,value:r}}fireChangeEvent(e,t){let r=this;if(void 0!==t&&!0!==r.isUpdating){let{operator:e,property:t,value:s}=r;r.fire("change",{operator:e,property:t,value:s})}}isFiltered(e,t,r){let s,o,l=this;return!l._disabled&&(l._filterBy?l.filterBy.call(l.scope||l,{allItems:r,filteredItems:t,item:e,value:l._value}):(!l.includeEmptyValues||null!==l._value&&!Neo.isEmpty(l._value))&&(s=l._value,o=e[l._property],s instanceof Date&&o instanceof Date&&(s=s.valueOf(),o=o.valueOf()),!i[l._operator](o,s)))}static"=="(e,t){return e==t}static"==="(e,t){return e===t}static"!="(e,t){return e!=t}static"!=="(e,t){return e!==t}static"<"(e,t){return e<t}static"<="(e,t){return e<=t}static">"(e,t){return e>t}static">="(e,t){return e>=t}static endsWith(e,t){return Neo.isString(e)||(e=String(e)),Neo.isString(t)||(t=String(t)),e?.toLowerCase().endsWith(t?.toLowerCase())||!1}static excluded(e,t){return t.indexOf(e)<0}static included(e,t){return t.indexOf(e)>-1}static isDefined(e,t){return void 0!==e}static isUndefined(e,t){return void 0===e}static like(e,t){return Neo.isString(e)||(e=String(e)),Neo.isString(t)||(t=String(t)),e?.toLowerCase().includes(t?.toLowerCase())||!1}static startsWith(e,t){return Neo.isString(e)||(e=String(e)),Neo.isString(t)||(t=String(t)),e?.toLowerCase().startsWith(t?.toLowerCase())||!1}}const o=Neo.setupClass(i);class l extends s.A{static config={className:"Neo.util.Logger",level_:"info",singleton:!0};logChars={error:"E",info:"I",log:"L",warn:"W"};logColors={error:"indianred",info:"#acacac",log:"#448888",warn:"#6d6d00"};logLevels=["info","log","warn","error"];construct(e){super.construct(e);let t=this;Neo.applyFromNs(Neo,t,{error:"error",info:"info",log:"log",logError:"logError",warn:"warn"},!0),t.timeout(50).then((()=>{Neo.config.enableLogsInProduction||"dist/production"!==Neo.config.environment||(t.write=Neo.emptyFn)}))}beforeSetLevel(e,t){return this.logLevels.indexOf(e)}error(e){throw new Error(e)}getCaller(){let e,t,r,s=(new Error).stack.split("\n"),i=!1;for(t in s)if(r=s[t],!i&&/Logger\.mjs/.test(r))i=!0;else if(i&&!/Logger\.mjs/.test(r)){r=r.replace(")",""),e=r.match(/([^\/]+)$/)[1].match(/([^ ]+)$/)[1];break}return e}info(...e){e=this.resolveArgs(...e),this.write(e,"info")}log(...e){e=this.resolveArgs(...e),this.write(e,"log")}logError(...e){e=this.resolveArgs(...e),this.write(e,"error")}onContextMenu(e){let{config:t}=Neo;if(t.enableComponentLogger&&("dist/production"!==t.env||!t.enableLogsInProduction)){let t,r=!1;e.path.forEach((e=>{t=Neo.getComponent(e.id),t&&(r||(r=!0,console.group(e.id)),console.log(t))})),r&&console.groupEnd()}}resolveArgs(...e){let t=e[0],r={};return 1===e.length?Neo.isString(t)?r.msg=e[0]:Neo.isObject(t)&&(r=t):e.length>2&&(r.msg=e[0],r.data=e.slice(1)),r}warn(...e){e=this.resolveArgs(...e),this.write(e,"warn")}write(e,t){let r=this;if(r.beforeSetLevel(t)<r.level)return;console.log("#",e.msg,t);let s=r.logColors[t],i=r.logChars[t],o=`background-color:${s}; color: white; font-weight: 900;`,l=`color:${s};`,n=`[${r.getCaller()}] ${e.msg}`;e.data?(console.groupCollapsed(`%c ${i} %c ${n}`,o,l),console.log(e.data),console.groupEnd()):console.log(`%c ${i} %c ${n}`,o,l)}}const n=Neo.setupClass(l);class a extends s.A{static observable=!0;static config={className:"Neo.collection.Sorter",ntype:"sorter",directionMultiplier:1,direction_:"ASC",listenerApplied:!1,property_:"id",sortBy:null,useTransformValue:!0};afterSetDirection(e,t){let r=this;r.directionMultiplier="ASC"===e?1:-1,t&&r.fire("change",{direction:r.direction,property:r.property})}afterSetProperty(e,t){let r=this;t&&r.fire("change",{direction:r.direction,property:r.property})}defaultSortBy(e,t){let r=this;return e=e[r.property],t=t[r.property],r.useTransformValue&&(e=r.transformValue(e),t=r.transformValue(t)),e>t?1*r.directionMultiplier:e<t?-1*r.directionMultiplier:0}export(){let{direction:e,property:t}=this;return!this.sortBy&&e&&t?{direction:e,property:t}:null}transformValue(e){return"string"==typeof e&&(e=e.toLowerCase()),e}}const u=Neo.setupClass(a),p=Symbol("countMutations"),c=Symbol("isFiltered"),h=Symbol("isSorted"),d=Symbol("silentUpdateMode"),f=Symbol("toAddArray"),g=Symbol("toRemoveArray"),m=Symbol("updatingIndex");class y extends s.A{static observable=!0;static config={className:"Neo.collection.Base",ntype:"collection",allItems:null,autoSort:!0,filterMode:"primitive",filters_:[],items_:null,keyProperty:"id",keyPropertyIndex:-1,map_:null,sortDirections:null,sortProperties:null,sorters_:[],sourceId_:null};construct(e){super.construct(e);let t=this,r={enumerable:!1,writable:!0};t.items=t.items||[],Object.defineProperties(t,{[p]:{...r,value:!1},[c]:{...r,value:!1},[h]:{...r,value:!1},[d]:{...r,value:!1},[f]:{...r,value:[]},[g]:{...r,value:[]},[m]:{...r,value:0}}),t.autoSort&&t._sorters.length>0&&t.doSort()}add(e){return this.splice(null,null,e).addedItems}afterSetFilters(e,t){let r=this;e.forEach((e=>{!1===e.listenerApplied&&(e.on("change",r.onFilterChange,r),e.listenerApplied=!0)})),t&&r.filter()}afterSetItems(e,t){if(e){let t,r=this,{keyProperty:s}=r,i=0,o=e.length;for(;i<o;i++)t=e[i],r.map.set(t[s],t)}}afterSetSorters(e,t){let r=this;r.applySorterConfigs(),e.forEach((e=>{!1===e.listenerApplied&&(e.on("change",r.onSorterChange,r),e.listenerApplied=!0)})),t&&r.autoSort&&r.doSort()}afterSetSourceId(e,t){if(e){let r=this,s=Neo.get(e);r._items=[...s._items],r.map=new Map(s.map);const i={mutate:r.onMutate,scope:r};s.on(i),t&&(s=Neo.get(t),s.un(i))}}applySorterConfigs(){let e=this;e.sortDirections=[],e.sortProperties=[],e.sorters.forEach((t=>{e.sortDirections.push(t.directionMultiplier),e.sortProperties.push(t.property)}))}beforeSetFilters(e,t){Array.isArray(e)||(e=e?[e]:[]);let r,s,i=t&&t.length||0;return e.forEach(((l,n)=>{if(t)for(r=!1,s=0;s<i;s++){if(t[s]===l){t[s].set({operator:l.operator,property:l.property,value:l.value}),r=!0;break}if(t[s].operator===(l.operator||"===")&&t[s].property===l.property&&t[s].value===l.value){r=!0;break}}r?(e[n]=t[s],t.splice(s,1),i--):e[n]=Neo.create(o,l)})),Array.isArray(t)&&t.forEach((e=>{e.destroy()})),e}beforeSetMap(e,t){return e||new Map}beforeSetSorters(e,t){Array.isArray(e)||(e=e?[e]:[]);let r,s,i=t?.length||0;return e.forEach(((o,l)=>{if(t){r=!1,s=0;let{direction:e,property:l}=o;for(;s<i;s++){if(t[s]===o){t[s].set({direction:e,property:l}),r=!0;break}if(t[s].property===l&&t[s].direction===e){r=!0;break}}}r?(e[l]=t[s],t.splice(s,1),i--):e[l]=Neo.create(u,o)})),t?.forEach((e=>{e.destroy()})),e}cacheUpdate(e){console.log("cacheUpdate",e,this[f])}clear(){this.splice(0,this.getCount())}clearFilters(e){this.filters=e?Neo.clone(this.originalConfig.filters,!0,!0):null}clearSilent(){let e=this;e._items.splice(0,e.getCount()),e.map.clear()}clearSorters(e){this.sorters=e?Neo.clone(this.originalConfig.sorters,!0,!0):null}clone(){let e=this,t=Neo.clone(e.originalConfig,!0),r=e._filters||[],s=e._sorters||[];return delete t.id,delete t.filters,delete t.items,delete t.sorters,e._items.length>0&&(t.items=[...e._items]),t.filters=[],t.sorters=[],r.forEach((function(e){t.filters.push(e.originalConfig)})),s.forEach((function(e){t.sorters.push(e.originalConfig)})),Neo.create(y,t)}destroy(){let e=this;e._items.splice(0,e._items.length),e.map.clear(),super.destroy()}doSort(e=this._items,t=!1){let r,s,i,o,l,n,a=this,u=[...e],{sorters:p,sortDirections:c,sortProperties:d}=a,f=d.length||0,g=!1,y=!1;f>0&&(p.forEach((e=>{e.sortBy&&(g=!0),e.useTransformValue&&(y=!0)})),g?a._items.sort(((e,t)=>{for(r=0;r<f;r++)if(o=p[r],n=o[o.sortBy?"sortBy":"defaultSortBy"](e,t),0!==n)return n;return 0})):(s=y?e.map(((e,t)=>{for(i={index:t},r=0;r<f;r++)p[r].useTransformValue?i[d[r]]=p[r].transformValue(e[d[r]]):i[d[r]]=e[d[r]];return i})):e,s.sort(((e,t)=>{for(r=0;r<f;r++){if(l=d[r],e[l]>t[l])return 1*c[r];if(e[l]<t[l])return-1*c[r]}return 0})),y&&(a._items=s.map((t=>e[t.index]))))),a[h]=f>0,t||0!==a[m]||a.fire("sort",{items:a._items,previousItems:u,scope:a})}endUpdate(e){const t=this;t[m]>0&&t[m]--,e?t[d]=!1:(t.fire("mutate",{addedItems:t[f],removedItems:t[g]}),t[f].splice(0,t[f].length),t[g].splice(0,t[g].length))}exportFilters(){let e,t=[];return this.filters?.forEach((r=>{e=r.export(),e&&t.push(e)})),t}exportSorters(){let e,t=[];return this.sorters?.forEach((r=>{e=r.export(),e&&t.push(e)})),t}filter(){let e,t,r,s,i,o=this,l=o._filters,n=l.length,a=0,u=o.allItems?._items||o._items,p=0,h=u.length,d=[],f=!1,g=[...o._items];for(;p<n;p++)l[p].disabled||a++;if(0===a&&o.allItems)o.sorters.length>0&&(f=!0),o.clearSilent(),o.items=[...o.allItems._items];else if(o.allItems||(e={...o.originalConfig},delete e.filters,delete e.items,delete e.sorters,o.allItems=Neo.create(y,{...Neo.clone(e,!0,!0),keyProperty:o.keyProperty,sourceId:o.id})),o.map.clear(),"primitive"===o.filterMode){for(p=0;p<h;p++){for(t=!0,r=u[p],s=0;s<n;s++)if(l[s].isFiltered(r,u,u)){t=!1;break}t&&(d.push(r),o.map.set(r[o.keyProperty],r))}o._items=d}else{for(d=[...u],s=0;s<n;s++){for(i=[],p=0;p<h;p++)l[s].isFiltered(d[p],d,u)||i.push(d[p]);d=[...i],h=d.length}o.items=d}o[c]=0!==a,f&&o.doSort(o.items,!0),o.fire("filter",{isFiltered:o[c],items:o.items,oldItems:g,scope:o})}find(e,t,r=!1){let s,i,o,l,n=this,a=[],u=n.isItem(e);for(s of(u&&(o=Object.entries(e),l=o.length),n.items))if(u){if(i=[],o.forEach((([e,t])=>{Neo.ns(e,!1,s)===t&&i.push(!0)})),i.length===l){if(r)return s;a.push(s)}}else if(Neo.ns(e,!1,s)===t){if(r)return s;a.push(s)}return r?null:a}findBy(e,t=this,r=0,s=this.getCount()){let i=this,o=[],l=r;for(;l<s;l++)e.call(t,i.items[l])&&o.push(i.items[l]);return o}findFirst(e,t){return this.find(e,t,!0)}first(){return this._items[0]}get(e){return this.map.get(e)||null}getAt(e){return this._items[e]}getCount(){return this._items.length}getCountMutations(){return this[p]}getFilter(e){let t=this.filters||[],r=0,s=t.length;for(;r<s;r++)if(t[r].property===e)return t[r];return null}getKeyAt(e){let t=this._items[e];return t?.[this.keyProperty]}getRange(e,t){return this._items.slice(e,t)}getSource(){return this.sourceId&&Neo.get(this.sourceId)}has(e){return this.map.has(e)}hasItem(e){return this.map.has(e[this.keyProperty])}indexOf(e){let t=this;return t._items.indexOf(t.isItem(e)?e:t.map.get(e))}indexOfItem(e){return this._items.indexOf(e)}indexOfKey(e){return this._items.indexOf(this.map.get(e))}insert(e,t){return this.splice(e,0,t).addedItems}isFiltered(){return this[c]}isFilteredItem(e){let t=this._filters,r=0,s=t.length,i=!1;for(;r<s;r++)if(t[r].isFiltered(e)){i=!0;break}return i}isItem(e){return"object"==typeof e}isSorted(){return this[h]}last(){return this._items[this.getCount()-1]}onFilterChange(e){this.filter()}onMutate(e){e.preventBubbleUp&&(this.preventBubbleUp=!0),this.splice(null,e.removedItems,e.addedItems)}onSorterChange(e){this.applySorterConfigs(),this.doSort()}pop(){return this.splice(this.getCount()-1,1).removedItems[0]}push(e){return this.add(e)}remove(e){return this.splice(0,Array.isArray(e)?e:[e]),this.getCount()}removeAt(e){return this.splice(e,1),this.getCount()}reverse(){return this._items.reverse()}shift(){return this.splice(0,1).addedItems[0]}some(...e){return this._items.some(...e)}splice(e,t,r){let s,i,o,l,a,u=this,{keyProperty:c,map:h}=u,f=u.getSource(),g=[],y=u._items,v=[],S=Neo.isNumber(t)?t:null,b=Array.isArray(t)?t:null;if(!Neo.isNumber(e)&&S&&n.error(u.id+": If index is not passed, removeCountAtIndex cannot be used"),r=r&&!Array.isArray(r)?[r]:r,b&&(l=b.length)>0)for(r&&r.length>0&&(a=r.map((e=>e[c]))),s=0;s<l;s++)i=b[s],o=u.isItem(i)?i[c]:i,h.has(o)&&(!a||a&&a.indexOf(o)<0)&&(v.push(y.splice(u.indexOfKey(o),1)[0]),h.delete(o));else S&&S>0&&(v.push(...y.splice(e,S)),v.forEach((e=>{h.delete(e[c])})));if(r&&(l=r.length)>0){for(s=0;s<l;s++)i=r[s],o=i[c],o||(i[c]=o=u.keyPropertyIndex,u.keyPropertyIndex--),h.has(o)||u.isFilteredItem(i)||(g.push(i),h.set(o,i));g.length>0&&(y.splice(Neo.isNumber(e)?e:y.length,0,...g),u.autoSort&&u._sorters.length>0&&u.doSort())}return f&&(f.getSource()||(f.preventBubbleUp=!0),u.preventBubbleUp||(u.startUpdate(!0),f.splice(null,b||v,r),u.endUpdate(!0)),delete f.preventBubbleUp),(g.length>0||v.length>0)&&u[p]++,0===u[m]?u.fire("mutate",{addedItems:r,preventBubbleUp:u.preventBubbleUp,removedItems:b||v}):u[d]||u.cacheUpdate({addedItems:g,removedItems:v}),0===u[m]&&delete u.preventBubbleUp,{addedItems:g,removedItems:v}}startUpdate(e){e&&(this[d]=!0),this[m]++}unshift(e){return this.splice(0,0,e),this.getCount()}}const v=Neo.setupClass(y),S=Neo.setupClass(class extends v{static config={className:"Neo.manager.Base"};getById(e){return e&&this.get(e)||null}register(e){let t=this;t.get(e.id)?Neo.logError("Trying to create an item with an already existing id",e,t.get(e.id)):t.push(e)}unregister(e){this.remove(e)}})}}]);