"use strict";(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[650,96],{96:(e,t,o)=>{o.r(t),o.d(t,{default:()=>a});var l=o(583);class n extends l.A{static config={className:"Neo.main.addon.Base",isMainThreadAddon:!0,isReady_:!1,preloadFilesDelay:5e3};cache=[];isLoading=!1;loadingTimeoutId=null;construct(e){super.construct(e);let t=this;t.loadFiles&&(0===t.preloadFilesDelay?t.loadFiles():Neo.isNumber(t.preloadFilesDelay)&&(t.loadingTimeoutId=setTimeout((()=>{t.loadFiles()}),t.preloadFilesDelay)))}afterSetIsReady(e,t){if(e){let e,t=this;t.cache.forEach((o=>{e=t[o.fn](o.data),o.resolve(e)})),t.cache=[]}}cacheMethodCall(e){let t=this;return t.isLoading||(t.loadingTimeoutId&&clearTimeout(t.loadingTimeoutId),t.loadingTimeoutId=null,t.loadFiles()),new Promise(((o,l)=>{t.cache.push({...e,resolve:o})}))}}const a=Neo.setupClass(n)},650:(e,t,o)=>{o.r(t),o.d(t,{default:()=>i});var l=o(96),n=o(254),a=o(160);class r extends l.default{static config={className:"Neo.main.addon.DragDrop",alwaysFireDragMove:!1,bodyCursorStyle:null,boundaryContainerRect:null,clientX:0,clientY:0,dragElementRootId:null,dragProxyCls:"neo-dragproxy",dragProxyElement:null,dragProxyRect:null,dragZoneId:null,dropZoneIdentifier:null,initialScrollLeft:0,initialScrollTop:0,moveHorizontal:!0,moveVertical:!0,offsetX:0,offsetY:0,remote:{app:["setConfigs","setDragProxyElement"]},scrollContainerElement:null,scrollContainerRect:null,scrollFactorLeft:1,scrollFactorTop:1};construct(e){super.construct(e);let t=this,l=[];a.A.on({mouseEnter:t.onMouseEnter,mouseLeave:t.onMouseLeave,scope:t}),t.addGlobalEventListeners(),Neo.config.hasMouseEvents&&l.push(o.e(588).then(o.bind(o,588))),Neo.config.hasTouchEvents&&l.push(o.e(176).then(o.bind(o,176))),Promise.all(l).then((e=>{e.forEach((e=>{Neo.create({module:e.default})}))}))}addGlobalEventListeners(){let e=this;document.addEventListener("drag:end",e.onDragEnd.bind(e),!0),document.addEventListener("drag:move",e.onDragMove.bind(e),!0),document.addEventListener("drag:start",e.onDragStart.bind(e),!0)}getEventData(e){let t=e.path||e.composedPath(),o=e.detail,l={...a.A.getEventData(e.detail.originalEvent),clientX:o.clientX,clientY:o.clientY};return o.eventPath?l.targetPath=o.eventPath.map((e=>a.A.getTargetData(e))):l.targetPath=l.path,l.path=t.map((e=>a.A.getTargetData(e))),l}onDragEnd(e){let t=this,o=t.getEventData(e),l=t.pathIncludesDropZone(o.targetPath);n.A.setBodyCls({remove:["neo-unselectable"]}),t.bodyCursorStyle&&n.A.setStyle({id:"document.body",style:{cursor:null}}),a.A.sendMessageToApp({...o,isDrop:l,offsetX:t.offsetX,offsetY:t.offsetY,type:"drag:end"}),l&&a.A.sendMessageToApp({...a.A.getMouseEventData(e.detail.originalEvent),dragZoneId:t.dragZoneId,type:"drop"}),Object.assign(t,{alwaysFireDragMove:!1,bodyCursorStyle:null,boundaryContainerRect:null,dragElementRootId:null,dragElementRootRect:null,dragProxyCls:"neo-dragproxy",dragProxyElement:null,dragZoneId:null,dropZoneIdentifier:null,initialScrollLeft:0,initialScrollTop:0,moveHorizontal:!0,moveVertical:!0,scrollContainerElement:null,scrollContainerRect:null,setScrollFactorLeft:1,scrollFactorTop:1})}onDragMove(e){let t,o,l,n=this,r=n.dragProxyRect,i=n.boundaryContainerRect;if(n.scrollContainerElement&&(t=n.scrollContainer({clientX:e.detail.clientX,clientY:e.detail.clientY}),e.detail.clientX=t.clientX,e.detail.clientY=t.clientY),n.dragProxyElement&&(o=e.detail.clientX-n.offsetX,l=e.detail.clientY-n.offsetY,i&&(o<i.left?o=i.left:o>i.right-r.width&&(o=i.right-r.width),l<i.top?l=i.top:l>i.bottom-r.height&&(l=i.bottom-r.height)),n.moveHorizontal||(o=n.dragProxyRect.x),n.dragProxyElement.style.left=`${o}px`,n.moveVertical||(l=n.dragProxyRect.y),n.dragProxyElement.style.top=`${l}px`),!n.dragProxyElement||n.alwaysFireDragMove){let t=e.detail.originalEvent;a.A.sendMessageToApp({...n.getEventData(e),offsetX:n.offsetX,offsetY:n.offsetY,screenX:t.screenX,screenY:t.screenY,type:"drag:move"})}}onDragStart(e){let t=e.target.getBoundingClientRect();n.A.setBodyCls({add:["neo-unselectable"]}),Object.assign(this,{dragProxyRect:t,offsetX:e.detail.clientX-t.left,offsetY:e.detail.clientY-t.top}),a.A.sendMessageToApp({...this.getEventData(e),type:"drag:start"})}onMouseEnter(e){this.pathIncludesDropZone(e.path)&&a.A.sendMessageToApp({...e,dragZoneId:this.dragZoneId,type:"drop:enter"})}onMouseLeave(e){this.pathIncludesDropZone(e.path)&&a.A.sendMessageToApp({...e,dragZoneId:this.dragZoneId,type:"drop:leave"})}pathIncludesDropZone(e){let t,o,l=!0,n=this.dropZoneIdentifier;if(n){t=n.cls,o=n.ids;for(const n of e){if(t){l=!1;for(const e of n.cls)if(t.includes(e)){l=!0;break}}if(l&&o&&!o.includes(n.id)&&(l=!1),l)return!0}}return!1}scrollContainer(e){let t=this,o=e.clientX-t.clientX,l=e.clientY-t.clientY,n=t.scrollContainerElement,a=250,r=t.scrollContainerRect;return t.clientX=e.clientX,t.clientY=e.clientY,(o<0&&e.clientX<r.left+a||o>0&&e.clientX>r.right-a)&&(n.scrollLeft+=o*t.scrollFactorLeft),(l<0&&e.clientY<r.top+a||l>0&&e.clientY>r.bottom-a)&&(n.scrollTop+=l*t.scrollFactorTop),{clientX:t.clientX+n.scrollLeft-t.initialScrollLeft,clientY:t.clientY+n.scrollTop-t.initialScrollTop}}setConfigs(e){let t,o=this;delete e.appName,delete e.windowId,e.boundaryContainerId&&(t=n.A.getElementOrBody(e.boundaryContainerId),o.boundaryContainerRect=t.getBoundingClientRect()),delete e.boundaryContainerId,e.scrollContainerId&&(t=n.A.getElementOrBody(e.scrollContainerId),Object.assign(o,{scrollContainerElement:t,scrollContainerRect:t.getBoundingClientRect(),initialScrollLeft:t.scrollLeft,initialScrollTop:t.scrollTop})),delete e.scrollContainerId,Object.entries(e).forEach((([e,t])=>{o.hasOwnProperty(e)?o[e]=t:console.error("unknown key passed inside setConfigs()",e)})),o.bodyCursorStyle&&n.A.setStyle({id:"document.body",style:{cursor:o.bodyCursorStyle}})}setDragProxyElement(e){this.dragProxyElement=document.getElementById(e.id)}}const i=Neo.setupClass(r)}}]);