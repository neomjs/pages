"use strict";(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[96,274],{96:(e,s,o)=>{o.r(s),o.d(s,{default:()=>i});var r=o(583);class a extends r.A{static config={className:"Neo.main.addon.Base",isMainThreadAddon:!0,preloadFilesDelay:5e3};cache=[];get isLoading(){return!!this.#e&&!!this.#s}#e=null;#s=null;construct(e){super.construct(e);let s=this;if(s.#e=new Promise(e=>{s.#s=e}),!1===s.preloadFilesDelay)s.#s(),s.#s=null;else{const e=Neo.isNumber(s.preloadFilesDelay)?s.preloadFilesDelay:0;0===e?s.#o():s.timeout(e).then(()=>{s.#s&&s.#o()})}}async#o(){let e=this;if(e.#s){const s=e.#s;e.#s=null,await e.loadFiles(),s()}}async initAsync(){await super.initAsync(),await this.#e}afterSetIsReady(e,s){e&&this.#r()}cacheMethodCall(e){let s=this;return s.#s&&s.#o(),new Promise((o,r)=>{s.cache.push({...e,reject:r,resolve:o})})}async loadFiles(){}async#r(){let e=this;for(const s of e.cache){let o;try{o=e[s.fn](s.data),Neo.isPromise(o)&&(o=await o),s.resolve(o)}catch(e){s.reject(e);break}}e.cache=[]}}const i=Neo.setupClass(a)},274:(e,s,o)=>{o.r(s),o.d(s,{default:()=>l});var r=o(96),a=o(126);class i extends r.default{static config={className:"Neo.main.addon.ServiceWorker"};construct(e){super.construct(e),this.registerServiceWorker()}async registerServiceWorker(){if("serviceWorker"in navigator){let e,s=this,{config:o}=Neo,{environment:r}=o,i="dist/esm"===r,l="development"===r||i,t=l?"ServiceWorker.mjs":"serviceworker.js",n=l?{type:"module"}:{},c=(l?o.basePath:o.workerBasePath)+t,{serviceWorker:d}=navigator;i&&(c=c.substring(6)),e=await d.register(c,n),window.addEventListener("beforeunload",s.onBeforeUnload.bind(s)),e.addEventListener("updatefound",()=>{window.location.reload()}),await d.ready,d.onmessage=a.A.onWorkerMessage.bind(a.A),a.A.getWorker("service")||(a.A.serviceWorker=e.active),a.A.sendMessage("service",{action:"registerNeoConfig",data:o})}}onBeforeUnload(){a.A.sendMessage("service",{action:"unregisterPort"})}}const l=Neo.setupClass(i)}}]);