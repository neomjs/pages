"use strict";(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[96,274],{96:(e,s,a)=>{a.r(s),a.d(s,{default:()=>i});var o=a(583);class r extends o.A{static config={className:"Neo.main.addon.Base",isMainThreadAddon:!0,isReady_:!1,preloadFilesDelay:5e3};cache=[];isLoading=!1;loadingTimeoutId=null;construct(e){super.construct(e);let s=this;s.loadFiles&&(0===s.preloadFilesDelay?s.loadFiles():Neo.isNumber(s.preloadFilesDelay)&&(s.loadingTimeoutId=setTimeout(()=>{s.loadFiles()},s.preloadFilesDelay)))}afterSetIsReady(e,s){if(e){let e,s=this;s.cache.forEach(a=>{e=s[a.fn](a.data),a.resolve(e)}),s.cache=[]}}cacheMethodCall(e){let s=this;return s.isLoading||(s.loadingTimeoutId&&clearTimeout(s.loadingTimeoutId),s.loadingTimeoutId=null,s.loadFiles()),new Promise((a,o)=>{s.cache.push({...e,resolve:a})})}}const i=Neo.setupClass(r)},274:(e,s,a)=>{a.r(s),a.d(s,{default:()=>t});var o=a(96),r=a(126);class i extends o.default{static config={className:"Neo.main.addon.ServiceWorker"};construct(e){super.construct(e),this.registerServiceWorker()}async registerServiceWorker(){if("serviceWorker"in navigator){let e,s=this,{config:a}=Neo,{environment:o}=a,i="dist/esm"===o,t="development"===o||i,n=t?"ServiceWorker.mjs":"serviceworker.js",d=t?{type:"module"}:{},l=(t?a.basePath:a.workerBasePath)+n,{serviceWorker:c}=navigator;i&&(l=l.substring(6)),e=await c.register(l,d),window.addEventListener("beforeunload",s.onBeforeUnload.bind(s)),e.addEventListener("updatefound",()=>{window.location.reload()}),await c.ready,c.onmessage=r.A.onWorkerMessage.bind(r.A),r.A.getWorker("service")||(r.A.serviceWorker=e.active),r.A.sendMessage("service",{action:"registerNeoConfig",data:a})}}onBeforeUnload(){r.A.sendMessage("service",{action:"unregisterPort"})}}const t=Neo.setupClass(i)}}]);