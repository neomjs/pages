"use strict";(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[96,265],{96:(e,a,t)=>{t.r(a),t.d(a,{default:()=>l});var s=t(583);class o extends s.A{static config={className:"Neo.main.addon.Base",isMainThreadAddon:!0,preloadFilesDelay:5e3};cache=[];get isLoading(){return!!this.#e&&!!this.#a}#e=null;#a=null;construct(e){super.construct(e);let a=this;if(a.#e=new Promise(e=>{a.#a=e}),!1===a.preloadFilesDelay)a.#a(),a.#a=null;else{const e=Neo.isNumber(a.preloadFilesDelay)?a.preloadFilesDelay:0;0===e?a.#t():a.timeout(e).then(()=>{a.#a&&a.#t()})}}async#t(){let e=this;if(e.#a){const a=e.#a;e.#a=null,await e.loadFiles(),a()}}async initAsync(){await super.initAsync(),await this.#e}afterSetIsReady(e,a){e&&this.#s()}cacheMethodCall(e){let a=this;return a.#a&&a.#t(),new Promise((t,s)=>{a.cache.push({...e,reject:s,resolve:t})})}async loadFiles(){}async#s(){let e=this;for(const a of e.cache){let t;try{t=e[a.fn](a.data),Neo.isPromise(t)&&(t=await t),a.resolve(t)}catch(e){a.reject(e);break}}e.cache=[]}}const l=Neo.setupClass(o)},265:(e,a,t)=>{t.r(a),t.d(a,{default:()=>d});var s=t(96),o=t(392),l=t(160);class i extends s.default{static config={className:"Neo.main.addon.MonacoEditor",libraryBasePath:Neo.config.basePath+"node_modules/monaco-editor/min/vs",remote:{app:["createInstance","destroyInstance","getValue","layoutEditor","setLanguage","setTheme","setValue","updateOptions"]}};map={};createInstance(e){let a,t,s=this,{id:l}=e;if(!s.isReady)return s.cacheMethodCall({fn:"createInstance",data:e});delete e.appName,delete e.id,t=o.A.getElement(l),t?(a=s.map[l]=monaco.editor.create(t,e),a.getModel().onDidChangeContent(s.onContentChange.bind(s,l))):"development"===Neo.config.environment&&console.warn(`addon.MonacoEditor: node ${l} not found`)}destroyInstance(e){if(!this.isReady)return this.cacheMethodCall({fn:"destroyInstance",data:e});delete this.map[e.id]}getValue(e){let a=this;return a.isReady?a.map[e.id].getModel().getValue():a.cacheMethodCall({fn:"getValue",data:e})}layoutEditor(e){this.isReady&&this.map[e.id].layout()}async loadFiles(){let e=this.libraryBasePath;window.require={paths:{vs:e}},await o.A.loadScript(e+"/loader.js"),await Promise.all([o.A.loadStylesheet(e+"/editor/editor.main.css",{name:"vs/editor/editor.main"}),o.A.loadScript(e+"/editor/editor.main.nls.js"),o.A.loadScript(e+"/editor/editor.main.js")])}onContentChange(e,a){let t=o.A.getElement(e),s=l.A.getPathFromElement(t).map(e=>l.A.getTargetData(e));l.A.sendMessageToApp({event:a,id:e,path:s,type:"editorChange",value:this.map[e].getModel().getValue()})}setLanguage(e){let a=this;if(!a.isReady)return a.cacheMethodCall({fn:"setLanguage",data:e});a.map[e.id].getModel().setLanguage(e.value)}setTheme(e){let a=this;if(!a.isReady)return a.cacheMethodCall({fn:"setTheme",data:e});a.map[e.id]._themeService.setTheme(e.value)}setValue(e){let a=this;if(!a.isReady)return a.cacheMethodCall({fn:"setValue",data:e});a.map[e.id].getModel().setValue(e.value)}updateOptions(e){let a=this;if(!a.isReady)return a.cacheMethodCall({fn:"updateOptions",data:e});a.map[e.id].updateOptions(e.options)}}const d=Neo.setupClass(i)}}]);