"use strict";(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[96,682],{96:(e,t,i)=>{i.r(t),i.d(t,{default:()=>n});var o=i(583);class s extends o.A{static config={className:"Neo.main.addon.Base",isMainThreadAddon:!0,isReady_:!1,preloadFilesDelay:5e3};cache=[];isLoading=!1;loadingTimeoutId=null;construct(e){super.construct(e);let t=this;t.loadFiles&&(0===t.preloadFilesDelay?t.loadFiles():Neo.isNumber(t.preloadFilesDelay)&&(t.loadingTimeoutId=setTimeout(()=>{t.loadFiles()},t.preloadFilesDelay)))}afterSetIsReady(e,t){if(e){let e,t=this;t.cache.forEach(i=>{e=t[i.fn](i.data),i.resolve(e)}),t.cache=[]}}cacheMethodCall(e){let t=this;return t.isLoading||(t.loadingTimeoutId&&clearTimeout(t.loadingTimeoutId),t.loadingTimeoutId=null,t.loadFiles()),new Promise((i,o)=>{t.cache.push({...e,resolve:i})})}}const n=Neo.setupClass(s)},682:(e,t,i)=>{i.r(t),i.d(t,{default:()=>n});var o=i(96);class s extends o.default{static config={className:"Neo.main.addon.WindowPosition",adjustWindowPositions:!1,intervalId:null,intervalTime:20,observeResize_:!1,remote:{app:["registerWindow","setConfigs","setDock","unregisterWindow"]},screenLeft:null,screenTop:null,windows:{}};resizeListener=null;construct(e){super.construct(e);let t=this,{screenLeft:i,screenTop:o}=window;t.screenLeft=i,t.screenTop=o,window.addEventListener("mouseout",t.onMouseOut.bind(t))}afterSetObserveResize(e,t){let i=this;i.resizeListener||(i.resizeListener=i.onResize.bind(i)),window[e?"addEventListener":"removeEventListener"]("resize",i.resizeListener)}adjustPositions(){Object.entries(this.windows).forEach(([e,t])=>{let{left:i,top:o}=this.getPosition(t);Neo.Main.windowMoveTo({windowName:e,x:i,y:o})})}checkMovement(){let e,t=this,{Manager:i}=Neo.worker,o=window,{screenLeft:s,screenTop:n}=o;t.screenLeft===s&&t.screenTop===n||(e=Neo.Main.getWindowData(),t.adjustWindowPositions&&t.adjustPositions(),i.sendMessage("app",{action:"windowPositionChange",data:{appName:i.appName,...e}}),t.screenLeft=s,t.screenTop=n)}dockDirectionChange(e,t){return!(("bottom"!==e&&"top"!==e||"left"!==t&&"right"!==t)&&("bottom"!==t&&"top"!==t||"left"!==e&&"right"!==e))}getPosition(e){let t,i,{size:o}=e,s=window,{screenLeft:n,screenTop:a}=s;switch(e.dock){case"bottom":t=n,i=s.outerHeight+a-62;break;case"left":t=n-o,i=a+24;break;case"right":t=s.outerWidth+n,i=a+24;break;case"top":t=n,i=a-o+86}return{left:t,top:i}}onMouseOut(e){let t=this;e.toElement?t.intervalId&&(clearInterval(t.intervalId),t.intervalId=null):t.intervalId||(t.intervalId=setInterval(t.checkMovement.bind(t),t.intervalTime))}onResize(e){let t,i,o=this,s=window;Object.entries(o.windows).forEach(([e,n])=>{switch(n.dock){case"bottom":case"top":i=s.outerWidth;break;case"left":case"right":t=s.outerHeight-28}o.adjustWindowPositions&&(Neo.Main.windowResizeTo({height:t,width:i,windowName:e}),o.adjustPositions())})}registerWindow(e){this.windows[e.name]=e}setConfigs(e){delete e.appName,this.set(e)}setDock(e){let t,i,o=this,{dock:s,name:n}=e,a=o.windows[n];a&&(t=o.dockDirectionChange(s,a.dock),a.dock=s,i=o.getPosition(a),t&&Neo.Main.windowResizeTo({height:"bottom"===s||"top"===s?a.size:window.outerHeight-28,width:"left"===s||"right"===s?a.size:window.outerWidth,windowName:n}),Neo.Main.windowMoveTo({windowName:n,x:i.left,y:i.top}))}unregisterWindow(e){delete this.windows[e.name]}}const n=Neo.setupClass(s)}}]);