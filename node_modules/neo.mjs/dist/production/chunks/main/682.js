"use strict";(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[96,682],{96:(e,s,t)=>{t.r(s),t.d(s,{default:()=>n});var o=t(583);class i extends o.A{static config={className:"Neo.main.addon.Base",isMainThreadAddon:!0,preloadFilesDelay:5e3};cache=[];get isLoading(){return!!this.#e&&!!this.#s}#e=null;#s=null;construct(e){super.construct(e);let s=this;if(s.#e=new Promise(e=>{s.#s=e}),!1===s.preloadFilesDelay)s.#s(),s.#s=null;else{const e=Neo.isNumber(s.preloadFilesDelay)?s.preloadFilesDelay:0;0===e?s.#t():s.timeout(e).then(()=>{s.#s&&s.#t()})}}async#t(){let e=this;if(e.#s){const s=e.#s;e.#s=null,await e.loadFiles(),s()}}async initAsync(){await super.initAsync(),await this.#e}afterSetIsReady(e,s){e&&this.#o()}cacheMethodCall(e){let s=this;return s.#s&&s.#t(),new Promise((t,o)=>{s.cache.push({...e,reject:o,resolve:t})})}async loadFiles(){}async#o(){let e=this;for(const s of e.cache){let t;try{t=e[s.fn](s.data),Neo.isPromise(t)&&(t=await t),s.resolve(t)}catch(e){s.reject(e);break}}e.cache=[]}}const n=Neo.setupClass(i)},682:(e,s,t)=>{t.r(s),t.d(s,{default:()=>n});var o=t(96);class i extends o.default{static config={className:"Neo.main.addon.WindowPosition",adjustWindowPositions:!1,intervalId:null,intervalTime:20,observeResize_:!1,remote:{app:["registerWindow","setConfigs","setDock","unregisterWindow"]},screenLeft:null,screenTop:null,windows:{}};resizeListener=null;construct(e){super.construct(e);let s=this,{screenLeft:t,screenTop:o}=window;s.screenLeft=t,s.screenTop=o,window.addEventListener("mouseout",s.onMouseOut.bind(s))}afterSetObserveResize(e,s){let t=this;t.resizeListener||(t.resizeListener=t.onResize.bind(t)),window[e?"addEventListener":"removeEventListener"]("resize",t.resizeListener)}adjustPositions(){Object.entries(this.windows).forEach(([e,s])=>{let{left:t,top:o}=this.getPosition(s);Neo.Main.windowMoveTo({windowName:e,x:t,y:o})})}checkMovement(){let e,s=this,{Manager:t}=Neo.worker,o=window,{screenLeft:i,screenTop:n}=o;s.screenLeft===i&&s.screenTop===n||(e=Neo.Main.getWindowData(),s.adjustWindowPositions&&s.adjustPositions(),t.sendMessage("app",{action:"windowPositionChange",data:{appName:t.appName,...e}}),s.screenLeft=i,s.screenTop=n)}dockDirectionChange(e,s){return!(("bottom"!==e&&"top"!==e||"left"!==s&&"right"!==s)&&("bottom"!==s&&"top"!==s||"left"!==e&&"right"!==e))}getPosition(e){let s,t,{size:o}=e,i=window,{screenLeft:n,screenTop:a}=i;switch(e.dock){case"bottom":s=n,t=i.outerHeight+a-62;break;case"left":s=n-o,t=a+24;break;case"right":s=i.outerWidth+n,t=a+24;break;case"top":s=n,t=a-o+86}return{left:s,top:t}}onMouseOut(e){let s=this;e.toElement?s.intervalId&&(clearInterval(s.intervalId),s.intervalId=null):s.intervalId||(s.intervalId=setInterval(s.checkMovement.bind(s),s.intervalTime))}onResize(e){let s,t,o=this,i=window;Object.entries(o.windows).forEach(([e,n])=>{switch(n.dock){case"bottom":case"top":t=i.outerWidth;break;case"left":case"right":s=i.outerHeight-28}o.adjustWindowPositions&&(Neo.Main.windowResizeTo({height:s,width:t,windowName:e}),o.adjustPositions())})}registerWindow(e){this.windows[e.name]=e}setConfigs(e){delete e.appName,this.set(e)}setDock(e){let s,t,o=this,{dock:i,name:n}=e,a=o.windows[n];a&&(s=o.dockDirectionChange(i,a.dock),a.dock=i,t=o.getPosition(a),s&&Neo.Main.windowResizeTo({height:"bottom"===i||"top"===i?a.size:window.outerHeight-28,width:"left"===i||"right"===i?a.size:window.outerWidth,windowName:n}),Neo.Main.windowMoveTo({windowName:n,x:t.left,y:t.top}))}unregisterWindow(e){delete this.windows[e.name]}}const n=Neo.setupClass(i)}}]);