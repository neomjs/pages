export const __webpack_esm_id__=158;export const __webpack_esm_ids__=[96,158];export const __webpack_esm_modules__={1096(e,t,o){o.r(t),o.d(t,{default:()=>r});var n=o(8247);class s extends n.A{static config={className:"Neo.main.addon.Base",isMainThreadAddon:!0,preloadFilesDelay:5e3,remote:{app:["loadFiles"]},useLazyLoading:!1};cache=[];get isLoading(){return!!this.#e&&!!this.#t}#e=null;#t=null;construct(e){super.construct(e);let t=this;if(t.#e=new Promise(e=>{t.#t=e}),t.useLazyLoading);else if(!1===t.preloadFilesDelay)t.#t(),t.#t=null;else{const e=Neo.isNumber(t.preloadFilesDelay)?t.preloadFilesDelay:0;0===e?t.#o():t.timeout(e).then(()=>{t.#t&&t.#o()})}}async#o(){let e=this;if(e.#t){const t=e.#t;e.#t=null,await e.loadFiles(),t()}}async initAsync(){await super.initAsync(),await this.#e}afterSetIsReady(e,t){super.afterSetIsReady(e,t),e&&this.#n()}cacheMethodCall(e){let t=this;return t.#t&&t.#o(),new Promise((o,n)=>{t.cache.push({...e,reject:n,resolve:o})})}async loadFiles(){}onInterceptRemotes(e){return this.cacheMethodCall({fn:e.remoteMethod,data:e.data})}async#n(){let e=this;for(const t of e.cache){let o;try{o=e[t.fn](t.data),Neo.isPromise(o)&&(o=await o),t.resolve(o)}catch(e){t.reject(e);break}}e.cache=[]}}const r=Neo.setupClass(s)},7158(e,t,o){o.r(t),o.d(t,{default:()=>i});var n=o(1096),s=o(9160);class r extends n.default{static config={className:"Neo.main.addon.GridDragScroll",delay:100,minDistance:5,mouseDownTime:0,mouseDownTimeout:null,remote:{app:["register","unregister"]}};activeDrag=null;monitorDrag=null;registrations=new Map;construct(e){super.construct(e),Neo.bindMethods(this,["onDragStart","onMonitorEnd","onMonitorMove"])}autoScroll(e){let t=this,{friction:o,registration:n,velocity:s}=e;Math.abs(s.x)<.1&&Math.abs(s.y)<.1||(n.containerElement&&(n.containerElement.scrollLeft-=s.x),n.bodyElement&&(n.bodyElement.scrollTop-=s.y),s.x*=o,s.y*=o,t.activeDrag={id:e.id,animation:requestAnimationFrame(t.autoScroll.bind(t,e))})}getEventCoordinates(e){if(e.type.startsWith("touch")){let t=e.touches[0]||e.changedTouches[0];return{x:t.clientX,y:t.clientY}}return{x:e.clientX,y:e.clientY}}onDragEnd(e){let t=this;if(t.activeDrag){"mouseup"===e.type?(document.body.style.removeProperty("cursor"),document.removeEventListener("mousemove",t.activeDrag.listeners.move,{capture:!0}),document.removeEventListener("mouseup",t.activeDrag.listeners.end,{capture:!0})):(document.removeEventListener("touchmove",t.activeDrag.listeners.move,{capture:!0,passive:!1}),document.removeEventListener("touchend",t.activeDrag.listeners.end,{capture:!0}));let{history:o,id:n,registration:s}=t.activeDrag,r=Date.now()-100,i=o.filter(e=>e.time>r);if(i.length>1){let e=i[i.length-1],o=i[0],r=e.time-o.time,a=(e.x-o.x)/r*16,l=(e.y-o.y)/r*16;t.autoScroll({friction:.95,id:n,registration:s,velocity:{x:a,y:l}})}else t.activeDrag=null}}onDragMove(e){let t=this.activeDrag;if(!t)return;"touchmove"===e.type&&!1!==e.cancelable&&e.preventDefault();let{registration:o}=t,{x:n,y:s}=this.getEventCoordinates(e),r=t.lastX-n,i=t.lastY-s;0!==r&&o.containerElement&&(o.containerElement.scrollLeft+=r),0!==i&&o.bodyElement&&(o.bodyElement.scrollTop+=i),t.lastX=n,t.lastY=s,t.history.push({time:Date.now(),x:n,y:s}),t.history.length>10&&t.history.shift()}onDragStart(e){if("mousedown"===e.type&&0!==e.button)return;let t,o,n=this,s=e.composedPath();n.activeDrag?.animation&&(cancelAnimationFrame(n.activeDrag.animation),n.activeDrag=null);for(const[e,r]of n.registrations)if(s.includes(r.bodyElement)){t=e,o=r;break}if(!o)return;if(s.some(e=>e.classList?.contains("neo-draggable")))return;"mousedown"===e.type&&e.preventDefault();let{x:r,y:i}=n.getEventCoordinates(e);n.monitorDrag={id:t,registration:o,startX:r,startY:i},n.mouseDownTime=Date.now(),"mousedown"===e.type?(document.addEventListener("mousemove",n.onMonitorMove,{capture:!0}),document.addEventListener("mouseup",n.onMonitorEnd,{capture:!0})):(document.addEventListener("touchmove",n.onMonitorMove,{capture:!0,passive:!1}),document.addEventListener("touchend",n.onMonitorEnd,{capture:!0})),n.mouseDownTimeout=setTimeout(()=>{n.onMonitorMove({type:"timeout",...n.getEventCoordinates(e)})},n.delay)}onMonitorMove(e){let t=this,o=t.monitorDrag,{x:n,y:r}=t.getEventCoordinates(e),i=Date.now()-t.mouseDownTime,a=s.A.getDistance(o.startX,o.startY,n,r)||0;i>=t.delay&&a>=t.minDistance&&(t.onMonitorEnd(e),t.startDrag(o,n,r,e.type.startsWith("touch")?"touch":"mouse"))}onMonitorEnd(e){let t=this;clearTimeout(t.mouseDownTimeout),t.monitorDrag=null,document.removeEventListener("mousemove",t.onMonitorMove,{capture:!0}),document.removeEventListener("mouseup",t.onMonitorEnd,{capture:!0}),document.removeEventListener("touchmove",t.onMonitorMove,{capture:!0,passive:!1}),document.removeEventListener("touchend",t.onMonitorEnd,{capture:!0})}register({bodyId:e,containerId:t,id:o}){let n=this;n.registrations.has(o)&&n.unregister({id:o});let s=document.getElementById(e),r=document.getElementById(t);if(s){let e={bodyElement:s,containerElement:r,id:o};Neo.config.hasTouchEvents?s.addEventListener("touchstart",n.onDragStart,{capture:!0,passive:!1}):s.addEventListener("mousedown",n.onDragStart,{capture:!0}),n.registrations.set(o,e)}}startDrag(e,t,o,n){let s=this;s.activeDrag={id:e.id,registration:e.registration,history:[{time:Date.now(),x:t,y:o}],lastX:t,lastY:o,listeners:{move:s.onDragMove.bind(s),end:s.onDragEnd.bind(s)}},"mouse"===n?(document.body.style.setProperty("cursor","grabbing","important"),document.addEventListener("mousemove",s.activeDrag.listeners.move,{capture:!0}),document.addEventListener("mouseup",s.activeDrag.listeners.end,{capture:!0})):(document.addEventListener("touchmove",s.activeDrag.listeners.move,{capture:!0,passive:!1}),document.addEventListener("touchend",s.activeDrag.listeners.end,{capture:!0}))}unregister({id:e}){let t=this,o=t.registrations.get(e);o&&(o.bodyElement&&(Neo.config.hasTouchEvents?o.bodyElement.removeEventListener("touchstart",t.onDragStart,{capture:!0,passive:!1}):o.bodyElement.removeEventListener("mousedown",t.onDragStart,{capture:!0})),t.activeDrag?.id===e&&t.onDragEnd({type:Neo.config.hasTouchEvents?"touchend":"mouseup"}),t.registrations.delete(e))}}const i=Neo.setupClass(r)}};