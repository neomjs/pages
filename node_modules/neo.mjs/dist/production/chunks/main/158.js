export const __webpack_esm_id__=158;export const __webpack_esm_ids__=[96,158];export const __webpack_esm_modules__={1096(e,t,s){s.r(t),s.d(t,{default:()=>r});var o=s(8247);class a extends o.A{static config={className:"Neo.main.addon.Base",isMainThreadAddon:!0,preloadFilesDelay:5e3,remote:{app:["loadFiles"]},useLazyLoading:!1};cache=[];get isLoading(){return!!this.#e&&!!this.#t}#e=null;#t=null;construct(e){super.construct(e);let t=this;if(t.#e=new Promise(e=>{t.#t=e}),t.useLazyLoading);else if(!1===t.preloadFilesDelay)t.#t(),t.#t=null;else{const e=Neo.isNumber(t.preloadFilesDelay)?t.preloadFilesDelay:0;0===e?t.#s():t.timeout(e).then(()=>{t.#t&&t.#s()})}}async#s(){let e=this;if(e.#t){const t=e.#t;e.#t=null,await e.loadFiles(),t()}}async initAsync(){await super.initAsync(),await this.#e}afterSetIsReady(e,t){super.afterSetIsReady(e,t),e&&this.#o()}cacheMethodCall(e){let t=this;return t.#t&&t.#s(),new Promise((s,o)=>{t.cache.push({...e,reject:o,resolve:s})})}async loadFiles(){}onInterceptRemotes(e){return this.cacheMethodCall({fn:e.remoteMethod,data:e.data})}async#o(){let e=this;for(const t of e.cache){let s;try{s=e[t.fn](t.data),Neo.isPromise(s)&&(s=await s),t.resolve(s)}catch(e){t.reject(e);break}}e.cache=[]}}const r=Neo.setupClass(a)},7158(e,t,s){s.r(t),s.d(t,{default:()=>r});var o=s(1096);class a extends o.default{static config={className:"Neo.main.addon.GridDragScroll",remote:{app:["register","unregister"]}};activeDrag=null;registrations=new Map;autoScroll(e){let t=this,{friction:s,registration:o,velocity:a}=e;Math.abs(a.x)<.1&&Math.abs(a.y)<.1||(o.containerElement&&(o.containerElement.scrollLeft-=a.x),o.bodyElement&&(o.bodyElement.scrollTop-=a.y),a.x*=s,a.y*=s,t.activeDrag={id:e.id,animation:requestAnimationFrame(t.autoScroll.bind(t,e))})}getEventCoordinates(e){if(e.type.startsWith("touch")){let t=e.touches[0]||e.changedTouches[0];return{x:t.clientX,y:t.clientY}}return{x:e.clientX,y:e.clientY}}onDragEnd(e){let t=this;if(t.activeDrag){"mouseup"===e.type?(document.body.style.removeProperty("cursor"),document.removeEventListener("mousemove",t.activeDrag.listeners.move,{capture:!0}),document.removeEventListener("mouseup",t.activeDrag.listeners.end,{capture:!0})):(document.removeEventListener("touchmove",t.activeDrag.listeners.move,{capture:!0,passive:!1}),document.removeEventListener("touchend",t.activeDrag.listeners.end,{capture:!0}));let{history:s,id:o,registration:a}=t.activeDrag,r=Date.now()-100,i=s.filter(e=>e.time>r);if(i.length>1){let e=i[i.length-1],s=i[0],r=e.time-s.time,n=(e.x-s.x)/r*16,l=(e.y-s.y)/r*16;t.autoScroll({friction:.95,id:o,registration:a,velocity:{x:n,y:l}})}else t.activeDrag=null}}onDragMove(e){let t=this.activeDrag;if(!t)return;"touchmove"===e.type&&e.preventDefault();let{registration:s}=t,{x:o,y:a}=this.getEventCoordinates(e),r=t.lastX-o,i=t.lastY-a;0!==r&&s.containerElement&&(s.containerElement.scrollLeft+=r),0!==i&&s.bodyElement&&(s.bodyElement.scrollTop+=i),t.lastX=o,t.lastY=a,t.history.push({time:Date.now(),x:o,y:a}),t.history.length>10&&t.history.shift()}onDragStart(e){if("mousedown"===e.type&&0!==e.button)return;let t,s,o=this,a=e.composedPath();o.activeDrag?.animation&&(cancelAnimationFrame(o.activeDrag.animation),o.activeDrag=null);for(const[e,r]of o.registrations)if(a.includes(r.bodyElement)){t=e,s=r;break}if(!s)return;if(a.some(e=>e.classList?.contains("neo-draggable")))return;"mousedown"===e.type&&e.preventDefault();let{x:r,y:i}=o.getEventCoordinates(e);o.activeDrag={id:t,registration:s,history:[{time:Date.now(),x:r,y:i}],lastX:r,lastY:i,listeners:{move:o.onDragMove.bind(o),end:o.onDragEnd.bind(o)}},"mousedown"===e.type?(document.body.style.setProperty("cursor","grabbing","important"),document.addEventListener("mousemove",o.activeDrag.listeners.move,{capture:!0}),document.addEventListener("mouseup",o.activeDrag.listeners.end,{capture:!0})):(document.addEventListener("touchmove",o.activeDrag.listeners.move,{capture:!0,passive:!1}),document.addEventListener("touchend",o.activeDrag.listeners.end,{capture:!0}))}register({bodyId:e,containerId:t,id:s}){let o=this;o.registrations.has(s)&&o.unregister({id:s});let a=document.getElementById(e),r=document.getElementById(t);if(a){let e={bodyElement:a,containerElement:r,id:s,dragStartListener:o.onDragStart.bind(o)};Neo.config.hasTouchEvents?a.addEventListener("touchstart",e.dragStartListener,{capture:!0,passive:!1}):a.addEventListener("mousedown",e.dragStartListener,{capture:!0}),o.registrations.set(s,e)}}unregister({id:e}){let t=this,s=t.registrations.get(e);s&&(s.bodyElement&&(Neo.config.hasTouchEvents?s.bodyElement.removeEventListener("touchstart",s.dragStartListener,{capture:!0,passive:!1}):s.bodyElement.removeEventListener("mousedown",s.dragStartListener,{capture:!0})),t.activeDrag?.id===e&&t.onDragEnd({type:Neo.config.hasTouchEvents?"touchend":"mouseup"}),t.registrations.delete(e))}}const r=Neo.setupClass(a)}};