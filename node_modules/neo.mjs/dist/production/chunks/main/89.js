"use strict";(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[89,96],{96:(e,t,s)=>{s.r(t),s.d(t,{default:()=>i});var a=s(162);class n extends a.A{static config={className:"Neo.main.addon.Base",isMainThreadAddon:!0,isReady_:!1,preloadFilesDelay:5e3};cache=[];isLoading=!1;loadingTimeoutId=null;construct(e){super.construct(e);let t=this;t.loadFiles&&(0===t.preloadFilesDelay?t.loadFiles():Neo.isNumber(t.preloadFilesDelay)&&(t.loadingTimeoutId=setTimeout((()=>{t.loadFiles()}),t.preloadFilesDelay)))}afterSetIsReady(e,t){if(e){let e,t=this;t.cache.forEach((s=>{e=t[s.fn](s.data),s.resolve(e)})),t.cache=[]}}cacheMethodCall(e){let t=this;return t.isLoading||(t.loadingTimeoutId&&clearTimeout(t.loadingTimeoutId),t.loadingTimeoutId=null,t.loadFiles()),new Promise(((s,a)=>{t.cache.push({...e,resolve:s})}))}}Neo.setupClass(n);const i=n},89:(e,t,s)=>{s.r(t),s.d(t,{default:()=>i});var a=s(96);class n extends a.default{static config={className:"Neo.main.addon.PrefixField",accept_:null,pattern_:null,remote:{app:["initialize","destroy","updateAccept","updatePattern","updateSlots"]},slots_:null};elIds=new Map;prev;back=!1;destroy(){}initialize(e){const t=this;t.elId=e.elId,t.el=document.getElementById(e.elId);const s=t.pattern=e.pattern,a=t.slots=new Set(e.slots||"_");var n;t.accept=e.accept,t.prev=(n=0,Array.from(s,((e,t)=>a.has(e)?n=t+1:n))),t.first=[...s].findIndex((e=>a.has(e))),t.addListeners(),t.addCss()}addCss(){this.el.classList.add("tiny-prefix-field-input")}addListeners(){const e=this,t=e.el,s=e.format.bind(e);t.addEventListener("keypress",e.onKeyDown.bind(e)),t.addEventListener("input",s),t.addEventListener("focusin",s),t.addEventListener("focusout",e.onBlur.bind(e))}onBlur(){const e=this.pattern,t=this.el;return t.value===e&&(t.value="")}onKeyDown(e){this.back="Backspace"===e.key}clean(e){this.el;const t=new RegExp(this.accept||"\\d","g"),s=this.pattern,a=this.slots;return e=e.match(t)||[],Array.from(s,(t=>(e[0]===t||a.has(t))&&e.shift()||t))}format(){const e=this,t=this.el,s=this.prev,a=this.clean.bind(this);console.log(t.selectionStart,t.selectionEnd);const[n,i]=[t.selectionStart,t.selectionEnd].map((n=>(n=a(t.value.slice(0,n)).findIndex((t=>e.slots.has(t))))<0?s[s.length-1]:e.back?s[n-1]||e.first:n));t.value=a(t.value).join``,t.setSelectionRange(n,i),this.back=!1}}Neo.setupClass(n);const i=n}}]);