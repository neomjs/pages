"use strict";(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[27985],{3607:(e,t,s)=>{s.d(t,{A:()=>u});var n=s(8202);class i extends n.A{static config={className:"Neo.menu.Model",keyProperty:"id",fields:[{name:"cls",type:"Array"},{name:"handler",type:"Function"},{name:"hidden",type:"Boolean"},{name:"iconCls",type:"String"},{name:"id",type:"Integer"},{name:"items",type:"Array"},{name:"route",type:"String"},{name:"text",type:"String"}]}}const o=Neo.setupClass(i);var l=s(31374);class a extends l.A{static config={className:"Neo.menu.Store",model:o}}const u=Neo.setupClass(a)},56430:(e,t,s)=>{s.r(t),s.d(t,{default:()=>r});var n=s(65156),i=s(60944);class o extends i.A{static config={className:"Neo.selection.menu.ListModel",ntype:"selection-menu-listmodel"};onKeyDownEscape(e){this.view.onKeyDownEscape(e)}onKeyDownLeft(e){let{view:t}=this,{parentMenu:s}=t;s&&(t.hideSubMenu(),t.selectionModel.deselectAll(),s.selectionModel.selectAt(t.parentIndex))}onKeyDownRight(e){this.view.activeSubMenu?.selectionModel.selectAt(0)}}const l=Neo.setupClass(o);var a=s(3607);class u extends n.A{static config={className:"Neo.menu.List",ntype:"menu-list",activeSubMenu:null,baseCls:["neo-menu-list","neo-list"],focusTimeoutId:null,hideOnLeafItemClick:!0,items_:null,menuFocus_:!1,isRoot:!0,parentIndex:0,parentMenu:null,selectionModel:l,store:a.A,subMenuGap:0,subMenuMap:null,zIndex_:100,_vdom:{tag:"ul",cn:[]}};parentComponent=null;afterSetItems(e,t){let{store:s}=this;t&&s.clear(),e&&s.add(e)}afterSetMenuFocus(e,t){if(void 0!==t){let t=this;t.isRoot?e?(clearTimeout(t.focusTimeoutId),t.focusTimeoutId=null):t.focusTimeoutId=setTimeout(()=>{t[t.floating?"unmount":"hideSubMenu"]()},20):t.parentMenu.menuFocus=e}}afterSetTheme(e,t){super.afterSetTheme(e,t),Object.values(this.subMenuMap||{}).forEach(t=>{t.theme=e})}afterSetZIndex(e,t){this.style={...this.style,zIndex:e}}createItemContent(e,t){let s=this,{iconCls:n}=e,i=e[s.store.keyProperty],o=[{tag:"span",cls:["neo-content"],html:e[s.displayField]}];return n&&""!==n&&o.unshift({tag:"i",cls:["neo-menu-icon","neo-icon",n],id:s.getIconId(i)}),s.hasChildren(e)&&o.push({tag:"i",cls:["neo-arrow-icon","neo-icon","fas fa-chevron-right"],id:s.getArrowIconId(i)}),o}destroy(...e){let{activeSubMenu:t}=this,s=this.subMenuMap||{};t?.unmount(),Object.entries(s).forEach(([e,t])=>{t.destroy(),s[e]=null}),super.destroy(...e)}getArrowIconId(e){return`${this.id}__arrow_icon__${e}`}getIconId(e){return`${this.id}__icon__${e}`}getMenuMapId(e){return`menu__${e}`}hasChildren(e){return Array.isArray(e.items)&&e.items.length>0}hideSubMenu(){let{activeSubMenu:e}=this;e&&(e.unmount(),this.activeSubMenu=null)}onFocusEnter(e){super.onFocusEnter(e),this.menuFocus=!0}onFocusLeave(e){super.onFocusLeave(e);let t,s=!1,n=this.parentComponent?.id;if(n)for(t of e.oldPath)if(t.id===n){s=!0;break}s||(this.menuFocus=!1)}onItemClick(e,t){super.onItemClick(e,t),this.onKeyDownEnter(e.id)}onKeyDownEnter(e){if(e){let t,s=this,n=s.getItemRecordId(e),i=s.store.get(n);s.callback(i.handler,s,[i]),i.route&&Neo.Main.setRoute({appName:s.appName,value:i.route}),s.hideOnLeafItemClick&&!i.items&&s.unmount(),i.items&&(t=s.subMenuMap?.[s.getMenuMapId(n)],t&&s.toggleSubMenu(e,i))}}onKeyDownEscape(e){this.floating&&this.unmount()}onSelect(e){let t=this,s=e[0],n=t.getItemRecordId(s),i=t.store.get(n);t.activeSubMenu!==t.subMenuMap?.[t.getMenuMapId(n)]&&(t.hideSubMenu(),t.hasChildren(i)&&t.showSubMenu(s,i))}showSubMenu(e,t){const s=this,{store:n}=s,i=t[n.keyProperty],o=s.subMenuMap||(s.subMenuMap={}),l=s.getMenuMapId(i),a=o[l]||(o[l]=Neo.create({module:u,align:{target:e,edgeAlign:"l0-r0",axisLock:!0,targetMargin:s.subMenuGap},appName:s.appName,displayField:s.displayField,floating:!0,items:t.items,isRoot:!1,parentComponent:s.parentComponent,parentId:Neo.apps[s.appName].mainView.id,parentIndex:n.indexOf(t),parentMenu:s,theme:s.theme,zIndex:s.zIndex+1}));s.activeSubMenu!==a&&(s.activeSubMenu=a,a.render(!0))}toggleSubMenu(e,t){let s=this,n=t[s.getKeyProperty()],i=s.subMenuMap?.[s.getMenuMapId(n)];i?.mounted?s.hideSubMenu():s.showSubMenu(e,t)}unmount(){this.selectionModel?.deselectAll(!0),this.hideSubMenu(),super.unmount()}}const r=Neo.setupClass(u)},56556:(e,t,s)=>{s.d(t,{A:()=>l});var n=s(82583),i=s(76270);s(65691);class o extends n.A{static observable=!0;static config={className:"Neo.selection.Model",ntype:"selection-model",cls:null,items_:null,selectedCls:"neo-selected",singleSelect:!0,view_:null};beforeGetItems(e){return e||(this._items=e=[]),e}beforeGetView(e){return Neo.getComponent(this._view)}beforeSetView(e){return e&&e.id}addDomListener(){}deselect(e,t,s=this.items,n){let o,l=this,{view:a}=l;e=e.isRecord?a.getItemId(e):Neo.isObject(e)?e.id:e,s.includes(e)?(o=a.getVdomChild(e),o&&(o.cls=i.A.remove(o.cls||[],n||l.selectedCls),delete o["aria-selected"]),i.A.remove(s,e),t||(a.update(),a.parent?.onDeselect?.(),a.onDeselect?.(),l.fire("selectionChange",{selection:s}))):t||l.fire("noChange")}deselectAll(e,t=this.items){let s=this,n=[...t],{view:i}=s;n.length?(n.forEach(e=>{s.deselect(e,!0)}),!e&&n.length>0&&i.update(),s.fire("selectionChange",{selection:this.items})):e||s.fire("noChange")}destroy(...e){this.unregister(),super.destroy(...e)}getSelection(){return this.items}hasSelection(){return this.items.length>0}isSelected(e){return this.items.includes(e)}register(e){let t=this,s=e.wrapperCls||[];t.cls&&!s.includes(t.cls)&&(s.push(t.cls),e.wrapperCls=s),t.view=e,t.addDomListener(),e.fire("selectionModelChange",{value:t})}removeDomListeners(){let e=this,t=e.view,s=[...t.domListeners];t.domListeners.forEach(t=>{t.scope===e&&i.A.remove(s,t)}),t.domListeners=s}select(e,t=this.items,s){Array.isArray(e)||(e=[e]);let n=this,{view:o}=n;e=e.map(e=>e.isRecord?o.getItemId(e):Neo.isObject(e)?e.id:e),Neo.isEqual(t,e)?n.fire("noChange"):(n.singleSelect&&t===n.items&&n.deselectAll(!0,t),e.forEach(e=>{(e=o.getVdomChild(e))&&(e.cls=i.A.add(e.cls||[],s||n.selectedCls),e["aria-selected"]=!0)}),i.A.add(t,e),o.silentSelect||o.update(),o.parent?.onSelect?.(e),o.onSelect?.(e),n.fire("selectionChange",{selection:t}))}toggleSelection(e){let t=this;t.isSelected(e)?t.deselect(e):t.select(e)}unregister(){let e=this,t=e.view.wrapperCls||[];e.cls&&t.includes(e.cls)&&(i.A.remove(t,e.cls),e.view.wrapperCls=t),e.deselectAll(),e.removeDomListeners()}}const l=Neo.setupClass(o)}}]);