"use strict";(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[6457],{6457:(e,t,n)=>{n.r(t),n.d(t,{default:()=>W});var o=n(33079),a=n(79375);class s extends a.A{static config={className:"Portal.view.learn.ContentTreeList",bind:{contentPath:e=>e.contentPath,currentPageRecord:e=>e.currentPageRecord,store:"stores.contentTree"},cls:["topics-tree"],contentPath_:null,currentPageRecord_:null,showCollapseExpandAllIcons:!1};afterSetContentPath(e,t){e&&this.doLoadStore()}async afterSetCurrentPageRecord(e,t){e&&(await this.timeout(20),this.selectionModel.select(e))}doLoadStore(){this.store.load({url:`${this.contentPath}/tree.json`})}onLeafItemClick(e){super.onLeafItemClick(e),Neo.Main.setRoute({value:`/learn/${e.id}`,windowId:this.windowId})}onStoreLoad(){super.onStoreLoad(),this.getStateProvider().data.countPages=this.store.getCount()}}const r=Neo.setupClass(s);var i=n(95800),c=n(4912);class l extends c.A{static config={className:"Portal.view.learn.CubeLayoutButton",activeLayout_:null};activateText="Activate Cube-Layout";deactivateText="Deactivate Cube-Layout";get viewportController(){return this.getController("viewport-controller")}construct(e){super.construct(e);let t=this;t.activeLayout=t.viewportController.mainContentLayout,t.handler=t.changeLayout.bind(t)}afterSetActiveLayout(e,t){let n=this;e&&(n.viewportController.mainContentLayout=e,"card"===e?n.text=n.activateText:"mixed"===e&&(n.text=n.deactivateText))}changeLayout(e){let t=this;t.activeLayout=t.text===t.activateText?"mixed":"card"}}Neo.setupClass(l);var d=n(68233);class u extends i.A{static config={className:"Portal.view.learn.MainContainerController",routes:{"/learn":"onRouteDefault","/learn/{itemId}":"onRouteLearnItem"}};construct(e){super.construct(e);let{windowId:t}=this;Neo.Main.getByPath({path:"location.search",windowId:t}).then(e=>{this.setState({deck:(0,d.j)(e).deck||"learnneo"})})}navigateTo(e){Neo.Main.setRoute({value:`/learn/${e}`,windowId:this.component.windowId})}async onContentEdit(e){const t=this.getStateProvider();console.log(e);const n=t.getData("editorConfig"),o=t.getData("deck");if(!n||!o)return;const a=`${n.root}/${o}/pages/${e.record.id}.md`;await fetch("http://localhost:3000/openInEditor",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:a,editor:n.editor})})}onContentRefresh(e){this.getReference("tree").doFetchContent(e.record)}onIntersect(e){let t=this.getReference("page-sections-container").list,n=parseInt(e.data.recordId);t.isAnimating||t.selectionModel.select(t.store.get(n))}onNextPageButtonClick(e){this.navigateTo(this.getStateProvider().getData("nextPageRecord").id)}onPageSectionsToggleButtonClick(e){this.getReference("page-sections-container").toggleCls("neo-expanded")}onPreviousPageButtonClick(e){this.navigateTo(this.getStateProvider().getData("previousPageRecord").id)}onRouteDefault(e){this.getStateProvider().data.currentPageRecord||this.onRouteLearnItem({itemId:"benefits.Introduction"})}onRouteLearnItem(e){let t=this.getStateProvider(),n=t.getStore("contentTree");n.getCount()>0?t.data.currentPageRecord=n.get(e.itemId):n.on({load:()=>{t.data.currentPageRecord=n.get(e.itemId)},delay:10,once:!0})}onSideNavToggleButtonClick(e){this.getReference("sidenav-container").toggleCls("neo-expanded")}}const g=Neo.setupClass(u);var p=n(8202);class h extends p.A{static config={className:"Portal.model.ContentSection",fields:[{name:"id",type:"Int"},{name:"name",type:"String"},{name:"sourceId",type:"String"},{name:"tag",type:"String"}]}}const m=Neo.setupClass(h);var v=n(31374);class C extends v.A{static config={className:"Portal.store.ContentSections",model:m}}const f=Neo.setupClass(C);class P extends p.A{static config={className:"Portal.model.Content",fields:[{name:"className",type:"String"},{name:"collapsed",type:"Boolean"},{name:"hidden",type:"Boolean"},{name:"id",type:"String"},{name:"isLeaf",type:"Boolean",defaultValue:!0},{name:"name",type:"String"},{name:"parentId",type:"String"}]}}const S=Neo.setupClass(P);class w extends v.A{static config={className:"Portal.store.Content",model:S}}const y=Neo.setupClass(w);var N=n(63697);class I extends N.A{static config={className:"Portal.view.learn.MainContainerStateProvider",data:{contentPath:null,countPages:null,countSections:null,currentPageRecord:null,deck:null,nextPageRecord:null,previousPageRecord:null},stores:{contentSections:{module:f},contentTree:{module:y}}};onDataPropertyChange(e,t,n){super.onDataPropertyChange(e,t,n);let o=this;switch(e){case"countSections":t<1&&o.component.getReference("page-sections-container")?.toggleCls("neo-expanded",!1);break;case"currentPageRecord":{let e,n,a=o.data.countPages,s=o.getStore("contentTree"),r=s.indexOf(t),i=null,c=null,l=null,d=null;for(e=r-1;e>=0;e--)if(n=s.getAt(e),n.isLeaf&&!o.recordIsHidden(n,s)){l=n;break}for(o.setData({previousPageText:d,previousPageRecord:l}),e=r+1;e<a;e++)if(n=s.getAt(e),n.isLeaf&&!o.recordIsHidden(n,s)){i=n;break}o.setData({nextPageText:c,nextPageRecord:i}),o.component.getReference("sidenav-container")?.toggleCls("neo-expanded",!1);break}case"deck":if(t){const e="learnneo"===t?"learn/":`resources/data/deck/${t}/`;o.data.contentPath=Neo.config.basePath+e}}}recordIsHidden(e,t){return!!e.hidden||null!==e.parentId&&this.recordIsHidden(t.get(e.parentId),t)}}const x=Neo.setupClass(I);var b=n(15608),R=n(61364),k=n(60023);const L=/<!--\s*\/lab\s*-->/g,A=/<!--\s*lab\s*-->/g,B=/```(javascript|html|css|json)\s+live-preview\s*\n([\s\S]*?)\n```/g,T=/```json\s+neo-component\s*\n([\s\S]*?)\n```/g,$=/```(javascript|html|css|json)\s+readonly\s*\n([\s\S]*?)\n```/g;class D extends b.A{static config={className:"Portal.view.learn.ContentComponent",baseCls:["learn-content"],bind:{record:e=>e.currentPageRecord},record_:null,tag:"article"};customComponents=[];livePreviews=[];construct(e){super.construct(e);let t=this;t.addDomListeners({click:t.onClick,intersect:"onIntersect",scope:t}),Neo.main.addon.HighlightJS.loadFiles({appName:t.appName})}afterSetMounted(e,t){super.afterSetMounted(e,t);let n=this;e?n.timeout(50).then(()=>{Neo.main.addon.IntersectionObserver.register({callback:"findTopmostItem",id:n.id,root:`#${n.parentId}`,windowId:n.windowId})}):void 0!==t&&(n.customComponents.forEach(e=>{e.mounted=!1}),n.livePreviews.forEach(e=>{e.mounted=!1}))}async afterSetRecord(e,t){if(e){let n=this;t&&n.destroyChildInstances(),await n.doFetchContent(e),t&&(await n.timeout(50),Neo.main.DomAccess.scrollTo({direction:"top",id:n.parentId,value:0}))}}destroy(...e){this.destroyChildInstances(),super.destroy(...e)}destroyChildInstances(){let e=this;e.customComponents.forEach(e=>{e.destroy()}),e.customComponents=[],e.livePreviews.forEach(e=>{e.destroy()}),e.livePreviews=[]}async doFetchContent(e){let t,n,o,a,s,r,i,c=this,{appName:l,windowId:d}=c,u=c.getStateProvider().getData("contentPath"),g=u.includes("/learn/")?"":"pages/";u+=`${g+e.id.replaceAll(".","/")}.md`,e.isLeaf&&u&&(t={appName:l,autoMount:!0,autoRender:!0,parentComponent:c,windowId:d},o=await fetch(u),n=await o.text(),n=c.updateContentSectionsStore(n),n=`<h1 class='neo-h1'>${e.name}</h1>\n${n}`,r={},i={},n=c.processNeoComponentsBlocks(n,r),n=c.processLivePreviewBlocks(n,i),n=await c.processReadonlyCodeBlocks(n,d),a=k.xI.parse(n),a=c.insertLabDivs(a),c.toggleCls("lab",e.name?.startsWith("Lab:")),c.html=a,await c.timeout("development"===Neo.config.environment?100:150),Object.keys(r).forEach(e=>{s=Neo.create({...t,className:"Neo.component.Base",parentId:e,...r[e]}),c.customComponents.push(s)}),Object.keys(i).forEach(e=>{s=Neo.create({...t,module:R.A,parentId:e,value:i[e].code}),c.livePreviews.push(s)}),Neo.main.addon.IntersectionObserver.observe({disconnect:!0,id:c.id,observe:[".neo-h2",".neo-h3"],windowId:c.windowId}))}insertLabDivs(e){return(e=e.replace(A,'<div class="lab">')).replace(L,"</div>")}onClick({altKey:e,metaKey:t,shiftKey:n}){let o=this,{record:a}=o;e&&!t&&n?o.fire("edit",{component:o,record:a}):!e&&t&&n&&o.fire("refresh",{component:o,record:a})}processLivePreviewBlocks(e,t){return e.replace(B,(e,n,o)=>{const a=Neo.core.IdGenerator.getId("pre-live-preview");return t[a]={code:o,language:n},`<div id="${a}"></div>`})}processNeoComponentsBlocks(e,t){return e.replace(T,(e,n)=>{const o=Neo.core.IdGenerator.getId("learn-content-component");return t[o]=JSON.parse(n),`<div id="${o}"></div>`})}async processReadonlyCodeBlocks(e,t){let n,o=[],a=0,s=e.replace($,(e,n,s)=>{const r=`__NEO-READONLY-TOKEN-${++a}__`;return o.push(Neo.main.addon.HighlightJS.highlightAuto({html:s,windowId:t}).then(e=>({after:`<pre data-javascript id="pre-readonly-${Neo.core.IdGenerator.getId()}">${e}</pre>`,token:r}))),r});return n=await Promise.all(o),n.forEach(e=>{s=s.replace(e.token,e.after)}),s}updateContentSectionsStore(e){let t,n=this,o=e.split("\n"),a=1,s=[];return o.forEach((e,r)=>{t=null,e.startsWith("##")&&"#"!==e.charAt(2)?(e=e.substring(2).trim(),t="h2"):e.startsWith("###")&&"#"!==e.charAt(3)&&(e=e.substring(3).trim(),t="h3"),t&&(s.push({id:a,name:e,sourceId:n.id,tag:t}),o[r]=`<${t} class="neo-${t}" data-record-id="${a}">${e}</${t}>`,a++)}),n.getStateProvider().getStore("contentSections").data=s,o.join("\n")}}const E=Neo.setupClass(D);var j=n(13627);class O extends o.A{static config={className:"Portal.view.learn.PageContainer",baseCls:["portal-learn-page-container","neo-container"],bind:{nextPageRecord:e=>e.nextPageRecord,previousPageRecord:e=>e.previousPageRecord},items:[{module:E,reference:"content",listeners:{edit:"onContentEdit",refresh:"onContentRefresh"}},{module:j.A,flex:"none",cls:["content-bottom-toolbar"],layout:"grid",tag:"nav",items:[{cls:["content-bottom-toolbar-previous"],handler:"onPreviousPageButtonClick",hidden:!0,iconCls:"fa fa-chevron-left",reference:"prev-page-button",ui:"secondary"},{cls:["content-bottom-toolbar-next"],handler:"onNextPageButtonClick",hidden:!0,iconCls:"fa fa-chevron-right",iconPosition:"right",reference:"next-page-button",ui:"secondary"}]}],nextPageRecord_:null,previousPageRecord_:null};get nextPageButton(){return this.getReference("next-page-button")}get prevPageButton(){return this.getReference("prev-page-button")}afterSetNextPageRecord(e,t){void 0!==t&&(e?this.nextPageButton.set({hidden:!1,text:e.name}):this.nextPageButton.hidden=!0)}afterSetPreviousPageRecord(e,t){void 0!==t&&(e?this.prevPageButton.set({hidden:!1,text:e.name}):this.prevPageButton.hidden=!0)}}const _=Neo.setupClass(O);var M=n(65156);class H extends M.A{static config={className:"Portal.view.learn.PageSectionsList",bind:{store:"stores.contentSections"},cls:["portal-page-sections-list","topics-tree"]};isAnimating=!1;createItemContent(e,t){return{cls:`neo-${e.tag}`,html:e[this.displayField]}}onConstructed(){super.onConstructed();let e=this;e.on("itemClick",e.onSelectionChange,e)}async onSelectionChange(e){let t=this,n=e.record;n&&(t.isAnimating=!0,t.fire("pageListSelect",{record:n}),await Neo.main.DomAccess.scrollIntoView({querySelector:`[data-record-id='${n.id}']`,windowId:t.windowId}),await t.timeout(200),t.isAnimating=!1)}onStoreLoad(){super.onStoreLoad(),this.getStateProvider().data.countSections=this.store.getCount()}}const z=Neo.setupClass(H);class F extends o.A{static config={className:"Portal.view.learn.PageSectionsContainer",cls:["portal-page-sections-container"],items:[{ntype:"button",cls:["sections-container-button"],handler:"onPageSectionsToggleButtonClick",iconCls:"fas fa-bars",ui:"secondary",bind:{disabled:e=>e.countSections<1,hidden:e=>"large"===e.size}},{vdom:{cn:[{tag:"h3",html:"On this page"}]}},{module:z,listeners:{pageListSelect:"up.onPageListSelect"},reference:"list"}],layout:{ntype:"vbox"},tag:"aside"};get list(){return this.getReference("list")}onPageListSelect(e){this.toggleCls("neo-expanded",!1)}}const J=Neo.setupClass(F);var K=n(1721);class G extends o.A{static config={className:"Portal.view.learn.MainContainer",cls:["portal-learn-maincontainer"],controller:g,items:[{module:o.A,cls:["sidenav-container"],flex:"none",layout:"fit",reference:"sidenav-container",tag:"aside",items:[{module:r,reference:"tree"},{ntype:"button",bind:{hidden:e=>"x-small"!==e.size},cls:["sidenav-button"],handler:"onSideNavToggleButtonClick",iconCls:"fas fa-bars",ui:"secondary"}]},{module:K.A,bind:{hidden:e=>"x-small"===e.size},cls:["main-content-splitter"],resizeTarget:"previous",size:3},{module:_},{module:J,reference:"page-sections-container"}],layout:{ntype:"hbox",align:"stretch"},stateProvider:x}}const W=Neo.setupClass(G)}}]);