"use strict";(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[9943],{5548(e,t,n){n.d(t,{A:()=>i});var s=n(3653),r=n(1857),a=n(6215);class o{componentId=null;dependencies=new Map;_fn=null;id=a.A.getId("effect");isDestroyed=!1;isRunning=null;get fn(){return this._fn}set fn(e){this._fn=e,this.run()}constructor(e,t={}){const n=this,{fn:r,componentId:a,lazy:o=!1,subscriber:i}="function"==typeof e?{...t,fn:e}:e||{};a&&(n.componentId=a),n.isRunning=new s.A(!1),i&&[].concat(i).forEach(e=>n.isRunning.subscribe(e)),o?n._fn=r:n.fn=r}destroy(){const e=this;e.dependencies.forEach(e=>e()),e.dependencies.clear(),e.isDestroyed=!0}run(){const e=this;if(e.isDestroyed)return;r.A.pauseTracking();const t=e.isRunning.get();if(r.A.resumeTracking(),!t)if(r.A.isPaused())r.A.queue(e);else{r.A.pauseTracking(),e.isRunning.set(!0),r.A.resumeTracking(),e.dependencies.forEach(e=>e()),e.dependencies.clear(),r.A.push(e);try{e.fn()}finally{r.A.pop(),r.A.pauseTracking(),e.isRunning.set(!1),r.A.resumeTracking()}}}addDependency(e){const t=this;if(!t.dependencies.has(e)){const n=e.subscribe({id:t.id,fn:t.run.bind(t)});t.dependencies.set(e,n)}}}const i=Neo.gatekeep(o,"Neo.core.Effect",()=>{Neo.effect=(e,t)=>new o(e,t)})},9943(e,t,n){n.d(t,{A:()=>d});var s=n(3572),r=n(5023),a=n(3653),o=n(5548),i=n(1857);function c(e,t){return new Proxy({},{get(n,s){if("symbol"==typeof s||"__REFADR__"===s||"inspect"===s||"then"===s)return Reflect.get(n,s);if("string"!=typeof s&&"number"!=typeof s)return;if(""===t&&"stores"===s)return new Proxy({},{get:(t,n)=>"symbol"==typeof n||"__REFADR__"===n?Reflect.get(t,n):e.getStore(n)});const r=t?`${t}.${s}`:s,a=e.getOwnerOfDataProperty(r);if(a){const{owner:t,propertyName:n}=a,s=t.getDataConfig(n);if(s){i.A.getActiveEffect()?.addDependency(s);const t=s.get();return Neo.isObject(t)?c(e,r):t}}return e.hasNestedDataStartingWith(r)?c(e,r):void 0},set(n,s,r){if("symbol"==typeof s||"__REFADR__"===s)return Reflect.set(n,s,r);const a=t?`${t}.${s}`:s,o=e.getOwnerOfDataProperty(a);let i;return i=o?o.owner:e,i.setData(a,r),!0},ownKeys:n=>e.getTopLevelDataKeys(t),getOwnPropertyDescriptor(n,s){const r=t?`${t}.${s}`:s,a=e.getOwnerOfDataProperty(r);if(a){const t=a.owner.getDataConfig(a.propertyName);if(t){const n=t.get();return{value:Neo.isObject(n)?c(e,r):n,writable:!0,enumerable:!0,configurable:!0}}}}})}function f(e){return c(e,"")}n(4556);var u=n(4256);const l=Symbol.for("twoWayBinding");class g extends s.A{static observable=!0;static config={className:"Neo.state.Provider",ntype:"state-provider",component:null,data_:{[u.o]:!0,merge:"deep",value:{}},formulas_:null,parent_:null,stores_:null,windowId:null};#e=new Map;#t={};#n=new Map;construct(e){Neo.isUsingStateProviders=!0,super.construct(e)}adjustValue(e){return e instanceof Date?new Date(e.valueOf()):e}afterSetData(e,t){e&&this.processDataObject(e)}afterSetFormulas(e,t){const n=this;n.#n.forEach(e=>e.destroy()),n.#n.clear(),e&&Object.entries(e).forEach(([e,t])=>{const s=new o.A({fn:()=>{const s=n.getHierarchyData(),r=t(s);n.setData(e,r)},lazy:!0});n.#n.set(e,s)})}beforeGetData(e){return this.getHierarchyData()}beforeSetStores(e,t){if(e){let t=this;Object.entries(e).forEach(([n,s])=>{Object.entries(s.listeners||{}).forEach(([e,n])=>{t.bindCallback(n,e,t,s.listeners)}),e[n]=r.A.beforeSetInstance(s)})}return e}createBinding(e,t,n){const s=this,r=new o.A(()=>{const r=Neo.get(e);if(r&&!r.isDestroyed){const e=s.getHierarchyData(),a=Neo.isFunction(n)?n.call(s,e):e[n];r._skipTwoWayPush=t,r[t]=a,delete r._skipTwoWayPush}});return s.#e.set(e,r),s.observeConfig(e,"isDestroying",t=>{t&&(r.destroy(),s.#e.delete(e))}),r}createBindings(e){let t=this,n=!1;Object.entries(e.bind||{}).forEach(([s,r])=>{let a=r;Neo.isObject(r)&&(r.twoWay&&(n=!0),a=r.key),t.isStoreValue(a)?t.resolveStore(e,s,a.substring(7)):t.createBinding(e.id,s,a,r.twoWay)}),n&&(e[l]=!0)}destroy(){const e=this;e.#n.forEach(e=>e.destroy()),e.#n.clear(),e.#e.forEach(e=>e.destroy()),e.#e.clear(),super.destroy()}getController(e){return this.component.getController(e)}getData(e){const t=this.getOwnerOfDataProperty(e);if(t)return t.owner.getDataConfig(t.propertyName).get()}getDataConfig(e){return this.#t[e]||null}getHierarchyData(){return f(this)}getOwnerOfDataProperty(e){let t=this;if(t.#t[e])return{owner:t,propertyName:e};const n=t.getParent();return n?n.getOwnerOfDataProperty(e):null}getParent(){let e=this;return e._parent?e._parent:e.component&&e.component.parent?.getStateProvider()||null}getStore(e,t=this){let n,{stores:s}=this;return s?.hasOwnProperty(e)?s[e]:(n=this.getParent(),n||console.error(`store '${e}' not found inside this stateProvider or parents.`,t),n.getStore(e,t))}hasNestedDataStartingWith(e){const t=`${e}.`;return!!Object.keys(this.#t).some(e=>e.startsWith(t))||this.getParent()?.hasNestedDataStartingWith(e)||!1}getTopLevelDataKeys(e){const t=new Set,n=e?`${e}.`:"";for(const e in this.#t)if(e.startsWith(n)){const s=e.substring(n.length).split(".")[0];s&&t.add(s)}return Array.from(t)}internalSetData(e,t,n){const s=this;if(Neo.isObject(e))return void Object.entries(e).forEach(([e,t])=>{s.internalSetData(e,t,n)});if("Object"===Neo.typeOf(t))return void Object.entries(t).forEach(([t,r])=>{const a=`${e}.${t}`;s.internalSetData(a,r,n)});const r=s.getOwnerOfDataProperty(e),a=r?r.owner:n||s;s.#s(a,e,t,null);let o=e,i=t;for(;o.includes(".");){const e=o.split(".").pop();o=o.substring(0,o.lastIndexOf("."));const t=a.getDataConfig(o);if(t){const n=t.get();if(!Neo.isObject(n))break;{const s={...n,[e]:i};t.set(s),i=s}}else{const t={[e]:i};s.#s(a,o,t),i=t}}}isStoreValue(e){return Neo.isString(e)&&e.startsWith("stores.")}onConstructed(){super.onConstructed(),this.#n.forEach(e=>e.run())}onDataPropertyChange(e,t,n){}processDataObject(e,t=""){let n=this;Object.entries(e).forEach(([e,s])=>{const r=t?`${t}.${e}`:e;s=n.adjustValue(s),n.#t[r]?n.#t[r].set(s):n.#t[r]=new a.A(s),"Object"===Neo.typeOf(s)&&n.processDataObject(s,r)})}resolveStore(e,t,n){let s=this.getStore(n);e[t]!==s&&(e[t]=s)}#s(e,t,n,s){n=e.adjustValue(n);let r=e.getDataConfig(t),o=!0,i=s;r?(i=r.get(),o=r.set(n)):(r=new a.A(n),e.#t[t]=r,e.#e.forEach(e=>e.run())),o&&e.onDataPropertyChange(t,n,i)}setData(e,t){i.A.pause();try{this.internalSetData(e,t,this)}finally{i.A.resume()}}setDataAtSameLevel(e,t){i.A.pause();try{this.internalSetData(e,t)}finally{i.A.resume()}}}const d=Neo.setupClass(g)}}]);