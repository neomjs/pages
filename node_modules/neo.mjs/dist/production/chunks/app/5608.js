"use strict";(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[5608],{5608:(e,t,o)=>{o.d(t,{A:()=>w});var n=o(2583),i=o(2778),r=o(293),d=o(6580),s=o(6270);class a extends n.A{static config={className:"Neo.util.KeyNavigation",ntype:"keynav",component_:null,keyDownEventBubble:!1,keys_:null};add(e){this._keys.push(...this.parseKeys(e))}beforeGetComponent(){return Neo.getComponent(this._component)}beforeSetComponent(e){return e?.id}destroy(){this.unregister(),super.destroy()}onKeyDown(e){if(e.key){let t,o=this,n=e.key.toUpperCase();n=o.parseUpperCaseKey(n),o.keys.forEach((i=>{t=Neo.isString(i.scope)?Neo.get(i.scope):i.scope,i.key.toUpperCase()===n&&(Neo.isFunction(i.fn)?i.fn.apply(t,[e,o.component]):t[i.fn]?.apply(t,[e,o.component]))}))}}parseKeys(e){if(!Array.isArray(e)){let t=this._component,o=[];t&&(Object.entries(e).forEach((([n,i])=>{"scope"!==n&&o.push({fn:i,key:n,scope:e.scope||t})})),e=o)}return e}parseUpperCaseKey(e){switch(e){case" ":e="SPACE";break;case"ARROWDOWN":e="DOWN";break;case"ARROWLEFT":e="LEFT";break;case"ARROWRIGHT":e="RIGHT";break;case"ARROWUP":e="UP"}return e}register(e){let t=this;t.component=e,t.keys=t.parseKeys(t.keys),e.addDomListeners({keydown:{bubble:t.keyDownEventBubble,fn:t.onKeyDown,scope:t}})}removeKey(e){let t,o=this._keys,n=0,i=o.length;for(;n<i;n++)if(t=o[n],Neo.isEqual(t,e)){s.A.remove(o,t);break}}removeKeys(e){Array.isArray(e)&&e.forEach((e=>this.removeKey(e)))}unregister(){}}const l=Neo.setupClass(a);o(599),o(5691);var h=o(1406),m=o(1842),c=o(1528),p=o(825),u=o(4483);const g=e=>null==e||isNaN(e)?e:`${e}px`,f=Symbol.for("closestController"),y=Symbol.for("closestProvider"),v=/^\d+\w+$/,b=Symbol.for("twoWayBinding");class N extends n.A{static hideModes=["removeDom","visibility"];static observable=!0;static config={className:"Neo.component.Base",ntype:"component",align_:{edgeAlign:"t-b",constrainTo:"document.body"},appName_:null,autoMount:!1,autoRender:!1,baseCls:[],bind:null,cls_:null,containsFocus_:!1,controller_:null,data_:null,disabled_:!1,domListeners_:null,droppable_:!1,dropZone:null,dropZoneConfig:null,floating:!1,hasBeenMounted:!1,hasRenderingListener:!1,hasUnmountedVdomChanges_:!1,height_:null,hidden_:!1,hideMode_:"removeDom",html_:null,isLoading_:!1,isVdomUpdating_:!1,keys_:null,loadingSpinnerCls_:["fa","fa-spinner","fa-spin"],maxHeight_:null,maxWidth_:null,minHeight_:null,minWidth_:null,modelData:null,mounted_:!1,needsVdomUpdate_:!1,parentComponent_:null,parentId_:"document.body",plugins_:null,reference_:null,responsive_:null,rendering_:!1,role_:null,scrollable_:!1,silentVdomUpdate_:!1,stateProvider_:null,style_:null,theme_:null,tag_:null,tooltip_:null,ui_:null,updateDepth_:1,vnode_:null,width_:null,windowId_:null,wrapperCls_:null,wrapperStyle_:null,_vdom:{}};childUpdateCache=[];currentUpdateDepth=null;resolveUpdateCache=[];get app(){return Neo.apps[this.appName]||null}get isVisible(){return this.mounted&&!this.hidden&&(!this.parent||this.parent.isVisible)}get listeners(){return this._listeners||{}}set listeners(e){this._listeners=e}get parent(){let e=this;return e.parentComponent||"document.body"===e.parentId?null:Neo.getComponent(e.parentId)}get rendered(){return this._rendered||!1}set rendered(e){let t=this;t._rendered=e,!0===e&&t.fire("rendered",t.id)}get vdom(){return this._vdom}set vdom(e){this.afterSetVdom(e,e)}addCls(e){let t=this.cls;s.A.add(t,e),this.cls=t}addDomListeners(e){Array.isArray(e)||(e=[e]);let t=this.domListeners;t.push(...e),this.domListeners=t}addStyle(e){return"string"==typeof e&&(e=c.A.createStyleObject(e)),this.style=Object.assign(this.style,e)}afterSetAppName(e,t){}afterSetCls(e,t){t=t||[];let o,n=this,i=n.vdom,r=n.getVdomRoot();i!==r?r.cls=[...e]:(o=s.A.union(n.wrapperCls,e),s.A.remove(o,s.A.difference(t,e)),i.cls=o),n.isVdomUpdating||n.silentVdomUpdate?n.needsVdomUpdate=!0:n.mounted&&n.vnode&&n.updateCls(e,t,r.id)}afterSetConfig(e,t,o){let n=this;if(Neo.currentWorker.isUsingStateProviders&&n[b]&&void 0!==o){let o=n.bind?.[e];o?.twoWay&&this.getStateProvider()?.setData(o.key,t)}}afterSetDisabled(e,t){let o=this.cls;s.A[e?"add":"remove"](o,"neo-disabled"),this.cls=o}afterSetDomListeners(e,t){let o=this;(e?.[0]||t?.[0])&&(o.getController()?.parseDomListeners(o),d.A.updateDomListeners(o,e,t))}afterSetDroppable(e,t){let n=this;e&&!n.dropZone&&o.e(8857).then(o.bind(o,8857)).then((e=>{n.dropZone=Neo.create({module:e.default,appName:n.appName,owner:n,windowId:n.windowId,...n.dropZoneConfig})}))}afterSetFlex(e,t){isNaN(e)||(e=`${e} ${e} 0%`),this.configuredFlex=e,this.changeVdomRootKey("flex",e)}afterSetHasUnmountedVdomChanges(e,t){if(e||!e&&t){let t,o=r.A.getParentIds(this),n=0,i=o.length;for(;n<i;n++)t=Neo.getComponent(o[n]),t&&(t._hasUnmountedVdomChanges=e)}}afterSetHeight(e,t){this.configuredHeight=g(e),this.changeVdomRootKey("height",e)}afterSetHidden(e,t){let o=this,n=e?"hide":"show";e&&void 0===t&&"removeDom"===o.hideMode?o.vdom.removeDom=!0:(e||void 0!==t)&&o[n](),e||o.revertFocus(),o.fire(n,{id:o.id}),o.fire("hiddenChange",{id:o.id,oldValue:t,value:e})}afterSetHtml(e,t){this.changeVdomRootKey("html",e)}afterSetId(e,t){super.afterSetId(e,t),this.changeVdomRootKey("id",e),t&&r.A.unregister(t),e&&r.A.register(this)}afterSetIsLoading(e,t){if(e||void 0!==t){let o,n=this,{cls:i,vdom:r}=n;void 0!==t&&r.cn&&(o=r.cn.findLastIndex((e=>e.cls?.includes("neo-load-mask"))),-1!==o&&r.cn.splice(o,1)),e&&(r.cn||(r.cn=[]),r.cn.push(n.createLoadingMask(e))),s.A.toggle(i,"neo-masked",e),n.set({cls:i,vdom:r})}}afterSetIsVdomUpdating(e,t){this.currentUpdateDepth=e?this.updateDepth:null}afterSetMaxHeight(e,t){this.configuredMaxHeight=g(e),this.changeVdomRootKey("maxHeight",e)}afterSetMaxWidth(e,t){this.configuredMaxWidth=g(e),this.changeVdomRootKey("maxWidth",e)}afterSetMinHeight(e,t){this.configuredMinHeight=g(e),this.changeVdomRootKey("minHeight",e)}afterSetMinWidth(e,t){this.configuredMinWidth=g(e),this.changeVdomRootKey("minWidth",e)}afterSetMounted(e,t){if(void 0!==t){let t=this,{id:o,windowId:n}=t;e?(t.hasBeenMounted=!0,t.domListeners?.length>0&&t.timeout(150).then((()=>{d.A.mountDomListeners(t)})),t.doResolveUpdateCache(),t.floating&&(t.alignTo(),t.focus(o,!0)),t.fire("mounted",t.id)):t.revertFocus()}}afterSetReference(e,t){e&&this.changeVdomRootKey("data-ref",e)}async afterSetResponsive(e,t){if(e&&!this.getPlugin("responsive")){let t=this,n=await o.e(5858).then(o.bind(o,5858)),i=t.plugins||[];i.push({module:n.default,appName:t.appName,value:e}),t.plugins=i}}afterSetRole(e,t){this.changeVdomRootKey("role",e)}afterSetScrollable(e,t){if(void 0===t&&!e)return;let o=this;if(t){let e="overflow";Neo.isBoolean(t)||(e+=Neo.capitalize(t)),o.removeStyle([e])}if(!Neo.isEmpty(e)){let t="overflow";e&&!Neo.isBoolean(e)&&(t+=Neo.capitalize(e)),e?(o.addStyle(t+":auto"),o.addCls("neo-scrollable")):o.removeCls("neo-scrollable")}}afterSetStyle(e,t){(e||void 0!==t)&&this.updateStyle(e,t)}afterSetTag(e,t){e&&this.changeVdomRootKey("tag",e)}afterSetTheme(e,t){if(e||void 0!==t){let o=this.cls;s.A.remove(o,t),e&&s.A.add(o,e),this.cls=o}}afterSetTooltip(e,t){t?.destroy?.(),e&&(Neo.ns("Neo.tooltip.Base")?this.createTooltip(e):Promise.all([o.e(3079),o.e(5451)]).then(o.bind(o,5451)).then((()=>{this.createTooltip(e)})))}afterSetUi(e,t){let o=this,n=o.cls;s.A.remove(n,`neo-${o.ntype}-${t}`),e&&""!==e&&s.A.add(n,`neo-${o.ntype}-${e}`),o.cls=n}afterSetVdom(e,t){this.updateVdom(e)}afterSetVnode(e,t){void 0!==t&&this.syncVnodeTree()}afterSetWidth(e,t){this.configuredWidth=g(e),this.changeVdomRootKey("width",e)}afterSetWindowId(e,t){let o=this,n=o.controller;e&&(Neo.currentWorker.insertThemeFiles(e,o.__proto__),n&&(n.windowId=e)),t&&(o.isVdomUpdating=!1)}afterSetWrapperCls(e,t){t=t||[],e=e||[];let o=this,n=o.vdom,i=o.getVdomRoot(),r=o.vdom?.cls||[];n===i?(r=s.A.union(r,e),s.A.remove(r,s.A.difference(t,e)),n.cls=r):(e=e||[],t&&s.A.remove(r,t),s.A.add(r,e),n&&(n.cls=r)),o.isVdomUpdating||o.silentVdomUpdate?o.needsVdomUpdate=!0:o.mounted&&o.updateCls(e,t)}afterSetWrapperStyle(e,t){if(e||void 0!==t){let o=this,n=o.vdom;n.id?o.updateStyle(e,t,n.id):(n.style=e,o.update())}}async alignTo(e={}){const t=this,o={...t.align,...e,id:t.id,configuredFlex:t.configuredFlex,configuredWidth:t.configuredWidth,configuredHeight:t.configuredHeight,configuredMinWidth:t.configuredMinWidth,configuredMinHeight:t.configuredMinHeight,configuredMaxWidth:t.configuredMaxWidth,configuredMaxHeight:t.configuredMaxHeight};o.target&&await Neo.main.DomAccess.align(o)}beforeGetCls(e){return e?[...e]:[]}beforeGetData(e){return this.getStateProvider().getHierarchyData()}beforeGetStyle(e){return{...e}}beforeGetWrapperCls(e){return e?[...e]:[]}beforeGetWrapperStyle(e){return{...Object.assign(this.vdom.style||{},e)}}beforeSetAlign(e,t){return"string"==typeof e&&(e={edgeAlign:e}),Neo.merge({},e,this.constructor.config.align)}beforeSetCls(e,t){return s.A.union(e||[],this.baseCls,this.getBaseClass())}beforeSetController(e,t){return t?.destroy(),e?i.A.beforeSetInstance(e,null,{component:this,windowId:this.windowId}):e}beforeSetDomListeners(e,t){return Neo.isObject(e)&&(e=[e]),e||[]}beforeSetHideMode(e,t){return this.beforeSetEnumValue(e,t,"hideMode")}beforeSetKeys(e,t){return t?.destroy(),e&&(e=i.A.beforeSetInstance(e,l,{keyDownEventBubble:!0,keys:e})),e}beforeSetStateProvider(e,t){if(t?.destroy(),e){let t=this,o={component:t};return t.modelData&&(o.data=t.modelData),i.A.beforeSetInstance(e,"Neo.state.Provider",o)}return null}beforeSetPlugins(e,t){return Array.isArray(e)&&e.forEach(((t,o)=>{e[o]=i.A.beforeSetInstance(t,null,{owner:this})})),e}beforeSetSilentVdomUpdate(e,t){return!0===e?Neo.isNumber(t)?t+1:1:Neo.isNumber(t)&&t>0?t-1:0}beforeSetUpdateDepth(e,t){return void 0===t?e:-1===t||-1===e?-1:Math.max(e,t)}changeVdomRootKey(e,t){let o=this.getVdomRoot();t?o[e]=t:delete o[e],this.update()}createLoadingMask(e){return{cls:["neo-load-mask"],cn:[{cls:["neo-load-mask-body"],cn:[{cls:this.loadingSpinnerCls},{cls:["neo-loading-message"],html:e,removeDom:!Neo.isString(e)}]}]}}createTooltip(e){"string"==typeof e&&(e={text:e});let t=this;e.ownInstance?t._tooltip=Neo.create("Neo.tooltip.Base",{...e,appName:t.appName,componentId:t.id,windowId:t.windowId}):(t._tooltip=e,Neo.tooltip.Base.createSingleton(t.app),t.addCls("neo-uses-shared-tooltip"),t.update())}createVdomReference(){let e=this,t={componentId:e.id},o=e.vdom.id;return o&&e.id!==o&&(t.id=o),t}destroy(e=!1,t=!1){let o,n=this,{parent:i,parentId:d}=n,s=i?.getStateProvider();n.revertFocus(),n.domListeners=[],n.controller=null,n.reference&&n.getController()?.removeReference(n),n.stateProvider=null,n.bind&&s?.removeBindings(n.id),n.plugins?.forEach((e=>{e.destroy()})),e&&d&&("document.body"===d?Neo.applyDeltas(n.appName,{action:"removeNode",id:n.vdom.id}):(o=i.vdom,p.A.removeVdomChild(o,n.vdom.id),i[t?"_vdom":"vdom"]=o)),r.A.unregister(n),super.destroy(),n.onFocusLeave=Neo.emptyFn,n.unmount=Neo.emptyFn}doResolveUpdateCache(){let e=this;e.resolveUpdateCache&&(e.resolveUpdateCache.forEach((e=>e())),e.resolveUpdateCache=[])}down(e,t=!0){return r.A.down(this,e,t)}#e(e,t,o,n){let i,d=this,s={};Neo.currentWorker.isSharedWorker&&(s.appName=d.appName,s.windowId=d.windowId),d.isVdomUpdating=!0,d._needsVdomUpdate=!1,d.afterSetNeedsVdomUpdate?.(!1,!0),s.vdom=r.A.getVdomTree(e,d.updateDepth),s.vnode=r.A.getVnodeTree(t,d.updateDepth),d._updateDepth=d.constructor.config.updateDepth,Neo.vdom.Helper.update(s).catch((e=>{d.isVdomUpdating=!1,console.log("Error attempting to update component dom",e,d),n?.()})).then((e=>{d.isVdomUpdating=!1,d.id&&(d.vnode=e.vnode,i=e.deltas,!Neo.config.useVdomWorker&&i.length>0?Neo.applyDeltas(d.appName,i).then((()=>{d.resolveVdomUpdate(o)})):d.resolveVdomUpdate(o))}))}focus(e=this.id,t=!1){Neo.main.DomAccess.focus({children:t,id:e,windowId:this.windowId})}getBaseClass(){const e=[];return this.floating&&e.push("neo-floating"),e}getConfigInstanceByNtype(e,t){let o=this,n=o[e],{parentComponent:i}=o;return!n||t&&t!==n.ntype?(!i&&o.parentId&&(i=o.parent||Neo.get(o.parentId)),i?i.getConfigInstanceByNtype(e,t):null):n}getController(e){let t,o=this;return!e&&(t=o[f],t)||(t=o.getConfigInstanceByNtype("controller",e),e||(o[f]=t)),t}async getDomRect(e=this.id,t=this.appName){let o=await Neo.main.DomAccess.getBoundingClientRect({appName:t,id:e,windowId:this.windowId});return Array.isArray(o)?o.map((e=>h.A.clone(e))):h.A.clone(o)}getMountedParentId(){let e=this.parentId,t=Neo.getComponent(e),o=t?.getVdomItemsRoot?.();return o?o.id:e}getMountedParentIndex(){let e,t=this.parent,o=t?.items||[],n=0,i=0,r=o.length;for(;n<r;n++){if(e=o[n],e===this)return i;e.hidden||"removeDom"!==e.hideMode||i++}}getParents(){return r.A.getParents(this)}getPlugin(e){Neo.isString(e)&&(e.startsWith("plugin-")||(e="plugin-"+e),e={ntype:e});let t,o=this;for(const n of o.plugins||[]){t=!0;for(const o in e)if(n[o]!==e[o]){t=!1;break}if(t)return n}return null}getReference(e){return this.down({reference:e})}getState(...e){return this.getStateProvider().getData(...e)}getStateProvider(e){if(!Neo.currentWorker.isUsingStateProviders)return null;let t,o=this;return!e&&(t=o[y],t)||(t=o.getConfigInstanceByNtype("stateProvider",e),e||(o[y]=t)),t}getTheme(){let e,t,o=this,n="neo-theme-";for(const e of o.cls||[])if(e.startsWith(n))return e;if(e=o.app?.mainView,e){t=p.A.getParentNodes(e.vdom,o.id);for(const e of t||[])for(const t of e.cls||[])if(t.startsWith(n))return t}return Neo.config.themes?.[0]}getVdomChild(e,t=this.vdom){return p.A.find(t,e)?.vdom}getVdomRoot(){return this.vdom}getVnodeRoot(){return this.vnode}hasUpdateCollision(e,t){return-1===e||t<e}hide(e){let t=this;if("visibility"!==t.hideMode){let o=function(){"document.body"!==t.parentId?(t.vdom.removeDom=!0,t.parent.updateDepth=2,t.parent.update()):t.unmount()};e?t.timeout(e).then(o):o()}else{let e=t.style;e.visibility="hidden",t.style=e}t._hidden=!0}init(){this.autoRender&&this.render()}initConfig(e,t){super.initConfig(e,t);let o=this;o.getController()?.parseConfig(o),o.getStateProvider()?.parseConfig(o)}isParentUpdating(e=this.parentId,t,o=1){if("document.body"!==e){let n=this,i=Neo.getComponent(e);if(i)return i.isVdomUpdating?!!n.hasUpdateCollision(i.currentUpdateDepth,o)&&(Neo.config.logVdomUpdateCollisions&&console.warn("vdom parent update conflict with:",i,"for:",n),s.A.add(i.childUpdateCache,n.id),t&&n.resolveUpdateCache.push(t),!0):n.isParentUpdating(i.parentId,t,o+1)}return!1}async measure(e){if(null!=e)if(e.endsWith("px"))e=parseFloat(e);else if(v.test(e)){let{id:t,windowId:o}=this;e=await Neo.main.DomAccess.measure({id:t,value:e,windowId:o})}else isNaN(e)||(e=parseFloat(e));return e}mergeConfig(...e){let t=this,o=super.mergeConfig(...e),n={...t._vdom||{},...o.vdom||{}};return t._vdom=Neo.clone(n,!0,!0),o.style&&(t.style="Object"===Neo.typeOf(o.style)?{...o.style,...t.constructor.config.style}:o.style),t.wrapperStyle=Neo.clone(o.wrapperStyle,!1),delete o.style,delete o._vdom,delete o.vdom,delete o.wrapperStyle,o}async mount(){let e,t,o=this;if(!o.vnode)throw new Error("Component vnode must be generated before mounting, use Component.render()");o.hasUnmountedVdomChanges?(o.hasUnmountedVdomChanges=!1,t=r.A.getChildIds(o.vnode),t.forEach((t=>{e=Neo.getComponent(t),e&&(e._hasUnmountedVdomChanges=!1)})),o.render(!0)):(await Neo.currentWorker.promiseMessage("main",{action:"mountDom",appName:o.appName,id:o.id,html:o.vnode.outerHTML,parentId:o.getMountedParentId(),parentIndex:o.getMountedParentIndex()}),delete o.vdom.removeDom,await o.timeout(30),o.mounted=!0)}needsParentUpdate(e=this.parentId,t,o=1){if("document.body"!==e){let n=this,i=Neo.getComponent(e);if(i)return i.needsVdomUpdate&&n.hasUpdateCollision(i.updateDepth,o)?(i.resolveUpdateCache.push(...n.resolveUpdateCache),t&&i.resolveUpdateCache.push(t),n.resolveUpdateCache=[],!0):n.needsParentUpdate(i.parentId,t,o+1)}return!1}onConstructed(){super.onConstructed(),this.keys?.register(this)}onFocusEnter(e){this.focusEnterData=e}onFocusLeave(e){this.focusEnterData=null}onRender(e,t){let o=this,{app:n}=o;if(o.rendering=!1,n){n.rendered||(n.rendering=!1,n.rendered=!0,n.fire("render")),o.vnode=e;let i,d=r.A.getChildIds(e),s=0,a=d.length;for(;s<a;s++)i=Neo.getComponent(d[s]),i&&(i.rendered=!0);o._rendered=!0,o.fire("rendered",o.id),t&&(o.mounted=!0,n.mounted||(n.mounted=!0,n.fire("mounted")))}}promiseUpdate(e=this.vdom,t=this.vnode){return new Promise(((o,n)=>{this.updateVdom(e,t,o,n)}))}removeCls(e){let t=this.cls;s.A.remove(t,e),this.cls=t}removeDomListeners(e){Array.isArray(e)||(e=[e]);let t,o,{domListeners:n}=this;e.forEach((e=>{for(t=0,o=n.length;t<o;t++)if(Neo.isEqual(e,n[t])){n.splice(t,1);break}})),this.domListeners=n}removeStyle(e){Array.isArray(e)||(e=[e]);let{style:t}=this,o=!1;return Object.keys(t).forEach((n=>{e.indexOf(n)>-1&&(delete t[n],o=!0)})),o&&(this.style=t),t}async render(e){let t=this,o=e||t.autoMount,{app:n}=t,{useVdomWorker:i}=Neo.config;if(0===Neo.currentWorker.countLoadingThemeFiles){if(t.rendering=!0,n.rendered||(n.rendering=!0),t.vdom){t.isVdomUpdating=!0,delete t.vdom.removeDom,t._needsVdomUpdate=!1,t.afterSetNeedsVdomUpdate?.(!1,!0);const e=await Neo.vdom.Helper.create({appName:t.appName,autoMount:o,parentId:o?t.getMountedParentId():void 0,parentIndex:o?t.getMountedParentIndex():void 0,windowId:t.windowId,...r.A.getVdomTree(t.vdom)});t.onRender(e,!!i&&o),t.isVdomUpdating=!1,o&&!i&&t.mount(),t.resolveVdomUpdate()}}else Neo.currentWorker.on("themeFilesLoaded",(function(){t.render(e)}),t,{once:!0})}resolveVdomUpdate(e){let t=this;t.doResolveUpdateCache(),e?.(),t.needsVdomUpdate?(t.childUpdateCache=[],t.update()):t.childUpdateCache&&[...t.childUpdateCache].forEach((e=>{Neo.getComponent(e)?.update(),s.A.remove(t.childUpdateCache,e)}))}revertFocus(){let e=this.focusEnterData?.relatedTarget;this.containsFocus&&e&&Neo.getComponent(e.id)?.focus()}set(e={},t=!1){let o=this,n=!1===e.hidden&&e.hidden!==o.hidden;return o.silentVdomUpdate=!0,super.set(e),o.silentVdomUpdate=!1,t||!o.needsVdomUpdate?Promise.resolve():n?(o.show(),Promise.resolve()):o.promiseUpdate()}setSilent(e={}){return this.set(e,!0)}setState(...e){this.getStateProvider().setData(...e)}show(){let e=this;if("visibility"!==e.hideMode)delete e.vdom.removeDom,e.silentVdomUpdate?e.needsVdomUpdate=!0:"document.body"!==e.parentId?(e.parent.updateDepth=2,e.parent.update()):!e.mounted&&e.render(!0);else{let t=e.style;delete t.visibility,e.style=t}e._hidden=!1}syncVdomIds(e=this.vnode,t=this.vdom,o=!1){p.A.syncVdomIds(e,t,o)}syncVnodeTree(e=this.vnode){let t,o=this,n=r.A.getChildren(o),i={};o.syncVdomIds(),e&&o.id!==e.id&&r.A.registerWrapperNode(e.id,o),n.forEach((e=>{t=u.A.find(o.vnode,e.vdom.id)?.vnode,t&&(i[e.id]=t,e.id!==t.id&&r.A.registerWrapperNode(t.id,e))})),n.forEach((e=>{t=i[e.id],t?(e._vnode=r.A.addVnodeComponentReferences(t,e.id),e.rendered||(e._rendered=!0,e.fire("rendered",e.id)),e.mounted=!0):console.warn("syncVnodeTree: Could not replace the child vnode for",e.id)})),o._vnode=e?r.A.addVnodeComponentReferences(e,o.id):null}toggleCls(e,t){let o=this.cls;s.A.toggle(o,e,t),this.cls=o}unmount(){let e=this;e.vdom.removeDom=!0,e._hidden=!0,e.mounted=!1,Neo.applyDeltas(e.appName,{action:"removeNode",id:e.vdom.id})}up(e){return r.A.up(this.id,e)}update(){this.afterSetVdom(this.vdom,null)}updateCls(e,t,o=this.id){let n=this,{vnode:i}=n,r=i&&u.A.find(n.vnode,{id:o})?.vnode;i&&!Neo.isEqual(e,t)&&(r&&(r.className=e,n.vnode=i),Neo.applyDeltas(n.appName,{id:o,cls:{add:s.A.difference(e,t),remove:s.A.difference(t,e)}}))}updateStyle(e,t,o=this.id){let n,i,r,d,s=this,a=m.A.compareStyles(e,t);a&&(i=p.A.find(s.vdom,o),r=s.vnode&&u.A.find(s.vnode,o),s.hasUnmountedVdomChanges||(s.hasUnmountedVdomChanges=!s.mounted&&s.hasBeenMounted),i.vdom.style=e,s.silentVdomUpdate?s.needsVdomUpdate=!0:s.mounted&&(d=r.vnode.style,Object.entries(a).forEach((([e,t])=>{null===t?delete r.vnode.style[e]:d[e]=t})),n={action:"updateDom",deltas:[{id:o,style:a}]},Neo.currentWorker.isSharedWorker&&(n.appName=s.appName),Neo.currentWorker.sendMessage("main",n)))}updateVdom(e=this.vdom,t=this.vnode,o,n){let i,r=this,{app:d,mounted:s,parentId:a}=r;r.isVdomUpdating||r.silentVdomUpdate?(o&&r.resolveUpdateCache.push(o),r.needsVdomUpdate=!0):s||!r.isConstructed||r.hasRenderingListener||!0!==d?.rendering?(!o||s&&t||r.resolveUpdateCache.push(o),!r.needsParentUpdate(a,o)&&!r.isParentUpdating(a,o)&&s&&t&&r.#e(e,t,o,n)):(r.hasRenderingListener=!0,i=d.on("mounted",(()=>{d.un("mounted",i),r.timeout(50).then((()=>{r.vnode&&r.updateVdom(r.vdom,r.vnode,o,n)}))}))),r.hasUnmountedVdomChanges=!s&&r.hasBeenMounted}}const w=Neo.setupClass(N)},1406:(e,t,o)=>{o.d(t,{A:()=>u});const n=Object.freeze([]),i=(e=0)=>{switch(Array.isArray(e)||(e=[e]),e.length){case 1:return e.length=4,e.fill(e[0],1,4);case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]]}return e},r=e=>{const t=s[e.ourEdge],o=s[e.theirEdge];return`${t}${e.ourEdgeOffset}${e.ourEdgeUnit}-${o}${e.theirEdgeOffset}${e.theirEdgeUnit}`},d=e=>{const t=e instanceof DOMRect?e:(1===e?.nodeType?e:"string"==typeof e?document.getElementById(e):null)?.getBoundingClientRect();return t&&new u(t.x,t.y,t.width,t.height)},s={t:"b",r:"l",b:"t",l:"r"},a={t:0,r:1,b:2,l:3},l=["top","right","bottom","left"],h=["t","r","b","l"],m=["width","height"],c=[0,0,0,0],p=/^([trblc])(\d*)(%|px)?-([trblc])(\d*)(%|px)?$/;class u extends DOMRect{static config={className:"Neo.util.Rectangle"};minHeight=null;minWidth=null;static excludes(e,t){return e.bottom<t.top||e.left>t.right||e.right<t.left||e.top>t.bottom}static getIntersection(e,t){return u.getIntersectionDetails(e,t).area}static getIntersectionDetails(e,t){let o=Math.max(0,Math.min(e.right,t.right)-Math.max(e.left,t.left)),n=Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top));return{area:n*o,height:n,width:o}}static includes(e,t){return e.bottom>=t.bottom&&e.left<=t.left&&e.right>=t.right&&e.top<=t.top}static leavesSide(e,t,o){return!u.includes(e,t)&&("bottom"===o?e.bottom<t.bottom:"left"===o?e.left>t.left:"right"===o?e.right<t.right:"top"===o?e.top>t.top:void 0)}static moveBy(e,t=null,o=null){let n={...e};return Neo.isNumber(t)&&(n.left+=t,n.right+=t,n.x+=t),Neo.isNumber(o)&&(n.bottom+=o,n.top+=o,n.y+=o),n}static moveTo(e,t=null,o=null){let n={...e};return Neo.isNumber(t)&&(n.left=t,n.right=t+n.width,n.x=t),Neo.isNumber(o)&&(n.bottom=o+n.height,n.top=o,n.y=o),n}set bottom(e){this.height+=e-this.bottom}get bottom(){return super.bottom}set right(e){this.width+=e-this.right}get right(){return super.right}changeX(e){const t=this.x-e;this.x=e,this.width+=t}changeY(e){const t=this.y-e;this.y=e,this.height+=t}clone(){return u.clone(this)}static clone(e){const t=new u(e.x,e.y,e.width,e.height);return t.minWidth=e.minWidth,t.minHeight=e.minHeight,t}intersects(e){const t=this;if(e.height&&e.width){const o=Math.max(t.x,e.x),n=Math.max(t.y,e.y),i=Math.min(t.x+t.width,e.x+e.width),r=Math.min(t.y+t.height,e.y+e.height);return!(o>=i||n>=r)&&new u(o,n,i-o,r-n)}return e.x>=t.x&&e.y>=t.y&&e.right<=t.right&&e.bottom<=t.bottom}contains(e){return this.bottom>=e.bottom&&this.left<=e.left&&this.right>=e.right&&this.top<=e.top}expand(e){return e=i(e),new this.constructor(this.x-e[3],this.y-e[0],this.width+e[1]+e[3],this.height+e[0]+e[2])}moveBy(e=0,t=0){const o=this.clone();return Array.isArray(e)&&(t=e[1],e=e[0]),o.x+=e,o.y+=t,o}contains(e){return this.constructor.includes(this,e)}constrainTo(e){const t=this,o=t.minWidth||t.width;if((t.minHeight||t.height)>e.height||o>e.width)return!1;const n=t.clone();return n.x=Math.max(t.x+Math.min(e.right-n.right,0),e.x),n.y=Math.max(t.y+Math.min(e.bottom-n.bottom,0),e.y),n.bottom=Math.min(n.bottom,e.bottom),n.right=Math.min(n.right,e.right),n}alignTo(e){const t=this,{constrainTo:o,target:n,edgeAlign:u,axisLock:g,offset:f,matchSize:y}=e,v=e.targetMargin?i(e.targetMargin):c,b=d(n),N=d(o),w=(e=>{const t=p.exec(e),o=a[t[1]],n=a[t[4]];return{ourEdge:t[1],ourEdgeOffset:parseInt(t[2]||50),ourEdgeUnit:t[3]||"%",ourEdgeZone:o,theirEdge:t[4],theirEdgeOffset:parseInt(t[5]||50),theirEdgeUnit:t[6]||"%",theirEdgeZone:n,edgeAligned:(1&o)==(1&n)&&o!==n}})(u),C=m[1&w.theirEdgeZone];let S=t.clone();y&&(S[C]=b[C]);const A=S.getAnchorPoint(w.ourEdgeZone,w.ourEdgeOffset,w.ourEdgeUnit),U=b.getAnchorPoint(w.theirEdgeZone,w.theirEdgeOffset,w.theirEdgeUnit,v),V=[U[0]-A[0],U[1]-A[1]];if(S=S.moveBy(V),S.zone=w.theirEdgeZone,S.position=l[S.zone],N&&!N.contains(S)){if(b.intersects(S))return S;let e=w.theirEdgeZone;const o=[{zone:e,edgeAlign:u}];if(g)o[1]={zone:e=(e+2)%4,edgeAlign:r(w)},o.push({zone:e=(w.theirEdgeZone+1)%4,edgeAlign:`${s[h[e]]}-${h[e]}`}),o.push({zone:e=(w.theirEdgeZone+3)%4,edgeAlign:`${s[h[e]]}-${h[e]}`});else for(let t=1;t<4;t++)o.push({zone:e=(e+1)%4,edgeAlign:`${s[h[e]]}-${h[e]}`});for(let e=0;e<o.length;e++){const t=N.clone();switch(o[e].zone){case 0:t.bottom=b.y-v[0];break;case 1:t.changeX(b.right+v[1]);break;case 2:t.changeY(b.bottom+v[2]);break;case 3:t.right=b.x-v[3]}o[e].constrainRect=t}for(let e=0;e<o.length;e++){const{zone:n,edgeAlign:i,constrainRect:r}=o[e],d=h[n];y&&(S[C]=d===w.theirEdge||d==s[w.theirEdge]?b[C]:t[C]),S=S.alignTo({target:b,edgeAlign:i,targetMargin:v});let a=S.constrainTo(r);if(a)return a.zone=n,a.position=l[n],a}}return f&&S.moveBy(f),S}getAnchorPoint(e,t,o,i=n){const r=this;let d;switch(e){case 0:d=[r.x,r.y-(i[0]||0),r.width,0];break;case 1:d=[r.x+r.width+(i[1]||0),r.y,r.height,1];break;case 2:d=[r.x,r.y+r.height+(i[2]||0),r.width,0];break;case 3:d=[r.x-(i[3]||0),r.y,r.height,1]}return d[d[3]]+="%"===o?d[2]/100*t:t,d.length=2,d}equals(e){return e instanceof DOMRect&&e.x===this.x&&e.y===this.y&&e.height===this.height&&e.width===this.width}show(e="red"){const t=document.createElement("div");return t.style=`\n            position:absolute;\n            transform:translate3d(${this.x}px, ${this.y}px, 0);\n            height:${this.height}px;\n            width:${this.width}px;\n            background-color:${e}\n        `,document.body.appendChild(t),setTimeout((()=>t.remove()),3e4),t}toJSON(){const{bottom:e,height:t,left:o,minHeight:n,minWidth:i,right:r,top:d,width:s,x:a,y:l}=this;return{bottom:e,height:t,left:o,minHeight:n,minWidth:i,right:r,top:d,width:s,x:a,y:l}}}},1842:(e,t,o)=>{o.d(t,{A:()=>r});var n=o(2583);class i extends n.A{static config={className:"Neo.util.Style"};static compareStyles(e,t){let o={};return Neo.isString(e)&&(e=Neo.createStyleObject(e)),Neo.isString(t)&&(t=Neo.createStyleObject(t)),e||t?t?e?(Object.keys(e).forEach((n=>{t.hasOwnProperty(n)&&t[n]===e[n]||(o[n]=e[n])})),Object.keys(t).forEach((t=>{e.hasOwnProperty(t)||(o[t]=null)})),Object.keys(o).length>0?o:null):void Object.keys(t).forEach((function(e){o[e]=null})):Neo.clone(e):null}}const r=Neo.setupClass(i)}}]);