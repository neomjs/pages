"use strict";(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[795],{3176(e,t,l){l.d(t,{A:()=>c});var o=l(3123),n=l(5023),s=l(6969),i=l(1031),r=l(3675),d=l(950);class a extends o.A{static config={className:"Neo.tree.List",ntype:"treelist",baseCls:["neo-tree-list"],disableSelection:!1,dragResortable_:!1,dragZone:null,folderCls:"neo-list-folder",showCollapseExpandAllIcons:!0,sortZone:null,sortZoneConfig:null,wrapperCls:[],saveScrollPosition:!1,_vdom:{cn:[{tag:"ul",cls:["neo-list-container","neo-list"],tabIndex:-1,cn:[]}]}};afterSetDraggable(e,t){let o=this;e&&(o.dragResortable?console.error("tree.List can be either draggable or dragResortable, not both.",o.id):o.dragZone||Promise.all([l.e(9244),l.e(4520)]).then(l.bind(l,4520)).then(e=>{o.dragZone=Neo.create({module:e.default,appName:o.appName,owner:o,windowId:o.windowId,...o.dragZoneConfig})}))}afterSetDragResortable(e,t){let o=this;e&&(o.draggable?console.error("tree.List can be either draggable or dragResortable, not both.",o.id):o.sortZone||Promise.all([l.e(9244),l.e(9458)]).then(l.bind(l,9458)).then(e=>{o.sortZone=Neo.create({module:e.default,appName:o.appName,boundaryContainerId:o.id,owner:o,windowId:o.windowId,...o.sortZoneConfig})}))}beforeSetSelectionModel(e,t){return t?.destroy(),n.A.beforeSetInstance(e,r.A)}beforeSetStore(e,t){return e||(e=Neo.create(s.A,{keyProperty:"id"})),super.beforeSetStore(e,t)}collapseAll(e=!1){let t,l,o,n,s=this,r=!1;s.store.forEach(e=>{e.isLeaf||(l=s.getVdomChild(s.getItemId(e.id),s.vdom),l.cls.includes("neo-folder-open")&&(i.A.remove(l.cls,"neo-folder-open"),({parentNode:o,index:n}=d.A.find(s.vdom,l.id)),t=o.cn[n+1],l.style.position=null,l.style.top=null,"ul"===t?.tag&&(t.removeDom=!0),r=!0))}),r&&!e&&s.update()}createItem(e){let t,l=this,{folderCls:o,itemCls:n}=l,s=[n],i=[n+"-content"],r=l.getKeyProperty();return e.iconCls&&(Array.isArray(e.iconCls)?i.push(...e.iconCls):i.push(e.iconCls)),e.isLeaf?s.push(n+(e.singleton?"-leaf-singleton":"-leaf")):(s.push(o),e.collapsed||s.push("neo-folder-open")),t={tag:"li",cls:s,id:l.getItemId(e[r]),level:e.level,cn:[{tag:"span",cls:i,html:e[l.displayField],style:{pointerEvents:"none"}}],style:{display:e.hidden?"none":"flex",padding:"10px",position:e.isLeaf||e.collapsed?null:"sticky",top:e.isLeaf||e.collapsed?null:38*e.level+"px",zIndex:e.isLeaf?1:1e4+e.level}},l.itemsFocusable&&(t.tabIndex=-1),t}createItemLevel(e,t,l,o=!1){let n,s=this,i=s.store.find("parentId",e);return i.length>0&&(t.cn||(t.cn=[]),null!==e?(t.cn.push({tag:"ul",cls:["neo-list"],cn:[],removeDom:o,style:{paddingLeft:"15px"}}),n=t.cn[t.cn.length-1]):n=t,i.forEach(e=>{e.level=l,n.cn.push(s.createItem(e)),s.createItemLevel(e.id,n,l+1,e.hidden||o||e.collapsed)})),t}createItems(){let e=this,t=e.getListItemsRoot();t.cn=[],e.createItemLevel(null,t,0),e.update()}expandAll(e=!1){let t,l,o,n,s=this,r=!1;s.store.forEach(e=>{e.isLeaf||(l=s.getVdomChild(s.getItemId(e.id),s.vdom),l.cls.includes("neo-folder-open")||(i.A.add(l.cls,"neo-folder-open"),({parentNode:o,index:n}=d.A.find(s.vdom,l.id)),t=o.cn[n+1],l.style.position="sticky",l.style.top=38*l.level+"px","ul"===t?.tag&&(t.removeDom=!1),r=!0))}),r&&!e&&s.update()}async expandAndScrollToItem(e){let t=this;t.expandParents(e);const l=t.getItemId(e);await t.waitForDomRect({id:l,attempts:20,delay:50})&&t.scrollToItem(e)}expandParents(e){let t,l,o,n,s,r=this,a=r.store.get(e),c=!1;if(a)for(o=a.parentId;o;)l=r.getVdomChild(r.getItemId(o)),l&&!l.cls.includes("neo-folder-open")&&(i.A.add(l.cls,"neo-folder-open"),({parentNode:n,index:s}=d.A.find(r.vdom,l.id)),t=n.cn[s+1],l.style.position="sticky",l.style.top=38*l.level+"px","ul"===t?.tag&&(t.removeDom=!1),c=!0),a=r.store.get(o),o=a?a.parentId:null;c&&r.update()}filter(e,t,l,o=!1){let n,s,i,r=this,d=!0,a=new RegExp(t,"gi");return t||(t=""),r.store.forEach(c=>{c.parentId===l&&(s=!1,i=r.getVdomChild(r.getItemId(c.id),r.vdom),i.cn[0].html=c[e].replace(a,e=>(s=!0,`<span class="neo-highlight-search">${e}</span>`)),n=!!c.isLeaf||r.filter(e,t,c.id,s||o),(s||o||!1===n||""===t)&&(d=!1),i.style.display=d?"none":"list-item")}),null===l&&(r.expandAll(!0),r.update()),d}scrollToItem(e){Neo.main.DomAccess.scrollIntoView({id:this.getItemId(e),inline:"start",windowId:this.windowId})}getListItemsRoot(){let e=this.vdom.cn;return e.length>=3&&e[0].cls?.includes("neo-treelist-collapse-all-icon")?e[2]:e[0]}onClick(e){e.target.cls.includes("neo-treelist-menu-item")?this.onMenuItemClick(e.target.cls):super.onClick(e)}onConstructed(){super.onConstructed();let e=this;e.showCollapseExpandAllIcons&&(e.vdom.cn.unshift({cls:["neo-treelist-menu-item","neo-treelist-collapse-all-icon"],cn:[{tag:"span",cls:["neo-treelist-menu-item-content"]}]},{cls:["neo-treelist-menu-item","neo-treelist-expand-all-icon"],cn:[{tag:"span",cls:["neo-treelist-menu-item-content"]}]}),e.update())}onItemClick(e,t){let l,o,n,s,r=this,{items:a}=r.store,c=0,p=a.length,m=r.getKeyProperty(),u=t.path.map(e=>e.id);for(;c<p;c++)if(n=a[c],s=r.getItemId(n[m]),u.includes(s)){o=n,l=r.getVdomChild(s);break}if(l){if(l.cls?.includes(r.folderCls)){i.A.toggle(l.cls,"neo-folder-open");let e=l.cls.includes("neo-folder-open"),{parentNode:t,index:o}=d.A.find(r.vdom,l.id),n=t.cn[o+1];l.style.position=e?"sticky":null,l.style.top=e?38*l.level+"px":null,"ul"===n?.tag&&(n.removeDom=!e),r.update()}else r.onLeafItemClick(o),r.fire("leafItemClick",o);super.onItemClick(e,t)}}onLeafItemClick(e){}onMenuItemClick(e){e.includes("neo-treelist-collapse-all-icon")?this.collapseAll():this.expandAll()}onScrollCapture(e){super.onScrollCapture(e);let t=this;if(t.saveScrollPosition){let l=e.scrollTop,o=!1,n=0,s={};const r=e=>{if(!e.cn)return;let d=!0;e.cn.forEach(e=>{if("li"===e.tag){if(e.cls.includes(t.folderCls)){let t=e.style.top;if(t)if(l>0&&n-l<=parseInt(t)){let t=e.level||0;s[t]??=[],s[t].push(e)}else e.cls.includes("neo-stuck")&&(i.A.remove(e.cls,"neo-stuck"),o=!0);d=e.cls.includes("neo-folder-open")}else d=!0;"none"===e.style?.display||e.removeDom||(n+=51)}else"ul"===e.tag&&d&&!e.removeDom&&r(e)})};t.vdom.cn&&t.vdom.cn[0]&&r(t.vdom.cn[0]),Object.values(s).forEach(e=>{let t=e[e.length-1];e.forEach(e=>{let l=e===t;l!==e.cls.includes("neo-stuck")&&(i.A.toggle(e.cls,"neo-stuck",l),o=!0)})}),o&&t.update()}}onStoreRecordChange(e){let t=this,{record:l}=e,{index:o,parentNode:n}=d.A.find(t.vdom,t.getItemId(l.id));n.cn[o]=t.createItem(l),t.update()}}const c=Neo.setupClass(a)},3675(e,t,l){l.d(t,{A:()=>s});var o=l(8051);class n extends o.A{static config={className:"Neo.selection.TreeModel",ntype:"selection-treemodel"};onKeyDownEnter(e){}onNavKey(e,t){}}const s=Neo.setupClass(n)}}]);