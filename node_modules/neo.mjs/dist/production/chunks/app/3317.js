"use strict";(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[3317],{3317(e,n,s){s.d(n,{default:()=>r});var t=s(3572);const o=/className\s*:\s*['"]([^'"]+)['"]/g,a=/export\s+(?:default\s+)?(?:const|let|var|class|function|async\s+function|generator\s+function|async\s+generator\s+function|(\{[\s\S]*?\}))/g,i=/import\s+(?:([\w-]+)|\{([^}]+)\})\s+from\s+['"]([^'"]+)['"]/;class l extends t.A{static config={className:"Neo.code.executor.Neo"};findClassNames(e){let n,s=[];for(;null!==(n=o.exec(e));)s.push(n[1]);return s}findMainClassName(e){let n=this.findClassNames(e),s=null,t=["MainContainer","MainComponent","MainView","Main"];if(n.length>0){for(const e of t)if(s=n.find(n=>n.endsWith(e)),s)break;s||(s=n[n.length-1])}return s}async execute({code:e,container:n}){let s,t,{environment:o}=Neo.config,l=e,r=this.findMainClassName(l),c=[],m=[],d=[],p=[];l.split("\n").forEach(e=>{let n=e.match(i);if(n){let e,s=n[1],t=n[2]?.split(",").map(e=>e.trim()),a=n[3];"development"===o?a.startsWith(".")&&(a="../"+a):"dist/development"===o?(e=a.lastIndexOf("../"),a=0===e?"../../../../src/"+a.slice(e+3):a.slice(0,e)+"../../../"+a.slice(e+3)):"dist/production"===o&&(e=a.lastIndexOf("../"),a=0===e?"../../../esm/src/"+a.slice(e+3):a.slice(0,e)+"../../esm/"+a.slice(e+3)),m.push({defaultImport:s,namedImports:t,path:a})}else e.match(a)||c.push(`    ${e}`)}),t=m.map((e,n)=>{let s=`Module${n}`;return d.push(s),e.defaultImport&&p.push(`    const ${e.defaultImport} = ${s}.default;`),e.namedImports&&p.push(`    const {${e.namedImports.join(", ")}} = ${s};`),`import('${e.path}')`}),s=["Promise.all([",`    ${t.join(",\n")}`,`]).then(([${d.join(", ")}]) => {`,`${p.join("\n")}`,`    ${c.join("\n")}`,"",`    module = Neo.ns('${r}');`,"","    if (module && (","        Neo.component.Base.isPrototypeOf(module) ||","        Neo.functional.component.Base.isPrototypeOf(module)","    )) {","        container.add({module})","    }","})",".catch(error => {",'    console.warn("LivePreview Error:", error);',"    container.add({ntype:'component', html:error.message});","})"].join("\n"),n.removeAll(!0,!0),this.findClassNames(s).forEach(e=>{let n=e.split("."),s=n.pop(),t=Neo.ns(n);t&&delete t[s]});try{new Function("container","module",s)(n,void 0)}catch(e){n.add({ntype:"component",html:e.message})}return{}}}const r=Neo.setupClass(l)}}]);