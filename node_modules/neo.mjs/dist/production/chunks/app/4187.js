"use strict";(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[2450,4187],{1748(e,t,n){n.d(t,{A:()=>r});var a=n(8829);class o extends a.A{static config={className:"AgentOS.view.Blackboard",_vdom:{tag:"div",cls:["neo-blackboard-wrapper"],style:{width:"100%",height:"100%"},cn:[{tag:"canvas",style:{width:"100%",height:"100%"}}]}};afterSetId(e,t){this.vdom.cn[0].id=`${e}__canvas`,super.afterSetId(e,t)}async afterSetOffscreenRegistered(e,t){if(e){let e=this;await AgentOS.canvas.Blackboard.initGraph({canvasId:e.getCanvasId(),windowId:e.windowId}),await e.updateSize()}}getCanvasId(){return this.vdom.cn[0].id}onDomResize(e){super.onDomResize(e),this.updateSize(e.contentRect)}async setData(e){await AgentOS.canvas.Blackboard.updateGraphData(e)}async updateSize(e){e&&0!==e.width&&0!==e.height||(e=await this.waitForDomRect({id:this.getCanvasId()})),await AgentOS.canvas.Blackboard.updateSize({width:e.width,height:e.height})}}const r=Neo.setupClass(o)},2450(e,t,n){n.d(t,{A:()=>s});var a=n(1184),o=n(6282);class r extends a.A{static config={className:"Neo.draggable.DragProxyContainer",ntype:"dragproxycontainer",autoMount:!0,baseCls:["neo-dragproxy"],layout:"fit",moveInMainThread:!0};afterSetMounted(e,t){if(super.afterSetMounted(e,t),e&&this.moveInMainThread){let{appName:e,id:t,windowId:n}=this;Neo.main.addon.DragDrop.setDragProxyElement({appName:e,id:t,windowId:n})}}afterSetWindowId(e,t){super.afterSetWindowId(e,t),e&&Neo.currentWorker.insertThemeFiles(e,o.A.prototype)}destroy(...e){this.items=[],super.destroy(...e)}}const s=Neo.setupClass(r)},3997(e,t,n){n.d(t,{A:()=>s});var a=n(2915),o=n(9932);class r extends a.A{static config={className:"Neo.controller.Component",ntype:"component-controller",component:null,parent_:null,references:null,windowId:null};construct(e){super.construct(e);let t=this,{component:n}=t;t.references={},n.isConstructed?t.onComponentConstructed():n.on("constructed",()=>{t.onComponentConstructed()},t,{once:!0})}beforeSetParent(e,t){return e||this.getParent()}getHandlerScope(e,t){let n,a=this,{parent:r}=a;return!(!t||(n=(0,o.Ap)(e,t),!n.fn))||(Neo.isFunction(a[e])?a:r?.getHandlerScope(e)||null)}getParent(){let{parent:e}=this;return e||this.component.parent?.getController()||null}getReference(e){let t=this,n=t.references[e];return n||(n=t.component.down({reference:e}),n&&(t.references[e]=n)),n||null}getState(...e){return this.getStateProvider().getData(...e)}getStateProvider(e=!1){let{component:t}=this;return e?t.stateProvider:t.getStateProvider()}getStore(e){return this.getStateProvider().getStore(e)}onComponentConstructed(){}removeReference(e){let t,{references:n}=this;for(t in n)if(e===n[t]){delete n[t];break}this.getParent()?.removeReference(e)}setState(...e){this.getStateProvider().setData(...e)}}const s=Neo.setupClass(r)},4187(e,t,n){n.r(t),n.d(t,{onStart:()=>A});var a=n(5367),o=n(7863),r=n(6929),s=n(1748),i=n(295),d=n(1967);class c extends d.A{static config={className:"AgentOS.model.Intervention",fields:[{name:"id",type:"String"},{name:"timestamp",type:"Date"},{name:"message",type:"String"},{name:"priority",type:"String"}]}}const l=Neo.setupClass(c);var g=n(2779);class p extends g.A{static config={className:"AgentOS.store.Interventions",autoLoad:!0,model:l,url:Neo.config.basePath+"apps/agentos/resources/data/interventions.json"}}const w=Neo.setupClass(p);class u extends r.A{static config={className:"AgentOS.view.InterventionPanel",ntype:"intervention-panel",cls:["agent-panel-intervention"],layout:{ntype:"fit"},headers:[{dock:"top",cls:["neo-draggable"],text:"Intervention"}],items:[{module:i.A,store:w,columns:[{dataField:"timestamp",text:"Time",width:100,renderer:({value:e})=>e?`[${new Intl.DateTimeFormat("default",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).format(e)}]`:""},{dataField:"message",text:"Message",flex:1},{dataField:"priority",text:"Priority",width:100,renderer:({value:e})=>({cls:["agent-priority",`agent-priority-${e}`],text:e})}]}]}}const m=Neo.setupClass(u);class h extends r.A{static config={className:"AgentOS.view.StrategyCardPanel",baseCls:["agent-kpi-card-panel","neo-panel","neo-container"],headers:[{cls:["neo-panel-header","neo-draggable"],dock:"top"}],title_:null,value_:null,items:[{ntype:"component",cls:["agent-kpi-card"],reference:"body-component",vdom:{cn:[{cls:"agent-kpi-value"}]}}]};afterSetTitle(e,t){this.headers[0].text=e}afterSetValue(e,t){let n=this.getItem("body-component");n.vdom.cn[0].text=e,n.update?.()}}const f=Neo.setupClass(h);var y=n(3997);class v extends y.A{static config={className:"AgentOS.view.StrategyPanelController"};connectedWidgets=[];#e=!1;#t=!1;widgetIndexMap={"kpi-velocity":0,"kpi-active-epics":1,"kpi-uptime":2};construct(e){super.construct(e);let t=this;Neo.currentWorker.on({connect:t.onWindowConnect,disconnect:t.onWindowDisconnect,scope:t})}async onDragBoundaryEntry(e){let t=this,{windowId:n}=t,{sortZone:a}=e,o=e.draggedItem.reference,r=t.getReference(o);t.#t=!0,a.dragProxy.add(r,!0),await Neo.Main.windowClose({names:o,windowId:n}),t.#t=!1,t.#e=!1,a.isWindowDragging=!1,a.dragProxy.style={opacity:1},Neo.main.addon.DragDrop.setConfigs({isWindowDragging:!1,windowId:n})}async onDragBoundaryExit(e){let t,{draggedItem:n,proxyRect:a,sortZone:o}=e,r=n.reference;this.draggedItem=n,this.#e=!0,t=await this.#n(r,a),o.startWindowDrag({dragData:e,...t})}onDragEnd(e){let t=this;t.#e&&t.draggedItem&&(t.getReference("strategy").remove(t.draggedItem,!1,!1),t.draggedItem=null),t.#e=!1}async onWindowConnect(e){if("AgentOSStrategy"===e.appName){let t=this,n=Neo.apps[e.windowId].mainView,{windowId:a}=e,o=await Neo.Main.getByPath({path:"document.URL",windowId:a}),r=new URL(o).searchParams.get("name"),s=t.getReference(r);s.wrapperStyle={},t.connectedWidgets.push(r),n.add(s,!1,!t.#e)}}async onWindowDisconnect(e){let t=this;if(t.#e||t.#t)return void(t.#e=!1);let{appName:n,windowId:a}=e;if("AgentOSStrategy"===n){let e=await Neo.Main.getByPath({path:"document.URL",windowId:a}),n=new URL(e).searchParams.get("name"),o=t.getReference("strategy"),r=t.getReference(n);o.insert(t.widgetIndexMap[n],r);let s=t.connectedWidgets.indexOf(n);s>-1&&t.connectedWidgets.splice(s,1)}else"AgentOS"===n&&Neo.Main.windowClose({names:t.connectedWidgets,windowId:a})}async#n(e,t){let n,{windowId:a}=this,{config:o,windowConfigs:r}=Neo,{environment:s}=o,i=Object.keys(r)[0],{basePath:d}=r[i];"development"!==s&&(d=`${d+s}/`),n=`${d}apps/agentos/childapps/strategy/index.html?name=${e}`;let c=await Neo.Main.getWindowData({windowId:a}),{height:l,width:g,x:p,y:w}=t,u=Math.round(l),m=Math.round(p+c.screenLeft),h=Math.round(w+(c.outerHeight-c.innerHeight+c.screenTop)),f=Math.round(g);return await Neo.Main.windowOpen({url:n,windowId:a,windowFeatures:`height=${u},left=${m},top=${h},width=${f}`,windowName:e}),{popupHeight:u,popupLeft:m,popupTop:h,popupWidth:g,windowName:e}}}const x=Neo.setupClass(v);class C extends r.A{static config={className:"AgentOS.view.StrategyPanel",cls:["agent-panel-strategy"],controller:x,flex:1,headers:[{dock:"top",cls:["neo-draggable"],text:"Strategy Dashboard"}],layout:"fit",items:[{module:o.A,cls:["agent-kpi-dashboard"],dragProxyExtraCls:["agent-panel-strategy","neo-panel"],layout:{ntype:"hbox",align:"stretch"},listeners:{dragBoundaryEntry:"onDragBoundaryEntry",dragBoundaryExit:"onDragBoundaryExit",dragEnd:"onDragEnd"},itemDefaults:{module:f,flex:1},items:[{cls:["velocity"],reference:"kpi-velocity",title:"Velocity",value:"85%"},{cls:["active-epics"],reference:"kpi-active-epics",title:"Active Epics",value:"12"},{cls:["uptime"],reference:"kpi-uptime",title:"Uptime",value:"98.5%"}]}]}}const N=Neo.setupClass(C);class I extends y.A{static config={className:"AgentOS.view.ViewportController"};connectedWidgets=[];#t=!1;#e=!1;widgetIndexMap={strategy:0,swarm:1,intervention:2};construct(e){super.construct(e);let t=this;Neo.currentWorker.on({connect:t.onWindowConnect,disconnect:t.onWindowDisconnect,scope:t})}async onDragBoundaryEntry(e){let t=this,{windowId:n}=t,{sortZone:a}=e,o=e.draggedItem.reference,r=t.getReference(o);t.#t=!0,a.dragProxy.add(r,!0),await Neo.Main.windowClose({names:o,windowId:n}),t.#t=!1,t.#e=!1,a.isWindowDragging=!1,a.dragProxy.style={opacity:1},Neo.main.addon.DragDrop.setConfigs({isWindowDragging:!1,windowId:n})}async onDragBoundaryExit(e){let t,{draggedItem:n,proxyRect:a,sortZone:o}=e,r=n.reference;this.draggedItem=n,this.#e=!0,t=await this.#n(r,a),o.startWindowDrag({dragData:e,...t})}onDragEnd(e){let t=this;t.#e&&t.draggedItem&&(t.getReference("dashboard").remove(t.draggedItem,!1,!1),t.draggedItem=null),t.#e=!1}async onOpenSwarmClick(e){let t,n="swarm",{config:a,windowConfigs:o}=Neo,{environment:r}=a,s=Object.keys(o)[0],{basePath:i}=o[s];"development"!==r&&(i=`${i+r}/`),t=`${i}apps/agentos/childapps/swarm/index.html?name=${n}`,await Neo.Main.windowOpen({url:t,windowId:this.windowId,windowName:n,windowFeatures:"height=600,width=800,left=50,top=50"})}async onWindowConnect(e){if("AgentOSWidget"===e.appName||"AgentSwarm"===e.appName){let t=this,n=Neo.apps[e.windowId].mainView,{windowId:a}=e,o=await Neo.Main.getByPath({path:"document.URL",windowId:a}),r=new URL(o).searchParams.get("name"),s=t.getReference(r);s.wrapperStyle={},t.connectedWidgets.push(r),n.add(s,!1,!t.#e)}}async onWindowDisconnect(e){let t=this;if(t.#e||t.#t)return void(t.#e=!1);let{appName:n,windowId:a}=e;if("AgentOSWidget"===n||"AgentSwarm"===n){let e=await Neo.Main.getByPath({path:"document.URL",windowId:a}),n=new URL(e).searchParams.get("name"),o=t.getReference("dashboard"),r=t.getReference(n);o.insert(t.widgetIndexMap[n],r);let s=t.connectedWidgets.indexOf(n);s>-1&&t.connectedWidgets.splice(s,1)}else"AgentOS"===n&&Neo.Main.windowClose({names:t.connectedWidgets,windowId:a})}async#n(e,t){let n,{windowId:a}=this,{config:o,windowConfigs:r}=Neo,{environment:s}=o,i=Object.keys(r)[0],{basePath:d}=r[i];"development"!==s&&(d=`${d+s}/`),n="swarm"===e?`${d}apps/agentos/childapps/swarm/index.html?name=${e}`:`${d}apps/agentos/childapps/widget/index.html?name=${e}`;let c=await Neo.Main.getWindowData({windowId:a}),{height:l,width:g,x:p,y:w}=t,u=l-50,m=p+c.screenLeft,h=w+(c.outerHeight-c.innerHeight+c.screenTop);return await Neo.Main.windowOpen({url:n,windowId:a,windowFeatures:`height=${u},left=${m},top=${h},width=${g}`,windowName:e}),{popupHeight:u,popupLeft:m,popupTop:h,popupWidth:g,windowName:e}}}const b=Neo.setupClass(I);class S extends a.A{static config={className:"AgentOS.view.Viewport",cls:["agent-os-viewport"],controller:b,layout:{ntype:"vbox",align:"stretch"},items:[{ntype:"toolbar",cls:["agent-top-toolbar"],flex:"none",items:[{ntype:"component",cls:["agent-logo"],html:'<img src="../../resources/images/logo/neo_logo_cyberpunk.svg" alt="Neo.mjs Logo">'},{ntype:"label",text:"Agent OS Command Center"},"->",{ntype:"button",cls:["agent-button"],iconCls:"fa fa-window-restore",text:"Detach Swarm View",handler:"onOpenSwarmClick"}]},{module:o.A,dragProxyExtraCls:["agent-os-viewport","neo-viewport"],flex:1,reference:"dashboard",cls:["agent-dashboard"],style:{margin:"20px"},listeners:{dragBoundaryEntry:"onDragBoundaryEntry",dragBoundaryExit:"onDragBoundaryExit",dragEnd:"onDragEnd"},items:[{module:N,flex:2,reference:"strategy"},{module:r.A,cls:["agent-panel-swarm"],flex:5,reference:"swarm",headers:[{dock:"top",cls:["neo-draggable"],text:"Swarm View"}],items:[{module:s.A,style:{backgroundColor:"#000",height:"100%",width:"100%"}}]},{module:m,flex:3,reference:"intervention"}]}]}}const D=Neo.setupClass(S),A=()=>Neo.app({mainView:D,name:"AgentOS"})},5367(e,t,n){n.d(t,{A:()=>r});var a=n(1184);class o extends a.A{static config={className:"Neo.container.Viewport",ntype:"viewport",applyBodyCls:!0,autoMount:!0,baseCls:["neo-viewport"],monitorSize_:!1};afterSetMounted(e,t){super.afterSetMounted(e,t);let n=this;e&&n.monitorSize&&n.addDomListeners([{resize:n.onDomResize,scope:n}])}onConstructed(){super.onConstructed();let{windowId:e}=this;this.applyBodyCls&&Neo.main.DomAccess.applyBodyCls({cls:["neo-body-viewport"],windowId:e})}onDomResize(e){this.fire("resize",e)}}const r=Neo.setupClass(o)},6282(e,t,n){n.d(t,{A:()=>r});var a=n(1741);class o extends a.A{static config={className:"Neo.draggable.DragProxyComponent",ntype:"dragproxy",autoInitVnode:!0,autoMount:!0,baseCls:["neo-dragproxy"],moveInMainThread:!0};afterSetMounted(e,t){if(super.afterSetMounted(e,t),e&&this.moveInMainThread){let{appName:e,id:t,windowId:n}=this;Neo.main.addon.DragDrop.setDragProxyElement({appName:e,id:t,windowId:n})}}}const r=Neo.setupClass(o)},6929(e,t,n){n.d(t,{A:()=>r});var a=n(1184);n(8310);class o extends a.A{static config={className:"Neo.container.Panel",ntype:"panel",baseCls:["neo-panel","neo-container"],containerConfig:null,headerDefaults:null,headers:null,_layout:{ntype:"vbox",align:"stretch"},verticalHeadersFirst:!1};construct(e){super.construct(e);let t=this;t.hasHeaders()&&!0===t.verticalHeadersFirst&&(t.layout={ntype:"hbox",align:"stretch"})}static createHeaderConfig(e){if("NeoInstance"===Neo.typeOf(e))return e;let t={flex:"0 1 auto"};return e.module||e.ntype||(t.cls=["neo-panel-header-toolbar","neo-toolbar"],t.ntype="toolbar"),e.text&&(t.items=[{ntype:"label",cls:["neo-panel-header-text","neo-label"],text:e.text}],delete e.text),Array.isArray(e.items)&&e.items.forEach(e=>{"label"===e.ntype&&(e.cls=["neo-panel-header-text","neo-label"])}),{...t,...e}}createItems(){let e=this,t=e.containerConfig;if(e.hasHeaders()){let n,a=!1===e.verticalHeadersFirst,r=e.headers||[],s=r.filter(e=>e.dock===(a?"bottom":"right")),i=r.filter(e=>e.dock===(a?"left":"top")),d=r.filter(e=>e.dock===(a?"right":"bottom")),c=r.filter(e=>e.dock===(a?"top":"left")),l=s.length>0||c.length>0,g=i.length>0||d.length>0,{items:p}=e,w=[],u=[];c.forEach(e=>{u.push(o.createHeaderConfig(e))}),g&&(a&&l||!a&&l)?(i.forEach(e=>{w.push(o.createHeaderConfig(e))}),n={ntype:"container",flex:1,items:p,itemDefaults:e.itemDefaults,...t},w.push({...e.headerDefaults,...n}),d.forEach(e=>{w.push(o.createHeaderConfig(e))}),u.push({ntype:"container",items:w,layout:{ntype:a?"hbox":"vbox",align:"stretch"},reference:"bodyContainer"})):(n={ntype:"container",flex:1,items:p,itemDefaults:e.itemDefaults,reference:"bodyContainer",...t},u.push({...e.headerDefaults,...n})),s.forEach(e=>{u.push(o.createHeaderConfig(e))}),e.items=u,e.itemDefaults=null,super.createItems()}else t&&e.set(t),super.createItems()}hasHeaders(){return Array.isArray(this.headers)&&this.headers.length>0}}const r=Neo.setupClass(o)},7863(e,t,n){n.d(t,{A:()=>s});var a=n(1184),o=n(2450);class r extends a.A{static config={className:"Neo.dashboard.Container",ntype:"dashboard",baseCls:["neo-dashboard","neo-container"],dragProxyExtraCls:[],dragResortable:!0};createSortZone(e){let t=this;Neo.merge(e,{allowOverdrag:!0,dragProxyConfig:{module:o.A,...t.dragProxyConfig},dragProxyExtraCls:t.dragProxyExtraCls,enableProxyToPopup:!0,listeners:{dragBoundaryEntry:e=>t.fire("dragBoundaryEntry",e),dragBoundaryExit:e=>t.fire("dragBoundaryExit",e),dragEnd:e=>t.fire("dragEnd",e)}}),super.createSortZone(e)}loadSortZoneModule(){return Promise.all([n.e(9380),n.e(6352)]).then(n.bind(n,6352))}}const s=Neo.setupClass(r)},8310(e,t,n){n.d(t,{A:()=>i}),n(8659);var a=n(1741),o=n(1184),r=(n(9217),n(1031));class s extends o.A{static dockPositions=["top","right","bottom","left",null];static config={className:"Neo.toolbar.Base",ntype:"toolbar",baseCls:["neo-toolbar"],dock_:null,itemDefaults:{ntype:"button"},layout:{ntype:"flexbox",align:"center",direction:"row",pack:"start"}};afterSetDock(e,t){if(!e&&!t)return;let n=this,{cls:a}=n,o=n.getStaticConfig("dockPositions"),s=n.getLayoutConfig();o.forEach(t=>{null!==t&&r.A.toggle(a,"neo-dock-"+t,t===e)}),n.layout?(n.layout.set(s),n.cls=a):(s.ntype="flexbox",n.set({cls:a,layout:s}))}beforeSetDock(e,t){return this.beforeSetEnumValue(e,t,"dock","dockPositions")}createItems(){let e=this._items;return Array.isArray(e)&&(this._items=e.map(e=>this.replaceSpacer(e))),super.createItems()}getLayoutConfig(){let e,t=this;if(t.dock)switch(t.dock){case"bottom":case"top":e={align:"center",direction:"row",pack:"start"};break;case"left":e={align:"center",direction:"column-reverse",pack:"start"};break;case"right":e={align:"center",direction:"column",pack:"start"}}return e||t.layout}insert(e,t,n=!1){return t=Array.isArray(t)?t.map(e=>this.replaceSpacer(e)):this.replaceSpacer(t),super.insert(e,t,n)}replaceSpacer(e){return"->"===e?{module:a.A,flex:1}:e}}const i=Neo.setupClass(s)},8829(e,t,n){n.d(t,{A:()=>r});var a=n(1741);class o extends a.A{static config={className:"Neo.component.Canvas",ntype:"canvas",monitorSize_:!0,offscreen:!0,offscreenRegistered_:!1,_vdom:{tag:"canvas"}};async afterSetMounted(e,t){super.afterSetMounted(e,t);let n=this,a=n.getCanvasId(),{offscreen:o}=n;if(e){if(await n.timeout(30),n.monitorSize&&n.addDomListeners([{delegate:`#${n.getCanvasId()}`,resize:n.onDomResize,scope:n}]),o){const e=await Neo.main.DomAccess.getOffscreenCanvas({nodeId:a,windowId:n.windowId});e.offscreen?(await Neo.worker.Canvas.registerCanvas({node:e.offscreen,nodeId:a,windowId:n.windowId},[e.offscreen]),n.offscreenRegistered=!0):e.transferred&&Neo.config.useSharedWorkers&&(await Neo.worker.Canvas.retrieveCanvas({nodeId:a,windowId:n.windowId})).hasCanvas&&(n.offscreenRegistered=!0)}}else o&&(n.offscreenRegistered=!1)}afterSetWindowId(e,t){t&&(this.offscreenRegistered=!1)}getCanvasId(){return this.id}onDomResize(e){this.fire("resize",e)}}const r=Neo.setupClass(o)},9217(e,t,n){n.d(t,{A:()=>r});var a=n(1741);class o extends a.A{static config={className:"Neo.component.Label",ntype:"label",baseCls:["neo-label"],tag:"label"}}const r=Neo.setupClass(o)}}]);