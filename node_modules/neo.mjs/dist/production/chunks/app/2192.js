"use strict";(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[2192],{2192(e,t,n){n.r(t),n.d(t,{default:()=>i});var a=n(1741),o=n(1692),r=n(1031);const s=new Date,c=s.getDate(),l=s.getMonth(),d=s.getFullYear();class h extends a.A{static config={className:"Neo.calendar.view.YearComponent",baseCls:["neo-calendar-yearcomponent"],bind:{calendarStore:"stores.calendars",currentDate:e=>e.currentDate,eventStore:"stores.events",locale:e=>e.locale,scrollNewYearFromTop:e=>e.scrollNewYearFromTop,showWeekends:e=>e.showWeekends,weekStartDay:e=>e.weekStartDay},cachedUpdate:null,calendarStore_:null,currentDate_:null,dayNameFormat_:"narrow",eventIndicatorHigh_:3,eventIndicatorLow_:1,eventIndicatorMedium_:2,eventStore_:null,intlFormat_day:null,intlFormat_month:null,isUpdating_:!1,locale_:Neo.config.locale,monthNameFormat_:"long",needsEventUpdate:!1,owner:null,scrollNewYearFromTop:!1,showCellBorders_:!1,showDisabledDays_:!0,showWeekends_:!0,showWeekNumbers_:!0,sixWeeksPerMonth_:!1,useAnimations:!0,vdom:{cn:[{cls:["neo-content-wrapper"],cn:[{cls:["neo-year-header"],cn:[{},{cls:["neo-nav-button","neo-prev-button"]},{cls:["neo-nav-button","neo-next-button"]}]},{cls:["neo-months-container"]}]}]},weekStartDay_:0};construct(e){super.construct(e);let t=this;t.addDomListeners([{click:t.onNavButtonClick,delegate:".neo-nav-button",scope:t},{wheel:t.onWheel,scope:t}]),t.calendarStore.getCount()>0&&t.eventStore.getCount()>0&&t.createMonths(!0),t.updateHeaderYear()}afterSetCalendarStore(e,t){let n=this,a={load:n.onCalendarStoreLoad,recordChange:n.onCalendarStoreRecordChange,scope:n};t?.un(a),e?.on(a)}afterSetCurrentDate(e,t){if(this.isConstructed){let n=t.getFullYear(),a=e.getFullYear();a!==n&&this.changeYear(a-n)}}afterSetDayNameFormat(e,t){this.updateDayNamesRows(e,t)}afterSetEventIndicatorHigh(e,t){void 0!==t&&this.createMonths()}afterSetEventIndicatorLow(e,t){void 0!==t&&this.createMonths()}afterSetEventIndicatorMedium(e,t){void 0!==t&&this.createMonths()}afterSetEventStore(e,t){let n=this,a={load:n.onEventStoreLoad,recordChange:n.onEventStoreRecordChange,scope:n};t?.un(a),e?.on(a)}afterSetLocale(e,t){if(void 0!==t){let e=this;e.updateDayNamesRows(e.dayNameFormat,"",!0),e.updateMonthNameFormat(e.monthNameFormat,"")}}afterSetMonthNameFormat(e,t){this.updateMonthNameFormat(e,t)}afterSetMounted(e,t){super.afterSetMounted(e,t);let n=this;e&&n.needsEventUpdate&&(n.createMonths(),n.needsEventUpdate=!1)}afterSetShowCellBorders(e,t){let n=this.cls;r.A[e?"add":"remove"](n,"neo-show-cell-borders"),this.cls=n}afterSetShowWeekends(e,t){if(void 0!==t){let t,n,a,o,r,s=this,{vdom:c}=s,l=0;for(;l<12;l++)for(n=c.cn[0].cn[1].cn[l].cn,r=n.length,a=1;a<r;a++)for(o=1;o<8;o++)t=n[a].cn[o],t.cls.includes("neo-weekend")&&(e?delete t.removeDom:t.removeDom=!0);s.updateDayNamesRows(s.dayNameFormat,"")}}afterSetShowWeekNumbers(e,t){if(void 0!==t){let t,n,a,o=this,r=0;for(;r<12;r++)for(t=o.vdom.cn[0].cn[1].cn[r].cn,a=t.length,n=1;n<a;n++)t[n].cn[0].removeDom=!e;o.update()}}afterSetSixWeeksPerMonth(e,t){if(void 0!==t){let t=this,n=t.currentDate,a=0;for(n.setMonth(0),n.setDate(1);a<12;a++)t.vdom.cn[0].cn[1].cn[a].cn[7].removeDom=5===o.A.getWeeksOfMonth(n,t.weekStartDay)&&!e,n.setMonth(n.getMonth()+1);t.update()}}afterSetWeekStartDay(e,t){void 0!==t&&this.createMonths()}beforeSetDayNameFormat(e,t){return this.beforeSetEnumValue(e,t,"dayNameFormat",o.A.prototype.dayNameFormats)}beforeSetMonthNameFormat(e,t){return this.beforeSetEnumValue(e,t,"monthNameFormat",o.A.prototype.monthNameFormats)}cacheUpdate(e=this.currentDate){this.cachedUpdate=e}changeYear(e){let t,n,a,o=this;o.useAnimations&&(o.isUpdating||(o.isUpdating=!0,o.getDomRect().then(r=>{t=o.scrollNewYearFromTop&&e<0||!o.scrollNewYearFromTop&&e>0,n=o.vdom,a=t?0:-r.height,n.cn.push({cls:["neo-relative"],cn:[{cls:["neo-animation-wrapper"],cn:[{cls:["neo-content-wrapper"],cn:[{cls:["neo-year-header"],cn:[{text:o.currentDate.getFullYear()},{cls:["neo-nav-button","neo-prev-button"]},{cls:["neo-nav-button","neo-next-button"]}]},{cls:["neo-months-container"]}]}],style:{height:2*r.height+"px",transform:`translateY(${a}px)`,width:`${r.width}px`}}]}),o.createMonths(!0,n.cn[1].cn[0].cn[0].cn[1]),n.cn[1].cn[0].cn[t?"unshift":"push"](n.cn[0]),n.cn.splice(0,1),o.promiseUpdate().then(()=>{a=t?-r.height:0,n.cn[0].cn[0].style.transform=`translateY(${a}px)`,o.update(),o.timeout(300).then(()=>{n.cn[0]=n.cn[0].cn[0].cn[t?1:0],o.triggerVdomUpdate()})})})))}createDayNamesRow(){let e,t,n=this,a=n.currentDate,o=0,r={cls:["neo-calendar-week"],cn:[{cls:["neo-cell","neo-top-left-spacer"]}]};for(a.setDate(n.currentDate.getDate()-n.currentDate.getDay()+n.weekStartDay);o<7;o++)t={cls:["neo-cell","neo-weekday-cell"],text:n.intlFormat_day.format(a)},e=a.getDay(),n.showWeekends||0!==e&&6!==e||(t.removeDom=!0),r.cn.push(t),a.setDate(a.getDate()+1);return r}createMonthContent(e,t){let n,a,r,s,h,i,m,u,D,p,g=this,{calendarStore:v,eventStore:f}=g,w=t.getDate(),S=t.getMonth(),y=t.getFullYear(),F=o.A.clone(t),M=g.currentDate,k=M.getMonth(),N=M.getFullYear(),C=o.A.getDaysInMonth(t),b=o.A.getFirstDayOffset(t,g.weekStartDay),_=0,Y=o.A.clone(t);for(p=(C+b)/7>5?6:5,h=1-b,F.setDate(h),Y.setDate(h+7);_<6;_++){for(D={cls:["neo-calendar-week"],removeDom:_===p&&!g.sixWeeksPerMonth,cn:[{cls:["neo-cell","neo-weeknumber-cell"],removeDom:!g.showWeekNumbers,text:o.A.getWeekOfYear(Y)}]},Y.setDate(Y.getDate()+7),u=0;u<7;u++)m=h>0&&h<=C,n=g.getCellId(y,S+1,h),s=F.getDay(),a={id:n,cls:m?["neo-cell"]:["neo-cell","neo-disabled"],tabIndex:m?-1:null,cn:[{cls:["neo-cell-content"],text:m?h:g.showDisabledDays?F.getDate():""}]},r=a.cls,0!==s&&6!==s||(r.push("neo-weekend"),g.showWeekends||(a.removeDom=!0)),d===y&&l===S&&c===h&&a.cn[0].cls.push("neo-today"),N===y&&k===S&&h===w&&r.push("neo-selected"),a.removeDom||(i=f.getDayRecords(F),i=i.filter(e=>v.get(e.calendarId).active),i.length>=g.eventIndicatorHigh?r.push("neo-events-high"):i.length>=g.eventIndicatorMedium?r.push("neo-events-medium"):i.length>=g.eventIndicatorLow&&r.push("neo-events-low")),D.cn.push(a),F.setDate(F.getDate()+1),h++;e.cn.push(D)}return e}createMonths(e=!1,t){let n=this;if(n.mounted){let a,r=n.currentDate,{vdom:s}=n,c=t||s.cn[0].cn[1],l=0;for(c.cn=[];l<12;l++)r.setMonth(l),r.setDate(1),a={cls:["neo-month"],cn:[{cls:["neo-month-name"],text:n.intlFormat_month.format(r)},n.createDayNamesRow()]},a=n.createMonthContent(a,o.A.clone(r)),c.cn.push(a);!e&&n.update()}else n.needsEventUpdate=!0}getCellId(e,t,n){return(n=n.toString()).length<2&&(n="0"+n),(t=t.toString()).length<2&&(t="0"+t),this.id+"__"+e+"-"+t+"-"+n}onCalendarStoreLoad(e){this.eventStore.getCount()>0&&this.createMonths()}onCalendarStoreRecordChange(e){this.createMonths()}onEventStoreLoad(e){this.calendarStore.getCount()>0&&this.createMonths()}onEventStoreRecordChange(e){this.createMonths()}onNavButtonClick(e){let{currentDate:t}=this;t.setFullYear(t.getFullYear()+(e.path[0].cls.includes("neo-next-button")?1:-1)),this.getStateProvider().setData({currentDate:t})}onWheel(e){if(Math.abs(e.deltaY)>Math.abs(e.deltaX)){let t=this,{currentDate:n}=t;n.setFullYear(n.getFullYear()+(e.deltaY>0?1:-1)),t.getStateProvider().setData({currentDate:n})}}triggerVdomUpdate(e=!1){if(!e){let e=this;e.isUpdating=!0,e.promiseUpdate().then(()=>{e.isUpdating=!1})}}updateDayNamesRows(e,t,n=!1){let a=this;if(a.intlFormat_day=new Intl.DateTimeFormat(a.locale,{weekday:e}),void 0!==t){let e,t,o,r=a.currentDate,{vdom:s}=a,c=1;for(r.setDate(a.currentDate.getDate()-a.currentDate.getDay()+a.weekStartDay);c<8;c++){for(t=0;t<12;t++)e=r.getDay(),o=s.cn[0].cn[1].cn[t].cn[1].cn[c],o.text=a.intlFormat_day.format(r),a.showWeekends||0!==e&&6!==e?delete o.removeDom:o.removeDom=!0;r.setDate(r.getDate()+1)}!n&&a.update()}}updateHeaderYear(){this.vdom.cn[0].cn[0].cn[0].text=this.currentDate.getFullYear()}updateMonthNameFormat(e,t,n=!1){let a=this;if(a.intlFormat_month=new Intl.DateTimeFormat(a.locale,{month:e}),void 0!==t){let{currentDate:e,vdom:t}=a,o=0;for(;o<12;o++)e.setMonth(o),e.setDate(1),t.cn[0].cn[1].cn[o].cn[0].text=a.intlFormat_month.format(e);!n&&a.update()}}}const i=Neo.setupClass(h)}}]);