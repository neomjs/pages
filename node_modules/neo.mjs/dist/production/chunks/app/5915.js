export const __webpack_esm_id__=5915;export const __webpack_esm_ids__=[5915];export const __webpack_esm_modules__={74(e,t,a){a.d(t,{A:()=>n});var s=a(8829);class r extends s.A{static config={className:"Neo.app.SharedCanvas",isCanvasReady_:!1,rendererClassName:null,rendererImportPath:null,_vdom:{tag:"canvas"}};canvasId=null;canvasRect=null;afterSetIsCanvasReady(e,t){if(e){let e=this.theme?.includes("dark")?"dark":"light";this.renderer?.setTheme(e),this.fire("canvasReady")}}async afterSetMounted(e,t){let a=this;e?await a.ready():a.offscreenRegistered&&a.renderer?.clearGraph(),super.afterSetMounted(e,t)}async afterSetOffscreenRegistered(e,t){let a=this;if(e){if(await a.ready(),!a.rendererClassName)throw new Error("Canvas component missing rendererClassName config");await a.renderer.initGraph({canvasId:a.getCanvasId(),windowId:a.windowId}),a.isCanvasReady=!0,await a.updateSize()}else t&&(a.isCanvasReady=!1,await a.renderer.clearGraph())}afterSetTheme(e,t){if(super.afterSetTheme(e,t),e&&this.isCanvasReady){let t=e.includes("dark")?"dark":"light";this.renderer.setTheme(t)}}getCanvasId(){let e=this;return e.canvasId||(e.canvasId=e.id),e.canvasId}get renderer(){return this.rendererClassName?Neo.ns(this.rendererClassName):null}destroy(...e){this.renderer?.clearGraph(),super.destroy(...e)}async initAsync(){await super.initAsync();let e=this;if(e.rendererImportPath){await Neo.worker.Manager.startWorker({name:"canvas",windowId:e.windowId});let t=0;for(;!Neo.ns("Neo.worker.Canvas.loadModule")&&t<40;)await e.timeout(50),t++;if(Neo.ns("Neo.worker.Canvas.loadModule")){await Neo.worker.Canvas.loadModule({path:e.rendererImportPath});let t=0;for(;!e.renderer&&t<40;)await e.timeout(50),t++;e.renderer||console.error("Renderer Remote Stub not found:",e.rendererClassName)}else console.error("Neo.component.CanvasShared: Canvas Worker failed to register remote methods.")}}onClick(e){let t=this;t.isCanvasReady&&t.canvasRect&&t.renderer.updateMouseState({click:!0,x:e.clientX-t.canvasRect.left,y:e.clientY-t.canvasRect.top})}pause(){this.isCanvasReady&&this.renderer.pause()}onMouseLeave(e){this.isCanvasReady&&this.renderer.updateMouseState({leave:!0})}onMouseMove(e){let t=this;t.isCanvasReady&&t.canvasRect&&t.renderer.updateMouseState({x:e.clientX-t.canvasRect.left,y:e.clientY-t.canvasRect.top})}async onDomResize(e){super.onDomResize(e),await this.updateSize(e.contentRect)}resume(){this.isCanvasReady&&this.renderer.resume()}async updateSize(e){let t=this;await t.ready(),e&&0!==e.width&&0!==e.height||(e=await t.getDomRect(t.id)),e&&(t.canvasRect=e,await(t.renderer?.updateSize({width:e.width,height:e.height})))}}const n=Neo.setupClass(r)},6157(e,t,a){a.d(t,{A:()=>p});var s=a(8310),r=a(7466),n=a(74);class o extends n.A{static config={className:"Neo.app.header.Canvas",activeId_:null,cls:["app-header-canvas"],hoverId_:null,rendererClassName:"Neo.canvas.Header",rendererImportPath:"src/canvas/Header.mjs"};navRects=null;navRectsTimeoutId=null;afterSetIsCanvasReady(e,t){super.afterSetIsCanvasReady(e,t);let a=this;e&&a.activeId&&a.renderer.updateActiveId({id:a.activeId})}async afterSetOffscreenRegistered(e,t){await super.afterSetOffscreenRegistered(e,t);let a=this;if(e){let e=Neo.get(a.parentId);r.A.down(e,"button",!1).forEach(e=>{e.addDomListeners({resize:a.onButtonResize,scope:a})}),await a.updateNavRects()}}async afterSetActiveId(e,t){this.isCanvasReady&&await this.renderer.updateActiveId({id:e})}async afterSetHoverId(e,t){this.isCanvasReady&&await this.renderer.updateHoverId({id:e})}getMonitorTargetId(){return this.parentId}onButtonResize(e){this.updateNavRects()}async onDomResize(e){this.fire("resize",e),await this.updateNavRects()}isUpdatingNavRects=!1;pendingNavRectsUpdate=!1;async updateNavRects(e=!1){let t=this;if(!t.isCanvasReady)return;if(e||(t.navRectsTimeoutId&&clearTimeout(t.navRectsTimeoutId),t.navRectsTimeoutId=setTimeout(()=>{t.navRectsTimeoutId=null,t.updateNavRects(!0)},1e3)),t.isUpdatingNavRects)return void(t.pendingNavRectsUpdate=!0);t.isUpdatingNavRects=!0,t.pendingNavRectsUpdate=!1;let a=Neo.get(t.parentId),s=r.A.down(a,"button",!1).map(e=>e.id);if(s.length>0){let e=[...s,t.id],a=await t.getDomRect(e);if(a){let e=a.pop();t.canvasRect=e,e&&(t.navRects=a.map((t,a)=>t?{id:s[a],x:t.x-e.x,y:t.y-e.y,width:t.width,height:t.height}:null).filter(Boolean),t.renderer.updateNavRects({height:e.height,rects:t.navRects,width:e.width}))}}t.isUpdatingNavRects=!1,t.pendingNavRectsUpdate&&t.updateNavRects()}}const i=Neo.setupClass(o);var d=a(3997);class c extends d.A{static config={className:"Neo.app.header.ToolbarController"};onButtonClick(e){this.getReference("header-canvas")?.onClick(e)}onButtonMouseEnter(e){let t=this.getReference("header-canvas");t&&(t.hoverId=e.path[0].id)}onButtonMouseLeave(e){let t=this.getReference("header-canvas");t&&(t.hoverId=null)}onMouseLeave(e){this.getReference("header-canvas")?.onMouseLeave(e)}onMouseMove(e){this.getReference("header-canvas")?.onMouseMove(e)}}const l=Neo.setupClass(c);class u extends s.A{static config={className:"Neo.app.header.Toolbar",cls:["neo-header-toolbar"],controller:l,domListeners:[{click:"onButtonClick",mouseleave:"onMouseLeave",mousemove:{fn:"onMouseMove",local:!0}},{mouseenter:"onButtonMouseEnter",mouseleave:"onButtonMouseLeave",delegate:".neo-button"}],itemDefaults:{handler:"onButtonClick",ntype:"button",ui:"ghost"},style:{position:"relative"}};onConstructed(){super.onConstructed(),this.add({module:i,listeners:{canvasReady:"onCanvasReady",scope:this},reference:"header-canvas"})}onCanvasReady(){}}const p=Neo.setupClass(u)},8829(e,t,a){a.d(t,{A:()=>n});var s=a(1741);class r extends s.A{static config={className:"Neo.component.Canvas",ntype:"canvas",monitorSize_:!0,offscreen:!0,offscreenRegistered_:!1,_vdom:{tag:"canvas"}};async afterSetMounted(e,t){super.afterSetMounted(e,t);let a=this,s=a.getCanvasId(),{offscreen:r,windowId:n}=a;if(e){if(await a.timeout(30),a.monitorSize&&a.addDomListeners([{delegate:`#${a.getMonitorTargetId()}`,resize:a.onDomResize,scope:a}]),r){let e,t=50;for(;a.mounted&&!a.offscreenRegistered&&!a.isDestroyed;){if(e=await Neo.main.DomAccess.getOffscreenCanvas({nodeId:s,windowId:n}),e.offscreen){await Neo.worker.Canvas.registerCanvas({node:e.offscreen,nodeId:s,windowId:n},[e.offscreen]),a.offscreenRegistered=!0;break}if(e.transferred&&Neo.config.useSharedWorkers&&(await Neo.worker.Canvas.retrieveCanvas({nodeId:s,windowId:n})).hasCanvas){a.offscreenRegistered=!0;break}await a.timeout(t),t<1e3&&(t*=2)}}}else r&&(a.offscreenRegistered&&Neo.worker.Canvas.unregisterCanvas({nodeId:s}),a.offscreenRegistered=!1)}afterSetWindowId(e,t){super.afterSetWindowId(e,t),t&&(this.offscreenRegistered=!1)}destroy(...e){this.offscreenRegistered&&Neo.worker.Canvas.unregisterCanvas({nodeId:this.id}),super.destroy(...e)}getCanvasId(){return this.id}getMonitorTargetId(){return this.vdom.id}onDomResize(e){this.fire("resize",e)}}const n=Neo.setupClass(r)},9217(e,t,a){a.d(t,{A:()=>n});var s=a(1741);class r extends s.A{static config={className:"Neo.component.Label",ntype:"label",baseCls:["neo-label"],tag:"label"}}const n=Neo.setupClass(r)},5367(e,t,a){a.d(t,{A:()=>n});var s=a(1184);class r extends s.A{static config={className:"Neo.container.Viewport",ntype:"viewport",applyBodyCls:!0,autoMount:!0,baseCls:["neo-viewport"],monitorSize_:!1};afterSetMounted(e,t){super.afterSetMounted(e,t);let a=this;e&&a.monitorSize&&a.addDomListeners([{resize:a.onDomResize,scope:a}])}onConstructed(){super.onConstructed();let{windowId:e}=this;this.applyBodyCls&&Neo.main.DomAccess.applyBodyCls({cls:["neo-body-viewport"],windowId:e})}onDomResize(e){this.fire("resize",e)}}const n=Neo.setupClass(r)},3997(e,t,a){a.d(t,{A:()=>o});var s=a(2915),r=a(9932);class n extends s.A{static config={className:"Neo.controller.Component",ntype:"component-controller",component:null,parent_:null,references:null,windowId:null};construct(e){super.construct(e);let t=this,{component:a}=t;t.references={},a.isConstructed?t.onComponentConstructed():a.on("constructed",()=>{t.onComponentConstructed()},t,{once:!0})}beforeSetParent(e,t){return e||this.getParent()}getHandlerScope(e,t){let a,s=this,{parent:n}=s;return!(!t||(a=(0,r.Ap)(e,t),!a.fn))||(Neo.isFunction(s[e])?s:n?.getHandlerScope(e)||null)}getParent(){let{parent:e}=this;return e||this.component.parent?.getController()||null}getReference(e){let t=this,a=t.references[e];return a||(a=t.component.down({reference:e}),a&&(t.references[e]=a)),a||null}getState(...e){return this.getStateProvider().getData(...e)}getStateProvider(e=!1){let{component:t}=this;return e?t.stateProvider:t.getStateProvider()}getStore(e){return this.getStateProvider().getStore(e)}onComponentConstructed(){}removeReference(e){let t,{references:a}=this;for(t in a)if(e===a[t]){delete a[t];break}this.getParent()?.removeReference(e)}setState(...e){this.getStateProvider().setData(...e)}}const o=Neo.setupClass(n)},8310(e,t,a){a.d(t,{A:()=>i}),a(8659);var s=a(1741),r=a(1184),n=(a(9217),a(1031));class o extends r.A{static dockPositions=["top","right","bottom","left",null];static config={className:"Neo.toolbar.Base",ntype:"toolbar",baseCls:["neo-toolbar"],dock_:null,itemDefaults:{ntype:"button"},layout:{ntype:"flexbox",align:"center",direction:"row",pack:"start"}};afterSetDock(e,t){if(!e&&!t)return;let a=this,{cls:s}=a,r=a.getStaticConfig("dockPositions"),o=a.getLayoutConfig();r.forEach(t=>{null!==t&&n.A.toggle(s,"neo-dock-"+t,t===e)}),a.layout?(a.layout.set(o),a.cls=s):(o.ntype="flexbox",a.set({cls:s,layout:o}))}beforeSetDock(e,t){return this.beforeSetEnumValue(e,t,"dock","dockPositions")}createItems(){let e=this._items;return Array.isArray(e)&&(this._items=e.map(e=>this.replaceSpacer(e))),super.createItems()}getLayoutConfig(){let e,t=this;if(t.dock)switch(t.dock){case"bottom":case"top":e={align:"center",direction:"row",pack:"start"};break;case"left":e={align:"center",direction:"column-reverse",pack:"start"};break;case"right":e={align:"center",direction:"column",pack:"start"}}return e||t.layout}insert(e,t,a=!1){return t=Array.isArray(t)?t.map(e=>this.replaceSpacer(e)):this.replaceSpacer(t),super.insert(e,t,a)}replaceSpacer(e){return"->"===e?{module:s.A,flex:1}:e}toJSON(){return{...super.toJSON(),dock:this.dock}}}const i=Neo.setupClass(o)}};