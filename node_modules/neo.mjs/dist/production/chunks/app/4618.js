export const __webpack_esm_id__=4618;export const __webpack_esm_ids__=[4618];export const __webpack_esm_modules__={4618(e,t,a){a.d(t,{default:()=>R}),a.r(t);var i=a(5418),r=a(1184),l=a(7950),o=a(1967);class s extends o.A{static config={className:"Covid.model.HistoricalData",fields:[{name:"active",type:"int"},{name:"cases",type:"int"},{name:"date",type:"string"},{name:"dailyActive",type:"int"},{name:"dailyCases",type:"int"},{name:"dailyDeaths",type:"int"},{name:"dailyRecovered",type:"int"},{name:"deaths",type:"int"},{name:"recovered",type:"int"}]}}const n=Neo.setupClass(s);var d=a(2779);class c extends d.A{static config={className:"Covid.store.HistoricalData",keyProperty:"date",model:n,sorters:[{property:"date",direction:"DESC"}]}}const h=Neo.setupClass(c);var u=a(1689);class m extends l.A{static config={className:"Covid.view.country.HistoricalDataTable",baseCls:["covid-historical-data-table","neo-table-container"],columnDefaults:{cellAlign:"right",defaultSortDirection:"DESC",renderer:u.A.formatNumber},columns:[{cellAlign:"left",dataField:"date",dock:"left",text:"Date",width:100,renderer:function(e){return{cls:["neo-date-column","neo-table-cell"],text:new Intl.DateTimeFormat("default",{day:"numeric",month:"numeric",year:"numeric"}).format(new Date(e.value))}}},{dataField:"cases",text:"Cases",renderer:e=>u.A.formatNumber(e)},{dataField:"active",text:"Active",renderer:e=>u.A.formatNumber(e,"#64B5F6")},{dataField:"recovered",text:"Recovered",renderer:e=>u.A.formatNumber(e,"#28ca68")},{dataField:"deaths",text:"Deaths",renderer:e=>u.A.formatNumber(e,"#fb6767")},{dataField:"dailyCases",text:"Daily C",renderer:e=>u.A.formatNumber(e)},{dataField:"dailyActive",text:"Daily A",renderer:e=>u.A.formatNumber(e,"#64B5F6")},{dataField:"dailyRecovered",text:"Daily R",renderer:e=>u.A.formatNumber(e,"#28ca68")},{dataField:"dailyDeaths",text:"Daily D",renderer:e=>u.A.formatNumber(e,"#fb6767")}],store:h}}const p=Neo.setupClass(m);var f=a(2429);class b extends f.A{static config={className:"Covid.view.country.LineChartComponent",baseCls:["covid-line-chart"],chartConfig:{cursor:{maxTooltipDistance:-1},legend:{labels:{template:{fill:"#bbb"}}},xAxes:[{type:"DateAxis",renderer:{minGridDistance:60,labels:{template:{fill:"#bbb"}}}}],yAxes:[{type:"ValueAxis",logarithmic:!0,numberFormatter:{numberFormat:"#.0a",bigNumberPrefixes:[{number:1e3,suffix:"K"},{number:1e6,suffix:"M"},{number:1e9,suffix:"B"}]},renderer:{minGridDistance:60,labels:{template:{fill:"#bbb"}}}}],series:[{type:"LineSeries",dataFields:{dateX:"date",valueY:"active"},fill:"#64b5f6",name:"Active",stroke:"#64b5f6",strokeWidth:3,tooltip:{background:{fill:"#fff"},getFillFromObject:!1,label:{fill:"#000"}}},{type:"LineSeries",dataFields:{dateX:"date",valueY:"cases"},fill:"#bbb",name:"Cases",stroke:"#bbb",strokeWidth:3,tooltip:{background:{fill:"#fff"},getFillFromObject:!1,label:{fill:"#000"}}},{type:"LineSeries",dataFields:{dateX:"date",valueY:"deaths"},fill:"#fb6767",name:"Deaths",stroke:"#fb6767",strokeWidth:3,tooltip:{background:{fill:"#fff"},getFillFromObject:!1,label:{fill:"#000"}}},{type:"LineSeries",dataFields:{dateX:"date",valueY:"recovered"},fill:"#28ca68",name:"Recovered",stroke:"#28ca68",strokeWidth:3,tooltip:{background:{fill:"#fff"},getFillFromObject:!1,label:{fill:"#000"}}}]},combineSeriesTooltip:!0,fitParentHeight:!0}}const y=Neo.setupClass(b);var g=a(6929),v=a(1956),C=a(9051),x=a(9348);class D extends l.A{static config={className:"Covid.view.country.Table",baseCls:["covid-country-table","neo-table-container"],bind:{country:{key:"country",twoWay:!0}},country_:null,store:x.A,columnDefaults:{cellAlign:"right",defaultSortDirection:"DESC",renderer:u.A.formatNumber},columns:[{cls:["neo-index-column","neo-table-header-button"],dataField:"index",dock:"left",minWidth:40,text:"#",renderer:u.A.indexRenderer,sortable:!1,width:40},{cellAlign:"left",dataField:"country",defaultSortDirection:"ASC",dock:"left",text:"Country",width:200,renderer:e=>({cls:["neo-country-column","neo-table-cell"],html:['<div style="display: flex; align-items: center">','<img style="height:20px; margin-right:10px; width:20px;" src="'+u.A.getCountryFlagUrl(e.value)+'">'+e.value,"</div>"].join("")})},{dataField:"cases",text:"Cases"},{dataField:"casesPerOneMillion",text:"Cases / 1M"},{dataField:"infected",text:"Infected",renderer:e=>u.A.formatInfected(e)},{dataField:"active",text:"Active",renderer:e=>u.A.formatNumber(e,"#64B5F6")},{dataField:"recovered",text:"Recovered",renderer:e=>u.A.formatNumber(e,"#28ca68")},{dataField:"critical",text:"Critical",renderer:e=>u.A.formatNumber(e,"orange")},{dataField:"deaths",text:"Deaths",renderer:e=>u.A.formatNumber(e,"#fb6767")},{dataField:"todayCases",text:"Cases today"},{dataField:"todayDeaths",text:"Deaths today",renderer:e=>u.A.formatNumber(e,"#fb6767")},{dataField:"tests",text:"Tests"},{dataField:"testsPerOneMillion",text:"Tests / 1M"}]};afterSetCountry(e,t){if(void 0!==t){let t,a=this,{body:i}=a,{selectionModel:r}=i;e?(t=`${i.id}__tr__${e}`,r.isSelected(t)||(r.select(t),a.mounted&&Neo.main.DomAccess.scrollToTableRow({id:t,windowId:a.windowId}))):r.deselectAll()}}onDeselect(e){this.country=null}onSelect(e){let t=this,a=e[0]||null;t.store.getCount()>0&&(a&&(a=t.body.getRecordByRowId(a)?.country),a&&(t.country=a))}}const A=Neo.setupClass(D);var N=a(3997),w=a(1031);class F extends N.A{static config={className:"Covid.view.TableContainerController",apiBaseUrl:"https://disease.sh/",apiFallbackBaseUrl:"https://raw.githubusercontent.com/neomjs/pages/main/resources_pub/data/",apiFallbackHistoricalDataEndpoint:"cvid_static/historical/",apiHistoricalDataEndpoint:"v3/covid-19/historical/",apiHistoricalDataTimeRange:"all",removeEmptyRecords:!0,selectedRecord:null,table_:null};addStoreItems(e){let t,a=this,i=[],r={},l=e?.timeline;e&&!e.timeline&&(l=e),l&&(Object.entries(l.cases||{}).forEach(([e,t])=>{"undefined"!==e&&(r[e]={date:new Date(e).toISOString(),cases:t})}),Object.entries(l.deaths||{}).forEach(([e,t])=>{"undefined"!==e&&(r.hasOwnProperty(e)?r[e].deaths=t:r[e]={date:new Date(e).toISOString(),deaths:t})}),Object.entries(l.recovered||{}).forEach(([e,t])=>{"undefined"!==e&&(r.hasOwnProperty(e)?r[e].recovered=t:r[e]={date:new Date(e).toISOString(),recovered:t})}),Object.values(r).forEach(e=>{e.active=e.cases-e.deaths-e.recovered,i.push(e)}),a.removeEmptyRecords&&[...i].forEach(e=>{0===e.cases&&w.A.remove(i,e)}),i[0]&&Object.assign(i[0],{dailyActive:i[0].active,dailyCases:i[0].cases,dailyDeaths:i[0].deaths,dailyRecovered:i[0].recovered}),i.forEach((e,a)=>{t=i[a+1],t&&Object.assign(t,{dailyActive:t.active-e.active,dailyCases:t.cases-e.cases,dailyDeaths:t.deaths-e.deaths,dailyRecovered:t.recovered-e.recovered})}),a.getReference("historical-data-table").store.data=i,a.updateLineChart(i))}static assignFieldsOrNull(e){return{active:e.active||null,cases:e.cases||null,deaths:e.deaths||null,dailyActive:e.dailyActive||null,dailyCases:e.dailyCases||null,dailyDeaths:e.dailyDeaths||null,dailyRecovered:e.dailyRecovered||null,recovered:e.recovered>0?e.recovered:null}}beforeGetTable(e){return e||(this._table=e=this.getReference("table")),e}loadHistoricalData(e){let t=this,{useFallbackApi:a}=Neo.config,i=a?t.apiFallbackBaseUrl+t.apiFallbackHistoricalDataEndpoint:t.apiBaseUrl+t.apiHistoricalDataEndpoint;i+=a?e+".json":e+"?lastdays="+t.apiHistoricalDataTimeRange,fetch(i).then(e=>e.json()).catch(e=>console.log("Canâ€™t access "+i,e)).then(e=>t.addStoreItems(e))}on520pxButtonClick(e){this.getReference("controls-panel").width=520}on800pxButtonClick(e){this.getReference("controls-panel").width=800}onCollapseButtonClick(e){let t=this.getReference("controls-panel"),a=40===t.width;t.width=a?this.component.historyPanelWidth:40,e.component.text=a?"X":"+"}onCountryChange(e){let t=this;t.selectedRecord=e?{...e}:null,t.loadHistoricalData(e?.countryInfo?.iso2||"all"),t.getReference("historical-data-label").text="Historical Data ("+(e?.country||"World")+")"}onDailyValuesChange(e){let t=this,{windowId:a}=t,i=t.getReference("line-chart").id,r=t.getReference("logarithmic-scale-checkbox"),l=e.value;l?r.set({checked:!1,disabled:e.value}):r.disabled=!1,Neo.main.addon.AmCharts.setProperties({id:i,properties:{"series.values.0.dataFields.valueY":l?"dailyActive":"active","series.values.1.dataFields.valueY":l?"dailyCases":"cases","series.values.2.dataFields.valueY":l?"dailyDeaths":"deaths","series.values.3.dataFields.valueY":l?"dailyRecovered":"recovered"},windowId:a}),Neo.main.addon.AmCharts.callMethod({id:i,path:"invalidateData",windowId:a})}onLogarithmicScaleChange(e){Neo.main.addon.AmCharts.setProperty({id:this.getReference("line-chart").id,path:"yAxes.values.0.logarithmic",value:e.value,windowId:this.windowId})}updateLineChart(e){let t=this,a=t.selectedRecord,i=t.getReference("line-chart");e.forEach(e=>Object.assign(e,F.assignFieldsOrNull(e))),a||(a=t.getParent().summaryData),a&&e.push({date:(new Date).toISOString(),...F.assignFieldsOrNull(a)}),i.chartData=e}}const k=Neo.setupClass(F);class S extends r.A{static config={className:"Covid.view.TableContainer",bind:{countryRecord:e=>e.countryRecord},controller:k,countryRecord_:null,historyPanelWidth:520,table:null,tableConfig:null,layout:{ntype:"hbox",align:"stretch"},items:[{ntype:"container",flex:1,layout:"fit",items:[]},{module:v.A},{module:g.A,cls:["neo-configuration-panel","neo-panel","neo-container"],layout:{ntype:"vbox",align:"stretch"},reference:"controls-panel",style:{backgroundColor:"#2b2b2b"},width:"@config:historyPanelWidth",containerConfig:{flex:null,style:{overflowY:"scroll"}},headers:[{dock:"top",items:[{ntype:"button",handler:"onCollapseButtonClick",text:"X"},{ntype:"label",reference:"historical-data-label",text:"Historical Data"},"->",{ntype:"button",handler:"on520pxButtonClick",text:"520px"},{ntype:"button",handler:"on800pxButtonClick",text:"800px"}]}],items:[{module:C.A,style:{marginTop:"10px"},items:[{ntype:"container",layout:{ntype:"vbox",align:"stretch"},items:[{ntype:"toolbar",flex:"0 1 auto",items:[{module:i.A,checked:!0,labelText:"Logarithmic Scale",labelWidth:135,reference:"logarithmic-scale-checkbox",listeners:{change:"onLogarithmicScaleChange"}},{module:i.A,labelText:"Daily Values",style:{marginLeft:"30px"},labelWidth:95,listeners:{change:"onDailyValuesChange"}}]},{module:y,flex:1,reference:"line-chart"}],header:{iconCls:"fa fa-chart-line",text:"Chart"}}]}]}]};construct(e){super.construct(e);let t=this;t.historicalDataTable=Neo.create({module:p,appName:t.appName,parentId:t.id,reference:"historical-data-table",header:{iconCls:"fa fa-table",text:"Table"},...t.historicalDataTableConfig}),t.items[2].items[0].items.push(t.historicalDataTable),t.table=Neo.create({module:A,appName:t.appName,parentId:t.id,reference:"table",...t.tableConfig}),t.items[0].items.push(t.table)}afterSetCountryRecord(e,t){let a=this;a.timeout(a.isConstructed?0:50).then(()=>{a.controller.onCountryChange(e)})}}const R=Neo.setupClass(S)},2429(e,t,a){a.d(t,{A:()=>l});var i=a(1741);class r extends i.A{static config={className:"Neo.component.wrapper.AmChart",ntype:"am-chart",chartConfig_:null,chartData_:null,chartType:"XYChart",combineSeriesTooltip:!1,dataPath:"",package:"am4charts",style:{height:"100%"},_vdom:{style:{position:"relative"},cn:[{style:{position:"absolute",height:"100%",width:"100%"},cn:[{}]}]}};afterSetChartData(e,t){let{appName:a,dataPath:i,id:r,windowId:l}=this;e&&Neo.main.addon.AmCharts.updateData({appName:a,data:e,dataPath:i,id:r,windowId:l})}afterSetMounted(e,t){let a=this,{appName:i,id:r,windowId:l}=a,o={appName:i,id:r,windowId:l};!1===e&&void 0!==t&&Neo.main.addon.AmCharts.destroy(o),super.afterSetMounted(e,t),e&&(o={...o,combineSeriesTooltip:a.combineSeriesTooltip,config:a.chartConfig,package:a.package,type:a.chartType},a.chartData&&(o.data=a.chartData,o.dataPath=a.dataPath),a.timeout(50).then(()=>{Neo.main.addon.AmCharts.create(o).then(a.onChartMounted)}))}beforeSetChartConfig(e,t){return e||console.error("wrapper.AmChart defined without a chartConfig",this.id),this.parseItemConfigs(e),e}destroy(...e){let{appName:t,id:a,windowId:i}=this;Neo.main.addon.AmCharts.destroy({appName:t,id:a,windowId:i}),super.destroy(...e)}getVdomRoot(){return this.vdom.cn[0].cn[0]}getVnodeRoot(){return this.vnode.childNodes[0].childNodes[0]}onChartMounted(){}toJSON(){let e=this;return{...super.toJSON(),chartConfig:e.serializeConfig(e.chartConfig),chartData:e.serializeConfig(e.chartData),chartType:e.chartType,combineSeriesTooltip:e.combineSeriesTooltip,dataPath:e.dataPath,package:e.package}}}const l=Neo.setupClass(r)},6929(e,t,a){a.d(t,{A:()=>l});var i=a(1184);a(8310);class r extends i.A{static config={className:"Neo.container.Panel",ntype:"panel",baseCls:["neo-panel","neo-container"],containerConfig:null,headerDefaults:null,headers:null,_layout:{ntype:"vbox",align:"stretch"},verticalHeadersFirst:!1};construct(e){super.construct(e);let t=this;t.hasHeaders()&&!0===t.verticalHeadersFirst&&(t.layout={ntype:"hbox",align:"stretch"})}static createHeaderConfig(e){if("NeoInstance"===Neo.typeOf(e))return e;let t={flex:"0 1 auto"};return e.module||e.ntype||(t.cls=["neo-panel-header-toolbar","neo-toolbar"],t.ntype="toolbar"),e.text&&(t.items=[{ntype:"label",cls:["neo-panel-header-text","neo-label"],text:e.text}],delete e.text),Array.isArray(e.items)&&e.items.forEach(e=>{"label"===e.ntype&&(e.cls=["neo-panel-header-text","neo-label"])}),{...t,...e}}createItems(){let e=this,t=e.containerConfig;if(e.hasHeaders()){let a,i=!1===e.verticalHeadersFirst,l=e.headers||[],o=l.filter(e=>e.dock===(i?"bottom":"right")),s=l.filter(e=>e.dock===(i?"left":"top")),n=l.filter(e=>e.dock===(i?"right":"bottom")),d=l.filter(e=>e.dock===(i?"top":"left")),c=o.length>0||d.length>0,h=s.length>0||n.length>0,{items:u}=e,m=[],p=[];d.forEach(e=>{p.push(r.createHeaderConfig(e))}),h&&(i&&c||!i&&c)?(s.forEach(e=>{m.push(r.createHeaderConfig(e))}),a={ntype:"container",flex:1,items:u,itemDefaults:e.itemDefaults,...t},m.push({...e.headerDefaults,...a}),n.forEach(e=>{m.push(r.createHeaderConfig(e))}),p.push({ntype:"container",items:m,layout:{ntype:i?"hbox":"vbox",align:"stretch"},reference:"bodyContainer"})):(a={ntype:"container",flex:1,items:u,itemDefaults:e.itemDefaults,reference:"bodyContainer",...t},p.push({...e.headerDefaults,...a})),o.forEach(e=>{p.push(r.createHeaderConfig(e))}),e.items=p,e.itemDefaults=null,super.createItems()}else t&&e.set(t),super.createItems()}hasHeaders(){return Array.isArray(this.headers)&&this.headers.length>0}}const l=Neo.setupClass(r)}};