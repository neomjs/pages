"use strict";(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[2621],{6535:(e,t,l)=>{l.d(t,{A:()=>s});var a=l(5608),o=l(6270),n=l(825);class i extends a.A{static config={className:"RealWorld.view.article.PreviewComponent",author_:null,baseCls:["article-preview"],createdAt_:null,description_:null,favorited_:!1,favoritesCount_:null,slug_:null,tagList_:null,title_:null,userImage_:null,_vdom:{cn:[{cls:["article-meta"],cn:[{tag:"a",flag:"userImageLink",cn:[{tag:"img"}]},{cls:["info"],cn:[{tag:"a",cls:["author"],flag:"author"},{tag:"span",cls:["date"],flag:"createdAt"}]},{tag:"button",cls:["btn","btn-sm","pull-xs-right"],cn:[{tag:"i",cls:["ion-heart"]},{vtype:"text",flag:"favoritesCount"}]}]},{tag:"a",cls:["preview-link"],flag:"preview-link",cn:[{tag:"h1",flag:"title"},{tag:"p",flag:"description"},{tag:"span",html:"Read more..."}]}]}};construct(e){super.construct(e);let t=this;t.addDomListeners({click:{fn:t.onFavoriteButtonClick,delegate:".pull-xs-right",scope:t}})}afterSetAuthor(e,t){let l=this.vdom,a=n.A.getByFlag(l,"author"),o="#/profile/"+e;a.href=o,a.html=e,n.A.getByFlag(l,"userImageLink").href=o,this.update()}afterSetCreatedAt(e,t){n.A.getByFlag(this.vdom,"createdAt").html=new Intl.DateTimeFormat("en-US",{day:"numeric",month:"long",year:"numeric"}).format(new Date(e)),this.update()}afterSetDescription(e,t){n.A.getByFlag(this.vdom,"description").html=e,this.update()}afterSetFavorited(e,t){let l=this,a=l.vdom.cn[0].cn[2];o.A.add(a.cls,e?"btn-primary":"btn-outline-primary"),o.A.remove(a.cls,e?"btn-outline-primary":"btn-primary"),l.update(),Neo.isBoolean(t)&&l.getController().favoriteArticle(l.slug,e)}afterSetFavoritesCount(e,t){n.A.getByFlag(this.vdom,"favoritesCount").html=" "+e,this.update()}afterSetSlug(e,t){n.A.getByFlag(this.vdom,"preview-link").href="#/article/"+e,this.update()}afterSetTagList(e,t){let l,a=this.vdom;a.cn[1].cn[3]&&a.cn[1].cn.pop(),Array.isArray(e)&&e.length>0&&(l={tag:"ul",cls:["tag-list"],cn:[]},e.forEach((e=>{l.cn.push({tag:"li",cls:["tag-default","tag-pill","tag-outline"],html:e})})),a.cn[1].cn.push(l),this.update())}afterSetTitle(e,t){n.A.getByFlag(this.vdom,"title").html=e,this.update()}afterSetUserImage(e,t){n.A.getByFlag(this.vdom,"userImageLink").cn[0].src=e,this.update()}onFavoriteButtonClick(e){let t=this,l=!t.favorited;t.set({favorited:l,favoritesCount:l?t.favoritesCount+1:t.favoritesCount-1})}}Neo.setupClass(i);const s=i},2621:(e,t,l)=>{l.r(t),l.d(t,{default:()=>r});var a=l(5608),o=l(6270),n=l(6535),i=l(825);class s extends a.A{static config={className:"RealWorld.view.user.ProfileComponent",articlePreviews_:null,baseCls:["profile-page"],bio_:null,countArticles_:5,following_:null,image_:null,myProfile_:!1,previewComponents:[],username_:null,_vdom:{cn:[{cls:["user-info"],cn:[{cls:["container"],cn:[{cls:["row"],cn:[{cls:["col-xs-12","col-md-10","offset-md-1"],cn:[{tag:"img",cls:["user-img"],flag:"image"},{tag:"h4",flag:"username"},{tag:"p",flag:"bio"},{tag:"button",cls:["btn","btn-sm","btn-outline-secondary","action-btn","follow-button"],flag:"following",cn:[{tag:"i",cls:["ion-plus-round"]},{vtype:"text"},{vtype:"text"}]},{tag:"a",cls:["btn","btn-sm","btn-outline-secondary","action-btn"],flag:"edit-profile",href:"#/settings",removeDom:!0,cn:[{tag:"i",cls:["ion-gear-a"]},{vtype:"text",html:" Edit Profile Settings"}]}]}]}]}]},{cls:["container"],cn:[{cls:["row"],cn:[{cls:["col-xs-12","col-md-10","offset-md-1"],flag:"feed-container",cn:[{cls:["articles-toggle"],cn:[{tag:"ul",cls:["nav","nav-pills","outline-active"],flag:"feed-header",cn:[{tag:"li",cls:["nav-item"],cn:[{tag:"a",cls:["nav-link","prevent-click","active"],href:"",html:"My Articles"}]},{tag:"li",cls:["nav-item"],cn:[{tag:"a",cls:["nav-link","prevent-click"],href:"",html:"Favorited Articles"}]}]}]}]}]}]}]}};construct(e){super.construct(e),Neo.main.DomEvents.registerPreventDefaultTargets({name:"click",cls:"prevent-click"});let t=this;t.addDomListeners([{click:{fn:t.onFollowButtonClick,delegate:".follow-button",scope:t}},{click:{fn:t.onNavLinkClick,delegate:".nav-link",scope:t}}]),t.getController().on({afterSetCurrentUser:t.onCurrentUserChange,scope:t})}afterSetArticlePreviews(e,t){let l,a=this,o=i.A.getByFlag(a.vdom,"feed-container");o.cn=[o.cn.shift()],Array.isArray(e)&&e.forEach(((e,t)=>{l={author:e.author.username,createdAt:e.createdAt,description:e.description,favorited:e.favorited,favoritesCount:e.favoritesCount,slug:e.slug,tagList:e.tagList,title:e.title,userImage:e.author.image},a.previewComponents[t]?a.previewComponents[t].set(l,!0):a.previewComponents[t]=Neo.create({module:n.A,parentId:a.id,...l}),o.cn.push(a.previewComponents[t].vdom)})),a.update()}afterSetBio(e,t){e&&(i.A.getByFlag(this.vdom,"bio").html=e,this.update())}afterSetFollowing(e,t){if(Neo.isBoolean(e)){let t=i.A.getByFlag(this.vdom,"following");o.A.remove(t.cls,e?"btn-outline-secondary":"btn-secondary"),o.A.add(t.cls,e?"btn-secondary":"btn-outline-secondary"),t.cn[0].cls=[e?"ion-minus-round":"ion-plus-round"],t.cn[1].html=e?" Unfollow ":" Follow ",this.update()}}afterSetImage(e,t){i.A.getByFlag(this.vdom,"image").src=e,this.update()}afterSetMyProfile(e,t){if(console.log("afterSetMyProfile",e),Neo.isBoolean(t)){let t=this.vdom;i.A.getByFlag(t,"edit-profile").removeDom=!e,i.A.getByFlag(t,"following").removeDom=e,this.update()}}afterSetUsername(e,t){let l=this.vdom;i.A.getByFlag(l,"following").cn[2].html=e,i.A.getByFlag(l,"username").html=e,this.update()}getArticles(e){this.getController().getArticles(e).then((e=>{this.articlePreviews=e.json.articles}))}onCurrentUserChange(e){console.log("onCurrentUserChange",e),this.myProfile=this.username===e?.username}onFollowButtonClick(e){let t=this;t.getController().followUser(t.username,!t.following).then((e=>{t.following=e.json.profile.following}))}onNavLinkClick(e){let t=this,l=i.A.findVdomChild(t.vdom,e.path[0].id),a=i.A.getByFlag(t.vdom,"feed-header"),n={};if(!l.vdom.cls.includes("disabled")){switch(l.vdom.html){case"Favorited Articles":n={favorited:t.username};break;case"My Articles":n={author:t.username}}a.cn.forEach((e=>{o.A[e.id===l.parentNode.id?"add":"remove"](e.cn[0].cls,"active")})),t.update(),t.getArticles({...n,limit:t.countArticles,offset:0})}}updateContent(e){let t=this,l=e.username;t.set({bio:e.bio,following:e.following,image:e.image,myProfile:e.myProfile,username:l}).then((()=>{t.getArticles({author:l,limit:t.countArticles,offset:0})}))}}Neo.setupClass(s);const r=s}}]);