"use strict";(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[5457],{1842:(e,t,o)=>{o.d(t,{A:()=>d});var n=o(2583);class a extends n.A{static config={className:"Neo.util.Style"};static compareStyles(e,t){let o={};return Neo.isString(e)&&(e=Neo.createStyleObject(e)),Neo.isString(t)&&(t=Neo.createStyleObject(t)),e||t?t?e?(Object.keys(e).forEach(n=>{t.hasOwnProperty(n)&&t[n]===e[n]||(o[n]=e[n])}),Object.keys(t).forEach(t=>{e.hasOwnProperty(t)||(o[t]=null)}),Object.keys(o).length>0?o:null):void Object.keys(t).forEach(function(e){o[e]=null}):Neo.clone(e):null}}const d=Neo.setupClass(a)},3994:(e,t,o)=>{o.d(t,{IY:()=>n,qd:()=>d,yL:()=>a});const n=new Set(["circle","clipPath","ellipse","filter","foreignObject","image","marker","mask","pattern","rect","svg","use"]),a=new Set(["checked","defer","disabled","ismap","multiple","nohref","noresize","noshade","nowrap","open","readonly","required","reversed","selected"]),d=new Set(["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"])},5457:(e,t,o)=>{o.r(t),o.d(t,{default:()=>m});var n=o(2583),a=o(6270),d=o(1842),s=o(3994),r=o(8596);class i{constructor(e){let t=this,{textContent:o}=e,n=Object.hasOwn(e,"innerHTML"),a="text"===e.vtype;Object.assign(t,{childNodes:e.childNodes||[],id:e.id||Neo.getId(a?"vtext":"vnode"),vtype:e.vtype||"vnode"}),a?t.textContent=r.A.escapeHtml(n?e.innerHTML:o):(Object.assign(t,{attributes:e.attributes||{},className:e.className||[],nodeName:e.nodeName||"div",style:e.style}),n?t.innerHTML=e.innerHTML:Object.hasOwn(e,"textContent")&&(t.textContent=Neo.config.useStringBasedMounting?r.A.escapeHtml(o):o)),e.static&&(t.static=!0)}}Neo.ns("Neo.vdom",!0).VNode=i;const c=i,l=Neo.config;class p extends n.A{static config={className:"Neo.vdom.Helper",remote:{app:["create","update"]},singleton:!0};compareAttributes(e){let t,o,n,s,r,i,c,{deltas:l,oldVnode:p,vnode:m,vnodeMap:h}=e;return!p.componentId||p.id!==m.id&&p.componentId!==m.id?("text"===m.vtype&&m.innerHTML!==p.innerHTML?l.default.push({action:"updateVtext",id:m.id,parentId:h.get(m.id).parentNode.id,value:m.innerHTML}):(s=Object.keys(m),Object.keys(p).forEach(e=>{m.hasOwnProperty(e)?"attributes"===e&&Object.keys(p[e]).forEach(t=>{m[e].hasOwnProperty(t)||(m[e][t]=null)}):s.push(e)}),s.forEach(e=>{switch(o={},n=m[e],e){case"attributes":t={},Object.entries(n).forEach(([e,o])=>{p.attributes.hasOwnProperty(e)&&p.attributes[e]===o||null!==o&&!Neo.isString(o)&&Neo.isEmpty(o)||(t[e]=o)}),Object.keys(t).length>0&&(o.attributes=t,Object.entries(t).forEach(([e,t])=>{null!==t&&""!==t||delete m.attributes[e]}));break;case"nodeName":case"innerHTML":case"textContent":n!==p[e]&&(o[e]=n);break;case"style":r=d.A.compareStyles(n,p.style),r&&(o.style=r);break;case"className":p.className?(i=a.A.difference(n,p.className),c=a.A.difference(p.className,n)):(i=n,c=[]),(i.length>0||c.length>0)&&(o.cls={},i.length>0&&(o.cls.add=i),c.length>0&&(o.cls.remove=c))}Object.keys(o).length>0&&(o.id=m.id,l.default.push(o))})),l):l}async create(e){let t,o,n=this;return await n.importDomApiVnodeCreator(),await n.importStringFromVnode(),o=n.createVnode(e.vdom),t={...e,vnode:o},delete t.vdom,l.useStringBasedMounting&&(t.outerHTML=Neo.vdom.util.StringFromVnode.create(o)),t}createDeltas(e){let{deltas:t={default:[],remove:[]},oldVnode:o,vnode:n}=e,a=o?.id||o?.componentId,d=n?.id;if(!n&&a)return t.remove.push({action:"removeNode",id:a}),t;if(n.static)return t;if(d!==a&&n.componentId!==o.componentId)throw new Error(`createDeltas() must get called for the same node. ${d}, ${a}`);let s,r,i,c,l=this,p=e.oldVnodeMap||l.createVnodeMap({vnode:o}),m=e.vnodeMap||l.createVnodeMap({vnode:n}),h=n.childNodes||[],u=o.childNodes||[],v=0,N=0,g=0,b=Math.max(h.length,u.length);if(l.compareAttributes({deltas:t,oldVnode:o,vnode:n,vnodeMap:m}),0===h.length&&u.length>1)return t.remove.push({action:"removeAll",parentId:d}),t;for(;v<b&&(s=h[v],i=u[v+N],s||i);v++)if(s&&i&&(s.id===i.id||s.componentId&&s.componentId===i.componentId))l.createDeltas({deltas:t,oldVnode:i,oldVnodeMap:p,vnode:s,vnodeMap:m});else{if(i){if(c=i.id||i.componentId,r=m.get(c),!r){l.removeNode({deltas:t,oldVnode:i,oldVnodeMap:p}),v--,g++;continue}if(s&&d!==r.parentNode.id){v--,N++;continue}}s&&(l.isMovedNode(s,p)?l.moveNode({deltas:t,insertDelta:g,oldVnodeMap:p,vnode:s,vnodeMap:m}):l.insertNode({deltas:t,index:v+g,oldVnodeMap:p,vnode:s,vnodeMap:m}),i&&d===m.get(c)?.parentNode.id&&b++)}return t}createVnode(e){if(e.componentId)return e.childNodes??=[],e.id??=e.componentId,e;if(!0===e.removeDom)return null;let t,o=this,n={attributes:{},style:{}};return Object.entries(e).forEach(([e,a])=>{if(null!=a&&"flag"!==e&&"removeDom"!==e){let d,r,i;switch(e){case"tag":n.nodeName=a;break;case"html":n.innerHTML=a.toString();break;case"text":n.textContent=a;break;case"cn":Array.isArray(a)||(a=[a]),r=[],a.forEach(e=>{!0!==e.removeDom&&(delete e.removeDom,t=o.createVnode(e),t&&r.push(t))}),n.childNodes=r;break;case"cls":a&&!Array.isArray(a)?n.className=[a]:Array.isArray(a)&&a.length<1||(n.className=a);break;case"data":a&&"Object"===Neo.typeOf(a)&&Object.entries(a).forEach(([e,t])=>{n.attributes[`data-${Neo.decamel(e)}`]=t});break;case"height":case"maxHeight":case"maxWidth":case"minHeight":case"minWidth":case"width":s.IY.has(n.nodeName)?n.attributes[e]=a+"":(d=a!=parseInt(a),n.style[e]=a+(d?"":"px"));break;case"componentId":case"id":case"static":n[e]=a;break;case"style":i=n.style,Neo.isString(a)?n.style=Object.assign(i,Neo.core.Util.createStyleObject(a)):n.style=Object.assign(i,a);break;default:n.attributes[e]=a+""}}}),Object.keys(n.attributes).length<1&&delete n.attributes,Object.keys(n.style).length<1&&delete n.style,new c(n)}createVnodeMap(e){let t,{vnode:o,parentNode:n=null,index:a=0,map:d=new Map}=e;return o&&(t=o.id||o.componentId,d.set(t,{id:t,index:a,parentNode:n,vnode:o}),o.childNodes?.forEach((e,t)=>{this.createVnodeMap({vnode:e,parentNode:o,index:t,map:d})})),d}findMovedNodes(e){let{movedNodes:t=new Map,oldVnodeMap:o,vnode:n,vnodeMap:a}=e,d=n?.id;return d&&(this.isMovedNode(n,o)?t.set(d,a.get(d)):n.childNodes?.forEach(e=>{"text"!==e.vtype&&this.findMovedNodes({movedNodes:t,oldVnodeMap:o,vnode:e,vnodeMap:a})})),t}async importDomApiVnodeCreator(){l.useStringBasedMounting||Neo.vdom.util?.DomApiVnodeCreator||await o.e(8910).then(o.bind(o,8910))}async importStringFromVnode(){l.useStringBasedMounting&&!Neo.vdom.util?.StringFromVnode&&await o.e(6839).then(o.bind(o,6839))}insertNode({deltas:e,index:t,oldVnodeMap:o,vnode:n,vnodeMap:a}){let d,s=a.get(n.id),{parentNode:r}=s,i=r.id,c=this,p=c.findMovedNodes({oldVnodeMap:o,vnode:n,vnodeMap:a}),m={action:"insertNode",parentId:i},h=!1,u=t,v=0;for(;v<t;v++)d=r.childNodes[v],"text"===d?.vtype&&(u+=2,h=!0);Object.assign(m,{hasLeadingTextChildren:h,index:u}),l.useStringBasedMounting?m.outerHTML=Neo.vdom.util.StringFromVnode.create(n,p):m.vnode=Neo.vdom.util.DomApiVnodeCreator.create(n,p),e.default.push(m),o.get(i).vnode.childNodes.splice(t,0,n),p.forEach(t=>{let{id:n}=t,d=t.parentNode.id;e.default.push({action:"moveNode",id:n,index:t.index,parentId:d}),c.createDeltas({deltas:e,oldVnode:o.get(n).vnode,oldVnodeMap:o,vnode:t.vnode,vnodeMap:a})})}isMovedNode(e,t){let o=t.get(e.id);return o&&(!o.vnode.componentId||e.componentId===o.vnode.componentId)}moveNode({deltas:e,insertDelta:t,oldVnodeMap:o,vnode:n,vnodeMap:d}){let s,r=d.get(n.id),{index:i,parentNode:c}=r,l=c.id,p=o.get(n.id),m=p.parentNode,{childNodes:h}=m,u={action:"moveNode",id:n.id,parentId:l},v=i,N=0;for(;N<i;N++)s=c.childNodes[N],"text"===s?.vtype&&(v+=2);if(Object.assign(u,{index:v+t}),e.default.push(u),l!==m.id){a.A.remove(h,p.vnode);let e=o.get(l);e&&(p.parentNode=e.vnode,h=p.parentNode.childNodes)}a.A.insert(h,i,p.vnode),this.createDeltas({deltas:e,oldVnode:p.vnode,oldVnodeMap:o,vnode:n,vnodeMap:d})}removeNode({deltas:e,oldVnode:t,oldVnodeMap:o}){t.componentId&&(t.id??=t.componentId);let n={action:"removeNode",id:t.id},{parentNode:d}=o.get(t.id);"text"===t.vtype&&(n.parentId=d.id),e.remove.push(n),a.A.remove(d.childNodes,t)}async update(e){let t,o,n=this;return await n.importDomApiVnodeCreator(),await n.importStringFromVnode(),o=n.createVnode(e.vdom),t=n.createDeltas({oldVnode:e.vnode,vnode:o}),t=t.default.concat(t.remove),{deltas:t,updateVdom:!0,vnode:o}}}const m=Neo.setupClass(p)},8596:(e,t,o)=>{o.d(t,{A:()=>d});var n=o(2583);class a extends n.A{static charEntityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;",$:"&dollar;","\\":"&bsol;","/":"&sol;"};static charPattern=/[&<>"'$\\]/g;static entityPattern=/(&amp;)|(&lt;)|(&gt;)|(&quot;)|(&apos;)|(&dollar;)|(&bsol;)|(&sol;)/g;static config={className:"Neo.util.String"};static escapeHtml(e){let t=this;return Neo.isString(e)?e.replace(t.charPattern,t.getEntityFromChar.bind(t)):e}static getCharFromEntity(e){return Object.keys(this.charEntityMap).find(t=>this.charEntityMap[t]===e)||e}static getEntityFromChar(e){return this.charEntityMap[e]||e}static unescapeHtml(e){let t=this;return Neo.isString(e)?e.replace(t.entityPattern,t.getCharFromEntity.bind(t)):e}static uncapitalize(e){return e&&e[0].toLowerCase()+e.substring(1)}}const d=Neo.setupClass(a)}}]);