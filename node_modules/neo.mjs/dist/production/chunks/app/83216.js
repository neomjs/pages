"use strict";(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[83216],{16975:(e,t,a)=>{a.d(t,{A:()=>o});var r=a(97555);const o=Neo.setupClass(class extends r.A{static config={className:"Neo.selection.table.BaseModel"};get dataFields(){return this.view.parent.columns.map(e=>e.dataField)}})},22841:(e,t,a)=>{a.d(t,{A:()=>o});var r=a(67024);const o=Neo.setupClass(class extends r.A{static config={className:"Neo.util.Css"};static deleteRules(e,t){Array.isArray(t)||(t=[t]),Neo.main.addon.Stylesheet.deleteCssRules({rules:t,windowId:e})}static insertRules(e,t){Array.isArray(t)||(t=[t]),Neo.main.addon.Stylesheet.insertCssRules({rules:t,windowId:e})}})},29725:(e,t,a)=>{a.d(t,{A:()=>l});var r=a(33460);a(80338);class o extends r.A{static config={className:"Neo.container.Panel",ntype:"panel",baseCls:["neo-panel","neo-container"],containerConfig:null,headerDefaults:null,headers:null,_layout:{ntype:"vbox",align:"stretch"},verticalHeadersFirst:!1};construct(e){super.construct(e);let t=this;t.hasHeaders()&&!0===t.verticalHeadersFirst&&(t.layout={ntype:"hbox",align:"stretch"})}static createHeaderConfig(e){if("NeoInstance"===Neo.typeOf(e))return e;let t={flex:"0 1 auto"};return e.module||e.ntype||(t.cls=["neo-panel-header-toolbar","neo-toolbar"],t.ntype="toolbar"),e.text&&(t.items=[{ntype:"label",cls:["neo-panel-header-text","neo-label"],text:e.text}],delete e.text),Array.isArray(e.items)&&e.items.forEach(e=>{"label"===e.ntype&&(e.cls=["neo-panel-header-text","neo-label"])}),{...t,...e}}createItems(){let e=this,t=e.containerConfig;if(e.hasHeaders()){let a,r=!1===e.verticalHeadersFirst,l=e.headers||[],i=l.filter(e=>e.dock===(r?"bottom":"right")),s=l.filter(e=>e.dock===(r?"left":"top")),n=l.filter(e=>e.dock===(r?"right":"bottom")),d=l.filter(e=>e.dock===(r?"top":"left")),c=i.length>0||d.length>0,u=s.length>0||n.length>0,{items:h}=e,p=[],m=[];d.forEach(e=>{m.push(o.createHeaderConfig(e))}),u&&(r&&c||!r&&c)?(s.forEach(e=>{p.push(o.createHeaderConfig(e))}),a={ntype:"container",flex:1,items:h,itemDefaults:e.itemDefaults,...t},p.push({...e.headerDefaults,...a}),n.forEach(e=>{p.push(o.createHeaderConfig(e))}),m.push({ntype:"container",items:p,layout:{ntype:r?"hbox":"vbox",align:"stretch"}})):(a={ntype:"container",flex:1,items:h,itemDefaults:e.itemDefaults,...t},m.push({...e.headerDefaults,...a})),i.forEach(e=>{m.push(o.createHeaderConfig(e))}),e.items=m,e.itemDefaults=null,super.createItems()}else t&&e.set(t),super.createItems()}hasHeaders(){return Array.isArray(this.headers)&&this.headers.length>0}}const l=Neo.setupClass(o)},39899:(e,t,a)=>{a.d(t,{A:()=>g});var r=a(33460),o=a(53403),l=a(22841),i=a(59651),s=a(30759),n=a(31485),d=a(79300),c=a(33610);const u=Neo.setupClass(class extends n.A{static config={className:"Neo.table.Body",ntype:"table-body",baseCls:["neo-table-body"],colspanField:"colspan",containerId:null,highlightModifiedCells_:!1,keys:{},recordVnodeMap:{},selectionModel_:null,selectedRecordField:"annotations.selected",store_:null,useRowRecordIds:!0,_vdom:{tag:"tbody",tabIndex:-1,cn:[]}};get selectedRows(){return"selection-table-rowmodel"===this.selectionModel.ntype?this.selectionModel.items:[]}construct(e){super.construct(e);let t=this;t.addDomListeners([{click:t.onCellClick,dblclick:t.onCellDoubleClick,delegate:".neo-table-cell",scope:t},{click:t.onRowClick,dblclick:t.onRowDoubleClick,delegate:".neo-table-row",scope:t}])}afterSetSelectionModel(e,t){this.rendered&&e.register(this)}afterSetStore(e,t){let a=this,r={filter:a.onStoreFilter,load:a.onStoreLoad,recordChange:a.onStoreRecordChange,scope:a};t?.un(r),e?.on(r)}applyRendererOutput({cellId:e,column:t,columnIndex:a,record:r,rowIndex:o,tableContainer:l}){let i,s,n=this,d=["neo-table-cell"],c=r[n.colspanField],{dataField:u}=t,{model:h}=n.store,p=r[u],m=!!h,{vdom:f}=n;if(!h?.getField(u)){let e=u.split("."),t=e.pop();p=Neo.ns(e,!1,r[Symbol.for("data")])?.[t]}switch(null==p&&(p=""),n.bindCallback(t.renderer,"renderer",t.rendererScope||l,t),s=t.renderer.call(t.rendererScope||l,{column:t,columnIndex:a,dataField:u,record:r,rowIndex:o,tableContainer:l,value:p}),Neo.typeOf(s)){case"Object":s.html?s.cls&&d.push(...s.cls):s=[s];break;case"Date":case"Number":case"String":s={cls:d,html:s?.toString()}}return null==s&&(s=""),"left"!==t.cellAlign&&d.push("neo-"+t.cellAlign),n.highlightModifiedCells&&r.isModifiedField(u)&&d.push("neo-is-modified"),e||(e=m?n.getCellId(r,t.dataField):f.cn[o]?.cn[n.getColumn(t.dataField,!0)]?.id||Neo.getId("td")),i={tag:"td",id:e,cls:d,style:s.style||{}},c&&Object.keys(c).includes(u)&&(i.colspan=c[u]),"Object"===Neo.typeOf(s)?i.html=s.html||"":i.cn=s,i}beforeSetSelectionModel(e,t){return t?.destroy(),o.A.beforeSetInstance(e,d.A)}createRow({record:e,rowIndex:t}){Neo.isNumber(t)||(t=this.store.indexOf(e));let a,r,o,l,s,n=this,d=n.parent,c=e[n.colspanField],u=c&&Object.keys(c),h=d.items[0].items,p=h.length,m=0,f=0,b=n.getRowId(e,t),{selectedRows:g}=n,y=n.getTrClass(e,t);for(n.recordVnodeMap[b]=t,g&&e[n.selectedRecordField]&&i.A.add(g,b),g?.includes(b)&&(y.push("neo-selected"),n.parent.fire("select",{record:e})),s={tag:"tr",id:b,cls:y,cn:[]},l=0;l<p;l++)r=h[l],a=n.applyRendererOutput({column:r,columnIndex:l,record:e,rowIndex:t,tableContainer:d}),r.dock&&(a.cls=["neo-locked",...a.cls||[]],"left"===r.dock&&(a.style.left=m+"px",m+=r.width+1)),r.flex&&(a.style.width="100%"),s.cn.push(a),u?.includes(r.dataField)&&(l+=c[r.dataField]-1);for(l=0;l<p;l++)o=p-l-1,r=h[o],"right"===r.dock&&(s.cn[o].style.right=f+"px",f+=r.width+1),u?.includes(r.dataField)&&(l+=c[r.dataField]-1);return 0===t&&Object.assign(d,{dockLeftMargin:m,dockRightMargin:f}),s}createViewData(){let e=this,{selectedRows:t,store:a}=e,r=a.getCount(),o=0,l=[];for(;o<r;o++)l.push(e.createRow({record:a.items[o],rowIndex:o}));e.vdom.cn=l,e.promiseUpdate().then(()=>{t?.length>0&&Neo.main.DomAccess.scrollToTableRow({appName:e.appName,id:t[0]})})}destroy(...e){this.store=null,super.destroy(...e)}fireCellEvent(e,t){let a=this,r=e.currentTarget,o=a.getCellDataField(r),l=a.getRecord(r);a.parent.fire(t,{body:a,data:e,dataField:o,record:l})}fireRowEvent(e,t){let a=this,r=e.currentTarget,o=a.getRecord(r);a.parent.fire(t,{body:a,data:e,record:o})}getCellDataField(e){return e.split("__")[2]}getCellId(e,t){return this.id+"__"+e[this.store.keyProperty]+"__"+t}getColumn(e,t=!1){let a,r=this.parent.headerToolbar.items,o=0,l=r.length;for(;o<l;o++)if(a=r[o],a.dataField===e)return t?o:a;return null}getDataField(e){return e.split("__")[2]}getRecord(e){let t,a,r=this,o=r.getRecordByRowId(e);if(o)return o;for(t of(a=c.A.getParentNodes(r.vdom,e),a))if(o=r.getRecordByRowId(t.id),o)return o;return null}getRecordByRowId(e){return this.store.getAt(this.recordVnodeMap[e])}getRowId(e,t){let a=this,{store:r}=a;return a.useRowRecordIds?`${a.id}__tr__${e[r.keyProperty]}`:(t=Neo.isNumber(t)?t:r.indexOf(e),a.vdom.cn[t]?.id||Neo.getId("tr"))}getTrClass(e,t){return["neo-table-row"]}onCellClick(e){this.fireCellEvent(e,"cellClick")}onCellDoubleClick(e){this.fireCellEvent(e,"cellDoubleClick")}onConstructed(){super.onConstructed(),this.selectionModel?.register(this)}onRowClick(e){this.fireRowEvent(e,"rowClick")}onRowDoubleClick(e){this.fireRowEvent(e,"rowDoubleClick")}onStoreFilter(){this.onStoreLoad()}onStoreLoad(e){let t=this;t.createViewData(),t.mounted&&t.timeout(50).then(()=>{Neo.main.DomAccess.scrollTo({direction:"top",id:t.vdom.id,value:0})})}onStoreRecordChange({fields:e,record:t}){let a,r,o,l,i,s,n=this,d=e.map(e=>e.name),u=!1,h=n.parent,p=n.store.indexOf(t),{selectionModel:m,vdom:f}=n;d.includes(n.colspanField)?(n.vdom.cn[p]=n.createRow({record:t,rowIndex:p}),n.update()):e.forEach(e=>{e.name===n.selectedRecordField?"selection-table-rowmodel"===m.ntype&&m[e.value?"select":"deselect"](n.getRowId(t)):(a=n.getCellId(t,e.name),r=c.A.find(f,a),r?.vdom&&(l=n.getColumn(e.name),i=r.index,u=!0,s=l.rendererScope||h,o=n.applyRendererOutput({cellId:a,column:l,columnIndex:i,record:t,rowIndex:p,tableContainer:h}),r.parentNode.cn[i]=o))}),u&&n.update()}});var h=a(78847),p=a(68212),m=a(5728);Neo.setupClass(class extends h.A{static cellAlignValues=["left","center","right"];static config={className:"Neo.table.header.Button",ntype:"table-header-button",baseCls:["neo-table-header-button"],cellAlign_:"left",dataField:null,defaultSortDirection:"ASC",draggable_:!0,editorConfig:null,filterConfig:null,filterField:null,iconCls:"fa fa-arrow-circle-up",iconPosition:"right",isSorted_:null,renderer_:"cellRenderer",rendererScope:null,showHeaderFilter_:!1,sortable_:!0,_vdom:{tag:"th",cn:[{tag:"button",cn:[{tag:"span",cls:["neo-button-glyph"]},{tag:"span",cls:["neo-button-text"]},{tag:"span",cls:["neo-button-badge"]},{tag:"span",cls:["neo-button-ripple-wrapper"],cn:[{tag:"span",cls:["neo-button-ripple"]}]}]}]}};afterSetIsSorted(e,t){let a=this,{cls:r}=a,o=a.up("table-container");switch(e){case null:i.A.add(r,"neo-sort-hidden");break;case"ASC":i.A.remove(r,"neo-sort-desc"),i.A.remove(r,"neo-sort-hidden"),i.A.add(r,"neo-sort-asc");break;case"DESC":i.A.remove(r,"neo-sort-asc"),i.A.remove(r,"neo-sort-hidden"),i.A.add(r,"neo-sort-desc")}a.cls=r,o&&o.store&&a.mounted&&a.fire("sort",{direction:e,property:a.dataField})}afterSetShowHeaderFilter(e,t){let a=this;e?a.filterField?delete a.filterField.vdom.removeDom:(a.filterField=Neo.create({module:p.A,appName:a.appName,flag:"filter-field",hideLabel:!0,parentId:a.id,style:{marginLeft:".5em",marginRight:".5em"},windowId:a.windowId,listeners:{change:a.changeFilterValue,operatorChange:a.changeFilterOperator,scope:a},...a.editorConfig}),a.vdom.cn.push(a.filterField.createVdomReference())):a.filterField&&(a.filterField.vdom.removeDom=!0),a.updateDepth=2,a.update()}afterSetSortable(e,t){let a=this,{cls:r}=a;i.A.toggle(r,"neo-sort-hidden",!e),a.cls=r,a.update()}beforeSetCellAlign(e,t){return this.beforeSetEnumValue(e,t,"cellAlign","cellAlignValues")}beforeSetRenderer(e,t){return(0,m.Ap)(e,this).fn}cellRenderer(e){return e.value}changeFilterOperator(e){let t,a,r=this,o=r.up("table-container"),l=o?.store,i=e.value;l&&(t=l.getFilter(r.dataField),t?t.operator=i:(a=l.filters,a.push({property:r.dataField,operator:i,value:null,...r.filterConfig}),l.filters=a))}changeFilterValue(e){let t,a,r,o,l=this,i=l.up("table-container"),s=i?.store,{value:n}=e;s&&(a=s.getFilter(l.dataField),o=s.model,t=o&&o.getField(l.dataField),n&&"date"===t.type.toLowerCase()&&(n=new Date(n)),Neo.isRecord(n)&&(n=n[l.filterField.displayField]),a?a.value=n:(r=s.filters,r.push({property:l.dataField,operator:"like",value:n,...l.filterConfig}),s.filters=r))}destroy(...e){this.filterField?.destroy(),super.destroy(...e)}getVdomRoot(){return this.vdom.cn[0]}getVnodeRoot(){return this.vnode.childNodes[0]}onClick(e){let t,a=this;t="DESC"===a.defaultSortDirection?{ASC:null,DESC:"ASC",null:"DESC"}:{ASC:"DESC",DESC:null,null:"ASC"},a.isSorted=t[a.isSorted+""],super.onClick(e)}removeSortingCss(){let e=this,{cls:t}=e;i.A.add(t,"neo-sort-hidden"),e.cls=t,e._isSorted=null}});var f=a(80338);const b=Neo.setupClass(class extends f.A{static config={className:"Neo.table.header.Toolbar",ntype:"table-header-toolbar",baseCls:["neo-table-header-toolbar"],draggable_:!0,layout:"base",itemDefaults:{ntype:"table-header-button"},showHeaderFilters_:!1,sortable:!0,_vdom:{tag:"thead",cn:[{tag:"tr",cn:[]}]}};afterSetDraggable(e,t){let r=this;e&&!r.sortZone&&a.e(36742).then(a.bind(a,36742)).then(e=>{let{appName:t,id:a,windowId:o}=r;r.sortZone=Neo.create({module:e.default,appName:t,boundaryContainerId:a,owner:r,windowId:o,...r.sortZoneConfig})})}afterSetShowHeaderFilters(e,t){if(void 0!==t){let t=this;t.items.forEach(t=>{t.setSilent({showHeaderFilter:e})}),t.updateDepth=-1,t.update()}}afterSetSortable(e,t){if(void 0!==t){let t=this;t.items.forEach(t=>{t.setSilent({sortable:e})}),t.updateDepth=2,t.update()}}createItems(){let e=this;e.itemDefaults.showHeaderFilter=e.showHeaderFilters,e.items.forEach(t=>{Object.hasOwn(t,"sortable")||(t.sortable=e.sortable)}),super.createItems();let t,a=0,r=0,{items:o}=e,l=o.length;o.forEach((e,i)=>{t=e.wrapperStyle,e.maxWidth&&(t.maxWidth=e.maxWidth+"px"),e.minWidth&&(t.minWidth=e.minWidth+"px"),e.width&&(t.width=e.width+"px"),e.dock?(e.vdom.cls=["neo-locked"],"left"===e.dock&&(t.left=a+"px"),a+=e.width+1):e.vdom.cls=[],e.wrapperStyle=t,"right"===(e=o[l-i-1]).dock&&(t=e.wrapperStyle,t.right=r+"px",e.wrapperStyle=t,r+=e.width+1)}),e.update()}getColumn(e){for(const t of this.items)if(t.dataField===e)return t;return null}getLayoutConfig(e){return"base"}getVdomRoot(){return this.vdom.cn[0]}getVnodeRoot(){return this.vnode.childNodes[0]}}),g=Neo.setupClass(class extends r.A{static config={className:"Neo.table.Container",ntype:"table-container",baseCls:["neo-table-container"],bodyConfig:null,bodyId_:null,cellEditing_:!1,columnDefaults:null,columns_:[],headerToolbarConfig:null,headerToolbarId_:null,layout:"base",scrollbarsCssApplied:!1,showHeaderFilters_:!1,sortable_:!0,store_:null,useCustomScrollbars_:!0,items:null,_vdom:{cls:["neo-table-wrapper"],cn:[{tag:"table",cn:[]}]}};get body(){return Neo.getComponent(this.bodyId)||Neo.get(this.bodyId)}get headerToolbar(){return Neo.getComponent(this.headerToolbarId)||Neo.get(this.headerToolbarId)}construct(e){super.construct(e);let t=this;t.bodyId=Neo.getId("table-body"),t.headerToolbarId=Neo.getId("table-header-toolbar"),t.items=[{module:b,id:t.headerToolbarId,showHeaderFilters:t.showHeaderFilters,sortable:t.sortable,...t.headerToolbarConfig},{module:u,containerId:t.id,id:t.bodyId,store:t.store,...t.bodyConfig}],t.vdom.id=t.getWrapperId(),t.createColumns(t.columns)}afterSetCellEditing(e,t){e&&a.e(21270).then(a.bind(a,21270)).then(e=>{let t=this,{appName:a}=t,r=t.plugins||[];r.push({module:e.default,appName:a}),t.plugins=r})}afterSetColumns(e,t){if(Array.isArray(t)&&t.length>0){let t=this,{headerToolbar:a}=t;a&&(a.items=e,a.createItems()),t.body?.createViewData()}}afterSetShowHeaderFilters(e,t){void 0!==t&&(this.headerToolbar.showHeaderFilters=e)}afterSetSortable(e,t){void 0!==t&&(this.headerToolbar.sortable=e)}afterSetStore(e,t){let a=this,r={filter:a.onStoreFilter,load:a.onStoreLoad,scope:a};e?.on(r),t?.un(r),a.body&&(a.body.store=e)}afterSetUseCustomScrollbars(e,t){!0===e&&(this.vdom.cls=i.A.union(this.vdom.cls,["neo-use-custom-scrollbar"]))}applyCustomScrollbarsCss(){let e=this,t=e.getWrapperId(),a=[];e.dockLeftMargin&&a.push("#"+t+"::-webkit-scrollbar-track:horizontal {margin-left: "+e.dockLeftMargin+"px;}"),e.dockRightMargin&&a.push("#"+t+"::-webkit-scrollbar-track:horizontal {margin-right: "+e.dockRightMargin+"px;}"),a.length>0&&l.A.insertRules(e.windowId,a),e.scrollbarsCssApplied=!0}beforeSetBodyId(e,t){return e||t}beforeSetColumns(e,t){return this.configsApplied?this.createColumns(e):e}beforeSetHeaderToolbarId(e,t){return e||t}beforeSetStore(e,t){return e&&(e=o.A.beforeSetInstance(e,s.A)),e}bulkUpdateRecords(e){let{body:t,store:a}=this,{keyProperty:r}=a;t&&(t.silentVdomUpdate=!0,e.forEach(e=>{a.get(e[r])?.set(e)}),t.silentVdomUpdate=!1,t.update())}createColumns(e){let t,a=this,{columnDefaults:r}=a,o=a.store?.sorters;return e&&e.length||Neo.logError("Attempting to create a table.Container without defined columns",a.id),e.forEach(e=>{t=e.renderer,r&&Neo.assignDefaults(e,r),e.dock&&!e.width&&Neo.logError("Attempting to create a docked column without a defined width",e,a.id),t&&Neo.isString(t)&&a[t]&&(e.renderer=a[t]),o?.[0]&&e.dataField===o[0].property&&(e.isSorted=o[0].direction),e.listeners={sort:a.onSortColumn,scope:a}}),a.items[0].items=e,e}getVdomRoot(){return this.vdom.cn[0]}getVdomItemsRoot(){return this.vdom.cn[0]}getVnodeRoot(){return this.vnode.childNodes[0]}getWrapperId(){return`${this.id}__wrapper`}onSortColumn(e){let t=this;t.store.sort(e),t.removeSortingCss(e.property),e.direction&&t.body.onStoreLoad()}onStoreFilter(){this.onStoreLoad()}onStoreLoad(){let e=this;e.useCustomScrollbars&&!1===e.scrollbarsCssApplied&&e.applyCustomScrollbarsCss(),e.store.sorters?.length<1&&e.removeSortingCss()}removeSortingCss(e){this.headerToolbar.items.forEach(t=>{t.dataField!==e&&t.removeSortingCss()})}})},40729:(e,t,a)=>{a.d(t,{A:()=>o});var r=a(31485);const o=Neo.setupClass(class extends r.A{static config={className:"Neo.component.wrapper.AmChart",ntype:"am-chart",chartConfig_:null,chartData_:null,chartType:"XYChart",combineSeriesTooltip:!1,dataPath:"",package:"am4charts",style:{height:"100%"},_vdom:{style:{position:"relative"},cn:[{style:{position:"absolute",height:"100%",width:"100%"},cn:[{}]}]}};afterSetChartData(e,t){let{appName:a,dataPath:r,id:o,windowId:l}=this;e&&Neo.main.addon.AmCharts.updateData({appName:a,data:e,dataPath:r,id:o,windowId:l})}afterSetMounted(e,t){let a=this,{appName:r,id:o,windowId:l}=a,i={appName:r,id:o,windowId:l};!1===e&&void 0!==t&&Neo.main.addon.AmCharts.destroy(i),super.afterSetMounted(e,t),e&&(i={...i,combineSeriesTooltip:a.combineSeriesTooltip,config:a.chartConfig,package:a.package,type:a.chartType},a.chartData&&(i.data=a.chartData,i.dataPath=a.dataPath),a.timeout(50).then(()=>{Neo.main.addon.AmCharts.create(i).then(a.onChartMounted)}))}beforeSetChartConfig(e,t){return e||console.error("wrapper.AmChart defined without a chartConfig",this.id),this.parseItemConfigs(e),e}destroy(...e){let{appName:t,id:a,windowId:r}=this;Neo.main.addon.AmCharts.destroy({appName:t,id:a,windowId:r}),super.destroy(...e)}getVdomRoot(){return this.vdom.cn[0].cn[0]}getVnodeRoot(){return this.vnode.childNodes[0].childNodes[0]}onChartMounted(){}})},58918:(e,t,a)=>{a.d(t,{A:()=>i});var r=a(70286),o=a(37478),l=a(59651);const i=Neo.setupClass(class extends o.A{static labelPositions=["left","top"];static config={className:"Neo.form.field.CheckBox",ntype:"checkboxfield",baseCls:["neo-checkboxfield"],checked_:!1,error_:null,errorPositionAbsolute_:!1,errorTextGroupRequired:e=>`Please check at least one item of the group: ${e.name}`,errorTextRequired:"Required",groupRequired_:!1,hideLabel_:!1,iconCls:["far","fa-square"],iconClsChecked:["fas","fa-check"],inputType_:"checkbox",labelBaseCls:["neo-checkbox-label"],labelCls_:[],labelId_:null,labelIdCls_:[],labelIdSeparator_:" · ",labelPosition_:"left",labelText_:"LabelText",labelWidth_:150,required_:!1,showErrorTexts_:!0,uncheckedValue:!1,useAlertState_:!1,value:!0,valueLabelText_:null,_vdom:{cn:[{tag:"label",cls:["neo-checkbox-label"],cn:[{tag:"span",cls:[]},{tag:"input",cls:["neo-checkbox-input"]},{tag:"i",cls:["neo-checkbox-icon"]},{tag:"span",cls:["neo-checkbox-value-label"]}]},{cls:["neo-error-wrapper"],removeDom:!0,cn:[{cls:["neo-error"]}]}]}};clean=!0;construct(e){super.construct(e);let t=this;t.addDomListeners({change:t.onInputValueChange,scope:t})}afterSetChecked(e,t){let a=this,r=a.vdom.cn[0],o=r.cn[2].cls,i=e?a.iconClsChecked:a.iconCls,s=e?a.iconCls:a.iconClsChecked;t&&(a.clean=!1),a.validate(),r.cn[1].checked=e,l.A.removeAdd(o,s,i),a.update(),void 0!==t&&a.fireChangeEvent(a.getSubmitValue(),a.getOldSubmitValue())}afterSetError(e,t){this.updateError(e)}afterSetErrorPositionAbsolute(e,t){let a=this.vdom.cn[1].cn[0].cls;l.A[e?"add":"remove"](a,"neo-absolute"),this.update()}afterSetGroupRequired(e,t){void 0!==t&&this.validate(!1)}afterSetHideLabel(e,t){this.vdom.cn[0].cn[0].removeDom=e,this.update()}afterSetId(e,t){let a=this,r=a.vdom.cn[0];r.cn[0].id=a.getLabelId(),r.cn[1].id=a.getInputElId(),r.cn[2].id=a.getIconElId(),r.cn[3].id=a.getValueLabelId(),super.afterSetId(e,t)}afterSetInputType(e,t){this.changeInputElKey("type",e)}afterSetLabelCls(e,t){let a=this.vdom.cn[0].cn[0].cls;l.A.remove(a,t),l.A.add(a,e),this.update()}afterSetLabelPosition(e,t){let{cls:a}=this;l.A.remove(a,"neo-label-"+t),l.A.add(a,"neo-label-"+e),this.cls=a}afterSetLabelText(e,t){let a=this;a.labelId&&(e=`<span class="${a.labelIdCls.join(",")}">${a.labelId}</span>${a.labelIdSeparator+e}`),a.vdom.cn[0].cn[0].html=e,a.update()}afterSetLabelWidth(e,t){let a=this;a.hideLabel||(a.vdom.cn[0].cn[0].width=e,a.update())}afterSetRequired(e,t){void 0!==t&&this.validate(!1)}afterSetShowErrorTexts(e,t){void 0!==t&&this.validate(!1)}afterSetUseAlertState(e,t){let{cls:a}=this;l.A.toggle(a,"neo-use-alert-state",e),this.cls=a}afterSetValue(e,t){this.changeInputElKey("value",e)}afterSetValueLabelText(e,t){let a=this.vdom.cn[0].cn[3],r=!!e;r&&(a.html=e),a.removeDom=!r,this.update()}beforeSetGroupRequired(e,t){return e&&this.required?(console.warn("Do not use groupRequired & required at the same time. Switching to required.",this),!1):e}beforeSetLabelCls(e,t){return l.A.union(e||[],this.labelBaseCls)}beforeSetLabelPosition(e,t){return this.beforeSetEnumValue(e,t,"labelPosition")}beforeSetRenderName(e,t){return!0}getGroupValue(){let e,t=this.getClosestForm(),a=this.getPath(),o=[];return a&&(e=r.A.find({path:a}),e.forEach(e=>{e.checked&&e.getClosestForm()===t&&l.A.add(o,e.value)})),o}getIconElId(){return`${this.id}__icon`}getInputEl(){return this.vdom.cn[0].cn[1]}getInputElId(){return`${this.id}__input`}getLabelId(){return`${this.id}__label`}getOldSubmitValue(){let e=this;return e.checked?e.uncheckedValue:e.value}getOldValue(){return this.getOldSubmitValue()}getSubmitValue(){let e=this;return e.checked?e.value:e.uncheckedValue}getValueLabelId(){return`${this.id}__value-label`}isEmptyAndRequired(){return!this.validate(!1)}isValid(){return this.validate(!0),!this.error&&super.isValid()}onInputValueChange(e){let t=this,a=e.target.checked;t.vnode.childNodes[0].childNodes[t.hideLabel?0:1].attributes.checked=`${a}`,t.checked=a,t.fireUserChangeEvent(t.getSubmitValue(),t.getOldSubmitValue())}updateError(e,t=!1){let a,r,o=this,{cls:i}=o,s=e&&o.showErrorTexts;o.clean&&!o.mounted||(o._error=e,l.A[e?"add":"remove"](i,"neo-invalid"),o.cls=i,r=o.vdom.cn[1],a=r.cn[0],s?a.html=e:delete a.html,r.removeDom=!s,!t&&o.update())}validate(e=!0){let t,a,o=this,{name:l}=o,i=!0;if(e||(o.clean=!1),o.groupRequired){for(t of(i=!1,a=r.A.find({ntype:o.ntype,name:l}),a))if(t.checked){i=!0;break}for(t of a)t.id!==o.id&&(o.clean||(t.clean=!1),t[o.clean?"_error":"error"]=i?null:t.errorTextGroupRequired({name:l}));i||(o._error=o.errorTextGroupRequired({name:l}))}else o.required&&!o.checked&&(o._error=o.errorTextRequired,i=!1);return i&&(o._error=null),!o.clean&&o.updateError(o._error,e),!!i&&super.validate(e)}})},79300:(e,t,a)=>{a.d(t,{A:()=>o});var r=a(16975);const o=Neo.setupClass(class extends r.A{static config={className:"Neo.selection.table.RowModel",ntype:"selection-table-rowmodel",cls:"neo-selection-rowmodel"};hasAnnotations(e){return!!Object.getOwnPropertyDescriptor(e.__proto__,this.view.selectedRecordField)}addDomListener(){let e=this;e.view.parent.on("rowClick",e.onRowClick,e)}destroy(...e){let t=this;t.view.parent.un("rowClick",t.onRowClick,t),super.destroy(...e)}onKeyDownDown(e){this.onNavKeyRow(1)}onKeyDownUp(e){this.onNavKeyRow(-1)}onNavKeyRow(e){let t,a,r,o=this,{view:l}=o,{store:i}=l,s=i.getCount(),n=0;for(o.hasSelection()&&(n=i.indexOf(l.getRecordByRowId(o.items[0]))),t=(n+e)%s;t<0;)t+=s;a=i.getAt(t),o.hasAnnotations(a)?o.updateAnnotations(a):(r=l.getRowId(a),r&&(o.select(r),l.fire("select",{record:a})))}onRowClick(e){let t,a,r=this,o=e.data.currentTarget,{view:l}=r;o&&(a=l.getRecord(o),r.hasAnnotations(a)?r.updateAnnotations(a):(r.toggleSelection(o),t=r.isSelected(o),!t&&l.onDeselect?.(a),l.fire(t?"select":"deselect",{record:a})))}register(e){super.register(e);let{id:t,view:a}=this;a.keys?._keys.push({fn:"onKeyDownDown",key:"Down",scope:t},{fn:"onKeyDownUp",key:"Up",scope:t})}unregister(){let{id:e,view:t}=this;t.keys?.removeKeys([{fn:"onKeyDownDown",key:"Down",scope:e},{fn:"onKeyDownUp",key:"Up",scope:e}]),super.unregister()}updateAnnotations(e){let t=this,{view:a}=t,r=a.getRowId(e),o=t.isSelected(r),l=a.selectedRecordField;t.singleSelect?o?e[l]=!1:(t.items.forEach(e=>{a.getRecordByRowId(e).setSilent({[l]:!1})}),e[l]=!0):e[l]=!e[l]}})},83216:(e,t,a)=>{a.r(t),a.d(t,{default:()=>x});var r=a(58918),o=a(33460),l=a(39899),i=a(35739);const s=Neo.setupClass(class extends i.A{static config={className:"SharedCovid.model.HistoricalData",fields:[{name:"active",type:"int"},{name:"cases",type:"int"},{name:"date",type:"string"},{name:"dailyActive",type:"int"},{name:"dailyCases",type:"int"},{name:"dailyDeaths",type:"int"},{name:"dailyRecovered",type:"int"},{name:"deaths",type:"int"},{name:"recovered",type:"int"}]}});var n=a(30759);const d=Neo.setupClass(class extends n.A{static config={className:"SharedCovid.store.HistoricalData",keyProperty:"date",model:s,sorters:[{property:"date",direction:"DESC"}]}});var c=a(54946);class u extends l.A{static config={className:"SharedCovid.view.country.HistoricalDataTable",baseCls:["covid-historical-data-table","neo-table-container"],columnDefaults:{cellAlign:"right",defaultSortDirection:"DESC",renderer:c.A.formatNumber},columns:[{cellAlign:"left",dataField:"date",dock:"left",text:"Date",width:100,renderer:function(e){return{cls:["neo-date-column","neo-table-cell"],html:new Intl.DateTimeFormat("default",{day:"numeric",month:"numeric",year:"numeric"}).format(new Date(e.value))}}},{dataField:"cases",text:"Cases",renderer:e=>c.A.formatNumber(e)},{dataField:"active",text:"Active",renderer:e=>c.A.formatNumber(e,"#64B5F6")},{dataField:"recovered",text:"Recovered",renderer:e=>c.A.formatNumber(e,"#28ca68")},{dataField:"deaths",text:"Deaths",renderer:e=>c.A.formatNumber(e,"#fb6767")},{dataField:"dailyCases",text:"Daily C",renderer:e=>c.A.formatNumber(e)},{dataField:"dailyActive",text:"Daily A",renderer:e=>c.A.formatNumber(e,"#64B5F6")},{dataField:"dailyRecovered",text:"Daily R",renderer:e=>c.A.formatNumber(e,"#28ca68")},{dataField:"dailyDeaths",text:"Daily D",renderer:e=>c.A.formatNumber(e,"#fb6767")}],store:d}}const h=Neo.setupClass(u);var p=a(40729);const m=Neo.setupClass(class extends p.A{static config={className:"SharedCovid.view.country.LineChartComponent",baseCls:["covid-line-chart"],chartConfig:{cursor:{maxTooltipDistance:-1},legend:{labels:{template:{fill:"#bbb"}}},xAxes:[{type:"DateAxis",renderer:{minGridDistance:60,labels:{template:{fill:"#bbb"}}}}],yAxes:[{type:"ValueAxis",logarithmic:!0,numberFormatter:{numberFormat:"#.0a",bigNumberPrefixes:[{number:1e3,suffix:"K"},{number:1e6,suffix:"M"},{number:1e9,suffix:"B"}]},renderer:{minGridDistance:60,labels:{template:{fill:"#bbb"}}}}],series:[{type:"LineSeries",dataFields:{dateX:"date",valueY:"active"},fill:"#64b5f6",name:"Active",stroke:"#64b5f6",strokeWidth:3,tooltip:{background:{fill:"#fff"},getFillFromObject:!1,label:{fill:"#000"}}},{type:"LineSeries",dataFields:{dateX:"date",valueY:"cases"},fill:"#bbb",name:"Cases",stroke:"#bbb",strokeWidth:3,tooltip:{background:{fill:"#fff"},getFillFromObject:!1,label:{fill:"#000"}}},{type:"LineSeries",dataFields:{dateX:"date",valueY:"deaths"},fill:"#fb6767",name:"Deaths",stroke:"#fb6767",strokeWidth:3,tooltip:{background:{fill:"#fff"},getFillFromObject:!1,label:{fill:"#000"}}},{type:"LineSeries",dataFields:{dateX:"date",valueY:"recovered"},fill:"#28ca68",name:"Recovered",stroke:"#28ca68",strokeWidth:3,tooltip:{background:{fill:"#fff"},getFillFromObject:!1,label:{fill:"#000"}}}]},combineSeriesTooltip:!0,fitParentHeight:!0}});var f=a(29725),b=a(51592),g=a(88828);class y extends l.A{static config={className:"SharedCovid.view.country.Table",baseCls:["covid-country-table","neo-table-container"],bind:{country:{twoWay:!0,value:e=>e.country}},columnDefaults:{cellAlign:"right",defaultSortDirection:"DESC",renderer:c.A.formatNumber},columns:[{cls:["neo-index-column","neo-table-header-button"],dataField:"index",dock:"left",minWidth:40,text:"#",renderer:c.A.indexRenderer,sortable:!1,width:40},{cellAlign:"left",dataField:"country",defaultSortDirection:"ASC",dock:"left",text:"Country",width:200,renderer:function(e){return{cls:["neo-country-column","neo-table-cell"],html:['<div style="display: flex; align-items: center">','<img style="height:20px; margin-right:10px; width:20px;" src="'+c.A.getCountryFlagUrl(e.value)+'">'+e.value,"</div>"].join("")}}},{dataField:"cases",text:"Cases"},{dataField:"casesPerOneMillion",text:"Cases / 1M"},{dataField:"infected",text:"Infected",renderer:e=>c.A.formatInfected(e)},{dataField:"active",text:"Active",renderer:e=>c.A.formatNumber(e,"#64B5F6")},{dataField:"recovered",text:"Recovered",renderer:e=>c.A.formatNumber(e,"#28ca68")},{dataField:"critical",text:"Critical",renderer:e=>c.A.formatNumber(e,"orange")},{dataField:"deaths",text:"Deaths",renderer:e=>c.A.formatNumber(e,"#fb6767")},{dataField:"todayCases",text:"Cases today"},{dataField:"todayDeaths",text:"Deaths today",renderer:e=>c.A.formatNumber(e,"#fb6767")},{dataField:"tests",text:"Tests"},{dataField:"testsPerOneMillion",text:"Tests / 1M"}],country_:null,store:g.A};afterSetCountry(e,t){if(void 0!==t){let t,a=this,{view:r}=a,{selectionModel:o}=r;e?(t=`${a.view.id}__tr__${e}`,o.isSelected(t)||(o.select(t),a.mounted&&Neo.main.DomAccess.scrollToTableRow({id:t}))):o.deselectAll()}}onDeselect(e){this.country=null}onSelect(e){let t=this,a=e[0]||null;t.store.getCount()>0&&(a&&(a=t.view.getRecordByRowId(a)?.country),a&&(t.country=a))}}const C=Neo.setupClass(y);var v=a(10419),w=a(59651);class S extends v.A{static config={className:"SharedCovid.view.TableContainerController",apiBaseUrl:"https://disease.sh/",apiFallbackBaseUrl:"https://raw.githubusercontent.com/neomjs/pages/main/resources_pub/data/",apiFallbackHistoricalDataEndpoint:"cvid_static/historical/",apiHistoricalDataEndpoint:"v3/covid-19/historical/",apiHistoricalDataTimeRange:"all",removeEmptyRecords:!0,selectedRecord:null,table_:null};addStoreItems(e){let t,a=this,r=[],o={},l=e?.timeline;e&&!e.timeline&&(l=e),l&&(Object.entries(l.cases||{}).forEach(([e,t])=>{"undefined"!==e&&(o[e]={date:new Date(e).toISOString(),cases:t})}),Object.entries(l.deaths||{}).forEach(([e,t])=>{"undefined"!==e&&(o.hasOwnProperty(e)?o[e].deaths=t:o[e]={date:new Date(e).toISOString(),deaths:t})}),Object.entries(l.recovered||{}).forEach(([e,t])=>{"undefined"!==e&&(o.hasOwnProperty(e)?o[e].recovered=t:o[e]={date:new Date(e).toISOString(),recovered:t})}),Object.values(o).forEach(e=>{e.active=e.cases-e.deaths-e.recovered,r.push(e)}),a.removeEmptyRecords&&[...r].forEach(e=>{0===e.cases&&w.A.remove(r,e)}),r[0]&&Object.assign(r[0],{dailyActive:r[0].active,dailyCases:r[0].cases,dailyDeaths:r[0].deaths,dailyRecovered:r[0].recovered}),r.forEach((e,a)=>{t=r[a+1],t&&Object.assign(t,{dailyActive:t.active-e.active,dailyCases:t.cases-e.cases,dailyDeaths:t.deaths-e.deaths,dailyRecovered:t.recovered-e.recovered})}),a.getReference("historical-data-table").store.data=r,a.updateLineChart(r))}static assignFieldsOrNull(e){return{active:e.active||null,cases:e.cases||null,deaths:e.deaths||null,dailyActive:e.dailyActive||null,dailyCases:e.dailyCases||null,dailyDeaths:e.dailyDeaths||null,dailyRecovered:e.dailyRecovered||null,recovered:e.recovered>0?e.recovered:null}}beforeGetTable(e){return e||(this._table=e=this.getReference("table")),e}loadHistoricalData(e){let t=this,{useFallbackApi:a}=Neo.config,r=a?t.apiFallbackBaseUrl+t.apiFallbackHistoricalDataEndpoint:t.apiBaseUrl+t.apiHistoricalDataEndpoint;r+=a?e+".json":e+"?lastdays="+t.apiHistoricalDataTimeRange,fetch(r).then(e=>e.json()).catch(e=>console.log("Can’t access "+r,e)).then(e=>t.addStoreItems(e))}on520pxButtonClick(e){this.getReference("controls-panel").width=520}on800pxButtonClick(e){this.getReference("controls-panel").width=800}onCollapseButtonClick(e){let t=this.getReference("controls-panel"),a=40===t.width;t.width=a?this.component.historyPanelWidth:40,e.component.text=a?"X":"+"}onCountryChange(e){let t=this;t.selectedRecord=e?{...e}:null,t.loadHistoricalData(e?.countryInfo?.iso2||"all"),t.getReference("historical-data-label").html="Historical Data ("+(e?.country||"World")+")"}onDailyValuesChange(e){let t=this.getReference("line-chart").id,a=this.getReference("logarithmic-scale-checkbox"),r=e.value;r?a.set({checked:!1,disabled:e.value}):a.disabled=!1,Neo.main.addon.AmCharts.setProperties({appName:a.appName,id:t,properties:{"series.values.0.dataFields.valueY":r?"dailyActive":"active","series.values.1.dataFields.valueY":r?"dailyCases":"cases","series.values.2.dataFields.valueY":r?"dailyDeaths":"deaths","series.values.3.dataFields.valueY":r?"dailyRecovered":"recovered"}}),Neo.main.addon.AmCharts.callMethod({appName:a.appName,id:t,path:"invalidateData"})}onLogarithmicScaleChange(e){let t=this.getReference("line-chart");Neo.main.addon.AmCharts.setProperty({appName:t.appName,id:t.id,path:"yAxes.values.0.logarithmic",value:e.value})}storeReferences(){this.getReference("line-chart"),this.getReference("logarithmic-scale-checkbox")}updateLineChart(e){let t=this,a=t.selectedRecord,r=t.getReference("line-chart");e.forEach(e=>Object.assign(e,S.assignFieldsOrNull(e))),a||(a=t.getParent().summaryData),a&&e.push({date:(new Date).toISOString(),...S.assignFieldsOrNull(a)}),r.chartData=e}}const A=Neo.setupClass(S),x=Neo.setupClass(class extends o.A{static config={className:"SharedCovid.view.TableContainer",bind:{countryRecord:e=>e.countryRecord},controller:A,countryRecord_:null,historyPanelWidth:520,table:null,tableConfig:null,layout:{ntype:"hbox",align:"stretch"},items:[{ntype:"container",flex:1,layout:"fit",items:[]},{module:f.A,cls:["neo-configuration-panel","neo-panel","neo-container"],layout:{ntype:"vbox",align:"stretch"},reference:"controls-panel",style:{backgroundColor:"#2b2b2b"},width:"@config:historyPanelWidth",containerConfig:{flex:null,style:{overflowY:"scroll"}},headers:[{dock:"top",reference:"controls-panel-header",items:[{ntype:"button",handler:"onCollapseButtonClick",text:"X"},{ntype:"label",reference:"historical-data-label",text:"Historical Data"},"->",{ntype:"button",handler:"on520pxButtonClick",height:24,text:"520px"},{ntype:"button",handler:"on800pxButtonClick",height:24,text:"800px"},{ntype:"button",handler:"onWindowChartMaximizeButtonClick",iconCls:"far fa-window-maximize"}]}],items:[{module:b.A,style:{marginTop:"10px"},items:[{ntype:"container",layout:{ntype:"vbox",align:"stretch"},items:[{ntype:"toolbar",flex:"0 1 auto",items:[{module:r.A,checked:!0,labelText:"Logarithmic Scale",labelWidth:135,reference:"logarithmic-scale-checkbox",listeners:{change:"onLogarithmicScaleChange"}},{module:r.A,labelText:"Daily Values",style:{marginLeft:"30px"},labelWidth:95,listeners:{change:"onDailyValuesChange"}}]},{module:m,flex:1,reference:"line-chart"}],header:{iconCls:"fa fa-chart-line",text:"Chart"}}]}]}]};construct(e){super.construct(e);const t=this;t.historicalDataTable=Neo.create({module:h,appName:t.appName,parentId:t.id,reference:"historical-data-table",windowId:t.windowId,header:{iconCls:"fa fa-table",text:"Table"},...t.historicalDataTableConfig}),t.items[1].items[0].items.push(t.historicalDataTable),t.table=Neo.create({module:C,appName:t.appName,parentId:t.id,reference:"table",windowId:t.windowId,...t.tableConfig}),t.items[0].items.push(t.table)}afterSetCountryRecord(e,t){let a=this;a.timeout(a.isConstructed?0:50).then(()=>{a.controller.onCountryChange(e)})}storeReferences(){this.controller.storeReferences()}})}}]);