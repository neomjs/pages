"use strict";(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[1192,2450],{1192(e,o,n){n.r(o),n.d(o,{onStart:()=>s});var t=n(1184),a=n(7863),d=n(5367);class i extends d.A{static config={className:"Neo.examples.dashboard.MainContainer",layout:{ntype:"fit"},style:{padding:"10px"},items:[{module:a.A,itemDefaults:{module:t.A},items:[{style:{backgroundColor:"blue"}},{style:{backgroundColor:"darkgreen"}},{style:{backgroundColor:"red"}},{style:{backgroundColor:"darkblue"}},{style:{backgroundColor:"orange"}}]}]}}const r=Neo.setupClass(i),s=()=>Neo.app({mainView:r,name:"Neo.examples.dashboard"})},2450(e,o,n){n.d(o,{A:()=>i});var t=n(1184),a=n(6282);class d extends t.A{static config={className:"Neo.draggable.DragProxyContainer",ntype:"dragproxycontainer",autoInitVnode:!0,autoMount:!0,baseCls:["neo-dragproxy"],layout:"fit",moveInMainThread:!0};afterSetMounted(e,o){if(super.afterSetMounted(e,o),e&&this.moveInMainThread){let{appName:e,id:o,windowId:n}=this;Neo.main.addon.DragDrop.setDragProxyElement({appName:e,id:o,windowId:n})}}afterSetWindowId(e,o){super.afterSetWindowId(e,o),e&&Neo.currentWorker.insertThemeFiles(e,a.A.prototype)}destroy(...e){this.items=[],super.destroy(...e)}}const i=Neo.setupClass(d)},5367(e,o,n){n.d(o,{A:()=>d});var t=n(1184);class a extends t.A{static config={className:"Neo.container.Viewport",ntype:"viewport",applyBodyCls:!0,autoMount:!0,baseCls:["neo-viewport"],monitorSize_:!1};afterSetMounted(e,o){super.afterSetMounted(e,o);let n=this;e&&n.monitorSize&&n.addDomListeners([{resize:n.onDomResize,scope:n}])}onConstructed(){super.onConstructed();let{windowId:e}=this;this.applyBodyCls&&Neo.main.DomAccess.applyBodyCls({cls:["neo-body-viewport"],windowId:e})}onDomResize(e){this.fire("resize",e)}}const d=Neo.setupClass(a)},6282(e,o,n){n.d(o,{A:()=>d});var t=n(1741);class a extends t.A{static config={className:"Neo.draggable.DragProxyComponent",ntype:"dragproxy",autoInitVnode:!0,autoMount:!0,baseCls:["neo-dragproxy"],moveInMainThread:!0};afterSetMounted(e,o){if(super.afterSetMounted(e,o),e&&this.moveInMainThread){let{appName:e,id:o,windowId:n}=this;Neo.main.addon.DragDrop.setDragProxyElement({appName:e,id:o,windowId:n})}}}const d=Neo.setupClass(a)},7863(e,o,n){n.d(o,{A:()=>i});var t=n(1184),a=n(2450);class d extends t.A{static config={className:"Neo.dashboard.Container",ntype:"dashboard",baseCls:["neo-dashboard","neo-container"],detachedItems:new Map,detachToNewWindow:!0,dragProxyExtraCls:[],dragResortable:!0,popupConfig:null,popupUrl:null,sortGroup:null};#e=!1;#o=!1;construct(e){super.construct(e);let o=this;o.detachedItems=new Map,Neo.currentWorker.on({connect:o.onWindowConnect,disconnect:o.onWindowDisconnect,scope:o})}createSortZone(e){let o=this;Neo.merge(e,{allowOverdrag:!0,dragProxyConfig:{module:a.A,...o.dragProxyConfig},dragProxyExtraCls:o.dragProxyExtraCls,enableProxyToPopup:o.detachToNewWindow,listeners:{dragBoundaryEntry:e=>o.onDragBoundaryEntry(e),dragBoundaryExit:e=>o.onDragBoundaryExit(e),dragEnd:e=>o.fire("dragEnd",e)},sortGroup:o.sortGroup}),super.createSortZone(e)}getPopupUrl(e){let o=e.popupUrl||this.popupUrl;return Neo.isFunction(o)?o(e):o}loadSortZoneModule(){return Promise.all([n.e(9380),n.e(9555)]).then(n.bind(n,9555))}async onDragBoundaryEntry(e){let o=this,{windowId:n}=o,{sortZone:t}=e,a=e.draggedItem,d=a.reference||a.id;o.#e=!0,console.log("onDragBoundaryEntry",o.id,a),t.dragProxy.add(a,!0),o.detachedItems.delete(d),await Neo.Main.windowClose({names:d,windowId:n}),o.#e=!1,o.#o=!1,t.isWindowDragging=!1,t.dragProxy.style={opacity:1},Neo.main.addon.DragDrop.setConfigs({isWindowDragging:!1,windowId:n}),o.fire("dragBoundaryEntry",e)}async onDragBoundaryExit(e){let o,n=this,{draggedItem:t,proxyRect:a,sortZone:d}=e;n.#o=!0,a.height+=50,o=await n.openWidgetInPopup(t,a),d.startWindowDrag({dragData:e,...o}),n.fire("dragBoundaryExit",e)}async openWidgetInPopup(e,o){let n=this,{windowId:t}=n,{windowConfigs:a}=Neo,d=Object.keys(a)[0],{basePath:i}=a[d],r=e.reference||e.id,s=n.getPopupUrl(e);if(!s)return void console.error("No popupUrl defined for dashboard item",e);s.startsWith("http")||(s=i+s),s+=`${s.includes("?")?"&":"?"}name=${r}&dashboardId=${n.id}`;let g=await Neo.Main.getWindowData({windowId:t}),{height:p,width:w,x:l,y:u}=o,c=p-50,h=l+g.screenLeft,m=u+(g.outerHeight-g.innerHeight+g.screenTop),y=r;return n.detachedItems.set(r,{index:n.items.indexOf(e),widget:e}),await Neo.Main.windowOpen({url:s,windowId:t,windowFeatures:`height=${c},left=${h},top=${m},width=${w}`,windowName:y}),{popupHeight:c,popupLeft:h,popupTop:m,popupWidth:w,windowName:y}}async onWindowConnect(e){let o=this,n=Neo.apps[e.windowId].mainView,{windowId:t}=e,a=await Neo.Main.getByPath({path:"document.URL",windowId:t}),d=new URL(a).searchParams,i=d.get("dashboardId"),r=d.get("name");if(i===o.id){let e=o.detachedItems.get(r);e&&(e.windowId=t,e.widget.wrapperStyle={},n.add(e.widget,!1,!o.#o))}}async onWindowDisconnect(e){let o=this;if(o.#o||o.#e)return void(o.#o=!1);let{windowId:n}=e;for(const[e,t]of o.detachedItems.entries())if(t.windowId===n){console.log("onWindowDisconnect: Re-integrating widget",o.id,e);let{index:n,widget:a}=t;o.insert(n,a),o.detachedItems.delete(e);break}}async resumeWindowDrag(e,o){let n,t=this,a=t.detachedItems.get(e);a&&(t.#o=!0,n=await t.openWidgetInPopup(a.widget,o),Neo.main.addon.DragDrop.startWindowDrag({popupHeight:n.popupHeight,popupName:n.windowName,popupWidth:n.popupWidth,windowId:t.windowId}))}async suspendWindowDrag(e){let o=this;o.#o=!0;let n=o.detachedItems.get(e);console.log("suspendWindowDrag",o.id,e,n),n?.widget&&(n.widget.parentId=null),await Neo.Main.windowClose({names:[e],windowId:o.windowId}),Neo.main.addon.DragDrop.setConfigs({isWindowDragging:!1,windowId:o.windowId})}}const i=Neo.setupClass(d)}}]);