"use strict";(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[6430],{3607:(e,t,n)=>{n.d(t,{A:()=>l});var s=n(8202);class o extends s.A{static config={className:"Neo.menu.Model",keyProperty:"id",fields:[{name:"cls",type:"Array"},{name:"handler",type:"Function"},{name:"hidden",type:"Boolean"},{name:"iconCls",type:"String"},{name:"id",type:"Integer"},{name:"items",type:"Array"},{name:"route",type:"String"},{name:"text",type:"String"}]}}const u=Neo.setupClass(o);var i=n(1374);class a extends i.A{static config={className:"Neo.menu.Store",model:u}}const l=Neo.setupClass(a)},6430:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});var s=n(5156),o=n(944);class u extends o.A{static config={className:"Neo.selection.menu.ListModel",ntype:"selection-menu-listmodel"};onKeyDownEscape(e){this.view.onKeyDownEscape(e)}onKeyDownLeft(e){let{view:t}=this,{parentMenu:n}=t;n&&(t.hideSubMenu(),t.selectionModel.deselectAll(),n.selectionModel.selectAt(t.parentIndex))}onKeyDownRight(e){this.view.activeSubMenu?.selectionModel.selectAt(0)}}const i=Neo.setupClass(u);var a=n(3607);class l extends s.A{static config={className:"Neo.menu.List",ntype:"menu-list",activeSubMenu:null,baseCls:["neo-menu-list","neo-list"],focusTimeoutId:null,hideOnLeafItemClick:!0,items_:null,menuFocus_:!1,isRoot:!0,parentIndex:0,parentMenu:null,selectionModel:i,store:a.A,subMenuGap:0,subMenuMap:null,zIndex_:100,_vdom:{tag:"ul",cn:[]}};parentComponent=null;afterSetItems(e,t){let{store:n}=this;t&&n.clear(),e&&n.add(e)}afterSetMenuFocus(e,t){if(void 0!==t){let t=this;t.isRoot?e?(clearTimeout(t.focusTimeoutId),t.focusTimeoutId=null):t.focusTimeoutId=setTimeout(()=>{t[t.floating?"unmount":"hideSubMenu"]()},20):t.parentMenu.menuFocus=e}}afterSetTheme(e,t){super.afterSetTheme(e,t),Object.values(this.subMenuMap||{}).forEach(t=>{t.theme=e})}afterSetZIndex(e,t){this.style={...this.style,zIndex:e}}createItemContent(e,t){let n=this,{iconCls:s}=e,o=e[n.store.keyProperty],u=[{tag:"span",cls:["neo-content"],text:e[n.displayField]}];return s&&""!==s&&u.unshift({tag:"i",cls:["neo-menu-icon","neo-icon",s],id:n.getIconId(o)}),n.hasChildren(e)&&u.push({tag:"i",cls:["neo-arrow-icon","neo-icon","fas fa-chevron-right"],id:n.getArrowIconId(o)}),u}destroy(...e){let{activeSubMenu:t}=this,n=this.subMenuMap||{};t?.unmount(),Object.entries(n).forEach(([e,t])=>{t.destroy(),n[e]=null}),super.destroy(...e)}getArrowIconId(e){return`${this.id}__arrow_icon__${e}`}getIconId(e){return`${this.id}__icon__${e}`}getMenuMapId(e){return`menu__${e}`}hasChildren(e){return Array.isArray(e.items)&&e.items.length>0}hideSubMenu(){let{activeSubMenu:e}=this;e&&(e.unmount(),this.activeSubMenu=null)}onFocusEnter(e){super.onFocusEnter(e),this.menuFocus=!0}onFocusLeave(e){super.onFocusLeave(e);let t,n=!1,s=this.parentComponent?.id;if(s)for(t of e.oldPath)if(t.id===s){n=!0;break}n||(this.menuFocus=!1)}onItemClick(e,t){super.onItemClick(e,t),this.onKeyDownEnter(e.id)}onKeyDownEnter(e){if(e){let t,n=this,s=n.getItemRecordId(e),o=n.store.get(s);n.callback(o.handler,n,[o]),o.route&&Neo.Main.setRoute({appName:n.appName,value:o.route}),n.hideOnLeafItemClick&&!o.items&&n.unmount(),o.items&&(t=n.subMenuMap?.[n.getMenuMapId(s)],t&&n.toggleSubMenu(e,o))}}onKeyDownEscape(e){this.floating&&this.unmount()}onSelect(e){let t=this,n=e[0],s=t.getItemRecordId(n),o=t.store.get(s);t.activeSubMenu!==t.subMenuMap?.[t.getMenuMapId(s)]&&(t.hideSubMenu(),t.hasChildren(o)&&t.showSubMenu(n,o))}showSubMenu(e,t){const n=this,{store:s}=n,o=t[s.keyProperty],u=n.subMenuMap||(n.subMenuMap={}),i=n.getMenuMapId(o),a=u[i]||(u[i]=Neo.create({module:l,align:{target:e,edgeAlign:"l0-r0",axisLock:!0,targetMargin:n.subMenuGap},appName:n.appName,displayField:n.displayField,floating:!0,items:t.items,isRoot:!1,parentComponent:n.parentComponent,parentId:Neo.apps[n.appName].mainView.id,parentIndex:s.indexOf(t),parentMenu:n,theme:n.theme,zIndex:n.zIndex+1}));n.activeSubMenu!==a&&(n.activeSubMenu=a,a.render(!0))}toggleSubMenu(e,t){let n=this,s=t[n.getKeyProperty()],o=n.subMenuMap?.[n.getMenuMapId(s)];o?.mounted?n.hideSubMenu():n.showSubMenu(e,t)}unmount(){this.selectionModel?.deselectAll(!0),this.hideSubMenu(),super.unmount()}}const r=Neo.setupClass(l)}}]);