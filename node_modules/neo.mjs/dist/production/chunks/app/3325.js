"use strict";(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[3325],{3325(e,t,n){n.r(t),n.d(t,{default:()=>c});var o=n(7402),r=n(6743);class i extends o.A{static config={className:"Neo.manager.Window",isSafari:/^((?!chrome|android).)*safari/i.test(navigator.userAgent),singleton:!0};construct(e){super.construct(e);let t=this;Neo.currentWorker.on({connect:t.onWindowConnect,disconnect:t.onWindowDisconnect,scope:t})}getWindowAt(e,t){let n=this.items.find(n=>n.outerRect?.intersects({bottom:t,right:e,x:e,y:t}));return n?n.id:null}calculateGeometry(e){const{innerHeight:t,innerWidth:n,mozInnerScreenX:o,mozInnerScreenY:i,outerHeight:c,outerWidth:s,screenLeft:a,screenTop:d}=e,u=(s-n)/2,m=c-t-u,l={bottom:u,left:u,right:u,top:m};let h,w;return"number"==typeof o?(h=o,w=i):this.isSafari?(h=a+u,w=d+m):(h=a,w=d),{chrome:l,innerRect:new r.A(h,w,n,t),outerRect:new r.A(h-u,w-m,s,c)}}onWindowConnect({appName:e,windowData:t,windowId:n}){let o=null,r=null,i=null;t&&({chrome:o,innerRect:r,outerRect:i}=this.calculateGeometry(t)),console.log("Window.onWindowConnect",{windowId:n,appName:e,chrome:o,innerRect:r,outerRect:i}),this.register({appName:e,chrome:o,id:n,innerRect:r,outerRect:i})}onWindowDisconnect({windowId:e}){this.unregister(e)}onWindowPositionChange(e){const t=this,n=t.get(e.windowId),{chrome:o,innerRect:r,outerRect:i}=t.calculateGeometry(e);n?(n.chrome=o,n.innerRect=r,n.outerRect=i):t.register({chrome:o,id:e.windowId,innerRect:r,outerRect:i})}toJSON(){return{className:this.className,windows:this.items.map(e=>({id:e.id,appName:e.appName,chrome:e.chrome,innerRect:e.innerRect,outerRect:e.outerRect}))}}}const c=Neo.setupClass(i)}}]);