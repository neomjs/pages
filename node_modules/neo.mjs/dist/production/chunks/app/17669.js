(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[4957,5374,5387,6386,6803,6816,11577,15850,15863,16862,17669,22053,27338,27755,27768,29184,33958,38231,38244,39243,44434,49719,50136,56339,60612,60625,61624,66815,71101,72100,76794,77291,78720,82993,83006,84005,84435,89196,93469,93482,94481,99672],{5387:e=>{function t(e){return Promise.resolve().then(()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}t.keys=()=>[],t.resolve=t,t.id=5387,e.exports=t},30759:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var o=a(50319),r=a(53403),n=a(35739),s=(a(89408),a(35975));const i=Neo.setupClass(class extends o.A{static observable=!0;static config={className:"Neo.data.Store",ntype:"store",api_:null,autoLoad:!1,currentPage_:1,data_:null,initialData_:null,isGrouped:!1,isLoaded:!1,isLoading:!1,model_:null,pageSize_:0,remoteFilter:!1,remoteSort:!1,responseRoot:"data",totalCount:0,url:null};construct(e){super.construct(e);let t=this;t.on({mutate:t.onCollectionMutate,sort:t.onCollectionSort,scope:t})}add(e){return super.add(this.createRecord(e))}afterSetCurrentPage(e,t){t&&this.load()}afterSetData(e,t){let a=this;a.configsApplied&&e&&(t?a.clear():a.initialData=[...e],a.isLoading=!1,a.add(e))}afterSetFilters(e,t){super.afterSetFilters(e,t);let a=this;a._currentPage=1,t&&a.remoteFilter&&a.load()}afterSetInitialData(e,t){}afterSetModel(e,t){e&&(e.storeId=this.id)}afterSetPageSize(e,t){t&&(this._currentPage=1,this.load())}afterSetSorters(e,t){super.afterSetSorters(e,t);let a=this;a._currentPage=1,t&&a.remoteSort&&a.load()}beforeSetApi(e,t){return"String"===Neo.typeOf(e)&&(e={create:e+".create",destroy:e+".destroy",read:e+".read",update:e+".update"}),e}beforeSetData(e,t){return e&&(this.isLoading=!0,e=this.createRecord(e)),e}beforeSetInitialData(e,t){return!e&&t?t:e}beforeSetModel(e,t){return t?.destroy(),r.A.beforeSetInstance(e,n.A)}createRecord(e){let t=!0;if(e){Array.isArray(e)||(t=!1,e=[e]);let a,o=this,r=0,n=e.length;for(;r<n;r++)a=e[r],s.A.isRecord(a)||(e[r]=s.A.createRecord(o.model,a))}return t?e:e[0]}getKeyProperty(){return this.keyProperty||this.model.keyProperty}getKeyType(){let{model:e}=this,t=e?.getField(this.getKeyProperty());return t?.type?.toLowerCase()||null}async load(e={}){let t=this,a={page:t.currentPage,pageSize:t.pageSize,...e.params};if(t.remoteFilter&&(a.filters=t.exportFilters()),t.remoteSort&&(a.sorters=t.exportSorters()),t.api){let e=t.api.read.split("."),o=e.pop(),r=Neo.ns(e.join("."));if(r){const e=await r[o](a);return e.success?(t.totalCount=e.totalCount,t.data=Neo.ns(t.responseRoot,!1,e),t.data):null}console.error("Api is not defined",this)}else{e.url??=t.url;try{const a=await Neo.Xhr.promiseJson(e);return a&&(t.data=Neo.ns(t.responseRoot,!1,a.json)||a.json),a?.json||null}catch(a){return console.error("Error for Neo.Xhr.request",{id:t.id,error:a,url:e.url}),null}}}onCollectionMutate(e){let t=this;t.isConstructed&&!t.isLoading&&t.fire("load",t.items)}onCollectionSort(){this.isConstructed}onConstructed(){super.onConstructed();let e=this;e.data&&e.afterSetData(e.data),e.timeout(1).then(()=>{e.getCount()>0?e.fire("load",e.items):e.autoLoad&&e.load()})}onFilterChange(e){let t=this;t.remoteFilter?(t._currentPage=1,t.load()):super.onFilterChange(e)}onRecordChange(e){this.fire("recordChange",{...e,index:this.indexOf(e.record)})}sort(e={}){let t=this;t._currentPage=1,t.configsApplied&&(e.direction?t.sorters=[{direction:e.direction,property:e.property}]:(t.remoteSort||(t.startUpdate(),t.clear()),t.sorters=[],t.remoteSort||(t.add([...t.initialData]),t.endUpdate(),t.fire("sort"))))}})},33529:(e,t,a)=>{"use strict";a.r(t),a.d(t,{onStart:()=>l});var o=a(69303),r=a(55547),n=a(76794);class s extends r.A{static config={className:"Neo.examples.calendar.weekview.MainContainer",layout:{ntype:"fit"},stateProvider:{module:o.A,data:{currentDate:new Date("2024-07-21")}},calendarStoreConfig_:{autoLoad:!0,url:"../../examples/calendar/basic/data/calendars.json"},eventStoreConfig_:{autoLoad:!0,url:"../../examples/calendar/basic/data/events.json"},items:[{module:n.default}]};construct(e){super.construct(e),Neo.worker.App.insertThemeFiles(this.appName,null,"Neo.calendar.view.MainContainer")}}const i=Neo.setupClass(s),l=()=>Neo.app({mainView:i,name:"Neo.examples.calendar.weekview"})},35739:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var o=a(67024),r=a(35975);const n=Neo.setupClass(class extends o.A{static config={className:"Neo.data.Model",ntype:"model",fields_:null,keyProperty_:"id",storeId:null,trackModifiedFields:!1};calculatedFieldsMap=new Map;fieldsMap=new Map;hasNestedFields=!1;afterSetFields(e,t){if(e){let t=this;t.updateFieldsMap(e),t.isConstructed&&r.A.createRecordClass(t,!0)}}getField(e){return this.fieldsMap.get(e)||null}getFieldType(e){return this.getField(e)?.type?.toLowerCase()||null}updateFieldsMap(e,t=!0,a=""){let o,r=this,{calculatedFieldsMap:n,fieldsMap:s}=r;t&&(n.clear(),s.clear(),r.hasNestedFields=!1),e.forEach(e=>{o=a+e.name,e.fields?(r.hasNestedFields=!0,r.updateFieldsMap(e.fields,!1,e.name+".")):(s.set(o,e),e.calculate&&n.set(o,e))})}})},35975:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var o=a(67024),r=a(35739);const n=Symbol.for("data"),s=Symbol.for("isModified"),i=Symbol.for("originalData");let l;l=Neo.setupClass(class extends o.A{static config={className:"Neo.data.RecordFactory",recordNamespace:"Neo.data.record",singleton:!0};assignDefaultValues(e,t){return t.fieldsMap.forEach((a,o)=>{Object.hasOwn(a,"defaultValue")&&(t.hasNestedFields?Neo.assignToNs(o,a.defaultValue,e,!1):void 0===e[o]&&(e[o]=a.defaultValue))}),e}createField({field:e,model:t,path:a="",proto:o}){let r,s=e.name,i=""===a?s:`${a}.${s}`;e.fields?e.fields.forEach(e=>{this.createField({field:e,model:t,path:i,proto:o})}):(r={[i]:{configurable:!0,enumerable:!0,get(){return t.hasNestedFields?Neo.ns(i,!1,this[n]):this[n][s]},set(a){l.setRecordFields({fields:{[i]:l.parseRecordValue({record:this,field:e,value:a})},model:t,record:this})}}},Object.defineProperties(o,r))}createRecord(e,t){let a=Neo.ns(`${this.recordNamespace}.${e.className}.${e.id}`);return a||(a=this.createRecordClass(e)),new a(t)}createRecordClass(e,t=!1){if(e instanceof r.A){let a,o,r,d=`${this.recordNamespace}.${e.className}.${e.id}`,c=Neo.ns(d);return!c||t?(o=d.split("."),a=o.pop(),c=Neo.ns(o,!0),r=c[a]=class{static name="Record";[n]={};get isModified(){let t=this;return e.trackModifiedFields?!Neo.isEqual(t[n],t[i]):t[s]}constructor(t){let a=this;t=l.assignDefaultValues(t,e),e.trackModifiedFields?(a[i]={},a.setOriginal(t)):a[s]=!1,a.setSilent(t)}isModifiedField(t){let a=this;if(e.trackModifiedFields){let o,r;if(e.hasNestedFields&&t?.includes(".")){let e=t.split(".");t=e.pop(),o=Neo.ns(e,!1,a[n]),r=Neo.ns(e,!1,a[i])}else o=a[n],r=a[i];return e.getField(t)||Object.hasOwn(o,t)||console.error("The record does not contain the field",t,a),!Neo.isEqual(o[t],r[t])}return null}reset(e){this.setOriginal(e),this.set(e)}set(t){l.setRecordFields({fields:t,model:e,record:this})}setOriginal(t){l.setRecordFields({fields:t,model:e,record:this,silent:!0,useOriginalData:!0})}setSilent(t){l.setRecordFields({fields:t,model:e,record:this,silent:!0})}toJSON(){return structuredClone(this[n])}},Array.isArray(e.fields)&&e.fields.forEach(t=>{l.createField({field:t,model:e,proto:r.prototype})}),Object.defineProperty(r.prototype,"isRecord",{value:!0}),Object.defineProperty(r,"isClass",{value:!0}),c[a]):c}}isRecord(e){return e?.isRecord||!1}onRecordChange(e){Neo.get(e.model.storeId)?.onRecordChange(e)}parseRecordValue({record:e,field:t,value:a=null,recordConfig:o=null,useOriginalData:r=!1}){if(t.calculate)return t.calculate(e[r?i:n],t);t.convert&&(a=t.convert(a));let s=t.name,{mapping:l,maxLength:d,minLength:c,nullable:u}=t,m=o?.[s]||e[s],h=t.type?.toLowerCase();if(l&&o){let e=l.split("."),t=e.pop();e=Neo.ns(e,!0,o),a=e[t]}return Object.hasOwn(t,"maxLength")&&a?.toString().length>d?(console.warn(`Setting record field: ${s} value: ${a} conflicts with maxLength: ${d}`),m):Object.hasOwn(t,"minLength")&&a?.toString().length<c?(console.warn(`Setting record field: ${s} value: ${a} conflicts with minLength: ${c}`),m):Object.hasOwn(t,"nullable")&&!1===u&&null===a?(console.warn(`Setting record field: ${s} value: ${a} conflicts with nullable: ${u}`),m):"date"===h&&"Date"!==Neo.typeOf(a)?new Date(a):("float"===h&&a?a=parseFloat(a):"html"===h&&a?a+="":"int"!==h&&"integer"!==h||!a?"string"===h&&a&&(a=(a+="").replace(/(<([^>]+)>)/gi,"")):a=parseInt(a),a)}setRecordData({fieldName:e,model:t,record:a,useOriginalData:o=!1,value:r}){if(o&&!t.trackModifiedFields)return;let s=o?i:n;if(t.hasNestedFields&&e.includes(".")){let t,o;o=e.split("."),e=o.pop(),t=Neo.ns(o,!0,a[s]),t[e]=r}else a[s][e]=r}setRecordFields({changedFields:e=[],fields:t,model:a,record:o,silent:r=!1,useOriginalData:n=!1}){let i,l,d,c=this,{calculatedFieldsMap:u,fieldsMap:m,trackModifiedFields:h}=a;!h&&n||(Object.entries(t).forEach(([t,r])=>{i=m.has(t),Neo.isObject(r)&&!i?Object.entries(r).forEach(([r,s])=>{c.setRecordFields({changedFields:e,fields:{[`${t}.${r}`]:s},model:a,record:o,silent:!0,useOriginalData:n})}):i&&(d=o[t],r=c.parseRecordValue({record:o,field:a.getField(t),value:r}),Neo.isEqual(d,r)||(c.setRecordData({fieldName:t,model:a,record:o,useOriginalData:n,value:r}),h||n||(o[s]=!0),e.push({name:t,oldValue:d,value:r})))}),l=Object.keys(e).length>0,l&&u.forEach((t,r)=>{d=o[r],t=c.parseRecordValue({record:o,field:a.getField(r),useOriginalData:n}),Neo.isEqual(d,t)||(c.setRecordData({fieldName:r,model:a,record:o,useOriginalData:n,value:t}),e.push({name:r,oldValue:d,value:t}))}),r||n||!l||c.onRecordChange({fields:e,model:a,record:o}))}});const d=l},76794:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>h});var o=a(31485),r=a(73112),n=a(59651);const s=Neo.setupClass(class extends o.A{static intervals=[15,30,60];static config={className:"Neo.calendar.view.week.TimeAxisComponent",baseCls:["neo-calendar-timeaxis"],bind:{endTime:e=>e.endTime,startTime:e=>e.startTime},endTime_:"24:00",interval_:30,rowHeight_:20,startTime_:"00:00",vdom:{style:{}}};construct(e){super.construct(e);let t=this;t.createItems(),t.afterSetRowHeight(t.rowHeight,0)}afterSetEndTime(e,t){if(void 0!==t){let t=this;e||(t._endTime="24:00"),t.afterSetRowHeight(t.rowHeight,0)}}afterSetInterval(e,t){void 0!==t&&this.afterSetRowHeight(this.rowHeight,0)}afterSetRowHeight(e,t){if(void 0!==t&&this.vdom.cn){let e,t,a=this,o=a.getTime(a.endTime),r=a.getTime(a.startTime),{rowHeight:n,vdom:s}=a,i=a.getRowsPerItem(),l=i*n+i,d=n+(o-r)*l;for(Object.assign(s.style,{backgroundImage:`linear-gradient(var(--c-w-background-color) ${l-1}px, var(--c-w-border-color) 1px)`,backgroundPositionY:1-l+"px",backgroundSize:`0.4em ${l}px`,height:d-n+1+"px",maxHeight:d-n+1+"px"}),e=0;e<25;e++)t={height:`${l}px`},e===r?t.marginTop=-2-n*(1===i?.5:2===i?1:2)+"px":delete t.marginTop,s.cn[e].style=t,s.cn[e].removeDom=e<r||e-1>=o;a.fire("change",{component:a,rowHeight:n,rowsPerItem:i,totalHeight:d})}}afterSetStartTime(e,t){void 0!==t&&this.afterSetRowHeight(this.rowHeight,0)}beforeSetInterval(e,t){return this.beforeSetEnumValue(e,t,"interval")}createItems(){let e,t,{vdom:a}=this;for(a.cn=[],t=0;t<25;t++)e=24===t?"00:00":(t<10?"0":"")+t+":00",a.cn.push({cls:["neo-c-w-timeaxis-item"],cn:[{html:e}]})}getRowsPerItem(){let{interval:e}=this;return 60===e?1:30===e?2:4}getTime(e){return e.split(":").map(Number)[0]}});var i=a(33610);const l=new Date,d=l.getDate(),c=l.getMonth(),u=l.getFullYear();class m extends o.A{static timeAxisPositions=["end","start"];static config={className:"Neo.calendar.view.week.Component",baseCls:["neo-calendar-weekcomponent"],bind:{calendarStore:"stores.calendars",currentDate:e=>e.currentDate,enableDrag:e=>e.events.enableDrag,endTime:e=>e.endTime,eventBorder:e=>e.events.border,eventStore:"stores.events",intlFormat_time:e=>e.intlFormat_time,locale:e=>e.locale,minimumEventDuration:e=>e.minimumEventDuration,showWeekends:e=>e.showWeekends,startTime:e=>e.startTime,weekStartDay:e=>e.weekStartDay},calendarStore_:null,columnsBuffer_:7,columnsVisible_:7,currentDate_:null,dayNameFormat_:"short",enableDrag_:!0,eventBorder_:null,eventDragZone:null,eventStore_:null,firstColumnDate:null,headerCreated:!1,intlFormat_day:null,intlFormat_time_:null,isUpdating:!1,locale_:Neo.config.locale,minimumEventDuration:30,needsEventUpdate:!1,owner:null,pluginDragDropConfig:null,pluginEventResizableConfig:null,showEventEndTime_:!1,showWeekends_:!0,timeAxis:null,timeAxisConfig:null,timeAxisPosition_:"start",totalColumns:null,updateDepth:-1,vdom:{cn:[{cls:["neo-scroll-overlay"]},{cls:["neo-c-w-scrollcontainer"],flag:"neo-c-w-scrollcontainer",cn:[{cls:["neo-header-row"],flag:"neo-header-row",cn:[]},{cls:["neo-c-w-column-timeaxis-container"],flag:"neo-c-w-column-timeaxis-container",cn:[{cls:["neo-c-w-column-container"],flag:"neo-c-w-column-container",style:{},cn:[]}]}]}]},weekStartDay_:0};construct(e){super.construct(e);let t=this;t.addDomListeners([{dblclick:t.onEventDoubleClick,scope:t,delegate:".neo-event"},{wheel:t.onWheel,scope:t}]),t.timeAxis=Neo.create({module:s,appName:t.appName,parentId:t.id,listeners:{change:t.onTimeAxisChange,scope:t},windowId:t.windowId,...t.timeAxisConfig}),t.getColumnTimeAxisContainer().cn["start"===t.timeAxisPosition?"unshift":"push"](t.timeAxis.createVdomReference()),t.calendarStore.getCount()>0&&t.eventStore.getCount()>0&&(t.needsEventUpdate=!0),t.updateHeader(!0,t.needsEventUpdate),t.needsEventUpdate&&t.updateEvents(!1),t.headerCreated=!0}adjustTotalHeight(e,t=!1){let{rowHeight:a,rowsPerItem:o}=e,r=e.totalHeight-a,n=0,s=[];for(;n<o;n++)s.push(`var(--c-w-background-color) ${n*a+n}px`,`var(--c-w-background-color) ${(n+1)*a+n}px`,"var(--c-w-border-color) 0");Object.assign(this.getColumnContainer().style,{backgroundImage:`linear-gradient(${s.join(",")})`,backgroundSize:`1px ${o*a+o}px`,height:`${r}px`,maxHeight:`${r}px`}),!t&&this.update()}afterSetCalendarStore(e,t){let a=this,o={load:a.onCalendarStoreLoad,recordChange:a.onCalendarStoreRecordChange,scope:a};t?.un(o),e?.on(o)}afterSetColumnsBuffer(e,t){this.totalColumns=this.visibleColumns+2*e}afterSetColumnsVisible(e,t){this.totalColumns=2*this.columnsBuffer+e}afterSetCurrentDate(e,t){let a=this;a.isConstructed&&(a.updateHeader(!1,!0),a.updateEvents())}afterSetDayNameFormat(e,t){let a=this;a.intlFormat_day=new Intl.DateTimeFormat(a.locale,{weekday:e}),t&&a.updateHeader()}afterSetEnableDrag(e,t){e&&!this.getPlugin("calendar-week-dragdrop")&&Promise.all([a.e(31256).then(a.bind(a,31256)),a.e(59202).then(a.bind(a,59202))]).then(e=>{let t=this,{appName:a}=t,o=t.plugins||[];o.push({module:e[0].default,appName:a,...t.pluginDragDropConfig},{module:e[1].default,appName:a,delegationCls:"neo-event",directions:["b","t"],...t.pluginEventResizableConfig}),t.plugins=o})}afterSetEventBorder(e,t){let{cls:a}=this;t&&n.A.remove(a,`neo-event-border-${t}`),e&&n.A.add(a,`neo-event-border-${e}`),this.cls=a}afterSetEventStore(e,t){let a=this,o={load:a.onEventStoreLoad,recordChange:a.onEventStoreRecordChange,scope:a};t?.un(o),e?.on(o)}afterSetLocale(e,t){if(t){let t=this;t.intlFormat_day=new Intl.DateTimeFormat(e,{weekday:t.dayNameFormat}),t.updateHeader()}}async afterSetMounted(e,t){super.afterSetMounted(e,t);let a,o,r=this;e&&(r.needsEventUpdate&&(r.updateEvents(),r.needsEventUpdate=!1),await r.timeout(100),o=await r.getDomRect(r.getColumnContainer().id),a=r.getScrollContainer().id,a&&Neo.main.DomAccess.scrollBy({appName:r.appName,direction:"left",id:a,value:o.width*r.columnsBuffer/r.columnsVisible/3}))}afterSetShowEventEndTime(e,t){void 0!==t&&this.updateEvents()}afterSetShowWeekends(e,t){let a=this,{cls:o}=a;n.A[e?"add":"remove"](o,"neo-show-weekends"),a._cls=o,void 0!==t&&(a.updateHeader(!1,!0),a.updateEvents())}afterSetTimeAxisPosition(e,t){let a=this,{cls:o}=a,r=a.getColumnTimeAxisContainer();n.A["end"===e?"add":"remove"](o,"neo-timeaxis-end"),void 0!==t&&r.cn.unshift(r.cn.pop()),a.cls=o,a.update()}afterSetWeekStartDay(e,t){void 0!==t&&(this.updateHeader(!1,!0),this.updateEvents())}beforeSetDayNameFormat(e,t){return this.beforeSetEnumValue(e,t,"dayNameFormat",r.A.prototype.dayNameFormats)}beforeSetTimeAxisPosition(e,t){return this.beforeSetEnumValue(e,t,"timeAxisPosition")}beforeSetWeekStartDay(e,t){return this.beforeSetEnumValue(e,t,"weekStartDay",r.A.prototype.weekStartDays)}createColumnAndHeader(e){let t,a,o=["neo-c-w-column","neo-draggable"],n=e.getDate(),s=e.getDay(),i=["neo-date"],l=!1;return 0!==s&&6!==s||(o.push("neo-weekend"),!this.showWeekends&&(l=!0)),n===d&&e.getMonth()===c&&e.getFullYear()===u&&i.push("neo-today"),t={cls:o,flag:r.A.convertToyyyymmdd(e),removeDom:l},a={cls:["neo-header-row-item"],removeDom:l,cn:[{cls:["neo-day"],html:this.intlFormat_day.format(e)},{cls:i,html:n}]},{column:t,header:a}}destroy(...e){this.timeAxis=null,super.destroy(...e)}getColumnContainer(){return i.A.getByFlag(this.vdom,"neo-c-w-column-container")}getColumnId(e){return`${this.id}_col_${r.A.convertToyyyymmdd(e)}`}getColumnHeaderId(e){return`${this.id}_ch_${r.A.convertToyyyymmdd(e)}`}getColumnTimeAxisContainer(){return i.A.getByFlag(this.vdom,"neo-c-w-column-timeaxis-container")}getEventId(e){return`${this.id}__${e}`}getHeaderContainer(){return i.A.getByFlag(this.vdom,"neo-header-row")}getIdKey(){return"c-w"}getScrollContainer(){return i.A.getByFlag(this.vdom,"neo-c-w-scrollcontainer")}onCalendarStoreLoad(e){this.eventStore.getCount()>0&&this.updateEvents()}onCalendarStoreRecordChange(e){this.updateEvents()}onEventDoubleClick(e){if(this.data.events.enableEdit){let{path:t}=e;!t[0].cls.includes("neo-event")&&t.shift();let a=this,{editEventContainer:o}=a.owner,r=t[0],n=i.A.find(a.vdom,r.id).vdom,s=a.eventStore.get(n.flag),{style:l}=o;Object.assign(l,{left:`${r.rect.width+15}px`,top:n.style.top}),o.setSilent({parentId:t[1].id,record:s,style:l}),o.render(!0)}}onEventStoreLoad(e){this.calendarStore.getCount()>0&&this.updateEvents()}onEventStoreRecordChange(e){this.updateEvents()}onFocusChange(e){let{oldPath:t,path:a}=e;t?.[0]?.cls.includes("neo-event")&&Neo.applyDeltas(this.appName,{id:t[0].id,cls:{remove:["neo-focus"]}}),a?.[0]?.cls.includes("neo-event")&&Neo.applyDeltas(this.appName,{id:a[0].id,cls:{add:["neo-focus"]}})}onTimeAxisChange(e){let t=this;t.adjustTotalHeight(e,t.headerCreated),t.headerCreated&&t.updateEvents()}onWheel(e){if(!this.isUpdating&&Math.abs(e.deltaX)>Math.abs(e.deltaY)){let t,a,o,r=this,n=r.getColumnContainer(),{columnsBuffer:s,columnsVisible:i,firstColumnDate:l}=r,d=r.getHeaderContainer(),c=0,u=50,m=e.clientWidth-u;if(e.deltaX>0&&Math.round(e.scrollLeft/m*s)>s+i-1){for(a=new Date(n.cn[n.cn.length-1].flag),n.cn.splice(0,s),d.cn.splice(0,s);c<s;c++)a.setDate(a.getDate()+1),t=r.createColumnAndHeader(a),n.cn.push(t.column),d.cn.push(t.header);l.setDate(l.getDate()+s),r.timeout(50).then(()=>{r.updateEvents(!1,s+i,r.totalColumns)}),o=-m}else if(e.deltaX<0&&Math.round(e.scrollLeft/m*s)<1){for(a=new Date(n.cn[0].flag),n.cn.length=s+i,d.cn.length=s+i;c<s;c++)a.setDate(a.getDate()-1),t=r.createColumnAndHeader(a),n.cn.unshift(t.column),d.cn.unshift(t.header);l.setDate(l.getDate()-s),r.timeout(50).then(()=>{r.updateEvents(!1,0,s)}),o=m}o&&(r.isUpdating=!0,r.promiseUpdate().then(()=>{Neo.main.DomAccess.scrollBy({direction:"left",id:r.getScrollContainer().id,value:o}).then(()=>{r.isUpdating=!1})}))}}setFirstColumnDate(e){e.setDate(e.getDate()-e.getDay()+this.weekStartDay-this.columnsBuffer)}updateEvents(e=!1,t=0,a=this.totalColumns){let o=this;if(o.mounted){let n,s,i,l,d,c,u,m,h,g,p,f,v,C,y,w,{calendarStore:S,eventStore:D,showEventEndTime:b,timeAxis:N,vdom:F}=o,_=N.getTime(o.endTime),A=N.getTime(o.startTime),x=_-A,E=r.A.clone(o.firstColumnDate),k=o.getColumnContainer(),R=t;for(E.setDate(E.getDate()+t);R<a;R++){for(s=k.cn[R],s.cn=[],i=D.getDayRecords(E),p=i.length,g=0;g<p;g++)if(f=i[g],n=S.get(f.calendarId),n?.active){if(d=f.endDate,C=f.startDate,_<=C.getHours()||A>=d.getHours())continue;_<d.getHours()&&(d=r.A.clone(d),d.setHours(_),d.setMinutes(0)),A>C.getHours()&&(C=r.A.clone(C),C.setHours(A),C.setMinutes(0)),l=(d-C)/60/60/1e3,c=["neo-event","neo-draggable",`neo-${n.color}`],u=60*l/N.interval,m=!1,h=Math.round(l/x*100*1e3)/1e3,v=f[D.keyProperty],y=(60*C.getHours()+C.getMinutes())/60,w=Math.round((y-A)/x*100*1e3)/1e3,u<=2&&(m=N.rowHeight*u<(b?50:34),!m||b&&N.rowHeight/u>=34||c.push("neo-overflow")),b=!(m&&1===u||!b),b&&c.push("neo-show-end-time"),s.cn.push({cls:c,flag:v,id:o.getEventId(v),tabIndex:-1,cn:[{cls:["neo-event-time"],html:o.intlFormat_time.format(f.startDate),id:`${o.id}__time__${v}`},{cls:["neo-event-title"],html:f.title,id:`${o.id}__title__${v}`},{cls:["neo-event-time","neo-event-end-time"],html:o.intlFormat_time.format(f.endDate),id:`${o.id}__enddate__${v}`,removeDom:!b}],style:{height:`calc(${h}% - 2px)`,top:`calc(${w}% + 1px)`,width:"calc(100% - 1px)"}})}E.setDate(E.getDate()+1)}!e&&o.update()}else o.needsEventUpdate=!0}updateHeader(e=!1,t=!1){let a,o,n,s,i,l,m=this,{showWeekends:h}=m,g=m.currentDate,p=m.getColumnContainer(),f=m.getHeaderContainer(),v=0;for(m.setFirstColumnDate(g),m.firstColumnDate=r.A.clone(g);v<m.totalColumns;v++)a=["neo-c-w-column","neo-draggable"],o=g.getDate(),n=g.getDay(),s=["neo-date"],l=!1,0!==n&&6!==n||(a.push("neo-weekend"),!h&&(l=!0)),o===d&&g.getMonth()===c&&g.getFullYear()===u&&s.push("neo-today"),i=m.getColumnHeaderId(g),e?(p.cn.push({cls:a,flag:r.A.convertToyyyymmdd(g),id:m.getColumnId(g),removeDom:l}),f.cn.push({cls:["neo-header-row-item"],id:i,removeDom:l,cn:[{cls:["neo-day"],html:m.intlFormat_day.format(g),id:`${i}_day`},{cls:s,html:o,id:`${i}_date`}]})):(Object.assign(p.cn[v],{cls:a,flag:r.A.convertToyyyymmdd(g),id:m.getColumnId(g),removeDom:l}),Object.assign(f.cn[v],{id:i,removeDom:l}),Object.assign(f.cn[v].cn[0],{html:m.intlFormat_day.format(g),id:`${i}_day`}),Object.assign(f.cn[v].cn[1],{cls:s,html:o,id:`${i}_date`})),g.setDate(g.getDate()+1);!t&&m.update()}}const h=Neo.setupClass(m)}}]);