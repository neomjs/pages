"use strict";(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[8563],{5800:(e,t,n)=>{n.d(t,{A:()=>i});var o=n(2432),s=n(3439),a=n(599);class r extends o.A{static config={className:"Neo.controller.Component",ntype:"component-controller",component:null,parent_:null,references:null,windowId:null};construct(e){super.construct(e);let t=this,{component:n}=t;t.references={},n.isConstructed?t.onComponentConstructed():n.on("constructed",(()=>{t.onComponentConstructed()}),t,{once:!0})}beforeSetParent(e,t){return e||this.getParent()}getHandlerScope(e,t){let n=this,{parent:o}=n;return!(!t||!(0,s.Ap)(e,t).fn)||(Neo.isFunction(n[e])?n:o?.getHandlerScope(e)||null)}getParent(){let{parent:e}=this;return e||this.component.parent?.getController()||null}getReference(e){let t=this,n=t.references[e];return n||(n=t.component.down({reference:e}),n&&(t.references[e]=n)),n||null}getState(...e){return this.getStateProvider().getData(...e)}getStateProvider(e=!1){let{component:t}=this;return e?t.stateProvider:t.getStateProvider()}getStore(e){return this.getStateProvider().getStore(e)}onComponentConstructed(){}parseConfig(e=this.component){let t,n,o=this,{handler:s,listeners:r,reference:i,renderer:l,validator:c}=e;s&&Neo.isString(s)&&(n=o.getHandlerScope(s,e),!0!==n&&(e.handler=n[s].bind(e.handlerScope||n))),r&&Object.entries(r).forEach((([s,i])=>{"scope"!==s&&"delegate"!==s&&(Neo.isString(i)?(t=i,n=o.getHandlerScope(t,e),n?!0!==n&&(r[s]={},r[s].fn=n[t].bind(n)):a.A.logError("Unknown event handler for",t,e)):i?.forEach?.((s=>{Neo.isObject(s)&&s.hasOwnProperty("fn")&&Neo.isString(s.fn)&&(t=s.fn,n=o.getHandlerScope(t,e),n?!0!==n&&(s.fn=n[t].bind(n)):console.error("Unknown event handler for",t,e))})))})),l&&Neo.isString(l)&&(n=o.getHandlerScope(l),n&&(e.renderer=n[l].bind(n))),c&&Neo.isString(c)&&(n=o.getHandlerScope(c),n?e.validator=n[c].bind(n):a.A.logError("Unknown validator for",e.id,e)),i&&(o.references[i]=e)}parseDomListeners(e=this.component){let t,n,o=this,{domListeners:s}=e;s?.forEach((e=>{Object.entries(e).forEach((([s,a])=>{t=null,"scope"!==s&&"delegate"!==s&&(Neo.isString(a)?t=a:Neo.isObject(a)&&a.hasOwnProperty("fn")&&Neo.isString(a.fn)&&(t=a.fn),t&&(n=o.getHandlerScope(t),n&&(e[s]=n[t].bind(n))))}))}))}removeReference(e){let t,{references:n}=this;for(t in n)if(e===n[t]){delete n[t];break}this.getParent()?.removeReference(e)}setState(...e){this.getStateProvider().setData(...e)}}const i=Neo.setupClass(r)},6556:(e,t,n)=>{n.d(t,{A:()=>r});var o=n(2583),s=n(6270);n(5691);class a extends o.A{static observable=!0;static config={className:"Neo.selection.Model",ntype:"selection-model",cls:null,items_:null,selectedCls:"neo-selected",singleSelect:!0,view_:null};beforeGetItems(e){return e||(this._items=e=[]),e}beforeGetView(e){return Neo.getComponent(this._view)}beforeSetView(e){return e&&e.id}addDomListener(){}deselect(e,t,n=this.items,o){if(e=e.isRecord?view.getItemId(e):Neo.isObject(e)?e.id:e,n.includes(e)){let a=this,{view:r}=a,i=r.getVdomChild(e);i&&(i.cls=s.A.remove(i.cls||[],o||a.selectedCls),i["aria-selected"]=!1),s.A.remove(n,e),t||(r.update(),r.parent?.onDeselect?.(),r.onDeselect?.(),a.fire("selectionChange",{selection:n}))}else t||this.fire("noChange")}deselectAll(e,t=this.items){let n=this,o=[...t],{view:s}=n;o.length?(o.forEach((e=>{n.deselect(e,!0)})),!e&&o.length>0&&s.update(),n.fire("selectionChange",{selection:this.items})):e||n.fire("noChange")}destroy(...e){this.unregister(),super.destroy(...e)}getSelection(){return this.items}hasSelection(){return this.items.length>0}isSelected(e){return this.items.includes(e)}register(e){let t=this,n=e.wrapperCls||[];t.cls&&!n.includes(t.cls)&&(n.push(t.cls),e.wrapperCls=n),t.view=e,t.addDomListener(),e.fire("selectionModelChange",{value:t})}removeDomListeners(){let e=this,t=e.view,n=[...t.domListeners];t.domListeners.forEach((t=>{t.scope===e&&s.A.remove(n,t)})),t.domListeners=n}select(e,t=this.items,n){let o=this,{view:a}=o;e=(e=Array.isArray(e)?e:[e]).map((e=>e.isRecord?a.getItemId(e):Neo.isObject(e)?e.id:e)),Neo.isEqual(t,e)?o.fire("noChange"):(o.singleSelect&&t===o.items&&o.deselectAll(!0,t),e.forEach((e=>{(e=a.getVdomChild(e))&&(e.cls=s.A.add(e.cls||[],n||o.selectedCls),e["aria-selected"]=!0)})),s.A.add(t,e),a.silentSelect||a.update(),a.parent?.onSelect?.(e),a.onSelect?.(e),o.fire("selectionChange",{selection:t}))}toggleSelection(e){let t=this;t.isSelected(e)?t.deselect(e):t.select(e)}unregister(){let e=this,t=e.view.wrapperCls||[];e.cls&&t.includes(e.cls)&&(s.A.remove(t,e.cls),e.view.wrapperCls=t),e.deselectAll(),e.removeDomListeners()}}const r=Neo.setupClass(a)},9764:(e,t,n)=>{n.r(t),n.d(t,{onStart:()=>L}),Neo.overwrites={Neo:{form:{field:{CheckBox:{useAlertState_:!0},Text:{labelPosition_:"inline",showOptionalText_:!0,useAlertState_:!0}}}}},Neo.overwrites;var o=n(2930),s=n(2714),a=n(3079),r=n(5800);class i extends r.A{static config={className:"Form.view.FormContainerController"};onComponentConstructed(){super.onComponentConstructed(),this.component.on({fieldChange:e=>console.log("fieldChange",e),fieldFocusLeave:e=>console.log("fieldFocusLeave",e),fieldUserChange:e=>console.log("fieldUserChange",e)})}onNextPageButtonClick(e){this.getStateProvider().data.activeIndex++}onPrevPageButtonClick(e){this.getStateProvider().data.activeIndex--}async onSaveButtonClick(e){let t=this.getReference("main-form"),n=await t.getSubmitValues();Neo.main.addon.LocalStorage.updateLocalStorageItem({appName:this.component.appName,key:"neo-form",value:JSON.stringify(n)})}}const l=Neo.setupClass(i);var c=n(414),d=n(3627);class m extends s.A{static config={className:"Form.view.FormContainer",baseCls:["form-form-container","neo-container"],controller:l,items:[{module:d.A,cls:["form-header"],flex:"none",items:[{module:c.A,bind:{text:e=>e.activeTitle},cls:["form-header-label"],flex:"none"},"->",{iconCls:["fas","fa-file"],handler:"onValidatePageButtonClick",text:"Validate page"},{iconCls:["fas","fa-layer-group"],handler:"onValidateAllPagesButtonClick",style:{marginLeft:"1em"},text:"Validate all pages"},{iconCls:["fas","fa-floppy-disk"],handler:"onSaveButtonClick",style:{marginLeft:"1em"},text:"Save"}]},{module:a.A,reference:"pages-container",layout:{ntype:"card",bind:{activeIndex:e=>e.activeIndex}},items:[{module:()=>Promise.all([n.e(3599),n.e(7868)]).then(n.bind(n,7868))},{module:()=>Promise.all([n.e(3599),n.e(479),n.e(1879)]).then(n.bind(n,1879))},{module:()=>Promise.all([n.e(3599),n.e(6318)]).then(n.bind(n,6318))},{module:()=>n.e(5153).then(n.bind(n,5153))},{module:()=>n.e(7712).then(n.bind(n,7712))},{module:()=>Promise.all([n.e(3599),n.e(7931)]).then(n.bind(n,7931))},{module:()=>Promise.all([n.e(3599),n.e(1794)]).then(n.bind(n,1794))},{module:()=>Promise.all([n.e(3599),n.e(7701)]).then(n.bind(n,7701))},{module:()=>n.e(6251).then(n.bind(n,6251))},{module:()=>Promise.all([n.e(3599),n.e(6827),n.e(2560)]).then(n.bind(n,2560))},{module:()=>Promise.all([n.e(3599),n.e(6827),n.e(3349)]).then(n.bind(n,3349))},{module:()=>Promise.all([n.e(3599),n.e(1490)]).then(n.bind(n,1490))},{module:()=>Promise.all([n.e(3599),n.e(667)]).then(n.bind(n,667))},{module:()=>Promise.all([n.e(3599),n.e(1515)]).then(n.bind(n,1515))},{module:()=>Promise.all([n.e(3599),n.e(4454)]).then(n.bind(n,4454))}]},{module:d.A,cls:["form-footer"],flex:"none",items:[{bind:{disabled:e=>0===e.activeIndex},handler:"onPrevPageButtonClick",iconCls:"fas fa-chevron-left",text:"Back"},"->",{bind:{disabled:e=>e.activeIndex===e.maxIndex},handler:"onNextPageButtonClick",iconCls:"fas fa-chevron-right",iconPosition:"right",style:{marginLeft:"1em"},text:"Next page"}]}]}}const g=Neo.setupClass(m);var u=n(5156);class f extends u.A{static config={className:"Form.view.SideNavList",baseCls:["form-side-nav-list","neo-list"],itemsFocusable:!0,useHeaders:!0};createItemContent(e,t){let n=e[this.displayField];return e.isHeader?n:[{tag:"i",cls:this.getIconCls(e)},{html:n}]}getIconCls(e){let t=["neo-list-icon"];return"valid"===e.formState?[...t,"neo-color-green","far","fa-circle-check"]:"invalid"===e.formState?[...t,"neo-color-red","far","fa-circle-xmark"]:"inProgress"===e.formState?[...t,"neo-color-blue","fas","fa-circle-half-stroke"]:[...t,"neo-color-blue","far","fa-circle"]}onSelect(e){let t=this,n=t.store.get(t.getItemRecordId(e[0]));t.setState({activeIndex:n.cardIndex,activeTitle:n.name})}onStoreLoad(){let e=-1;this.store.items.forEach((t=>{t.isHeader||e++})),this.getStateProvider().data.maxIndex=e,super.onStoreLoad()}}const h=Neo.setupClass(f);class p extends r.A{static config={className:"Form.view.ViewportController"};async onValidateAllPagesButtonClick(e){let t=this.getReference("main-form"),n=await t.getFormState(),o=await t.getSubmitValues();console.log("All pages",{formState:n,formValues:o}),await this.updateRecordValidityState()}async onValidatePageButtonClick(e){let t=this,n=t.getStateProvider().data.activeIndex,o=t.getReference("pages-container").items[n],s=await o.getSubmitValues();await t.updateRecordValidityState(n),console.log(`Current page: ${n+1}`,s)}async updateRecordValidityState(e=null){let t,n,o,s=this,a=s.getStateProvider(),r=s.getReference("pages-container"),i=s.getReference("side-nav"),l=a.getStore("sideNav"),c=0,d=r.items.length;for(Neo.isNumber(e)&&(c=e,d=e+1);c<d;c++)o=r.items[c],n=i.getSelectedIndex(c),t=await o.getFormState(),l.getAt(n).formState=t}}const v=Neo.setupClass(p);var S=n(8202);class C extends S.A{static config={className:"Form.model.SideNav",fields:[{name:"cardIndex",type:"Integer"},{name:"formState",type:"String"},{name:"id",type:"String"},{name:"isHeader",type:"Boolean"},{name:"name",type:"String"}]}}const N=Neo.setupClass(C);var b=n(1374);class x extends b.A{static config={className:"Form.store.SideNav",model:N}}const w=Neo.setupClass(x);var P=n(3697);class y extends P.A{static config={className:"Form.view.ViewportStateProvider",data:{activeIndex:0,activeTitle:"",maxIndex:0},stores:{sideNav:{module:w,autoLoad:!0,url:"../../resources/examples/data/formSideNav.json"}}};formData=null;construct(e){super.construct(e),Neo.main.addon.LocalStorage.readLocalStorageItem({appName:this.component.appName,key:"neo-form"}).then((e=>{this.formData=JSON.parse(e.value)}))}onDataPropertyChange(e,t,n){super.onDataPropertyChange(e,t,n);let o=this;if(o.formData&&"activeIndex"===e){let s=o.getController().getReference("pages-container").items[t];s instanceof Neo.core.Base?s.setValues(o.formData,!0):o.timeout(30).then((()=>{o.onDataPropertyChange(e,t,n)}))}}}const A=Neo.setupClass(y);class I extends o.A{static config={className:"Form.view.Viewport",controller:v,items:[{ntype:"container",style:{margin:"0 1em"},width:"300",items:[{flex:"none",vdom:{tag:"h1",innerHTML:"Nested Forms"}},{module:h,reference:"side-nav",bind:{headerlessSelectedIndex:e=>e.activeIndex,store:"stores.sideNav"}}]},{module:g,reference:"main-form",style:{margin:"20px"}}],layout:{ntype:"hbox",align:"stretch"},stateProvider:A}}const k=Neo.setupClass(I),L=()=>Neo.app({mainView:k,name:"Form"})}}]);