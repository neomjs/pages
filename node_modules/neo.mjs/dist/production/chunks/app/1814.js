"use strict";(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[1814],{1814(e,t,a){a.r(t),a.d(t,{onStart:()=>c});var n=a(8659),o=a(7947),r=a(1184);class s extends r.A{static config={className:"Neo.container.Fragment",ntype:"fragment",baseCls:null,cls:null,layout:null,tag:"fragment"};beforeSetCls(e,t){return null}beforeSetLayout(e,t){return null}beforeSetStyle(e,t){return null}beforeSetWrapperCls(e,t){return null}beforeSetWrapperStyle(e,t){return null}createLayout(e){return null}}const i=Neo.setupClass(s);var l=a(6144);class u extends o.A{static config={className:"Neo.examples.container.fragment.MainContainer",autoMount:!0,layout:{ntype:"vbox",align:"start"},style:{padding:"20px"},items:[{module:l.A,labelText:"Field 1 (Outside)",name:"field1",reference:"field1"},{module:l.A,labelText:"Field 2 (Outside)",name:"field2"},{module:l.A,labelText:"Field 3 (Outside)",name:"field3"},{module:i,reference:"myFragment",items:[{module:l.A,labelText:"Fragment Field 1",name:"fragField1",reference:"fragField1"},{module:l.A,labelText:"Fragment Field 2",name:"fragField2"},{module:l.A,labelText:"Fragment Field 3",name:"fragField3"},{module:l.A,labelText:"Fragment Field 4",name:"fragField4"}]},{module:l.A,labelText:"Field 4 (Outside)",name:"field4"},{module:l.A,labelText:"Field 5 (Outside)",name:"field5"},{ntype:"container",layout:{ntype:"hbox",gap:"10px"},style:{marginTop:"20px"},items:[{module:n.A,text:"Toggle Fragment",handler:"up.onToggleFragment"},{module:n.A,text:"Move Field 1 into Fragment",handler:"up.onMoveIntoFragment"},{module:n.A,text:"Move Fragment Field 1 Out",handler:"up.onMoveOutFragment"}]}]};onToggleFragment(e){const t=this.getReference("myFragment");t.hidden=!t.hidden}onMoveIntoFragment(e){const t=this.getReference("field1");this.getReference("myFragment").insert(0,t),e.component.disabled=!0}onMoveOutFragment(e){const t=this.getReference("fragField1");this.insert(0,t),e.component.disabled=!0}}Neo.setupClass(u);const d=u,c=()=>Neo.app({mainView:d,name:"Neo.examples.container.fragment",parentId:"main-container"})},2850(e,t,a){a.d(t,{A:()=>l});var n=a(9932),o=a(1741),r=a(7466),s=a(1031);class i extends o.A{static isTouchedEvents=["focusEnter","focusLeave"];static config={className:"Neo.form.field.Base",ntype:"basefield",formGroup_:null,keys:{},isTouched_:!1,isTouchedEvent_:"focusLeave",name_:null,renderName_:!0,renderPath:!0,value_:null};formGroupString=null;get isDirty(){return!Neo.isEqual(this.getSubmitValue(),this.originalConfig.value)}path=null;construct(e){super.construct(e);let t=this;(0,n.gh)(t,"afterSetValue",(e,a)=>{void 0!==a&&t.fireChangeEvent(e,a)},t)}afterSetIsTouched(e,t){let{cls:a}=this;s.A.toggle(a,"neo-is-touched",e),this.cls=a}afterSetName(e,t){let a=this;a.renderName&&a.changeInputElKey("name",a.renderPath?a.getPath():e)}afterSetRole(e,t){this.getInputEl().role=e,this.update()}afterSetValue(e,t){}beforeGetFormGroup(e){let t,a=this,n=[];return a.formGroupString?a.formGroupString:(e&&n.push(e),r.A.getParents(a).forEach(e=>{e.formGroup&&n.unshift(e.formGroup)}),t=n.join("."),a.formGroupString=t,t)}beforeSetIsTouchedEvent(e,t){return this.beforeSetEnumValue(e,t,"isTouchedEvent")}changeInputElKey(e,t,a=!1){let n=this;t||Neo.isBoolean(t)||0===t?n.getInputEl()[e]=t:delete n.getInputEl()[e],!a&&n.update()}doFireChangeEvent(e,t,a){let n=this,o=Neo.form?.Container,s="field"+Neo.capitalize(a),i={component:n,oldValue:t,value:e};Neo.isFunction(n.getGroupValue)&&(i.groupValue=n.getGroupValue()),n.fire(a,i),n.suspendEvents||r.A.getParents(n).forEach(e=>{o&&e instanceof o&&e.fire(s,i)})}fireChangeEvent(e,t){this.doFireChangeEvent(e,t,"change")}fireUserChangeEvent(e,t){this.doFireChangeEvent(e,t,"userChange")}getClosestForm(){let e,t=this,a=Neo.form?.Container;for(e of r.A.getParents(t))if(a&&e instanceof a)return e;return null}getInputEl(){return this.vdom}getPath(){let e,t=this;if(!t.name)return null;if(!t.path){if(e=t.formGroup?t.formGroup.split("."):[],t.name&&e.push(t.name),e.length<1)return null;t.path=e.join(".")}return t.path||(t.path="none"),"none"===t.path?null:t.path}getSubmitValue(){return this.value}getValue(){return this.getSubmitValue()}isValid(){return!0}onFocusEnter(e){super.onFocusLeave(e),"focusEnter"===this.isTouchedEvent&&(this.isTouched=!0)}onFocusLeave(e){super.onFocusLeave(e);let t=this,a=Neo.form?.Container,n={...e,component:t,value:t.getSubmitValue()};"focusLeave"===t.isTouchedEvent&&(t.isTouched=!0),Neo.isFunction(t.getGroupValue)&&(n.groupValue=t.getGroupValue()),t.suspendEvents||r.A.getParents(t).forEach(e=>{a&&e instanceof a&&e.fire("fieldFocusLeave",n)})}reset(e=null){this.originalConfig.value=e,this.value=e}validate(e=!0){return!0}toJSON(){let e=this;return{...super.toJSON(),formGroup:e.formGroup,isDirty:e.isDirty,isTouched:e.isTouched,isValid:e.isValid(),name:e.name,value:e.value}}}const l=Neo.setupClass(i)},7947(e,t,a){a.d(t,{A:()=>l});var n=a(1184),o=a(2850),r=a(7466),s=a(1031);class i extends n.A{static config={className:"Neo.form.Container",ntype:"form-container",baseCls:["neo-form-container"],vdom:{tag:"form",cn:[],onsubmit:"return false;"}};static adjustTreeLeaves(e={},t,a,n=""){let o,r,s;Object.entries(e).forEach(([i,l])=>{o=!0,r=""===n?i:`${n}.${i}`,s=Neo.typeOf(l),"Array"!==s&&"Object"!==s||(o=a.includes(r),"Array"===s?l.forEach((e,n)=>{"Object"===Neo.typeOf(e)&&this.adjustTreeLeaves(e,t,a,`${r}[${n}]`)}):"Object"===s&&this.adjustTreeLeaves(l,t,a,r)),o&&(e[i]=i===t?l:{[t]:l})})}findNotLoadedModules(e=this,t=[]){return e.items.forEach(a=>{"Function"!==Neo.typeOf(a.module)||a.isLoading?a.items&&this.findNotLoadedModules(a,t):t.push({item:a,parent:e})}),t}async getField(e){await this.loadModules();let t,a=r.A.getChildComponents(this);for(t of a)if(t instanceof o.A&&(t.name===e||t.id===e))return t;return null}getFieldPath(e){let t=e.formGroup?e.formGroup.split("."):[];return t.push(e.name||e.id),t.join(".")}async getFields(){let e=[];return await this.loadModules(),r.A.getChildComponents(this).forEach(t=>{t instanceof o.A&&e.push(t)}),e}async getFormState(){let e,t,a,n=await this.getFields(),o=0,r=!1,s=!1,i=!1,l=!1,u=!1,d=n.length;for(;o<d;o++){if(e=n[o],t=e.clean,a=e.isValid(),t||a)a?u=!0:a||(e.isEmptyAndRequired?.()?s=!0:i=!0);else{if(!e.isEmptyAndRequired?.())return"invalid";s=!0}t?r=!0:l=!0}return s||i?s||!r||l?"inProgress":"clean":"valid"}async getSubmitValues(){let e,t,a,n,o,r=await this.getFields(),s=Neo.form.field.Radio,i={};return r.forEach(r=>{o=r.getSubmitValue(),r.name?(e=r.name,r.formGroup&&(e=r.formGroup+"."+e),n=e.split("."),t=n.pop(),a=Neo.nsWithArrays(n,!0,i)):(t=r.id,a=i),s&&r instanceof s?Object.hasOwn(a,t)?o!==r.uncheckedValue&&(a[t]=o):a[t]=o:Object.hasOwn(a,t)&&void 0!==o?(a[t]===r.uncheckedValue?a[t]=[]:Array.isArray(a[t])||(a[t]=[a[t]]),o!==r.uncheckedValue&&a[t].unshift(o)):void 0!==o&&(a[t]=o)}),i}async getValues(){return this.getSubmitValues()}async isValid(){let e=await this.getFields(),t=0,a=e.length;for(;t<a;t++)if(!e[t].isValid())return!1;return!0}async loadModules(){let e=this.findNotLoadedModules(),t=[];return e.forEach(e=>{t.push(e.parent.layout.loadModule(e.item))}),e=await Promise.all(t),e}async reset(e={}){let t,a,n=this;(await n.getFields()).forEach(o=>{t=n.getFieldPath(o),a=Neo.nsWithArrays(t,!1,e),o.reset(t?a:null)})}async setConfigs(e={},t=!1){let a,n,o,r,s,i=this;(await i.getFields()).forEach(l=>{r=i.getFieldPath(l),a=Neo.nsWithArrays(r,!1,e),a&&(t&&(l.suspendEvents=!0),n=Neo.form.field?.CheckBox&&l instanceof Neo.form.field.CheckBox,o=Neo.form.field?.Radio&&l instanceof Neo.form.field.Radio,s=a.value,(n||o)&&Object.hasOwn(a,"value")&&(a=Neo.clone(a,!0),o?a.checked=l.value===s:n&&("Array"===Neo.typeOf(s)?s.includes(l.value)&&(a.checked=!0):a.checked=l.value===s),delete a.value),l.set(a),t&&delete l.suspendEvents)})}async setValues(e={},t=!1){let a,n=await this.getFields(),o=[];n.map(e=>{a=e.getPath(),a&&s.A.add(o,a)}),e=Neo.clone(e,!0),i.adjustTreeLeaves(e,"value",o),await this.setConfigs(e,t)}toJSON(){let e,t,a,n,o,s,i=Neo.form.field?.Radio,l={};return t=r.A.getChildComponents(this),t.forEach(t=>{t.isBasefield&&(s=t.getSubmitValue(),t.name?(e=t.name,t.formGroup&&(e=t.formGroup+"."+e),o=e.split("."),a=o.pop(),n=Neo.nsWithArrays(o,!0,l)):(a=t.id,n=l),i&&t instanceof i?Object.hasOwn(n,a)?s!==t.uncheckedValue&&(n[a]=s):n[a]=s:Object.hasOwn(n,a)&&void 0!==s?(n[a]===t.uncheckedValue?n[a]=[]:Array.isArray(n[a])||(n[a]=[n[a]]),s!==t.uncheckedValue&&n[a].unshift(s)):void 0!==s&&(n[a]=s))}),{...super.toJSON(),values:l}}async validate(){let e,t=!0;return(await this.getFields()).forEach(a=>{e=a.validate?.(!1),!1===e&&(t=!1)}),t}}const l=Neo.setupClass(i)}}]);