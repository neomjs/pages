"use strict";(self.webpackChunkneo_mjs=self.webpackChunkneo_mjs||[]).push([[6521],{6521:(e,t,o)=>{o.r(t),o.d(t,{default:()=>s});var a=o(295),i=o(6270),n=o(825);class r extends a.default{static config={className:"Neo.draggable.grid.header.toolbar.SortZone",ntype:"grid-header-toolbar-sortzone",itemMargin:"1px",moveColumnContent:!0,moveVertical:!1};adjustProxyRectToParent(e,t){e.x=e.x-t.x-1,e.y=e.y-t.y-1}async createDragProxy(e,t=!0){if(!this.moveColumnContent)return await super.createDragProxy(e,t);let o,a=this,i=a.owner.parent,{view:r}=i,s=r.getVdomRoot().cn,l=a.dragElement["aria-colindex"]-1,{dataField:d}=r.columnPositions[l],c=r.getColumnCells(d),h=[],m=await super.createDragProxy(e,!1),w=await i.getDomRect(),g=Neo.getId("grid-view-wrapper");return m.cls=["neo-grid-wrapper",a.owner.getTheme()],m.style.height=w.height-2+"px",c.forEach(((e,t)=>{o=n.A.clone({cls:s[t].cls,cn:[e],style:s[t].style}),delete o.cn[0].style.left,h.push(o)})),m.vdom={cn:[{cls:["neo-grid-container"],cn:[{...m.vdom,cls:["neo-grid-header-toolbar","neo-toolbar"]},{cls:["neo-grid-view-wrapper"],id:g,cn:[{cls:["neo-grid-view"],cn:h},{cls:["neo-grid-scrollbar"],style:{height:r.vdom.cn[1].height}}]}]}]},m.listeners={mounted(){Neo.main.DomAccess.scrollTo({direction:"top",id:g,value:r.scrollPosition.y,windowId:this.windowId})}},t?a.dragProxy=Neo.create(m):m}moveTo(e,t){super.moveTo(e,t),i.A.move(this.owner.parent._columns,e,t)}async onDragEnd(e){await super.onDragEnd(e);let{owner:t}=this;t.items.forEach(((e,t)=>{e.vdom["aria-colindex"]=t+1})),t.updateDepth=2,t.update(),await t.passSizeToView(),await this.timeout(20),t.parent.view.createViewData()}async onDragStart(e){if(await super.onDragStart(e),this.moveColumnContent){let e=this,{view:t}=e.owner.parent,o=e.dragElement["aria-colindex"]-1,{dataField:a}=t.columnPositions[o];t.getColumnCells(a).forEach((e=>{e.style.display="none"})),t.update()}}switchItems(e,t){if(super.switchItems(e,t),this.moveColumnContent){let o=this,{itemRects:a}=o,{view:n}=o.owner.parent,r=n._columnPositions,s=n.getColumnCells(r[e].dataField),l=n.getColumnCells(r[t].dataField);Object.assign(r[e],{width:a[t].width,x:a[t].x+1}),Object.assign(r[t],{width:a[e].width,x:a[e].x+1}),i.A.move(r,e,t),s.forEach((e=>{e.style.left=r[t].x+"px",e.style.width=r[t].width+"px"})),l.forEach((t=>{t.style.left=r[e].x+"px",t.style.width=r[e].width+"px"})),n.update()}}}const s=Neo.setupClass(r)}}]);