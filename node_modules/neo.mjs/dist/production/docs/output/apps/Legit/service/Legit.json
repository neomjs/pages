{"classData":[{"comment":"/**\n * @summary A singleton service that provides a virtual file system layer for the Legit IDE.\n *\n * This service acts as the central hub for file system operations within the Legit application.\n * It abstracts the underlying storage mechanism (using `memfs`) and provides a git-like interface\n * for interacting with file trees and commits (using `@legit-sdk/core`).\n *\n * Key responsibilities include:\n * - **Initialization:** Dynamically loading external dependencies (`memfs`, `@legit-sdk/core`) to ensure the app remains lightweight until needed.\n * - **File System Seeding:** Populating the in-memory file system with initial demo content.\n * - **Git Operations:** Providing methods to load file trees (`loadTree`) and calculate deltas between commits (`loadTreeDelta`).\n * - **File I/O:** Exposing standard file system methods (`readFile`, `writeFile`, `readdir`, `stat`) that automatically await the service's ready state.\n *\n * This service is designed to be robust against initialization failures and provides a safe, asynchronous API for the `ViewportController` to consume.\n *\n * @class Legit.service.Legit\n * @extends Neo.core.Base\n * @singleton\n */","meta":{"filename":"Legit.mjs","lineno":3,"columnno":0,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/legit/service","code":{}},"summary":"A singleton service that provides a virtual file system layer for the Legit IDE.\n\nThis service acts as the central hub for file system operations within the Legit application.\nIt abstracts the underlying storage mechanism (using `memfs`) and provides a git-like interface\nfor interacting with file trees and commits (using `@legit-sdk/core`).\n\nKey responsibilities include:\n- **Initialization:** Dynamically loading external dependencies (`memfs`, `@legit-sdk/core`) to ensure the app remains lightweight until needed.\n- **File System Seeding:** Populating the in-memory file system with initial demo content.\n- **Git Operations:** Providing methods to load file trees (`loadTree`) and calculate deltas between commits (`loadTreeDelta`).\n- **File I/O:** Exposing standard file system methods (`readFile`, `writeFile`, `readdir`, `stat`) that automatically await the service's ready state.\n\nThis service is designed to be robust against initialization failures and provides a safe, asynchronous API for the `ViewportController` to consume.","kind":"class","name":"Legit","augments":["Neo.core.Base"],"tags":[{"originalTitle":"singleton","title":"singleton","text":""}],"memberof":"Legit.service","longname":"Legit.service.Legit","scope":"static","$longname":"Legit.service.Legit","$kind":"class","id":8444,"neoClassName":"Legit.service.Legit"},{"comment":"/**\n         * @member {String} className='Legit.service.Legit'\n         * @protected\n         */","meta":{"filename":"Legit.mjs","lineno":28,"columnno":8,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/legit/service","code":{}},"kind":"member","name":"className","type":{"names":["String"]},"defaultvalue":"'Legit.service.Legit'","access":"protected","longname":"className","scope":"global","$longname":"className","$kind":"property","id":8445,"neoClassName":"Legit.service.Legit"},{"comment":"/**\n         * @member {Object|null} fs=null\n         */","meta":{"filename":"Legit.mjs","lineno":32,"columnno":8,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/legit/service","code":{}},"kind":"member","name":"fs","type":{"names":["Object","null"]},"defaultvalue":null,"longname":"fs","scope":"global","$longname":"fs","$kind":"property","id":8446,"neoClassName":"Legit.service.Legit"},{"comment":"/**\n         * @member {Object|null} legitFs=null\n         */","meta":{"filename":"Legit.mjs","lineno":36,"columnno":8,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/legit/service","code":{}},"kind":"member","name":"legitFs","type":{"names":["Object","null"]},"defaultvalue":null,"longname":"legitFs","scope":"global","$longname":"legitFs","$kind":"property","id":8447,"neoClassName":"Legit.service.Legit"},{"comment":"/**\n         * @member {String} path='/.legit/branches/anonymous'\n         */","meta":{"filename":"Legit.mjs","lineno":40,"columnno":8,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/legit/service","code":{}},"kind":"member","name":"path","type":{"names":["String"]},"defaultvalue":"'/.legit/branches/anonymous'","longname":"path","scope":"global","$longname":"path","$kind":"property","id":8448,"neoClassName":"Legit.service.Legit"},{"comment":"/**\n         * @member {Boolean} singleton=true\n         * @protected\n         */","meta":{"filename":"Legit.mjs","lineno":45,"columnno":8,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/legit/service","code":{}},"kind":"member","name":"singleton","type":{"names":["Boolean"]},"defaultvalue":true,"access":"protected","longname":"singleton","scope":"global","$longname":"singleton","$kind":"property","id":8449,"neoClassName":"Legit.service.Legit"},{"comment":"/**\n     * Initializes the service by dynamically importing dependencies and setting up the file system.\n     * @returns {Promise<void>}\n     */","meta":{"range":[1990,2803],"filename":"Legit.mjs","lineno":52,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/legit/service","code":{"id":"astnode100023462","name":"Legit#initAsync","type":"MethodDefinition","paramnames":[]},"vars":{"":null}},"description":"<p>Initializes the service by dynamically importing dependencies and setting up the file system.</p>\n","returns":[{"type":{"names":["Promise.<void>"]}}],"name":"initAsync","longname":"Legit#initAsync","kind":"function","memberof":"Legit","scope":"instance","params":[],"async":true,"$longname":"Legit#initAsync","$kind":"method","id":8450,"neoClassName":"Legit.service.Legit"},{"comment":"/**\n     * Retrieves the commit history for a given branch.\n     * @param {String} [branch='anonymous'] The branch name to load history for.\n     * @returns {Promise<Object[]>} An array of commit objects.\n     */","meta":{"range":[3026,3404],"filename":"Legit.mjs","lineno":84,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/legit/service","code":{"id":"astnode100023538","name":"Legit#loadHistory","type":"MethodDefinition","paramnames":["branch"]},"vars":{"":null}},"description":"<p>Retrieves the commit history for a given branch.</p>\n","params":[{"type":{"names":["String"]},"optional":true,"defaultvalue":"'anonymous'","description":"<p>The branch name to load history for.</p>\n","name":"branch"}],"returns":[{"type":{"names":["Promise.<Array.<Object>>"]},"description":"An array of commit objects."}],"name":"loadHistory","longname":"Legit#loadHistory","kind":"function","memberof":"Legit","scope":"instance","async":true,"$longname":"Legit#loadHistory","$kind":"method","id":8451,"neoClassName":"Legit.service.Legit"},{"comment":"/**\n     * Recursively loads the file tree structure from a given path.\n     * @param {String} treePath The path to start loading the tree from.\n     * @returns {Promise<{hash: string, subEntries: {}}>} The tree structure with hashes.\n     */","meta":{"range":[3657,4517],"filename":"Legit.mjs","lineno":101,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/legit/service","code":{"id":"astnode100023587","name":"Legit#loadTree","type":"MethodDefinition","paramnames":["treePath"]},"vars":{"":null}},"description":"<p>Recursively loads the file tree structure from a given path.</p>\n","params":[{"type":{"names":["String"]},"description":"<p>The path to start loading the tree from.</p>\n","name":"treePath"}],"returns":[{"type":{"names":["Promise.<{hash: string, subEntries: {}}>"]},"description":"The tree structure with hashes."}],"name":"loadTree","longname":"Legit#loadTree","kind":"function","memberof":"Legit","scope":"instance","async":true,"$longname":"Legit#loadTree","$kind":"method","id":8452,"neoClassName":"Legit.service.Legit"},{"comment":"/**\n     * Calculates the difference between two tree states (commits).\n     * Useful for identifying added, deleted, and modified files.\n     * @param {String} currentState The hash or path of the current state.\n     * @param {String} newState The hash or path of the new state.\n     * @returns {Promise<{deleted: String[], added: String[], modified: String[]}>} An object containing arrays of changed file paths.\n     */","meta":{"range":[4950,7408],"filename":"Legit.mjs","lineno":138,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/legit/service","code":{"id":"astnode100023687","name":"Legit#loadTreeDelta","type":"MethodDefinition","paramnames":["currentState","newState"]},"vars":{"":null}},"description":"<p>Calculates the difference between two tree states (commits).\nUseful for identifying added, deleted, and modified files.</p>\n","params":[{"type":{"names":["String"]},"description":"<p>The hash or path of the current state.</p>\n","name":"currentState"},{"type":{"names":["String"]},"description":"<p>The hash or path of the new state.</p>\n","name":"newState"}],"returns":[{"type":{"names":["Promise.<{deleted: Array.<String>, added: Array.<String>, modified: Array.<String>}>"]},"description":"An object containing arrays of changed file paths."}],"name":"loadTreeDelta","longname":"Legit#loadTreeDelta","kind":"function","memberof":"Legit","scope":"instance","async":true,"$longname":"Legit#loadTreeDelta","$kind":"method","id":8453,"neoClassName":"Legit.service.Legit"},{"comment":"/**\n     * Reads the content of a file.\n     * @param {String} path The file path.\n     * @param {Object} [options] Read options.\n     * @returns {Promise<*>} The file content.\n     */","meta":{"range":[7603,7720],"filename":"Legit.mjs","lineno":221,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/legit/service","code":{"id":"astnode100023973","name":"Legit#readFile","type":"MethodDefinition","paramnames":["path","options"]},"vars":{"":null}},"description":"<p>Reads the content of a file.</p>\n","params":[{"type":{"names":["String"]},"description":"<p>The file path.</p>\n","name":"path"},{"type":{"names":["Object"]},"optional":true,"description":"<p>Read options.</p>\n","name":"options"}],"returns":[{"type":{"names":["Promise.<*>"]},"description":"The file content."}],"name":"readFile","longname":"Legit#readFile","kind":"function","memberof":"Legit","scope":"instance","async":true,"$longname":"Legit#readFile","$kind":"method","id":8454,"neoClassName":"Legit.service.Legit"},{"comment":"/**\n     * Reads the contents of a directory.\n     * @param {String} path The directory path.\n     * @returns {Promise<String[]>} An array of file names.\n     */","meta":{"range":[7892,7989],"filename":"Legit.mjs","lineno":231,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/legit/service","code":{"id":"astnode100023994","name":"Legit#readdir","type":"MethodDefinition","paramnames":["path"]},"vars":{"":null}},"description":"<p>Reads the contents of a directory.</p>\n","params":[{"type":{"names":["String"]},"description":"<p>The directory path.</p>\n","name":"path"}],"returns":[{"type":{"names":["Promise.<Array.<String>>"]},"description":"An array of file names."}],"name":"readdir","longname":"Legit#readdir","kind":"function","memberof":"Legit","scope":"instance","async":true,"$longname":"Legit#readdir","$kind":"method","id":8455,"neoClassName":"Legit.service.Legit"},{"comment":"/**\n     * Retrieves file statistics.\n     * @param {String} path The file or directory path.\n     * @returns {Promise<Object>} The file statistics object.\n     */","meta":{"range":[10389,10480],"filename":"Legit.mjs","lineno":305,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/legit/service","code":{"id":"astnode100024154","name":"Legit#stat","type":"MethodDefinition","paramnames":["path"]},"vars":{"":null}},"description":"<p>Retrieves file statistics.</p>\n","params":[{"type":{"names":["String"]},"description":"<p>The file or directory path.</p>\n","name":"path"}],"returns":[{"type":{"names":["Promise.<Object>"]},"description":"The file statistics object."}],"name":"stat","longname":"Legit#stat","kind":"function","memberof":"Legit","scope":"instance","async":true,"$longname":"Legit#stat","$kind":"method","id":8456,"neoClassName":"Legit.service.Legit"},{"comment":"/**\n     * Writes data to a file.\n     * @param {Object}        config Configuration object.\n     * @param {String|Buffer} config.data The data to write.\n     * @param {Object}        [config.options] Write options.\n     * @param {String}        config.path The file path.\n     * @param {Boolean}       [config.skipReady=false] If true, bypasses the `await this.ready()` check.\n     * @returns {Promise<*>}\n     */","meta":{"range":[10905,11069],"filename":"Legit.mjs","lineno":319,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/legit/service","code":{"id":"astnode100024173","name":"Legit#writeFile","type":"MethodDefinition","paramnames":[""]},"vars":{"":null}},"description":"<p>Writes data to a file.</p>\n","params":[{"type":{"names":["Object"]},"description":"<p>Configuration object.</p>\n","name":"config"},{"type":{"names":["String","Buffer"]},"description":"<p>The data to write.</p>\n","name":"config.data"},{"type":{"names":["Object"]},"optional":true,"description":"<p>Write options.</p>\n","name":"config.options"},{"type":{"names":["String"]},"description":"<p>The file path.</p>\n","name":"config.path"},{"type":{"names":["Boolean"]},"optional":true,"defaultvalue":false,"description":"<p>If true, bypasses the <code>await this.ready()</code> check.</p>\n","name":"config.skipReady"}],"returns":[{"type":{"names":["Promise.<*>"]}}],"name":"writeFile","longname":"Legit#writeFile","kind":"function","memberof":"Legit","scope":"instance","async":true,"$longname":"Legit#writeFile","$kind":"method","id":8457,"neoClassName":"Legit.service.Legit"}]}