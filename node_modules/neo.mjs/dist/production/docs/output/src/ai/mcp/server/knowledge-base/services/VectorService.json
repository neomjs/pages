{"classData":[{"comment":"/**\n * @summary Manages vector database operations including embedding generation and storage.\n *\n * This service encapsulates all interactions with the vector database (ChromaDB) and the\n * embedding provider (Google Generative AI). It is responsible for the \"Load\" phase of the\n * ETL pipeline, taking structured knowledge chunks and ensuring they are correctly\n * vectorized and stored.\n *\n * **Helper Role:**\n * This service is primarily a helper for `DatabaseService` and is not intended to be\n * directly exposed as MCP tools. Its methods are invoked by `DatabaseService` as part\n * of higher-level orchestration workflows.\n *\n * ### Key Responsibilities:\n * 1.  **Embedding Generation:** Interacts with the Google Generative AI API to generate\n *     text embeddings for knowledge chunks.\n * 2.  **Vector Storage:** Manages the ChromaDB collection, including upserting new/changed\n *     documents and removing stale ones.\n * 3.  **Data Enrichment:** Pre-calculates class inheritance chains to improve query context.\n * 4.  **Diffing:** Optimizes API usage by only processing chunks that have changed since\n *     the last run.\n *\n * @class Neo.ai.mcp.server.knowledge-base.services.VectorService\n * @extends Neo.core.Base\n * @singleton\n */","meta":{"filename":"VectorService.mjs","lineno":10,"columnno":0,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/ai/mcp/server/knowledge-base/services","code":{}},"summary":"Manages vector database operations including embedding generation and storage.\n\nThis service encapsulates all interactions with the vector database (ChromaDB) and the\nembedding provider (Google Generative AI). It is responsible for the \"Load\" phase of the\nETL pipeline, taking structured knowledge chunks and ensuring they are correctly\nvectorized and stored.\n\n**Helper Role:**\nThis service is primarily a helper for `DatabaseService` and is not intended to be\ndirectly exposed as MCP tools. Its methods are invoked by `DatabaseService` as part\nof higher-level orchestration workflows.\n\n### Key Responsibilities:\n1.  **Embedding Generation:** Interacts with the Google Generative AI API to generate\n    text embeddings for knowledge chunks.\n2.  **Vector Storage:** Manages the ChromaDB collection, including upserting new/changed\n    documents and removing stale ones.\n3.  **Data Enrichment:** Pre-calculates class inheritance chains to improve query context.\n4.  **Diffing:** Optimizes API usage by only processing chunks that have changed since\n    the last run.","kind":"class","name":"VectorService","augments":["Neo.core.Base"],"tags":[{"originalTitle":"singleton","title":"singleton","text":""}],"memberof":"Neo.ai.mcp.server.knowledge-base.services","longname":"Neo.ai.mcp.server.knowledge-base.services.VectorService","scope":"static","$longname":"Neo.ai.mcp.server.knowledge-base.services.VectorService","$kind":"class","id":6637,"neoClassName":"Neo.ai.mcp.server.knowledge-base.services.VectorService"},{"comment":"/**\n         * @member {String} className='Neo.ai.mcp.server.knowledge-base.services.VectorService'\n         * @protected\n         */","meta":{"filename":"VectorService.mjs","lineno":42,"columnno":8,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/ai/mcp/server/knowledge-base/services","code":{}},"kind":"member","name":"className","type":{"names":["String"]},"defaultvalue":"'Neo.ai.mcp.server.knowledge-base.services.VectorService'","access":"protected","longname":"className","scope":"global","$longname":"className","$kind":"property","id":6638,"neoClassName":"Neo.ai.mcp.server.knowledge-base.services.VectorService"},{"comment":"/**\n         * @member {Boolean} singleton=true\n         * @protected\n         */","meta":{"filename":"VectorService.mjs","lineno":47,"columnno":8,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/ai/mcp/server/knowledge-base/services","code":{}},"kind":"member","name":"singleton","type":{"names":["Boolean"]},"defaultvalue":true,"access":"protected","longname":"singleton","scope":"global","$longname":"singleton","$kind":"property","id":6639,"neoClassName":"Neo.ai.mcp.server.knowledge-base.services.VectorService"},{"comment":"/**\n     * Permanently deletes the knowledge base collection.\n     * @returns {Promise<object>} A promise that resolves to a success message.\n     */","meta":{"range":[2219,2913],"filename":"VectorService.mjs","lineno":54,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/ai/mcp/server/knowledge-base/services","code":{"id":"astnode100029817","name":"VectorService#deleteCollection","type":"MethodDefinition","paramnames":[]},"vars":{"":null}},"description":"<p>Permanently deletes the knowledge base collection.</p>\n","returns":[{"type":{"names":["Promise.<object>"]},"description":"A promise that resolves to a success message."}],"name":"deleteCollection","longname":"VectorService#deleteCollection","kind":"function","memberof":"VectorService","scope":"instance","params":[],"async":true,"$longname":"VectorService#deleteCollection","$kind":"method","id":6640,"neoClassName":"Neo.ai.mcp.server.knowledge-base.services.VectorService"},{"comment":"/**\n     * Reads a JSONL file, enriches data, generates embeddings, and updates ChromaDB.\n     * @param {String} knowledgeBasePath The path to the JSONL source file.\n     * @returns {Promise<object>} A promise that resolves to a success message.\n     */","meta":{"range":[3177,10139],"filename":"VectorService.mjs","lineno":76,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/ai/mcp/server/knowledge-base/services","code":{"id":"astnode100029889","name":"VectorService#embed","type":"MethodDefinition","paramnames":["knowledgeBasePath"]},"vars":{"":null}},"description":"<p>Reads a JSONL file, enriches data, generates embeddings, and updates ChromaDB.</p>\n","params":[{"type":{"names":["String"]},"description":"<p>The path to the JSONL source file.</p>\n","name":"knowledgeBasePath"}],"returns":[{"type":{"names":["Promise.<object>"]},"description":"A promise that resolves to a success message."}],"name":"embed","longname":"VectorService#embed","kind":"function","memberof":"VectorService","scope":"instance","async":true,"$longname":"VectorService#embed","$kind":"method","id":6641,"neoClassName":"Neo.ai.mcp.server.knowledge-base.services.VectorService"},{"comment":"/**\n     * Orchestrates the startup logic.\n     * Ensures dependent services are ready before this service is considered ready.\n     * @protected\n     */","meta":{"range":[10303,10398],"filename":"VectorService.mjs","lineno":246,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/ai/mcp/server/knowledge-base/services","code":{"id":"astnode100030726","name":"VectorService#initAsync","type":"MethodDefinition","paramnames":[]},"vars":{"":null}},"description":"<p>Orchestrates the startup logic.\nEnsures dependent services are ready before this service is considered ready.</p>\n","access":"protected","name":"initAsync","longname":"VectorService#initAsync","kind":"function","memberof":"VectorService","scope":"instance","params":[],"async":true,"$longname":"VectorService#initAsync","$kind":"method","id":6642,"neoClassName":"Neo.ai.mcp.server.knowledge-base.services.VectorService"}]}