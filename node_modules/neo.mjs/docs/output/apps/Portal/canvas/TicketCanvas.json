{"classData":[{"comment":"/**\n * @summary Renders the \"Neural Timeline\" visualization for the Portal's Ticket view.\n *\n * This class runs inside a SharedWorker (via `CanvasWorker`) to provide a high-performance,\n * main-thread-blocking-free animation. It visualizes the flow of time and activity connecting\n * timeline nodes (tickets/events).\n *\n * Key Visual Concepts:\n * 1. **The Spine**: A continuous, gradient-stroked line connecting all nodes.\n * 2. **The Pulse**: A \"data packet\" that travels along the spine.\n * 3. **Traffic Model Physics**: The pulse does not move at constant speed. It accelerates in empty space\n *    and decelerates when approaching nodes (\"interest points\"), creating a sense of \"observing\" the data.\n * 4. **Chameleon Effect**: The pulse dynamically changes its color to match the semantic color of the\n *    nearest node (e.g., Red for Bugs, Green for Features) as it passes by.\n *\n * @class Portal.canvas.TicketCanvas\n * @extends Neo.core.Base\n * @singleton\n */","meta":{"filename":"TicketCanvas.mjs","lineno":18,"columnno":0,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/portal/canvas","code":{}},"summary":"Renders the \"Neural Timeline\" visualization for the Portal's Ticket view.\n\nThis class runs inside a SharedWorker (via `CanvasWorker`) to provide a high-performance,\nmain-thread-blocking-free animation. It visualizes the flow of time and activity connecting\ntimeline nodes (tickets/events).\n\nKey Visual Concepts:\n1. **The Spine**: A continuous, gradient-stroked line connecting all nodes.\n2. **The Pulse**: A \"data packet\" that travels along the spine.\n3. **Traffic Model Physics**: The pulse does not move at constant speed. It accelerates in empty space\n   and decelerates when approaching nodes (\"interest points\"), creating a sense of \"observing\" the data.\n4. **Chameleon Effect**: The pulse dynamically changes its color to match the semantic color of the\n   nearest node (e.g., Red for Bugs, Green for Features) as it passes by.","kind":"class","name":"TicketCanvas","augments":["Neo.core.Base"],"tags":[{"originalTitle":"singleton","title":"singleton","text":""}],"memberof":"Portal.canvas","longname":"Portal.canvas.TicketCanvas","scope":"static","$longname":"Portal.canvas.TicketCanvas","$kind":"class","id":7466,"neoClassName":"Portal.canvas.TicketCanvas"},{"comment":"/**\n         * @member {String} className='Portal.canvas.TicketCanvas'\n         * @protected\n         */","meta":{"filename":"TicketCanvas.mjs","lineno":43,"columnno":8,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/portal/canvas","code":{}},"kind":"member","name":"className","type":{"names":["String"]},"defaultvalue":"'Portal.canvas.TicketCanvas'","access":"protected","longname":"className","scope":"global","$longname":"className","$kind":"property","id":7467,"neoClassName":"Portal.canvas.TicketCanvas"},{"comment":"/**\n         * Remote method access\n         * @member {Object} remote\n         * @protected\n         */","meta":{"filename":"TicketCanvas.mjs","lineno":49,"columnno":8,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/portal/canvas","code":{}},"description":"<p>Remote method access</p>\n","kind":"member","name":"remote","type":{"names":["Object"]},"access":"protected","longname":"remote","scope":"global","$longname":"remote","$kind":"property","id":7468,"neoClassName":"Portal.canvas.TicketCanvas"},{"comment":"/**\n         * @member {Boolean} singleton=true\n         * @protected\n         */","meta":{"filename":"TicketCanvas.mjs","lineno":61,"columnno":8,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/portal/canvas","code":{}},"kind":"member","name":"singleton","type":{"names":["Boolean"]},"defaultvalue":true,"access":"protected","longname":"singleton","scope":"global","$longname":"singleton","$kind":"property","id":7469,"neoClassName":"Portal.canvas.TicketCanvas"},{"comment":"/**\n     * @member {Number} animationId=null\n     */","meta":{"filename":"TicketCanvas.mjs","lineno":67,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/portal/canvas","code":{}},"kind":"member","name":"animationId","type":{"names":["Number"]},"defaultvalue":null,"longname":"animationId","scope":"global","$longname":"animationId","$kind":"property","id":7470,"neoClassName":"Portal.canvas.TicketCanvas"},{"comment":"/**\n     * @member {Number} baseSpeed=0.5\n     */","meta":{"filename":"TicketCanvas.mjs","lineno":71,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/portal/canvas","code":{}},"kind":"member","name":"baseSpeed","type":{"names":["Number"]},"defaultvalue":0.5,"longname":"baseSpeed","scope":"global","$longname":"baseSpeed","$kind":"property","id":7471,"neoClassName":"Portal.canvas.TicketCanvas"},{"comment":"/**\n     * @member {String|null} canvasId=null\n     */","meta":{"filename":"TicketCanvas.mjs","lineno":75,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/portal/canvas","code":{}},"kind":"member","name":"canvasId","type":{"names":["String","null"]},"defaultvalue":null,"longname":"canvasId","scope":"global","$longname":"canvasId","$kind":"property","id":7472,"neoClassName":"Portal.canvas.TicketCanvas"},{"comment":"/**\n     * @member {Object} canvasSize=null\n     */","meta":{"filename":"TicketCanvas.mjs","lineno":79,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/portal/canvas","code":{}},"kind":"member","name":"canvasSize","type":{"names":["Object"]},"defaultvalue":null,"longname":"canvasSize","scope":"global","$longname":"canvasSize","$kind":"property","id":7473,"neoClassName":"Portal.canvas.TicketCanvas"},{"comment":"/**\n     * @member {Object} context=null\n     */","meta":{"filename":"TicketCanvas.mjs","lineno":83,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/portal/canvas","code":{}},"kind":"member","name":"context","type":{"names":["Object"]},"defaultvalue":null,"longname":"context","scope":"global","$longname":"context","$kind":"property","id":7474,"neoClassName":"Portal.canvas.TicketCanvas"},{"comment":"/**\n     * @member {Number} lastFrameTime=0\n     */","meta":{"filename":"TicketCanvas.mjs","lineno":87,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/portal/canvas","code":{}},"kind":"member","name":"lastFrameTime","type":{"names":["Number"]},"defaultvalue":0,"longname":"lastFrameTime","scope":"global","$longname":"lastFrameTime","$kind":"property","id":7475,"neoClassName":"Portal.canvas.TicketCanvas"},{"comment":"/**\n     * @member {Array} nodes=[]\n     */","meta":{"filename":"TicketCanvas.mjs","lineno":91,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/portal/canvas","code":{}},"kind":"member","name":"nodes","type":{"names":["Array"]},"defaultvalue":"[]","longname":"nodes","scope":"global","$longname":"nodes","$kind":"property","id":7476,"neoClassName":"Portal.canvas.TicketCanvas"},{"comment":"/**\n     * @member {Number} pulseY=0\n     */","meta":{"filename":"TicketCanvas.mjs","lineno":95,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/portal/canvas","code":{}},"kind":"member","name":"pulseY","type":{"names":["Number"]},"defaultvalue":0,"longname":"pulseY","scope":"global","$longname":"pulseY","$kind":"property","id":7477,"neoClassName":"Portal.canvas.TicketCanvas"},{"comment":"/**\n     * @member {Function} renderLoop=this.render.bind(this)\n     */","meta":{"filename":"TicketCanvas.mjs","lineno":99,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/portal/canvas","code":{}},"kind":"member","name":"renderLoop","type":{"names":["function"]},"defaultvalue":"this.render.bind(this)","longname":"renderLoop","scope":"global","$longname":"renderLoop","$kind":"property","id":7478,"neoClassName":"Portal.canvas.TicketCanvas"},{"comment":"/**\n     * @member {Number} startY=0\n     */","meta":{"filename":"TicketCanvas.mjs","lineno":103,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/portal/canvas","code":{}},"kind":"member","name":"startY","type":{"names":["Number"]},"defaultvalue":0,"longname":"startY","scope":"global","$longname":"startY","$kind":"property","id":7479,"neoClassName":"Portal.canvas.TicketCanvas"},{"comment":"/**\n     * Clears the graph state and stops the render loop.\n     * This is called when the view unmounts to prevent \"Zombie Loops\".\n     */","meta":{"range":[3013,3224],"filename":"TicketCanvas.mjs","lineno":109,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/portal/canvas","code":{"id":"astnode100012181","name":"TicketCanvas#clearGraph","type":"MethodDefinition","paramnames":[]},"vars":{"":null}},"description":"<p>Clears the graph state and stops the render loop.\nThis is called when the view unmounts to prevent &quot;Zombie Loops&quot;.</p>\n","name":"clearGraph","longname":"TicketCanvas#clearGraph","kind":"function","memberof":"TicketCanvas","scope":"instance","params":[],"$longname":"TicketCanvas#clearGraph","$kind":"method","id":7480,"neoClassName":"Portal.canvas.TicketCanvas"},{"comment":"/**\n     * Calculates the horizontal (X) position on the spine for a given vertical (Y) position.\n     *\n     * Since the nodes are not vertically aligned (they weave left/right), the spine is a polyline.\n     * This method performs linear interpolation between the two nearest nodes to ensure the\n     * \"Pulse\" stays perfectly centered on the spine path as it travels.\n     *\n     * @param {Number} y - The vertical position\n     * @returns {Number} x - The calculated horizontal position on the spine\n     */","meta":{"range":[3746,4276],"filename":"TicketCanvas.mjs","lineno":127,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/portal/canvas","code":{"id":"astnode100012213","name":"TicketCanvas#getXAtY","type":"MethodDefinition","paramnames":["y"]},"vars":{"":null}},"description":"<p>Calculates the horizontal (X) position on the spine for a given vertical (Y) position.</p>\n<p>Since the nodes are not vertically aligned (they weave left/right), the spine is a polyline.\nThis method performs linear interpolation between the two nearest nodes to ensure the\n&quot;Pulse&quot; stays perfectly centered on the spine path as it travels.</p>\n","params":[{"type":{"names":["Number"]},"description":"<p>The vertical position</p>\n","name":"y"}],"returns":[{"type":{"names":["Number"]},"description":"x - The calculated horizontal position on the spine"}],"name":"getXAtY","longname":"TicketCanvas#getXAtY","kind":"function","memberof":"TicketCanvas","scope":"instance","$longname":"TicketCanvas#getXAtY","$kind":"method","id":7481,"neoClassName":"Portal.canvas.TicketCanvas"},{"comment":"/**\n     * Helper to parse hex to rgb\n     * @param {String} hex\n     * @returns {Object} {r,g,b}\n     */","meta":{"range":[4392,4744],"filename":"TicketCanvas.mjs","lineno":151,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/portal/canvas","code":{"id":"astnode100012343","name":"TicketCanvas#hexToRgb","type":"MethodDefinition","paramnames":["hex"]},"vars":{"":null}},"description":"<p>Helper to parse hex to rgb</p>\n","params":[{"type":{"names":["String"]},"name":"hex"}],"returns":[{"type":{"names":["Object"]},"description":"{r,g,b}"}],"name":"hexToRgb","longname":"TicketCanvas#hexToRgb","kind":"function","memberof":"TicketCanvas","scope":"instance","$longname":"TicketCanvas#hexToRgb","$kind":"method","id":7482,"neoClassName":"Portal.canvas.TicketCanvas"},{"comment":"/**\n     * Initializes the canvas context for the graph.\n     *\n     * **Async Initialization Pattern:**\n     * The `OffscreenCanvas` is transferred from the main thread to the `CanvasWorker` asynchronously.\n     * We cannot guarantee it exists in `Neo.currentWorker.canvasWindowMap` at the moment this method is called.\n     * Therefore, we use a polling mechanism (`checkCanvas`) to wait for the transfer to complete before\n     * starting the render loop.\n     *\n     * @param {Object} opts\n     * @param {String} opts.canvasId\n     * @param {String} opts.windowId\n     */","meta":{"range":[5330,6037],"filename":"TicketCanvas.mjs","lineno":178,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/portal/canvas","code":{"id":"astnode100012408","name":"TicketCanvas#initGraph","type":"MethodDefinition","paramnames":[""]},"vars":{"":null}},"description":"<p>Initializes the canvas context for the graph.</p>\n<p><strong>Async Initialization Pattern:</strong>\nThe <code>OffscreenCanvas</code> is transferred from the main thread to the <code>CanvasWorker</code> asynchronously.\nWe cannot guarantee it exists in <code>Neo.currentWorker.canvasWindowMap</code> at the moment this method is called.\nTherefore, we use a polling mechanism (<code>checkCanvas</code>) to wait for the transfer to complete before\nstarting the render loop.</p>\n","params":[{"type":{"names":["Object"]},"name":"opts"},{"type":{"names":["String"]},"name":"opts.canvasId"},{"type":{"names":["String"]},"name":"opts.windowId"}],"name":"initGraph","longname":"TicketCanvas#initGraph","kind":"function","memberof":"TicketCanvas","scope":"instance","$longname":"TicketCanvas#initGraph","$kind":"method","id":7483,"neoClassName":"Portal.canvas.TicketCanvas"},{"comment":"/**\n     * @param {Object} data\n     * @param {Array}  data.nodes\n     * @param {Boolean} [data.reset]\n     * @param {Number} [data.startY]\n     */","meta":{"range":[6195,6620],"filename":"TicketCanvas.mjs","lineno":206,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/portal/canvas","code":{"id":"astnode100012472","name":"TicketCanvas#updateGraphData","type":"MethodDefinition","paramnames":["data"]},"vars":{"":null}},"params":[{"type":{"names":["Object"]},"name":"data"},{"type":{"names":["Array"]},"name":"data.nodes"},{"type":{"names":["Boolean"]},"optional":true,"name":"data.reset"},{"type":{"names":["Number"]},"optional":true,"name":"data.startY"}],"name":"updateGraphData","longname":"TicketCanvas#updateGraphData","kind":"function","memberof":"TicketCanvas","scope":"instance","$longname":"TicketCanvas#updateGraphData","$kind":"method","id":7484,"neoClassName":"Portal.canvas.TicketCanvas"},{"comment":"/**\n     * @param {Object} size\n     * @param {Number} size.height\n     * @param {Number} size.width\n     */","meta":{"range":[6739,6956],"filename":"TicketCanvas.mjs","lineno":228,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/portal/canvas","code":{"id":"astnode100012542","name":"TicketCanvas#updateSize","type":"MethodDefinition","paramnames":["size"]},"vars":{"":null}},"params":[{"type":{"names":["Object"]},"name":"size"},{"type":{"names":["Number"]},"name":"size.height"},{"type":{"names":["Number"]},"name":"size.width"}],"name":"updateSize","longname":"TicketCanvas#updateSize","kind":"function","memberof":"TicketCanvas","scope":"instance","$longname":"TicketCanvas#updateSize","$kind":"method","id":7485,"neoClassName":"Portal.canvas.TicketCanvas"},{"comment":"/**\n     * The Main Animation Loop (60fps).\n     *\n     * This method is responsible for:\n     * 1. **Physics Calculation**: Determining the pulse's speed based on proximity to nodes (\"Traffic Model\").\n     * 2. **State Updates**: Updating the pulse's position (`pulseY`) and color (`Chameleon Effect`).\n     * 3. **Drawing**: Rendering the spine, the pulse, and the node glows to the `OffscreenCanvas`.\n     *\n     * It uses `setTimeout` instead of `requestAnimationFrame` because SharedWorkers do not generally support rAF.\n     */","meta":{"range":[7500,13637],"filename":"TicketCanvas.mjs","lineno":249,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/portal/canvas","code":{"id":"astnode100012586","name":"TicketCanvas#render","type":"MethodDefinition","paramnames":[]},"vars":{"":null}},"description":"<p>The Main Animation Loop (60fps).</p>\n<p>This method is responsible for:</p>\n<ol>\n<li><strong>Physics Calculation</strong>: Determining the pulse&#39;s speed based on proximity to nodes (&quot;Traffic Model&quot;).</li>\n<li><strong>State Updates</strong>: Updating the pulse&#39;s position (<code>pulseY</code>) and color (<code>Chameleon Effect</code>).</li>\n<li><strong>Drawing</strong>: Rendering the spine, the pulse, and the node glows to the <code>OffscreenCanvas</code>.</li>\n</ol>\n<p>It uses <code>setTimeout</code> instead of <code>requestAnimationFrame</code> because SharedWorkers do not generally support rAF.</p>\n","name":"render","longname":"TicketCanvas#render","kind":"function","memberof":"TicketCanvas","scope":"instance","params":[],"$longname":"TicketCanvas#render","$kind":"method","id":7486,"neoClassName":"Portal.canvas.TicketCanvas"}]}