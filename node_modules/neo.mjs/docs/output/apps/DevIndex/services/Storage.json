{"classData":[{"comment":"/**\n * @summary DevIndex Persistence Layer (JSON File System).\n *\n * This service manages all file I/O operations, acting as a simple, flat-file database abstraction.\n * It ensures atomic-ish writes (by overwriting files completely) and handles the normalization of data.\n *\n * **Managed Resources:**\n * - **`users.jsonl` (Rich Data Store):** Contains the full, enriched profile data for all users who met the threshold.\n *   This is the source of truth for the Frontend UI.\n *   **The `maxUsers` Cap:** To ensure the application remains highly responsive, the size of this file is\n *   strictly capped (e.g., 50,000 users). While the data is gzipped and streamed to the client, an unbounded\n *   file (e.g., 100k users / 40MB) would eventually cause client-side parsing and memory bottlenecks.\n *   When the cap is reached, `Storage` automatically prunes the bottom performers and raises the entry\n *   bar via `threshold.json`.\n * - **`tracker.json` (The Index):** A lightweight map (`login` -> `lastUpdate`) used by the Backend to schedule updates.\n *   It includes \"Pending\" users (`lastUpdate: null`) discovered by the Spider but not yet processed.\n * - **`visited.json` (Cache):** A Set of keys (e.g., `repo:owner/name`) to prevent the Spider from re-scanning the same sources.\n * - **`blocklist.json` / `allowlist.json`:** Configuration files for manual overrides.\n *\n * **Key Features:**\n * - **Case Insensitivity:** Automatically normalizes login keys to lowercase to prevent duplicates.\n * - **Deletion Support:** The `updateTracker` method supports a `delete: true` flag for active pruning.\n *\n * @class DevIndex.services.Storage\n * @extends Neo.core.Base\n * @singleton\n */","meta":{"filename":"Storage.mjs","lineno":5,"columnno":0,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/devindex/services","code":{}},"summary":"DevIndex Persistence Layer (JSON File System).\n\nThis service manages all file I/O operations, acting as a simple, flat-file database abstraction.\nIt ensures atomic-ish writes (by overwriting files completely) and handles the normalization of data.\n\n**Managed Resources:**\n- **`users.jsonl` (Rich Data Store):** Contains the full, enriched profile data for all users who met the threshold.\n  This is the source of truth for the Frontend UI.\n  **The `maxUsers` Cap:** To ensure the application remains highly responsive, the size of this file is\n  strictly capped (e.g., 50,000 users). While the data is gzipped and streamed to the client, an unbounded\n  file (e.g., 100k users / 40MB) would eventually cause client-side parsing and memory bottlenecks.\n  When the cap is reached, `Storage` automatically prunes the bottom performers and raises the entry\n  bar via `threshold.json`.\n- **`tracker.json` (The Index):** A lightweight map (`login` -> `lastUpdate`) used by the Backend to schedule updates.\n  It includes \"Pending\" users (`lastUpdate: null`) discovered by the Spider but not yet processed.\n- **`visited.json` (Cache):** A Set of keys (e.g., `repo:owner/name`) to prevent the Spider from re-scanning the same sources.\n- **`blocklist.json` / `allowlist.json`:** Configuration files for manual overrides.\n\n**Key Features:**\n- **Case Insensitivity:** Automatically normalizes login keys to lowercase to prevent duplicates.\n- **Deletion Support:** The `updateTracker` method supports a `delete: true` flag for active pruning.","kind":"class","name":"Storage","augments":["Neo.core.Base"],"tags":[{"originalTitle":"singleton","title":"singleton","text":""}],"memberof":"DevIndex.services","longname":"DevIndex.services.Storage","scope":"static","$longname":"DevIndex.services.Storage","$kind":"class","id":8065,"neoClassName":"DevIndex.services.Storage"},{"comment":"/**\n         * @member {String} className='DevIndex.services.Storage'\n         * @protected\n         */","meta":{"filename":"Storage.mjs","lineno":38,"columnno":8,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/devindex/services","code":{}},"kind":"member","name":"className","type":{"names":["String"]},"defaultvalue":"'DevIndex.services.Storage'","access":"protected","longname":"className","scope":"global","$longname":"className","$kind":"property","id":8066,"neoClassName":"DevIndex.services.Storage"},{"comment":"/**\n         * @member {Boolean} singleton=true\n         * @protected\n         */","meta":{"filename":"Storage.mjs","lineno":43,"columnno":8,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/devindex/services","code":{}},"kind":"member","name":"singleton","type":{"names":["Boolean"]},"defaultvalue":true,"access":"protected","longname":"singleton","scope":"global","$longname":"singleton","$kind":"property","id":8067,"neoClassName":"DevIndex.services.Storage"},{"comment":"/**\n     * Initializes the storage service.\n     * Ensures all required data files exist.\n     * @returns {Promise<void>}\n     */","meta":{"range":[2268,2327],"filename":"Storage.mjs","lineno":51,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/devindex/services","code":{"id":"astnode100010763","name":"Storage#initAsync","type":"MethodDefinition","paramnames":[]},"vars":{"":null}},"description":"<p>Initializes the storage service.\nEnsures all required data files exist.</p>\n","returns":[{"type":{"names":["Promise.<void>"]}}],"name":"initAsync","longname":"Storage#initAsync","kind":"function","memberof":"Storage","scope":"instance","params":[],"async":true,"$longname":"Storage#initAsync","$kind":"method","id":8068,"neoClassName":"DevIndex.services.Storage"},{"comment":"/**\n     * Checks if data files exist and creates them with defaults if missing.\n     * @returns {Promise<void>}\n     */","meta":{"range":[2458,3411],"filename":"Storage.mjs","lineno":59,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/devindex/services","code":{"id":"astnode100010773","name":"Storage#ensureFiles","type":"MethodDefinition","paramnames":[]},"vars":{"":null}},"description":"<p>Checks if data files exist and creates them with defaults if missing.</p>\n","returns":[{"type":{"names":["Promise.<void>"]}}],"name":"ensureFiles","longname":"Storage#ensureFiles","kind":"function","memberof":"Storage","scope":"instance","params":[],"async":true,"$longname":"Storage#ensureFiles","$kind":"method","id":8069,"neoClassName":"DevIndex.services.Storage"},{"comment":"/**\n     * Reads the blocklist.\n     * @returns {Promise<Set<String>>} Set of blocklisted logins.\n     */","meta":{"range":[3527,3687],"filename":"Storage.mjs","lineno":86,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/devindex/services","code":{"id":"astnode100010913","name":"Storage#getBlocklist","type":"MethodDefinition","paramnames":[]},"vars":{"":null}},"description":"<p>Reads the blocklist.</p>\n","returns":[{"type":{"names":["Promise.<Set.<String>>"]},"description":"Set of blocklisted logins."}],"name":"getBlocklist","longname":"Storage#getBlocklist","kind":"function","memberof":"Storage","scope":"instance","params":[],"async":true,"$longname":"Storage#getBlocklist","$kind":"method","id":8070,"neoClassName":"DevIndex.services.Storage"},{"comment":"/**\n     * Adds users to the blocklist.\n     * @param {Array<String>} logins\n     * @returns {Promise<void>}\n     */","meta":{"range":[3814,4455],"filename":"Storage.mjs","lineno":96,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/devindex/services","code":{"id":"astnode100010944","name":"Storage#addToBlocklist","type":"MethodDefinition","paramnames":["logins"]},"vars":{"":null}},"description":"<p>Adds users to the blocklist.</p>\n","params":[{"type":{"names":["Array.<String>"]},"name":"logins"}],"returns":[{"type":{"names":["Promise.<void>"]}}],"name":"addToBlocklist","longname":"Storage#addToBlocklist","kind":"function","memberof":"Storage","scope":"instance","async":true,"$longname":"Storage#addToBlocklist","$kind":"method","id":8071,"neoClassName":"DevIndex.services.Storage"},{"comment":"/**\n     * Removes users from the blocklist.\n     * @param {Array<String>} logins\n     * @returns {Promise<void>}\n     */","meta":{"range":[4587,5032],"filename":"Storage.mjs","lineno":120,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/devindex/services","code":{"id":"astnode100011052","name":"Storage#removeFromBlocklist","type":"MethodDefinition","paramnames":["logins"]},"vars":{"":null}},"description":"<p>Removes users from the blocklist.</p>\n","params":[{"type":{"names":["Array.<String>"]},"name":"logins"}],"returns":[{"type":{"names":["Promise.<void>"]}}],"name":"removeFromBlocklist","longname":"Storage#removeFromBlocklist","kind":"function","memberof":"Storage","scope":"instance","async":true,"$longname":"Storage#removeFromBlocklist","$kind":"method","id":8072,"neoClassName":"DevIndex.services.Storage"},{"comment":"/**\n     * Reads the opt-out sync state.\n     * @returns {Promise<Object>}\n     */","meta":{"range":[5125,5230],"filename":"Storage.mjs","lineno":136,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/devindex/services","code":{"id":"astnode100011129","name":"Storage#getOptOutSync","type":"MethodDefinition","paramnames":[]},"vars":{"":null}},"description":"<p>Reads the opt-out sync state.</p>\n","returns":[{"type":{"names":["Promise.<Object>"]}}],"name":"getOptOutSync","longname":"Storage#getOptOutSync","kind":"function","memberof":"Storage","scope":"instance","params":[],"async":true,"$longname":"Storage#getOptOutSync","$kind":"method","id":8073,"neoClassName":"DevIndex.services.Storage"},{"comment":"/**\n     * Saves the opt-out sync state.\n     * @param {Object} data\n     * @returns {Promise<void>}\n     */","meta":{"range":[5349,5444],"filename":"Storage.mjs","lineno":145,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/devindex/services","code":{"id":"astnode100011146","name":"Storage#saveOptOutSync","type":"MethodDefinition","paramnames":["data"]},"vars":{"":null}},"description":"<p>Saves the opt-out sync state.</p>\n","params":[{"type":{"names":["Object"]},"name":"data"}],"returns":[{"type":{"names":["Promise.<void>"]}}],"name":"saveOptOutSync","longname":"Storage#saveOptOutSync","kind":"function","memberof":"Storage","scope":"instance","async":true,"$longname":"Storage#saveOptOutSync","$kind":"method","id":8074,"neoClassName":"DevIndex.services.Storage"},{"comment":"/**\n     * Reads the opt-in sync state.\n     * @returns {Promise<Object>}\n     */","meta":{"range":[5536,5639],"filename":"Storage.mjs","lineno":153,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/devindex/services","code":{"id":"astnode100011163","name":"Storage#getOptInSync","type":"MethodDefinition","paramnames":[]},"vars":{"":null}},"description":"<p>Reads the opt-in sync state.</p>\n","returns":[{"type":{"names":["Promise.<Object>"]}}],"name":"getOptInSync","longname":"Storage#getOptInSync","kind":"function","memberof":"Storage","scope":"instance","params":[],"async":true,"$longname":"Storage#getOptInSync","$kind":"method","id":8075,"neoClassName":"DevIndex.services.Storage"},{"comment":"/**\n     * Saves the opt-in sync state.\n     * @param {Object} data\n     * @returns {Promise<void>}\n     */","meta":{"range":[5757,5850],"filename":"Storage.mjs","lineno":162,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/devindex/services","code":{"id":"astnode100011180","name":"Storage#saveOptInSync","type":"MethodDefinition","paramnames":["data"]},"vars":{"":null}},"description":"<p>Saves the opt-in sync state.</p>\n","params":[{"type":{"names":["Object"]},"name":"data"}],"returns":[{"type":{"names":["Promise.<void>"]}}],"name":"saveOptInSync","longname":"Storage#saveOptInSync","kind":"function","memberof":"Storage","scope":"instance","async":true,"$longname":"Storage#saveOptInSync","$kind":"method","id":8076,"neoClassName":"DevIndex.services.Storage"},{"comment":"/**\n     * Reads the allowlist.\n     * @returns {Promise<Set<String>>} Set of allowlisted logins.\n     */","meta":{"range":[5966,6126],"filename":"Storage.mjs","lineno":170,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/devindex/services","code":{"id":"astnode100011197","name":"Storage#getAllowlist","type":"MethodDefinition","paramnames":[]},"vars":{"":null}},"description":"<p>Reads the allowlist.</p>\n","returns":[{"type":{"names":["Promise.<Set.<String>>"]},"description":"Set of allowlisted logins."}],"name":"getAllowlist","longname":"Storage#getAllowlist","kind":"function","memberof":"Storage","scope":"instance","params":[],"async":true,"$longname":"Storage#getAllowlist","$kind":"method","id":8077,"neoClassName":"DevIndex.services.Storage"},{"comment":"/**\n     * Reads the minimum required total contributions from the threshold file.\n     * @returns {Promise<Number>}\n     */","meta":{"range":[6261,6442],"filename":"Storage.mjs","lineno":179,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/devindex/services","code":{"id":"astnode100011228","name":"Storage#getLowestContributionThreshold","type":"MethodDefinition","paramnames":[]},"vars":{"":null}},"description":"<p>Reads the minimum required total contributions from the threshold file.</p>\n","returns":[{"type":{"names":["Promise.<Number>"]}}],"name":"getLowestContributionThreshold","longname":"Storage#getLowestContributionThreshold","kind":"function","memberof":"Storage","scope":"instance","params":[],"async":true,"$longname":"Storage#getLowestContributionThreshold","$kind":"method","id":8078,"neoClassName":"DevIndex.services.Storage"},{"comment":"/**\n     * Reads the failed list (Penalty Box).\n     * Handles legacy Array format by migrating to Map with current timestamp.\n     * @returns {Promise<Map<String, String>>} Map of login -> timestamp.\n     */","meta":{"range":[6661,7157],"filename":"Storage.mjs","lineno":189,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/devindex/services","code":{"id":"astnode100011256","name":"Storage#getFailed","type":"MethodDefinition","paramnames":[]},"vars":{"":null}},"description":"<p>Reads the failed list (Penalty Box).\nHandles legacy Array format by migrating to Map with current timestamp.</p>\n","returns":[{"type":{"names":["Promise.<Map.<String, String>>"]},"description":"Map of login -> timestamp."}],"name":"getFailed","longname":"Storage#getFailed","kind":"function","memberof":"Storage","scope":"instance","params":[],"async":true,"$longname":"Storage#getFailed","$kind":"method","id":8079,"neoClassName":"DevIndex.services.Storage"},{"comment":"/**\n     * Updates the failed list (Penalty Box).\n     * @param {Array<String>} logins List of logins to add or remove.\n     * @param {Boolean} [add=true] True to add, False to remove.\n     * @returns {Promise<void>}\n     */","meta":{"range":[7392,8035],"filename":"Storage.mjs","lineno":210,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/devindex/services","code":{"id":"astnode100011333","name":"Storage#updateFailed","type":"MethodDefinition","paramnames":["logins","add"]},"vars":{"":null}},"description":"<p>Updates the failed list (Penalty Box).</p>\n","params":[{"type":{"names":["Array.<String>"]},"description":"<p>List of logins to add or remove.</p>\n","name":"logins"},{"type":{"names":["Boolean"]},"optional":true,"defaultvalue":true,"description":"<p>True to add, False to remove.</p>\n","name":"add"}],"returns":[{"type":{"names":["Promise.<void>"]}}],"name":"updateFailed","longname":"Storage#updateFailed","kind":"function","memberof":"Storage","scope":"instance","async":true,"$longname":"Storage#updateFailed","$kind":"method","id":8080,"neoClassName":"DevIndex.services.Storage"},{"comment":"/**\n     * Persists the failed map to disk.\n     * @param {Map<String, String>} map\n     * @returns {Promise<void>}\n     */","meta":{"range":[8169,8391],"filename":"Storage.mjs","lineno":239,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/devindex/services","code":{"id":"astnode100011422","name":"Storage#saveFailed","type":"MethodDefinition","paramnames":["map"]},"vars":{"":null}},"description":"<p>Persists the failed map to disk.</p>\n","params":[{"type":{"names":["Map.<String, String>"]},"name":"map"}],"returns":[{"type":{"names":["Promise.<void>"]}}],"name":"saveFailed","longname":"Storage#saveFailed","kind":"function","memberof":"Storage","scope":"instance","async":true,"$longname":"Storage#saveFailed","$kind":"method","id":8081,"neoClassName":"DevIndex.services.Storage"},{"comment":"/**\n     * Reads the visited log.\n     * @returns {Promise<Set<String>>} Set of visited keys (e.g. \"repo:owner/name\", \"user:login\").\n     */","meta":{"range":[8542,8666],"filename":"Storage.mjs","lineno":251,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/devindex/services","code":{"id":"astnode100011471","name":"Storage#getVisited","type":"MethodDefinition","paramnames":[]},"vars":{"":null}},"description":"<p>Reads the visited log.</p>\n","returns":[{"type":{"names":["Promise.<Set.<String>>"]},"description":"Set of visited keys (e.g. \"repo:owner/name\", \"user:login\")."}],"name":"getVisited","longname":"Storage#getVisited","kind":"function","memberof":"Storage","scope":"instance","params":[],"async":true,"$longname":"Storage#getVisited","$kind":"method","id":8082,"neoClassName":"DevIndex.services.Storage"},{"comment":"/**\n     * Saves new items to the visited log.\n     * @param {Set<String>|Array<String>} newItems\n     * @returns {Promise<void>}\n     */","meta":{"range":[8814,9372],"filename":"Storage.mjs","lineno":261,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/devindex/services","code":{"id":"astnode100011493","name":"Storage#updateVisited","type":"MethodDefinition","paramnames":["newItems"]},"vars":{"":null}},"description":"<p>Saves new items to the visited log.</p>\n","params":[{"type":{"names":["Set.<String>","Array.<String>"]},"name":"newItems"}],"returns":[{"type":{"names":["Promise.<void>"]}}],"name":"updateVisited","longname":"Storage#updateVisited","kind":"function","memberof":"Storage","scope":"instance","async":true,"$longname":"Storage#updateVisited","$kind":"method","id":8083,"neoClassName":"DevIndex.services.Storage"},{"comment":"/**\n     * Reads the tracker index (formerly users.json).\n     * @returns {Promise<Array<{login: String, lastUpdate: String}>>}\n     */","meta":{"range":[9518,9743],"filename":"Storage.mjs","lineno":284,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/devindex/services","code":{"id":"astnode100011580","name":"Storage#getTracker","type":"MethodDefinition","paramnames":[]},"vars":{"":null}},"description":"<p>Reads the tracker index (formerly users.json).</p>\n","returns":[{"type":{"names":["Promise.<Array.<{login: String, lastUpdate: String}>>"]}}],"name":"getTracker","longname":"Storage#getTracker","kind":"function","memberof":"Storage","scope":"instance","params":[],"async":true,"$longname":"Storage#getTracker","$kind":"method","id":8084,"neoClassName":"DevIndex.services.Storage"},{"comment":"/**\n     * Updates the Tracker Index with new states or timestamps.\n     *\n     * Handles three types of operations based on the input:\n     * 1.  **Insert (Discovery):** Adds a new user with `lastUpdate: null`.\n     * 2.  **Update (Success):** Updates an existing user with a new `lastUpdate` timestamp.\n     * 3.  **Delete (Pruning):** Removes a user if `delete: true` is present in the update object.\n     *\n     * Performs a case-insensitive lookup to prevent duplicate entries for the same user.\n     *\n     * @param {Object[]} updates List of update operations.\n     * @param {String} updates[].login The user's login.\n     * @param {String} [updates[].lastUpdate] The last update timestamp.\n     * @param {Boolean} [updates[].delete] True to delete the user.\n     * @returns {Promise<void>}\n     */","meta":{"range":[10559,12552],"filename":"Storage.mjs","lineno":307,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/devindex/services","code":{"id":"astnode100011614","name":"Storage#updateTracker","type":"MethodDefinition","paramnames":["updates"]},"vars":{"":null}},"description":"<p>Updates the Tracker Index with new states or timestamps.</p>\n<p>Handles three types of operations based on the input:</p>\n<ol>\n<li><strong>Insert (Discovery):</strong> Adds a new user with <code>lastUpdate: null</code>.</li>\n<li><strong>Update (Success):</strong> Updates an existing user with a new <code>lastUpdate</code> timestamp.</li>\n<li><strong>Delete (Pruning):</strong> Removes a user if <code>delete: true</code> is present in the update object.</li>\n</ol>\n<p>Performs a case-insensitive lookup to prevent duplicate entries for the same user.</p>\n","params":[{"type":{"names":["Array.<Object>"]},"description":"<p>List of update operations.</p>\n","name":"updates"},{"type":{"names":["String"]},"description":"<p>The user&#39;s login.</p>\n","name":"updates[].login"},{"type":{"names":["String"]},"optional":true,"description":"<p>The last update timestamp.</p>\n","name":"updates[].lastUpdate"},{"type":{"names":["Boolean"]},"optional":true,"description":"<p>True to delete the user.</p>\n","name":"updates[].delete"}],"returns":[{"type":{"names":["Promise.<void>"]}}],"name":"updateTracker","longname":"Storage#updateTracker","kind":"function","memberof":"Storage","scope":"instance","async":true,"$longname":"Storage#updateTracker","$kind":"method","id":8085,"neoClassName":"DevIndex.services.Storage"},{"comment":"/**\n     * Reads the rich users data (formerly data.json).\n     * @returns {Promise<Array<Object>>}\n     */","meta":{"range":[12670,12748],"filename":"Storage.mjs","lineno":359,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/devindex/services","code":{"id":"astnode100011811","name":"Storage#getUsers","type":"MethodDefinition","paramnames":[]},"vars":{"":null}},"description":"<p>Reads the rich users data (formerly data.json).</p>\n","returns":[{"type":{"names":["Promise.<Array.<Object>>"]}}],"name":"getUsers","longname":"Storage#getUsers","kind":"function","memberof":"Storage","scope":"instance","params":[],"async":true,"$longname":"Storage#getUsers","$kind":"method","id":8086,"neoClassName":"DevIndex.services.Storage"},{"comment":"/**\n     * Persists enriched user profiles to the Rich Data Store (`users.json`).\n     *\n     * Performs a **Merge & Sort** operation:\n     * 1.  Loads existing data.\n     * 2.  Overwrites or adds new records based on the `login` key.\n     * 3.  **Sorts** the entire dataset by `total_contributions` (descending) to ensure the file is always ready for UI consumption.\n     * 4.  Writes the result back to disk atomically.\n     *\n     * @param {Array<Object>} newRecords Array of user objects to upsert.\n     * @returns {Promise<void>}\n     */","meta":{"range":[13301,15472],"filename":"Storage.mjs","lineno":375,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/devindex/services","code":{"id":"astnode100011826","name":"Storage#updateUsers","type":"MethodDefinition","paramnames":["newRecords"]},"vars":{"":null}},"description":"<p>Persists enriched user profiles to the Rich Data Store (<code>users.json</code>).</p>\n<p>Performs a <strong>Merge &amp; Sort</strong> operation:</p>\n<ol>\n<li>Loads existing data.</li>\n<li>Overwrites or adds new records based on the <code>login</code> key.</li>\n<li><strong>Sorts</strong> the entire dataset by <code>total_contributions</code> (descending) to ensure the file is always ready for UI consumption.</li>\n<li>Writes the result back to disk atomically.</li>\n</ol>\n","params":[{"type":{"names":["Array.<Object>"]},"description":"<p>Array of user objects to upsert.</p>\n","name":"newRecords"}],"returns":[{"type":{"names":["Promise.<void>"]}}],"name":"updateUsers","longname":"Storage#updateUsers","kind":"function","memberof":"Storage","scope":"instance","async":true,"$longname":"Storage#updateUsers","$kind":"method","id":8087,"neoClassName":"DevIndex.services.Storage"},{"comment":"/**\n     * Removes users from the Rich Data Store (`users.jsonl`).\n     * @param {Array<String>} logins The list of logins to remove.\n     * @returns {Promise<Boolean>} True if any were removed.\n     */","meta":{"range":[15685,16130],"filename":"Storage.mjs","lineno":429,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/devindex/services","code":{"id":"astnode100012060","name":"Storage#deleteUsers","type":"MethodDefinition","paramnames":["logins"]},"vars":{"":null}},"description":"<p>Removes users from the Rich Data Store (<code>users.jsonl</code>).</p>\n","params":[{"type":{"names":["Array.<String>"]},"description":"<p>The list of logins to remove.</p>\n","name":"logins"}],"returns":[{"type":{"names":["Promise.<Boolean>"]},"description":"True if any were removed."}],"name":"deleteUsers","longname":"Storage#deleteUsers","kind":"function","memberof":"Storage","scope":"instance","async":true,"$longname":"Storage#deleteUsers","$kind":"method","id":8088,"neoClassName":"DevIndex.services.Storage"},{"comment":"/**\n     * Reads a JSON or JSONL file.\n     * @param {String} path\n     * @param {*} defaultValue\n     * @returns {Promise<*>}\n     * @private\n     */","meta":{"range":[16325,16910],"filename":"Storage.mjs","lineno":451,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/devindex/services","code":{"id":"astnode100012137","name":"Storage#readJson","type":"MethodDefinition","paramnames":["path","defaultValue"]},"vars":{"":null}},"description":"<p>Reads a JSON or JSONL file.</p>\n","params":[{"type":{"names":["String"]},"name":"path"},{"type":{"names":["*"]},"name":"defaultValue"}],"returns":[{"type":{"names":["Promise.<*>"]}}],"access":"private","name":"readJson","longname":"Storage#readJson","kind":"function","memberof":"Storage","scope":"instance","async":true,"$longname":"Storage#readJson","$kind":"method","id":8089,"neoClassName":"DevIndex.services.Storage"},{"comment":"/**\n     * Writes data to a JSON or JSONL file.\n     * @param {String} path\n     * @param {*} data\n     * @returns {Promise<void>}\n     * @private\n     */","meta":{"range":[17075,17853],"filename":"Storage.mjs","lineno":479,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/apps/devindex/services","code":{"id":"astnode100012213","name":"Storage#writeJson","type":"MethodDefinition","paramnames":["path","data"]},"vars":{"":null}},"description":"<p>Writes data to a JSON or JSONL file.</p>\n","params":[{"type":{"names":["String"]},"name":"path"},{"type":{"names":["*"]},"name":"data"}],"returns":[{"type":{"names":["Promise.<void>"]}}],"access":"private","name":"writeJson","longname":"Storage#writeJson","kind":"function","memberof":"Storage","scope":"instance","async":true,"$longname":"Storage#writeJson","$kind":"method","id":8090,"neoClassName":"DevIndex.services.Storage"}]}