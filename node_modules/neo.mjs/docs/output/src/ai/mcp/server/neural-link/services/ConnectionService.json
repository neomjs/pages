{"classData":[{"comment":"/**\n * @summary Manages WebSocket connections and JSON-RPC communication with the browser.\n *\n * This service acts as the **gateway** between the MCP server and the Neo.mjs application running in the browser.\n * It maintains active WebSocket sessions, handles the JSON-RPC handshake, and manages the lifecycle of\n * remote procedure calls (RPC).\n *\n * Key responsibilities include:\n * 1.  **Session Management**: Tracking active browser windows (`windowId`) and their WebSocket connections.\n * 2.  **RPC Orchestration**: Sending requests to the browser (`call`) and resolving the corresponding promises when a response is received.\n * 3.  **Message Routing**: Handling incoming notifications and responses from the browser.\n * 4.  **Error Handling**: Managing timeouts and connection errors to ensure robust communication.\n *\n * This class implements the **Request-Response** pattern over WebSockets, allowing the agent to execute\n * code within the browser context asynchronously.\n *\n * @class Neo.ai.mcp.server.neural-link.services.ConnectionService\n * @extends Neo.core.Base\n * @singleton\n */","meta":{"filename":"ConnectionService.mjs","lineno":6,"columnno":0,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/ai/mcp/server/neural-link/services","code":{}},"summary":"Manages WebSocket connections and JSON-RPC communication with the browser.\n\nThis service acts as the **gateway** between the MCP server and the Neo.mjs application running in the browser.\nIt maintains active WebSocket sessions, handles the JSON-RPC handshake, and manages the lifecycle of\nremote procedure calls (RPC).\n\nKey responsibilities include:\n1.  **Session Management**: Tracking active browser windows (`windowId`) and their WebSocket connections.\n2.  **RPC Orchestration**: Sending requests to the browser (`call`) and resolving the corresponding promises when a response is received.\n3.  **Message Routing**: Handling incoming notifications and responses from the browser.\n4.  **Error Handling**: Managing timeouts and connection errors to ensure robust communication.\n\nThis class implements the **Request-Response** pattern over WebSockets, allowing the agent to execute\ncode within the browser context asynchronously.","kind":"class","name":"ConnectionService","augments":["Neo.core.Base"],"tags":[{"originalTitle":"singleton","title":"singleton","text":""}],"memberof":"Neo.ai.mcp.server.neural-link.services","longname":"Neo.ai.mcp.server.neural-link.services.ConnectionService","scope":"static","$longname":"Neo.ai.mcp.server.neural-link.services.ConnectionService","$kind":"class","id":6408,"neoClassName":"Neo.ai.mcp.server.neural-link.services.ConnectionService"},{"comment":"/**\n         * @member {String} className='Neo.ai.mcp.server.neural-link.services.ConnectionService'\n         * @protected\n         */","meta":{"filename":"ConnectionService.mjs","lineno":32,"columnno":8,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/ai/mcp/server/neural-link/services","code":{}},"kind":"member","name":"className","type":{"names":["String"]},"defaultvalue":"'Neo.ai.mcp.server.neural-link.services.ConnectionService'","access":"protected","longname":"className","scope":"global","$longname":"className","$kind":"property","id":6409,"neoClassName":"Neo.ai.mcp.server.neural-link.services.ConnectionService"},{"comment":"/**\n         * @member {Number} port=8081\n         * @protected\n         */","meta":{"filename":"ConnectionService.mjs","lineno":37,"columnno":8,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/ai/mcp/server/neural-link/services","code":{}},"kind":"member","name":"port","type":{"names":["Number"]},"defaultvalue":8081,"access":"protected","longname":"port","scope":"global","$longname":"port","$kind":"property","id":6410,"neoClassName":"Neo.ai.mcp.server.neural-link.services.ConnectionService"},{"comment":"/**\n         * @member {Boolean} singleton=true\n         * @protected\n         */","meta":{"filename":"ConnectionService.mjs","lineno":42,"columnno":8,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/ai/mcp/server/neural-link/services","code":{}},"kind":"member","name":"singleton","type":{"names":["Boolean"]},"defaultvalue":true,"access":"protected","longname":"singleton","scope":"global","$longname":"singleton","$kind":"property","id":6411,"neoClassName":"Neo.ai.mcp.server.neural-link.services.ConnectionService"},{"comment":"/**\n     * Message ID counter.\n     */","meta":{"range":[1841,1850],"filename":"ConnectionService.mjs","lineno":51,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/ai/mcp/server/neural-link/services","code":{"id":"astnode100035152","name":"msgId","type":"ClassProperty"}},"description":"<p>Message ID counter.</p>\n","name":"msgId","longname":"ConnectionService#msgId","kind":"member","memberof":"ConnectionService","scope":"instance","$longname":"ConnectionService#msgId","$kind":"property","id":6412,"neoClassName":"Neo.ai.mcp.server.neural-link.services.ConnectionService"},{"comment":"/**\n     * Pending RPC requests awaiting response from Browser.\n     * Map<messageId, {resolve, reject, timeout}>\n     */","meta":{"range":[1981,2008],"filename":"ConnectionService.mjs","lineno":57,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/ai/mcp/server/neural-link/services","code":{"id":"astnode100035154","name":"pendingRequests","type":"ClassProperty"}},"description":"<p>Pending RPC requests awaiting response from Browser.\nMap&lt;messageId, {resolve, reject, timeout}&gt;</p>\n","name":"pendingRequests","longname":"ConnectionService#pendingRequests","kind":"member","memberof":"ConnectionService","scope":"instance","$longname":"ConnectionService#pendingRequests","$kind":"property","id":6413,"neoClassName":"Neo.ai.mcp.server.neural-link.services.ConnectionService"},{"comment":"/**\n     * Active WebSocket sessions.\n     * Map<windowId, WebSocket>\n     */","meta":{"range":[2095,2115],"filename":"ConnectionService.mjs","lineno":62,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/ai/mcp/server/neural-link/services","code":{"id":"astnode100035157","name":"sessions","type":"ClassProperty"}},"description":"<p>Active WebSocket sessions.\nMap&lt;windowId, WebSocket&gt;</p>\n","name":"sessions","longname":"ConnectionService#sessions","kind":"member","memberof":"ConnectionService","scope":"instance","$longname":"ConnectionService#sessions","$kind":"property","id":6414,"neoClassName":"Neo.ai.mcp.server.neural-link.services.ConnectionService"},{"comment":"/**\n     * WebSocket Server instance.\n     */","meta":{"range":[2170,2180],"filename":"ConnectionService.mjs","lineno":65,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/ai/mcp/server/neural-link/services","code":{"id":"astnode100035160","name":"wss","type":"ClassProperty"}},"description":"<p>WebSocket Server instance.</p>\n","name":"wss","longname":"ConnectionService#wss","kind":"member","memberof":"ConnectionService","scope":"instance","$longname":"ConnectionService#wss","$kind":"property","id":6415,"neoClassName":"Neo.ai.mcp.server.neural-link.services.ConnectionService"},{"comment":"/**\n     * Async initialization sequence.\n     * @returns {Promise<void>}\n     */","meta":{"range":[2272,2592],"filename":"ConnectionService.mjs","lineno":68,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/ai/mcp/server/neural-link/services","code":{"id":"astnode100035162","name":"ConnectionService#initAsync","type":"MethodDefinition","paramnames":[]},"vars":{"":null}},"description":"<p>Async initialization sequence.</p>\n","returns":[{"type":{"names":["Promise.<void>"]}}],"name":"initAsync","longname":"ConnectionService#initAsync","kind":"function","memberof":"ConnectionService","scope":"instance","params":[],"async":true,"$longname":"ConnectionService#initAsync","$kind":"method","id":6416,"neoClassName":"Neo.ai.mcp.server.neural-link.services.ConnectionService"},{"comment":"/**\n     * Retrieves a property from a component by its ID.\n     * @param {Object} opts The options object.\n     * @param {String} opts.id The component ID.\n     * @param {String} opts.property The property name to retrieve.\n     * @param {String} [opts.windowId] The target window ID.\n     * @returns {Promise<any>} The value of the property.\n     */","meta":{"range":[7710,7854],"filename":"ConnectionService.mjs","lineno":227,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/ai/mcp/server/neural-link/services","code":{"id":"astnode100035704","name":"ConnectionService#getComponentProperty","type":"MethodDefinition","paramnames":[""]},"vars":{"":null}},"description":"<p>Retrieves a property from a component by its ID.</p>\n","params":[{"type":{"names":["Object"]},"description":"<p>The options object.</p>\n","name":"opts"},{"type":{"names":["String"]},"description":"<p>The component ID.</p>\n","name":"opts.id"},{"type":{"names":["String"]},"description":"<p>The property name to retrieve.</p>\n","name":"opts.property"},{"type":{"names":["String"]},"optional":true,"description":"<p>The target window ID.</p>\n","name":"opts.windowId"}],"returns":[{"type":{"names":["Promise.<any>"]},"description":"The value of the property."}],"name":"getComponentProperty","longname":"ConnectionService#getComponentProperty","kind":"function","memberof":"ConnectionService","scope":"instance","async":true,"$longname":"ConnectionService#getComponentProperty","$kind":"method","id":6417,"neoClassName":"Neo.ai.mcp.server.neural-link.services.ConnectionService"},{"comment":"/**\n     * Retrieves the full component tree of the application.\n     * @param {Object} opts            The options object.\n     * @param {String} [opts.windowId] The target window ID.\n     * @returns {Promise<Object>} The component tree structure.\n     */","meta":{"range":[8121,8231],"filename":"ConnectionService.mjs","lineno":237,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/ai/mcp/server/neural-link/services","code":{"id":"astnode100035729","name":"ConnectionService#getComponentTree","type":"MethodDefinition","paramnames":[""]},"vars":{"":null}},"description":"<p>Retrieves the full component tree of the application.</p>\n","params":[{"type":{"names":["Object"]},"description":"<p>The options object.</p>\n","name":"opts"},{"type":{"names":["String"]},"optional":true,"description":"<p>The target window ID.</p>\n","name":"opts.windowId"}],"returns":[{"type":{"names":["Promise.<Object>"]},"description":"The component tree structure."}],"name":"getComponentTree","longname":"ConnectionService#getComponentTree","kind":"function","memberof":"ConnectionService","scope":"instance","async":true,"$longname":"ConnectionService#getComponentTree","$kind":"method","id":6418,"neoClassName":"Neo.ai.mcp.server.neural-link.services.ConnectionService"},{"comment":"/**\n     * Reloads the application page.\n     * @param {Object} opts            The options object.\n     * @param {String} [opts.windowId] The target window ID.\n     * @returns {Promise<void>}\n     */","meta":{"range":[8442,8539],"filename":"ConnectionService.mjs","lineno":247,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/ai/mcp/server/neural-link/services","code":{"id":"astnode100035746","name":"ConnectionService#reloadPage","type":"MethodDefinition","paramnames":[""]},"vars":{"":null}},"description":"<p>Reloads the application page.</p>\n","params":[{"type":{"names":["Object"]},"description":"<p>The options object.</p>\n","name":"opts"},{"type":{"names":["String"]},"optional":true,"description":"<p>The target window ID.</p>\n","name":"opts.windowId"}],"returns":[{"type":{"names":["Promise.<void>"]}}],"name":"reloadPage","longname":"ConnectionService#reloadPage","kind":"function","memberof":"ConnectionService","scope":"instance","async":true,"$longname":"ConnectionService#reloadPage","$kind":"method","id":6419,"neoClassName":"Neo.ai.mcp.server.neural-link.services.ConnectionService"},{"comment":"/**\n     * Sets a property on a component by its ID.\n     * @param {Object} opts            The options object.\n     * @param {String} opts.id         The component ID.\n     * @param {String} opts.property   The property name to set.\n     * @param {*}      opts.value      The value to set.\n     * @param {String} [opts.windowId] The target window ID.\n     * @returns {Promise<void>}\n     */","meta":{"range":[8941,9099],"filename":"ConnectionService.mjs","lineno":260,"columnno":4,"path":"/Users/Shared/github/neomjs/pages/node_modules/neo.mjs/ai/mcp/server/neural-link/services","code":{"id":"astnode100035763","name":"ConnectionService#setComponentProperty","type":"MethodDefinition","paramnames":[""]},"vars":{"":null}},"description":"<p>Sets a property on a component by its ID.</p>\n","params":[{"type":{"names":["Object"]},"description":"<p>The options object.</p>\n","name":"opts"},{"type":{"names":["String"]},"description":"<p>The component ID.</p>\n","name":"opts.id"},{"type":{"names":["String"]},"description":"<p>The property name to set.</p>\n","name":"opts.property"},{"type":{"names":["*"]},"description":"<p>The value to set.</p>\n","name":"opts.value"},{"type":{"names":["String"]},"optional":true,"description":"<p>The target window ID.</p>\n","name":"opts.windowId"}],"returns":[{"type":{"names":["Promise.<void>"]}}],"name":"setComponentProperty","longname":"ConnectionService#setComponentProperty","kind":"function","memberof":"ConnectionService","scope":"instance","async":true,"$longname":"ConnectionService#setComponentProperty","$kind":"method","id":6420,"neoClassName":"Neo.ai.mcp.server.neural-link.services.ConnectionService"}]}