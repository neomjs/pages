<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">/*

Siesta 5.3.0
Copyright(c) 2009-2019 Bryntum AB
https://bryntum.com/contact
https://bryntum.com/products/siesta/license

*/
Class(&#39;Ariadne.ExtJSDomQueryFinder.Identifier.CssClass&#39;, {
    
    isa         : Ariadne.DomQueryFinder.Identifier.CssClass,
    
    does        : Ariadne.ExtJSDomQueryFinder.Role.ExtJSHelper,
    
    has         : {
        ignoreCssClasses            : function () {
            return [
                // ignore focus, hover specific CSS classes
                &#39;-focus$&#39;,
                &#39;-focused$&#39;,
                &#39;-over$&#39;,
                &#39;-hover$&#39;,
                &#39;-selected$&#39;,
                &#39;-active$&#39;,
                &#39;-default$&#39;,
                &#39;x-form-dirty&#39;,
                &#39;x-grid-dirty-cell&#39;,
                &#39;x-unselectable&#39;,
                &#39;-toolbar-item$&#39;,
                &#39;-item-disabled&#39;,
                &#39;x-form-empty-field&#39;,
                &#39;x-grid-item-alt&#39;
//                ,
//                &#39;sch-event-inner&#39;,
//                &#39;x-table-layout-cell&#39;
            ]
        },
        
        lessRelevantCssClasses : function () {
            return [
                &#39;x-form-field&#39;,
                &#39;x-form-required-field&#39;,
                &#39;-layout&#39;,    
                &#39;-inner$&#39;,
                &#39;-default$&#39;,
                &#39;-box-&#39;,
                &#39;^x-tree-elbow&#39;
            ]
        }
    },

    
    methods : {
        
        initialize : function () {
            this.SUPERARG(arguments)
            
            var lessRelevantCssClasses  = this.lessRelevantCssClasses
            
            lessRelevantCssClasses.forEach(function (cls, index) {
                lessRelevantCssClasses[ index ] = new RegExp(cls)
            })
        },
        
        getWeightForCssClass : function (cls, target) {
            var prefix          = this.getExtCssClassPrefixRegexp(target)
            
            if (
                this.lessRelevantCssClasses.some(function (lessRelevantClsRegExp) {
                    return lessRelevantClsRegExp.test(cls)
                })
            ) 
                return 1000
            
            // no Ext or css class belongs to Ext - normal weight 
            if (!prefix || prefix.test(cls)) return 995
            
            // user-assigned css class - a bit lower weight to always prefer such classes
            return 950
        },
        
        
        ignoreCssClass : function (cls, dom) {
            var cmp     = this.getComponentOfDomElement(dom)
            
            if (cmp &amp;&amp; this.valueIsAutoGeneratedByComponent(cmp, cls)) return true
            
            return this.SUPER(cls, dom)
        },
        
        
        processCssClasses : function (classes, target) {
            var prefix          = this.getExtCssClassPrefixRegexp(target)
            
            if (!prefix) return classes
            
            classes.sort(function (cls1, cls2) {
                var test1   = prefix.test(cls1)
                var test2   = prefix.test(cls2)
                
                if (test1 &amp;&amp; !test2) return 1
                if (!test1 &amp;&amp; test2) return -1
                
                return 0
            })
            
            return classes
        }
    }
});

// old ignore classes

//        ignoreClasses           : function () {
//            return [
//                &#39;x-body&#39;,
//                &#39;x-box-item&#39;,
//                &#39;x-btn-wrap&#39;,
//                &#39;x-component&#39;,      // too generic
//                &#39;x-datepicker-cell&#39;,
//                &#39;x-fit-item&#39;,
//                &#39;x-form-field&#39;,     // too generic
//                &#39;x-form-empty-field&#39;,
//                &#39;x-form-required-field&#39;,
//                &#39;x-grid-cell-inner&#39;,  // we prefer &quot;x-grid-cell&quot;
//                &#39;x-grid-view&#39;,
//                &#39;x-grid-resize-marker&#39;,
//                &#39;x-layout&#39;,
//                &#39;x-menu-item-link&#39;,
//                &#39;x-noicon&#39;,
//                &#39;x-resizable-overlay&#39;,
//                &#39;x-tab-noicon&#39;,
//                &#39;x-tab-default-noicon&#39;,
//                &#39;x-tab-default&#39;,
//                &#39;x-tab-inner&#39;,
//                &#39;x-tab-button&#39;,
//                &#39;x-tab-text&#39;,
//                &#39;x-tab-icon&#39;,
//                &#39;x-tab-wrap&#39;,
//                &#39;x-tree-icon&#39;,
//                &#39;x-frame-mc&#39;,
//                &#39;x-trigger-index-&#39;,
//                &#39;x-unselectable&#39;,
//                &#39;x-grid-with-row-lines&#39;,
//                &#39;^x-autocontainer-&#39;,
//                &#39;^x-btn-inner&#39;,
//                &#39;x-column-header-text-inner&#39;,
//                &#39;^x-noborder&#39;,
//                &#39;x-box-inner&#39;,
//                &#39;x-monthpicker-item-inner&#39;,
//                &#39;x-box-target&#39;,
//                &#39;x-dd-drag-proxy&#39;,
//                // Ext3 panel body classes
//                &#39;x-panel-bwrap&#39;,
//
//                // Bryntum generic selectors
//                &#39;sch-gantt-terminal$&#39;,
//                &#39;sch-gantt-task-handle$&#39;,
//                &#39;sch-gantt-item$&#39;,
//                &#39;sch-terminal$&#39;,
//                &#39;sch-resizable-handle$&#39;,
//
//                // In case someone left garbage in the DOM
//                &#39;null&#39;,
//                &#39;undefined&#39;
//            ];
</pre>
</body>
</html>
